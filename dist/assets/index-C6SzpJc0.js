var J4=t=>{throw TypeError(t)};var kU=(t,s)=>()=>(s||t((s={exports:{}}).exports,s),s.exports);var gb=(t,s,n)=>s.has(t)||J4("Cannot "+n);var ge=(t,s,n)=>(gb(t,s,"read from private field"),n?n.call(t):s.get(t)),Kt=(t,s,n)=>s.has(t)?J4("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(t):s.set(t,n),St=(t,s,n,r)=>(gb(t,s,"write to private field"),r?r.call(t,n):s.set(t,n),n),gs=(t,s,n)=>(gb(t,s,"access private method"),n);var Sx=(t,s,n,r)=>({set _(a){St(t,s,a,n)},get _(){return ge(t,s,r)}});var KCe=kU((xke,Ag)=>{function EU(t,s){for(var n=0;n<s.length;n++){const r=s[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var Cx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ud(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vb={exports:{}},hm={},yb={exports:{}},bs={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X4;function PU(){if(X4)return bs;X4=1;var t=Symbol.for("react.element"),s=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),m=Symbol.iterator;function h(I){return I===null||typeof I!="object"?null:(I=m&&I[m]||I["@@iterator"],typeof I=="function"?I:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function y(I,W,q){this.props=I,this.context=W,this.refs=v,this.updater=q||p}y.prototype.isReactComponent={},y.prototype.setState=function(I,W){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,W,"setState")},y.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function j(){}j.prototype=y.prototype;function w(I,W,q){this.props=I,this.context=W,this.refs=v,this.updater=q||p}var N=w.prototype=new j;N.constructor=w,g(N,y.prototype),N.isPureReactComponent=!0;var _=Array.isArray,T=Object.prototype.hasOwnProperty,A={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function C(I,W,q){var Z,Q={},Y=null,K=null;if(W!=null)for(Z in W.ref!==void 0&&(K=W.ref),W.key!==void 0&&(Y=""+W.key),W)T.call(W,Z)&&!P.hasOwnProperty(Z)&&(Q[Z]=W[Z]);var ae=arguments.length-2;if(ae===1)Q.children=q;else if(1<ae){for(var se=Array(ae),de=0;de<ae;de++)se[de]=arguments[de+2];Q.children=se}if(I&&I.defaultProps)for(Z in ae=I.defaultProps,ae)Q[Z]===void 0&&(Q[Z]=ae[Z]);return{$$typeof:t,type:I,key:Y,ref:K,props:Q,_owner:A.current}}function O(I,W){return{$$typeof:t,type:I.type,key:W,ref:I.ref,props:I.props,_owner:I._owner}}function M(I){return typeof I=="object"&&I!==null&&I.$$typeof===t}function k(I){var W={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(q){return W[q]})}var E=/\/+/g;function R(I,W){return typeof I=="object"&&I!==null&&I.key!=null?k(""+I.key):W.toString(36)}function F(I,W,q,Z,Q){var Y=typeof I;(Y==="undefined"||Y==="boolean")&&(I=null);var K=!1;if(I===null)K=!0;else switch(Y){case"string":case"number":K=!0;break;case"object":switch(I.$$typeof){case t:case s:K=!0}}if(K)return K=I,Q=Q(K),I=Z===""?"."+R(K,0):Z,_(Q)?(q="",I!=null&&(q=I.replace(E,"$&/")+"/"),F(Q,W,q,"",function(de){return de})):Q!=null&&(M(Q)&&(Q=O(Q,q+(!Q.key||K&&K.key===Q.key?"":(""+Q.key).replace(E,"$&/")+"/")+I)),W.push(Q)),1;if(K=0,Z=Z===""?".":Z+":",_(I))for(var ae=0;ae<I.length;ae++){Y=I[ae];var se=Z+R(Y,ae);K+=F(Y,W,q,se,Q)}else if(se=h(I),typeof se=="function")for(I=se.call(I),ae=0;!(Y=I.next()).done;)Y=Y.value,se=Z+R(Y,ae++),K+=F(Y,W,q,se,Q);else if(Y==="object")throw W=String(I),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return K}function z(I,W,q){if(I==null)return I;var Z=[],Q=0;return F(I,Z,"","",function(Y){return W.call(q,Y,Q++)}),Z}function V(I){if(I._status===-1){var W=I._result;W=W(),W.then(function(q){(I._status===0||I._status===-1)&&(I._status=1,I._result=q)},function(q){(I._status===0||I._status===-1)&&(I._status=2,I._result=q)}),I._status===-1&&(I._status=0,I._result=W)}if(I._status===1)return I._result.default;throw I._result}var U={current:null},B={transition:null},$={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:B,ReactCurrentOwner:A};function L(){throw Error("act(...) is not supported in production builds of React.")}return bs.Children={map:z,forEach:function(I,W,q){z(I,function(){W.apply(this,arguments)},q)},count:function(I){var W=0;return z(I,function(){W++}),W},toArray:function(I){return z(I,function(W){return W})||[]},only:function(I){if(!M(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},bs.Component=y,bs.Fragment=n,bs.Profiler=a,bs.PureComponent=w,bs.StrictMode=r,bs.Suspense=c,bs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$,bs.act=L,bs.cloneElement=function(I,W,q){if(I==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+I+".");var Z=g({},I.props),Q=I.key,Y=I.ref,K=I._owner;if(W!=null){if(W.ref!==void 0&&(Y=W.ref,K=A.current),W.key!==void 0&&(Q=""+W.key),I.type&&I.type.defaultProps)var ae=I.type.defaultProps;for(se in W)T.call(W,se)&&!P.hasOwnProperty(se)&&(Z[se]=W[se]===void 0&&ae!==void 0?ae[se]:W[se])}var se=arguments.length-2;if(se===1)Z.children=q;else if(1<se){ae=Array(se);for(var de=0;de<se;de++)ae[de]=arguments[de+2];Z.children=ae}return{$$typeof:t,type:I.type,key:Q,ref:Y,props:Z,_owner:K}},bs.createContext=function(I){return I={$$typeof:l,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},I.Provider={$$typeof:i,_context:I},I.Consumer=I},bs.createElement=C,bs.createFactory=function(I){var W=C.bind(null,I);return W.type=I,W},bs.createRef=function(){return{current:null}},bs.forwardRef=function(I){return{$$typeof:o,render:I}},bs.isValidElement=M,bs.lazy=function(I){return{$$typeof:d,_payload:{_status:-1,_result:I},_init:V}},bs.memo=function(I,W){return{$$typeof:u,type:I,compare:W===void 0?null:W}},bs.startTransition=function(I){var W=B.transition;B.transition={};try{I()}finally{B.transition=W}},bs.unstable_act=L,bs.useCallback=function(I,W){return U.current.useCallback(I,W)},bs.useContext=function(I){return U.current.useContext(I)},bs.useDebugValue=function(){},bs.useDeferredValue=function(I){return U.current.useDeferredValue(I)},bs.useEffect=function(I,W){return U.current.useEffect(I,W)},bs.useId=function(){return U.current.useId()},bs.useImperativeHandle=function(I,W,q){return U.current.useImperativeHandle(I,W,q)},bs.useInsertionEffect=function(I,W){return U.current.useInsertionEffect(I,W)},bs.useLayoutEffect=function(I,W){return U.current.useLayoutEffect(I,W)},bs.useMemo=function(I,W){return U.current.useMemo(I,W)},bs.useReducer=function(I,W,q){return U.current.useReducer(I,W,q)},bs.useRef=function(I){return U.current.useRef(I)},bs.useState=function(I){return U.current.useState(I)},bs.useSyncExternalStore=function(I,W,q){return U.current.useSyncExternalStore(I,W,q)},bs.useTransition=function(){return U.current.useTransition()},bs.version="18.3.1",bs}var Z4;function Of(){return Z4||(Z4=1,yb.exports=PU()),yb.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eE;function TU(){if(eE)return hm;eE=1;var t=Of(),s=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(o,c,u){var d,m={},h=null,p=null;u!==void 0&&(h=""+u),c.key!==void 0&&(h=""+c.key),c.ref!==void 0&&(p=c.ref);for(d in c)r.call(c,d)&&!i.hasOwnProperty(d)&&(m[d]=c[d]);if(o&&o.defaultProps)for(d in c=o.defaultProps,c)m[d]===void 0&&(m[d]=c[d]);return{$$typeof:s,type:o,key:h,ref:p,props:m,_owner:a.current}}return hm.Fragment=n,hm.jsx=l,hm.jsxs=l,hm}var tE;function AU(){return tE||(tE=1,vb.exports=TU()),vb.exports}var e=AU(),b=Of();const Be=ud(b),P1=EU({__proto__:null,default:Be},[b]);var kx={},bb={exports:{}},Gr={},jb={exports:{}},wb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sE;function MU(){return sE||(sE=1,(function(t){function s(B,$){var L=B.length;B.push($);e:for(;0<L;){var I=L-1>>>1,W=B[I];if(0<a(W,$))B[I]=$,B[L]=W,L=I;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var $=B[0],L=B.pop();if(L!==$){B[0]=L;e:for(var I=0,W=B.length,q=W>>>1;I<q;){var Z=2*(I+1)-1,Q=B[Z],Y=Z+1,K=B[Y];if(0>a(Q,L))Y<W&&0>a(K,Q)?(B[I]=K,B[Y]=L,I=Y):(B[I]=Q,B[Z]=L,I=Z);else if(Y<W&&0>a(K,L))B[I]=K,B[Y]=L,I=Y;else break e}}return $}function a(B,$){var L=B.sortIndex-$.sortIndex;return L!==0?L:B.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],u=[],d=1,m=null,h=3,p=!1,g=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(B){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=B)r(u),$.sortIndex=$.expirationTime,s(c,$);else break;$=n(u)}}function _(B){if(v=!1,N(B),!g)if(n(c)!==null)g=!0,V(T);else{var $=n(u);$!==null&&U(_,$.startTime-B)}}function T(B,$){g=!1,v&&(v=!1,j(C),C=-1),p=!0;var L=h;try{for(N($),m=n(c);m!==null&&(!(m.expirationTime>$)||B&&!k());){var I=m.callback;if(typeof I=="function"){m.callback=null,h=m.priorityLevel;var W=I(m.expirationTime<=$);$=t.unstable_now(),typeof W=="function"?m.callback=W:m===n(c)&&r(c),N($)}else r(c);m=n(c)}if(m!==null)var q=!0;else{var Z=n(u);Z!==null&&U(_,Z.startTime-$),q=!1}return q}finally{m=null,h=L,p=!1}}var A=!1,P=null,C=-1,O=5,M=-1;function k(){return!(t.unstable_now()-M<O)}function E(){if(P!==null){var B=t.unstable_now();M=B;var $=!0;try{$=P(!0,B)}finally{$?R():(A=!1,P=null)}}else A=!1}var R;if(typeof w=="function")R=function(){w(E)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,z=F.port2;F.port1.onmessage=E,R=function(){z.postMessage(null)}}else R=function(){y(E,0)};function V(B){P=B,A||(A=!0,R())}function U(B,$){C=y(function(){B(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,V(T))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(B){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var L=h;h=$;try{return B()}finally{h=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,$){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var L=h;h=B;try{return $()}finally{h=L}},t.unstable_scheduleCallback=function(B,$,L){var I=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?I+L:I):L=I,B){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=L+W,B={id:d++,callback:$,priorityLevel:B,startTime:L,expirationTime:W,sortIndex:-1},L>I?(B.sortIndex=L,s(u,B),n(c)===null&&B===n(u)&&(v?(j(C),C=-1):v=!0,U(_,L-I))):(B.sortIndex=W,s(c,B),g||p||(g=!0,V(T))),B},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(B){var $=h;return function(){var L=h;h=$;try{return B.apply(this,arguments)}finally{h=L}}}})(wb)),wb}var nE;function DU(){return nE||(nE=1,jb.exports=MU()),jb.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rE;function OU(){if(rE)return Gr;rE=1;var t=Of(),s=DU();function n(f){for(var x="https://reactjs.org/docs/error-decoder.html?invariant="+f,S=1;S<arguments.length;S++)x+="&args[]="+encodeURIComponent(arguments[S]);return"Minified React error #"+f+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,a={};function i(f,x){l(f,x),l(f+"Capture",x)}function l(f,x){for(a[f]=x,f=0;f<x.length;f++)r.add(x[f])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},m={};function h(f){return c.call(m,f)?!0:c.call(d,f)?!1:u.test(f)?m[f]=!0:(d[f]=!0,!1)}function p(f,x,S,D){if(S!==null&&S.type===0)return!1;switch(typeof x){case"function":case"symbol":return!0;case"boolean":return D?!1:S!==null?!S.acceptsBooleans:(f=f.toLowerCase().slice(0,5),f!=="data-"&&f!=="aria-");default:return!1}}function g(f,x,S,D){if(x===null||typeof x>"u"||p(f,x,S,D))return!0;if(D)return!1;if(S!==null)switch(S.type){case 3:return!x;case 4:return x===!1;case 5:return isNaN(x);case 6:return isNaN(x)||1>x}return!1}function v(f,x,S,D,H,G,ne){this.acceptsBooleans=x===2||x===3||x===4,this.attributeName=D,this.attributeNamespace=H,this.mustUseProperty=S,this.propertyName=f,this.type=x,this.sanitizeURL=G,this.removeEmptyString=ne}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(f){y[f]=new v(f,0,!1,f,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(f){var x=f[0];y[x]=new v(x,1,!1,f[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(f){y[f]=new v(f,2,!1,f.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(f){y[f]=new v(f,2,!1,f,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(f){y[f]=new v(f,3,!1,f.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(f){y[f]=new v(f,3,!0,f,null,!1,!1)}),["capture","download"].forEach(function(f){y[f]=new v(f,4,!1,f,null,!1,!1)}),["cols","rows","size","span"].forEach(function(f){y[f]=new v(f,6,!1,f,null,!1,!1)}),["rowSpan","start"].forEach(function(f){y[f]=new v(f,5,!1,f.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function w(f){return f[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(f){var x=f.replace(j,w);y[x]=new v(x,1,!1,f,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(f){var x=f.replace(j,w);y[x]=new v(x,1,!1,f,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(f){var x=f.replace(j,w);y[x]=new v(x,1,!1,f,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(f){y[f]=new v(f,1,!1,f.toLowerCase(),null,!1,!1)}),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(f){y[f]=new v(f,1,!1,f.toLowerCase(),null,!0,!0)});function N(f,x,S,D){var H=y.hasOwnProperty(x)?y[x]:null;(H!==null?H.type!==0:D||!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(g(x,S,H,D)&&(S=null),D||H===null?h(x)&&(S===null?f.removeAttribute(x):f.setAttribute(x,""+S)):H.mustUseProperty?f[H.propertyName]=S===null?H.type===3?!1:"":S:(x=H.attributeName,D=H.attributeNamespace,S===null?f.removeAttribute(x):(H=H.type,S=H===3||H===4&&S===!0?"":""+S,D?f.setAttributeNS(D,x,S):f.setAttribute(x,S))))}var _=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=Symbol.for("react.element"),A=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),k=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),U=Symbol.for("react.offscreen"),B=Symbol.iterator;function $(f){return f===null||typeof f!="object"?null:(f=B&&f[B]||f["@@iterator"],typeof f=="function"?f:null)}var L=Object.assign,I;function W(f){if(I===void 0)try{throw Error()}catch(S){var x=S.stack.trim().match(/\n( *(at )?)/);I=x&&x[1]||""}return`
`+I+f}var q=!1;function Z(f,x){if(!f||q)return"";q=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(x)if(x=function(){throw Error()},Object.defineProperty(x.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(x,[])}catch(Re){var D=Re}Reflect.construct(f,[],x)}else{try{x.call()}catch(Re){D=Re}f.call(x.prototype)}else{try{throw Error()}catch(Re){D=Re}f()}}catch(Re){if(Re&&D&&typeof Re.stack=="string"){for(var H=Re.stack.split(`
`),G=D.stack.split(`
`),ne=H.length-1,fe=G.length-1;1<=ne&&0<=fe&&H[ne]!==G[fe];)fe--;for(;1<=ne&&0<=fe;ne--,fe--)if(H[ne]!==G[fe]){if(ne!==1||fe!==1)do if(ne--,fe--,0>fe||H[ne]!==G[fe]){var be=`
`+H[ne].replace(" at new "," at ");return f.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",f.displayName)),be}while(1<=ne&&0<=fe);break}}}finally{q=!1,Error.prepareStackTrace=S}return(f=f?f.displayName||f.name:"")?W(f):""}function Q(f){switch(f.tag){case 5:return W(f.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return f=Z(f.type,!1),f;case 11:return f=Z(f.type.render,!1),f;case 1:return f=Z(f.type,!0),f;default:return""}}function Y(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case P:return"Fragment";case A:return"Portal";case O:return"Profiler";case C:return"StrictMode";case R:return"Suspense";case F:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case k:return(f.displayName||"Context")+".Consumer";case M:return(f._context.displayName||"Context")+".Provider";case E:var x=f.render;return f=f.displayName,f||(f=x.displayName||x.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case z:return x=f.displayName||null,x!==null?x:Y(f.type)||"Memo";case V:x=f._payload,f=f._init;try{return Y(f(x))}catch{}}return null}function K(f){var x=f.type;switch(f.tag){case 24:return"Cache";case 9:return(x.displayName||"Context")+".Consumer";case 10:return(x._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=x.render,f=f.displayName||f.name||"",x.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return x;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Y(x);case 8:return x===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x}return null}function ae(f){switch(typeof f){case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function se(f){var x=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(x==="checkbox"||x==="radio")}function de(f){var x=se(f)?"checked":"value",S=Object.getOwnPropertyDescriptor(f.constructor.prototype,x),D=""+f[x];if(!f.hasOwnProperty(x)&&typeof S<"u"&&typeof S.get=="function"&&typeof S.set=="function"){var H=S.get,G=S.set;return Object.defineProperty(f,x,{configurable:!0,get:function(){return H.call(this)},set:function(ne){D=""+ne,G.call(this,ne)}}),Object.defineProperty(f,x,{enumerable:S.enumerable}),{getValue:function(){return D},setValue:function(ne){D=""+ne},stopTracking:function(){f._valueTracker=null,delete f[x]}}}}function ue(f){f._valueTracker||(f._valueTracker=de(f))}function oe(f){if(!f)return!1;var x=f._valueTracker;if(!x)return!0;var S=x.getValue(),D="";return f&&(D=se(f)?f.checked?"true":"false":f.value),f=D,f!==S?(x.setValue(f),!0):!1}function pe(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}function je(f,x){var S=x.checked;return L({},x,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:S??f._wrapperState.initialChecked})}function we(f,x){var S=x.defaultValue==null?"":x.defaultValue,D=x.checked!=null?x.checked:x.defaultChecked;S=ae(x.value!=null?x.value:S),f._wrapperState={initialChecked:D,initialValue:S,controlled:x.type==="checkbox"||x.type==="radio"?x.checked!=null:x.value!=null}}function qe(f,x){x=x.checked,x!=null&&N(f,"checked",x,!1)}function ze(f,x){qe(f,x);var S=ae(x.value),D=x.type;if(S!=null)D==="number"?(S===0&&f.value===""||f.value!=S)&&(f.value=""+S):f.value!==""+S&&(f.value=""+S);else if(D==="submit"||D==="reset"){f.removeAttribute("value");return}x.hasOwnProperty("value")?Ce(f,x.type,S):x.hasOwnProperty("defaultValue")&&Ce(f,x.type,ae(x.defaultValue)),x.checked==null&&x.defaultChecked!=null&&(f.defaultChecked=!!x.defaultChecked)}function Ee(f,x,S){if(x.hasOwnProperty("value")||x.hasOwnProperty("defaultValue")){var D=x.type;if(!(D!=="submit"&&D!=="reset"||x.value!==void 0&&x.value!==null))return;x=""+f._wrapperState.initialValue,S||x===f.value||(f.value=x),f.defaultValue=x}S=f.name,S!==""&&(f.name=""),f.defaultChecked=!!f._wrapperState.initialChecked,S!==""&&(f.name=S)}function Ce(f,x,S){(x!=="number"||pe(f.ownerDocument)!==f)&&(S==null?f.defaultValue=""+f._wrapperState.initialValue:f.defaultValue!==""+S&&(f.defaultValue=""+S))}var Ge=Array.isArray;function Ye(f,x,S,D){if(f=f.options,x){x={};for(var H=0;H<S.length;H++)x["$"+S[H]]=!0;for(S=0;S<f.length;S++)H=x.hasOwnProperty("$"+f[S].value),f[S].selected!==H&&(f[S].selected=H),H&&D&&(f[S].defaultSelected=!0)}else{for(S=""+ae(S),x=null,H=0;H<f.length;H++){if(f[H].value===S){f[H].selected=!0,D&&(f[H].defaultSelected=!0);return}x!==null||f[H].disabled||(x=f[H])}x!==null&&(x.selected=!0)}}function De(f,x){if(x.dangerouslySetInnerHTML!=null)throw Error(n(91));return L({},x,{value:void 0,defaultValue:void 0,children:""+f._wrapperState.initialValue})}function it(f,x){var S=x.value;if(S==null){if(S=x.children,x=x.defaultValue,S!=null){if(x!=null)throw Error(n(92));if(Ge(S)){if(1<S.length)throw Error(n(93));S=S[0]}x=S}x==null&&(x=""),S=x}f._wrapperState={initialValue:ae(S)}}function Se(f,x){var S=ae(x.value),D=ae(x.defaultValue);S!=null&&(S=""+S,S!==f.value&&(f.value=S),x.defaultValue==null&&f.defaultValue!==S&&(f.defaultValue=S)),D!=null&&(f.defaultValue=""+D)}function at(f){var x=f.textContent;x===f._wrapperState.initialValue&&x!==""&&x!==null&&(f.value=x)}function _e(f){switch(f){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $e(f,x){return f==null||f==="http://www.w3.org/1999/xhtml"?_e(x):f==="http://www.w3.org/2000/svg"&&x==="foreignObject"?"http://www.w3.org/1999/xhtml":f}var nt,dt=(function(f){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(x,S,D,H){MSApp.execUnsafeLocalFunction(function(){return f(x,S,D,H)})}:f})(function(f,x){if(f.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in f)f.innerHTML=x;else{for(nt=nt||document.createElement("div"),nt.innerHTML="<svg>"+x.valueOf().toString()+"</svg>",x=nt.firstChild;f.firstChild;)f.removeChild(f.firstChild);for(;x.firstChild;)f.appendChild(x.firstChild)}});function lt(f,x){if(x){var S=f.firstChild;if(S&&S===f.lastChild&&S.nodeType===3){S.nodeValue=x;return}}f.textContent=x}var Rt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},es=["Webkit","ms","Moz","O"];Object.keys(Rt).forEach(function(f){es.forEach(function(x){x=x+f.charAt(0).toUpperCase()+f.substring(1),Rt[x]=Rt[f]})});function Bs(f,x,S){return x==null||typeof x=="boolean"||x===""?"":S||typeof x!="number"||x===0||Rt.hasOwnProperty(f)&&Rt[f]?(""+x).trim():x+"px"}function Ss(f,x){f=f.style;for(var S in x)if(x.hasOwnProperty(S)){var D=S.indexOf("--")===0,H=Bs(S,x[S],D);S==="float"&&(S="cssFloat"),D?f.setProperty(S,H):f[S]=H}}var on=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jt(f,x){if(x){if(on[f]&&(x.children!=null||x.dangerouslySetInnerHTML!=null))throw Error(n(137,f));if(x.dangerouslySetInnerHTML!=null){if(x.children!=null)throw Error(n(60));if(typeof x.dangerouslySetInnerHTML!="object"||!("__html"in x.dangerouslySetInnerHTML))throw Error(n(61))}if(x.style!=null&&typeof x.style!="object")throw Error(n(62))}}function fn(f,x){if(f.indexOf("-")===-1)return typeof x.is=="string";switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ds=null;function jr(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var Hn=null,Je=null,bt=null;function hs(f){if(f=Jh(f)){if(typeof Hn!="function")throw Error(n(280));var x=f.stateNode;x&&(x=qp(x),Hn(f.stateNode,f.type,x))}}function Ne(f){Je?bt?bt.push(f):bt=[f]:Je=f}function ut(){if(Je){var f=Je,x=bt;if(bt=Je=null,hs(f),x)for(f=0;f<x.length;f++)hs(x[f])}}function Te(f,x){return f(x)}function Ze(){}var yt=!1;function as(f,x,S){if(yt)return f(x,S);yt=!0;try{return Te(f,x,S)}finally{yt=!1,(Je!==null||bt!==null)&&(Ze(),ut())}}function ds(f,x){var S=f.stateNode;if(S===null)return null;var D=qp(S);if(D===null)return null;S=D[x];e:switch(x){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(D=!D.disabled)||(f=f.type,D=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!D;break e;default:f=!1}if(f)return null;if(S&&typeof S!="function")throw Error(n(231,x,typeof S));return S}var Qs=!1;if(o)try{var ms={};Object.defineProperty(ms,"passive",{get:function(){Qs=!0}}),window.addEventListener("test",ms,ms),window.removeEventListener("test",ms,ms)}catch{Qs=!1}function Ir(f,x,S,D,H,G,ne,fe,be){var Re=Array.prototype.slice.call(arguments,3);try{x.apply(S,Re)}catch(rt){this.onError(rt)}}var vn=!1,tr=null,Br=!1,ua=null,ve={onError:function(f){vn=!0,tr=f}};function ft(f,x,S,D,H,G,ne,fe,be){vn=!1,tr=null,Ir.apply(ve,arguments)}function xt(f,x,S,D,H,G,ne,fe,be){if(ft.apply(this,arguments),vn){if(vn){var Re=tr;vn=!1,tr=null}else throw Error(n(198));Br||(Br=!0,ua=Re)}}function Tt(f){var x=f,S=f;if(f.alternate)for(;x.return;)x=x.return;else{f=x;do x=f,(x.flags&4098)!==0&&(S=x.return),f=x.return;while(f)}return x.tag===3?S:null}function Cs(f){if(f.tag===13){var x=f.memoizedState;if(x===null&&(f=f.alternate,f!==null&&(x=f.memoizedState)),x!==null)return x.dehydrated}return null}function qr(f){if(Tt(f)!==f)throw Error(n(188))}function ki(f){var x=f.alternate;if(!x){if(x=Tt(f),x===null)throw Error(n(188));return x!==f?null:f}for(var S=f,D=x;;){var H=S.return;if(H===null)break;var G=H.alternate;if(G===null){if(D=H.return,D!==null){S=D;continue}break}if(H.child===G.child){for(G=H.child;G;){if(G===S)return qr(H),f;if(G===D)return qr(H),x;G=G.sibling}throw Error(n(188))}if(S.return!==D.return)S=H,D=G;else{for(var ne=!1,fe=H.child;fe;){if(fe===S){ne=!0,S=H,D=G;break}if(fe===D){ne=!0,D=H,S=G;break}fe=fe.sibling}if(!ne){for(fe=G.child;fe;){if(fe===S){ne=!0,S=G,D=H;break}if(fe===D){ne=!0,D=G,S=H;break}fe=fe.sibling}if(!ne)throw Error(n(189))}}if(S.alternate!==D)throw Error(n(190))}if(S.tag!==3)throw Error(n(188));return S.stateNode.current===S?f:x}function Pn(f){return f=ki(f),f!==null?_d(f):null}function _d(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var x=_d(f);if(x!==null)return x;f=f.sibling}return null}var Sd=s.unstable_scheduleCallback,Cd=s.unstable_cancelCallback,Dh=s.unstable_shouldYield,ic=s.unstable_requestPaint,sn=s.unstable_now,Oh=s.unstable_getCurrentPriorityLevel,to=s.unstable_ImmediatePriority,ul=s.unstable_UserBlockingPriority,zr=s.unstable_NormalPriority,kd=s.unstable_LowPriority,Ed=s.unstable_IdlePriority,hl=null,wr=null;function Pd(f){if(wr&&typeof wr.onCommitFiberRoot=="function")try{wr.onCommitFiberRoot(hl,f,void 0,(f.current.flags&128)===128)}catch{}}var xe=Math.clz32?Math.clz32:Us,$t=Math.log,et=Math.LN2;function Us(f){return f>>>=0,f===0?32:31-($t(f)/et|0)|0}var Ft=64,sr=4194304;function $r(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function Ei(f,x){var S=f.pendingLanes;if(S===0)return 0;var D=0,H=f.suspendedLanes,G=f.pingedLanes,ne=S&268435455;if(ne!==0){var fe=ne&~H;fe!==0?D=$r(fe):(G&=ne,G!==0&&(D=$r(G)))}else ne=S&~H,ne!==0?D=$r(ne):G!==0&&(D=$r(G));if(D===0)return 0;if(x!==0&&x!==D&&(x&H)===0&&(H=D&-D,G=x&-x,H>=G||H===16&&(G&4194240)!==0))return x;if((D&4)!==0&&(D|=S&16),x=f.entangledLanes,x!==0)for(f=f.entanglements,x&=D;0<x;)S=31-xe(x),H=1<<S,D|=f[S],x&=~H;return D}function $v(f,x){switch(f){case 1:case 2:case 4:return x+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Np(f,x){for(var S=f.suspendedLanes,D=f.pingedLanes,H=f.expirationTimes,G=f.pendingLanes;0<G;){var ne=31-xe(G),fe=1<<ne,be=H[ne];be===-1?((fe&S)===0||(fe&D)!==0)&&(H[ne]=$v(fe,x)):be<=x&&(f.expiredLanes|=fe),G&=~fe}}function lc(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function _p(){var f=Ft;return Ft<<=1,(Ft&4194240)===0&&(Ft=64),f}function Td(f){for(var x=[],S=0;31>S;S++)x.push(f);return x}function so(f,x,S){f.pendingLanes|=x,x!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,x=31-xe(x),f[x]=S}function Sp(f,x){var S=f.pendingLanes&~x;f.pendingLanes=x,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=x,f.mutableReadLanes&=x,f.entangledLanes&=x,x=f.entanglements;var D=f.eventTimes;for(f=f.expirationTimes;0<S;){var H=31-xe(S),G=1<<H;x[H]=0,D[H]=-1,f[H]=-1,S&=~G}}function Ad(f,x){var S=f.entangledLanes|=x;for(f=f.entanglements;S;){var D=31-xe(S),H=1<<D;H&x|f[D]&x&&(f[D]|=x),S&=~H}}var ie=0;function Oe(f){return f&=-f,1<f?4<f?(f&268435455)!==0?16:536870912:4:1}var He,wt,ks,Nr,ei,_n=!1,yn=[],Pi=null,no=null,ro=null,Rh=new Map,Fh=new Map,ao=[],Yz="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function OC(f,x){switch(f){case"focusin":case"focusout":Pi=null;break;case"dragenter":case"dragleave":no=null;break;case"mouseover":case"mouseout":ro=null;break;case"pointerover":case"pointerout":Rh.delete(x.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fh.delete(x.pointerId)}}function Lh(f,x,S,D,H,G){return f===null||f.nativeEvent!==G?(f={blockedOn:x,domEventName:S,eventSystemFlags:D,nativeEvent:G,targetContainers:[H]},x!==null&&(x=Jh(x),x!==null&&wt(x)),f):(f.eventSystemFlags|=D,x=f.targetContainers,H!==null&&x.indexOf(H)===-1&&x.push(H),f)}function Qz(f,x,S,D,H){switch(x){case"focusin":return Pi=Lh(Pi,f,x,S,D,H),!0;case"dragenter":return no=Lh(no,f,x,S,D,H),!0;case"mouseover":return ro=Lh(ro,f,x,S,D,H),!0;case"pointerover":var G=H.pointerId;return Rh.set(G,Lh(Rh.get(G)||null,f,x,S,D,H)),!0;case"gotpointercapture":return G=H.pointerId,Fh.set(G,Lh(Fh.get(G)||null,f,x,S,D,H)),!0}return!1}function RC(f){var x=oc(f.target);if(x!==null){var S=Tt(x);if(S!==null){if(x=S.tag,x===13){if(x=Cs(S),x!==null){f.blockedOn=x,ei(f.priority,function(){ks(S)});return}}else if(x===3&&S.stateNode.current.memoizedState.isDehydrated){f.blockedOn=S.tag===3?S.stateNode.containerInfo:null;return}}}f.blockedOn=null}function Cp(f){if(f.blockedOn!==null)return!1;for(var x=f.targetContainers;0<x.length;){var S=Vv(f.domEventName,f.eventSystemFlags,x[0],f.nativeEvent);if(S===null){S=f.nativeEvent;var D=new S.constructor(S.type,S);Ds=D,S.target.dispatchEvent(D),Ds=null}else return x=Jh(S),x!==null&&wt(x),f.blockedOn=S,!1;x.shift()}return!0}function FC(f,x,S){Cp(f)&&S.delete(x)}function Jz(){_n=!1,Pi!==null&&Cp(Pi)&&(Pi=null),no!==null&&Cp(no)&&(no=null),ro!==null&&Cp(ro)&&(ro=null),Rh.forEach(FC),Fh.forEach(FC)}function Ih(f,x){f.blockedOn===x&&(f.blockedOn=null,_n||(_n=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Jz)))}function Bh(f){function x(H){return Ih(H,f)}if(0<yn.length){Ih(yn[0],f);for(var S=1;S<yn.length;S++){var D=yn[S];D.blockedOn===f&&(D.blockedOn=null)}}for(Pi!==null&&Ih(Pi,f),no!==null&&Ih(no,f),ro!==null&&Ih(ro,f),Rh.forEach(x),Fh.forEach(x),S=0;S<ao.length;S++)D=ao[S],D.blockedOn===f&&(D.blockedOn=null);for(;0<ao.length&&(S=ao[0],S.blockedOn===null);)RC(S),S.blockedOn===null&&ao.shift()}var Md=_.ReactCurrentBatchConfig,kp=!0;function Xz(f,x,S,D){var H=ie,G=Md.transition;Md.transition=null;try{ie=1,Uv(f,x,S,D)}finally{ie=H,Md.transition=G}}function Zz(f,x,S,D){var H=ie,G=Md.transition;Md.transition=null;try{ie=4,Uv(f,x,S,D)}finally{ie=H,Md.transition=G}}function Uv(f,x,S,D){if(kp){var H=Vv(f,x,S,D);if(H===null)ly(f,x,D,Ep,S),OC(f,D);else if(Qz(H,f,x,S,D))D.stopPropagation();else if(OC(f,D),x&4&&-1<Yz.indexOf(f)){for(;H!==null;){var G=Jh(H);if(G!==null&&He(G),G=Vv(f,x,S,D),G===null&&ly(f,x,D,Ep,S),G===H)break;H=G}H!==null&&D.stopPropagation()}else ly(f,x,D,null,S)}}var Ep=null;function Vv(f,x,S,D){if(Ep=null,f=jr(D),f=oc(f),f!==null)if(x=Tt(f),x===null)f=null;else if(S=x.tag,S===13){if(f=Cs(x),f!==null)return f;f=null}else if(S===3){if(x.stateNode.current.memoizedState.isDehydrated)return x.tag===3?x.stateNode.containerInfo:null;f=null}else x!==f&&(f=null);return Ep=f,null}function LC(f){switch(f){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Oh()){case to:return 1;case ul:return 4;case zr:case kd:return 16;case Ed:return 536870912;default:return 16}default:return 16}}var io=null,Wv=null,Pp=null;function IC(){if(Pp)return Pp;var f,x=Wv,S=x.length,D,H="value"in io?io.value:io.textContent,G=H.length;for(f=0;f<S&&x[f]===H[f];f++);var ne=S-f;for(D=1;D<=ne&&x[S-D]===H[G-D];D++);return Pp=H.slice(f,1<D?1-D:void 0)}function Tp(f){var x=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&x===13&&(f=13)):f=x,f===10&&(f=13),32<=f||f===13?f:0}function Ap(){return!0}function BC(){return!1}function ha(f){function x(S,D,H,G,ne){this._reactName=S,this._targetInst=H,this.type=D,this.nativeEvent=G,this.target=ne,this.currentTarget=null;for(var fe in f)f.hasOwnProperty(fe)&&(S=f[fe],this[fe]=S?S(G):G[fe]);return this.isDefaultPrevented=(G.defaultPrevented!=null?G.defaultPrevented:G.returnValue===!1)?Ap:BC,this.isPropagationStopped=BC,this}return L(x.prototype,{preventDefault:function(){this.defaultPrevented=!0;var S=this.nativeEvent;S&&(S.preventDefault?S.preventDefault():typeof S.returnValue!="unknown"&&(S.returnValue=!1),this.isDefaultPrevented=Ap)},stopPropagation:function(){var S=this.nativeEvent;S&&(S.stopPropagation?S.stopPropagation():typeof S.cancelBubble!="unknown"&&(S.cancelBubble=!0),this.isPropagationStopped=Ap)},persist:function(){},isPersistent:Ap}),x}var Dd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hv=ha(Dd),qh=L({},Dd,{view:0,detail:0}),e$=ha(qh),Kv,Gv,zh,Mp=L({},qh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qv,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==zh&&(zh&&f.type==="mousemove"?(Kv=f.screenX-zh.screenX,Gv=f.screenY-zh.screenY):Gv=Kv=0,zh=f),Kv)},movementY:function(f){return"movementY"in f?f.movementY:Gv}}),qC=ha(Mp),t$=L({},Mp,{dataTransfer:0}),s$=ha(t$),n$=L({},qh,{relatedTarget:0}),Yv=ha(n$),r$=L({},Dd,{animationName:0,elapsedTime:0,pseudoElement:0}),a$=ha(r$),i$=L({},Dd,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),l$=ha(i$),o$=L({},Dd,{data:0}),zC=ha(o$),c$={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},d$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},u$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function h$(f){var x=this.nativeEvent;return x.getModifierState?x.getModifierState(f):(f=u$[f])?!!x[f]:!1}function Qv(){return h$}var m$=L({},qh,{key:function(f){if(f.key){var x=c$[f.key]||f.key;if(x!=="Unidentified")return x}return f.type==="keypress"?(f=Tp(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?d$[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qv,charCode:function(f){return f.type==="keypress"?Tp(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?Tp(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),f$=ha(m$),p$=L({},Mp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$C=ha(p$),x$=L({},qh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qv}),g$=ha(x$),v$=L({},Dd,{propertyName:0,elapsedTime:0,pseudoElement:0}),y$=ha(v$),b$=L({},Mp,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),j$=ha(b$),w$=[9,13,27,32],Jv=o&&"CompositionEvent"in window,$h=null;o&&"documentMode"in document&&($h=document.documentMode);var N$=o&&"TextEvent"in window&&!$h,UC=o&&(!Jv||$h&&8<$h&&11>=$h),VC=" ",WC=!1;function HC(f,x){switch(f){case"keyup":return w$.indexOf(x.keyCode)!==-1;case"keydown":return x.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KC(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var Od=!1;function _$(f,x){switch(f){case"compositionend":return KC(x);case"keypress":return x.which!==32?null:(WC=!0,VC);case"textInput":return f=x.data,f===VC&&WC?null:f;default:return null}}function S$(f,x){if(Od)return f==="compositionend"||!Jv&&HC(f,x)?(f=IC(),Pp=Wv=io=null,Od=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(x.ctrlKey||x.altKey||x.metaKey)||x.ctrlKey&&x.altKey){if(x.char&&1<x.char.length)return x.char;if(x.which)return String.fromCharCode(x.which)}return null;case"compositionend":return UC&&x.locale!=="ko"?null:x.data;default:return null}}var C$={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function GC(f){var x=f&&f.nodeName&&f.nodeName.toLowerCase();return x==="input"?!!C$[f.type]:x==="textarea"}function YC(f,x,S,D){Ne(D),x=Lp(x,"onChange"),0<x.length&&(S=new Hv("onChange","change",null,S,D),f.push({event:S,listeners:x}))}var Uh=null,Vh=null;function k$(f){mk(f,0)}function Dp(f){var x=Bd(f);if(oe(x))return f}function E$(f,x){if(f==="change")return x}var QC=!1;if(o){var Xv;if(o){var Zv="oninput"in document;if(!Zv){var JC=document.createElement("div");JC.setAttribute("oninput","return;"),Zv=typeof JC.oninput=="function"}Xv=Zv}else Xv=!1;QC=Xv&&(!document.documentMode||9<document.documentMode)}function XC(){Uh&&(Uh.detachEvent("onpropertychange",ZC),Vh=Uh=null)}function ZC(f){if(f.propertyName==="value"&&Dp(Vh)){var x=[];YC(x,Vh,f,jr(f)),as(k$,x)}}function P$(f,x,S){f==="focusin"?(XC(),Uh=x,Vh=S,Uh.attachEvent("onpropertychange",ZC)):f==="focusout"&&XC()}function T$(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return Dp(Vh)}function A$(f,x){if(f==="click")return Dp(x)}function M$(f,x){if(f==="input"||f==="change")return Dp(x)}function D$(f,x){return f===x&&(f!==0||1/f===1/x)||f!==f&&x!==x}var ti=typeof Object.is=="function"?Object.is:D$;function Wh(f,x){if(ti(f,x))return!0;if(typeof f!="object"||f===null||typeof x!="object"||x===null)return!1;var S=Object.keys(f),D=Object.keys(x);if(S.length!==D.length)return!1;for(D=0;D<S.length;D++){var H=S[D];if(!c.call(x,H)||!ti(f[H],x[H]))return!1}return!0}function ek(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function tk(f,x){var S=ek(f);f=0;for(var D;S;){if(S.nodeType===3){if(D=f+S.textContent.length,f<=x&&D>=x)return{node:S,offset:x-f};f=D}e:{for(;S;){if(S.nextSibling){S=S.nextSibling;break e}S=S.parentNode}S=void 0}S=ek(S)}}function sk(f,x){return f&&x?f===x?!0:f&&f.nodeType===3?!1:x&&x.nodeType===3?sk(f,x.parentNode):"contains"in f?f.contains(x):f.compareDocumentPosition?!!(f.compareDocumentPosition(x)&16):!1:!1}function nk(){for(var f=window,x=pe();x instanceof f.HTMLIFrameElement;){try{var S=typeof x.contentWindow.location.href=="string"}catch{S=!1}if(S)f=x.contentWindow;else break;x=pe(f.document)}return x}function ey(f){var x=f&&f.nodeName&&f.nodeName.toLowerCase();return x&&(x==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||x==="textarea"||f.contentEditable==="true")}function O$(f){var x=nk(),S=f.focusedElem,D=f.selectionRange;if(x!==S&&S&&S.ownerDocument&&sk(S.ownerDocument.documentElement,S)){if(D!==null&&ey(S)){if(x=D.start,f=D.end,f===void 0&&(f=x),"selectionStart"in S)S.selectionStart=x,S.selectionEnd=Math.min(f,S.value.length);else if(f=(x=S.ownerDocument||document)&&x.defaultView||window,f.getSelection){f=f.getSelection();var H=S.textContent.length,G=Math.min(D.start,H);D=D.end===void 0?G:Math.min(D.end,H),!f.extend&&G>D&&(H=D,D=G,G=H),H=tk(S,G);var ne=tk(S,D);H&&ne&&(f.rangeCount!==1||f.anchorNode!==H.node||f.anchorOffset!==H.offset||f.focusNode!==ne.node||f.focusOffset!==ne.offset)&&(x=x.createRange(),x.setStart(H.node,H.offset),f.removeAllRanges(),G>D?(f.addRange(x),f.extend(ne.node,ne.offset)):(x.setEnd(ne.node,ne.offset),f.addRange(x)))}}for(x=[],f=S;f=f.parentNode;)f.nodeType===1&&x.push({element:f,left:f.scrollLeft,top:f.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<x.length;S++)f=x[S],f.element.scrollLeft=f.left,f.element.scrollTop=f.top}}var R$=o&&"documentMode"in document&&11>=document.documentMode,Rd=null,ty=null,Hh=null,sy=!1;function rk(f,x,S){var D=S.window===S?S.document:S.nodeType===9?S:S.ownerDocument;sy||Rd==null||Rd!==pe(D)||(D=Rd,"selectionStart"in D&&ey(D)?D={start:D.selectionStart,end:D.selectionEnd}:(D=(D.ownerDocument&&D.ownerDocument.defaultView||window).getSelection(),D={anchorNode:D.anchorNode,anchorOffset:D.anchorOffset,focusNode:D.focusNode,focusOffset:D.focusOffset}),Hh&&Wh(Hh,D)||(Hh=D,D=Lp(ty,"onSelect"),0<D.length&&(x=new Hv("onSelect","select",null,x,S),f.push({event:x,listeners:D}),x.target=Rd)))}function Op(f,x){var S={};return S[f.toLowerCase()]=x.toLowerCase(),S["Webkit"+f]="webkit"+x,S["Moz"+f]="moz"+x,S}var Fd={animationend:Op("Animation","AnimationEnd"),animationiteration:Op("Animation","AnimationIteration"),animationstart:Op("Animation","AnimationStart"),transitionend:Op("Transition","TransitionEnd")},ny={},ak={};o&&(ak=document.createElement("div").style,"AnimationEvent"in window||(delete Fd.animationend.animation,delete Fd.animationiteration.animation,delete Fd.animationstart.animation),"TransitionEvent"in window||delete Fd.transitionend.transition);function Rp(f){if(ny[f])return ny[f];if(!Fd[f])return f;var x=Fd[f],S;for(S in x)if(x.hasOwnProperty(S)&&S in ak)return ny[f]=x[S];return f}var ik=Rp("animationend"),lk=Rp("animationiteration"),ok=Rp("animationstart"),ck=Rp("transitionend"),dk=new Map,uk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function lo(f,x){dk.set(f,x),i(x,[f])}for(var ry=0;ry<uk.length;ry++){var ay=uk[ry],F$=ay.toLowerCase(),L$=ay[0].toUpperCase()+ay.slice(1);lo(F$,"on"+L$)}lo(ik,"onAnimationEnd"),lo(lk,"onAnimationIteration"),lo(ok,"onAnimationStart"),lo("dblclick","onDoubleClick"),lo("focusin","onFocus"),lo("focusout","onBlur"),lo(ck,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),I$=new Set("cancel close invalid load scroll toggle".split(" ").concat(Kh));function hk(f,x,S){var D=f.type||"unknown-event";f.currentTarget=S,xt(D,x,void 0,f),f.currentTarget=null}function mk(f,x){x=(x&4)!==0;for(var S=0;S<f.length;S++){var D=f[S],H=D.event;D=D.listeners;e:{var G=void 0;if(x)for(var ne=D.length-1;0<=ne;ne--){var fe=D[ne],be=fe.instance,Re=fe.currentTarget;if(fe=fe.listener,be!==G&&H.isPropagationStopped())break e;hk(H,fe,Re),G=be}else for(ne=0;ne<D.length;ne++){if(fe=D[ne],be=fe.instance,Re=fe.currentTarget,fe=fe.listener,be!==G&&H.isPropagationStopped())break e;hk(H,fe,Re),G=be}}}if(Br)throw f=ua,Br=!1,ua=null,f}function cn(f,x){var S=x[my];S===void 0&&(S=x[my]=new Set);var D=f+"__bubble";S.has(D)||(fk(x,f,2,!1),S.add(D))}function iy(f,x,S){var D=0;x&&(D|=4),fk(S,f,D,x)}var Fp="_reactListening"+Math.random().toString(36).slice(2);function Gh(f){if(!f[Fp]){f[Fp]=!0,r.forEach(function(S){S!=="selectionchange"&&(I$.has(S)||iy(S,!1,f),iy(S,!0,f))});var x=f.nodeType===9?f:f.ownerDocument;x===null||x[Fp]||(x[Fp]=!0,iy("selectionchange",!1,x))}}function fk(f,x,S,D){switch(LC(x)){case 1:var H=Xz;break;case 4:H=Zz;break;default:H=Uv}S=H.bind(null,x,S,f),H=void 0,!Qs||x!=="touchstart"&&x!=="touchmove"&&x!=="wheel"||(H=!0),D?H!==void 0?f.addEventListener(x,S,{capture:!0,passive:H}):f.addEventListener(x,S,!0):H!==void 0?f.addEventListener(x,S,{passive:H}):f.addEventListener(x,S,!1)}function ly(f,x,S,D,H){var G=D;if((x&1)===0&&(x&2)===0&&D!==null)e:for(;;){if(D===null)return;var ne=D.tag;if(ne===3||ne===4){var fe=D.stateNode.containerInfo;if(fe===H||fe.nodeType===8&&fe.parentNode===H)break;if(ne===4)for(ne=D.return;ne!==null;){var be=ne.tag;if((be===3||be===4)&&(be=ne.stateNode.containerInfo,be===H||be.nodeType===8&&be.parentNode===H))return;ne=ne.return}for(;fe!==null;){if(ne=oc(fe),ne===null)return;if(be=ne.tag,be===5||be===6){D=G=ne;continue e}fe=fe.parentNode}}D=D.return}as(function(){var Re=G,rt=jr(S),ot=[];e:{var st=dk.get(f);if(st!==void 0){var At=Hv,Lt=f;switch(f){case"keypress":if(Tp(S)===0)break e;case"keydown":case"keyup":At=f$;break;case"focusin":Lt="focus",At=Yv;break;case"focusout":Lt="blur",At=Yv;break;case"beforeblur":case"afterblur":At=Yv;break;case"click":if(S.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":At=qC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":At=s$;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":At=g$;break;case ik:case lk:case ok:At=a$;break;case ck:At=y$;break;case"scroll":At=e$;break;case"wheel":At=j$;break;case"copy":case"cut":case"paste":At=l$;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":At=$C}var qt=(x&4)!==0,Tn=!qt&&f==="scroll",Ae=qt?st!==null?st+"Capture":null:st;qt=[];for(var ke=Re,Me;ke!==null;){Me=ke;var pt=Me.stateNode;if(Me.tag===5&&pt!==null&&(Me=pt,Ae!==null&&(pt=ds(ke,Ae),pt!=null&&qt.push(Yh(ke,pt,Me)))),Tn)break;ke=ke.return}0<qt.length&&(st=new At(st,Lt,null,S,rt),ot.push({event:st,listeners:qt}))}}if((x&7)===0){e:{if(st=f==="mouseover"||f==="pointerover",At=f==="mouseout"||f==="pointerout",st&&S!==Ds&&(Lt=S.relatedTarget||S.fromElement)&&(oc(Lt)||Lt[ml]))break e;if((At||st)&&(st=rt.window===rt?rt:(st=rt.ownerDocument)?st.defaultView||st.parentWindow:window,At?(Lt=S.relatedTarget||S.toElement,At=Re,Lt=Lt?oc(Lt):null,Lt!==null&&(Tn=Tt(Lt),Lt!==Tn||Lt.tag!==5&&Lt.tag!==6)&&(Lt=null)):(At=null,Lt=Re),At!==Lt)){if(qt=qC,pt="onMouseLeave",Ae="onMouseEnter",ke="mouse",(f==="pointerout"||f==="pointerover")&&(qt=$C,pt="onPointerLeave",Ae="onPointerEnter",ke="pointer"),Tn=At==null?st:Bd(At),Me=Lt==null?st:Bd(Lt),st=new qt(pt,ke+"leave",At,S,rt),st.target=Tn,st.relatedTarget=Me,pt=null,oc(rt)===Re&&(qt=new qt(Ae,ke+"enter",Lt,S,rt),qt.target=Me,qt.relatedTarget=Tn,pt=qt),Tn=pt,At&&Lt)t:{for(qt=At,Ae=Lt,ke=0,Me=qt;Me;Me=Ld(Me))ke++;for(Me=0,pt=Ae;pt;pt=Ld(pt))Me++;for(;0<ke-Me;)qt=Ld(qt),ke--;for(;0<Me-ke;)Ae=Ld(Ae),Me--;for(;ke--;){if(qt===Ae||Ae!==null&&qt===Ae.alternate)break t;qt=Ld(qt),Ae=Ld(Ae)}qt=null}else qt=null;At!==null&&pk(ot,st,At,qt,!1),Lt!==null&&Tn!==null&&pk(ot,Tn,Lt,qt,!0)}}e:{if(st=Re?Bd(Re):window,At=st.nodeName&&st.nodeName.toLowerCase(),At==="select"||At==="input"&&st.type==="file")var Vt=E$;else if(GC(st))if(QC)Vt=M$;else{Vt=T$;var Xt=P$}else(At=st.nodeName)&&At.toLowerCase()==="input"&&(st.type==="checkbox"||st.type==="radio")&&(Vt=A$);if(Vt&&(Vt=Vt(f,Re))){YC(ot,Vt,S,rt);break e}Xt&&Xt(f,st,Re),f==="focusout"&&(Xt=st._wrapperState)&&Xt.controlled&&st.type==="number"&&Ce(st,"number",st.value)}switch(Xt=Re?Bd(Re):window,f){case"focusin":(GC(Xt)||Xt.contentEditable==="true")&&(Rd=Xt,ty=Re,Hh=null);break;case"focusout":Hh=ty=Rd=null;break;case"mousedown":sy=!0;break;case"contextmenu":case"mouseup":case"dragend":sy=!1,rk(ot,S,rt);break;case"selectionchange":if(R$)break;case"keydown":case"keyup":rk(ot,S,rt)}var Zt;if(Jv)e:{switch(f){case"compositionstart":var is="onCompositionStart";break e;case"compositionend":is="onCompositionEnd";break e;case"compositionupdate":is="onCompositionUpdate";break e}is=void 0}else Od?HC(f,S)&&(is="onCompositionEnd"):f==="keydown"&&S.keyCode===229&&(is="onCompositionStart");is&&(UC&&S.locale!=="ko"&&(Od||is!=="onCompositionStart"?is==="onCompositionEnd"&&Od&&(Zt=IC()):(io=rt,Wv="value"in io?io.value:io.textContent,Od=!0)),Xt=Lp(Re,is),0<Xt.length&&(is=new zC(is,f,null,S,rt),ot.push({event:is,listeners:Xt}),Zt?is.data=Zt:(Zt=KC(S),Zt!==null&&(is.data=Zt)))),(Zt=N$?_$(f,S):S$(f,S))&&(Re=Lp(Re,"onBeforeInput"),0<Re.length&&(rt=new zC("onBeforeInput","beforeinput",null,S,rt),ot.push({event:rt,listeners:Re}),rt.data=Zt))}mk(ot,x)})}function Yh(f,x,S){return{instance:f,listener:x,currentTarget:S}}function Lp(f,x){for(var S=x+"Capture",D=[];f!==null;){var H=f,G=H.stateNode;H.tag===5&&G!==null&&(H=G,G=ds(f,S),G!=null&&D.unshift(Yh(f,G,H)),G=ds(f,x),G!=null&&D.push(Yh(f,G,H))),f=f.return}return D}function Ld(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5);return f||null}function pk(f,x,S,D,H){for(var G=x._reactName,ne=[];S!==null&&S!==D;){var fe=S,be=fe.alternate,Re=fe.stateNode;if(be!==null&&be===D)break;fe.tag===5&&Re!==null&&(fe=Re,H?(be=ds(S,G),be!=null&&ne.unshift(Yh(S,be,fe))):H||(be=ds(S,G),be!=null&&ne.push(Yh(S,be,fe)))),S=S.return}ne.length!==0&&f.push({event:x,listeners:ne})}var B$=/\r\n?/g,q$=/\u0000|\uFFFD/g;function xk(f){return(typeof f=="string"?f:""+f).replace(B$,`
`).replace(q$,"")}function Ip(f,x,S){if(x=xk(x),xk(f)!==x&&S)throw Error(n(425))}function Bp(){}var oy=null,cy=null;function dy(f,x){return f==="textarea"||f==="noscript"||typeof x.children=="string"||typeof x.children=="number"||typeof x.dangerouslySetInnerHTML=="object"&&x.dangerouslySetInnerHTML!==null&&x.dangerouslySetInnerHTML.__html!=null}var uy=typeof setTimeout=="function"?setTimeout:void 0,z$=typeof clearTimeout=="function"?clearTimeout:void 0,gk=typeof Promise=="function"?Promise:void 0,$$=typeof queueMicrotask=="function"?queueMicrotask:typeof gk<"u"?function(f){return gk.resolve(null).then(f).catch(U$)}:uy;function U$(f){setTimeout(function(){throw f})}function hy(f,x){var S=x,D=0;do{var H=S.nextSibling;if(f.removeChild(S),H&&H.nodeType===8)if(S=H.data,S==="/$"){if(D===0){f.removeChild(H),Bh(x);return}D--}else S!=="$"&&S!=="$?"&&S!=="$!"||D++;S=H}while(S);Bh(x)}function oo(f){for(;f!=null;f=f.nextSibling){var x=f.nodeType;if(x===1||x===3)break;if(x===8){if(x=f.data,x==="$"||x==="$!"||x==="$?")break;if(x==="/$")return null}}return f}function vk(f){f=f.previousSibling;for(var x=0;f;){if(f.nodeType===8){var S=f.data;if(S==="$"||S==="$!"||S==="$?"){if(x===0)return f;x--}else S==="/$"&&x++}f=f.previousSibling}return null}var Id=Math.random().toString(36).slice(2),Ti="__reactFiber$"+Id,Qh="__reactProps$"+Id,ml="__reactContainer$"+Id,my="__reactEvents$"+Id,V$="__reactListeners$"+Id,W$="__reactHandles$"+Id;function oc(f){var x=f[Ti];if(x)return x;for(var S=f.parentNode;S;){if(x=S[ml]||S[Ti]){if(S=x.alternate,x.child!==null||S!==null&&S.child!==null)for(f=vk(f);f!==null;){if(S=f[Ti])return S;f=vk(f)}return x}f=S,S=f.parentNode}return null}function Jh(f){return f=f[Ti]||f[ml],!f||f.tag!==5&&f.tag!==6&&f.tag!==13&&f.tag!==3?null:f}function Bd(f){if(f.tag===5||f.tag===6)return f.stateNode;throw Error(n(33))}function qp(f){return f[Qh]||null}var fy=[],qd=-1;function co(f){return{current:f}}function dn(f){0>qd||(f.current=fy[qd],fy[qd]=null,qd--)}function nn(f,x){qd++,fy[qd]=f.current,f.current=x}var uo={},or=co(uo),Ur=co(!1),cc=uo;function zd(f,x){var S=f.type.contextTypes;if(!S)return uo;var D=f.stateNode;if(D&&D.__reactInternalMemoizedUnmaskedChildContext===x)return D.__reactInternalMemoizedMaskedChildContext;var H={},G;for(G in S)H[G]=x[G];return D&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=x,f.__reactInternalMemoizedMaskedChildContext=H),H}function Vr(f){return f=f.childContextTypes,f!=null}function zp(){dn(Ur),dn(or)}function yk(f,x,S){if(or.current!==uo)throw Error(n(168));nn(or,x),nn(Ur,S)}function bk(f,x,S){var D=f.stateNode;if(x=x.childContextTypes,typeof D.getChildContext!="function")return S;D=D.getChildContext();for(var H in D)if(!(H in x))throw Error(n(108,K(f)||"Unknown",H));return L({},S,D)}function $p(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||uo,cc=or.current,nn(or,f),nn(Ur,Ur.current),!0}function jk(f,x,S){var D=f.stateNode;if(!D)throw Error(n(169));S?(f=bk(f,x,cc),D.__reactInternalMemoizedMergedChildContext=f,dn(Ur),dn(or),nn(or,f)):dn(Ur),nn(Ur,S)}var fl=null,Up=!1,py=!1;function wk(f){fl===null?fl=[f]:fl.push(f)}function H$(f){Up=!0,wk(f)}function ho(){if(!py&&fl!==null){py=!0;var f=0,x=ie;try{var S=fl;for(ie=1;f<S.length;f++){var D=S[f];do D=D(!0);while(D!==null)}fl=null,Up=!1}catch(H){throw fl!==null&&(fl=fl.slice(f+1)),Sd(to,ho),H}finally{ie=x,py=!1}}return null}var $d=[],Ud=0,Vp=null,Wp=0,Pa=[],Ta=0,dc=null,pl=1,xl="";function uc(f,x){$d[Ud++]=Wp,$d[Ud++]=Vp,Vp=f,Wp=x}function Nk(f,x,S){Pa[Ta++]=pl,Pa[Ta++]=xl,Pa[Ta++]=dc,dc=f;var D=pl;f=xl;var H=32-xe(D)-1;D&=~(1<<H),S+=1;var G=32-xe(x)+H;if(30<G){var ne=H-H%5;G=(D&(1<<ne)-1).toString(32),D>>=ne,H-=ne,pl=1<<32-xe(x)+H|S<<H|D,xl=G+f}else pl=1<<G|S<<H|D,xl=f}function xy(f){f.return!==null&&(uc(f,1),Nk(f,1,0))}function gy(f){for(;f===Vp;)Vp=$d[--Ud],$d[Ud]=null,Wp=$d[--Ud],$d[Ud]=null;for(;f===dc;)dc=Pa[--Ta],Pa[Ta]=null,xl=Pa[--Ta],Pa[Ta]=null,pl=Pa[--Ta],Pa[Ta]=null}var ma=null,fa=null,pn=!1,si=null;function _k(f,x){var S=Oa(5,null,null,0);S.elementType="DELETED",S.stateNode=x,S.return=f,x=f.deletions,x===null?(f.deletions=[S],f.flags|=16):x.push(S)}function Sk(f,x){switch(f.tag){case 5:var S=f.type;return x=x.nodeType!==1||S.toLowerCase()!==x.nodeName.toLowerCase()?null:x,x!==null?(f.stateNode=x,ma=f,fa=oo(x.firstChild),!0):!1;case 6:return x=f.pendingProps===""||x.nodeType!==3?null:x,x!==null?(f.stateNode=x,ma=f,fa=null,!0):!1;case 13:return x=x.nodeType!==8?null:x,x!==null?(S=dc!==null?{id:pl,overflow:xl}:null,f.memoizedState={dehydrated:x,treeContext:S,retryLane:1073741824},S=Oa(18,null,null,0),S.stateNode=x,S.return=f,f.child=S,ma=f,fa=null,!0):!1;default:return!1}}function vy(f){return(f.mode&1)!==0&&(f.flags&128)===0}function yy(f){if(pn){var x=fa;if(x){var S=x;if(!Sk(f,x)){if(vy(f))throw Error(n(418));x=oo(S.nextSibling);var D=ma;x&&Sk(f,x)?_k(D,S):(f.flags=f.flags&-4097|2,pn=!1,ma=f)}}else{if(vy(f))throw Error(n(418));f.flags=f.flags&-4097|2,pn=!1,ma=f}}}function Ck(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;ma=f}function Hp(f){if(f!==ma)return!1;if(!pn)return Ck(f),pn=!0,!1;var x;if((x=f.tag!==3)&&!(x=f.tag!==5)&&(x=f.type,x=x!=="head"&&x!=="body"&&!dy(f.type,f.memoizedProps)),x&&(x=fa)){if(vy(f))throw kk(),Error(n(418));for(;x;)_k(f,x),x=oo(x.nextSibling)}if(Ck(f),f.tag===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(n(317));e:{for(f=f.nextSibling,x=0;f;){if(f.nodeType===8){var S=f.data;if(S==="/$"){if(x===0){fa=oo(f.nextSibling);break e}x--}else S!=="$"&&S!=="$!"&&S!=="$?"||x++}f=f.nextSibling}fa=null}}else fa=ma?oo(f.stateNode.nextSibling):null;return!0}function kk(){for(var f=fa;f;)f=oo(f.nextSibling)}function Vd(){fa=ma=null,pn=!1}function by(f){si===null?si=[f]:si.push(f)}var K$=_.ReactCurrentBatchConfig;function Xh(f,x,S){if(f=S.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(S._owner){if(S=S._owner,S){if(S.tag!==1)throw Error(n(309));var D=S.stateNode}if(!D)throw Error(n(147,f));var H=D,G=""+f;return x!==null&&x.ref!==null&&typeof x.ref=="function"&&x.ref._stringRef===G?x.ref:(x=function(ne){var fe=H.refs;ne===null?delete fe[G]:fe[G]=ne},x._stringRef=G,x)}if(typeof f!="string")throw Error(n(284));if(!S._owner)throw Error(n(290,f))}return f}function Kp(f,x){throw f=Object.prototype.toString.call(x),Error(n(31,f==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":f))}function Ek(f){var x=f._init;return x(f._payload)}function Pk(f){function x(Ae,ke){if(f){var Me=Ae.deletions;Me===null?(Ae.deletions=[ke],Ae.flags|=16):Me.push(ke)}}function S(Ae,ke){if(!f)return null;for(;ke!==null;)x(Ae,ke),ke=ke.sibling;return null}function D(Ae,ke){for(Ae=new Map;ke!==null;)ke.key!==null?Ae.set(ke.key,ke):Ae.set(ke.index,ke),ke=ke.sibling;return Ae}function H(Ae,ke){return Ae=bo(Ae,ke),Ae.index=0,Ae.sibling=null,Ae}function G(Ae,ke,Me){return Ae.index=Me,f?(Me=Ae.alternate,Me!==null?(Me=Me.index,Me<ke?(Ae.flags|=2,ke):Me):(Ae.flags|=2,ke)):(Ae.flags|=1048576,ke)}function ne(Ae){return f&&Ae.alternate===null&&(Ae.flags|=2),Ae}function fe(Ae,ke,Me,pt){return ke===null||ke.tag!==6?(ke=ub(Me,Ae.mode,pt),ke.return=Ae,ke):(ke=H(ke,Me),ke.return=Ae,ke)}function be(Ae,ke,Me,pt){var Vt=Me.type;return Vt===P?rt(Ae,ke,Me.props.children,pt,Me.key):ke!==null&&(ke.elementType===Vt||typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===V&&Ek(Vt)===ke.type)?(pt=H(ke,Me.props),pt.ref=Xh(Ae,ke,Me),pt.return=Ae,pt):(pt=gx(Me.type,Me.key,Me.props,null,Ae.mode,pt),pt.ref=Xh(Ae,ke,Me),pt.return=Ae,pt)}function Re(Ae,ke,Me,pt){return ke===null||ke.tag!==4||ke.stateNode.containerInfo!==Me.containerInfo||ke.stateNode.implementation!==Me.implementation?(ke=hb(Me,Ae.mode,pt),ke.return=Ae,ke):(ke=H(ke,Me.children||[]),ke.return=Ae,ke)}function rt(Ae,ke,Me,pt,Vt){return ke===null||ke.tag!==7?(ke=yc(Me,Ae.mode,pt,Vt),ke.return=Ae,ke):(ke=H(ke,Me),ke.return=Ae,ke)}function ot(Ae,ke,Me){if(typeof ke=="string"&&ke!==""||typeof ke=="number")return ke=ub(""+ke,Ae.mode,Me),ke.return=Ae,ke;if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case T:return Me=gx(ke.type,ke.key,ke.props,null,Ae.mode,Me),Me.ref=Xh(Ae,null,ke),Me.return=Ae,Me;case A:return ke=hb(ke,Ae.mode,Me),ke.return=Ae,ke;case V:var pt=ke._init;return ot(Ae,pt(ke._payload),Me)}if(Ge(ke)||$(ke))return ke=yc(ke,Ae.mode,Me,null),ke.return=Ae,ke;Kp(Ae,ke)}return null}function st(Ae,ke,Me,pt){var Vt=ke!==null?ke.key:null;if(typeof Me=="string"&&Me!==""||typeof Me=="number")return Vt!==null?null:fe(Ae,ke,""+Me,pt);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case T:return Me.key===Vt?be(Ae,ke,Me,pt):null;case A:return Me.key===Vt?Re(Ae,ke,Me,pt):null;case V:return Vt=Me._init,st(Ae,ke,Vt(Me._payload),pt)}if(Ge(Me)||$(Me))return Vt!==null?null:rt(Ae,ke,Me,pt,null);Kp(Ae,Me)}return null}function At(Ae,ke,Me,pt,Vt){if(typeof pt=="string"&&pt!==""||typeof pt=="number")return Ae=Ae.get(Me)||null,fe(ke,Ae,""+pt,Vt);if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case T:return Ae=Ae.get(pt.key===null?Me:pt.key)||null,be(ke,Ae,pt,Vt);case A:return Ae=Ae.get(pt.key===null?Me:pt.key)||null,Re(ke,Ae,pt,Vt);case V:var Xt=pt._init;return At(Ae,ke,Me,Xt(pt._payload),Vt)}if(Ge(pt)||$(pt))return Ae=Ae.get(Me)||null,rt(ke,Ae,pt,Vt,null);Kp(ke,pt)}return null}function Lt(Ae,ke,Me,pt){for(var Vt=null,Xt=null,Zt=ke,is=ke=0,Yn=null;Zt!==null&&is<Me.length;is++){Zt.index>is?(Yn=Zt,Zt=null):Yn=Zt.sibling;var qs=st(Ae,Zt,Me[is],pt);if(qs===null){Zt===null&&(Zt=Yn);break}f&&Zt&&qs.alternate===null&&x(Ae,Zt),ke=G(qs,ke,is),Xt===null?Vt=qs:Xt.sibling=qs,Xt=qs,Zt=Yn}if(is===Me.length)return S(Ae,Zt),pn&&uc(Ae,is),Vt;if(Zt===null){for(;is<Me.length;is++)Zt=ot(Ae,Me[is],pt),Zt!==null&&(ke=G(Zt,ke,is),Xt===null?Vt=Zt:Xt.sibling=Zt,Xt=Zt);return pn&&uc(Ae,is),Vt}for(Zt=D(Ae,Zt);is<Me.length;is++)Yn=At(Zt,Ae,is,Me[is],pt),Yn!==null&&(f&&Yn.alternate!==null&&Zt.delete(Yn.key===null?is:Yn.key),ke=G(Yn,ke,is),Xt===null?Vt=Yn:Xt.sibling=Yn,Xt=Yn);return f&&Zt.forEach(function(jo){return x(Ae,jo)}),pn&&uc(Ae,is),Vt}function qt(Ae,ke,Me,pt){var Vt=$(Me);if(typeof Vt!="function")throw Error(n(150));if(Me=Vt.call(Me),Me==null)throw Error(n(151));for(var Xt=Vt=null,Zt=ke,is=ke=0,Yn=null,qs=Me.next();Zt!==null&&!qs.done;is++,qs=Me.next()){Zt.index>is?(Yn=Zt,Zt=null):Yn=Zt.sibling;var jo=st(Ae,Zt,qs.value,pt);if(jo===null){Zt===null&&(Zt=Yn);break}f&&Zt&&jo.alternate===null&&x(Ae,Zt),ke=G(jo,ke,is),Xt===null?Vt=jo:Xt.sibling=jo,Xt=jo,Zt=Yn}if(qs.done)return S(Ae,Zt),pn&&uc(Ae,is),Vt;if(Zt===null){for(;!qs.done;is++,qs=Me.next())qs=ot(Ae,qs.value,pt),qs!==null&&(ke=G(qs,ke,is),Xt===null?Vt=qs:Xt.sibling=qs,Xt=qs);return pn&&uc(Ae,is),Vt}for(Zt=D(Ae,Zt);!qs.done;is++,qs=Me.next())qs=At(Zt,Ae,is,qs.value,pt),qs!==null&&(f&&qs.alternate!==null&&Zt.delete(qs.key===null?is:qs.key),ke=G(qs,ke,is),Xt===null?Vt=qs:Xt.sibling=qs,Xt=qs);return f&&Zt.forEach(function(CU){return x(Ae,CU)}),pn&&uc(Ae,is),Vt}function Tn(Ae,ke,Me,pt){if(typeof Me=="object"&&Me!==null&&Me.type===P&&Me.key===null&&(Me=Me.props.children),typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case T:e:{for(var Vt=Me.key,Xt=ke;Xt!==null;){if(Xt.key===Vt){if(Vt=Me.type,Vt===P){if(Xt.tag===7){S(Ae,Xt.sibling),ke=H(Xt,Me.props.children),ke.return=Ae,Ae=ke;break e}}else if(Xt.elementType===Vt||typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===V&&Ek(Vt)===Xt.type){S(Ae,Xt.sibling),ke=H(Xt,Me.props),ke.ref=Xh(Ae,Xt,Me),ke.return=Ae,Ae=ke;break e}S(Ae,Xt);break}else x(Ae,Xt);Xt=Xt.sibling}Me.type===P?(ke=yc(Me.props.children,Ae.mode,pt,Me.key),ke.return=Ae,Ae=ke):(pt=gx(Me.type,Me.key,Me.props,null,Ae.mode,pt),pt.ref=Xh(Ae,ke,Me),pt.return=Ae,Ae=pt)}return ne(Ae);case A:e:{for(Xt=Me.key;ke!==null;){if(ke.key===Xt)if(ke.tag===4&&ke.stateNode.containerInfo===Me.containerInfo&&ke.stateNode.implementation===Me.implementation){S(Ae,ke.sibling),ke=H(ke,Me.children||[]),ke.return=Ae,Ae=ke;break e}else{S(Ae,ke);break}else x(Ae,ke);ke=ke.sibling}ke=hb(Me,Ae.mode,pt),ke.return=Ae,Ae=ke}return ne(Ae);case V:return Xt=Me._init,Tn(Ae,ke,Xt(Me._payload),pt)}if(Ge(Me))return Lt(Ae,ke,Me,pt);if($(Me))return qt(Ae,ke,Me,pt);Kp(Ae,Me)}return typeof Me=="string"&&Me!==""||typeof Me=="number"?(Me=""+Me,ke!==null&&ke.tag===6?(S(Ae,ke.sibling),ke=H(ke,Me),ke.return=Ae,Ae=ke):(S(Ae,ke),ke=ub(Me,Ae.mode,pt),ke.return=Ae,Ae=ke),ne(Ae)):S(Ae,ke)}return Tn}var Wd=Pk(!0),Tk=Pk(!1),Gp=co(null),Yp=null,Hd=null,jy=null;function wy(){jy=Hd=Yp=null}function Ny(f){var x=Gp.current;dn(Gp),f._currentValue=x}function _y(f,x,S){for(;f!==null;){var D=f.alternate;if((f.childLanes&x)!==x?(f.childLanes|=x,D!==null&&(D.childLanes|=x)):D!==null&&(D.childLanes&x)!==x&&(D.childLanes|=x),f===S)break;f=f.return}}function Kd(f,x){Yp=f,jy=Hd=null,f=f.dependencies,f!==null&&f.firstContext!==null&&((f.lanes&x)!==0&&(Wr=!0),f.firstContext=null)}function Aa(f){var x=f._currentValue;if(jy!==f)if(f={context:f,memoizedValue:x,next:null},Hd===null){if(Yp===null)throw Error(n(308));Hd=f,Yp.dependencies={lanes:0,firstContext:f}}else Hd=Hd.next=f;return x}var hc=null;function Sy(f){hc===null?hc=[f]:hc.push(f)}function Ak(f,x,S,D){var H=x.interleaved;return H===null?(S.next=S,Sy(x)):(S.next=H.next,H.next=S),x.interleaved=S,gl(f,D)}function gl(f,x){f.lanes|=x;var S=f.alternate;for(S!==null&&(S.lanes|=x),S=f,f=f.return;f!==null;)f.childLanes|=x,S=f.alternate,S!==null&&(S.childLanes|=x),S=f,f=f.return;return S.tag===3?S.stateNode:null}var mo=!1;function Cy(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mk(f,x){f=f.updateQueue,x.updateQueue===f&&(x.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function vl(f,x){return{eventTime:f,lane:x,tag:0,payload:null,callback:null,next:null}}function fo(f,x,S){var D=f.updateQueue;if(D===null)return null;if(D=D.shared,(Ls&2)!==0){var H=D.pending;return H===null?x.next=x:(x.next=H.next,H.next=x),D.pending=x,gl(f,S)}return H=D.interleaved,H===null?(x.next=x,Sy(D)):(x.next=H.next,H.next=x),D.interleaved=x,gl(f,S)}function Qp(f,x,S){if(x=x.updateQueue,x!==null&&(x=x.shared,(S&4194240)!==0)){var D=x.lanes;D&=f.pendingLanes,S|=D,x.lanes=S,Ad(f,S)}}function Dk(f,x){var S=f.updateQueue,D=f.alternate;if(D!==null&&(D=D.updateQueue,S===D)){var H=null,G=null;if(S=S.firstBaseUpdate,S!==null){do{var ne={eventTime:S.eventTime,lane:S.lane,tag:S.tag,payload:S.payload,callback:S.callback,next:null};G===null?H=G=ne:G=G.next=ne,S=S.next}while(S!==null);G===null?H=G=x:G=G.next=x}else H=G=x;S={baseState:D.baseState,firstBaseUpdate:H,lastBaseUpdate:G,shared:D.shared,effects:D.effects},f.updateQueue=S;return}f=S.lastBaseUpdate,f===null?S.firstBaseUpdate=x:f.next=x,S.lastBaseUpdate=x}function Jp(f,x,S,D){var H=f.updateQueue;mo=!1;var G=H.firstBaseUpdate,ne=H.lastBaseUpdate,fe=H.shared.pending;if(fe!==null){H.shared.pending=null;var be=fe,Re=be.next;be.next=null,ne===null?G=Re:ne.next=Re,ne=be;var rt=f.alternate;rt!==null&&(rt=rt.updateQueue,fe=rt.lastBaseUpdate,fe!==ne&&(fe===null?rt.firstBaseUpdate=Re:fe.next=Re,rt.lastBaseUpdate=be))}if(G!==null){var ot=H.baseState;ne=0,rt=Re=be=null,fe=G;do{var st=fe.lane,At=fe.eventTime;if((D&st)===st){rt!==null&&(rt=rt.next={eventTime:At,lane:0,tag:fe.tag,payload:fe.payload,callback:fe.callback,next:null});e:{var Lt=f,qt=fe;switch(st=x,At=S,qt.tag){case 1:if(Lt=qt.payload,typeof Lt=="function"){ot=Lt.call(At,ot,st);break e}ot=Lt;break e;case 3:Lt.flags=Lt.flags&-65537|128;case 0:if(Lt=qt.payload,st=typeof Lt=="function"?Lt.call(At,ot,st):Lt,st==null)break e;ot=L({},ot,st);break e;case 2:mo=!0}}fe.callback!==null&&fe.lane!==0&&(f.flags|=64,st=H.effects,st===null?H.effects=[fe]:st.push(fe))}else At={eventTime:At,lane:st,tag:fe.tag,payload:fe.payload,callback:fe.callback,next:null},rt===null?(Re=rt=At,be=ot):rt=rt.next=At,ne|=st;if(fe=fe.next,fe===null){if(fe=H.shared.pending,fe===null)break;st=fe,fe=st.next,st.next=null,H.lastBaseUpdate=st,H.shared.pending=null}}while(!0);if(rt===null&&(be=ot),H.baseState=be,H.firstBaseUpdate=Re,H.lastBaseUpdate=rt,x=H.shared.interleaved,x!==null){H=x;do ne|=H.lane,H=H.next;while(H!==x)}else G===null&&(H.shared.lanes=0);pc|=ne,f.lanes=ne,f.memoizedState=ot}}function Ok(f,x,S){if(f=x.effects,x.effects=null,f!==null)for(x=0;x<f.length;x++){var D=f[x],H=D.callback;if(H!==null){if(D.callback=null,D=S,typeof H!="function")throw Error(n(191,H));H.call(D)}}}var Zh={},Ai=co(Zh),em=co(Zh),tm=co(Zh);function mc(f){if(f===Zh)throw Error(n(174));return f}function ky(f,x){switch(nn(tm,x),nn(em,f),nn(Ai,Zh),f=x.nodeType,f){case 9:case 11:x=(x=x.documentElement)?x.namespaceURI:$e(null,"");break;default:f=f===8?x.parentNode:x,x=f.namespaceURI||null,f=f.tagName,x=$e(x,f)}dn(Ai),nn(Ai,x)}function Gd(){dn(Ai),dn(em),dn(tm)}function Rk(f){mc(tm.current);var x=mc(Ai.current),S=$e(x,f.type);x!==S&&(nn(em,f),nn(Ai,S))}function Ey(f){em.current===f&&(dn(Ai),dn(em))}var bn=co(0);function Xp(f){for(var x=f;x!==null;){if(x.tag===13){var S=x.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||S.data==="$?"||S.data==="$!"))return x}else if(x.tag===19&&x.memoizedProps.revealOrder!==void 0){if((x.flags&128)!==0)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===f)break;for(;x.sibling===null;){if(x.return===null||x.return===f)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}var Py=[];function Ty(){for(var f=0;f<Py.length;f++)Py[f]._workInProgressVersionPrimary=null;Py.length=0}var Zp=_.ReactCurrentDispatcher,Ay=_.ReactCurrentBatchConfig,fc=0,jn=null,Bn=null,Kn=null,ex=!1,sm=!1,nm=0,G$=0;function cr(){throw Error(n(321))}function My(f,x){if(x===null)return!1;for(var S=0;S<x.length&&S<f.length;S++)if(!ti(f[S],x[S]))return!1;return!0}function Dy(f,x,S,D,H,G){if(fc=G,jn=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,Zp.current=f===null||f.memoizedState===null?X$:Z$,f=S(D,H),sm){G=0;do{if(sm=!1,nm=0,25<=G)throw Error(n(301));G+=1,Kn=Bn=null,x.updateQueue=null,Zp.current=eU,f=S(D,H)}while(sm)}if(Zp.current=nx,x=Bn!==null&&Bn.next!==null,fc=0,Kn=Bn=jn=null,ex=!1,x)throw Error(n(300));return f}function Oy(){var f=nm!==0;return nm=0,f}function Mi(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kn===null?jn.memoizedState=Kn=f:Kn=Kn.next=f,Kn}function Ma(){if(Bn===null){var f=jn.alternate;f=f!==null?f.memoizedState:null}else f=Bn.next;var x=Kn===null?jn.memoizedState:Kn.next;if(x!==null)Kn=x,Bn=f;else{if(f===null)throw Error(n(310));Bn=f,f={memoizedState:Bn.memoizedState,baseState:Bn.baseState,baseQueue:Bn.baseQueue,queue:Bn.queue,next:null},Kn===null?jn.memoizedState=Kn=f:Kn=Kn.next=f}return Kn}function rm(f,x){return typeof x=="function"?x(f):x}function Ry(f){var x=Ma(),S=x.queue;if(S===null)throw Error(n(311));S.lastRenderedReducer=f;var D=Bn,H=D.baseQueue,G=S.pending;if(G!==null){if(H!==null){var ne=H.next;H.next=G.next,G.next=ne}D.baseQueue=H=G,S.pending=null}if(H!==null){G=H.next,D=D.baseState;var fe=ne=null,be=null,Re=G;do{var rt=Re.lane;if((fc&rt)===rt)be!==null&&(be=be.next={lane:0,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null}),D=Re.hasEagerState?Re.eagerState:f(D,Re.action);else{var ot={lane:rt,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null};be===null?(fe=be=ot,ne=D):be=be.next=ot,jn.lanes|=rt,pc|=rt}Re=Re.next}while(Re!==null&&Re!==G);be===null?ne=D:be.next=fe,ti(D,x.memoizedState)||(Wr=!0),x.memoizedState=D,x.baseState=ne,x.baseQueue=be,S.lastRenderedState=D}if(f=S.interleaved,f!==null){H=f;do G=H.lane,jn.lanes|=G,pc|=G,H=H.next;while(H!==f)}else H===null&&(S.lanes=0);return[x.memoizedState,S.dispatch]}function Fy(f){var x=Ma(),S=x.queue;if(S===null)throw Error(n(311));S.lastRenderedReducer=f;var D=S.dispatch,H=S.pending,G=x.memoizedState;if(H!==null){S.pending=null;var ne=H=H.next;do G=f(G,ne.action),ne=ne.next;while(ne!==H);ti(G,x.memoizedState)||(Wr=!0),x.memoizedState=G,x.baseQueue===null&&(x.baseState=G),S.lastRenderedState=G}return[G,D]}function Fk(){}function Lk(f,x){var S=jn,D=Ma(),H=x(),G=!ti(D.memoizedState,H);if(G&&(D.memoizedState=H,Wr=!0),D=D.queue,Ly(qk.bind(null,S,D,f),[f]),D.getSnapshot!==x||G||Kn!==null&&Kn.memoizedState.tag&1){if(S.flags|=2048,am(9,Bk.bind(null,S,D,H,x),void 0,null),Gn===null)throw Error(n(349));(fc&30)!==0||Ik(S,x,H)}return H}function Ik(f,x,S){f.flags|=16384,f={getSnapshot:x,value:S},x=jn.updateQueue,x===null?(x={lastEffect:null,stores:null},jn.updateQueue=x,x.stores=[f]):(S=x.stores,S===null?x.stores=[f]:S.push(f))}function Bk(f,x,S,D){x.value=S,x.getSnapshot=D,zk(x)&&$k(f)}function qk(f,x,S){return S(function(){zk(x)&&$k(f)})}function zk(f){var x=f.getSnapshot;f=f.value;try{var S=x();return!ti(f,S)}catch{return!0}}function $k(f){var x=gl(f,1);x!==null&&ii(x,f,1,-1)}function Uk(f){var x=Mi();return typeof f=="function"&&(f=f()),x.memoizedState=x.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rm,lastRenderedState:f},x.queue=f,f=f.dispatch=J$.bind(null,jn,f),[x.memoizedState,f]}function am(f,x,S,D){return f={tag:f,create:x,destroy:S,deps:D,next:null},x=jn.updateQueue,x===null?(x={lastEffect:null,stores:null},jn.updateQueue=x,x.lastEffect=f.next=f):(S=x.lastEffect,S===null?x.lastEffect=f.next=f:(D=S.next,S.next=f,f.next=D,x.lastEffect=f)),f}function Vk(){return Ma().memoizedState}function tx(f,x,S,D){var H=Mi();jn.flags|=f,H.memoizedState=am(1|x,S,void 0,D===void 0?null:D)}function sx(f,x,S,D){var H=Ma();D=D===void 0?null:D;var G=void 0;if(Bn!==null){var ne=Bn.memoizedState;if(G=ne.destroy,D!==null&&My(D,ne.deps)){H.memoizedState=am(x,S,G,D);return}}jn.flags|=f,H.memoizedState=am(1|x,S,G,D)}function Wk(f,x){return tx(8390656,8,f,x)}function Ly(f,x){return sx(2048,8,f,x)}function Hk(f,x){return sx(4,2,f,x)}function Kk(f,x){return sx(4,4,f,x)}function Gk(f,x){if(typeof x=="function")return f=f(),x(f),function(){x(null)};if(x!=null)return f=f(),x.current=f,function(){x.current=null}}function Yk(f,x,S){return S=S!=null?S.concat([f]):null,sx(4,4,Gk.bind(null,x,f),S)}function Iy(){}function Qk(f,x){var S=Ma();x=x===void 0?null:x;var D=S.memoizedState;return D!==null&&x!==null&&My(x,D[1])?D[0]:(S.memoizedState=[f,x],f)}function Jk(f,x){var S=Ma();x=x===void 0?null:x;var D=S.memoizedState;return D!==null&&x!==null&&My(x,D[1])?D[0]:(f=f(),S.memoizedState=[f,x],f)}function Xk(f,x,S){return(fc&21)===0?(f.baseState&&(f.baseState=!1,Wr=!0),f.memoizedState=S):(ti(S,x)||(S=_p(),jn.lanes|=S,pc|=S,f.baseState=!0),x)}function Y$(f,x){var S=ie;ie=S!==0&&4>S?S:4,f(!0);var D=Ay.transition;Ay.transition={};try{f(!1),x()}finally{ie=S,Ay.transition=D}}function Zk(){return Ma().memoizedState}function Q$(f,x,S){var D=vo(f);if(S={lane:D,action:S,hasEagerState:!1,eagerState:null,next:null},e4(f))t4(x,S);else if(S=Ak(f,x,S,D),S!==null){var H=Sr();ii(S,f,D,H),s4(S,x,D)}}function J$(f,x,S){var D=vo(f),H={lane:D,action:S,hasEagerState:!1,eagerState:null,next:null};if(e4(f))t4(x,H);else{var G=f.alternate;if(f.lanes===0&&(G===null||G.lanes===0)&&(G=x.lastRenderedReducer,G!==null))try{var ne=x.lastRenderedState,fe=G(ne,S);if(H.hasEagerState=!0,H.eagerState=fe,ti(fe,ne)){var be=x.interleaved;be===null?(H.next=H,Sy(x)):(H.next=be.next,be.next=H),x.interleaved=H;return}}catch{}finally{}S=Ak(f,x,H,D),S!==null&&(H=Sr(),ii(S,f,D,H),s4(S,x,D))}}function e4(f){var x=f.alternate;return f===jn||x!==null&&x===jn}function t4(f,x){sm=ex=!0;var S=f.pending;S===null?x.next=x:(x.next=S.next,S.next=x),f.pending=x}function s4(f,x,S){if((S&4194240)!==0){var D=x.lanes;D&=f.pendingLanes,S|=D,x.lanes=S,Ad(f,S)}}var nx={readContext:Aa,useCallback:cr,useContext:cr,useEffect:cr,useImperativeHandle:cr,useInsertionEffect:cr,useLayoutEffect:cr,useMemo:cr,useReducer:cr,useRef:cr,useState:cr,useDebugValue:cr,useDeferredValue:cr,useTransition:cr,useMutableSource:cr,useSyncExternalStore:cr,useId:cr,unstable_isNewReconciler:!1},X$={readContext:Aa,useCallback:function(f,x){return Mi().memoizedState=[f,x===void 0?null:x],f},useContext:Aa,useEffect:Wk,useImperativeHandle:function(f,x,S){return S=S!=null?S.concat([f]):null,tx(4194308,4,Gk.bind(null,x,f),S)},useLayoutEffect:function(f,x){return tx(4194308,4,f,x)},useInsertionEffect:function(f,x){return tx(4,2,f,x)},useMemo:function(f,x){var S=Mi();return x=x===void 0?null:x,f=f(),S.memoizedState=[f,x],f},useReducer:function(f,x,S){var D=Mi();return x=S!==void 0?S(x):x,D.memoizedState=D.baseState=x,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:x},D.queue=f,f=f.dispatch=Q$.bind(null,jn,f),[D.memoizedState,f]},useRef:function(f){var x=Mi();return f={current:f},x.memoizedState=f},useState:Uk,useDebugValue:Iy,useDeferredValue:function(f){return Mi().memoizedState=f},useTransition:function(){var f=Uk(!1),x=f[0];return f=Y$.bind(null,f[1]),Mi().memoizedState=f,[x,f]},useMutableSource:function(){},useSyncExternalStore:function(f,x,S){var D=jn,H=Mi();if(pn){if(S===void 0)throw Error(n(407));S=S()}else{if(S=x(),Gn===null)throw Error(n(349));(fc&30)!==0||Ik(D,x,S)}H.memoizedState=S;var G={value:S,getSnapshot:x};return H.queue=G,Wk(qk.bind(null,D,G,f),[f]),D.flags|=2048,am(9,Bk.bind(null,D,G,S,x),void 0,null),S},useId:function(){var f=Mi(),x=Gn.identifierPrefix;if(pn){var S=xl,D=pl;S=(D&~(1<<32-xe(D)-1)).toString(32)+S,x=":"+x+"R"+S,S=nm++,0<S&&(x+="H"+S.toString(32)),x+=":"}else S=G$++,x=":"+x+"r"+S.toString(32)+":";return f.memoizedState=x},unstable_isNewReconciler:!1},Z$={readContext:Aa,useCallback:Qk,useContext:Aa,useEffect:Ly,useImperativeHandle:Yk,useInsertionEffect:Hk,useLayoutEffect:Kk,useMemo:Jk,useReducer:Ry,useRef:Vk,useState:function(){return Ry(rm)},useDebugValue:Iy,useDeferredValue:function(f){var x=Ma();return Xk(x,Bn.memoizedState,f)},useTransition:function(){var f=Ry(rm)[0],x=Ma().memoizedState;return[f,x]},useMutableSource:Fk,useSyncExternalStore:Lk,useId:Zk,unstable_isNewReconciler:!1},eU={readContext:Aa,useCallback:Qk,useContext:Aa,useEffect:Ly,useImperativeHandle:Yk,useInsertionEffect:Hk,useLayoutEffect:Kk,useMemo:Jk,useReducer:Fy,useRef:Vk,useState:function(){return Fy(rm)},useDebugValue:Iy,useDeferredValue:function(f){var x=Ma();return Bn===null?x.memoizedState=f:Xk(x,Bn.memoizedState,f)},useTransition:function(){var f=Fy(rm)[0],x=Ma().memoizedState;return[f,x]},useMutableSource:Fk,useSyncExternalStore:Lk,useId:Zk,unstable_isNewReconciler:!1};function ni(f,x){if(f&&f.defaultProps){x=L({},x),f=f.defaultProps;for(var S in f)x[S]===void 0&&(x[S]=f[S]);return x}return x}function By(f,x,S,D){x=f.memoizedState,S=S(D,x),S=S==null?x:L({},x,S),f.memoizedState=S,f.lanes===0&&(f.updateQueue.baseState=S)}var rx={isMounted:function(f){return(f=f._reactInternals)?Tt(f)===f:!1},enqueueSetState:function(f,x,S){f=f._reactInternals;var D=Sr(),H=vo(f),G=vl(D,H);G.payload=x,S!=null&&(G.callback=S),x=fo(f,G,H),x!==null&&(ii(x,f,H,D),Qp(x,f,H))},enqueueReplaceState:function(f,x,S){f=f._reactInternals;var D=Sr(),H=vo(f),G=vl(D,H);G.tag=1,G.payload=x,S!=null&&(G.callback=S),x=fo(f,G,H),x!==null&&(ii(x,f,H,D),Qp(x,f,H))},enqueueForceUpdate:function(f,x){f=f._reactInternals;var S=Sr(),D=vo(f),H=vl(S,D);H.tag=2,x!=null&&(H.callback=x),x=fo(f,H,D),x!==null&&(ii(x,f,D,S),Qp(x,f,D))}};function n4(f,x,S,D,H,G,ne){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(D,G,ne):x.prototype&&x.prototype.isPureReactComponent?!Wh(S,D)||!Wh(H,G):!0}function r4(f,x,S){var D=!1,H=uo,G=x.contextType;return typeof G=="object"&&G!==null?G=Aa(G):(H=Vr(x)?cc:or.current,D=x.contextTypes,G=(D=D!=null)?zd(f,H):uo),x=new x(S,G),f.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=rx,f.stateNode=x,x._reactInternals=f,D&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=H,f.__reactInternalMemoizedMaskedChildContext=G),x}function a4(f,x,S,D){f=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(S,D),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(S,D),x.state!==f&&rx.enqueueReplaceState(x,x.state,null)}function qy(f,x,S,D){var H=f.stateNode;H.props=S,H.state=f.memoizedState,H.refs={},Cy(f);var G=x.contextType;typeof G=="object"&&G!==null?H.context=Aa(G):(G=Vr(x)?cc:or.current,H.context=zd(f,G)),H.state=f.memoizedState,G=x.getDerivedStateFromProps,typeof G=="function"&&(By(f,x,G,S),H.state=f.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(x=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),x!==H.state&&rx.enqueueReplaceState(H,H.state,null),Jp(f,S,H,D),H.state=f.memoizedState),typeof H.componentDidMount=="function"&&(f.flags|=4194308)}function Yd(f,x){try{var S="",D=x;do S+=Q(D),D=D.return;while(D);var H=S}catch(G){H=`
Error generating stack: `+G.message+`
`+G.stack}return{value:f,source:x,stack:H,digest:null}}function zy(f,x,S){return{value:f,source:null,stack:S??null,digest:x??null}}function $y(f,x){try{console.error(x.value)}catch(S){setTimeout(function(){throw S})}}var tU=typeof WeakMap=="function"?WeakMap:Map;function i4(f,x,S){S=vl(-1,S),S.tag=3,S.payload={element:null};var D=x.value;return S.callback=function(){ux||(ux=!0,nb=D),$y(f,x)},S}function l4(f,x,S){S=vl(-1,S),S.tag=3;var D=f.type.getDerivedStateFromError;if(typeof D=="function"){var H=x.value;S.payload=function(){return D(H)},S.callback=function(){$y(f,x)}}var G=f.stateNode;return G!==null&&typeof G.componentDidCatch=="function"&&(S.callback=function(){$y(f,x),typeof D!="function"&&(xo===null?xo=new Set([this]):xo.add(this));var ne=x.stack;this.componentDidCatch(x.value,{componentStack:ne!==null?ne:""})}),S}function o4(f,x,S){var D=f.pingCache;if(D===null){D=f.pingCache=new tU;var H=new Set;D.set(x,H)}else H=D.get(x),H===void 0&&(H=new Set,D.set(x,H));H.has(S)||(H.add(S),f=pU.bind(null,f,x,S),x.then(f,f))}function c4(f){do{var x;if((x=f.tag===13)&&(x=f.memoizedState,x=x!==null?x.dehydrated!==null:!0),x)return f;f=f.return}while(f!==null);return null}function d4(f,x,S,D,H){return(f.mode&1)===0?(f===x?f.flags|=65536:(f.flags|=128,S.flags|=131072,S.flags&=-52805,S.tag===1&&(S.alternate===null?S.tag=17:(x=vl(-1,1),x.tag=2,fo(S,x,1))),S.lanes|=1),f):(f.flags|=65536,f.lanes=H,f)}var sU=_.ReactCurrentOwner,Wr=!1;function _r(f,x,S,D){x.child=f===null?Tk(x,null,S,D):Wd(x,f.child,S,D)}function u4(f,x,S,D,H){S=S.render;var G=x.ref;return Kd(x,H),D=Dy(f,x,S,D,G,H),S=Oy(),f!==null&&!Wr?(x.updateQueue=f.updateQueue,x.flags&=-2053,f.lanes&=~H,yl(f,x,H)):(pn&&S&&xy(x),x.flags|=1,_r(f,x,D,H),x.child)}function h4(f,x,S,D,H){if(f===null){var G=S.type;return typeof G=="function"&&!db(G)&&G.defaultProps===void 0&&S.compare===null&&S.defaultProps===void 0?(x.tag=15,x.type=G,m4(f,x,G,D,H)):(f=gx(S.type,null,D,x,x.mode,H),f.ref=x.ref,f.return=x,x.child=f)}if(G=f.child,(f.lanes&H)===0){var ne=G.memoizedProps;if(S=S.compare,S=S!==null?S:Wh,S(ne,D)&&f.ref===x.ref)return yl(f,x,H)}return x.flags|=1,f=bo(G,D),f.ref=x.ref,f.return=x,x.child=f}function m4(f,x,S,D,H){if(f!==null){var G=f.memoizedProps;if(Wh(G,D)&&f.ref===x.ref)if(Wr=!1,x.pendingProps=D=G,(f.lanes&H)!==0)(f.flags&131072)!==0&&(Wr=!0);else return x.lanes=f.lanes,yl(f,x,H)}return Uy(f,x,S,D,H)}function f4(f,x,S){var D=x.pendingProps,H=D.children,G=f!==null?f.memoizedState:null;if(D.mode==="hidden")if((x.mode&1)===0)x.memoizedState={baseLanes:0,cachePool:null,transitions:null},nn(Jd,pa),pa|=S;else{if((S&1073741824)===0)return f=G!==null?G.baseLanes|S:S,x.lanes=x.childLanes=1073741824,x.memoizedState={baseLanes:f,cachePool:null,transitions:null},x.updateQueue=null,nn(Jd,pa),pa|=f,null;x.memoizedState={baseLanes:0,cachePool:null,transitions:null},D=G!==null?G.baseLanes:S,nn(Jd,pa),pa|=D}else G!==null?(D=G.baseLanes|S,x.memoizedState=null):D=S,nn(Jd,pa),pa|=D;return _r(f,x,H,S),x.child}function p4(f,x){var S=x.ref;(f===null&&S!==null||f!==null&&f.ref!==S)&&(x.flags|=512,x.flags|=2097152)}function Uy(f,x,S,D,H){var G=Vr(S)?cc:or.current;return G=zd(x,G),Kd(x,H),S=Dy(f,x,S,D,G,H),D=Oy(),f!==null&&!Wr?(x.updateQueue=f.updateQueue,x.flags&=-2053,f.lanes&=~H,yl(f,x,H)):(pn&&D&&xy(x),x.flags|=1,_r(f,x,S,H),x.child)}function x4(f,x,S,D,H){if(Vr(S)){var G=!0;$p(x)}else G=!1;if(Kd(x,H),x.stateNode===null)ix(f,x),r4(x,S,D),qy(x,S,D,H),D=!0;else if(f===null){var ne=x.stateNode,fe=x.memoizedProps;ne.props=fe;var be=ne.context,Re=S.contextType;typeof Re=="object"&&Re!==null?Re=Aa(Re):(Re=Vr(S)?cc:or.current,Re=zd(x,Re));var rt=S.getDerivedStateFromProps,ot=typeof rt=="function"||typeof ne.getSnapshotBeforeUpdate=="function";ot||typeof ne.UNSAFE_componentWillReceiveProps!="function"&&typeof ne.componentWillReceiveProps!="function"||(fe!==D||be!==Re)&&a4(x,ne,D,Re),mo=!1;var st=x.memoizedState;ne.state=st,Jp(x,D,ne,H),be=x.memoizedState,fe!==D||st!==be||Ur.current||mo?(typeof rt=="function"&&(By(x,S,rt,D),be=x.memoizedState),(fe=mo||n4(x,S,fe,D,st,be,Re))?(ot||typeof ne.UNSAFE_componentWillMount!="function"&&typeof ne.componentWillMount!="function"||(typeof ne.componentWillMount=="function"&&ne.componentWillMount(),typeof ne.UNSAFE_componentWillMount=="function"&&ne.UNSAFE_componentWillMount()),typeof ne.componentDidMount=="function"&&(x.flags|=4194308)):(typeof ne.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=D,x.memoizedState=be),ne.props=D,ne.state=be,ne.context=Re,D=fe):(typeof ne.componentDidMount=="function"&&(x.flags|=4194308),D=!1)}else{ne=x.stateNode,Mk(f,x),fe=x.memoizedProps,Re=x.type===x.elementType?fe:ni(x.type,fe),ne.props=Re,ot=x.pendingProps,st=ne.context,be=S.contextType,typeof be=="object"&&be!==null?be=Aa(be):(be=Vr(S)?cc:or.current,be=zd(x,be));var At=S.getDerivedStateFromProps;(rt=typeof At=="function"||typeof ne.getSnapshotBeforeUpdate=="function")||typeof ne.UNSAFE_componentWillReceiveProps!="function"&&typeof ne.componentWillReceiveProps!="function"||(fe!==ot||st!==be)&&a4(x,ne,D,be),mo=!1,st=x.memoizedState,ne.state=st,Jp(x,D,ne,H);var Lt=x.memoizedState;fe!==ot||st!==Lt||Ur.current||mo?(typeof At=="function"&&(By(x,S,At,D),Lt=x.memoizedState),(Re=mo||n4(x,S,Re,D,st,Lt,be)||!1)?(rt||typeof ne.UNSAFE_componentWillUpdate!="function"&&typeof ne.componentWillUpdate!="function"||(typeof ne.componentWillUpdate=="function"&&ne.componentWillUpdate(D,Lt,be),typeof ne.UNSAFE_componentWillUpdate=="function"&&ne.UNSAFE_componentWillUpdate(D,Lt,be)),typeof ne.componentDidUpdate=="function"&&(x.flags|=4),typeof ne.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof ne.componentDidUpdate!="function"||fe===f.memoizedProps&&st===f.memoizedState||(x.flags|=4),typeof ne.getSnapshotBeforeUpdate!="function"||fe===f.memoizedProps&&st===f.memoizedState||(x.flags|=1024),x.memoizedProps=D,x.memoizedState=Lt),ne.props=D,ne.state=Lt,ne.context=be,D=Re):(typeof ne.componentDidUpdate!="function"||fe===f.memoizedProps&&st===f.memoizedState||(x.flags|=4),typeof ne.getSnapshotBeforeUpdate!="function"||fe===f.memoizedProps&&st===f.memoizedState||(x.flags|=1024),D=!1)}return Vy(f,x,S,D,G,H)}function Vy(f,x,S,D,H,G){p4(f,x);var ne=(x.flags&128)!==0;if(!D&&!ne)return H&&jk(x,S,!1),yl(f,x,G);D=x.stateNode,sU.current=x;var fe=ne&&typeof S.getDerivedStateFromError!="function"?null:D.render();return x.flags|=1,f!==null&&ne?(x.child=Wd(x,f.child,null,G),x.child=Wd(x,null,fe,G)):_r(f,x,fe,G),x.memoizedState=D.state,H&&jk(x,S,!0),x.child}function g4(f){var x=f.stateNode;x.pendingContext?yk(f,x.pendingContext,x.pendingContext!==x.context):x.context&&yk(f,x.context,!1),ky(f,x.containerInfo)}function v4(f,x,S,D,H){return Vd(),by(H),x.flags|=256,_r(f,x,S,D),x.child}var Wy={dehydrated:null,treeContext:null,retryLane:0};function Hy(f){return{baseLanes:f,cachePool:null,transitions:null}}function y4(f,x,S){var D=x.pendingProps,H=bn.current,G=!1,ne=(x.flags&128)!==0,fe;if((fe=ne)||(fe=f!==null&&f.memoizedState===null?!1:(H&2)!==0),fe?(G=!0,x.flags&=-129):(f===null||f.memoizedState!==null)&&(H|=1),nn(bn,H&1),f===null)return yy(x),f=x.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?((x.mode&1)===0?x.lanes=1:f.data==="$!"?x.lanes=8:x.lanes=1073741824,null):(ne=D.children,f=D.fallback,G?(D=x.mode,G=x.child,ne={mode:"hidden",children:ne},(D&1)===0&&G!==null?(G.childLanes=0,G.pendingProps=ne):G=vx(ne,D,0,null),f=yc(f,D,S,null),G.return=x,f.return=x,G.sibling=f,x.child=G,x.child.memoizedState=Hy(S),x.memoizedState=Wy,f):Ky(x,ne));if(H=f.memoizedState,H!==null&&(fe=H.dehydrated,fe!==null))return nU(f,x,ne,D,fe,H,S);if(G){G=D.fallback,ne=x.mode,H=f.child,fe=H.sibling;var be={mode:"hidden",children:D.children};return(ne&1)===0&&x.child!==H?(D=x.child,D.childLanes=0,D.pendingProps=be,x.deletions=null):(D=bo(H,be),D.subtreeFlags=H.subtreeFlags&14680064),fe!==null?G=bo(fe,G):(G=yc(G,ne,S,null),G.flags|=2),G.return=x,D.return=x,D.sibling=G,x.child=D,D=G,G=x.child,ne=f.child.memoizedState,ne=ne===null?Hy(S):{baseLanes:ne.baseLanes|S,cachePool:null,transitions:ne.transitions},G.memoizedState=ne,G.childLanes=f.childLanes&~S,x.memoizedState=Wy,D}return G=f.child,f=G.sibling,D=bo(G,{mode:"visible",children:D.children}),(x.mode&1)===0&&(D.lanes=S),D.return=x,D.sibling=null,f!==null&&(S=x.deletions,S===null?(x.deletions=[f],x.flags|=16):S.push(f)),x.child=D,x.memoizedState=null,D}function Ky(f,x){return x=vx({mode:"visible",children:x},f.mode,0,null),x.return=f,f.child=x}function ax(f,x,S,D){return D!==null&&by(D),Wd(x,f.child,null,S),f=Ky(x,x.pendingProps.children),f.flags|=2,x.memoizedState=null,f}function nU(f,x,S,D,H,G,ne){if(S)return x.flags&256?(x.flags&=-257,D=zy(Error(n(422))),ax(f,x,ne,D)):x.memoizedState!==null?(x.child=f.child,x.flags|=128,null):(G=D.fallback,H=x.mode,D=vx({mode:"visible",children:D.children},H,0,null),G=yc(G,H,ne,null),G.flags|=2,D.return=x,G.return=x,D.sibling=G,x.child=D,(x.mode&1)!==0&&Wd(x,f.child,null,ne),x.child.memoizedState=Hy(ne),x.memoizedState=Wy,G);if((x.mode&1)===0)return ax(f,x,ne,null);if(H.data==="$!"){if(D=H.nextSibling&&H.nextSibling.dataset,D)var fe=D.dgst;return D=fe,G=Error(n(419)),D=zy(G,D,void 0),ax(f,x,ne,D)}if(fe=(ne&f.childLanes)!==0,Wr||fe){if(D=Gn,D!==null){switch(ne&-ne){case 4:H=2;break;case 16:H=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:H=32;break;case 536870912:H=268435456;break;default:H=0}H=(H&(D.suspendedLanes|ne))!==0?0:H,H!==0&&H!==G.retryLane&&(G.retryLane=H,gl(f,H),ii(D,f,H,-1))}return cb(),D=zy(Error(n(421))),ax(f,x,ne,D)}return H.data==="$?"?(x.flags|=128,x.child=f.child,x=xU.bind(null,f),H._reactRetry=x,null):(f=G.treeContext,fa=oo(H.nextSibling),ma=x,pn=!0,si=null,f!==null&&(Pa[Ta++]=pl,Pa[Ta++]=xl,Pa[Ta++]=dc,pl=f.id,xl=f.overflow,dc=x),x=Ky(x,D.children),x.flags|=4096,x)}function b4(f,x,S){f.lanes|=x;var D=f.alternate;D!==null&&(D.lanes|=x),_y(f.return,x,S)}function Gy(f,x,S,D,H){var G=f.memoizedState;G===null?f.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:D,tail:S,tailMode:H}:(G.isBackwards=x,G.rendering=null,G.renderingStartTime=0,G.last=D,G.tail=S,G.tailMode=H)}function j4(f,x,S){var D=x.pendingProps,H=D.revealOrder,G=D.tail;if(_r(f,x,D.children,S),D=bn.current,(D&2)!==0)D=D&1|2,x.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=x.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&b4(f,S,x);else if(f.tag===19)b4(f,S,x);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===x)break e;for(;f.sibling===null;){if(f.return===null||f.return===x)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}D&=1}if(nn(bn,D),(x.mode&1)===0)x.memoizedState=null;else switch(H){case"forwards":for(S=x.child,H=null;S!==null;)f=S.alternate,f!==null&&Xp(f)===null&&(H=S),S=S.sibling;S=H,S===null?(H=x.child,x.child=null):(H=S.sibling,S.sibling=null),Gy(x,!1,H,S,G);break;case"backwards":for(S=null,H=x.child,x.child=null;H!==null;){if(f=H.alternate,f!==null&&Xp(f)===null){x.child=H;break}f=H.sibling,H.sibling=S,S=H,H=f}Gy(x,!0,S,null,G);break;case"together":Gy(x,!1,null,null,void 0);break;default:x.memoizedState=null}return x.child}function ix(f,x){(x.mode&1)===0&&f!==null&&(f.alternate=null,x.alternate=null,x.flags|=2)}function yl(f,x,S){if(f!==null&&(x.dependencies=f.dependencies),pc|=x.lanes,(S&x.childLanes)===0)return null;if(f!==null&&x.child!==f.child)throw Error(n(153));if(x.child!==null){for(f=x.child,S=bo(f,f.pendingProps),x.child=S,S.return=x;f.sibling!==null;)f=f.sibling,S=S.sibling=bo(f,f.pendingProps),S.return=x;S.sibling=null}return x.child}function rU(f,x,S){switch(x.tag){case 3:g4(x),Vd();break;case 5:Rk(x);break;case 1:Vr(x.type)&&$p(x);break;case 4:ky(x,x.stateNode.containerInfo);break;case 10:var D=x.type._context,H=x.memoizedProps.value;nn(Gp,D._currentValue),D._currentValue=H;break;case 13:if(D=x.memoizedState,D!==null)return D.dehydrated!==null?(nn(bn,bn.current&1),x.flags|=128,null):(S&x.child.childLanes)!==0?y4(f,x,S):(nn(bn,bn.current&1),f=yl(f,x,S),f!==null?f.sibling:null);nn(bn,bn.current&1);break;case 19:if(D=(S&x.childLanes)!==0,(f.flags&128)!==0){if(D)return j4(f,x,S);x.flags|=128}if(H=x.memoizedState,H!==null&&(H.rendering=null,H.tail=null,H.lastEffect=null),nn(bn,bn.current),D)break;return null;case 22:case 23:return x.lanes=0,f4(f,x,S)}return yl(f,x,S)}var w4,Yy,N4,_4;w4=function(f,x){for(var S=x.child;S!==null;){if(S.tag===5||S.tag===6)f.appendChild(S.stateNode);else if(S.tag!==4&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===x)break;for(;S.sibling===null;){if(S.return===null||S.return===x)return;S=S.return}S.sibling.return=S.return,S=S.sibling}},Yy=function(){},N4=function(f,x,S,D){var H=f.memoizedProps;if(H!==D){f=x.stateNode,mc(Ai.current);var G=null;switch(S){case"input":H=je(f,H),D=je(f,D),G=[];break;case"select":H=L({},H,{value:void 0}),D=L({},D,{value:void 0}),G=[];break;case"textarea":H=De(f,H),D=De(f,D),G=[];break;default:typeof H.onClick!="function"&&typeof D.onClick=="function"&&(f.onclick=Bp)}Jt(S,D);var ne;S=null;for(Re in H)if(!D.hasOwnProperty(Re)&&H.hasOwnProperty(Re)&&H[Re]!=null)if(Re==="style"){var fe=H[Re];for(ne in fe)fe.hasOwnProperty(ne)&&(S||(S={}),S[ne]="")}else Re!=="dangerouslySetInnerHTML"&&Re!=="children"&&Re!=="suppressContentEditableWarning"&&Re!=="suppressHydrationWarning"&&Re!=="autoFocus"&&(a.hasOwnProperty(Re)?G||(G=[]):(G=G||[]).push(Re,null));for(Re in D){var be=D[Re];if(fe=H!=null?H[Re]:void 0,D.hasOwnProperty(Re)&&be!==fe&&(be!=null||fe!=null))if(Re==="style")if(fe){for(ne in fe)!fe.hasOwnProperty(ne)||be&&be.hasOwnProperty(ne)||(S||(S={}),S[ne]="");for(ne in be)be.hasOwnProperty(ne)&&fe[ne]!==be[ne]&&(S||(S={}),S[ne]=be[ne])}else S||(G||(G=[]),G.push(Re,S)),S=be;else Re==="dangerouslySetInnerHTML"?(be=be?be.__html:void 0,fe=fe?fe.__html:void 0,be!=null&&fe!==be&&(G=G||[]).push(Re,be)):Re==="children"?typeof be!="string"&&typeof be!="number"||(G=G||[]).push(Re,""+be):Re!=="suppressContentEditableWarning"&&Re!=="suppressHydrationWarning"&&(a.hasOwnProperty(Re)?(be!=null&&Re==="onScroll"&&cn("scroll",f),G||fe===be||(G=[])):(G=G||[]).push(Re,be))}S&&(G=G||[]).push("style",S);var Re=G;(x.updateQueue=Re)&&(x.flags|=4)}},_4=function(f,x,S,D){S!==D&&(x.flags|=4)};function im(f,x){if(!pn)switch(f.tailMode){case"hidden":x=f.tail;for(var S=null;x!==null;)x.alternate!==null&&(S=x),x=x.sibling;S===null?f.tail=null:S.sibling=null;break;case"collapsed":S=f.tail;for(var D=null;S!==null;)S.alternate!==null&&(D=S),S=S.sibling;D===null?x||f.tail===null?f.tail=null:f.tail.sibling=null:D.sibling=null}}function dr(f){var x=f.alternate!==null&&f.alternate.child===f.child,S=0,D=0;if(x)for(var H=f.child;H!==null;)S|=H.lanes|H.childLanes,D|=H.subtreeFlags&14680064,D|=H.flags&14680064,H.return=f,H=H.sibling;else for(H=f.child;H!==null;)S|=H.lanes|H.childLanes,D|=H.subtreeFlags,D|=H.flags,H.return=f,H=H.sibling;return f.subtreeFlags|=D,f.childLanes=S,x}function aU(f,x,S){var D=x.pendingProps;switch(gy(x),x.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dr(x),null;case 1:return Vr(x.type)&&zp(),dr(x),null;case 3:return D=x.stateNode,Gd(),dn(Ur),dn(or),Ty(),D.pendingContext&&(D.context=D.pendingContext,D.pendingContext=null),(f===null||f.child===null)&&(Hp(x)?x.flags|=4:f===null||f.memoizedState.isDehydrated&&(x.flags&256)===0||(x.flags|=1024,si!==null&&(ib(si),si=null))),Yy(f,x),dr(x),null;case 5:Ey(x);var H=mc(tm.current);if(S=x.type,f!==null&&x.stateNode!=null)N4(f,x,S,D,H),f.ref!==x.ref&&(x.flags|=512,x.flags|=2097152);else{if(!D){if(x.stateNode===null)throw Error(n(166));return dr(x),null}if(f=mc(Ai.current),Hp(x)){D=x.stateNode,S=x.type;var G=x.memoizedProps;switch(D[Ti]=x,D[Qh]=G,f=(x.mode&1)!==0,S){case"dialog":cn("cancel",D),cn("close",D);break;case"iframe":case"object":case"embed":cn("load",D);break;case"video":case"audio":for(H=0;H<Kh.length;H++)cn(Kh[H],D);break;case"source":cn("error",D);break;case"img":case"image":case"link":cn("error",D),cn("load",D);break;case"details":cn("toggle",D);break;case"input":we(D,G),cn("invalid",D);break;case"select":D._wrapperState={wasMultiple:!!G.multiple},cn("invalid",D);break;case"textarea":it(D,G),cn("invalid",D)}Jt(S,G),H=null;for(var ne in G)if(G.hasOwnProperty(ne)){var fe=G[ne];ne==="children"?typeof fe=="string"?D.textContent!==fe&&(G.suppressHydrationWarning!==!0&&Ip(D.textContent,fe,f),H=["children",fe]):typeof fe=="number"&&D.textContent!==""+fe&&(G.suppressHydrationWarning!==!0&&Ip(D.textContent,fe,f),H=["children",""+fe]):a.hasOwnProperty(ne)&&fe!=null&&ne==="onScroll"&&cn("scroll",D)}switch(S){case"input":ue(D),Ee(D,G,!0);break;case"textarea":ue(D),at(D);break;case"select":case"option":break;default:typeof G.onClick=="function"&&(D.onclick=Bp)}D=H,x.updateQueue=D,D!==null&&(x.flags|=4)}else{ne=H.nodeType===9?H:H.ownerDocument,f==="http://www.w3.org/1999/xhtml"&&(f=_e(S)),f==="http://www.w3.org/1999/xhtml"?S==="script"?(f=ne.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild)):typeof D.is=="string"?f=ne.createElement(S,{is:D.is}):(f=ne.createElement(S),S==="select"&&(ne=f,D.multiple?ne.multiple=!0:D.size&&(ne.size=D.size))):f=ne.createElementNS(f,S),f[Ti]=x,f[Qh]=D,w4(f,x,!1,!1),x.stateNode=f;e:{switch(ne=fn(S,D),S){case"dialog":cn("cancel",f),cn("close",f),H=D;break;case"iframe":case"object":case"embed":cn("load",f),H=D;break;case"video":case"audio":for(H=0;H<Kh.length;H++)cn(Kh[H],f);H=D;break;case"source":cn("error",f),H=D;break;case"img":case"image":case"link":cn("error",f),cn("load",f),H=D;break;case"details":cn("toggle",f),H=D;break;case"input":we(f,D),H=je(f,D),cn("invalid",f);break;case"option":H=D;break;case"select":f._wrapperState={wasMultiple:!!D.multiple},H=L({},D,{value:void 0}),cn("invalid",f);break;case"textarea":it(f,D),H=De(f,D),cn("invalid",f);break;default:H=D}Jt(S,H),fe=H;for(G in fe)if(fe.hasOwnProperty(G)){var be=fe[G];G==="style"?Ss(f,be):G==="dangerouslySetInnerHTML"?(be=be?be.__html:void 0,be!=null&&dt(f,be)):G==="children"?typeof be=="string"?(S!=="textarea"||be!=="")&&lt(f,be):typeof be=="number"&&lt(f,""+be):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(a.hasOwnProperty(G)?be!=null&&G==="onScroll"&&cn("scroll",f):be!=null&&N(f,G,be,ne))}switch(S){case"input":ue(f),Ee(f,D,!1);break;case"textarea":ue(f),at(f);break;case"option":D.value!=null&&f.setAttribute("value",""+ae(D.value));break;case"select":f.multiple=!!D.multiple,G=D.value,G!=null?Ye(f,!!D.multiple,G,!1):D.defaultValue!=null&&Ye(f,!!D.multiple,D.defaultValue,!0);break;default:typeof H.onClick=="function"&&(f.onclick=Bp)}switch(S){case"button":case"input":case"select":case"textarea":D=!!D.autoFocus;break e;case"img":D=!0;break e;default:D=!1}}D&&(x.flags|=4)}x.ref!==null&&(x.flags|=512,x.flags|=2097152)}return dr(x),null;case 6:if(f&&x.stateNode!=null)_4(f,x,f.memoizedProps,D);else{if(typeof D!="string"&&x.stateNode===null)throw Error(n(166));if(S=mc(tm.current),mc(Ai.current),Hp(x)){if(D=x.stateNode,S=x.memoizedProps,D[Ti]=x,(G=D.nodeValue!==S)&&(f=ma,f!==null))switch(f.tag){case 3:Ip(D.nodeValue,S,(f.mode&1)!==0);break;case 5:f.memoizedProps.suppressHydrationWarning!==!0&&Ip(D.nodeValue,S,(f.mode&1)!==0)}G&&(x.flags|=4)}else D=(S.nodeType===9?S:S.ownerDocument).createTextNode(D),D[Ti]=x,x.stateNode=D}return dr(x),null;case 13:if(dn(bn),D=x.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(pn&&fa!==null&&(x.mode&1)!==0&&(x.flags&128)===0)kk(),Vd(),x.flags|=98560,G=!1;else if(G=Hp(x),D!==null&&D.dehydrated!==null){if(f===null){if(!G)throw Error(n(318));if(G=x.memoizedState,G=G!==null?G.dehydrated:null,!G)throw Error(n(317));G[Ti]=x}else Vd(),(x.flags&128)===0&&(x.memoizedState=null),x.flags|=4;dr(x),G=!1}else si!==null&&(ib(si),si=null),G=!0;if(!G)return x.flags&65536?x:null}return(x.flags&128)!==0?(x.lanes=S,x):(D=D!==null,D!==(f!==null&&f.memoizedState!==null)&&D&&(x.child.flags|=8192,(x.mode&1)!==0&&(f===null||(bn.current&1)!==0?qn===0&&(qn=3):cb())),x.updateQueue!==null&&(x.flags|=4),dr(x),null);case 4:return Gd(),Yy(f,x),f===null&&Gh(x.stateNode.containerInfo),dr(x),null;case 10:return Ny(x.type._context),dr(x),null;case 17:return Vr(x.type)&&zp(),dr(x),null;case 19:if(dn(bn),G=x.memoizedState,G===null)return dr(x),null;if(D=(x.flags&128)!==0,ne=G.rendering,ne===null)if(D)im(G,!1);else{if(qn!==0||f!==null&&(f.flags&128)!==0)for(f=x.child;f!==null;){if(ne=Xp(f),ne!==null){for(x.flags|=128,im(G,!1),D=ne.updateQueue,D!==null&&(x.updateQueue=D,x.flags|=4),x.subtreeFlags=0,D=S,S=x.child;S!==null;)G=S,f=D,G.flags&=14680066,ne=G.alternate,ne===null?(G.childLanes=0,G.lanes=f,G.child=null,G.subtreeFlags=0,G.memoizedProps=null,G.memoizedState=null,G.updateQueue=null,G.dependencies=null,G.stateNode=null):(G.childLanes=ne.childLanes,G.lanes=ne.lanes,G.child=ne.child,G.subtreeFlags=0,G.deletions=null,G.memoizedProps=ne.memoizedProps,G.memoizedState=ne.memoizedState,G.updateQueue=ne.updateQueue,G.type=ne.type,f=ne.dependencies,G.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),S=S.sibling;return nn(bn,bn.current&1|2),x.child}f=f.sibling}G.tail!==null&&sn()>Xd&&(x.flags|=128,D=!0,im(G,!1),x.lanes=4194304)}else{if(!D)if(f=Xp(ne),f!==null){if(x.flags|=128,D=!0,S=f.updateQueue,S!==null&&(x.updateQueue=S,x.flags|=4),im(G,!0),G.tail===null&&G.tailMode==="hidden"&&!ne.alternate&&!pn)return dr(x),null}else 2*sn()-G.renderingStartTime>Xd&&S!==1073741824&&(x.flags|=128,D=!0,im(G,!1),x.lanes=4194304);G.isBackwards?(ne.sibling=x.child,x.child=ne):(S=G.last,S!==null?S.sibling=ne:x.child=ne,G.last=ne)}return G.tail!==null?(x=G.tail,G.rendering=x,G.tail=x.sibling,G.renderingStartTime=sn(),x.sibling=null,S=bn.current,nn(bn,D?S&1|2:S&1),x):(dr(x),null);case 22:case 23:return ob(),D=x.memoizedState!==null,f!==null&&f.memoizedState!==null!==D&&(x.flags|=8192),D&&(x.mode&1)!==0?(pa&1073741824)!==0&&(dr(x),x.subtreeFlags&6&&(x.flags|=8192)):dr(x),null;case 24:return null;case 25:return null}throw Error(n(156,x.tag))}function iU(f,x){switch(gy(x),x.tag){case 1:return Vr(x.type)&&zp(),f=x.flags,f&65536?(x.flags=f&-65537|128,x):null;case 3:return Gd(),dn(Ur),dn(or),Ty(),f=x.flags,(f&65536)!==0&&(f&128)===0?(x.flags=f&-65537|128,x):null;case 5:return Ey(x),null;case 13:if(dn(bn),f=x.memoizedState,f!==null&&f.dehydrated!==null){if(x.alternate===null)throw Error(n(340));Vd()}return f=x.flags,f&65536?(x.flags=f&-65537|128,x):null;case 19:return dn(bn),null;case 4:return Gd(),null;case 10:return Ny(x.type._context),null;case 22:case 23:return ob(),null;case 24:return null;default:return null}}var lx=!1,ur=!1,lU=typeof WeakSet=="function"?WeakSet:Set,Ot=null;function Qd(f,x){var S=f.ref;if(S!==null)if(typeof S=="function")try{S(null)}catch(D){Sn(f,x,D)}else S.current=null}function Qy(f,x,S){try{S()}catch(D){Sn(f,x,D)}}var S4=!1;function oU(f,x){if(oy=kp,f=nk(),ey(f)){if("selectionStart"in f)var S={start:f.selectionStart,end:f.selectionEnd};else e:{S=(S=f.ownerDocument)&&S.defaultView||window;var D=S.getSelection&&S.getSelection();if(D&&D.rangeCount!==0){S=D.anchorNode;var H=D.anchorOffset,G=D.focusNode;D=D.focusOffset;try{S.nodeType,G.nodeType}catch{S=null;break e}var ne=0,fe=-1,be=-1,Re=0,rt=0,ot=f,st=null;t:for(;;){for(var At;ot!==S||H!==0&&ot.nodeType!==3||(fe=ne+H),ot!==G||D!==0&&ot.nodeType!==3||(be=ne+D),ot.nodeType===3&&(ne+=ot.nodeValue.length),(At=ot.firstChild)!==null;)st=ot,ot=At;for(;;){if(ot===f)break t;if(st===S&&++Re===H&&(fe=ne),st===G&&++rt===D&&(be=ne),(At=ot.nextSibling)!==null)break;ot=st,st=ot.parentNode}ot=At}S=fe===-1||be===-1?null:{start:fe,end:be}}else S=null}S=S||{start:0,end:0}}else S=null;for(cy={focusedElem:f,selectionRange:S},kp=!1,Ot=x;Ot!==null;)if(x=Ot,f=x.child,(x.subtreeFlags&1028)!==0&&f!==null)f.return=x,Ot=f;else for(;Ot!==null;){x=Ot;try{var Lt=x.alternate;if((x.flags&1024)!==0)switch(x.tag){case 0:case 11:case 15:break;case 1:if(Lt!==null){var qt=Lt.memoizedProps,Tn=Lt.memoizedState,Ae=x.stateNode,ke=Ae.getSnapshotBeforeUpdate(x.elementType===x.type?qt:ni(x.type,qt),Tn);Ae.__reactInternalSnapshotBeforeUpdate=ke}break;case 3:var Me=x.stateNode.containerInfo;Me.nodeType===1?Me.textContent="":Me.nodeType===9&&Me.documentElement&&Me.removeChild(Me.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(pt){Sn(x,x.return,pt)}if(f=x.sibling,f!==null){f.return=x.return,Ot=f;break}Ot=x.return}return Lt=S4,S4=!1,Lt}function lm(f,x,S){var D=x.updateQueue;if(D=D!==null?D.lastEffect:null,D!==null){var H=D=D.next;do{if((H.tag&f)===f){var G=H.destroy;H.destroy=void 0,G!==void 0&&Qy(x,S,G)}H=H.next}while(H!==D)}}function ox(f,x){if(x=x.updateQueue,x=x!==null?x.lastEffect:null,x!==null){var S=x=x.next;do{if((S.tag&f)===f){var D=S.create;S.destroy=D()}S=S.next}while(S!==x)}}function Jy(f){var x=f.ref;if(x!==null){var S=f.stateNode;switch(f.tag){case 5:f=S;break;default:f=S}typeof x=="function"?x(f):x.current=f}}function C4(f){var x=f.alternate;x!==null&&(f.alternate=null,C4(x)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(x=f.stateNode,x!==null&&(delete x[Ti],delete x[Qh],delete x[my],delete x[V$],delete x[W$])),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function k4(f){return f.tag===5||f.tag===3||f.tag===4}function E4(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||k4(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function Xy(f,x,S){var D=f.tag;if(D===5||D===6)f=f.stateNode,x?S.nodeType===8?S.parentNode.insertBefore(f,x):S.insertBefore(f,x):(S.nodeType===8?(x=S.parentNode,x.insertBefore(f,S)):(x=S,x.appendChild(f)),S=S._reactRootContainer,S!=null||x.onclick!==null||(x.onclick=Bp));else if(D!==4&&(f=f.child,f!==null))for(Xy(f,x,S),f=f.sibling;f!==null;)Xy(f,x,S),f=f.sibling}function Zy(f,x,S){var D=f.tag;if(D===5||D===6)f=f.stateNode,x?S.insertBefore(f,x):S.appendChild(f);else if(D!==4&&(f=f.child,f!==null))for(Zy(f,x,S),f=f.sibling;f!==null;)Zy(f,x,S),f=f.sibling}var nr=null,ri=!1;function po(f,x,S){for(S=S.child;S!==null;)P4(f,x,S),S=S.sibling}function P4(f,x,S){if(wr&&typeof wr.onCommitFiberUnmount=="function")try{wr.onCommitFiberUnmount(hl,S)}catch{}switch(S.tag){case 5:ur||Qd(S,x);case 6:var D=nr,H=ri;nr=null,po(f,x,S),nr=D,ri=H,nr!==null&&(ri?(f=nr,S=S.stateNode,f.nodeType===8?f.parentNode.removeChild(S):f.removeChild(S)):nr.removeChild(S.stateNode));break;case 18:nr!==null&&(ri?(f=nr,S=S.stateNode,f.nodeType===8?hy(f.parentNode,S):f.nodeType===1&&hy(f,S),Bh(f)):hy(nr,S.stateNode));break;case 4:D=nr,H=ri,nr=S.stateNode.containerInfo,ri=!0,po(f,x,S),nr=D,ri=H;break;case 0:case 11:case 14:case 15:if(!ur&&(D=S.updateQueue,D!==null&&(D=D.lastEffect,D!==null))){H=D=D.next;do{var G=H,ne=G.destroy;G=G.tag,ne!==void 0&&((G&2)!==0||(G&4)!==0)&&Qy(S,x,ne),H=H.next}while(H!==D)}po(f,x,S);break;case 1:if(!ur&&(Qd(S,x),D=S.stateNode,typeof D.componentWillUnmount=="function"))try{D.props=S.memoizedProps,D.state=S.memoizedState,D.componentWillUnmount()}catch(fe){Sn(S,x,fe)}po(f,x,S);break;case 21:po(f,x,S);break;case 22:S.mode&1?(ur=(D=ur)||S.memoizedState!==null,po(f,x,S),ur=D):po(f,x,S);break;default:po(f,x,S)}}function T4(f){var x=f.updateQueue;if(x!==null){f.updateQueue=null;var S=f.stateNode;S===null&&(S=f.stateNode=new lU),x.forEach(function(D){var H=gU.bind(null,f,D);S.has(D)||(S.add(D),D.then(H,H))})}}function ai(f,x){var S=x.deletions;if(S!==null)for(var D=0;D<S.length;D++){var H=S[D];try{var G=f,ne=x,fe=ne;e:for(;fe!==null;){switch(fe.tag){case 5:nr=fe.stateNode,ri=!1;break e;case 3:nr=fe.stateNode.containerInfo,ri=!0;break e;case 4:nr=fe.stateNode.containerInfo,ri=!0;break e}fe=fe.return}if(nr===null)throw Error(n(160));P4(G,ne,H),nr=null,ri=!1;var be=H.alternate;be!==null&&(be.return=null),H.return=null}catch(Re){Sn(H,x,Re)}}if(x.subtreeFlags&12854)for(x=x.child;x!==null;)A4(x,f),x=x.sibling}function A4(f,x){var S=f.alternate,D=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:if(ai(x,f),Di(f),D&4){try{lm(3,f,f.return),ox(3,f)}catch(qt){Sn(f,f.return,qt)}try{lm(5,f,f.return)}catch(qt){Sn(f,f.return,qt)}}break;case 1:ai(x,f),Di(f),D&512&&S!==null&&Qd(S,S.return);break;case 5:if(ai(x,f),Di(f),D&512&&S!==null&&Qd(S,S.return),f.flags&32){var H=f.stateNode;try{lt(H,"")}catch(qt){Sn(f,f.return,qt)}}if(D&4&&(H=f.stateNode,H!=null)){var G=f.memoizedProps,ne=S!==null?S.memoizedProps:G,fe=f.type,be=f.updateQueue;if(f.updateQueue=null,be!==null)try{fe==="input"&&G.type==="radio"&&G.name!=null&&qe(H,G),fn(fe,ne);var Re=fn(fe,G);for(ne=0;ne<be.length;ne+=2){var rt=be[ne],ot=be[ne+1];rt==="style"?Ss(H,ot):rt==="dangerouslySetInnerHTML"?dt(H,ot):rt==="children"?lt(H,ot):N(H,rt,ot,Re)}switch(fe){case"input":ze(H,G);break;case"textarea":Se(H,G);break;case"select":var st=H._wrapperState.wasMultiple;H._wrapperState.wasMultiple=!!G.multiple;var At=G.value;At!=null?Ye(H,!!G.multiple,At,!1):st!==!!G.multiple&&(G.defaultValue!=null?Ye(H,!!G.multiple,G.defaultValue,!0):Ye(H,!!G.multiple,G.multiple?[]:"",!1))}H[Qh]=G}catch(qt){Sn(f,f.return,qt)}}break;case 6:if(ai(x,f),Di(f),D&4){if(f.stateNode===null)throw Error(n(162));H=f.stateNode,G=f.memoizedProps;try{H.nodeValue=G}catch(qt){Sn(f,f.return,qt)}}break;case 3:if(ai(x,f),Di(f),D&4&&S!==null&&S.memoizedState.isDehydrated)try{Bh(x.containerInfo)}catch(qt){Sn(f,f.return,qt)}break;case 4:ai(x,f),Di(f);break;case 13:ai(x,f),Di(f),H=f.child,H.flags&8192&&(G=H.memoizedState!==null,H.stateNode.isHidden=G,!G||H.alternate!==null&&H.alternate.memoizedState!==null||(sb=sn())),D&4&&T4(f);break;case 22:if(rt=S!==null&&S.memoizedState!==null,f.mode&1?(ur=(Re=ur)||rt,ai(x,f),ur=Re):ai(x,f),Di(f),D&8192){if(Re=f.memoizedState!==null,(f.stateNode.isHidden=Re)&&!rt&&(f.mode&1)!==0)for(Ot=f,rt=f.child;rt!==null;){for(ot=Ot=rt;Ot!==null;){switch(st=Ot,At=st.child,st.tag){case 0:case 11:case 14:case 15:lm(4,st,st.return);break;case 1:Qd(st,st.return);var Lt=st.stateNode;if(typeof Lt.componentWillUnmount=="function"){D=st,S=st.return;try{x=D,Lt.props=x.memoizedProps,Lt.state=x.memoizedState,Lt.componentWillUnmount()}catch(qt){Sn(D,S,qt)}}break;case 5:Qd(st,st.return);break;case 22:if(st.memoizedState!==null){O4(ot);continue}}At!==null?(At.return=st,Ot=At):O4(ot)}rt=rt.sibling}e:for(rt=null,ot=f;;){if(ot.tag===5){if(rt===null){rt=ot;try{H=ot.stateNode,Re?(G=H.style,typeof G.setProperty=="function"?G.setProperty("display","none","important"):G.display="none"):(fe=ot.stateNode,be=ot.memoizedProps.style,ne=be!=null&&be.hasOwnProperty("display")?be.display:null,fe.style.display=Bs("display",ne))}catch(qt){Sn(f,f.return,qt)}}}else if(ot.tag===6){if(rt===null)try{ot.stateNode.nodeValue=Re?"":ot.memoizedProps}catch(qt){Sn(f,f.return,qt)}}else if((ot.tag!==22&&ot.tag!==23||ot.memoizedState===null||ot===f)&&ot.child!==null){ot.child.return=ot,ot=ot.child;continue}if(ot===f)break e;for(;ot.sibling===null;){if(ot.return===null||ot.return===f)break e;rt===ot&&(rt=null),ot=ot.return}rt===ot&&(rt=null),ot.sibling.return=ot.return,ot=ot.sibling}}break;case 19:ai(x,f),Di(f),D&4&&T4(f);break;case 21:break;default:ai(x,f),Di(f)}}function Di(f){var x=f.flags;if(x&2){try{e:{for(var S=f.return;S!==null;){if(k4(S)){var D=S;break e}S=S.return}throw Error(n(160))}switch(D.tag){case 5:var H=D.stateNode;D.flags&32&&(lt(H,""),D.flags&=-33);var G=E4(f);Zy(f,G,H);break;case 3:case 4:var ne=D.stateNode.containerInfo,fe=E4(f);Xy(f,fe,ne);break;default:throw Error(n(161))}}catch(be){Sn(f,f.return,be)}f.flags&=-3}x&4096&&(f.flags&=-4097)}function cU(f,x,S){Ot=f,M4(f)}function M4(f,x,S){for(var D=(f.mode&1)!==0;Ot!==null;){var H=Ot,G=H.child;if(H.tag===22&&D){var ne=H.memoizedState!==null||lx;if(!ne){var fe=H.alternate,be=fe!==null&&fe.memoizedState!==null||ur;fe=lx;var Re=ur;if(lx=ne,(ur=be)&&!Re)for(Ot=H;Ot!==null;)ne=Ot,be=ne.child,ne.tag===22&&ne.memoizedState!==null?R4(H):be!==null?(be.return=ne,Ot=be):R4(H);for(;G!==null;)Ot=G,M4(G),G=G.sibling;Ot=H,lx=fe,ur=Re}D4(f)}else(H.subtreeFlags&8772)!==0&&G!==null?(G.return=H,Ot=G):D4(f)}}function D4(f){for(;Ot!==null;){var x=Ot;if((x.flags&8772)!==0){var S=x.alternate;try{if((x.flags&8772)!==0)switch(x.tag){case 0:case 11:case 15:ur||ox(5,x);break;case 1:var D=x.stateNode;if(x.flags&4&&!ur)if(S===null)D.componentDidMount();else{var H=x.elementType===x.type?S.memoizedProps:ni(x.type,S.memoizedProps);D.componentDidUpdate(H,S.memoizedState,D.__reactInternalSnapshotBeforeUpdate)}var G=x.updateQueue;G!==null&&Ok(x,G,D);break;case 3:var ne=x.updateQueue;if(ne!==null){if(S=null,x.child!==null)switch(x.child.tag){case 5:S=x.child.stateNode;break;case 1:S=x.child.stateNode}Ok(x,ne,S)}break;case 5:var fe=x.stateNode;if(S===null&&x.flags&4){S=fe;var be=x.memoizedProps;switch(x.type){case"button":case"input":case"select":case"textarea":be.autoFocus&&S.focus();break;case"img":be.src&&(S.src=be.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(x.memoizedState===null){var Re=x.alternate;if(Re!==null){var rt=Re.memoizedState;if(rt!==null){var ot=rt.dehydrated;ot!==null&&Bh(ot)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}ur||x.flags&512&&Jy(x)}catch(st){Sn(x,x.return,st)}}if(x===f){Ot=null;break}if(S=x.sibling,S!==null){S.return=x.return,Ot=S;break}Ot=x.return}}function O4(f){for(;Ot!==null;){var x=Ot;if(x===f){Ot=null;break}var S=x.sibling;if(S!==null){S.return=x.return,Ot=S;break}Ot=x.return}}function R4(f){for(;Ot!==null;){var x=Ot;try{switch(x.tag){case 0:case 11:case 15:var S=x.return;try{ox(4,x)}catch(be){Sn(x,S,be)}break;case 1:var D=x.stateNode;if(typeof D.componentDidMount=="function"){var H=x.return;try{D.componentDidMount()}catch(be){Sn(x,H,be)}}var G=x.return;try{Jy(x)}catch(be){Sn(x,G,be)}break;case 5:var ne=x.return;try{Jy(x)}catch(be){Sn(x,ne,be)}}}catch(be){Sn(x,x.return,be)}if(x===f){Ot=null;break}var fe=x.sibling;if(fe!==null){fe.return=x.return,Ot=fe;break}Ot=x.return}}var dU=Math.ceil,cx=_.ReactCurrentDispatcher,eb=_.ReactCurrentOwner,Da=_.ReactCurrentBatchConfig,Ls=0,Gn=null,On=null,rr=0,pa=0,Jd=co(0),qn=0,om=null,pc=0,dx=0,tb=0,cm=null,Hr=null,sb=0,Xd=1/0,bl=null,ux=!1,nb=null,xo=null,hx=!1,go=null,mx=0,dm=0,rb=null,fx=-1,px=0;function Sr(){return(Ls&6)!==0?sn():fx!==-1?fx:fx=sn()}function vo(f){return(f.mode&1)===0?1:(Ls&2)!==0&&rr!==0?rr&-rr:K$.transition!==null?(px===0&&(px=_p()),px):(f=ie,f!==0||(f=window.event,f=f===void 0?16:LC(f.type)),f)}function ii(f,x,S,D){if(50<dm)throw dm=0,rb=null,Error(n(185));so(f,S,D),((Ls&2)===0||f!==Gn)&&(f===Gn&&((Ls&2)===0&&(dx|=S),qn===4&&yo(f,rr)),Kr(f,D),S===1&&Ls===0&&(x.mode&1)===0&&(Xd=sn()+500,Up&&ho()))}function Kr(f,x){var S=f.callbackNode;Np(f,x);var D=Ei(f,f===Gn?rr:0);if(D===0)S!==null&&Cd(S),f.callbackNode=null,f.callbackPriority=0;else if(x=D&-D,f.callbackPriority!==x){if(S!=null&&Cd(S),x===1)f.tag===0?H$(L4.bind(null,f)):wk(L4.bind(null,f)),$$(function(){(Ls&6)===0&&ho()}),S=null;else{switch(Oe(D)){case 1:S=to;break;case 4:S=ul;break;case 16:S=zr;break;case 536870912:S=Ed;break;default:S=zr}S=W4(S,F4.bind(null,f))}f.callbackPriority=x,f.callbackNode=S}}function F4(f,x){if(fx=-1,px=0,(Ls&6)!==0)throw Error(n(327));var S=f.callbackNode;if(Zd()&&f.callbackNode!==S)return null;var D=Ei(f,f===Gn?rr:0);if(D===0)return null;if((D&30)!==0||(D&f.expiredLanes)!==0||x)x=xx(f,D);else{x=D;var H=Ls;Ls|=2;var G=B4();(Gn!==f||rr!==x)&&(bl=null,Xd=sn()+500,gc(f,x));do try{mU();break}catch(fe){I4(f,fe)}while(!0);wy(),cx.current=G,Ls=H,On!==null?x=0:(Gn=null,rr=0,x=qn)}if(x!==0){if(x===2&&(H=lc(f),H!==0&&(D=H,x=ab(f,H))),x===1)throw S=om,gc(f,0),yo(f,D),Kr(f,sn()),S;if(x===6)yo(f,D);else{if(H=f.current.alternate,(D&30)===0&&!uU(H)&&(x=xx(f,D),x===2&&(G=lc(f),G!==0&&(D=G,x=ab(f,G))),x===1))throw S=om,gc(f,0),yo(f,D),Kr(f,sn()),S;switch(f.finishedWork=H,f.finishedLanes=D,x){case 0:case 1:throw Error(n(345));case 2:vc(f,Hr,bl);break;case 3:if(yo(f,D),(D&130023424)===D&&(x=sb+500-sn(),10<x)){if(Ei(f,0)!==0)break;if(H=f.suspendedLanes,(H&D)!==D){Sr(),f.pingedLanes|=f.suspendedLanes&H;break}f.timeoutHandle=uy(vc.bind(null,f,Hr,bl),x);break}vc(f,Hr,bl);break;case 4:if(yo(f,D),(D&4194240)===D)break;for(x=f.eventTimes,H=-1;0<D;){var ne=31-xe(D);G=1<<ne,ne=x[ne],ne>H&&(H=ne),D&=~G}if(D=H,D=sn()-D,D=(120>D?120:480>D?480:1080>D?1080:1920>D?1920:3e3>D?3e3:4320>D?4320:1960*dU(D/1960))-D,10<D){f.timeoutHandle=uy(vc.bind(null,f,Hr,bl),D);break}vc(f,Hr,bl);break;case 5:vc(f,Hr,bl);break;default:throw Error(n(329))}}}return Kr(f,sn()),f.callbackNode===S?F4.bind(null,f):null}function ab(f,x){var S=cm;return f.current.memoizedState.isDehydrated&&(gc(f,x).flags|=256),f=xx(f,x),f!==2&&(x=Hr,Hr=S,x!==null&&ib(x)),f}function ib(f){Hr===null?Hr=f:Hr.push.apply(Hr,f)}function uU(f){for(var x=f;;){if(x.flags&16384){var S=x.updateQueue;if(S!==null&&(S=S.stores,S!==null))for(var D=0;D<S.length;D++){var H=S[D],G=H.getSnapshot;H=H.value;try{if(!ti(G(),H))return!1}catch{return!1}}}if(S=x.child,x.subtreeFlags&16384&&S!==null)S.return=x,x=S;else{if(x===f)break;for(;x.sibling===null;){if(x.return===null||x.return===f)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function yo(f,x){for(x&=~tb,x&=~dx,f.suspendedLanes|=x,f.pingedLanes&=~x,f=f.expirationTimes;0<x;){var S=31-xe(x),D=1<<S;f[S]=-1,x&=~D}}function L4(f){if((Ls&6)!==0)throw Error(n(327));Zd();var x=Ei(f,0);if((x&1)===0)return Kr(f,sn()),null;var S=xx(f,x);if(f.tag!==0&&S===2){var D=lc(f);D!==0&&(x=D,S=ab(f,D))}if(S===1)throw S=om,gc(f,0),yo(f,x),Kr(f,sn()),S;if(S===6)throw Error(n(345));return f.finishedWork=f.current.alternate,f.finishedLanes=x,vc(f,Hr,bl),Kr(f,sn()),null}function lb(f,x){var S=Ls;Ls|=1;try{return f(x)}finally{Ls=S,Ls===0&&(Xd=sn()+500,Up&&ho())}}function xc(f){go!==null&&go.tag===0&&(Ls&6)===0&&Zd();var x=Ls;Ls|=1;var S=Da.transition,D=ie;try{if(Da.transition=null,ie=1,f)return f()}finally{ie=D,Da.transition=S,Ls=x,(Ls&6)===0&&ho()}}function ob(){pa=Jd.current,dn(Jd)}function gc(f,x){f.finishedWork=null,f.finishedLanes=0;var S=f.timeoutHandle;if(S!==-1&&(f.timeoutHandle=-1,z$(S)),On!==null)for(S=On.return;S!==null;){var D=S;switch(gy(D),D.tag){case 1:D=D.type.childContextTypes,D!=null&&zp();break;case 3:Gd(),dn(Ur),dn(or),Ty();break;case 5:Ey(D);break;case 4:Gd();break;case 13:dn(bn);break;case 19:dn(bn);break;case 10:Ny(D.type._context);break;case 22:case 23:ob()}S=S.return}if(Gn=f,On=f=bo(f.current,null),rr=pa=x,qn=0,om=null,tb=dx=pc=0,Hr=cm=null,hc!==null){for(x=0;x<hc.length;x++)if(S=hc[x],D=S.interleaved,D!==null){S.interleaved=null;var H=D.next,G=S.pending;if(G!==null){var ne=G.next;G.next=H,D.next=ne}S.pending=D}hc=null}return f}function I4(f,x){do{var S=On;try{if(wy(),Zp.current=nx,ex){for(var D=jn.memoizedState;D!==null;){var H=D.queue;H!==null&&(H.pending=null),D=D.next}ex=!1}if(fc=0,Kn=Bn=jn=null,sm=!1,nm=0,eb.current=null,S===null||S.return===null){qn=1,om=x,On=null;break}e:{var G=f,ne=S.return,fe=S,be=x;if(x=rr,fe.flags|=32768,be!==null&&typeof be=="object"&&typeof be.then=="function"){var Re=be,rt=fe,ot=rt.tag;if((rt.mode&1)===0&&(ot===0||ot===11||ot===15)){var st=rt.alternate;st?(rt.updateQueue=st.updateQueue,rt.memoizedState=st.memoizedState,rt.lanes=st.lanes):(rt.updateQueue=null,rt.memoizedState=null)}var At=c4(ne);if(At!==null){At.flags&=-257,d4(At,ne,fe,G,x),At.mode&1&&o4(G,Re,x),x=At,be=Re;var Lt=x.updateQueue;if(Lt===null){var qt=new Set;qt.add(be),x.updateQueue=qt}else Lt.add(be);break e}else{if((x&1)===0){o4(G,Re,x),cb();break e}be=Error(n(426))}}else if(pn&&fe.mode&1){var Tn=c4(ne);if(Tn!==null){(Tn.flags&65536)===0&&(Tn.flags|=256),d4(Tn,ne,fe,G,x),by(Yd(be,fe));break e}}G=be=Yd(be,fe),qn!==4&&(qn=2),cm===null?cm=[G]:cm.push(G),G=ne;do{switch(G.tag){case 3:G.flags|=65536,x&=-x,G.lanes|=x;var Ae=i4(G,be,x);Dk(G,Ae);break e;case 1:fe=be;var ke=G.type,Me=G.stateNode;if((G.flags&128)===0&&(typeof ke.getDerivedStateFromError=="function"||Me!==null&&typeof Me.componentDidCatch=="function"&&(xo===null||!xo.has(Me)))){G.flags|=65536,x&=-x,G.lanes|=x;var pt=l4(G,fe,x);Dk(G,pt);break e}}G=G.return}while(G!==null)}z4(S)}catch(Vt){x=Vt,On===S&&S!==null&&(On=S=S.return);continue}break}while(!0)}function B4(){var f=cx.current;return cx.current=nx,f===null?nx:f}function cb(){(qn===0||qn===3||qn===2)&&(qn=4),Gn===null||(pc&268435455)===0&&(dx&268435455)===0||yo(Gn,rr)}function xx(f,x){var S=Ls;Ls|=2;var D=B4();(Gn!==f||rr!==x)&&(bl=null,gc(f,x));do try{hU();break}catch(H){I4(f,H)}while(!0);if(wy(),Ls=S,cx.current=D,On!==null)throw Error(n(261));return Gn=null,rr=0,qn}function hU(){for(;On!==null;)q4(On)}function mU(){for(;On!==null&&!Dh();)q4(On)}function q4(f){var x=V4(f.alternate,f,pa);f.memoizedProps=f.pendingProps,x===null?z4(f):On=x,eb.current=null}function z4(f){var x=f;do{var S=x.alternate;if(f=x.return,(x.flags&32768)===0){if(S=aU(S,x,pa),S!==null){On=S;return}}else{if(S=iU(S,x),S!==null){S.flags&=32767,On=S;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{qn=6,On=null;return}}if(x=x.sibling,x!==null){On=x;return}On=x=f}while(x!==null);qn===0&&(qn=5)}function vc(f,x,S){var D=ie,H=Da.transition;try{Da.transition=null,ie=1,fU(f,x,S,D)}finally{Da.transition=H,ie=D}return null}function fU(f,x,S,D){do Zd();while(go!==null);if((Ls&6)!==0)throw Error(n(327));S=f.finishedWork;var H=f.finishedLanes;if(S===null)return null;if(f.finishedWork=null,f.finishedLanes=0,S===f.current)throw Error(n(177));f.callbackNode=null,f.callbackPriority=0;var G=S.lanes|S.childLanes;if(Sp(f,G),f===Gn&&(On=Gn=null,rr=0),(S.subtreeFlags&2064)===0&&(S.flags&2064)===0||hx||(hx=!0,W4(zr,function(){return Zd(),null})),G=(S.flags&15990)!==0,(S.subtreeFlags&15990)!==0||G){G=Da.transition,Da.transition=null;var ne=ie;ie=1;var fe=Ls;Ls|=4,eb.current=null,oU(f,S),A4(S,f),O$(cy),kp=!!oy,cy=oy=null,f.current=S,cU(S),ic(),Ls=fe,ie=ne,Da.transition=G}else f.current=S;if(hx&&(hx=!1,go=f,mx=H),G=f.pendingLanes,G===0&&(xo=null),Pd(S.stateNode),Kr(f,sn()),x!==null)for(D=f.onRecoverableError,S=0;S<x.length;S++)H=x[S],D(H.value,{componentStack:H.stack,digest:H.digest});if(ux)throw ux=!1,f=nb,nb=null,f;return(mx&1)!==0&&f.tag!==0&&Zd(),G=f.pendingLanes,(G&1)!==0?f===rb?dm++:(dm=0,rb=f):dm=0,ho(),null}function Zd(){if(go!==null){var f=Oe(mx),x=Da.transition,S=ie;try{if(Da.transition=null,ie=16>f?16:f,go===null)var D=!1;else{if(f=go,go=null,mx=0,(Ls&6)!==0)throw Error(n(331));var H=Ls;for(Ls|=4,Ot=f.current;Ot!==null;){var G=Ot,ne=G.child;if((Ot.flags&16)!==0){var fe=G.deletions;if(fe!==null){for(var be=0;be<fe.length;be++){var Re=fe[be];for(Ot=Re;Ot!==null;){var rt=Ot;switch(rt.tag){case 0:case 11:case 15:lm(8,rt,G)}var ot=rt.child;if(ot!==null)ot.return=rt,Ot=ot;else for(;Ot!==null;){rt=Ot;var st=rt.sibling,At=rt.return;if(C4(rt),rt===Re){Ot=null;break}if(st!==null){st.return=At,Ot=st;break}Ot=At}}}var Lt=G.alternate;if(Lt!==null){var qt=Lt.child;if(qt!==null){Lt.child=null;do{var Tn=qt.sibling;qt.sibling=null,qt=Tn}while(qt!==null)}}Ot=G}}if((G.subtreeFlags&2064)!==0&&ne!==null)ne.return=G,Ot=ne;else e:for(;Ot!==null;){if(G=Ot,(G.flags&2048)!==0)switch(G.tag){case 0:case 11:case 15:lm(9,G,G.return)}var Ae=G.sibling;if(Ae!==null){Ae.return=G.return,Ot=Ae;break e}Ot=G.return}}var ke=f.current;for(Ot=ke;Ot!==null;){ne=Ot;var Me=ne.child;if((ne.subtreeFlags&2064)!==0&&Me!==null)Me.return=ne,Ot=Me;else e:for(ne=ke;Ot!==null;){if(fe=Ot,(fe.flags&2048)!==0)try{switch(fe.tag){case 0:case 11:case 15:ox(9,fe)}}catch(Vt){Sn(fe,fe.return,Vt)}if(fe===ne){Ot=null;break e}var pt=fe.sibling;if(pt!==null){pt.return=fe.return,Ot=pt;break e}Ot=fe.return}}if(Ls=H,ho(),wr&&typeof wr.onPostCommitFiberRoot=="function")try{wr.onPostCommitFiberRoot(hl,f)}catch{}D=!0}return D}finally{ie=S,Da.transition=x}}return!1}function $4(f,x,S){x=Yd(S,x),x=i4(f,x,1),f=fo(f,x,1),x=Sr(),f!==null&&(so(f,1,x),Kr(f,x))}function Sn(f,x,S){if(f.tag===3)$4(f,f,S);else for(;x!==null;){if(x.tag===3){$4(x,f,S);break}else if(x.tag===1){var D=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof D.componentDidCatch=="function"&&(xo===null||!xo.has(D))){f=Yd(S,f),f=l4(x,f,1),x=fo(x,f,1),f=Sr(),x!==null&&(so(x,1,f),Kr(x,f));break}}x=x.return}}function pU(f,x,S){var D=f.pingCache;D!==null&&D.delete(x),x=Sr(),f.pingedLanes|=f.suspendedLanes&S,Gn===f&&(rr&S)===S&&(qn===4||qn===3&&(rr&130023424)===rr&&500>sn()-sb?gc(f,0):tb|=S),Kr(f,x)}function U4(f,x){x===0&&((f.mode&1)===0?x=1:(x=sr,sr<<=1,(sr&130023424)===0&&(sr=4194304)));var S=Sr();f=gl(f,x),f!==null&&(so(f,x,S),Kr(f,S))}function xU(f){var x=f.memoizedState,S=0;x!==null&&(S=x.retryLane),U4(f,S)}function gU(f,x){var S=0;switch(f.tag){case 13:var D=f.stateNode,H=f.memoizedState;H!==null&&(S=H.retryLane);break;case 19:D=f.stateNode;break;default:throw Error(n(314))}D!==null&&D.delete(x),U4(f,S)}var V4;V4=function(f,x,S){if(f!==null)if(f.memoizedProps!==x.pendingProps||Ur.current)Wr=!0;else{if((f.lanes&S)===0&&(x.flags&128)===0)return Wr=!1,rU(f,x,S);Wr=(f.flags&131072)!==0}else Wr=!1,pn&&(x.flags&1048576)!==0&&Nk(x,Wp,x.index);switch(x.lanes=0,x.tag){case 2:var D=x.type;ix(f,x),f=x.pendingProps;var H=zd(x,or.current);Kd(x,S),H=Dy(null,x,D,f,H,S);var G=Oy();return x.flags|=1,typeof H=="object"&&H!==null&&typeof H.render=="function"&&H.$$typeof===void 0?(x.tag=1,x.memoizedState=null,x.updateQueue=null,Vr(D)?(G=!0,$p(x)):G=!1,x.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,Cy(x),H.updater=rx,x.stateNode=H,H._reactInternals=x,qy(x,D,f,S),x=Vy(null,x,D,!0,G,S)):(x.tag=0,pn&&G&&xy(x),_r(null,x,H,S),x=x.child),x;case 16:D=x.elementType;e:{switch(ix(f,x),f=x.pendingProps,H=D._init,D=H(D._payload),x.type=D,H=x.tag=yU(D),f=ni(D,f),H){case 0:x=Uy(null,x,D,f,S);break e;case 1:x=x4(null,x,D,f,S);break e;case 11:x=u4(null,x,D,f,S);break e;case 14:x=h4(null,x,D,ni(D.type,f),S);break e}throw Error(n(306,D,""))}return x;case 0:return D=x.type,H=x.pendingProps,H=x.elementType===D?H:ni(D,H),Uy(f,x,D,H,S);case 1:return D=x.type,H=x.pendingProps,H=x.elementType===D?H:ni(D,H),x4(f,x,D,H,S);case 3:e:{if(g4(x),f===null)throw Error(n(387));D=x.pendingProps,G=x.memoizedState,H=G.element,Mk(f,x),Jp(x,D,null,S);var ne=x.memoizedState;if(D=ne.element,G.isDehydrated)if(G={element:D,isDehydrated:!1,cache:ne.cache,pendingSuspenseBoundaries:ne.pendingSuspenseBoundaries,transitions:ne.transitions},x.updateQueue.baseState=G,x.memoizedState=G,x.flags&256){H=Yd(Error(n(423)),x),x=v4(f,x,D,S,H);break e}else if(D!==H){H=Yd(Error(n(424)),x),x=v4(f,x,D,S,H);break e}else for(fa=oo(x.stateNode.containerInfo.firstChild),ma=x,pn=!0,si=null,S=Tk(x,null,D,S),x.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling;else{if(Vd(),D===H){x=yl(f,x,S);break e}_r(f,x,D,S)}x=x.child}return x;case 5:return Rk(x),f===null&&yy(x),D=x.type,H=x.pendingProps,G=f!==null?f.memoizedProps:null,ne=H.children,dy(D,H)?ne=null:G!==null&&dy(D,G)&&(x.flags|=32),p4(f,x),_r(f,x,ne,S),x.child;case 6:return f===null&&yy(x),null;case 13:return y4(f,x,S);case 4:return ky(x,x.stateNode.containerInfo),D=x.pendingProps,f===null?x.child=Wd(x,null,D,S):_r(f,x,D,S),x.child;case 11:return D=x.type,H=x.pendingProps,H=x.elementType===D?H:ni(D,H),u4(f,x,D,H,S);case 7:return _r(f,x,x.pendingProps,S),x.child;case 8:return _r(f,x,x.pendingProps.children,S),x.child;case 12:return _r(f,x,x.pendingProps.children,S),x.child;case 10:e:{if(D=x.type._context,H=x.pendingProps,G=x.memoizedProps,ne=H.value,nn(Gp,D._currentValue),D._currentValue=ne,G!==null)if(ti(G.value,ne)){if(G.children===H.children&&!Ur.current){x=yl(f,x,S);break e}}else for(G=x.child,G!==null&&(G.return=x);G!==null;){var fe=G.dependencies;if(fe!==null){ne=G.child;for(var be=fe.firstContext;be!==null;){if(be.context===D){if(G.tag===1){be=vl(-1,S&-S),be.tag=2;var Re=G.updateQueue;if(Re!==null){Re=Re.shared;var rt=Re.pending;rt===null?be.next=be:(be.next=rt.next,rt.next=be),Re.pending=be}}G.lanes|=S,be=G.alternate,be!==null&&(be.lanes|=S),_y(G.return,S,x),fe.lanes|=S;break}be=be.next}}else if(G.tag===10)ne=G.type===x.type?null:G.child;else if(G.tag===18){if(ne=G.return,ne===null)throw Error(n(341));ne.lanes|=S,fe=ne.alternate,fe!==null&&(fe.lanes|=S),_y(ne,S,x),ne=G.sibling}else ne=G.child;if(ne!==null)ne.return=G;else for(ne=G;ne!==null;){if(ne===x){ne=null;break}if(G=ne.sibling,G!==null){G.return=ne.return,ne=G;break}ne=ne.return}G=ne}_r(f,x,H.children,S),x=x.child}return x;case 9:return H=x.type,D=x.pendingProps.children,Kd(x,S),H=Aa(H),D=D(H),x.flags|=1,_r(f,x,D,S),x.child;case 14:return D=x.type,H=ni(D,x.pendingProps),H=ni(D.type,H),h4(f,x,D,H,S);case 15:return m4(f,x,x.type,x.pendingProps,S);case 17:return D=x.type,H=x.pendingProps,H=x.elementType===D?H:ni(D,H),ix(f,x),x.tag=1,Vr(D)?(f=!0,$p(x)):f=!1,Kd(x,S),r4(x,D,H),qy(x,D,H,S),Vy(null,x,D,!0,f,S);case 19:return j4(f,x,S);case 22:return f4(f,x,S)}throw Error(n(156,x.tag))};function W4(f,x){return Sd(f,x)}function vU(f,x,S,D){this.tag=f,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=D,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oa(f,x,S,D){return new vU(f,x,S,D)}function db(f){return f=f.prototype,!(!f||!f.isReactComponent)}function yU(f){if(typeof f=="function")return db(f)?1:0;if(f!=null){if(f=f.$$typeof,f===E)return 11;if(f===z)return 14}return 2}function bo(f,x){var S=f.alternate;return S===null?(S=Oa(f.tag,x,f.key,f.mode),S.elementType=f.elementType,S.type=f.type,S.stateNode=f.stateNode,S.alternate=f,f.alternate=S):(S.pendingProps=x,S.type=f.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=f.flags&14680064,S.childLanes=f.childLanes,S.lanes=f.lanes,S.child=f.child,S.memoizedProps=f.memoizedProps,S.memoizedState=f.memoizedState,S.updateQueue=f.updateQueue,x=f.dependencies,S.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},S.sibling=f.sibling,S.index=f.index,S.ref=f.ref,S}function gx(f,x,S,D,H,G){var ne=2;if(D=f,typeof f=="function")db(f)&&(ne=1);else if(typeof f=="string")ne=5;else e:switch(f){case P:return yc(S.children,H,G,x);case C:ne=8,H|=8;break;case O:return f=Oa(12,S,x,H|2),f.elementType=O,f.lanes=G,f;case R:return f=Oa(13,S,x,H),f.elementType=R,f.lanes=G,f;case F:return f=Oa(19,S,x,H),f.elementType=F,f.lanes=G,f;case U:return vx(S,H,G,x);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case M:ne=10;break e;case k:ne=9;break e;case E:ne=11;break e;case z:ne=14;break e;case V:ne=16,D=null;break e}throw Error(n(130,f==null?f:typeof f,""))}return x=Oa(ne,S,x,H),x.elementType=f,x.type=D,x.lanes=G,x}function yc(f,x,S,D){return f=Oa(7,f,D,x),f.lanes=S,f}function vx(f,x,S,D){return f=Oa(22,f,D,x),f.elementType=U,f.lanes=S,f.stateNode={isHidden:!1},f}function ub(f,x,S){return f=Oa(6,f,null,x),f.lanes=S,f}function hb(f,x,S){return x=Oa(4,f.children!==null?f.children:[],f.key,x),x.lanes=S,x.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},x}function bU(f,x,S,D,H){this.tag=x,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Td(0),this.expirationTimes=Td(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Td(0),this.identifierPrefix=D,this.onRecoverableError=H,this.mutableSourceEagerHydrationData=null}function mb(f,x,S,D,H,G,ne,fe,be){return f=new bU(f,x,S,fe,be),x===1?(x=1,G===!0&&(x|=8)):x=0,G=Oa(3,null,null,x),f.current=G,G.stateNode=f,G.memoizedState={element:D,isDehydrated:S,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cy(G),f}function jU(f,x,S){var D=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:D==null?null:""+D,children:f,containerInfo:x,implementation:S}}function H4(f){if(!f)return uo;f=f._reactInternals;e:{if(Tt(f)!==f||f.tag!==1)throw Error(n(170));var x=f;do{switch(x.tag){case 3:x=x.stateNode.context;break e;case 1:if(Vr(x.type)){x=x.stateNode.__reactInternalMemoizedMergedChildContext;break e}}x=x.return}while(x!==null);throw Error(n(171))}if(f.tag===1){var S=f.type;if(Vr(S))return bk(f,S,x)}return x}function K4(f,x,S,D,H,G,ne,fe,be){return f=mb(S,D,!0,f,H,G,ne,fe,be),f.context=H4(null),S=f.current,D=Sr(),H=vo(S),G=vl(D,H),G.callback=x??null,fo(S,G,H),f.current.lanes=H,so(f,H,D),Kr(f,D),f}function yx(f,x,S,D){var H=x.current,G=Sr(),ne=vo(H);return S=H4(S),x.context===null?x.context=S:x.pendingContext=S,x=vl(G,ne),x.payload={element:f},D=D===void 0?null:D,D!==null&&(x.callback=D),f=fo(H,x,ne),f!==null&&(ii(f,H,ne,G),Qp(f,H,ne)),ne}function bx(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return f.child.stateNode;default:return f.child.stateNode}}function G4(f,x){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var S=f.retryLane;f.retryLane=S!==0&&S<x?S:x}}function fb(f,x){G4(f,x),(f=f.alternate)&&G4(f,x)}function wU(){return null}var Y4=typeof reportError=="function"?reportError:function(f){console.error(f)};function pb(f){this._internalRoot=f}jx.prototype.render=pb.prototype.render=function(f){var x=this._internalRoot;if(x===null)throw Error(n(409));yx(f,x,null,null)},jx.prototype.unmount=pb.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var x=f.containerInfo;xc(function(){yx(null,f,null,null)}),x[ml]=null}};function jx(f){this._internalRoot=f}jx.prototype.unstable_scheduleHydration=function(f){if(f){var x=Nr();f={blockedOn:null,target:f,priority:x};for(var S=0;S<ao.length&&x!==0&&x<ao[S].priority;S++);ao.splice(S,0,f),S===0&&RC(f)}};function xb(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function wx(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11&&(f.nodeType!==8||f.nodeValue!==" react-mount-point-unstable "))}function Q4(){}function NU(f,x,S,D,H){if(H){if(typeof D=="function"){var G=D;D=function(){var Re=bx(ne);G.call(Re)}}var ne=K4(x,D,f,0,null,!1,!1,"",Q4);return f._reactRootContainer=ne,f[ml]=ne.current,Gh(f.nodeType===8?f.parentNode:f),xc(),ne}for(;H=f.lastChild;)f.removeChild(H);if(typeof D=="function"){var fe=D;D=function(){var Re=bx(be);fe.call(Re)}}var be=mb(f,0,!1,null,null,!1,!1,"",Q4);return f._reactRootContainer=be,f[ml]=be.current,Gh(f.nodeType===8?f.parentNode:f),xc(function(){yx(x,be,S,D)}),be}function Nx(f,x,S,D,H){var G=S._reactRootContainer;if(G){var ne=G;if(typeof H=="function"){var fe=H;H=function(){var be=bx(ne);fe.call(be)}}yx(x,ne,f,H)}else ne=NU(S,x,f,H,D);return bx(ne)}He=function(f){switch(f.tag){case 3:var x=f.stateNode;if(x.current.memoizedState.isDehydrated){var S=$r(x.pendingLanes);S!==0&&(Ad(x,S|1),Kr(x,sn()),(Ls&6)===0&&(Xd=sn()+500,ho()))}break;case 13:xc(function(){var D=gl(f,1);if(D!==null){var H=Sr();ii(D,f,1,H)}}),fb(f,1)}},wt=function(f){if(f.tag===13){var x=gl(f,134217728);if(x!==null){var S=Sr();ii(x,f,134217728,S)}fb(f,134217728)}},ks=function(f){if(f.tag===13){var x=vo(f),S=gl(f,x);if(S!==null){var D=Sr();ii(S,f,x,D)}fb(f,x)}},Nr=function(){return ie},ei=function(f,x){var S=ie;try{return ie=f,x()}finally{ie=S}},Hn=function(f,x,S){switch(x){case"input":if(ze(f,S),x=S.name,S.type==="radio"&&x!=null){for(S=f;S.parentNode;)S=S.parentNode;for(S=S.querySelectorAll("input[name="+JSON.stringify(""+x)+'][type="radio"]'),x=0;x<S.length;x++){var D=S[x];if(D!==f&&D.form===f.form){var H=qp(D);if(!H)throw Error(n(90));oe(D),ze(D,H)}}}break;case"textarea":Se(f,S);break;case"select":x=S.value,x!=null&&Ye(f,!!S.multiple,x,!1)}},Te=lb,Ze=xc;var _U={usingClientEntryPoint:!1,Events:[Jh,Bd,qp,Ne,ut,lb]},um={findFiberByHostInstance:oc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},SU={bundleType:um.bundleType,version:um.version,rendererPackageName:um.rendererPackageName,rendererConfig:um.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(f){return f=Pn(f),f===null?null:f.stateNode},findFiberByHostInstance:um.findFiberByHostInstance||wU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _x=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_x.isDisabled&&_x.supportsFiber)try{hl=_x.inject(SU),wr=_x}catch{}}return Gr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_U,Gr.createPortal=function(f,x){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xb(x))throw Error(n(200));return jU(f,x,null,S)},Gr.createRoot=function(f,x){if(!xb(f))throw Error(n(299));var S=!1,D="",H=Y4;return x!=null&&(x.unstable_strictMode===!0&&(S=!0),x.identifierPrefix!==void 0&&(D=x.identifierPrefix),x.onRecoverableError!==void 0&&(H=x.onRecoverableError)),x=mb(f,1,!1,null,null,S,!1,D,H),f[ml]=x.current,Gh(f.nodeType===8?f.parentNode:f),new pb(x)},Gr.findDOMNode=function(f){if(f==null)return null;if(f.nodeType===1)return f;var x=f._reactInternals;if(x===void 0)throw typeof f.render=="function"?Error(n(188)):(f=Object.keys(f).join(","),Error(n(268,f)));return f=Pn(x),f=f===null?null:f.stateNode,f},Gr.flushSync=function(f){return xc(f)},Gr.hydrate=function(f,x,S){if(!wx(x))throw Error(n(200));return Nx(null,f,x,!0,S)},Gr.hydrateRoot=function(f,x,S){if(!xb(f))throw Error(n(405));var D=S!=null&&S.hydratedSources||null,H=!1,G="",ne=Y4;if(S!=null&&(S.unstable_strictMode===!0&&(H=!0),S.identifierPrefix!==void 0&&(G=S.identifierPrefix),S.onRecoverableError!==void 0&&(ne=S.onRecoverableError)),x=K4(x,null,f,1,S??null,H,!1,G,ne),f[ml]=x.current,Gh(f),D)for(f=0;f<D.length;f++)S=D[f],H=S._getVersion,H=H(S._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[S,H]:x.mutableSourceEagerHydrationData.push(S,H);return new jx(x)},Gr.render=function(f,x,S){if(!wx(x))throw Error(n(200));return Nx(null,f,x,!1,S)},Gr.unmountComponentAtNode=function(f){if(!wx(f))throw Error(n(40));return f._reactRootContainer?(xc(function(){Nx(null,null,f,!1,function(){f._reactRootContainer=null,f[ml]=null})}),!0):!1},Gr.unstable_batchedUpdates=lb,Gr.unstable_renderSubtreeIntoContainer=function(f,x,S,D){if(!wx(S))throw Error(n(200));if(f==null||f._reactInternals===void 0)throw Error(n(38));return Nx(f,x,S,!1,D)},Gr.version="18.3.1-next-f1338f8080-20240426",Gr}var aE;function T1(){if(aE)return bb.exports;aE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(s){console.error(s)}}return t(),bb.exports=OU(),bb.exports}var iE;function RU(){if(iE)return kx;iE=1;var t=T1();return kx.createRoot=t.createRoot,kx.hydrateRoot=t.hydrateRoot,kx}var FU=RU();const LU=ud(FU);/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var lE="popstate";function IU(t={}){function s(r,a){let{pathname:i,search:l,hash:o}=r.location;return RN("",{pathname:i,search:l,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:Xm(a)}return qU(s,n,null,t)}function Nn(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function xi(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function BU(){return Math.random().toString(36).substring(2,10)}function oE(t,s){return{usr:t.state,key:t.key,idx:s}}function RN(t,s,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof s=="string"?th(s):s,state:n,key:s&&s.key||r||BU()}}function Xm({pathname:t="/",search:s="",hash:n=""}){return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function th(t){let s={};if(t){let n=t.indexOf("#");n>=0&&(s.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(s.search=t.substring(r),t=t.substring(0,r)),t&&(s.pathname=t)}return s}function qU(t,s,n,r={}){let{window:a=document.defaultView,v5Compat:i=!1}=r,l=a.history,o="POP",c=null,u=d();u==null&&(u=0,l.replaceState({...l.state,idx:u},""));function d(){return(l.state||{idx:null}).idx}function m(){o="POP";let y=d(),j=y==null?null:y-u;u=y,c&&c({action:o,location:v.location,delta:j})}function h(y,j){o="PUSH";let w=RN(v.location,y,j);u=d()+1;let N=oE(w,u),_=v.createHref(w);try{l.pushState(N,"",_)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;a.location.assign(_)}i&&c&&c({action:o,location:v.location,delta:1})}function p(y,j){o="REPLACE";let w=RN(v.location,y,j);u=d();let N=oE(w,u),_=v.createHref(w);l.replaceState(N,"",_),i&&c&&c({action:o,location:v.location,delta:0})}function g(y){return zU(y)}let v={get action(){return o},get location(){return t(a,l)},listen(y){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(lE,m),c=y,()=>{a.removeEventListener(lE,m),c=null}},createHref(y){return s(a,y)},createURL:g,encodeLocation(y){let j=g(y);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:h,replace:p,go(y){return l.go(y)}};return v}function zU(t,s=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Nn(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Xm(t);return r=r.replace(/ $/,"%20"),!s&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function H6(t,s,n="/"){return $U(t,s,n,!1)}function $U(t,s,n,r){let a=typeof s=="string"?th(s):s,i=ql(a.pathname||"/",n);if(i==null)return null;let l=K6(t);UU(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let u=eV(i);o=XU(l[c],u,r)}return o}function K6(t,s=[],n=[],r="",a=!1){let i=(l,o,c=a,u)=>{let d={relativePath:u===void 0?l.path||"":u,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(r)&&c)return;Nn(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length)}let m=Fl([r,d.relativePath]),h=n.concat(d);l.children&&l.children.length>0&&(Nn(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),K6(l.children,s,h,m,c)),!(l.path==null&&!l.index)&&s.push({path:m,score:QU(m,l.index),routesMeta:h})};return t.forEach((l,o)=>{var c;if(l.path===""||!((c=l.path)!=null&&c.includes("?")))i(l,o);else for(let u of G6(l.path))i(l,o,!0,u)}),s}function G6(t){let s=t.split("/");if(s.length===0)return[];let[n,...r]=s,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let l=G6(r.join("/")),o=[];return o.push(...l.map(c=>c===""?i:[i,c].join("/"))),a&&o.push(...l),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function UU(t){t.sort((s,n)=>s.score!==n.score?n.score-s.score:JU(s.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var VU=/^:[\w-]+$/,WU=3,HU=2,KU=1,GU=10,YU=-2,cE=t=>t==="*";function QU(t,s){let n=t.split("/"),r=n.length;return n.some(cE)&&(r+=YU),s&&(r+=HU),n.filter(a=>!cE(a)).reduce((a,i)=>a+(VU.test(i)?WU:i===""?KU:GU),r)}function JU(t,s){return t.length===s.length&&t.slice(0,-1).every((r,a)=>r===s[a])?t[t.length-1]-s[s.length-1]:0}function XU(t,s,n=!1){let{routesMeta:r}=t,a={},i="/",l=[];for(let o=0;o<r.length;++o){let c=r[o],u=o===r.length-1,d=i==="/"?s:s.slice(i.length)||"/",m=Mg({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!m&&u&&n&&!r[r.length-1].route.index&&(m=Mg({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!m)return null;Object.assign(a,m.params),l.push({params:a,pathname:Fl([i,m.pathname]),pathnameBase:aV(Fl([i,m.pathnameBase])),route:h}),m.pathnameBase!=="/"&&(i=Fl([i,m.pathnameBase]))}return l}function Mg(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=ZU(t.path,t.caseSensitive,t.end),a=s.match(n);if(!a)return null;let i=a[0],l=i.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:r.reduce((u,{paramName:d,isOptional:m},h)=>{if(d==="*"){let g=o[h]||"";l=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=o[h];return m&&!p?u[d]=void 0:u[d]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:l,pattern:t}}function ZU(t,s=!1,n=!0){xi(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(r.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,s?void 0:"i"),r]}function eV(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return xi(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${s}).`),t}}function ql(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let n=s.endsWith("/")?s.length-1:s.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var tV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sV=t=>tV.test(t);function nV(t,s="/"){let{pathname:n,search:r="",hash:a=""}=typeof t=="string"?th(t):t,i;if(n)if(sV(n))i=n;else{if(n.includes("//")){let l=n;n=n.replace(/\/\/+/g,"/"),xi(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${n}`)}n.startsWith("/")?i=dE(n.substring(1),"/"):i=dE(n,s)}else i=s;return{pathname:i,search:iV(r),hash:lV(a)}}function dE(t,s){let n=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Nb(t,s,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${s}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function rV(t){return t.filter((s,n)=>n===0||s.route.path&&s.route.path.length>0)}function Y6(t){let s=rV(t);return s.map((n,r)=>r===s.length-1?n.pathname:n.pathnameBase)}function Q6(t,s,n,r=!1){let a;typeof t=="string"?a=th(t):(a={...t},Nn(!a.pathname||!a.pathname.includes("?"),Nb("?","pathname","search",a)),Nn(!a.pathname||!a.pathname.includes("#"),Nb("#","pathname","hash",a)),Nn(!a.search||!a.search.includes("#"),Nb("#","search","hash",a)));let i=t===""||a.pathname==="",l=i?"/":a.pathname,o;if(l==null)o=n;else{let m=s.length-1;if(!r&&l.startsWith("..")){let h=l.split("/");for(;h[0]==="..";)h.shift(),m-=1;a.pathname=h.join("/")}o=m>=0?s[m]:"/"}let c=nV(a,o),u=l&&l!=="/"&&l.endsWith("/"),d=(i||l===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var Fl=t=>t.join("/").replace(/\/\/+/g,"/"),aV=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),iV=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,lV=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function oV(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var J6=["POST","PUT","PATCH","DELETE"];new Set(J6);var cV=["GET",...J6];new Set(cV);var sh=b.createContext(null);sh.displayName="DataRouter";var x0=b.createContext(null);x0.displayName="DataRouterState";b.createContext(!1);var X6=b.createContext({isTransitioning:!1});X6.displayName="ViewTransition";var dV=b.createContext(new Map);dV.displayName="Fetchers";var uV=b.createContext(null);uV.displayName="Await";var al=b.createContext(null);al.displayName="Navigation";var Rf=b.createContext(null);Rf.displayName="Location";var Gl=b.createContext({outlet:null,matches:[],isDataRoute:!1});Gl.displayName="Route";var A1=b.createContext(null);A1.displayName="RouteError";function hV(t,{relative:s}={}){Nn(Ff(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=b.useContext(al),{hash:a,pathname:i,search:l}=Lf(t,{relative:s}),o=i;return n!=="/"&&(o=i==="/"?n:Fl([n,i])),r.createHref({pathname:o,search:l,hash:a})}function Ff(){return b.useContext(Rf)!=null}function il(){return Nn(Ff(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(Rf).location}var Z6="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function e5(t){b.useContext(al).static||b.useLayoutEffect(t)}function M1(){let{isDataRoute:t}=b.useContext(Gl);return t?SV():mV()}function mV(){Nn(Ff(),"useNavigate() may be used only in the context of a <Router> component.");let t=b.useContext(sh),{basename:s,navigator:n}=b.useContext(al),{matches:r}=b.useContext(Gl),{pathname:a}=il(),i=JSON.stringify(Y6(r)),l=b.useRef(!1);return e5(()=>{l.current=!0}),b.useCallback((c,u={})=>{if(xi(l.current,Z6),!l.current)return;if(typeof c=="number"){n.go(c);return}let d=Q6(c,JSON.parse(i),a,u.relative==="path");t==null&&s!=="/"&&(d.pathname=d.pathname==="/"?s:Fl([s,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[s,n,i,a,t])}b.createContext(null);function Lf(t,{relative:s}={}){let{matches:n}=b.useContext(Gl),{pathname:r}=il(),a=JSON.stringify(Y6(n));return b.useMemo(()=>Q6(t,JSON.parse(a),r,s==="path"),[t,a,r,s])}function fV(t,s){return t5(t,s)}function t5(t,s,n,r,a){var w;Nn(Ff(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=b.useContext(al),{matches:l}=b.useContext(Gl),o=l[l.length-1],c=o?o.params:{},u=o?o.pathname:"/",d=o?o.pathnameBase:"/",m=o&&o.route;{let N=m&&m.path||"";s5(u,!m||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let h=il(),p;if(s){let N=typeof s=="string"?th(s):s;Nn(d==="/"||((w=N.pathname)==null?void 0:w.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${N.pathname}" was given in the \`location\` prop.`),p=N}else p=h;let g=p.pathname||"/",v=g;if(d!=="/"){let N=d.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(N.length).join("/")}let y=H6(t,{pathname:v});xi(m||y!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),xi(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=yV(y&&y.map(N=>Object.assign({},N,{params:Object.assign({},c,N.params),pathname:Fl([d,i.encodeLocation?i.encodeLocation(N.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?d:Fl([d,i.encodeLocation?i.encodeLocation(N.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathnameBase])})),l,n,r,a);return s&&j?b.createElement(Rf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},j):j}function pV(){let t=_V(),s=oV(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=b.createElement(b.Fragment,null,b.createElement("p",null," Hey developer "),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:i},"ErrorBoundary")," or"," ",b.createElement("code",{style:i},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},s),n?b.createElement("pre",{style:a},n):null,l)}var xV=b.createElement(pV,null),gV=class extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){this.props.onError?this.props.onError(t,s):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?b.createElement(Gl.Provider,{value:this.props.routeContext},b.createElement(A1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function vV({routeContext:t,match:s,children:n}){let r=b.useContext(sh);return r&&r.static&&r.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=s.route.id),b.createElement(Gl.Provider,{value:t},n)}function yV(t,s=[],n=null,r=null,a=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(s.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,l=n==null?void 0:n.errors;if(l!=null){let d=i.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);Nn(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let o=!1,c=-1;if(n)for(let d=0;d<i.length;d++){let m=i[d];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(c=d),m.route.id){let{loaderData:h,errors:p}=n,g=m.route.loader&&!h.hasOwnProperty(m.route.id)&&(!p||p[m.route.id]===void 0);if(m.route.lazy||g){o=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}let u=n&&r?(d,m)=>{var h,p;r(d,{location:n.location,params:((p=(h=n.matches)==null?void 0:h[0])==null?void 0:p.params)??{},errorInfo:m})}:void 0;return i.reduceRight((d,m,h)=>{let p,g=!1,v=null,y=null;n&&(p=l&&m.route.id?l[m.route.id]:void 0,v=m.route.errorElement||xV,o&&(c<0&&h===0?(s5("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,y=null):c===h&&(g=!0,y=m.route.hydrateFallbackElement||null)));let j=s.concat(i.slice(0,h+1)),w=()=>{let N;return p?N=v:g?N=y:m.route.Component?N=b.createElement(m.route.Component,null):m.route.element?N=m.route.element:N=d,b.createElement(vV,{match:m,routeContext:{outlet:d,matches:j,isDataRoute:n!=null},children:N})};return n&&(m.route.ErrorBoundary||m.route.errorElement||h===0)?b.createElement(gV,{location:n.location,revalidation:n.revalidation,component:v,error:p,children:w(),routeContext:{outlet:null,matches:j,isDataRoute:!0},onError:u}):w()},null)}function D1(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bV(t){let s=b.useContext(sh);return Nn(s,D1(t)),s}function jV(t){let s=b.useContext(x0);return Nn(s,D1(t)),s}function wV(t){let s=b.useContext(Gl);return Nn(s,D1(t)),s}function O1(t){let s=wV(t),n=s.matches[s.matches.length-1];return Nn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function NV(){return O1("useRouteId")}function _V(){var r;let t=b.useContext(A1),s=jV("useRouteError"),n=O1("useRouteError");return t!==void 0?t:(r=s.errors)==null?void 0:r[n]}function SV(){let{router:t}=bV("useNavigate"),s=O1("useNavigate"),n=b.useRef(!1);return e5(()=>{n.current=!0}),b.useCallback(async(a,i={})=>{xi(n.current,Z6),n.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:s,...i}))},[t,s])}var uE={};function s5(t,s,n){!s&&!uE[t]&&(uE[t]=!0,xi(!1,n))}b.memo(CV);function CV({routes:t,future:s,state:n,unstable_onError:r}){return t5(t,void 0,n,r,s)}function ct(t){Nn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function kV({basename:t="/",children:s=null,location:n,navigationType:r="POP",navigator:a,static:i=!1}){Nn(!Ff(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),o=b.useMemo(()=>({basename:l,navigator:a,static:i,future:{}}),[l,a,i]);typeof n=="string"&&(n=th(n));let{pathname:c="/",search:u="",hash:d="",state:m=null,key:h="default"}=n,p=b.useMemo(()=>{let g=ql(c,l);return g==null?null:{location:{pathname:g,search:u,hash:d,state:m,key:h},navigationType:r}},[l,c,u,d,m,h,r]);return xi(p!=null,`<Router basename="${l}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:b.createElement(al.Provider,{value:o},b.createElement(Rf.Provider,{children:s,value:p}))}function EV({children:t,location:s}){return fV(FN(t),s)}function FN(t,s=[]){let n=[];return b.Children.forEach(t,(r,a)=>{if(!b.isValidElement(r))return;let i=[...s,a];if(r.type===b.Fragment){n.push.apply(n,FN(r.props.children,i));return}Nn(r.type===ct,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Nn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=FN(r.props.children,i)),n.push(l)}),n}var ng="get",rg="application/x-www-form-urlencoded";function g0(t){return t!=null&&typeof t.tagName=="string"}function PV(t){return g0(t)&&t.tagName.toLowerCase()==="button"}function TV(t){return g0(t)&&t.tagName.toLowerCase()==="form"}function AV(t){return g0(t)&&t.tagName.toLowerCase()==="input"}function MV(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function DV(t,s){return t.button===0&&(!s||s==="_self")&&!MV(t)}var Ex=null;function OV(){if(Ex===null)try{new FormData(document.createElement("form"),0),Ex=!1}catch{Ex=!0}return Ex}var RV=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function _b(t){return t!=null&&!RV.has(t)?(xi(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${rg}"`),null):t}function FV(t,s){let n,r,a,i,l;if(TV(t)){let o=t.getAttribute("action");r=o?ql(o,s):null,n=t.getAttribute("method")||ng,a=_b(t.getAttribute("enctype"))||rg,i=new FormData(t)}else if(PV(t)||AV(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||o.getAttribute("action");if(r=c?ql(c,s):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||ng,a=_b(t.getAttribute("formenctype"))||_b(o.getAttribute("enctype"))||rg,i=new FormData(o,t),!OV()){let{name:u,type:d,value:m}=t;if(d==="image"){let h=u?`${u}.`:"";i.append(`${h}x`,"0"),i.append(`${h}y`,"0")}else u&&i.append(u,m)}}else{if(g0(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ng,r=null,a=rg,l=t}return i&&a==="text/plain"&&(l=i,i=void 0),{action:r,method:n.toLowerCase(),encType:a,formData:i,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function R1(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function LV(t,s,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:s&&ql(r.pathname,s)==="/"?r.pathname=`${s.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function IV(t,s){if(t.id in s)return s[t.id];try{let n=await import(t.module);return s[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function BV(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function qV(t,s,n){let r=await Promise.all(t.map(async a=>{let i=s.routes[a.route.id];if(i){let l=await IV(i,n);return l.links?l.links():[]}return[]}));return VV(r.flat(1).filter(BV).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function hE(t,s,n,r,a,i){let l=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,o=(c,u)=>{var d;return n[u].pathname!==c.pathname||((d=n[u].route.path)==null?void 0:d.endsWith("*"))&&n[u].params["*"]!==c.params["*"]};return i==="assets"?s.filter((c,u)=>l(c,u)||o(c,u)):i==="data"?s.filter((c,u)=>{var m;let d=r.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(l(c,u)||o(c,u))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((m=n[0])==null?void 0:m.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function zV(t,s,{includeHydrateFallback:n}={}){return $V(t.map(r=>{let a=s.routes[r.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function $V(t){return[...new Set(t)]}function UV(t){let s={},n=Object.keys(t).sort();for(let r of n)s[r]=t[r];return s}function VV(t,s){let n=new Set;return new Set(s),t.reduce((r,a)=>{let i=JSON.stringify(UV(a));return n.has(i)||(n.add(i),r.push({key:i,link:a})),r},[])}function n5(){let t=b.useContext(sh);return R1(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function WV(){let t=b.useContext(x0);return R1(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var F1=b.createContext(void 0);F1.displayName="FrameworkContext";function r5(){let t=b.useContext(F1);return R1(t,"You must render this element inside a <HydratedRouter> element"),t}function HV(t,s){let n=b.useContext(F1),[r,a]=b.useState(!1),[i,l]=b.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:m}=s,h=b.useRef(null);b.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let v=j=>{j.forEach(w=>{l(w.isIntersecting)})},y=new IntersectionObserver(v,{threshold:.5});return h.current&&y.observe(h.current),()=>{y.disconnect()}}},[t]),b.useEffect(()=>{if(r){let v=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(v)}}},[r]);let p=()=>{a(!0)},g=()=>{a(!1),l(!1)};return n?t!=="intent"?[i,h,{}]:[i,h,{onFocus:mm(o,p),onBlur:mm(c,g),onMouseEnter:mm(u,p),onMouseLeave:mm(d,g),onTouchStart:mm(m,p)}]:[!1,h,{}]}function mm(t,s){return n=>{t&&t(n),n.defaultPrevented||s(n)}}function KV({page:t,...s}){let{router:n}=n5(),r=b.useMemo(()=>H6(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?b.createElement(YV,{page:t,matches:r,...s}):null}function GV(t){let{manifest:s,routeModules:n}=r5(),[r,a]=b.useState([]);return b.useEffect(()=>{let i=!1;return qV(t,s,n).then(l=>{i||a(l)}),()=>{i=!0}},[t,s,n]),r}function YV({page:t,matches:s,...n}){let r=il(),{manifest:a,routeModules:i}=r5(),{basename:l}=n5(),{loaderData:o,matches:c}=WV(),u=b.useMemo(()=>hE(t,s,c,a,r,"data"),[t,s,c,a,r]),d=b.useMemo(()=>hE(t,s,c,a,r,"assets"),[t,s,c,a,r]),m=b.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let g=new Set,v=!1;if(s.forEach(j=>{var N;let w=a.routes[j.route.id];!w||!w.hasLoader||(!u.some(_=>_.route.id===j.route.id)&&j.route.id in o&&((N=i[j.route.id])!=null&&N.shouldRevalidate)||w.hasClientLoader?v=!0:g.add(j.route.id))}),g.size===0)return[];let y=LV(t,l,"data");return v&&g.size>0&&y.searchParams.set("_routes",s.filter(j=>g.has(j.route.id)).map(j=>j.route.id).join(",")),[y.pathname+y.search]},[l,o,r,a,u,s,t,i]),h=b.useMemo(()=>zV(d,a),[d,a]),p=GV(d);return b.createElement(b.Fragment,null,m.map(g=>b.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...n})),h.map(g=>b.createElement("link",{key:g,rel:"modulepreload",href:g,...n})),p.map(({key:g,link:v})=>b.createElement("link",{key:g,nonce:n.nonce,...v})))}function QV(...t){return s=>{t.forEach(n=>{typeof n=="function"?n(s):n!=null&&(n.current=s)})}}var a5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{a5&&(window.__reactRouterVersion="7.9.6")}catch{}function JV({basename:t,children:s,window:n}){let r=b.useRef();r.current==null&&(r.current=IU({window:n,v5Compat:!0}));let a=r.current,[i,l]=b.useState({action:a.action,location:a.location}),o=b.useCallback(c=>{b.startTransition(()=>l(c))},[l]);return b.useLayoutEffect(()=>a.listen(o),[a,o]),b.createElement(kV,{basename:t,children:s,location:i.location,navigationType:i.action,navigator:a})}var i5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ht=b.forwardRef(function({onClick:s,discover:n="render",prefetch:r="none",relative:a,reloadDocument:i,replace:l,state:o,target:c,to:u,preventScrollReset:d,viewTransition:m,...h},p){let{basename:g}=b.useContext(al),v=typeof u=="string"&&i5.test(u),y,j=!1;if(typeof u=="string"&&v&&(y=u,a5))try{let O=new URL(window.location.href),M=u.startsWith("//")?new URL(O.protocol+u):new URL(u),k=ql(M.pathname,g);M.origin===O.origin&&k!=null?u=k+M.search+M.hash:j=!0}catch{xi(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=hV(u,{relative:a}),[N,_,T]=HV(r,h),A=tW(u,{replace:l,state:o,target:c,preventScrollReset:d,relative:a,viewTransition:m});function P(O){s&&s(O),O.defaultPrevented||A(O)}let C=b.createElement("a",{...h,...T,href:y||w,onClick:j||i?s:P,ref:QV(p,_),target:c,"data-discover":!v&&n==="render"?"true":void 0});return N&&!v?b.createElement(b.Fragment,null,C,b.createElement(KV,{page:w})):C});Ht.displayName="Link";var XV=b.forwardRef(function({"aria-current":s="page",caseSensitive:n=!1,className:r="",end:a=!1,style:i,to:l,viewTransition:o,children:c,...u},d){let m=Lf(l,{relative:u.relative}),h=il(),p=b.useContext(x0),{navigator:g,basename:v}=b.useContext(al),y=p!=null&&iW(m)&&o===!0,j=g.encodeLocation?g.encodeLocation(m).pathname:m.pathname,w=h.pathname,N=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(w=w.toLowerCase(),N=N?N.toLowerCase():null,j=j.toLowerCase()),N&&v&&(N=ql(N,v)||N);const _=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let T=w===j||!a&&w.startsWith(j)&&w.charAt(_)==="/",A=N!=null&&(N===j||!a&&N.startsWith(j)&&N.charAt(j.length)==="/"),P={isActive:T,isPending:A,isTransitioning:y},C=T?s:void 0,O;typeof r=="function"?O=r(P):O=[r,T?"active":null,A?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let M=typeof i=="function"?i(P):i;return b.createElement(Ht,{...u,"aria-current":C,className:O,ref:d,style:M,to:l,viewTransition:o},typeof c=="function"?c(P):c)});XV.displayName="NavLink";var ZV=b.forwardRef(({discover:t="render",fetcherKey:s,navigate:n,reloadDocument:r,replace:a,state:i,method:l=ng,action:o,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:m,...h},p)=>{let g=rW(),v=aW(o,{relative:u}),y=l.toLowerCase()==="get"?"get":"post",j=typeof o=="string"&&i5.test(o),w=N=>{if(c&&c(N),N.defaultPrevented)return;N.preventDefault();let _=N.nativeEvent.submitter,T=(_==null?void 0:_.getAttribute("formmethod"))||l;g(_||N.currentTarget,{fetcherKey:s,method:T,navigate:n,replace:a,state:i,relative:u,preventScrollReset:d,viewTransition:m})};return b.createElement("form",{ref:p,method:y,action:v,onSubmit:r?c:w,...h,"data-discover":!j&&t==="render"?"true":void 0})});ZV.displayName="Form";function eW(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function l5(t){let s=b.useContext(sh);return Nn(s,eW(t)),s}function tW(t,{target:s,replace:n,state:r,preventScrollReset:a,relative:i,viewTransition:l}={}){let o=M1(),c=il(),u=Lf(t,{relative:i});return b.useCallback(d=>{if(DV(d,s)){d.preventDefault();let m=n!==void 0?n:Xm(c)===Xm(u);o(t,{replace:m,state:r,preventScrollReset:a,relative:i,viewTransition:l})}},[c,o,u,n,r,s,t,a,i,l])}var sW=0,nW=()=>`__${String(++sW)}__`;function rW(){let{router:t}=l5("useSubmit"),{basename:s}=b.useContext(al),n=NV();return b.useCallback(async(r,a={})=>{let{action:i,method:l,encType:o,formData:c,body:u}=FV(r,s);if(a.navigate===!1){let d=a.fetcherKey||nW();await t.fetch(d,n,a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||l,formEncType:a.encType||o,flushSync:a.flushSync})}else await t.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||l,formEncType:a.encType||o,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,s,n])}function aW(t,{relative:s}={}){let{basename:n}=b.useContext(al),r=b.useContext(Gl);Nn(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),i={...Lf(t||".",{relative:s})},l=il();if(t==null){i.search=l.search;let o=new URLSearchParams(i.search),c=o.getAll("index");if(c.some(d=>d==="")){o.delete("index"),c.filter(m=>m).forEach(m=>o.append("index",m));let d=o.toString();i.search=d?`?${d}`:""}}return(!t||t===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Fl([n,i.pathname])),Xm(i)}function iW(t,{relative:s}={}){let n=b.useContext(X6);Nn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=l5("useViewTransitionState"),a=Lf(t,{relative:s});if(!n.isTransitioning)return!1;let i=ql(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=ql(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Mg(a.pathname,l)!=null||Mg(a.pathname,i)!=null}var hd=T1();const o5=ud(hd);function Pe(t){return"/"+t.toLowerCase().replace(/ /g,"-")}function c5(t,s){return function(){return t.apply(s,arguments)}}const{toString:lW}=Object.prototype,{getPrototypeOf:L1}=Object,{iterator:v0,toStringTag:d5}=Symbol,y0=(t=>s=>{const n=lW.call(s);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),_i=t=>(t=t.toLowerCase(),s=>y0(s)===t),b0=t=>s=>typeof s===t,{isArray:nh}=Array,Bu=b0("undefined");function If(t){return t!==null&&!Bu(t)&&t.constructor!==null&&!Bu(t.constructor)&&ta(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const u5=_i("ArrayBuffer");function oW(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&u5(t.buffer),s}const cW=b0("string"),ta=b0("function"),h5=b0("number"),Bf=t=>t!==null&&typeof t=="object",dW=t=>t===!0||t===!1,ag=t=>{if(y0(t)!=="object")return!1;const s=L1(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(d5 in t)&&!(v0 in t)},uW=t=>{if(!Bf(t)||If(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},hW=_i("Date"),mW=_i("File"),fW=_i("Blob"),pW=_i("FileList"),xW=t=>Bf(t)&&ta(t.pipe),gW=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||ta(t.append)&&((s=y0(t))==="formdata"||s==="object"&&ta(t.toString)&&t.toString()==="[object FormData]"))},vW=_i("URLSearchParams"),[yW,bW,jW,wW]=["ReadableStream","Request","Response","Headers"].map(_i),NW=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function qf(t,s,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,a;if(typeof t!="object"&&(t=[t]),nh(t))for(r=0,a=t.length;r<a;r++)s.call(null,t[r],r,t);else{if(If(t))return;const i=n?Object.getOwnPropertyNames(t):Object.keys(t),l=i.length;let o;for(r=0;r<l;r++)o=i[r],s.call(null,t[o],o,t)}}function m5(t,s){if(If(t))return null;s=s.toLowerCase();const n=Object.keys(t);let r=n.length,a;for(;r-- >0;)if(a=n[r],s===a.toLowerCase())return a;return null}const Pc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,f5=t=>!Bu(t)&&t!==Pc;function LN(){const{caseless:t,skipUndefined:s}=f5(this)&&this||{},n={},r=(a,i)=>{const l=t&&m5(n,i)||i;ag(n[l])&&ag(a)?n[l]=LN(n[l],a):ag(a)?n[l]=LN({},a):nh(a)?n[l]=a.slice():(!s||!Bu(a))&&(n[l]=a)};for(let a=0,i=arguments.length;a<i;a++)arguments[a]&&qf(arguments[a],r);return n}const _W=(t,s,n,{allOwnKeys:r}={})=>(qf(s,(a,i)=>{n&&ta(a)?t[i]=c5(a,n):t[i]=a},{allOwnKeys:r}),t),SW=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),CW=(t,s,n,r)=>{t.prototype=Object.create(s.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),n&&Object.assign(t.prototype,n)},kW=(t,s,n,r)=>{let a,i,l;const o={};if(s=s||{},t==null)return s;do{for(a=Object.getOwnPropertyNames(t),i=a.length;i-- >0;)l=a[i],(!r||r(l,t,s))&&!o[l]&&(s[l]=t[l],o[l]=!0);t=n!==!1&&L1(t)}while(t&&(!n||n(t,s))&&t!==Object.prototype);return s},EW=(t,s,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=s.length;const r=t.indexOf(s,n);return r!==-1&&r===n},PW=t=>{if(!t)return null;if(nh(t))return t;let s=t.length;if(!h5(s))return null;const n=new Array(s);for(;s-- >0;)n[s]=t[s];return n},TW=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&L1(Uint8Array)),AW=(t,s)=>{const r=(t&&t[v0]).call(t);let a;for(;(a=r.next())&&!a.done;){const i=a.value;s.call(t,i[0],i[1])}},MW=(t,s)=>{let n;const r=[];for(;(n=t.exec(s))!==null;)r.push(n);return r},DW=_i("HTMLFormElement"),OW=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,a){return r.toUpperCase()+a}),mE=(({hasOwnProperty:t})=>(s,n)=>t.call(s,n))(Object.prototype),RW=_i("RegExp"),p5=(t,s)=>{const n=Object.getOwnPropertyDescriptors(t),r={};qf(n,(a,i)=>{let l;(l=s(a,i,t))!==!1&&(r[i]=l||a)}),Object.defineProperties(t,r)},FW=t=>{p5(t,(s,n)=>{if(ta(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(ta(r)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},LW=(t,s)=>{const n={},r=a=>{a.forEach(i=>{n[i]=!0})};return nh(t)?r(t):r(String(t).split(s)),n},IW=()=>{},BW=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function qW(t){return!!(t&&ta(t.append)&&t[d5]==="FormData"&&t[v0])}const zW=t=>{const s=new Array(10),n=(r,a)=>{if(Bf(r)){if(s.indexOf(r)>=0)return;if(If(r))return r;if(!("toJSON"in r)){s[a]=r;const i=nh(r)?[]:{};return qf(r,(l,o)=>{const c=n(l,a+1);!Bu(c)&&(i[o]=c)}),s[a]=void 0,i}}return r};return n(t,0)},$W=_i("AsyncFunction"),UW=t=>t&&(Bf(t)||ta(t))&&ta(t.then)&&ta(t.catch),x5=((t,s)=>t?setImmediate:s?((n,r)=>(Pc.addEventListener("message",({source:a,data:i})=>{a===Pc&&i===n&&r.length&&r.shift()()},!1),a=>{r.push(a),Pc.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",ta(Pc.postMessage)),VW=typeof queueMicrotask<"u"?queueMicrotask.bind(Pc):typeof process<"u"&&process.nextTick||x5,WW=t=>t!=null&&ta(t[v0]),Ie={isArray:nh,isArrayBuffer:u5,isBuffer:If,isFormData:gW,isArrayBufferView:oW,isString:cW,isNumber:h5,isBoolean:dW,isObject:Bf,isPlainObject:ag,isEmptyObject:uW,isReadableStream:yW,isRequest:bW,isResponse:jW,isHeaders:wW,isUndefined:Bu,isDate:hW,isFile:mW,isBlob:fW,isRegExp:RW,isFunction:ta,isStream:xW,isURLSearchParams:vW,isTypedArray:TW,isFileList:pW,forEach:qf,merge:LN,extend:_W,trim:NW,stripBOM:SW,inherits:CW,toFlatObject:kW,kindOf:y0,kindOfTest:_i,endsWith:EW,toArray:PW,forEachEntry:AW,matchAll:MW,isHTMLForm:DW,hasOwnProperty:mE,hasOwnProp:mE,reduceDescriptors:p5,freezeMethods:FW,toObjectSet:LW,toCamelCase:OW,noop:IW,toFiniteNumber:BW,findKey:m5,global:Pc,isContextDefined:f5,isSpecCompliantForm:qW,toJSONObject:zW,isAsyncFn:$W,isThenable:UW,setImmediate:x5,asap:VW,isIterable:WW};function us(t,s,n,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),n&&(this.config=n),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}Ie.inherits(us,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ie.toJSONObject(this.config),code:this.code,status:this.status}}});const g5=us.prototype,v5={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{v5[t]={value:t}});Object.defineProperties(us,v5);Object.defineProperty(g5,"isAxiosError",{value:!0});us.from=(t,s,n,r,a,i)=>{const l=Object.create(g5);Ie.toFlatObject(t,l,function(d){return d!==Error.prototype},u=>u!=="isAxiosError");const o=t&&t.message?t.message:"Error",c=s==null&&t?t.code:s;return us.call(l,o,c,n,r,a),t&&l.cause==null&&Object.defineProperty(l,"cause",{value:t,configurable:!0}),l.name=t&&t.name||"Error",i&&Object.assign(l,i),l};const HW=null;function IN(t){return Ie.isPlainObject(t)||Ie.isArray(t)}function y5(t){return Ie.endsWith(t,"[]")?t.slice(0,-2):t}function fE(t,s,n){return t?t.concat(s).map(function(a,i){return a=y5(a),!n&&i?"["+a+"]":a}).join(n?".":""):s}function KW(t){return Ie.isArray(t)&&!t.some(IN)}const GW=Ie.toFlatObject(Ie,{},null,function(s){return/^is[A-Z]/.test(s)});function j0(t,s,n){if(!Ie.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,n=Ie.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,y){return!Ie.isUndefined(y[v])});const r=n.metaTokens,a=n.visitor||d,i=n.dots,l=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&Ie.isSpecCompliantForm(s);if(!Ie.isFunction(a))throw new TypeError("visitor must be a function");function u(g){if(g===null)return"";if(Ie.isDate(g))return g.toISOString();if(Ie.isBoolean(g))return g.toString();if(!c&&Ie.isBlob(g))throw new us("Blob is not supported. Use a Buffer instead.");return Ie.isArrayBuffer(g)||Ie.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function d(g,v,y){let j=g;if(g&&!y&&typeof g=="object"){if(Ie.endsWith(v,"{}"))v=r?v:v.slice(0,-2),g=JSON.stringify(g);else if(Ie.isArray(g)&&KW(g)||(Ie.isFileList(g)||Ie.endsWith(v,"[]"))&&(j=Ie.toArray(g)))return v=y5(v),j.forEach(function(N,_){!(Ie.isUndefined(N)||N===null)&&s.append(l===!0?fE([v],_,i):l===null?v:v+"[]",u(N))}),!1}return IN(g)?!0:(s.append(fE(y,v,i),u(g)),!1)}const m=[],h=Object.assign(GW,{defaultVisitor:d,convertValue:u,isVisitable:IN});function p(g,v){if(!Ie.isUndefined(g)){if(m.indexOf(g)!==-1)throw Error("Circular reference detected in "+v.join("."));m.push(g),Ie.forEach(g,function(j,w){(!(Ie.isUndefined(j)||j===null)&&a.call(s,j,Ie.isString(w)?w.trim():w,v,h))===!0&&p(j,v?v.concat(w):[w])}),m.pop()}}if(!Ie.isObject(t))throw new TypeError("data must be an object");return p(t),s}function pE(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return s[r]})}function I1(t,s){this._pairs=[],t&&j0(t,this,s)}const b5=I1.prototype;b5.append=function(s,n){this._pairs.push([s,n])};b5.toString=function(s){const n=s?function(r){return s.call(this,r,pE)}:pE;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function YW(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function j5(t,s,n){if(!s)return t;const r=n&&n.encode||YW;Ie.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let i;if(a?i=a(s,n):i=Ie.isURLSearchParams(s)?s.toString():new I1(s,n).toString(r),i){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class xE{constructor(){this.handlers=[]}use(s,n,r){return this.handlers.push({fulfilled:s,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){Ie.forEach(this.handlers,function(r){r!==null&&s(r)})}}const w5={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},QW=typeof URLSearchParams<"u"?URLSearchParams:I1,JW=typeof FormData<"u"?FormData:null,XW=typeof Blob<"u"?Blob:null,ZW={isBrowser:!0,classes:{URLSearchParams:QW,FormData:JW,Blob:XW},protocols:["http","https","file","blob","url","data"]},B1=typeof window<"u"&&typeof document<"u",BN=typeof navigator=="object"&&navigator||void 0,eH=B1&&(!BN||["ReactNative","NativeScript","NS"].indexOf(BN.product)<0),tH=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",sH=B1&&window.location.href||"http://localhost",nH=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:B1,hasStandardBrowserEnv:eH,hasStandardBrowserWebWorkerEnv:tH,navigator:BN,origin:sH},Symbol.toStringTag,{value:"Module"})),mr={...nH,...ZW};function rH(t,s){return j0(t,new mr.classes.URLSearchParams,{visitor:function(n,r,a,i){return mr.isNode&&Ie.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...s})}function aH(t){return Ie.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function iH(t){const s={},n=Object.keys(t);let r;const a=n.length;let i;for(r=0;r<a;r++)i=n[r],s[i]=t[i];return s}function N5(t){function s(n,r,a,i){let l=n[i++];if(l==="__proto__")return!0;const o=Number.isFinite(+l),c=i>=n.length;return l=!l&&Ie.isArray(a)?a.length:l,c?(Ie.hasOwnProp(a,l)?a[l]=[a[l],r]:a[l]=r,!o):((!a[l]||!Ie.isObject(a[l]))&&(a[l]=[]),s(n,r,a[l],i)&&Ie.isArray(a[l])&&(a[l]=iH(a[l])),!o)}if(Ie.isFormData(t)&&Ie.isFunction(t.entries)){const n={};return Ie.forEachEntry(t,(r,a)=>{s(aH(r),a,n,0)}),n}return null}function lH(t,s,n){if(Ie.isString(t))try{return(s||JSON.parse)(t),Ie.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const zf={transitional:w5,adapter:["xhr","http","fetch"],transformRequest:[function(s,n){const r=n.getContentType()||"",a=r.indexOf("application/json")>-1,i=Ie.isObject(s);if(i&&Ie.isHTMLForm(s)&&(s=new FormData(s)),Ie.isFormData(s))return a?JSON.stringify(N5(s)):s;if(Ie.isArrayBuffer(s)||Ie.isBuffer(s)||Ie.isStream(s)||Ie.isFile(s)||Ie.isBlob(s)||Ie.isReadableStream(s))return s;if(Ie.isArrayBufferView(s))return s.buffer;if(Ie.isURLSearchParams(s))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let o;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return rH(s,this.formSerializer).toString();if((o=Ie.isFileList(s))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return j0(o?{"files[]":s}:s,c&&new c,this.formSerializer)}}return i||a?(n.setContentType("application/json",!1),lH(s)):s}],transformResponse:[function(s){const n=this.transitional||zf.transitional,r=n&&n.forcedJSONParsing,a=this.responseType==="json";if(Ie.isResponse(s)||Ie.isReadableStream(s))return s;if(s&&Ie.isString(s)&&(r&&!this.responseType||a)){const l=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(s,this.parseReviver)}catch(o){if(l)throw o.name==="SyntaxError"?us.from(o,us.ERR_BAD_RESPONSE,this,null,this.response):o}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:mr.classes.FormData,Blob:mr.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ie.forEach(["delete","get","head","post","put","patch"],t=>{zf.headers[t]={}});const oH=Ie.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),cH=t=>{const s={};let n,r,a;return t&&t.split(`
`).forEach(function(l){a=l.indexOf(":"),n=l.substring(0,a).trim().toLowerCase(),r=l.substring(a+1).trim(),!(!n||s[n]&&oH[n])&&(n==="set-cookie"?s[n]?s[n].push(r):s[n]=[r]:s[n]=s[n]?s[n]+", "+r:r)}),s},gE=Symbol("internals");function fm(t){return t&&String(t).trim().toLowerCase()}function ig(t){return t===!1||t==null?t:Ie.isArray(t)?t.map(ig):String(t)}function dH(t){const s=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)s[r[1]]=r[2];return s}const uH=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Sb(t,s,n,r,a){if(Ie.isFunction(r))return r.call(this,s,n);if(a&&(s=n),!!Ie.isString(s)){if(Ie.isString(r))return s.indexOf(r)!==-1;if(Ie.isRegExp(r))return r.test(s)}}function hH(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,n,r)=>n.toUpperCase()+r)}function mH(t,s){const n=Ie.toCamelCase(" "+s);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(a,i,l){return this[r].call(this,s,a,i,l)},configurable:!0})})}let sa=class{constructor(s){s&&this.set(s)}set(s,n,r){const a=this;function i(o,c,u){const d=fm(c);if(!d)throw new Error("header name must be a non-empty string");const m=Ie.findKey(a,d);(!m||a[m]===void 0||u===!0||u===void 0&&a[m]!==!1)&&(a[m||c]=ig(o))}const l=(o,c)=>Ie.forEach(o,(u,d)=>i(u,d,c));if(Ie.isPlainObject(s)||s instanceof this.constructor)l(s,n);else if(Ie.isString(s)&&(s=s.trim())&&!uH(s))l(cH(s),n);else if(Ie.isObject(s)&&Ie.isIterable(s)){let o={},c,u;for(const d of s){if(!Ie.isArray(d))throw TypeError("Object iterator must return a key-value pair");o[u=d[0]]=(c=o[u])?Ie.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}l(o,n)}else s!=null&&i(n,s,r);return this}get(s,n){if(s=fm(s),s){const r=Ie.findKey(this,s);if(r){const a=this[r];if(!n)return a;if(n===!0)return dH(a);if(Ie.isFunction(n))return n.call(this,a,r);if(Ie.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,n){if(s=fm(s),s){const r=Ie.findKey(this,s);return!!(r&&this[r]!==void 0&&(!n||Sb(this,this[r],r,n)))}return!1}delete(s,n){const r=this;let a=!1;function i(l){if(l=fm(l),l){const o=Ie.findKey(r,l);o&&(!n||Sb(r,r[o],o,n))&&(delete r[o],a=!0)}}return Ie.isArray(s)?s.forEach(i):i(s),a}clear(s){const n=Object.keys(this);let r=n.length,a=!1;for(;r--;){const i=n[r];(!s||Sb(this,this[i],i,s,!0))&&(delete this[i],a=!0)}return a}normalize(s){const n=this,r={};return Ie.forEach(this,(a,i)=>{const l=Ie.findKey(r,i);if(l){n[l]=ig(a),delete n[i];return}const o=s?hH(i):String(i).trim();o!==i&&delete n[i],n[o]=ig(a),r[o]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const n=Object.create(null);return Ie.forEach(this,(r,a)=>{r!=null&&r!==!1&&(n[a]=s&&Ie.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,n])=>s+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...n){const r=new this(s);return n.forEach(a=>r.set(a)),r}static accessor(s){const r=(this[gE]=this[gE]={accessors:{}}).accessors,a=this.prototype;function i(l){const o=fm(l);r[o]||(mH(a,l),r[o]=!0)}return Ie.isArray(s)?s.forEach(i):i(s),this}};sa.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ie.reduceDescriptors(sa.prototype,({value:t},s)=>{let n=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(r){this[n]=r}}});Ie.freezeMethods(sa);function Cb(t,s){const n=this||zf,r=s||n,a=sa.from(r.headers);let i=r.data;return Ie.forEach(t,function(o){i=o.call(n,i,a.normalize(),s?s.status:void 0)}),a.normalize(),i}function _5(t){return!!(t&&t.__CANCEL__)}function rh(t,s,n){us.call(this,t??"canceled",us.ERR_CANCELED,s,n),this.name="CanceledError"}Ie.inherits(rh,us,{__CANCEL__:!0});function S5(t,s,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):s(new us("Request failed with status code "+n.status,[us.ERR_BAD_REQUEST,us.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function fH(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function pH(t,s){t=t||10;const n=new Array(t),r=new Array(t);let a=0,i=0,l;return s=s!==void 0?s:1e3,function(c){const u=Date.now(),d=r[i];l||(l=u),n[a]=c,r[a]=u;let m=i,h=0;for(;m!==a;)h+=n[m++],m=m%t;if(a=(a+1)%t,a===i&&(i=(i+1)%t),u-l<s)return;const p=d&&u-d;return p?Math.round(h*1e3/p):void 0}}function xH(t,s){let n=0,r=1e3/s,a,i;const l=(u,d=Date.now())=>{n=d,a=null,i&&(clearTimeout(i),i=null),t(...u)};return[(...u)=>{const d=Date.now(),m=d-n;m>=r?l(u,d):(a=u,i||(i=setTimeout(()=>{i=null,l(a)},r-m)))},()=>a&&l(a)]}const Dg=(t,s,n=3)=>{let r=0;const a=pH(50,250);return xH(i=>{const l=i.loaded,o=i.lengthComputable?i.total:void 0,c=l-r,u=a(c),d=l<=o;r=l;const m={loaded:l,total:o,progress:o?l/o:void 0,bytes:c,rate:u||void 0,estimated:u&&o&&d?(o-l)/u:void 0,event:i,lengthComputable:o!=null,[s?"download":"upload"]:!0};t(m)},n)},vE=(t,s)=>{const n=t!=null;return[r=>s[0]({lengthComputable:n,total:t,loaded:r}),s[1]]},yE=t=>(...s)=>Ie.asap(()=>t(...s)),gH=mr.hasStandardBrowserEnv?((t,s)=>n=>(n=new URL(n,mr.origin),t.protocol===n.protocol&&t.host===n.host&&(s||t.port===n.port)))(new URL(mr.origin),mr.navigator&&/(msie|trident)/i.test(mr.navigator.userAgent)):()=>!0,vH=mr.hasStandardBrowserEnv?{write(t,s,n,r,a,i,l){if(typeof document>"u")return;const o=[`${t}=${encodeURIComponent(s)}`];Ie.isNumber(n)&&o.push(`expires=${new Date(n).toUTCString()}`),Ie.isString(r)&&o.push(`path=${r}`),Ie.isString(a)&&o.push(`domain=${a}`),i===!0&&o.push("secure"),Ie.isString(l)&&o.push(`SameSite=${l}`),document.cookie=o.join("; ")},read(t){if(typeof document>"u")return null;const s=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return s?decodeURIComponent(s[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function yH(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function bH(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function C5(t,s,n){let r=!yH(s);return t&&(r||n==!1)?bH(t,s):s}const bE=t=>t instanceof sa?{...t}:t;function Jc(t,s){s=s||{};const n={};function r(u,d,m,h){return Ie.isPlainObject(u)&&Ie.isPlainObject(d)?Ie.merge.call({caseless:h},u,d):Ie.isPlainObject(d)?Ie.merge({},d):Ie.isArray(d)?d.slice():d}function a(u,d,m,h){if(Ie.isUndefined(d)){if(!Ie.isUndefined(u))return r(void 0,u,m,h)}else return r(u,d,m,h)}function i(u,d){if(!Ie.isUndefined(d))return r(void 0,d)}function l(u,d){if(Ie.isUndefined(d)){if(!Ie.isUndefined(u))return r(void 0,u)}else return r(void 0,d)}function o(u,d,m){if(m in s)return r(u,d);if(m in t)return r(void 0,u)}const c={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:o,headers:(u,d,m)=>a(bE(u),bE(d),m,!0)};return Ie.forEach(Object.keys({...t,...s}),function(d){const m=c[d]||a,h=m(t[d],s[d],d);Ie.isUndefined(h)&&m!==o||(n[d]=h)}),n}const k5=t=>{const s=Jc({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:a,xsrfCookieName:i,headers:l,auth:o}=s;if(s.headers=l=sa.from(l),s.url=j5(C5(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),o&&l.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),Ie.isFormData(n)){if(mr.hasStandardBrowserEnv||mr.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(Ie.isFunction(n.getHeaders)){const c=n.getHeaders(),u=["content-type","content-length"];Object.entries(c).forEach(([d,m])=>{u.includes(d.toLowerCase())&&l.set(d,m)})}}if(mr.hasStandardBrowserEnv&&(r&&Ie.isFunction(r)&&(r=r(s)),r||r!==!1&&gH(s.url))){const c=a&&i&&vH.read(i);c&&l.set(a,c)}return s},jH=typeof XMLHttpRequest<"u",wH=jH&&function(t){return new Promise(function(n,r){const a=k5(t);let i=a.data;const l=sa.from(a.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:u}=a,d,m,h,p,g;function v(){p&&p(),g&&g(),a.cancelToken&&a.cancelToken.unsubscribe(d),a.signal&&a.signal.removeEventListener("abort",d)}let y=new XMLHttpRequest;y.open(a.method.toUpperCase(),a.url,!0),y.timeout=a.timeout;function j(){if(!y)return;const N=sa.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),T={data:!o||o==="text"||o==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:N,config:t,request:y};S5(function(P){n(P),v()},function(P){r(P),v()},T),y=null}"onloadend"in y?y.onloadend=j:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(j)},y.onabort=function(){y&&(r(new us("Request aborted",us.ECONNABORTED,t,y)),y=null)},y.onerror=function(_){const T=_&&_.message?_.message:"Network Error",A=new us(T,us.ERR_NETWORK,t,y);A.event=_||null,r(A),y=null},y.ontimeout=function(){let _=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const T=a.transitional||w5;a.timeoutErrorMessage&&(_=a.timeoutErrorMessage),r(new us(_,T.clarifyTimeoutError?us.ETIMEDOUT:us.ECONNABORTED,t,y)),y=null},i===void 0&&l.setContentType(null),"setRequestHeader"in y&&Ie.forEach(l.toJSON(),function(_,T){y.setRequestHeader(T,_)}),Ie.isUndefined(a.withCredentials)||(y.withCredentials=!!a.withCredentials),o&&o!=="json"&&(y.responseType=a.responseType),u&&([h,g]=Dg(u,!0),y.addEventListener("progress",h)),c&&y.upload&&([m,p]=Dg(c),y.upload.addEventListener("progress",m),y.upload.addEventListener("loadend",p)),(a.cancelToken||a.signal)&&(d=N=>{y&&(r(!N||N.type?new rh(null,t,y):N),y.abort(),y=null)},a.cancelToken&&a.cancelToken.subscribe(d),a.signal&&(a.signal.aborted?d():a.signal.addEventListener("abort",d)));const w=fH(a.url);if(w&&mr.protocols.indexOf(w)===-1){r(new us("Unsupported protocol "+w+":",us.ERR_BAD_REQUEST,t));return}y.send(i||null)})},NH=(t,s)=>{const{length:n}=t=t?t.filter(Boolean):[];if(s||n){let r=new AbortController,a;const i=function(u){if(!a){a=!0,o();const d=u instanceof Error?u:this.reason;r.abort(d instanceof us?d:new rh(d instanceof Error?d.message:d))}};let l=s&&setTimeout(()=>{l=null,i(new us(`timeout ${s} of ms exceeded`,us.ETIMEDOUT))},s);const o=()=>{t&&(l&&clearTimeout(l),l=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),t=null)};t.forEach(u=>u.addEventListener("abort",i));const{signal:c}=r;return c.unsubscribe=()=>Ie.asap(o),c}},_H=function*(t,s){let n=t.byteLength;if(n<s){yield t;return}let r=0,a;for(;r<n;)a=r+s,yield t.slice(r,a),r=a},SH=async function*(t,s){for await(const n of CH(t))yield*_H(n,s)},CH=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:n,value:r}=await s.read();if(n)break;yield r}}finally{await s.cancel()}},jE=(t,s,n,r)=>{const a=SH(t,s);let i=0,l,o=c=>{l||(l=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await a.next();if(u){o(),c.close();return}let m=d.byteLength;if(n){let h=i+=m;n(h)}c.enqueue(new Uint8Array(d))}catch(u){throw o(u),u}},cancel(c){return o(c),a.return()}},{highWaterMark:2})},wE=64*1024,{isFunction:Px}=Ie,kH=(({Request:t,Response:s})=>({Request:t,Response:s}))(Ie.global),{ReadableStream:NE,TextEncoder:_E}=Ie.global,SE=(t,...s)=>{try{return!!t(...s)}catch{return!1}},EH=t=>{t=Ie.merge.call({skipUndefined:!0},kH,t);const{fetch:s,Request:n,Response:r}=t,a=s?Px(s):typeof fetch=="function",i=Px(n),l=Px(r);if(!a)return!1;const o=a&&Px(NE),c=a&&(typeof _E=="function"?(g=>v=>g.encode(v))(new _E):async g=>new Uint8Array(await new n(g).arrayBuffer())),u=i&&o&&SE(()=>{let g=!1;const v=new n(mr.origin,{body:new NE,method:"POST",get duplex(){return g=!0,"half"}}).headers.has("Content-Type");return g&&!v}),d=l&&o&&SE(()=>Ie.isReadableStream(new r("").body)),m={stream:d&&(g=>g.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(g=>{!m[g]&&(m[g]=(v,y)=>{let j=v&&v[g];if(j)return j.call(v);throw new us(`Response type '${g}' is not supported`,us.ERR_NOT_SUPPORT,y)})});const h=async g=>{if(g==null)return 0;if(Ie.isBlob(g))return g.size;if(Ie.isSpecCompliantForm(g))return(await new n(mr.origin,{method:"POST",body:g}).arrayBuffer()).byteLength;if(Ie.isArrayBufferView(g)||Ie.isArrayBuffer(g))return g.byteLength;if(Ie.isURLSearchParams(g)&&(g=g+""),Ie.isString(g))return(await c(g)).byteLength},p=async(g,v)=>{const y=Ie.toFiniteNumber(g.getContentLength());return y??h(v)};return async g=>{let{url:v,method:y,data:j,signal:w,cancelToken:N,timeout:_,onDownloadProgress:T,onUploadProgress:A,responseType:P,headers:C,withCredentials:O="same-origin",fetchOptions:M}=k5(g),k=s||fetch;P=P?(P+"").toLowerCase():"text";let E=NH([w,N&&N.toAbortSignal()],_),R=null;const F=E&&E.unsubscribe&&(()=>{E.unsubscribe()});let z;try{if(A&&u&&y!=="get"&&y!=="head"&&(z=await p(C,j))!==0){let I=new n(v,{method:"POST",body:j,duplex:"half"}),W;if(Ie.isFormData(j)&&(W=I.headers.get("content-type"))&&C.setContentType(W),I.body){const[q,Z]=vE(z,Dg(yE(A)));j=jE(I.body,wE,q,Z)}}Ie.isString(O)||(O=O?"include":"omit");const V=i&&"credentials"in n.prototype,U={...M,signal:E,method:y.toUpperCase(),headers:C.normalize().toJSON(),body:j,duplex:"half",credentials:V?O:void 0};R=i&&new n(v,U);let B=await(i?k(R,M):k(v,U));const $=d&&(P==="stream"||P==="response");if(d&&(T||$&&F)){const I={};["status","statusText","headers"].forEach(Q=>{I[Q]=B[Q]});const W=Ie.toFiniteNumber(B.headers.get("content-length")),[q,Z]=T&&vE(W,Dg(yE(T),!0))||[];B=new r(jE(B.body,wE,q,()=>{Z&&Z(),F&&F()}),I)}P=P||"text";let L=await m[Ie.findKey(m,P)||"text"](B,g);return!$&&F&&F(),await new Promise((I,W)=>{S5(I,W,{data:L,headers:sa.from(B.headers),status:B.status,statusText:B.statusText,config:g,request:R})})}catch(V){throw F&&F(),V&&V.name==="TypeError"&&/Load failed|fetch/i.test(V.message)?Object.assign(new us("Network Error",us.ERR_NETWORK,g,R),{cause:V.cause||V}):us.from(V,V&&V.code,g,R)}}},PH=new Map,E5=t=>{let s=t&&t.env||{};const{fetch:n,Request:r,Response:a}=s,i=[r,a,n];let l=i.length,o=l,c,u,d=PH;for(;o--;)c=i[o],u=d.get(c),u===void 0&&d.set(c,u=o?new Map:EH(s)),d=u;return u};E5();const q1={http:HW,xhr:wH,fetch:{get:E5}};Ie.forEach(q1,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const CE=t=>`- ${t}`,TH=t=>Ie.isFunction(t)||t===null||t===!1;function AH(t,s){t=Ie.isArray(t)?t:[t];const{length:n}=t;let r,a;const i={};for(let l=0;l<n;l++){r=t[l];let o;if(a=r,!TH(r)&&(a=q1[(o=String(r)).toLowerCase()],a===void 0))throw new us(`Unknown adapter '${o}'`);if(a&&(Ie.isFunction(a)||(a=a.get(s))))break;i[o||"#"+l]=a}if(!a){const l=Object.entries(i).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=n?l.length>1?`since :
`+l.map(CE).join(`
`):" "+CE(l[0]):"as no adapter specified";throw new us("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return a}const P5={getAdapter:AH,adapters:q1};function kb(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new rh(null,t)}function kE(t){return kb(t),t.headers=sa.from(t.headers),t.data=Cb.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),P5.getAdapter(t.adapter||zf.adapter,t)(t).then(function(r){return kb(t),r.data=Cb.call(t,t.transformResponse,r),r.headers=sa.from(r.headers),r},function(r){return _5(r)||(kb(t),r&&r.response&&(r.response.data=Cb.call(t,t.transformResponse,r.response),r.response.headers=sa.from(r.response.headers))),Promise.reject(r)})}const T5="1.13.2",w0={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{w0[t]=function(r){return typeof r===t||"a"+(s<1?"n ":" ")+t}});const EE={};w0.transitional=function(s,n,r){function a(i,l){return"[Axios v"+T5+"] Transitional option '"+i+"'"+l+(r?". "+r:"")}return(i,l,o)=>{if(s===!1)throw new us(a(l," has been removed"+(n?" in "+n:"")),us.ERR_DEPRECATED);return n&&!EE[l]&&(EE[l]=!0,console.warn(a(l," has been deprecated since v"+n+" and will be removed in the near future"))),s?s(i,l,o):!0}};w0.spelling=function(s){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${s}`),!0)};function MH(t,s,n){if(typeof t!="object")throw new us("options must be an object",us.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let a=r.length;for(;a-- >0;){const i=r[a],l=s[i];if(l){const o=t[i],c=o===void 0||l(o,i,t);if(c!==!0)throw new us("option "+i+" must be "+c,us.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new us("Unknown option "+i,us.ERR_BAD_OPTION)}}const lg={assertOptions:MH,validators:w0},Oi=lg.validators;let Vc=class{constructor(s){this.defaults=s||{},this.interceptors={request:new xE,response:new xE}}async request(s,n){try{return await this._request(s,n)}catch(r){if(r instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(s,n){typeof s=="string"?(n=n||{},n.url=s):n=s||{},n=Jc(this.defaults,n);const{transitional:r,paramsSerializer:a,headers:i}=n;r!==void 0&&lg.assertOptions(r,{silentJSONParsing:Oi.transitional(Oi.boolean),forcedJSONParsing:Oi.transitional(Oi.boolean),clarifyTimeoutError:Oi.transitional(Oi.boolean)},!1),a!=null&&(Ie.isFunction(a)?n.paramsSerializer={serialize:a}:lg.assertOptions(a,{encode:Oi.function,serialize:Oi.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),lg.assertOptions(n,{baseUrl:Oi.spelling("baseURL"),withXsrfToken:Oi.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let l=i&&Ie.merge(i.common,i[n.method]);i&&Ie.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),n.headers=sa.concat(l,i);const o=[];let c=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(n)===!1||(c=c&&v.synchronous,o.unshift(v.fulfilled,v.rejected))});const u=[];this.interceptors.response.forEach(function(v){u.push(v.fulfilled,v.rejected)});let d,m=0,h;if(!c){const g=[kE.bind(this),void 0];for(g.unshift(...o),g.push(...u),h=g.length,d=Promise.resolve(n);m<h;)d=d.then(g[m++],g[m++]);return d}h=o.length;let p=n;for(;m<h;){const g=o[m++],v=o[m++];try{p=g(p)}catch(y){v.call(this,y);break}}try{d=kE.call(this,p)}catch(g){return Promise.reject(g)}for(m=0,h=u.length;m<h;)d=d.then(u[m++],u[m++]);return d}getUri(s){s=Jc(this.defaults,s);const n=C5(s.baseURL,s.url,s.allowAbsoluteUrls);return j5(n,s.params,s.paramsSerializer)}};Ie.forEach(["delete","get","head","options"],function(s){Vc.prototype[s]=function(n,r){return this.request(Jc(r||{},{method:s,url:n,data:(r||{}).data}))}});Ie.forEach(["post","put","patch"],function(s){function n(r){return function(i,l,o){return this.request(Jc(o||{},{method:s,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}Vc.prototype[s]=n(),Vc.prototype[s+"Form"]=n(!0)});let DH=class A5{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(a=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](a);r._listeners=null}),this.promise.then=a=>{let i;const l=new Promise(o=>{r.subscribe(o),i=o}).then(a);return l.cancel=function(){r.unsubscribe(i)},l},s(function(i,l,o){r.reason||(r.reason=new rh(i,l,o),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const n=this._listeners.indexOf(s);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const s=new AbortController,n=r=>{s.abort(r)};return this.subscribe(n),s.signal.unsubscribe=()=>this.unsubscribe(n),s.signal}static source(){let s;return{token:new A5(function(a){s=a}),cancel:s}}};function OH(t){return function(n){return t.apply(null,n)}}function RH(t){return Ie.isObject(t)&&t.isAxiosError===!0}const qN={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(qN).forEach(([t,s])=>{qN[s]=t});function M5(t){const s=new Vc(t),n=c5(Vc.prototype.request,s);return Ie.extend(n,Vc.prototype,s,{allOwnKeys:!0}),Ie.extend(n,s,null,{allOwnKeys:!0}),n.create=function(a){return M5(Jc(t,a))},n}const Dn=M5(zf);Dn.Axios=Vc;Dn.CanceledError=rh;Dn.CancelToken=DH;Dn.isCancel=_5;Dn.VERSION=T5;Dn.toFormData=j0;Dn.AxiosError=us;Dn.Cancel=Dn.CanceledError;Dn.all=function(s){return Promise.all(s)};Dn.spread=OH;Dn.isAxiosError=RH;Dn.mergeConfig=Jc;Dn.AxiosHeaders=sa;Dn.formToJSON=t=>N5(Ie.isHTMLForm(t)?new FormData(t):t);Dn.getAdapter=P5.getAdapter;Dn.HttpStatusCode=qN;Dn.default=Dn;const{Axios:JCe,AxiosError:XCe,CanceledError:ZCe,isCancel:eke,CancelToken:tke,VERSION:ske,all:nke,Cancel:rke,isAxiosError:ake,spread:ike,toFormData:lke,AxiosHeaders:oke,HttpStatusCode:cke,formToJSON:dke,getAdapter:uke,mergeConfig:hke}=Dn;class FH extends Error{constructor(s,n,r,a,i){super(s),this.name="Base44Error",this.status=n,this.code=r,this.data=a,this.originalError=i}toJSON(){return{name:this.name,message:this.message,status:this.status,code:this.code,data:this.data}}}function LH(t){let{baseURL:s,headers:n={},token:r,requiresAuth:a=!1,appId:i,serverUrl:l}=t;const o=Dn.create({baseURL:s,headers:{"Content-Type":"application/json",Accept:"application/json",...n}});return r&&(o.defaults.headers.common.Authorization=`Bearer ${r}`),o.interceptors.request.use((c=>(typeof window<"u"&&(c.headers={...c.headers,"X-Origin-URL":window.location.href}),c))),o.interceptors.response.use((c=>c.data),(c=>{var m,h,p,g,v,y,j,w,N,_;const u=((h=(m=c.response)==null?void 0:m.data)==null?void 0:h.message)||((g=(p=c.response)==null?void 0:p.data)==null?void 0:g.detail)||c.message,d=new FH(u,(v=c.response)==null?void 0:v.status,(j=(y=c.response)==null?void 0:y.data)==null?void 0:j.code,(w=c.response)==null?void 0:w.data,c);return console.log(a,(N=c.response)==null?void 0:N.status,typeof window<"u"),a&&((_=c.response)==null?void 0:_.status)===403&&typeof window<"u"&&(console.log("Authentication required. Redirecting to login..."),setTimeout((()=>{(function(T,A){if(typeof window>"u")return;const P=`${T}/login?from_url=${encodeURIComponent(window.location.href)}&app_id=${A}`;window.location.href=P})(l,i)}),100)),Promise.reject(d)})),o}function IH(t,s){return new Proxy({},{get(n,r){if(typeof r=="string"&&r!=="then"&&!r.startsWith("_"))return(function(a,i,l){const o=`/apps/${i}/entities/${l}`;return{async list(c,u,d,m){const h={};return c&&(h.sort=c),u&&(h.limit=u),d&&(h.skip=d),m&&(h.fields=Array.isArray(m)?m.join(","):m),a.get(o,{params:h})},async filter(c,u,d,m,h){const p={q:JSON.stringify(c)};return u&&(p.sort=u),d&&(p.limit=d),m&&(p.skip=m),h&&(p.fields=Array.isArray(h)?h.join(","):h),a.get(o,{params:p})},get:async c=>a.get(`${o}/${c}`),create:async c=>a.post(o,c),update:async(c,u)=>a.put(`${o}/${c}`,u),delete:async c=>a.delete(`${o}/${c}`),deleteMany:async c=>a.delete(o,{data:c}),bulkCreate:async c=>a.post(`${o}/bulk`,c),async importEntities(c){const u=new FormData;return u.append("file",c,c.name),a.post(`${o}/import`,u,{headers:{"Content-Type":"multipart/form-data"}})}}})(t,s,r)}})}function BH(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{storageKey:s="base44_access_token",paramName:n="access_token",saveToStorage:r=!0,removeFromUrl:a=!0}=t;let i=null;if(typeof window<"u"&&window.location)try{const l=new URLSearchParams(window.location.search);if(i=l.get(n),i){if(r&&qH(i,{storageKey:s}),a){l.delete(n);const o=`${window.location.pathname}${l.toString()?`?${l.toString()}`:""}${window.location.hash}`;window.history.replaceState({},document.title,o)}return i}}catch(l){console.error("Error retrieving token from URL:",l)}if(typeof window<"u"&&window.localStorage)try{return i=window.localStorage.getItem(s),i}catch(l){console.error("Error retrieving token from localStorage:",l)}return null}function qH(t){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{storageKey:n="base44_access_token"}=s;if(typeof window>"u"||!window.localStorage||!t)return!1;try{return window.localStorage.setItem(n,t),!0}catch(r){return console.error("Error saving token to localStorage:",r),!1}}function zH(t){if(!t||!t.appId)throw new Error("appId is required");const{serverUrl:s="https://base44.app",appId:n,env:r="prod",token:a,requiresAuth:i=!1}=t,l=LH({baseURL:`${s}/api`,headers:{"X-App-Id":String(n),"X-Environment":r},token:a,requiresAuth:i,appId:n,serverUrl:s}),o=IH(l,n),c=(function(d,m){return new Proxy({},{get(h,p){if(typeof p=="string"&&p!=="then"&&!p.startsWith("_"))return new Proxy({},{get(g,v){if(typeof v=="string"&&v!=="then"&&!v.startsWith("_"))return async y=>{if(typeof y=="string")throw new Error(`Integration ${v} must receive an object with named parameters, received: ${y}`);let j,w;return y instanceof FormData||y&&Object.values(y).some((N=>N instanceof File))?(j=new FormData,Object.keys(y).forEach((N=>{y[N]instanceof File?j.append(N,y[N],y[N].name):typeof y[N]=="object"&&y[N]!==null?j.append(N,JSON.stringify(y[N])):j.append(N,y[N])})),w="multipart/form-data"):(j=y,w="application/json"),p==="Core"?d.post(`/apps/${m}/integration-endpoints/Core/${v}`,j||y,{headers:{"Content-Type":w}}):d.post(`/apps/${m}/integration-endpoints/installable/${p}/integration-endpoints/${v}`,j||y,{headers:{"Content-Type":w}})}}})}})})(l,n),u=(function(d,m,h){return{me:async()=>d.get(`/apps/${m}/entities/User/me`),updateMe:async p=>d.put(`/apps/${m}/entities/User/me`,p),login(p){if(typeof window>"u")throw new Error("Login method can only be used in a browser environment");const g=p||window.location.href,v=`${h}/login?from_url=${encodeURIComponent(g)}&app_id=${m}`;window.location.href=v},async logout(p){if(delete d.defaults.headers.common.Authorization,typeof window<"u"&&window.localStorage)try{window.localStorage.removeItem("base44_access_token")}catch(g){console.error("Failed to remove token from localStorage:",g)}return p&&typeof window<"u"&&(window.location.href=p),Promise.resolve()},setToken(p){let g=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(p&&(d.defaults.headers.common.Authorization=`Bearer ${p}`,g&&typeof window<"u"&&window.localStorage))try{window.localStorage.setItem("base44_access_token",p)}catch(v){console.error("Failed to save token to localStorage:",v)}},async isAuthenticated(){try{return await this.me(),!0}catch{return!1}}}})(l,n,s);if(typeof window<"u"){const d=a||BH();d&&u.setToken(d)}return i&&typeof window<"u"&&setTimeout((async()=>{try{await u.isAuthenticated()||u.login(window.location.href)}catch(d){console.error("Authentication check failed:",d),u.login(window.location.href)}}),0),{entities:o,integrations:c,auth:u,setToken(d){u.setToken(d)},getConfig:()=>({serverUrl:s,appId:n,env:r,requiresAuth:i})}}const X=zH({appId:"68efc20f3e0a30fafad6dde7",requiresAuth:!1}),N0=Object.freeze(Object.defineProperty({__proto__:null,base44:X},Symbol.toStringTag,{value:"Module"}));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $H=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),D5=(...t)=>t.filter((s,n,r)=>!!s&&s.trim()!==""&&r.indexOf(s)===n).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var UH={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VH=b.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:l,...o},c)=>b.createElement("svg",{ref:c,...UH,width:s,height:s,stroke:t,strokeWidth:r?Number(n)*24/Number(s):n,className:D5("lucide",a),...o},[...l.map(([u,d])=>b.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=(t,s)=>{const n=b.forwardRef(({className:r,...a},i)=>b.createElement(VH,{ref:i,iconNode:s,className:D5(`lucide-${$H(t)}`,r),...a}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WH=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],O5=Xe("ArrowDown",WH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HH=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ll=Xe("ArrowLeft",HH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KH=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],zN=Xe("ArrowRight",KH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GH=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],z1=Xe("ArrowUpDown",GH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YH=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Mr=Xe("ArrowUpRight",YH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QH=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],R5=Xe("ArrowUp",QH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JH=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]],$f=Xe("AtSign",JH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XH=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],ZH=Xe("Award",XH);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eK=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],_0=Xe("BookOpen",eK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tK=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],En=Xe("Briefcase",tK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sK=[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]],F5=Xe("Bug",sK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nK=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Na=Xe("Building2",nK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rK=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Zo=Xe("Building",rK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aK=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],iK=Xe("CalendarDays",aK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lK=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ns=Xe("Calendar",lK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oK=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ah=Xe("ChartColumn",oK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cK=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Uf=Xe("Check",cK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dK=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Or=Xe("ChevronDown",dK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uK=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Wn=Xe("ChevronLeft",uK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hK=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],js=Xe("ChevronRight",hK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mK=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],S0=Xe("ChevronUp",mK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],vs=Xe("CircleAlert",fK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],xK=Xe("CircleArrowDown",pK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],Eb=Xe("CircleArrowUp",gK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vK=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Vf=Xe("CircleCheckBig",vK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Jn=Xe("CircleCheck",yK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],md=Xe("CircleHelp",bK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]],ih=Xe("CirclePlay",jK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],NK=Xe("CircleUser",wK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _K=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],SK=Xe("CircleX",_K);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],L5=Xe("Circle",CK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],tn=Xe("Clock",kK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EK=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Va=Xe("Copy",EK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PK=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],fd=Xe("CreditCard",PK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TK=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],AK=Xe("Database",TK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MK=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],DK=Xe("DollarSign",MK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OK=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Zn=Xe("Download",OK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RK=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Js=Xe("ExternalLink",RK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FK=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],$1=Xe("EyeOff",FK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LK=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],gr=Xe("Eye",LK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IK=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],BK=Xe("FileCheck",IK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qK=[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]],Wf=Xe("FilePen",qK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zK=[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]],Yl=Xe("FileQuestion",zK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $K=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ns=Xe("FileText",$K);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UK=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],VK=Xe("File",UK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WK=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],HK=Xe("Filter",WK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KK=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Eo=Xe("FolderOpen",KK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GK=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],I5=Xe("FolderPlus",GK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YK=[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]],Xc=Xe("FolderTree",YK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QK=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Tl=Xe("Folder",QK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],B5=Xe("Globe",JK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XK=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],pd=Xe("GripVertical",XK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZK=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],eG=Xe("Heart",ZK);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tG=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],C0=Xe("History",tG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sG=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Zm=Xe("House",sG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nG=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],hi=Xe("Image",nG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rG=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],PE=Xe("Info",rG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aG=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],iG=Xe("Layers",aG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lG=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],oG=Xe("LayoutGrid",lG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cG=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],q5=Xe("Lightbulb",cG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dG=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],TE=Xe("Link",dG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uG=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],qu=Xe("Linkedin",uG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hG=[["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M16 18H3",key:"12xzn7"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]],AE=Xe("ListPlus",hG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mG=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],vt=Xe("LoaderCircle",mG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fG=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],pG=Xe("LockOpen",fG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xG=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],$N=Xe("Lock",xG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gG=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],z5=Xe("LogOut",gG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vG=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Ms=Xe("Mail",vG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yG=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Rr=Xe("MapPin",yG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bG=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],zl=Xe("Menu",bG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jG=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],ME=Xe("MessageCircle",jG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wG=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],NG=Xe("MessageSquare",wG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _G=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],Hf=Xe("MousePointer2",_G);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SG=[["path",{d:"m18 8 4 4-4 4",key:"1ak13k"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}]],Bi=Xe("MoveHorizontal",SG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CG=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],UN=Xe("Navigation",CG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kG=[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]],DE=Xe("Newspaper",kG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EG=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],PG=Xe("PanelLeft",EG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TG=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],Pb=Xe("PanelsTopLeft",TG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AG=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],As=Xe("Pencil",AG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MG=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],k0=Xe("Phone",MG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DG=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Pt=Xe("Plus",DG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OG=[["path",{d:"M18 7c0-5.333-8-5.333-8 0",key:"1prm2n"}],["path",{d:"M10 7v14",key:"18tmcs"}],["path",{d:"M6 21h12",key:"4dkmi1"}],["path",{d:"M6 13h10",key:"ybwr4a"}]],RG=Xe("PoundSterling",OG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FG=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],og=Xe("RefreshCw",FG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LG=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],OE=Xe("RotateCcw",LG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IG=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],un=Xe("Save",IG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BG=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Ys=Xe("Search",BG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qG=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],$5=Xe("Send",qG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zG=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Qa=Xe("Settings",zG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $G=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Tc=Xe("Share2",$G);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UG=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],RE=Xe("ShieldAlert",UG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VG=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],In=Xe("Shield",VG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WG=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],xd=Xe("ShoppingCart",WG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HG=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],Ql=Xe("SlidersHorizontal",HG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KG=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],aa=Xe("Sparkles",KG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GG=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],YG=Xe("SquareCheckBig",GG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QG=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],gi=Xe("SquarePen",QG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JG=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],FE=Xe("Square",JG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XG=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],U1=Xe("Star",XG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZG=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],eY=Xe("Table",ZG);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tY=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Wc=Xe("Tag",tY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],nY=Xe("Target",sY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rY=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],U5=Xe("ThumbsDown",rY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aY=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],V5=Xe("ThumbsUp",aY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iY=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],Rs=Xe("Ticket",iY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lY=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],os=Xe("Trash2",lY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oY=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],cY=Xe("TrendingUp",oY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dY=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],uY=Xe("TriangleAlert",dY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hY=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],Ln=Xe("Trophy",hY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mY=[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],Og=Xe("Type",mY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fY=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Gs=Xe("Upload",fY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pY=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],xY=Xe("UserMinus",pY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gY=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Zc=Xe("UserPlus",gY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vY=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Xs=Xe("User",vY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yY=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],ws=Xe("Users",yY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bY=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],jY=Xe("Video",bY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wY=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Ho=Xe("Wallet",wY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NY=[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]],_Y=Xe("Webhook",NY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SY=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],_s=Xe("X",SY);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CY=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],VN=Xe("Zap",CY);function LE(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function Fr(...t){return s=>{let n=!1;const r=t.map(a=>{const i=LE(a,s);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():LE(t[a],null)}}}}function xs(...t){return b.useCallback(Fr(...t),t)}var kY=Symbol.for("react.lazy"),Rg=P1[" use ".trim().toString()];function EY(t){return typeof t=="object"&&t!==null&&"then"in t}function W5(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===kY&&"_payload"in t&&EY(t._payload)}function V1(t){const s=PY(t),n=b.forwardRef((r,a)=>{let{children:i,...l}=r;W5(i)&&typeof Rg=="function"&&(i=Rg(i._payload));const o=b.Children.toArray(i),c=o.find(AY);if(c){const u=c.props.children,d=o.map(m=>m===c?b.Children.count(u)>1?b.Children.only(null):b.isValidElement(u)?u.props.children:null:m);return e.jsx(s,{...l,ref:a,children:b.isValidElement(u)?b.cloneElement(u,void 0,d):null})}return e.jsx(s,{...l,ref:a,children:i})});return n.displayName=`${t}.Slot`,n}var lh=V1("Slot");function PY(t){const s=b.forwardRef((n,r)=>{let{children:a,...i}=n;if(W5(a)&&typeof Rg=="function"&&(a=Rg(a._payload)),b.isValidElement(a)){const l=DY(a),o=MY(i,a.props);return a.type!==b.Fragment&&(o.ref=r?Fr(r,l):l),b.cloneElement(a,o)}return b.Children.count(a)>1?b.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var TY=Symbol("radix.slottable");function AY(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===TY}function MY(t,s){const n={...s};for(const r in s){const a=t[r],i=s[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...o)=>{const c=i(...o);return a(...o),c}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...t,...n}}function DY(t){var r,a;let s=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function H5(t){var s,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(s=0;s<a;s++)t[s]&&(n=H5(t[s]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function K5(){for(var t,s,n=0,r="",a=arguments.length;n<a;n++)(t=arguments[n])&&(s=H5(t))&&(r&&(r+=" "),r+=s);return r}const IE=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,BE=K5,oh=(t,s)=>n=>{var r;if((s==null?void 0:s.variants)==null)return BE(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:i}=s,l=Object.keys(a).map(u=>{const d=n==null?void 0:n[u],m=i==null?void 0:i[u];if(d===null)return null;const h=IE(d)||IE(m);return a[u][h]}),o=n&&Object.entries(n).reduce((u,d)=>{let[m,h]=d;return h===void 0||(u[m]=h),u},{}),c=s==null||(r=s.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:m,className:h,...p}=d;return Object.entries(p).every(g=>{let[v,y]=g;return Array.isArray(y)?y.includes({...i,...o}[v]):{...i,...o}[v]===y})?[...u,m,h]:u},[]);return BE(t,l,c,n==null?void 0:n.class,n==null?void 0:n.className)},Tb=768;function OY(){const[t,s]=b.useState(void 0);return b.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Tb-1}px)`),r=()=>{s(window.innerWidth<Tb)};return n.addEventListener("change",r),s(window.innerWidth<Tb),()=>n.removeEventListener("change",r)},[]),!!t}const RY=(t,s)=>{const n=new Array(t.length+s.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<s.length;r++)n[t.length+r]=s[r];return n},FY=(t,s)=>({classGroupId:t,validator:s}),G5=(t=new Map,s=null,n)=>({nextPart:t,validators:s,classGroupId:n}),Fg="-",qE=[],LY="arbitrary..",IY=t=>{const s=qY(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return BY(l);const o=l.split(Fg),c=o[0]===""&&o.length>1?1:0;return Y5(o,c,s)},getConflictingClassGroupIds:(l,o)=>{if(o){const c=r[l],u=n[l];return c?u?RY(u,c):c:u||qE}return n[l]||qE}}},Y5=(t,s,n)=>{if(t.length-s===0)return n.classGroupId;const a=t[s],i=n.nextPart.get(a);if(i){const u=Y5(t,s+1,i);if(u)return u}const l=n.validators;if(l===null)return;const o=s===0?t.join(Fg):t.slice(s).join(Fg),c=l.length;for(let u=0;u<c;u++){const d=l[u];if(d.validator(o))return d.classGroupId}},BY=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const s=t.slice(1,-1),n=s.indexOf(":"),r=s.slice(0,n);return r?LY+r:void 0})(),qY=t=>{const{theme:s,classGroups:n}=t;return zY(n,s)},zY=(t,s)=>{const n=G5();for(const r in t){const a=t[r];W1(a,n,r,s)}return n},W1=(t,s,n,r)=>{const a=t.length;for(let i=0;i<a;i++){const l=t[i];$Y(l,s,n,r)}},$Y=(t,s,n,r)=>{if(typeof t=="string"){UY(t,s,n);return}if(typeof t=="function"){VY(t,s,n,r);return}WY(t,s,n,r)},UY=(t,s,n)=>{const r=t===""?s:Q5(s,t);r.classGroupId=n},VY=(t,s,n,r)=>{if(HY(t)){W1(t(r),s,n,r);return}s.validators===null&&(s.validators=[]),s.validators.push(FY(n,t))},WY=(t,s,n,r)=>{const a=Object.entries(t),i=a.length;for(let l=0;l<i;l++){const[o,c]=a[l];W1(c,Q5(s,o),n,r)}},Q5=(t,s)=>{let n=t;const r=s.split(Fg),a=r.length;for(let i=0;i<a;i++){const l=r[i];let o=n.nextPart.get(l);o||(o=G5(),n.nextPart.set(l,o)),n=o}return n},HY=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,KY=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,n=Object.create(null),r=Object.create(null);const a=(i,l)=>{n[i]=l,s++,s>t&&(s=0,r=n,n=Object.create(null))};return{get(i){let l=n[i];if(l!==void 0)return l;if((l=r[i])!==void 0)return a(i,l),l},set(i,l){i in n?n[i]=l:a(i,l)}}},WN="!",zE=":",GY=[],$E=(t,s,n,r,a)=>({modifiers:t,hasImportantModifier:s,baseClassName:n,maybePostfixModifierPosition:r,isExternal:a}),YY=t=>{const{prefix:s,experimentalParseClassName:n}=t;let r=a=>{const i=[];let l=0,o=0,c=0,u;const d=a.length;for(let v=0;v<d;v++){const y=a[v];if(l===0&&o===0){if(y===zE){i.push(a.slice(c,v)),c=v+1;continue}if(y==="/"){u=v;continue}}y==="["?l++:y==="]"?l--:y==="("?o++:y===")"&&o--}const m=i.length===0?a:a.slice(c);let h=m,p=!1;m.endsWith(WN)?(h=m.slice(0,-1),p=!0):m.startsWith(WN)&&(h=m.slice(1),p=!0);const g=u&&u>c?u-c:void 0;return $E(i,p,h,g)};if(s){const a=s+zE,i=r;r=l=>l.startsWith(a)?i(l.slice(a.length)):$E(GY,!1,l,void 0,!0)}if(n){const a=r;r=i=>n({className:i,parseClassName:a})}return r},QY=t=>{const s=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{s.set(n,1e6+r)}),n=>{const r=[];let a=[];for(let i=0;i<n.length;i++){const l=n[i],o=l[0]==="[",c=s.has(l);o||c?(a.length>0&&(a.sort(),r.push(...a),a=[]),r.push(l)):a.push(l)}return a.length>0&&(a.sort(),r.push(...a)),r}},JY=t=>({cache:KY(t.cacheSize),parseClassName:YY(t),sortModifiers:QY(t),...IY(t)}),XY=/\s+/,ZY=(t,s)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:i}=s,l=[],o=t.trim().split(XY);let c="";for(let u=o.length-1;u>=0;u-=1){const d=o[u],{isExternal:m,modifiers:h,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:v}=n(d);if(m){c=d+(c.length>0?" "+c:c);continue}let y=!!v,j=r(y?g.substring(0,v):g);if(!j){if(!y){c=d+(c.length>0?" "+c:c);continue}if(j=r(g),!j){c=d+(c.length>0?" "+c:c);continue}y=!1}const w=h.length===0?"":h.length===1?h[0]:i(h).join(":"),N=p?w+WN:w,_=N+j;if(l.indexOf(_)>-1)continue;l.push(_);const T=a(j,y);for(let A=0;A<T.length;++A){const P=T[A];l.push(N+P)}c=d+(c.length>0?" "+c:c)}return c},eQ=(...t)=>{let s=0,n,r,a="";for(;s<t.length;)(n=t[s++])&&(r=J5(n))&&(a&&(a+=" "),a+=r);return a},J5=t=>{if(typeof t=="string")return t;let s,n="";for(let r=0;r<t.length;r++)t[r]&&(s=J5(t[r]))&&(n&&(n+=" "),n+=s);return n},tQ=(t,...s)=>{let n,r,a,i;const l=c=>{const u=s.reduce((d,m)=>m(d),t());return n=JY(u),r=n.cache.get,a=n.cache.set,i=o,o(c)},o=c=>{const u=r(c);if(u)return u;const d=ZY(c,n);return a(c,d),d};return i=l,(...c)=>i(eQ(...c))},sQ=[],zn=t=>{const s=n=>n[t]||sQ;return s.isThemeGetter=!0,s},X5=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Z5=/^\((?:(\w[\w-]*):)?(.+)\)$/i,nQ=/^\d+\/\d+$/,rQ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,aQ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,iQ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,lQ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,oQ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,eu=t=>nQ.test(t),ys=t=>!!t&&!Number.isNaN(Number(t)),wo=t=>!!t&&Number.isInteger(Number(t)),Ab=t=>t.endsWith("%")&&ys(t.slice(0,-1)),jl=t=>rQ.test(t),cQ=()=>!0,dQ=t=>aQ.test(t)&&!iQ.test(t),e3=()=>!1,uQ=t=>lQ.test(t),hQ=t=>oQ.test(t),mQ=t=>!It(t)&&!Bt(t),fQ=t=>ch(t,n3,e3),It=t=>X5.test(t),bc=t=>ch(t,r3,dQ),Mb=t=>ch(t,yQ,ys),UE=t=>ch(t,t3,e3),pQ=t=>ch(t,s3,hQ),Tx=t=>ch(t,a3,uQ),Bt=t=>Z5.test(t),pm=t=>dh(t,r3),xQ=t=>dh(t,bQ),VE=t=>dh(t,t3),gQ=t=>dh(t,n3),vQ=t=>dh(t,s3),Ax=t=>dh(t,a3,!0),ch=(t,s,n)=>{const r=X5.exec(t);return r?r[1]?s(r[1]):n(r[2]):!1},dh=(t,s,n=!1)=>{const r=Z5.exec(t);return r?r[1]?s(r[1]):n:!1},t3=t=>t==="position"||t==="percentage",s3=t=>t==="image"||t==="url",n3=t=>t==="length"||t==="size"||t==="bg-size",r3=t=>t==="length",yQ=t=>t==="number",bQ=t=>t==="family-name",a3=t=>t==="shadow",jQ=()=>{const t=zn("color"),s=zn("font"),n=zn("text"),r=zn("font-weight"),a=zn("tracking"),i=zn("leading"),l=zn("breakpoint"),o=zn("container"),c=zn("spacing"),u=zn("radius"),d=zn("shadow"),m=zn("inset-shadow"),h=zn("text-shadow"),p=zn("drop-shadow"),g=zn("blur"),v=zn("perspective"),y=zn("aspect"),j=zn("ease"),w=zn("animate"),N=()=>["auto","avoid","all","avoid-page","page","left","right","column"],_=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],T=()=>[..._(),Bt,It],A=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto","contain","none"],C=()=>[Bt,It,c],O=()=>[eu,"full","auto",...C()],M=()=>[wo,"none","subgrid",Bt,It],k=()=>["auto",{span:["full",wo,Bt,It]},wo,Bt,It],E=()=>[wo,"auto",Bt,It],R=()=>["auto","min","max","fr",Bt,It],F=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],z=()=>["start","end","center","stretch","center-safe","end-safe"],V=()=>["auto",...C()],U=()=>[eu,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...C()],B=()=>[t,Bt,It],$=()=>[..._(),VE,UE,{position:[Bt,It]}],L=()=>["no-repeat",{repeat:["","x","y","space","round"]}],I=()=>["auto","cover","contain",gQ,fQ,{size:[Bt,It]}],W=()=>[Ab,pm,bc],q=()=>["","none","full",u,Bt,It],Z=()=>["",ys,pm,bc],Q=()=>["solid","dashed","dotted","double"],Y=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K=()=>[ys,Ab,VE,UE],ae=()=>["","none",g,Bt,It],se=()=>["none",ys,Bt,It],de=()=>["none",ys,Bt,It],ue=()=>[ys,Bt,It],oe=()=>[eu,"full",...C()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[jl],breakpoint:[jl],color:[cQ],container:[jl],"drop-shadow":[jl],ease:["in","out","in-out"],font:[mQ],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[jl],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[jl],shadow:[jl],spacing:["px",ys],text:[jl],"text-shadow":[jl],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",eu,It,Bt,y]}],container:["container"],columns:[{columns:[ys,It,Bt,o]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:T()}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:O()}],"inset-x":[{"inset-x":O()}],"inset-y":[{"inset-y":O()}],start:[{start:O()}],end:[{end:O()}],top:[{top:O()}],right:[{right:O()}],bottom:[{bottom:O()}],left:[{left:O()}],visibility:["visible","invisible","collapse"],z:[{z:[wo,"auto",Bt,It]}],basis:[{basis:[eu,"full","auto",o,...C()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ys,eu,"auto","initial","none",It]}],grow:[{grow:["",ys,Bt,It]}],shrink:[{shrink:["",ys,Bt,It]}],order:[{order:[wo,"first","last","none",Bt,It]}],"grid-cols":[{"grid-cols":M()}],"col-start-end":[{col:k()}],"col-start":[{"col-start":E()}],"col-end":[{"col-end":E()}],"grid-rows":[{"grid-rows":M()}],"row-start-end":[{row:k()}],"row-start":[{"row-start":E()}],"row-end":[{"row-end":E()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":R()}],"auto-rows":[{"auto-rows":R()}],gap:[{gap:C()}],"gap-x":[{"gap-x":C()}],"gap-y":[{"gap-y":C()}],"justify-content":[{justify:[...F(),"normal"]}],"justify-items":[{"justify-items":[...z(),"normal"]}],"justify-self":[{"justify-self":["auto",...z()]}],"align-content":[{content:["normal",...F()]}],"align-items":[{items:[...z(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...z(),{baseline:["","last"]}]}],"place-content":[{"place-content":F()}],"place-items":[{"place-items":[...z(),"baseline"]}],"place-self":[{"place-self":["auto",...z()]}],p:[{p:C()}],px:[{px:C()}],py:[{py:C()}],ps:[{ps:C()}],pe:[{pe:C()}],pt:[{pt:C()}],pr:[{pr:C()}],pb:[{pb:C()}],pl:[{pl:C()}],m:[{m:V()}],mx:[{mx:V()}],my:[{my:V()}],ms:[{ms:V()}],me:[{me:V()}],mt:[{mt:V()}],mr:[{mr:V()}],mb:[{mb:V()}],ml:[{ml:V()}],"space-x":[{"space-x":C()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":C()}],"space-y-reverse":["space-y-reverse"],size:[{size:U()}],w:[{w:[o,"screen",...U()]}],"min-w":[{"min-w":[o,"screen","none",...U()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[l]},...U()]}],h:[{h:["screen","lh",...U()]}],"min-h":[{"min-h":["screen","lh","none",...U()]}],"max-h":[{"max-h":["screen","lh",...U()]}],"font-size":[{text:["base",n,pm,bc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Bt,Mb]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Ab,It]}],"font-family":[{font:[xQ,It,s]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,Bt,It]}],"line-clamp":[{"line-clamp":[ys,"none",Bt,Mb]}],leading:[{leading:[i,...C()]}],"list-image":[{"list-image":["none",Bt,It]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Bt,It]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:B()}],"text-color":[{text:B()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Q(),"wavy"]}],"text-decoration-thickness":[{decoration:[ys,"from-font","auto",Bt,bc]}],"text-decoration-color":[{decoration:B()}],"underline-offset":[{"underline-offset":[ys,"auto",Bt,It]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Bt,It]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Bt,It]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:$()}],"bg-repeat":[{bg:L()}],"bg-size":[{bg:I()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},wo,Bt,It],radial:["",Bt,It],conic:[wo,Bt,It]},vQ,pQ]}],"bg-color":[{bg:B()}],"gradient-from-pos":[{from:W()}],"gradient-via-pos":[{via:W()}],"gradient-to-pos":[{to:W()}],"gradient-from":[{from:B()}],"gradient-via":[{via:B()}],"gradient-to":[{to:B()}],rounded:[{rounded:q()}],"rounded-s":[{"rounded-s":q()}],"rounded-e":[{"rounded-e":q()}],"rounded-t":[{"rounded-t":q()}],"rounded-r":[{"rounded-r":q()}],"rounded-b":[{"rounded-b":q()}],"rounded-l":[{"rounded-l":q()}],"rounded-ss":[{"rounded-ss":q()}],"rounded-se":[{"rounded-se":q()}],"rounded-ee":[{"rounded-ee":q()}],"rounded-es":[{"rounded-es":q()}],"rounded-tl":[{"rounded-tl":q()}],"rounded-tr":[{"rounded-tr":q()}],"rounded-br":[{"rounded-br":q()}],"rounded-bl":[{"rounded-bl":q()}],"border-w":[{border:Z()}],"border-w-x":[{"border-x":Z()}],"border-w-y":[{"border-y":Z()}],"border-w-s":[{"border-s":Z()}],"border-w-e":[{"border-e":Z()}],"border-w-t":[{"border-t":Z()}],"border-w-r":[{"border-r":Z()}],"border-w-b":[{"border-b":Z()}],"border-w-l":[{"border-l":Z()}],"divide-x":[{"divide-x":Z()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Z()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Q(),"hidden","none"]}],"divide-style":[{divide:[...Q(),"hidden","none"]}],"border-color":[{border:B()}],"border-color-x":[{"border-x":B()}],"border-color-y":[{"border-y":B()}],"border-color-s":[{"border-s":B()}],"border-color-e":[{"border-e":B()}],"border-color-t":[{"border-t":B()}],"border-color-r":[{"border-r":B()}],"border-color-b":[{"border-b":B()}],"border-color-l":[{"border-l":B()}],"divide-color":[{divide:B()}],"outline-style":[{outline:[...Q(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ys,Bt,It]}],"outline-w":[{outline:["",ys,pm,bc]}],"outline-color":[{outline:B()}],shadow:[{shadow:["","none",d,Ax,Tx]}],"shadow-color":[{shadow:B()}],"inset-shadow":[{"inset-shadow":["none",m,Ax,Tx]}],"inset-shadow-color":[{"inset-shadow":B()}],"ring-w":[{ring:Z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:B()}],"ring-offset-w":[{"ring-offset":[ys,bc]}],"ring-offset-color":[{"ring-offset":B()}],"inset-ring-w":[{"inset-ring":Z()}],"inset-ring-color":[{"inset-ring":B()}],"text-shadow":[{"text-shadow":["none",h,Ax,Tx]}],"text-shadow-color":[{"text-shadow":B()}],opacity:[{opacity:[ys,Bt,It]}],"mix-blend":[{"mix-blend":[...Y(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Y()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ys]}],"mask-image-linear-from-pos":[{"mask-linear-from":K()}],"mask-image-linear-to-pos":[{"mask-linear-to":K()}],"mask-image-linear-from-color":[{"mask-linear-from":B()}],"mask-image-linear-to-color":[{"mask-linear-to":B()}],"mask-image-t-from-pos":[{"mask-t-from":K()}],"mask-image-t-to-pos":[{"mask-t-to":K()}],"mask-image-t-from-color":[{"mask-t-from":B()}],"mask-image-t-to-color":[{"mask-t-to":B()}],"mask-image-r-from-pos":[{"mask-r-from":K()}],"mask-image-r-to-pos":[{"mask-r-to":K()}],"mask-image-r-from-color":[{"mask-r-from":B()}],"mask-image-r-to-color":[{"mask-r-to":B()}],"mask-image-b-from-pos":[{"mask-b-from":K()}],"mask-image-b-to-pos":[{"mask-b-to":K()}],"mask-image-b-from-color":[{"mask-b-from":B()}],"mask-image-b-to-color":[{"mask-b-to":B()}],"mask-image-l-from-pos":[{"mask-l-from":K()}],"mask-image-l-to-pos":[{"mask-l-to":K()}],"mask-image-l-from-color":[{"mask-l-from":B()}],"mask-image-l-to-color":[{"mask-l-to":B()}],"mask-image-x-from-pos":[{"mask-x-from":K()}],"mask-image-x-to-pos":[{"mask-x-to":K()}],"mask-image-x-from-color":[{"mask-x-from":B()}],"mask-image-x-to-color":[{"mask-x-to":B()}],"mask-image-y-from-pos":[{"mask-y-from":K()}],"mask-image-y-to-pos":[{"mask-y-to":K()}],"mask-image-y-from-color":[{"mask-y-from":B()}],"mask-image-y-to-color":[{"mask-y-to":B()}],"mask-image-radial":[{"mask-radial":[Bt,It]}],"mask-image-radial-from-pos":[{"mask-radial-from":K()}],"mask-image-radial-to-pos":[{"mask-radial-to":K()}],"mask-image-radial-from-color":[{"mask-radial-from":B()}],"mask-image-radial-to-color":[{"mask-radial-to":B()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":_()}],"mask-image-conic-pos":[{"mask-conic":[ys]}],"mask-image-conic-from-pos":[{"mask-conic-from":K()}],"mask-image-conic-to-pos":[{"mask-conic-to":K()}],"mask-image-conic-from-color":[{"mask-conic-from":B()}],"mask-image-conic-to-color":[{"mask-conic-to":B()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:$()}],"mask-repeat":[{mask:L()}],"mask-size":[{mask:I()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Bt,It]}],filter:[{filter:["","none",Bt,It]}],blur:[{blur:ae()}],brightness:[{brightness:[ys,Bt,It]}],contrast:[{contrast:[ys,Bt,It]}],"drop-shadow":[{"drop-shadow":["","none",p,Ax,Tx]}],"drop-shadow-color":[{"drop-shadow":B()}],grayscale:[{grayscale:["",ys,Bt,It]}],"hue-rotate":[{"hue-rotate":[ys,Bt,It]}],invert:[{invert:["",ys,Bt,It]}],saturate:[{saturate:[ys,Bt,It]}],sepia:[{sepia:["",ys,Bt,It]}],"backdrop-filter":[{"backdrop-filter":["","none",Bt,It]}],"backdrop-blur":[{"backdrop-blur":ae()}],"backdrop-brightness":[{"backdrop-brightness":[ys,Bt,It]}],"backdrop-contrast":[{"backdrop-contrast":[ys,Bt,It]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ys,Bt,It]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ys,Bt,It]}],"backdrop-invert":[{"backdrop-invert":["",ys,Bt,It]}],"backdrop-opacity":[{"backdrop-opacity":[ys,Bt,It]}],"backdrop-saturate":[{"backdrop-saturate":[ys,Bt,It]}],"backdrop-sepia":[{"backdrop-sepia":["",ys,Bt,It]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":C()}],"border-spacing-x":[{"border-spacing-x":C()}],"border-spacing-y":[{"border-spacing-y":C()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Bt,It]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ys,"initial",Bt,It]}],ease:[{ease:["linear","initial",j,Bt,It]}],delay:[{delay:[ys,Bt,It]}],animate:[{animate:["none",w,Bt,It]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[v,Bt,It]}],"perspective-origin":[{"perspective-origin":T()}],rotate:[{rotate:se()}],"rotate-x":[{"rotate-x":se()}],"rotate-y":[{"rotate-y":se()}],"rotate-z":[{"rotate-z":se()}],scale:[{scale:de()}],"scale-x":[{"scale-x":de()}],"scale-y":[{"scale-y":de()}],"scale-z":[{"scale-z":de()}],"scale-3d":["scale-3d"],skew:[{skew:ue()}],"skew-x":[{"skew-x":ue()}],"skew-y":[{"skew-y":ue()}],transform:[{transform:[Bt,It,"","none","gpu","cpu"]}],"transform-origin":[{origin:T()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:oe()}],"translate-x":[{"translate-x":oe()}],"translate-y":[{"translate-y":oe()}],"translate-z":[{"translate-z":oe()}],"translate-none":["translate-none"],accent:[{accent:B()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:B()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Bt,It]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Bt,It]}],fill:[{fill:["none",...B()]}],"stroke-w":[{stroke:[ys,pm,bc,Mb]}],stroke:[{stroke:["none",...B()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},wQ=tQ(jQ);function tt(...t){return wQ(K5(t))}const ef=oh("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),J=b.forwardRef(({className:t,variant:s,size:n,asChild:r=!1,...a},i)=>{const l=r?lh:"button";return e.jsx(l,{className:tt(ef({variant:s,size:n,className:t})),ref:i,...a})});J.displayName="Button";const he=b.forwardRef(({className:t,type:s,...n},r)=>e.jsx("input",{type:s,className:tt("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));he.displayName="Input";var NQ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],_Q=NQ.reduce((t,s)=>{const n=V1(`Primitive.${s}`),r=b.forwardRef((a,i)=>{const{asChild:l,...o}=a,c=l?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(c,{...o,ref:i})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{}),SQ="Separator",WE="horizontal",CQ=["horizontal","vertical"],i3=b.forwardRef((t,s)=>{const{decorative:n,orientation:r=WE,...a}=t,i=kQ(r)?r:WE,o=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return e.jsx(_Q.div,{"data-orientation":i,...o,...a,ref:s})});i3.displayName=SQ;function kQ(t){return CQ.includes(t)}var l3=i3;const o3=b.forwardRef(({className:t,orientation:s="horizontal",decorative:n=!0,...r},a)=>e.jsx(l3,{ref:a,decorative:n,orientation:s,className:tt("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));o3.displayName=l3.displayName;function jt(t,s,{checkForDefaultPrevented:n=!0}={}){return function(a){if(t==null||t(a),n===!1||!a.defaultPrevented)return s==null?void 0:s(a)}}function EQ(t,s){const n=b.createContext(s),r=i=>{const{children:l,...o}=i,c=b.useMemo(()=>o,Object.values(o));return e.jsx(n.Provider,{value:c,children:l})};r.displayName=t+"Provider";function a(i){const l=b.useContext(n);if(l)return l;if(s!==void 0)return s;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,a]}function vr(t,s=[]){let n=[];function r(i,l){const o=b.createContext(l),c=n.length;n=[...n,l];const u=m=>{var j;const{scope:h,children:p,...g}=m,v=((j=h==null?void 0:h[t])==null?void 0:j[c])||o,y=b.useMemo(()=>g,Object.values(g));return e.jsx(v.Provider,{value:y,children:p})};u.displayName=i+"Provider";function d(m,h){var v;const p=((v=h==null?void 0:h[t])==null?void 0:v[c])||o,g=b.useContext(p);if(g)return g;if(l!==void 0)return l;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[u,d]}const a=()=>{const i=n.map(l=>b.createContext(l));return function(o){const c=(o==null?void 0:o[t])||i;return b.useMemo(()=>({[`__scope${t}`]:{...o,[t]:c}}),[o,c])}};return a.scopeName=t,[r,PQ(a,...s)]}function PQ(...t){const s=t[0];if(t.length===1)return s;const n=()=>{const r=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const l=r.reduce((o,{useScope:c,scopeName:u})=>{const m=c(i)[`__scope${u}`];return{...o,...m}},{});return b.useMemo(()=>({[`__scope${s.scopeName}`]:l}),[l])}};return n.scopeName=s.scopeName,n}var lr=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},TQ=P1[" useId ".trim().toString()]||(()=>{}),AQ=0;function Vn(t){const[s,n]=b.useState(TQ());return lr(()=>{n(r=>r??String(AQ++))},[t]),t||(s?`radix-${s}`:"")}var MQ=P1[" useInsertionEffect ".trim().toString()]||lr;function Ja({prop:t,defaultProp:s,onChange:n=()=>{},caller:r}){const[a,i,l]=DQ({defaultProp:s,onChange:n}),o=t!==void 0,c=o?t:a;{const d=b.useRef(t!==void 0);b.useEffect(()=>{const m=d.current;m!==o&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=o},[o,r])}const u=b.useCallback(d=>{var m;if(o){const h=OQ(d)?d(t):d;h!==t&&((m=l.current)==null||m.call(l,h))}else i(d)},[o,t,i,l]);return[c,u]}function DQ({defaultProp:t,onChange:s}){const[n,r]=b.useState(t),a=b.useRef(n),i=b.useRef(s);return MQ(()=>{i.current=s},[s]),b.useEffect(()=>{var l;a.current!==n&&((l=i.current)==null||l.call(i,n),a.current=n)},[n,a]),[n,r,i]}function OQ(t){return typeof t=="function"}function RQ(t){const s=FQ(t),n=b.forwardRef((r,a)=>{const{children:i,...l}=r,o=b.Children.toArray(i),c=o.find(IQ);if(c){const u=c.props.children,d=o.map(m=>m===c?b.Children.count(u)>1?b.Children.only(null):b.isValidElement(u)?u.props.children:null:m);return e.jsx(s,{...l,ref:a,children:b.isValidElement(u)?b.cloneElement(u,void 0,d):null})}return e.jsx(s,{...l,ref:a,children:i})});return n.displayName=`${t}.Slot`,n}function FQ(t){const s=b.forwardRef((n,r)=>{const{children:a,...i}=n;if(b.isValidElement(a)){const l=qQ(a),o=BQ(i,a.props);return a.type!==b.Fragment&&(o.ref=r?Fr(r,l):l),b.cloneElement(a,o)}return b.Children.count(a)>1?b.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var LQ=Symbol("radix.slottable");function IQ(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===LQ}function BQ(t,s){const n={...s};for(const r in s){const a=t[r],i=s[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...o)=>{const c=i(...o);return a(...o),c}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...t,...n}}function qQ(t){var r,a;let s=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var zQ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ut=zQ.reduce((t,s)=>{const n=RQ(`Primitive.${s}`),r=b.forwardRef((a,i)=>{const{asChild:l,...o}=a,c=l?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(c,{...o,ref:i})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{});function c3(t,s){t&&hd.flushSync(()=>t.dispatchEvent(s))}function el(t){const s=b.useRef(t);return b.useEffect(()=>{s.current=t}),b.useMemo(()=>(...n)=>{var r;return(r=s.current)==null?void 0:r.call(s,...n)},[])}function $Q(t,s=globalThis==null?void 0:globalThis.document){const n=el(t);b.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return s.addEventListener("keydown",r,{capture:!0}),()=>s.removeEventListener("keydown",r,{capture:!0})},[n,s])}var UQ="DismissableLayer",HN="dismissableLayer.update",VQ="dismissableLayer.pointerDownOutside",WQ="dismissableLayer.focusOutside",HE,d3=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),uh=b.forwardRef((t,s)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:l,onDismiss:o,...c}=t,u=b.useContext(d3),[d,m]=b.useState(null),h=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=b.useState({}),g=xs(s,P=>m(P)),v=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),j=v.indexOf(y),w=d?v.indexOf(d):-1,N=u.layersWithOutsidePointerEventsDisabled.size>0,_=w>=j,T=GQ(P=>{const C=P.target,O=[...u.branches].some(M=>M.contains(C));!_||O||(a==null||a(P),l==null||l(P),P.defaultPrevented||o==null||o())},h),A=YQ(P=>{const C=P.target;[...u.branches].some(M=>M.contains(C))||(i==null||i(P),l==null||l(P),P.defaultPrevented||o==null||o())},h);return $Q(P=>{w===u.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&o&&(P.preventDefault(),o()))},h),b.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(HE=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),KE(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=HE)}},[d,h,n,u]),b.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),KE())},[d,u]),b.useEffect(()=>{const P=()=>p({});return document.addEventListener(HN,P),()=>document.removeEventListener(HN,P)},[]),e.jsx(Ut.div,{...c,ref:g,style:{pointerEvents:N?_?"auto":"none":void 0,...t.style},onFocusCapture:jt(t.onFocusCapture,A.onFocusCapture),onBlurCapture:jt(t.onBlurCapture,A.onBlurCapture),onPointerDownCapture:jt(t.onPointerDownCapture,T.onPointerDownCapture)})});uh.displayName=UQ;var HQ="DismissableLayerBranch",KQ=b.forwardRef((t,s)=>{const n=b.useContext(d3),r=b.useRef(null),a=xs(s,r);return b.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),e.jsx(Ut.div,{...t,ref:a})});KQ.displayName=HQ;function GQ(t,s=globalThis==null?void 0:globalThis.document){const n=el(t),r=b.useRef(!1),a=b.useRef(()=>{});return b.useEffect(()=>{const i=o=>{if(o.target&&!r.current){let c=function(){u3(VQ,n,u,{discrete:!0})};const u={originalEvent:o};o.pointerType==="touch"?(s.removeEventListener("click",a.current),a.current=c,s.addEventListener("click",a.current,{once:!0})):c()}else s.removeEventListener("click",a.current);r.current=!1},l=window.setTimeout(()=>{s.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(l),s.removeEventListener("pointerdown",i),s.removeEventListener("click",a.current)}},[s,n]),{onPointerDownCapture:()=>r.current=!0}}function YQ(t,s=globalThis==null?void 0:globalThis.document){const n=el(t),r=b.useRef(!1);return b.useEffect(()=>{const a=i=>{i.target&&!r.current&&u3(WQ,n,{originalEvent:i},{discrete:!1})};return s.addEventListener("focusin",a),()=>s.removeEventListener("focusin",a)},[s,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function KE(){const t=new CustomEvent(HN);document.dispatchEvent(t)}function u3(t,s,n,{discrete:r}){const a=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});s&&a.addEventListener(t,s,{once:!0}),r?c3(a,i):a.dispatchEvent(i)}var Db="focusScope.autoFocusOnMount",Ob="focusScope.autoFocusOnUnmount",GE={bubbles:!1,cancelable:!0},QQ="FocusScope",Kf=b.forwardRef((t,s)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...l}=t,[o,c]=b.useState(null),u=el(a),d=el(i),m=b.useRef(null),h=xs(s,v=>c(v)),p=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(r){let v=function(N){if(p.paused||!o)return;const _=N.target;o.contains(_)?m.current=_:So(m.current,{select:!0})},y=function(N){if(p.paused||!o)return;const _=N.relatedTarget;_!==null&&(o.contains(_)||So(m.current,{select:!0}))},j=function(N){if(document.activeElement===document.body)for(const T of N)T.removedNodes.length>0&&So(o)};document.addEventListener("focusin",v),document.addEventListener("focusout",y);const w=new MutationObserver(j);return o&&w.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",y),w.disconnect()}}},[r,o,p.paused]),b.useEffect(()=>{if(o){QE.add(p);const v=document.activeElement;if(!o.contains(v)){const j=new CustomEvent(Db,GE);o.addEventListener(Db,u),o.dispatchEvent(j),j.defaultPrevented||(JQ(sJ(h3(o)),{select:!0}),document.activeElement===v&&So(o))}return()=>{o.removeEventListener(Db,u),setTimeout(()=>{const j=new CustomEvent(Ob,GE);o.addEventListener(Ob,d),o.dispatchEvent(j),j.defaultPrevented||So(v??document.body,{select:!0}),o.removeEventListener(Ob,d),QE.remove(p)},0)}}},[o,u,d,p]);const g=b.useCallback(v=>{if(!n&&!r||p.paused)return;const y=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,j=document.activeElement;if(y&&j){const w=v.currentTarget,[N,_]=XQ(w);N&&_?!v.shiftKey&&j===_?(v.preventDefault(),n&&So(N,{select:!0})):v.shiftKey&&j===N&&(v.preventDefault(),n&&So(_,{select:!0})):j===w&&v.preventDefault()}},[n,r,p.paused]);return e.jsx(Ut.div,{tabIndex:-1,...l,ref:h,onKeyDown:g})});Kf.displayName=QQ;function JQ(t,{select:s=!1}={}){const n=document.activeElement;for(const r of t)if(So(r,{select:s}),document.activeElement!==n)return}function XQ(t){const s=h3(t),n=YE(s,t),r=YE(s.reverse(),t);return[n,r]}function h3(t){const s=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)s.push(n.currentNode);return s}function YE(t,s){for(const n of t)if(!ZQ(n,{upTo:s}))return n}function ZQ(t,{upTo:s}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(s!==void 0&&t===s)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function eJ(t){return t instanceof HTMLInputElement&&"select"in t}function So(t,{select:s=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&eJ(t)&&s&&t.select()}}var QE=tJ();function tJ(){let t=[];return{add(s){const n=t[0];s!==n&&(n==null||n.pause()),t=JE(t,s),t.unshift(s)},remove(s){var n;t=JE(t,s),(n=t[0])==null||n.resume()}}}function JE(t,s){const n=[...t],r=n.indexOf(s);return r!==-1&&n.splice(r,1),n}function sJ(t){return t.filter(s=>s.tagName!=="A")}var nJ="Portal",hh=b.forwardRef((t,s)=>{var o;const{container:n,...r}=t,[a,i]=b.useState(!1);lr(()=>i(!0),[]);const l=n||a&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return l?o5.createPortal(e.jsx(Ut.div,{...r,ref:s}),l):null});hh.displayName=nJ;function rJ(t,s){return b.useReducer((n,r)=>s[n][r]??n,t)}var yr=t=>{const{present:s,children:n}=t,r=aJ(s),a=typeof n=="function"?n({present:r.isPresent}):b.Children.only(n),i=xs(r.ref,iJ(a));return typeof n=="function"||r.isPresent?b.cloneElement(a,{ref:i}):null};yr.displayName="Presence";function aJ(t){const[s,n]=b.useState(),r=b.useRef(null),a=b.useRef(t),i=b.useRef("none"),l=t?"mounted":"unmounted",[o,c]=rJ(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const u=Mx(r.current);i.current=o==="mounted"?u:"none"},[o]),lr(()=>{const u=r.current,d=a.current;if(d!==t){const h=i.current,p=Mx(u);t?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&h!==p?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,c]),lr(()=>{if(s){let u;const d=s.ownerDocument.defaultView??window,m=p=>{const v=Mx(r.current).includes(CSS.escape(p.animationName));if(p.target===s&&v&&(c("ANIMATION_END"),!a.current)){const y=s.style.animationFillMode;s.style.animationFillMode="forwards",u=d.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=y)})}},h=p=>{p.target===s&&(i.current=Mx(r.current))};return s.addEventListener("animationstart",h),s.addEventListener("animationcancel",m),s.addEventListener("animationend",m),()=>{d.clearTimeout(u),s.removeEventListener("animationstart",h),s.removeEventListener("animationcancel",m),s.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[s,c]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:b.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function Mx(t){return(t==null?void 0:t.animationName)||"none"}function iJ(t){var r,a;let s=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Rb=0;function E0(){b.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??XE()),document.body.insertAdjacentElement("beforeend",t[1]??XE()),Rb++,()=>{Rb===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),Rb--}},[])}function XE(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var qi=function(){return qi=Object.assign||function(s){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[i]=n[i])}return s},qi.apply(this,arguments)};function m3(t,s){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&s.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)s.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function lJ(t,s,n){if(n||arguments.length===2)for(var r=0,a=s.length,i;r<a;r++)(i||!(r in s))&&(i||(i=Array.prototype.slice.call(s,0,r)),i[r]=s[r]);return t.concat(i||Array.prototype.slice.call(s))}var cg="right-scroll-bar-position",dg="width-before-scroll-bar",oJ="with-scroll-bars-hidden",cJ="--removed-body-scroll-bar-size";function Fb(t,s){return typeof t=="function"?t(s):t&&(t.current=s),t}function dJ(t,s){var n=b.useState(function(){return{value:t,callback:s,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=s,n.facade}var uJ=typeof window<"u"?b.useLayoutEffect:b.useEffect,ZE=new WeakMap;function hJ(t,s){var n=dJ(null,function(r){return t.forEach(function(a){return Fb(a,r)})});return uJ(function(){var r=ZE.get(n);if(r){var a=new Set(r),i=new Set(t),l=n.current;a.forEach(function(o){i.has(o)||Fb(o,null)}),i.forEach(function(o){a.has(o)||Fb(o,l)})}ZE.set(n,t)},[t]),n}function mJ(t){return t}function fJ(t,s){s===void 0&&(s=mJ);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var l=s(i,r);return n.push(l),function(){n=n.filter(function(o){return o!==l})}},assignSyncMedium:function(i){for(r=!0;n.length;){var l=n;n=[],l.forEach(i)}n={push:function(o){return i(o)},filter:function(){return n}}},assignMedium:function(i){r=!0;var l=[];if(n.length){var o=n;n=[],o.forEach(i),l=n}var c=function(){var d=l;l=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){l.push(d),u()},filter:function(d){return l=l.filter(d),n}}}};return a}function pJ(t){t===void 0&&(t={});var s=fJ(null);return s.options=qi({async:!0,ssr:!1},t),s}var f3=function(t){var s=t.sideCar,n=m3(t,["sideCar"]);if(!s)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=s.read();if(!r)throw new Error("Sidecar medium not found");return b.createElement(r,qi({},n))};f3.isSideCarExport=!0;function xJ(t,s){return t.useMedium(s),f3}var p3=pJ(),Lb=function(){},P0=b.forwardRef(function(t,s){var n=b.useRef(null),r=b.useState({onScrollCapture:Lb,onWheelCapture:Lb,onTouchMoveCapture:Lb}),a=r[0],i=r[1],l=t.forwardProps,o=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,m=t.shards,h=t.sideCar,p=t.noRelative,g=t.noIsolation,v=t.inert,y=t.allowPinchZoom,j=t.as,w=j===void 0?"div":j,N=t.gapMode,_=m3(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),T=h,A=hJ([n,s]),P=qi(qi({},_),a);return b.createElement(b.Fragment,null,d&&b.createElement(T,{sideCar:p3,removeScrollBar:u,shards:m,noRelative:p,noIsolation:g,inert:v,setCallbacks:i,allowPinchZoom:!!y,lockRef:n,gapMode:N}),l?b.cloneElement(b.Children.only(o),qi(qi({},P),{ref:A})):b.createElement(w,qi({},P,{className:c,ref:A}),o))});P0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};P0.classNames={fullWidth:dg,zeroRight:cg};var gJ=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function vJ(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var s=gJ();return s&&t.setAttribute("nonce",s),t}function yJ(t,s){t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s))}function bJ(t){var s=document.head||document.getElementsByTagName("head")[0];s.appendChild(t)}var jJ=function(){var t=0,s=null;return{add:function(n){t==0&&(s=vJ())&&(yJ(s,n),bJ(s)),t++},remove:function(){t--,!t&&s&&(s.parentNode&&s.parentNode.removeChild(s),s=null)}}},wJ=function(){var t=jJ();return function(s,n){b.useEffect(function(){return t.add(s),function(){t.remove()}},[s&&n])}},x3=function(){var t=wJ(),s=function(n){var r=n.styles,a=n.dynamic;return t(r,a),null};return s},NJ={left:0,top:0,right:0,gap:0},Ib=function(t){return parseInt(t||"",10)||0},_J=function(t){var s=window.getComputedStyle(document.body),n=s[t==="padding"?"paddingLeft":"marginLeft"],r=s[t==="padding"?"paddingTop":"marginTop"],a=s[t==="padding"?"paddingRight":"marginRight"];return[Ib(n),Ib(r),Ib(a)]},SJ=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return NJ;var s=_J(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:s[0],top:s[1],right:s[2],gap:Math.max(0,r-n+s[2]-s[0])}},CJ=x3(),vu="data-scroll-locked",kJ=function(t,s,n,r){var a=t.left,i=t.top,l=t.right,o=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(oJ,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(vu,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([s&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(cg,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(dg,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(cg," .").concat(cg,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(dg," .").concat(dg,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(vu,`] {
    `).concat(cJ,": ").concat(o,`px;
  }
`)},eP=function(){var t=parseInt(document.body.getAttribute(vu)||"0",10);return isFinite(t)?t:0},EJ=function(){b.useEffect(function(){return document.body.setAttribute(vu,(eP()+1).toString()),function(){var t=eP()-1;t<=0?document.body.removeAttribute(vu):document.body.setAttribute(vu,t.toString())}},[])},PJ=function(t){var s=t.noRelative,n=t.noImportant,r=t.gapMode,a=r===void 0?"margin":r;EJ();var i=b.useMemo(function(){return SJ(a)},[a]);return b.createElement(CJ,{styles:kJ(i,!s,a,n?"":"!important")})},KN=!1;if(typeof window<"u")try{var Dx=Object.defineProperty({},"passive",{get:function(){return KN=!0,!0}});window.addEventListener("test",Dx,Dx),window.removeEventListener("test",Dx,Dx)}catch{KN=!1}var tu=KN?{passive:!1}:!1,TJ=function(t){return t.tagName==="TEXTAREA"},g3=function(t,s){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[s]!=="hidden"&&!(n.overflowY===n.overflowX&&!TJ(t)&&n[s]==="visible")},AJ=function(t){return g3(t,"overflowY")},MJ=function(t){return g3(t,"overflowX")},tP=function(t,s){var n=s.ownerDocument,r=s;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=v3(t,r);if(a){var i=y3(t,r),l=i[1],o=i[2];if(l>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},DJ=function(t){var s=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[s,n,r]},OJ=function(t){var s=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[s,n,r]},v3=function(t,s){return t==="v"?AJ(s):MJ(s)},y3=function(t,s){return t==="v"?DJ(s):OJ(s)},RJ=function(t,s){return t==="h"&&s==="rtl"?-1:1},FJ=function(t,s,n,r,a){var i=RJ(t,window.getComputedStyle(s).direction),l=i*r,o=n.target,c=s.contains(o),u=!1,d=l>0,m=0,h=0;do{if(!o)break;var p=y3(t,o),g=p[0],v=p[1],y=p[2],j=v-y-i*g;(g||j)&&v3(t,o)&&(m+=j,h+=g);var w=o.parentNode;o=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!c&&o!==document.body||c&&(s.contains(o)||s===o));return(d&&Math.abs(m)<1||!d&&Math.abs(h)<1)&&(u=!0),u},Ox=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},sP=function(t){return[t.deltaX,t.deltaY]},nP=function(t){return t&&"current"in t?t.current:t},LJ=function(t,s){return t[0]===s[0]&&t[1]===s[1]},IJ=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},BJ=0,su=[];function qJ(t){var s=b.useRef([]),n=b.useRef([0,0]),r=b.useRef(),a=b.useState(BJ++)[0],i=b.useState(x3)[0],l=b.useRef(t);b.useEffect(function(){l.current=t},[t]),b.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(a));var v=lJ([t.lockRef.current],(t.shards||[]).map(nP),!0).filter(Boolean);return v.forEach(function(y){return y.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),v.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(a))})}}},[t.inert,t.lockRef.current,t.shards]);var o=b.useCallback(function(v,y){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!l.current.allowPinchZoom;var j=Ox(v),w=n.current,N="deltaX"in v?v.deltaX:w[0]-j[0],_="deltaY"in v?v.deltaY:w[1]-j[1],T,A=v.target,P=Math.abs(N)>Math.abs(_)?"h":"v";if("touches"in v&&P==="h"&&A.type==="range")return!1;var C=tP(P,A);if(!C)return!0;if(C?T=P:(T=P==="v"?"h":"v",C=tP(P,A)),!C)return!1;if(!r.current&&"changedTouches"in v&&(N||_)&&(r.current=T),!T)return!0;var O=r.current||T;return FJ(O,y,v,O==="h"?N:_)},[]),c=b.useCallback(function(v){var y=v;if(!(!su.length||su[su.length-1]!==i)){var j="deltaY"in y?sP(y):Ox(y),w=s.current.filter(function(T){return T.name===y.type&&(T.target===y.target||y.target===T.shadowParent)&&LJ(T.delta,j)})[0];if(w&&w.should){y.cancelable&&y.preventDefault();return}if(!w){var N=(l.current.shards||[]).map(nP).filter(Boolean).filter(function(T){return T.contains(y.target)}),_=N.length>0?o(y,N[0]):!l.current.noIsolation;_&&y.cancelable&&y.preventDefault()}}},[]),u=b.useCallback(function(v,y,j,w){var N={name:v,delta:y,target:j,should:w,shadowParent:zJ(j)};s.current.push(N),setTimeout(function(){s.current=s.current.filter(function(_){return _!==N})},1)},[]),d=b.useCallback(function(v){n.current=Ox(v),r.current=void 0},[]),m=b.useCallback(function(v){u(v.type,sP(v),v.target,o(v,t.lockRef.current))},[]),h=b.useCallback(function(v){u(v.type,Ox(v),v.target,o(v,t.lockRef.current))},[]);b.useEffect(function(){return su.push(i),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:h}),document.addEventListener("wheel",c,tu),document.addEventListener("touchmove",c,tu),document.addEventListener("touchstart",d,tu),function(){su=su.filter(function(v){return v!==i}),document.removeEventListener("wheel",c,tu),document.removeEventListener("touchmove",c,tu),document.removeEventListener("touchstart",d,tu)}},[]);var p=t.removeScrollBar,g=t.inert;return b.createElement(b.Fragment,null,g?b.createElement(i,{styles:IJ(a)}):null,p?b.createElement(PJ,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function zJ(t){for(var s=null;t!==null;)t instanceof ShadowRoot&&(s=t.host,t=t.host),t=t.parentNode;return s}const $J=xJ(p3,qJ);var Gf=b.forwardRef(function(t,s){return b.createElement(P0,qi({},t,{ref:s,sideCar:$J}))});Gf.classNames=P0.classNames;var UJ=function(t){if(typeof document>"u")return null;var s=Array.isArray(t)?t[0]:t;return s.ownerDocument.body},nu=new WeakMap,Rx=new WeakMap,Fx={},Bb=0,b3=function(t){return t&&(t.host||b3(t.parentNode))},VJ=function(t,s){return s.map(function(n){if(t.contains(n))return n;var r=b3(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},WJ=function(t,s,n,r){var a=VJ(s,Array.isArray(t)?t:[t]);Fx[n]||(Fx[n]=new WeakMap);var i=Fx[n],l=[],o=new Set,c=new Set(a),u=function(m){!m||o.has(m)||(o.add(m),u(m.parentNode))};a.forEach(u);var d=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(h){if(o.has(h))d(h);else try{var p=h.getAttribute(r),g=p!==null&&p!=="false",v=(nu.get(h)||0)+1,y=(i.get(h)||0)+1;nu.set(h,v),i.set(h,y),l.push(h),v===1&&g&&Rx.set(h,!0),y===1&&h.setAttribute(n,"true"),g||h.setAttribute(r,"true")}catch(j){console.error("aria-hidden: cannot operate on ",h,j)}})};return d(s),o.clear(),Bb++,function(){l.forEach(function(m){var h=nu.get(m)-1,p=i.get(m)-1;nu.set(m,h),i.set(m,p),h||(Rx.has(m)||m.removeAttribute(r),Rx.delete(m)),p||m.removeAttribute(n)}),Bb--,Bb||(nu=new WeakMap,nu=new WeakMap,Rx=new WeakMap,Fx={})}},T0=function(t,s,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),a=UJ(t);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live], script"))),WJ(r,a,n,"aria-hidden")):function(){return null}};function HJ(t){const s=KJ(t),n=b.forwardRef((r,a)=>{const{children:i,...l}=r,o=b.Children.toArray(i),c=o.find(YJ);if(c){const u=c.props.children,d=o.map(m=>m===c?b.Children.count(u)>1?b.Children.only(null):b.isValidElement(u)?u.props.children:null:m);return e.jsx(s,{...l,ref:a,children:b.isValidElement(u)?b.cloneElement(u,void 0,d):null})}return e.jsx(s,{...l,ref:a,children:i})});return n.displayName=`${t}.Slot`,n}function KJ(t){const s=b.forwardRef((n,r)=>{const{children:a,...i}=n;if(b.isValidElement(a)){const l=JJ(a),o=QJ(i,a.props);return a.type!==b.Fragment&&(o.ref=r?Fr(r,l):l),b.cloneElement(a,o)}return b.Children.count(a)>1?b.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var GJ=Symbol("radix.slottable");function YJ(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===GJ}function QJ(t,s){const n={...s};for(const r in s){const a=t[r],i=s[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...o)=>{const c=i(...o);return a(...o),c}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...t,...n}}function JJ(t){var r,a;let s=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var A0="Dialog",[j3,w3]=vr(A0),[XJ,Si]=j3(A0),N3=t=>{const{__scopeDialog:s,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:l=!0}=t,o=b.useRef(null),c=b.useRef(null),[u,d]=Ja({prop:r,defaultProp:a??!1,onChange:i,caller:A0});return e.jsx(XJ,{scope:s,triggerRef:o,contentRef:c,contentId:Vn(),titleId:Vn(),descriptionId:Vn(),open:u,onOpenChange:d,onOpenToggle:b.useCallback(()=>d(m=>!m),[d]),modal:l,children:n})};N3.displayName=A0;var _3="DialogTrigger",S3=b.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,a=Si(_3,n),i=xs(s,a.triggerRef);return e.jsx(Ut.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":G1(a.open),...r,ref:i,onClick:jt(t.onClick,a.onOpenToggle)})});S3.displayName=_3;var H1="DialogPortal",[ZJ,C3]=j3(H1,{forceMount:void 0}),k3=t=>{const{__scopeDialog:s,forceMount:n,children:r,container:a}=t,i=Si(H1,s);return e.jsx(ZJ,{scope:s,forceMount:n,children:b.Children.map(r,l=>e.jsx(yr,{present:n||i.open,children:e.jsx(hh,{asChild:!0,container:a,children:l})}))})};k3.displayName=H1;var Lg="DialogOverlay",E3=b.forwardRef((t,s)=>{const n=C3(Lg,t.__scopeDialog),{forceMount:r=n.forceMount,...a}=t,i=Si(Lg,t.__scopeDialog);return i.modal?e.jsx(yr,{present:r||i.open,children:e.jsx(tX,{...a,ref:s})}):null});E3.displayName=Lg;var eX=HJ("DialogOverlay.RemoveScroll"),tX=b.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,a=Si(Lg,n);return e.jsx(Gf,{as:eX,allowPinchZoom:!0,shards:[a.contentRef],children:e.jsx(Ut.div,{"data-state":G1(a.open),...r,ref:s,style:{pointerEvents:"auto",...r.style}})})}),ed="DialogContent",P3=b.forwardRef((t,s)=>{const n=C3(ed,t.__scopeDialog),{forceMount:r=n.forceMount,...a}=t,i=Si(ed,t.__scopeDialog);return e.jsx(yr,{present:r||i.open,children:i.modal?e.jsx(sX,{...a,ref:s}):e.jsx(nX,{...a,ref:s})})});P3.displayName=ed;var sX=b.forwardRef((t,s)=>{const n=Si(ed,t.__scopeDialog),r=b.useRef(null),a=xs(s,n.contentRef,r);return b.useEffect(()=>{const i=r.current;if(i)return T0(i)},[]),e.jsx(T3,{...t,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:jt(t.onCloseAutoFocus,i=>{var l;i.preventDefault(),(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:jt(t.onPointerDownOutside,i=>{const l=i.detail.originalEvent,o=l.button===0&&l.ctrlKey===!0;(l.button===2||o)&&i.preventDefault()}),onFocusOutside:jt(t.onFocusOutside,i=>i.preventDefault())})}),nX=b.forwardRef((t,s)=>{const n=Si(ed,t.__scopeDialog),r=b.useRef(!1),a=b.useRef(!1);return e.jsx(T3,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var l,o;(l=t.onCloseAutoFocus)==null||l.call(t,i),i.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(l))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),T3=b.forwardRef((t,s)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...l}=t,o=Si(ed,n),c=b.useRef(null),u=xs(s,c);return E0(),e.jsxs(e.Fragment,{children:[e.jsx(Kf,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:e.jsx(uh,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":G1(o.open),...l,ref:u,onDismiss:()=>o.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(aX,{titleId:o.titleId}),e.jsx(lX,{contentRef:c,descriptionId:o.descriptionId})]})]})}),K1="DialogTitle",A3=b.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,a=Si(K1,n);return e.jsx(Ut.h2,{id:a.titleId,...r,ref:s})});A3.displayName=K1;var M3="DialogDescription",D3=b.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,a=Si(M3,n);return e.jsx(Ut.p,{id:a.descriptionId,...r,ref:s})});D3.displayName=M3;var O3="DialogClose",R3=b.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,a=Si(O3,n);return e.jsx(Ut.button,{type:"button",...r,ref:s,onClick:jt(t.onClick,()=>a.onOpenChange(!1))})});R3.displayName=O3;function G1(t){return t?"open":"closed"}var F3="DialogTitleWarning",[rX,L3]=EQ(F3,{contentName:ed,titleName:K1,docsSlug:"dialog"}),aX=({titleId:t})=>{const s=L3(F3),n=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return b.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},iX="DialogDescriptionWarning",lX=({contentRef:t,descriptionId:s})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${L3(iX).contentName}}.`;return b.useEffect(()=>{var i;const a=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");s&&a&&(document.getElementById(s)||console.warn(r))},[r,t,s]),null},M0=N3,oX=S3,D0=k3,mh=E3,fh=P3,Yf=A3,Qf=D3,O0=R3;const cX=M0,dX=D0,I3=b.forwardRef(({className:t,...s},n)=>e.jsx(mh,{className:tt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:n}));I3.displayName=mh.displayName;const uX=oh("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),B3=b.forwardRef(({side:t="right",className:s,children:n,...r},a)=>e.jsxs(dX,{children:[e.jsx(I3,{}),e.jsxs(fh,{ref:a,className:tt(uX({side:t}),s),...r,children:[e.jsxs(O0,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(_s,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]}),n]})]}));B3.displayName=fh.displayName;const hX=b.forwardRef(({className:t,...s},n)=>e.jsx(Yf,{ref:n,className:tt("text-lg font-semibold text-foreground",t),...s}));hX.displayName=Yf.displayName;const mX=b.forwardRef(({className:t,...s},n)=>e.jsx(Qf,{ref:n,className:tt("text-sm text-muted-foreground",t),...s}));mX.displayName=Qf.displayName;function rP({className:t,...s}){return e.jsx("div",{className:tt("animate-pulse rounded-md bg-primary/10",t),...s})}const fX=["top","right","bottom","left"],Ko=Math.min,va=Math.max,Ig=Math.round,Lx=Math.floor,Ji=t=>({x:t,y:t}),pX={left:"right",right:"left",bottom:"top",top:"bottom"},xX={start:"end",end:"start"};function GN(t,s,n){return va(t,Ko(s,n))}function $l(t,s){return typeof t=="function"?t(s):t}function Ul(t){return t.split("-")[0]}function ph(t){return t.split("-")[1]}function Y1(t){return t==="x"?"y":"x"}function Q1(t){return t==="y"?"height":"width"}const gX=new Set(["top","bottom"]);function Ui(t){return gX.has(Ul(t))?"y":"x"}function J1(t){return Y1(Ui(t))}function vX(t,s,n){n===void 0&&(n=!1);const r=ph(t),a=J1(t),i=Q1(a);let l=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return s.reference[i]>s.floating[i]&&(l=Bg(l)),[l,Bg(l)]}function yX(t){const s=Bg(t);return[YN(t),s,YN(s)]}function YN(t){return t.replace(/start|end/g,s=>xX[s])}const aP=["left","right"],iP=["right","left"],bX=["top","bottom"],jX=["bottom","top"];function wX(t,s,n){switch(t){case"top":case"bottom":return n?s?iP:aP:s?aP:iP;case"left":case"right":return s?bX:jX;default:return[]}}function NX(t,s,n,r){const a=ph(t);let i=wX(Ul(t),n==="start",r);return a&&(i=i.map(l=>l+"-"+a),s&&(i=i.concat(i.map(YN)))),i}function Bg(t){return t.replace(/left|right|bottom|top/g,s=>pX[s])}function _X(t){return{top:0,right:0,bottom:0,left:0,...t}}function q3(t){return typeof t!="number"?_X(t):{top:t,right:t,bottom:t,left:t}}function qg(t){const{x:s,y:n,width:r,height:a}=t;return{width:r,height:a,top:n,left:s,right:s+r,bottom:n+a,x:s,y:n}}function lP(t,s,n){let{reference:r,floating:a}=t;const i=Ui(s),l=J1(s),o=Q1(l),c=Ul(s),u=i==="y",d=r.x+r.width/2-a.width/2,m=r.y+r.height/2-a.height/2,h=r[o]/2-a[o]/2;let p;switch(c){case"top":p={x:d,y:r.y-a.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:m};break;case"left":p={x:r.x-a.width,y:m};break;default:p={x:r.x,y:r.y}}switch(ph(s)){case"start":p[l]-=h*(n&&u?-1:1);break;case"end":p[l]+=h*(n&&u?-1:1);break}return p}const SX=async(t,s,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:l}=n,o=i.filter(Boolean),c=await(l.isRTL==null?void 0:l.isRTL(s));let u=await l.getElementRects({reference:t,floating:s,strategy:a}),{x:d,y:m}=lP(u,r,c),h=r,p={},g=0;for(let v=0;v<o.length;v++){const{name:y,fn:j}=o[v],{x:w,y:N,data:_,reset:T}=await j({x:d,y:m,initialPlacement:r,placement:h,strategy:a,middlewareData:p,rects:u,platform:l,elements:{reference:t,floating:s}});d=w??d,m=N??m,p={...p,[y]:{...p[y],..._}},T&&g<=50&&(g++,typeof T=="object"&&(T.placement&&(h=T.placement),T.rects&&(u=T.rects===!0?await l.getElementRects({reference:t,floating:s,strategy:a}):T.rects),{x:d,y:m}=lP(u,h,c)),v=-1)}return{x:d,y:m,placement:h,strategy:a,middlewareData:p}};async function tf(t,s){var n;s===void 0&&(s={});const{x:r,y:a,platform:i,rects:l,elements:o,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:m="floating",altBoundary:h=!1,padding:p=0}=$l(s,t),g=q3(p),y=o[h?m==="floating"?"reference":"floating":m],j=qg(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(y)))==null||n?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:u,rootBoundary:d,strategy:c})),w=m==="floating"?{x:r,y:a,width:l.floating.width,height:l.floating.height}:l.reference,N=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),_=await(i.isElement==null?void 0:i.isElement(N))?await(i.getScale==null?void 0:i.getScale(N))||{x:1,y:1}:{x:1,y:1},T=qg(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:w,offsetParent:N,strategy:c}):w);return{top:(j.top-T.top+g.top)/_.y,bottom:(T.bottom-j.bottom+g.bottom)/_.y,left:(j.left-T.left+g.left)/_.x,right:(T.right-j.right+g.right)/_.x}}const CX=t=>({name:"arrow",options:t,async fn(s){const{x:n,y:r,placement:a,rects:i,platform:l,elements:o,middlewareData:c}=s,{element:u,padding:d=0}=$l(t,s)||{};if(u==null)return{};const m=q3(d),h={x:n,y:r},p=J1(a),g=Q1(p),v=await l.getDimensions(u),y=p==="y",j=y?"top":"left",w=y?"bottom":"right",N=y?"clientHeight":"clientWidth",_=i.reference[g]+i.reference[p]-h[p]-i.floating[g],T=h[p]-i.reference[p],A=await(l.getOffsetParent==null?void 0:l.getOffsetParent(u));let P=A?A[N]:0;(!P||!await(l.isElement==null?void 0:l.isElement(A)))&&(P=o.floating[N]||i.floating[g]);const C=_/2-T/2,O=P/2-v[g]/2-1,M=Ko(m[j],O),k=Ko(m[w],O),E=M,R=P-v[g]-k,F=P/2-v[g]/2+C,z=GN(E,F,R),V=!c.arrow&&ph(a)!=null&&F!==z&&i.reference[g]/2-(F<E?M:k)-v[g]/2<0,U=V?F<E?F-E:F-R:0;return{[p]:h[p]+U,data:{[p]:z,centerOffset:F-z-U,...V&&{alignmentOffset:U}},reset:V}}}),kX=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(s){var n,r;const{placement:a,middlewareData:i,rects:l,initialPlacement:o,platform:c,elements:u}=s,{mainAxis:d=!0,crossAxis:m=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0,...y}=$l(t,s);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const j=Ul(a),w=Ui(o),N=Ul(o)===o,_=await(c.isRTL==null?void 0:c.isRTL(u.floating)),T=h||(N||!v?[Bg(o)]:yX(o)),A=g!=="none";!h&&A&&T.push(...NX(o,v,g,_));const P=[o,...T],C=await tf(s,y),O=[];let M=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&O.push(C[j]),m){const F=vX(a,l,_);O.push(C[F[0]],C[F[1]])}if(M=[...M,{placement:a,overflows:O}],!O.every(F=>F<=0)){var k,E;const F=(((k=i.flip)==null?void 0:k.index)||0)+1,z=P[F];if(z&&(!(m==="alignment"?w!==Ui(z):!1)||M.every(B=>Ui(B.placement)===w?B.overflows[0]>0:!0)))return{data:{index:F,overflows:M},reset:{placement:z}};let V=(E=M.filter(U=>U.overflows[0]<=0).sort((U,B)=>U.overflows[1]-B.overflows[1])[0])==null?void 0:E.placement;if(!V)switch(p){case"bestFit":{var R;const U=(R=M.filter(B=>{if(A){const $=Ui(B.placement);return $===w||$==="y"}return!0}).map(B=>[B.placement,B.overflows.filter($=>$>0).reduce(($,L)=>$+L,0)]).sort((B,$)=>B[1]-$[1])[0])==null?void 0:R[0];U&&(V=U);break}case"initialPlacement":V=o;break}if(a!==V)return{reset:{placement:V}}}return{}}}};function oP(t,s){return{top:t.top-s.height,right:t.right-s.width,bottom:t.bottom-s.height,left:t.left-s.width}}function cP(t){return fX.some(s=>t[s]>=0)}const EX=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(s){const{rects:n}=s,{strategy:r="referenceHidden",...a}=$l(t,s);switch(r){case"referenceHidden":{const i=await tf(s,{...a,elementContext:"reference"}),l=oP(i,n.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:cP(l)}}}case"escaped":{const i=await tf(s,{...a,altBoundary:!0}),l=oP(i,n.floating);return{data:{escapedOffsets:l,escaped:cP(l)}}}default:return{}}}}},z3=new Set(["left","top"]);async function PX(t,s){const{placement:n,platform:r,elements:a}=t,i=await(r.isRTL==null?void 0:r.isRTL(a.floating)),l=Ul(n),o=ph(n),c=Ui(n)==="y",u=z3.has(l)?-1:1,d=i&&c?-1:1,m=$l(s,t);let{mainAxis:h,crossAxis:p,alignmentAxis:g}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return o&&typeof g=="number"&&(p=o==="end"?g*-1:g),c?{x:p*d,y:h*u}:{x:h*u,y:p*d}}const TX=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(s){var n,r;const{x:a,y:i,placement:l,middlewareData:o}=s,c=await PX(s,t);return l===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:l}}}}},AX=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(s){const{x:n,y:r,placement:a}=s,{mainAxis:i=!0,crossAxis:l=!1,limiter:o={fn:y=>{let{x:j,y:w}=y;return{x:j,y:w}}},...c}=$l(t,s),u={x:n,y:r},d=await tf(s,c),m=Ui(Ul(a)),h=Y1(m);let p=u[h],g=u[m];if(i){const y=h==="y"?"top":"left",j=h==="y"?"bottom":"right",w=p+d[y],N=p-d[j];p=GN(w,p,N)}if(l){const y=m==="y"?"top":"left",j=m==="y"?"bottom":"right",w=g+d[y],N=g-d[j];g=GN(w,g,N)}const v=o.fn({...s,[h]:p,[m]:g});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[h]:i,[m]:l}}}}}},MX=function(t){return t===void 0&&(t={}),{options:t,fn(s){const{x:n,y:r,placement:a,rects:i,middlewareData:l}=s,{offset:o=0,mainAxis:c=!0,crossAxis:u=!0}=$l(t,s),d={x:n,y:r},m=Ui(a),h=Y1(m);let p=d[h],g=d[m];const v=$l(o,s),y=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const N=h==="y"?"height":"width",_=i.reference[h]-i.floating[N]+y.mainAxis,T=i.reference[h]+i.reference[N]-y.mainAxis;p<_?p=_:p>T&&(p=T)}if(u){var j,w;const N=h==="y"?"width":"height",_=z3.has(Ul(a)),T=i.reference[m]-i.floating[N]+(_&&((j=l.offset)==null?void 0:j[m])||0)+(_?0:y.crossAxis),A=i.reference[m]+i.reference[N]+(_?0:((w=l.offset)==null?void 0:w[m])||0)-(_?y.crossAxis:0);g<T?g=T:g>A&&(g=A)}return{[h]:p,[m]:g}}}},DX=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(s){var n,r;const{placement:a,rects:i,platform:l,elements:o}=s,{apply:c=()=>{},...u}=$l(t,s),d=await tf(s,u),m=Ul(a),h=ph(a),p=Ui(a)==="y",{width:g,height:v}=i.floating;let y,j;m==="top"||m==="bottom"?(y=m,j=h===(await(l.isRTL==null?void 0:l.isRTL(o.floating))?"start":"end")?"left":"right"):(j=m,y=h==="end"?"top":"bottom");const w=v-d.top-d.bottom,N=g-d.left-d.right,_=Ko(v-d[y],w),T=Ko(g-d[j],N),A=!s.middlewareData.shift;let P=_,C=T;if((n=s.middlewareData.shift)!=null&&n.enabled.x&&(C=N),(r=s.middlewareData.shift)!=null&&r.enabled.y&&(P=w),A&&!h){const M=va(d.left,0),k=va(d.right,0),E=va(d.top,0),R=va(d.bottom,0);p?C=g-2*(M!==0||k!==0?M+k:va(d.left,d.right)):P=v-2*(E!==0||R!==0?E+R:va(d.top,d.bottom))}await c({...s,availableWidth:C,availableHeight:P});const O=await l.getDimensions(o.floating);return g!==O.width||v!==O.height?{reset:{rects:!0}}:{}}}};function R0(){return typeof window<"u"}function xh(t){return $3(t)?(t.nodeName||"").toLowerCase():"#document"}function _a(t){var s;return(t==null||(s=t.ownerDocument)==null?void 0:s.defaultView)||window}function ol(t){var s;return(s=($3(t)?t.ownerDocument:t.document)||window.document)==null?void 0:s.documentElement}function $3(t){return R0()?t instanceof Node||t instanceof _a(t).Node:!1}function vi(t){return R0()?t instanceof Element||t instanceof _a(t).Element:!1}function tl(t){return R0()?t instanceof HTMLElement||t instanceof _a(t).HTMLElement:!1}function dP(t){return!R0()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof _a(t).ShadowRoot}const OX=new Set(["inline","contents"]);function Jf(t){const{overflow:s,overflowX:n,overflowY:r,display:a}=yi(t);return/auto|scroll|overlay|hidden|clip/.test(s+r+n)&&!OX.has(a)}const RX=new Set(["table","td","th"]);function FX(t){return RX.has(xh(t))}const LX=[":popover-open",":modal"];function F0(t){return LX.some(s=>{try{return t.matches(s)}catch{return!1}})}const IX=["transform","translate","scale","rotate","perspective"],BX=["transform","translate","scale","rotate","perspective","filter"],qX=["paint","layout","strict","content"];function X1(t){const s=Z1(),n=vi(t)?yi(t):t;return IX.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!s&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!s&&(n.filter?n.filter!=="none":!1)||BX.some(r=>(n.willChange||"").includes(r))||qX.some(r=>(n.contain||"").includes(r))}function zX(t){let s=Go(t);for(;tl(s)&&!zu(s);){if(X1(s))return s;if(F0(s))return null;s=Go(s)}return null}function Z1(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const $X=new Set(["html","body","#document"]);function zu(t){return $X.has(xh(t))}function yi(t){return _a(t).getComputedStyle(t)}function L0(t){return vi(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Go(t){if(xh(t)==="html")return t;const s=t.assignedSlot||t.parentNode||dP(t)&&t.host||ol(t);return dP(s)?s.host:s}function U3(t){const s=Go(t);return zu(s)?t.ownerDocument?t.ownerDocument.body:t.body:tl(s)&&Jf(s)?s:U3(s)}function sf(t,s,n){var r;s===void 0&&(s=[]),n===void 0&&(n=!0);const a=U3(t),i=a===((r=t.ownerDocument)==null?void 0:r.body),l=_a(a);if(i){const o=QN(l);return s.concat(l,l.visualViewport||[],Jf(a)?a:[],o&&n?sf(o):[])}return s.concat(a,sf(a,[],n))}function QN(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function V3(t){const s=yi(t);let n=parseFloat(s.width)||0,r=parseFloat(s.height)||0;const a=tl(t),i=a?t.offsetWidth:n,l=a?t.offsetHeight:r,o=Ig(n)!==i||Ig(r)!==l;return o&&(n=i,r=l),{width:n,height:r,$:o}}function e2(t){return vi(t)?t:t.contextElement}function yu(t){const s=e2(t);if(!tl(s))return Ji(1);const n=s.getBoundingClientRect(),{width:r,height:a,$:i}=V3(s);let l=(i?Ig(n.width):n.width)/r,o=(i?Ig(n.height):n.height)/a;return(!l||!Number.isFinite(l))&&(l=1),(!o||!Number.isFinite(o))&&(o=1),{x:l,y:o}}const UX=Ji(0);function W3(t){const s=_a(t);return!Z1()||!s.visualViewport?UX:{x:s.visualViewport.offsetLeft,y:s.visualViewport.offsetTop}}function VX(t,s,n){return s===void 0&&(s=!1),!n||s&&n!==_a(t)?!1:s}function td(t,s,n,r){s===void 0&&(s=!1),n===void 0&&(n=!1);const a=t.getBoundingClientRect(),i=e2(t);let l=Ji(1);s&&(r?vi(r)&&(l=yu(r)):l=yu(t));const o=VX(i,n,r)?W3(i):Ji(0);let c=(a.left+o.x)/l.x,u=(a.top+o.y)/l.y,d=a.width/l.x,m=a.height/l.y;if(i){const h=_a(i),p=r&&vi(r)?_a(r):r;let g=h,v=QN(g);for(;v&&r&&p!==g;){const y=yu(v),j=v.getBoundingClientRect(),w=yi(v),N=j.left+(v.clientLeft+parseFloat(w.paddingLeft))*y.x,_=j.top+(v.clientTop+parseFloat(w.paddingTop))*y.y;c*=y.x,u*=y.y,d*=y.x,m*=y.y,c+=N,u+=_,g=_a(v),v=QN(g)}}return qg({width:d,height:m,x:c,y:u})}function I0(t,s){const n=L0(t).scrollLeft;return s?s.left+n:td(ol(t)).left+n}function H3(t,s){const n=t.getBoundingClientRect(),r=n.left+s.scrollLeft-I0(t,n),a=n.top+s.scrollTop;return{x:r,y:a}}function WX(t){let{elements:s,rect:n,offsetParent:r,strategy:a}=t;const i=a==="fixed",l=ol(r),o=s?F0(s.floating):!1;if(r===l||o&&i)return n;let c={scrollLeft:0,scrollTop:0},u=Ji(1);const d=Ji(0),m=tl(r);if((m||!m&&!i)&&((xh(r)!=="body"||Jf(l))&&(c=L0(r)),tl(r))){const p=td(r);u=yu(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}const h=l&&!m&&!i?H3(l,c):Ji(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+h.x,y:n.y*u.y-c.scrollTop*u.y+d.y+h.y}}function HX(t){return Array.from(t.getClientRects())}function KX(t){const s=ol(t),n=L0(t),r=t.ownerDocument.body,a=va(s.scrollWidth,s.clientWidth,r.scrollWidth,r.clientWidth),i=va(s.scrollHeight,s.clientHeight,r.scrollHeight,r.clientHeight);let l=-n.scrollLeft+I0(t);const o=-n.scrollTop;return yi(r).direction==="rtl"&&(l+=va(s.clientWidth,r.clientWidth)-a),{width:a,height:i,x:l,y:o}}const uP=25;function GX(t,s){const n=_a(t),r=ol(t),a=n.visualViewport;let i=r.clientWidth,l=r.clientHeight,o=0,c=0;if(a){i=a.width,l=a.height;const d=Z1();(!d||d&&s==="fixed")&&(o=a.offsetLeft,c=a.offsetTop)}const u=I0(r);if(u<=0){const d=r.ownerDocument,m=d.body,h=getComputedStyle(m),p=d.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,g=Math.abs(r.clientWidth-m.clientWidth-p);g<=uP&&(i-=g)}else u<=uP&&(i+=u);return{width:i,height:l,x:o,y:c}}const YX=new Set(["absolute","fixed"]);function QX(t,s){const n=td(t,!0,s==="fixed"),r=n.top+t.clientTop,a=n.left+t.clientLeft,i=tl(t)?yu(t):Ji(1),l=t.clientWidth*i.x,o=t.clientHeight*i.y,c=a*i.x,u=r*i.y;return{width:l,height:o,x:c,y:u}}function hP(t,s,n){let r;if(s==="viewport")r=GX(t,n);else if(s==="document")r=KX(ol(t));else if(vi(s))r=QX(s,n);else{const a=W3(t);r={x:s.x-a.x,y:s.y-a.y,width:s.width,height:s.height}}return qg(r)}function K3(t,s){const n=Go(t);return n===s||!vi(n)||zu(n)?!1:yi(n).position==="fixed"||K3(n,s)}function JX(t,s){const n=s.get(t);if(n)return n;let r=sf(t,[],!1).filter(o=>vi(o)&&xh(o)!=="body"),a=null;const i=yi(t).position==="fixed";let l=i?Go(t):t;for(;vi(l)&&!zu(l);){const o=yi(l),c=X1(l);!c&&o.position==="fixed"&&(a=null),(i?!c&&!a:!c&&o.position==="static"&&!!a&&YX.has(a.position)||Jf(l)&&!c&&K3(t,l))?r=r.filter(d=>d!==l):a=o,l=Go(l)}return s.set(t,r),r}function XX(t){let{element:s,boundary:n,rootBoundary:r,strategy:a}=t;const l=[...n==="clippingAncestors"?F0(s)?[]:JX(s,this._c):[].concat(n),r],o=l[0],c=l.reduce((u,d)=>{const m=hP(s,d,a);return u.top=va(m.top,u.top),u.right=Ko(m.right,u.right),u.bottom=Ko(m.bottom,u.bottom),u.left=va(m.left,u.left),u},hP(s,o,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function ZX(t){const{width:s,height:n}=V3(t);return{width:s,height:n}}function eZ(t,s,n){const r=tl(s),a=ol(s),i=n==="fixed",l=td(t,!0,i,s);let o={scrollLeft:0,scrollTop:0};const c=Ji(0);function u(){c.x=I0(a)}if(r||!r&&!i)if((xh(s)!=="body"||Jf(a))&&(o=L0(s)),r){const p=td(s,!0,i,s);c.x=p.x+s.clientLeft,c.y=p.y+s.clientTop}else a&&u();i&&!r&&a&&u();const d=a&&!r&&!i?H3(a,o):Ji(0),m=l.left+o.scrollLeft-c.x-d.x,h=l.top+o.scrollTop-c.y-d.y;return{x:m,y:h,width:l.width,height:l.height}}function qb(t){return yi(t).position==="static"}function mP(t,s){if(!tl(t)||yi(t).position==="fixed")return null;if(s)return s(t);let n=t.offsetParent;return ol(t)===n&&(n=n.ownerDocument.body),n}function G3(t,s){const n=_a(t);if(F0(t))return n;if(!tl(t)){let a=Go(t);for(;a&&!zu(a);){if(vi(a)&&!qb(a))return a;a=Go(a)}return n}let r=mP(t,s);for(;r&&FX(r)&&qb(r);)r=mP(r,s);return r&&zu(r)&&qb(r)&&!X1(r)?n:r||zX(t)||n}const tZ=async function(t){const s=this.getOffsetParent||G3,n=this.getDimensions,r=await n(t.floating);return{reference:eZ(t.reference,await s(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function sZ(t){return yi(t).direction==="rtl"}const nZ={convertOffsetParentRelativeRectToViewportRelativeRect:WX,getDocumentElement:ol,getClippingRect:XX,getOffsetParent:G3,getElementRects:tZ,getClientRects:HX,getDimensions:ZX,getScale:yu,isElement:vi,isRTL:sZ};function Y3(t,s){return t.x===s.x&&t.y===s.y&&t.width===s.width&&t.height===s.height}function rZ(t,s){let n=null,r;const a=ol(t);function i(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function l(o,c){o===void 0&&(o=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:d,top:m,width:h,height:p}=u;if(o||s(),!h||!p)return;const g=Lx(m),v=Lx(a.clientWidth-(d+h)),y=Lx(a.clientHeight-(m+p)),j=Lx(d),N={rootMargin:-g+"px "+-v+"px "+-y+"px "+-j+"px",threshold:va(0,Ko(1,c))||1};let _=!0;function T(A){const P=A[0].intersectionRatio;if(P!==c){if(!_)return l();P?l(!1,P):r=setTimeout(()=>{l(!1,1e-7)},1e3)}P===1&&!Y3(u,t.getBoundingClientRect())&&l(),_=!1}try{n=new IntersectionObserver(T,{...N,root:a.ownerDocument})}catch{n=new IntersectionObserver(T,N)}n.observe(t)}return l(!0),i}function aZ(t,s,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=e2(t),d=a||i?[...u?sf(u):[],...sf(s)]:[];d.forEach(j=>{a&&j.addEventListener("scroll",n,{passive:!0}),i&&j.addEventListener("resize",n)});const m=u&&o?rZ(u,n):null;let h=-1,p=null;l&&(p=new ResizeObserver(j=>{let[w]=j;w&&w.target===u&&p&&(p.unobserve(s),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var N;(N=p)==null||N.observe(s)})),n()}),u&&!c&&p.observe(u),p.observe(s));let g,v=c?td(t):null;c&&y();function y(){const j=td(t);v&&!Y3(v,j)&&n(),v=j,g=requestAnimationFrame(y)}return n(),()=>{var j;d.forEach(w=>{a&&w.removeEventListener("scroll",n),i&&w.removeEventListener("resize",n)}),m==null||m(),(j=p)==null||j.disconnect(),p=null,c&&cancelAnimationFrame(g)}}const iZ=TX,lZ=AX,oZ=kX,cZ=DX,dZ=EX,fP=CX,uZ=MX,hZ=(t,s,n)=>{const r=new Map,a={platform:nZ,...n},i={...a.platform,_c:r};return SX(t,s,{...a,platform:i})};var mZ=typeof document<"u",fZ=function(){},ug=mZ?b.useLayoutEffect:fZ;function zg(t,s){if(t===s)return!0;if(typeof t!=typeof s)return!1;if(typeof t=="function"&&t.toString()===s.toString())return!0;let n,r,a;if(t&&s&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==s.length)return!1;for(r=n;r--!==0;)if(!zg(t[r],s[r]))return!1;return!0}if(a=Object.keys(t),n=a.length,n!==Object.keys(s).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(s,a[r]))return!1;for(r=n;r--!==0;){const i=a[r];if(!(i==="_owner"&&t.$$typeof)&&!zg(t[i],s[i]))return!1}return!0}return t!==t&&s!==s}function Q3(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function pP(t,s){const n=Q3(t);return Math.round(s*n)/n}function zb(t){const s=b.useRef(t);return ug(()=>{s.current=t}),s}function pZ(t){t===void 0&&(t={});const{placement:s="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:l}={},transform:o=!0,whileElementsMounted:c,open:u}=t,[d,m]=b.useState({x:0,y:0,strategy:n,placement:s,middlewareData:{},isPositioned:!1}),[h,p]=b.useState(r);zg(h,r)||p(r);const[g,v]=b.useState(null),[y,j]=b.useState(null),w=b.useCallback(B=>{B!==A.current&&(A.current=B,v(B))},[]),N=b.useCallback(B=>{B!==P.current&&(P.current=B,j(B))},[]),_=i||g,T=l||y,A=b.useRef(null),P=b.useRef(null),C=b.useRef(d),O=c!=null,M=zb(c),k=zb(a),E=zb(u),R=b.useCallback(()=>{if(!A.current||!P.current)return;const B={placement:s,strategy:n,middleware:h};k.current&&(B.platform=k.current),hZ(A.current,P.current,B).then($=>{const L={...$,isPositioned:E.current!==!1};F.current&&!zg(C.current,L)&&(C.current=L,hd.flushSync(()=>{m(L)}))})},[h,s,n,k,E]);ug(()=>{u===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,m(B=>({...B,isPositioned:!1})))},[u]);const F=b.useRef(!1);ug(()=>(F.current=!0,()=>{F.current=!1}),[]),ug(()=>{if(_&&(A.current=_),T&&(P.current=T),_&&T){if(M.current)return M.current(_,T,R);R()}},[_,T,R,M,O]);const z=b.useMemo(()=>({reference:A,floating:P,setReference:w,setFloating:N}),[w,N]),V=b.useMemo(()=>({reference:_,floating:T}),[_,T]),U=b.useMemo(()=>{const B={position:n,left:0,top:0};if(!V.floating)return B;const $=pP(V.floating,d.x),L=pP(V.floating,d.y);return o?{...B,transform:"translate("+$+"px, "+L+"px)",...Q3(V.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$,top:L}},[n,o,V.floating,d.x,d.y]);return b.useMemo(()=>({...d,update:R,refs:z,elements:V,floatingStyles:U}),[d,R,z,V,U])}const xZ=t=>{function s(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:a}=typeof t=="function"?t(n):t;return r&&s(r)?r.current!=null?fP({element:r.current,padding:a}).fn(n):{}:r?fP({element:r,padding:a}).fn(n):{}}}},gZ=(t,s)=>({...iZ(t),options:[t,s]}),vZ=(t,s)=>({...lZ(t),options:[t,s]}),yZ=(t,s)=>({...uZ(t),options:[t,s]}),bZ=(t,s)=>({...oZ(t),options:[t,s]}),jZ=(t,s)=>({...cZ(t),options:[t,s]}),wZ=(t,s)=>({...dZ(t),options:[t,s]}),NZ=(t,s)=>({...xZ(t),options:[t,s]});var _Z="Arrow",J3=b.forwardRef((t,s)=>{const{children:n,width:r=10,height:a=5,...i}=t;return e.jsx(Ut.svg,{...i,ref:s,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});J3.displayName=_Z;var SZ=J3;function B0(t){const[s,n]=b.useState(void 0);return lr(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let l,o;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;l=u.inlineSize,o=u.blockSize}else l=t.offsetWidth,o=t.offsetHeight;n({width:l,height:o})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),s}var t2="Popper",[X3,ec]=vr(t2),[CZ,Z3]=X3(t2),eO=t=>{const{__scopePopper:s,children:n}=t,[r,a]=b.useState(null);return e.jsx(CZ,{scope:s,anchor:r,onAnchorChange:a,children:n})};eO.displayName=t2;var tO="PopperAnchor",sO=b.forwardRef((t,s)=>{const{__scopePopper:n,virtualRef:r,...a}=t,i=Z3(tO,n),l=b.useRef(null),o=xs(s,l),c=b.useRef(null);return b.useEffect(()=>{const u=c.current;c.current=(r==null?void 0:r.current)||l.current,u!==c.current&&i.onAnchorChange(c.current)}),r?null:e.jsx(Ut.div,{...a,ref:o})});sO.displayName=tO;var s2="PopperContent",[kZ,EZ]=X3(s2),nO=b.forwardRef((t,s)=>{var K,ae,se,de,ue,oe;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:i="center",alignOffset:l=0,arrowPadding:o=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:m="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:g,...v}=t,y=Z3(s2,n),[j,w]=b.useState(null),N=xs(s,pe=>w(pe)),[_,T]=b.useState(null),A=B0(_),P=(A==null?void 0:A.width)??0,C=(A==null?void 0:A.height)??0,O=r+(i!=="center"?"-"+i:""),M=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},k=Array.isArray(u)?u:[u],E=k.length>0,R={padding:M,boundary:k.filter(TZ),altBoundary:E},{refs:F,floatingStyles:z,placement:V,isPositioned:U,middlewareData:B}=pZ({strategy:"fixed",placement:O,whileElementsMounted:(...pe)=>aZ(...pe,{animationFrame:p==="always"}),elements:{reference:y.anchor},middleware:[gZ({mainAxis:a+C,alignmentAxis:l}),c&&vZ({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?yZ():void 0,...R}),c&&bZ({...R}),jZ({...R,apply:({elements:pe,rects:je,availableWidth:we,availableHeight:qe})=>{const{width:ze,height:Ee}=je.reference,Ce=pe.floating.style;Ce.setProperty("--radix-popper-available-width",`${we}px`),Ce.setProperty("--radix-popper-available-height",`${qe}px`),Ce.setProperty("--radix-popper-anchor-width",`${ze}px`),Ce.setProperty("--radix-popper-anchor-height",`${Ee}px`)}}),_&&NZ({element:_,padding:o}),AZ({arrowWidth:P,arrowHeight:C}),h&&wZ({strategy:"referenceHidden",...R})]}),[$,L]=iO(V),I=el(g);lr(()=>{U&&(I==null||I())},[U,I]);const W=(K=B.arrow)==null?void 0:K.x,q=(ae=B.arrow)==null?void 0:ae.y,Z=((se=B.arrow)==null?void 0:se.centerOffset)!==0,[Q,Y]=b.useState();return lr(()=>{j&&Y(window.getComputedStyle(j).zIndex)},[j]),e.jsx("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...z,transform:U?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Q,"--radix-popper-transform-origin":[(de=B.transformOrigin)==null?void 0:de.x,(ue=B.transformOrigin)==null?void 0:ue.y].join(" "),...((oe=B.hide)==null?void 0:oe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(kZ,{scope:n,placedSide:$,onArrowChange:T,arrowX:W,arrowY:q,shouldHideArrow:Z,children:e.jsx(Ut.div,{"data-side":$,"data-align":L,...v,ref:N,style:{...v.style,animation:U?void 0:"none"}})})})});nO.displayName=s2;var rO="PopperArrow",PZ={top:"bottom",right:"left",bottom:"top",left:"right"},aO=b.forwardRef(function(s,n){const{__scopePopper:r,...a}=s,i=EZ(rO,r),l=PZ[i.placedSide];return e.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:e.jsx(SZ,{...a,ref:n,style:{...a.style,display:"block"}})})});aO.displayName=rO;function TZ(t){return t!==null}var AZ=t=>({name:"transformOrigin",options:t,fn(s){var y,j,w;const{placement:n,rects:r,middlewareData:a}=s,l=((y=a.arrow)==null?void 0:y.centerOffset)!==0,o=l?0:t.arrowWidth,c=l?0:t.arrowHeight,[u,d]=iO(n),m={start:"0%",center:"50%",end:"100%"}[d],h=(((j=a.arrow)==null?void 0:j.x)??0)+o/2,p=(((w=a.arrow)==null?void 0:w.y)??0)+c/2;let g="",v="";return u==="bottom"?(g=l?m:`${h}px`,v=`${-c}px`):u==="top"?(g=l?m:`${h}px`,v=`${r.floating.height+c}px`):u==="right"?(g=`${-c}px`,v=l?m:`${p}px`):u==="left"&&(g=`${r.floating.width+c}px`,v=l?m:`${p}px`),{data:{x:g,y:v}}}});function iO(t){const[s,n="center"]=t.split("-");return[s,n]}var q0=eO,Xf=sO,z0=nO,$0=aO,MZ=Symbol("radix.slottable");function DZ(t){const s=({children:n})=>e.jsx(e.Fragment,{children:n});return s.displayName=`${t}.Slottable`,s.__radixId=MZ,s}var lO=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),OZ="VisuallyHidden",oO=b.forwardRef((t,s)=>e.jsx(Ut.span,{...t,ref:s,style:{...lO,...t.style}}));oO.displayName=OZ;var RZ=oO,[U0]=vr("Tooltip",[ec]),V0=ec(),cO="TooltipProvider",FZ=700,JN="tooltip.open",[LZ,n2]=U0(cO),dO=t=>{const{__scopeTooltip:s,delayDuration:n=FZ,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:i}=t,l=b.useRef(!0),o=b.useRef(!1),c=b.useRef(0);return b.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),e.jsx(LZ,{scope:s,isOpenDelayedRef:l,delayDuration:n,onOpen:b.useCallback(()=>{window.clearTimeout(c.current),l.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>l.current=!0,r)},[r]),isPointerInTransitRef:o,onPointerInTransitChange:b.useCallback(u=>{o.current=u},[]),disableHoverableContent:a,children:i})};dO.displayName=cO;var nf="Tooltip",[IZ,Zf]=U0(nf),uO=t=>{const{__scopeTooltip:s,children:n,open:r,defaultOpen:a,onOpenChange:i,disableHoverableContent:l,delayDuration:o}=t,c=n2(nf,t.__scopeTooltip),u=V0(s),[d,m]=b.useState(null),h=Vn(),p=b.useRef(0),g=l??c.disableHoverableContent,v=o??c.delayDuration,y=b.useRef(!1),[j,w]=Ja({prop:r,defaultProp:a??!1,onChange:P=>{P?(c.onOpen(),document.dispatchEvent(new CustomEvent(JN))):c.onClose(),i==null||i(P)},caller:nf}),N=b.useMemo(()=>j?y.current?"delayed-open":"instant-open":"closed",[j]),_=b.useCallback(()=>{window.clearTimeout(p.current),p.current=0,y.current=!1,w(!0)},[w]),T=b.useCallback(()=>{window.clearTimeout(p.current),p.current=0,w(!1)},[w]),A=b.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{y.current=!0,w(!0),p.current=0},v)},[v,w]);return b.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),e.jsx(q0,{...u,children:e.jsx(IZ,{scope:s,contentId:h,open:j,stateAttribute:N,trigger:d,onTriggerChange:m,onTriggerEnter:b.useCallback(()=>{c.isOpenDelayedRef.current?A():_()},[c.isOpenDelayedRef,A,_]),onTriggerLeave:b.useCallback(()=>{g?T():(window.clearTimeout(p.current),p.current=0)},[T,g]),onOpen:_,onClose:T,disableHoverableContent:g,children:n})})};uO.displayName=nf;var XN="TooltipTrigger",hO=b.forwardRef((t,s)=>{const{__scopeTooltip:n,...r}=t,a=Zf(XN,n),i=n2(XN,n),l=V0(n),o=b.useRef(null),c=xs(s,o,a.onTriggerChange),u=b.useRef(!1),d=b.useRef(!1),m=b.useCallback(()=>u.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),e.jsx(Xf,{asChild:!0,...l,children:e.jsx(Ut.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:c,onPointerMove:jt(t.onPointerMove,h=>{h.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),d.current=!0)}),onPointerLeave:jt(t.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:jt(t.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:jt(t.onFocus,()=>{u.current||a.onOpen()}),onBlur:jt(t.onBlur,a.onClose),onClick:jt(t.onClick,a.onClose)})})});hO.displayName=XN;var r2="TooltipPortal",[BZ,qZ]=U0(r2,{forceMount:void 0}),mO=t=>{const{__scopeTooltip:s,forceMount:n,children:r,container:a}=t,i=Zf(r2,s);return e.jsx(BZ,{scope:s,forceMount:n,children:e.jsx(yr,{present:n||i.open,children:e.jsx(hh,{asChild:!0,container:a,children:r})})})};mO.displayName=r2;var $u="TooltipContent",fO=b.forwardRef((t,s)=>{const n=qZ($u,t.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...i}=t,l=Zf($u,t.__scopeTooltip);return e.jsx(yr,{present:r||l.open,children:l.disableHoverableContent?e.jsx(pO,{side:a,...i,ref:s}):e.jsx(zZ,{side:a,...i,ref:s})})}),zZ=b.forwardRef((t,s)=>{const n=Zf($u,t.__scopeTooltip),r=n2($u,t.__scopeTooltip),a=b.useRef(null),i=xs(s,a),[l,o]=b.useState(null),{trigger:c,onClose:u}=n,d=a.current,{onPointerInTransitChange:m}=r,h=b.useCallback(()=>{o(null),m(!1)},[m]),p=b.useCallback((g,v)=>{const y=g.currentTarget,j={x:g.clientX,y:g.clientY},w=HZ(j,y.getBoundingClientRect()),N=KZ(j,w),_=GZ(v.getBoundingClientRect()),T=QZ([...N,..._]);o(T),m(!0)},[m]);return b.useEffect(()=>()=>h(),[h]),b.useEffect(()=>{if(c&&d){const g=y=>p(y,d),v=y=>p(y,c);return c.addEventListener("pointerleave",g),d.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",g),d.removeEventListener("pointerleave",v)}}},[c,d,p,h]),b.useEffect(()=>{if(l){const g=v=>{const y=v.target,j={x:v.clientX,y:v.clientY},w=(c==null?void 0:c.contains(y))||(d==null?void 0:d.contains(y)),N=!YZ(j,l);w?h():N&&(h(),u())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,d,l,u,h]),e.jsx(pO,{...t,ref:i})}),[$Z,UZ]=U0(nf,{isInside:!1}),VZ=DZ("TooltipContent"),pO=b.forwardRef((t,s)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:l,...o}=t,c=Zf($u,n),u=V0(n),{onClose:d}=c;return b.useEffect(()=>(document.addEventListener(JN,d),()=>document.removeEventListener(JN,d)),[d]),b.useEffect(()=>{if(c.trigger){const m=h=>{const p=h.target;p!=null&&p.contains(c.trigger)&&d()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,d]),e.jsx(uh,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:m=>m.preventDefault(),onDismiss:d,children:e.jsxs(z0,{"data-state":c.stateAttribute,...u,...o,ref:s,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(VZ,{children:r}),e.jsx($Z,{scope:n,isInside:!0,children:e.jsx(RZ,{id:c.contentId,role:"tooltip",children:a||r})})]})})});fO.displayName=$u;var xO="TooltipArrow",WZ=b.forwardRef((t,s)=>{const{__scopeTooltip:n,...r}=t,a=V0(n);return UZ(xO,n).isInside?null:e.jsx($0,{...a,...r,ref:s})});WZ.displayName=xO;function HZ(t,s){const n=Math.abs(s.top-t.y),r=Math.abs(s.bottom-t.y),a=Math.abs(s.right-t.x),i=Math.abs(s.left-t.x);switch(Math.min(n,r,a,i)){case i:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function KZ(t,s,n=5){const r=[];switch(s){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function GZ(t){const{top:s,right:n,bottom:r,left:a}=t;return[{x:a,y:s},{x:n,y:s},{x:n,y:r},{x:a,y:r}]}function YZ(t,s){const{x:n,y:r}=t;let a=!1;for(let i=0,l=s.length-1;i<s.length;l=i++){const o=s[i],c=s[l],u=o.x,d=o.y,m=c.x,h=c.y;d>r!=h>r&&n<(m-u)*(r-d)/(h-d)+u&&(a=!a)}return a}function QZ(t){const s=t.slice();return s.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),JZ(s)}function JZ(t){if(t.length<=1)return t.slice();const s=[];for(let r=0;r<t.length;r++){const a=t[r];for(;s.length>=2;){const i=s[s.length-1],l=s[s.length-2];if((i.x-l.x)*(a.y-l.y)>=(i.y-l.y)*(a.x-l.x))s.pop();else break}s.push(a)}s.pop();const n=[];for(let r=t.length-1;r>=0;r--){const a=t[r];for(;n.length>=2;){const i=n[n.length-1],l=n[n.length-2];if((i.x-l.x)*(a.y-l.y)>=(i.y-l.y)*(a.x-l.x))n.pop();else break}n.push(a)}return n.pop(),s.length===1&&n.length===1&&s[0].x===n[0].x&&s[0].y===n[0].y?s:s.concat(n)}var XZ=dO,ZZ=uO,eee=hO,tee=mO,gO=fO;const a2=XZ,rf=ZZ,af=eee,Uu=b.forwardRef(({className:t,sideOffset:s=4,...n},r)=>e.jsx(tee,{children:e.jsx(gO,{ref:r,sideOffset:s,className:tt("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));Uu.displayName=gO.displayName;const see="sidebar_state",nee=3600*24*7,ree="16rem",aee="18rem",iee="3rem",lee="b",vO=b.createContext(null);function W0(){const t=b.useContext(vO);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}const yO=b.forwardRef(({defaultOpen:t=!0,open:s,onOpenChange:n,className:r,style:a,children:i,...l},o)=>{const c=OY(),[u,d]=b.useState(!1),[m,h]=b.useState(t),p=s??m,g=b.useCallback(w=>{const N=typeof w=="function"?w(p):w;n?n(N):h(N),document.cookie=`${see}=${N}; path=/; max-age=${nee}`},[n,p]),v=b.useCallback(()=>c?d(w=>!w):g(w=>!w),[c,g,d]);b.useEffect(()=>{const w=N=>{N.key===lee&&(N.metaKey||N.ctrlKey)&&(N.preventDefault(),v())};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[v]);const y=p?"expanded":"collapsed",j=b.useMemo(()=>({state:y,open:p,setOpen:g,isMobile:c,openMobile:u,setOpenMobile:d,toggleSidebar:v}),[y,p,g,c,u,d,v]);return e.jsx(vO.Provider,{value:j,children:e.jsx(a2,{delayDuration:0,children:e.jsx("div",{style:{"--sidebar-width":ree,"--sidebar-width-icon":iee,...a},className:tt("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:o,...l,children:i})})})});yO.displayName="SidebarProvider";const bO=b.forwardRef(({side:t="left",variant:s="sidebar",collapsible:n="offcanvas",className:r,children:a,...i},l)=>{const{isMobile:o,state:c,openMobile:u,setOpenMobile:d}=W0();return n==="none"?e.jsx("div",{className:tt("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:l,...i,children:a}):o?e.jsx(cX,{open:u,onOpenChange:d,...i,children:e.jsx(B3,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":aee},side:t,children:e.jsx("div",{className:"flex h-full w-full flex-col",children:a})})}):e.jsxs("div",{ref:l,className:"group peer hidden text-sidebar-foreground md:block","data-state":c,"data-collapsible":c==="collapsed"?n:"","data-variant":s,"data-side":t,children:[e.jsx("div",{className:tt("relative h-svh w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",s==="floating"||s==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),e.jsx("div",{className:tt("fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",s==="floating"||s==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...i,children:e.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:a})})]})});bO.displayName="Sidebar";const oee=b.forwardRef(({className:t,onClick:s,...n},r)=>{const{toggleSidebar:a}=W0();return e.jsxs(J,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:tt("h-7 w-7",t),onClick:i=>{s==null||s(i),a()},...n,children:[e.jsx(PG,{}),e.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});oee.displayName="SidebarTrigger";const cee=b.forwardRef(({className:t,...s},n)=>{const{toggleSidebar:r}=W0();return e.jsx("button",{ref:n,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:tt("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",t),...s})});cee.displayName="SidebarRail";const dee=b.forwardRef(({className:t,...s},n)=>e.jsx("main",{ref:n,className:tt("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",t),...s}));dee.displayName="SidebarInset";const uee=b.forwardRef(({className:t,...s},n)=>e.jsx(he,{ref:n,"data-sidebar":"input",className:tt("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",t),...s}));uee.displayName="SidebarInput";const jO=b.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,"data-sidebar":"header",className:tt("flex flex-col gap-2 p-2",t),...s}));jO.displayName="SidebarHeader";const wO=b.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,"data-sidebar":"footer",className:tt("flex flex-col gap-2 p-2",t),...s}));wO.displayName="SidebarFooter";const hee=b.forwardRef(({className:t,...s},n)=>e.jsx(o3,{ref:n,"data-sidebar":"separator",className:tt("mx-2 w-auto bg-sidebar-border",t),...s}));hee.displayName="SidebarSeparator";const NO=b.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,"data-sidebar":"content",className:tt("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...s}));NO.displayName="SidebarContent";const hg=b.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,"data-sidebar":"group",className:tt("relative flex w-full min-w-0 flex-col p-2",t),...s}));hg.displayName="SidebarGroup";const mg=b.forwardRef(({className:t,asChild:s=!1,...n},r)=>{const a=s?lh:"div";return e.jsx(a,{ref:r,"data-sidebar":"group-label",className:tt("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...n})});mg.displayName="SidebarGroupLabel";const mee=b.forwardRef(({className:t,asChild:s=!1,...n},r)=>{const a=s?lh:"button";return e.jsx(a,{ref:r,"data-sidebar":"group-action",className:tt("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",t),...n})});mee.displayName="SidebarGroupAction";const fg=b.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,"data-sidebar":"group-content",className:tt("w-full text-sm",t),...s}));fg.displayName="SidebarGroupContent";const ZN=b.forwardRef(({className:t,...s},n)=>e.jsx("ul",{ref:n,"data-sidebar":"menu",className:tt("flex w-full min-w-0 flex-col gap-1",t),...s}));ZN.displayName="SidebarMenu";const Am=b.forwardRef(({className:t,...s},n)=>e.jsx("li",{ref:n,"data-sidebar":"menu-item",className:tt("group/menu-item relative",t),...s}));Am.displayName="SidebarMenuItem";const fee=oh("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),Mm=b.forwardRef(({asChild:t=!1,isActive:s=!1,variant:n="default",size:r="default",tooltip:a,className:i,...l},o)=>{const c=t?lh:"button",{isMobile:u,state:d}=W0(),m=e.jsx(c,{ref:o,"data-sidebar":"menu-button","data-size":r,"data-active":s,className:tt(fee({variant:n,size:r}),i),...l});return a?(typeof a=="string"&&(a={children:a}),e.jsxs(rf,{children:[e.jsx(af,{asChild:!0,children:m}),e.jsx(Uu,{side:"right",align:"center",hidden:d!=="collapsed"||u,...a})]})):m});Mm.displayName="SidebarMenuButton";const pee=b.forwardRef(({className:t,asChild:s=!1,showOnHover:n=!1,...r},a)=>{const i=s?lh:"button";return e.jsx(i,{ref:a,"data-sidebar":"menu-action",className:tt("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",n&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",t),...r})});pee.displayName="SidebarMenuAction";const xee=b.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,"data-sidebar":"menu-badge",className:tt("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t),...s}));xee.displayName="SidebarMenuBadge";const gee=b.forwardRef(({className:t,showIcon:s=!1,...n},r)=>{const a=b.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return e.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:tt("flex h-8 items-center gap-2 rounded-md px-2",t),...n,children:[s&&e.jsx(rP,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),e.jsx(rP,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":a}})]})});gee.displayName="SidebarMenuSkeleton";const e_=b.forwardRef(({className:t,...s},n)=>e.jsx("ul",{ref:n,"data-sidebar":"menu-sub",className:tt("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",t),...s}));e_.displayName="SidebarMenuSub";const t_=b.forwardRef(({...t},s)=>e.jsx("li",{ref:s,...t}));t_.displayName="SidebarMenuSubItem";const vee=b.forwardRef(({asChild:t=!1,size:s="md",isActive:n,className:r,...a},i)=>{const l=t?lh:"a";return e.jsx(l,{ref:i,"data-sidebar":"menu-sub-button","data-size":s,"data-active":n,className:tt("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",s==="sm"&&"text-xs",s==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...a})});vee.displayName="SidebarMenuSubButton";const yee=oh("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ye({className:t,variant:s,...n}){return e.jsx("div",{className:tt(yee({variant:s}),t),...n})}var H0="Collapsible",[bee]=vr(H0),[jee,i2]=bee(H0),_O=b.forwardRef((t,s)=>{const{__scopeCollapsible:n,open:r,defaultOpen:a,disabled:i,onOpenChange:l,...o}=t,[c,u]=Ja({prop:r,defaultProp:a??!1,onChange:l,caller:H0});return e.jsx(jee,{scope:n,disabled:i,contentId:Vn(),open:c,onOpenToggle:b.useCallback(()=>u(d=>!d),[u]),children:e.jsx(Ut.div,{"data-state":o2(c),"data-disabled":i?"":void 0,...o,ref:s})})});_O.displayName=H0;var SO="CollapsibleTrigger",CO=b.forwardRef((t,s)=>{const{__scopeCollapsible:n,...r}=t,a=i2(SO,n);return e.jsx(Ut.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":o2(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...r,ref:s,onClick:jt(t.onClick,a.onOpenToggle)})});CO.displayName=SO;var l2="CollapsibleContent",kO=b.forwardRef((t,s)=>{const{forceMount:n,...r}=t,a=i2(l2,t.__scopeCollapsible);return e.jsx(yr,{present:n||a.open,children:({present:i})=>e.jsx(wee,{...r,ref:s,present:i})})});kO.displayName=l2;var wee=b.forwardRef((t,s)=>{const{__scopeCollapsible:n,present:r,children:a,...i}=t,l=i2(l2,n),[o,c]=b.useState(r),u=b.useRef(null),d=xs(s,u),m=b.useRef(0),h=m.current,p=b.useRef(0),g=p.current,v=l.open||o,y=b.useRef(v),j=b.useRef(void 0);return b.useEffect(()=>{const w=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(w)},[]),lr(()=>{const w=u.current;if(w){j.current=j.current||{transitionDuration:w.style.transitionDuration,animationName:w.style.animationName},w.style.transitionDuration="0s",w.style.animationName="none";const N=w.getBoundingClientRect();m.current=N.height,p.current=N.width,y.current||(w.style.transitionDuration=j.current.transitionDuration,w.style.animationName=j.current.animationName),c(r)}},[l.open,r]),e.jsx(Ut.div,{"data-state":o2(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!v,...i,ref:d,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":g?`${g}px`:void 0,...t.style},children:v&&a})});function o2(t){return t?"open":"closed"}var Nee=_O;const s_=Nee,n_=CO,r_=kO,Ct=M0,_ee=D0,EO=b.forwardRef(({className:t,...s},n)=>e.jsx(mh,{ref:n,className:tt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));EO.displayName=mh.displayName;const Nt=b.forwardRef(({className:t,children:s,...n},r)=>e.jsxs(_ee,{children:[e.jsx(EO,{}),e.jsxs(fh,{ref:r,className:tt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[s,e.jsxs(O0,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(_s,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Nt.displayName=fh.displayName;const kt=({className:t,...s})=>e.jsx("div",{className:tt("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});kt.displayName="DialogHeader";const zt=({className:t,...s})=>e.jsx("div",{className:tt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});zt.displayName="DialogFooter";const Et=b.forwardRef(({className:t,...s},n)=>e.jsx(Yf,{ref:n,className:tt("text-lg font-semibold leading-none tracking-tight",t),...s}));Et.displayName=Yf.displayName;const ya=b.forwardRef(({className:t,...s},n)=>e.jsx(Qf,{ref:n,className:tt("text-sm text-muted-foreground",t),...s}));ya.displayName=Qf.displayName;const ru={Calendar:Ns,Building:Zo,Briefcase:En,FileText:ns,Users:ws,Sparkles:aa,Home:Zm,Mail:Ms,Phone:k0,Search:Ys,User:Xs,ChevronDown:Or};function See(){var w,N,_,T,A,P,C,O,M,k,E,R;const[t,s]=b.useState(!1),[n,r]=b.useState(!1),[a,i]=b.useState({topNav:[],mainNav:[]}),[l,o]=b.useState(null),[c,u]=b.useState(null),[d,m]=b.useState(null),[h,p]=b.useState(null),g=il();b.useEffect(()=>{const F=()=>{const z=sessionStorage.getItem("agcas_member");r(!!z)};return F(),window.addEventListener("storage",F),()=>{window.removeEventListener("storage",F)}},[]),b.useEffect(()=>{const F=async()=>{try{const B=(await X.entities.NavigationItem.list("display_order")).filter(W=>W.is_active),$=(W,q)=>B.filter(Z=>Z.parent_id===W&&Z.location===q).sort((Z,Q)=>(Z.display_order||0)-(Q.display_order||0)).map(Z=>({...Z,children:$(Z.id,q)})),L=$(null,"top_nav"),I=$(null,"main_nav");i({topNav:L,mainNav:I})}catch(U){console.error("Failed to fetch navigation items:",U),i({topNav:[],mainNav:[]})}};F();const z=()=>F();window.addEventListener("focus",z);const V=setInterval(()=>{document.visibilityState==="visible"&&F()},5e3);return()=>{window.removeEventListener("focus",z),clearInterval(V)}},[g.pathname]),b.useEffect(()=>{(async()=>{try{const V=(await X.entities.SystemSettings.list()).find(U=>U.setting_key==="social_icons_config");if(V!=null&&V.setting_value)try{m(JSON.parse(V.setting_value))}catch(U){console.error("Failed to parse social icons config:",U)}}catch(z){console.error("Failed to fetch social icons config:",z)}})()},[]);const v=()=>{sessionStorage.removeItem("agcas_member"),window.location.href=Pe("Home")},y=F=>{if(F.link_type==="external")return!1;const z=Pe(F.url);return g.pathname===z},j=(F,z=!1)=>{const V=F.children&&F.children.length>0,U=F.icon&&ru[F.icon]?ru[F.icon]:null,B=y(F),$=F.link_type==="external"?{href:F.url,target:F.open_in_new_tab?"_blank":"_self",rel:F.open_in_new_tab?"noopener noreferrer":void 0}:{to:Pe(F.url)},L=F.link_type==="external"?"a":Ht,W=`nav-link text-${z?"white":"slate-900"} transition-colors ${B?"font-bold":z?"font-semibold text-sm":"font-medium"} flex items-center gap-1`;if(F.highlight_style==="gradient_button")return e.jsx(L,{...$,children:e.jsxs(J,{className:"text-white font-bold hover:opacity-90 transition-opacity px-6 py-5 rounded-none",style:{fontFamily:"Poppins, sans-serif",background:"linear-gradient(to top right, #5C0085, #BA0087, #EE00C3, #FF4229, #FFB000)"},children:[U&&e.jsx(U,{className:"w-4 h-4 mr-2"}),F.title,e.jsx(Mr,{className:"ml-0.5 w-5 h-5",strokeWidth:2.5})]})},F.id);if(V){const q=()=>{h&&(clearTimeout(h),p(null)),o(F.id)},Z=()=>{const Q=setTimeout(()=>{o(null)},150);p(Q)};return e.jsxs("div",{className:"relative h-full flex items-center",onMouseEnter:q,onMouseLeave:Z,children:[e.jsxs("button",{className:W,children:[U&&e.jsx(U,{className:"w-4 h-4"}),F.title,e.jsx(Or,{className:"w-4 h-4"})]}),!z&&B&&e.jsx("div",{className:"absolute left-0 right-0 h-[5px]",style:{bottom:"-33px",background:"linear-gradient(to right, #5C0085, #BA0087, #EE00C3, #FF4229, #FFB000)"}}),l===F.id&&e.jsx("div",{className:"absolute top-full left-0 mt-2 bg-white rounded-lg shadow-xl border border-slate-200 py-4 z-50 min-w-[240px]",onMouseEnter:q,onMouseLeave:Z,children:F.children.map(Q=>{const Y=Q.icon&&ru[Q.icon]?ru[Q.icon]:null,K=y(Q),ae=Q.children&&Q.children.length>0,se=Q.link_type==="external"?{href:Q.url,target:Q.open_in_new_tab?"_blank":"_self",rel:Q.open_in_new_tab?"noopener noreferrer":void 0}:{to:Pe(Q.url)},de=Q.link_type==="external"?"a":Ht;return e.jsxs("div",{className:"relative",onMouseEnter:()=>ae&&u(Q.id),onMouseLeave:()=>ae&&u(null),children:[e.jsx(de,{...se,className:"block px-4 py-2 hover:bg-slate-50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-3",children:[Y&&e.jsx(Y,{className:"w-5 h-5 text-slate-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:`text-slate-900 ${K?"font-bold":"font-medium"} flex items-center gap-2`,children:[Q.title,ae&&e.jsx(js,{className:"w-3 h-3"})]}),Q.description&&e.jsx("div",{className:"text-xs text-slate-500 mt-0.5",children:Q.description})]})]})}),ae&&c===Q.id&&e.jsx("div",{className:"absolute left-full top-0 -ml-[11px] bg-white rounded-lg shadow-xl border border-slate-200 py-4 min-w-[220px]",children:Q.children.map(ue=>{const oe=ue.icon&&ru[ue.icon]?ru[ue.icon]:null,pe=y(ue),je=ue.link_type==="external"?{href:ue.url,target:ue.open_in_new_tab?"_blank":"_self",rel:ue.open_in_new_tab?"noopener noreferrer":void 0}:{to:Pe(ue.url)},we=ue.link_type==="external"?"a":Ht;return e.jsx(we,{...je,className:"block px-4 py-2 hover:bg-slate-50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-2",children:[oe&&e.jsx(oe,{className:"w-4 h-4 text-slate-500 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`text-slate-700 text-sm ${pe?"font-semibold":"font-normal"}`,children:ue.title}),ue.description&&e.jsx("div",{className:"text-xs text-slate-400 mt-0.5",children:ue.description})]})]})},ue.id)})})]},Q.id)})})]},F.id)}return e.jsxs("div",{className:"relative h-full flex items-center",children:[e.jsxs(L,{...$,className:W,style:z?{}:{fontFamily:"Poppins, sans-serif"},children:[U&&e.jsx(U,{className:"w-4 h-4"}),F.title]}),!z&&B&&e.jsx("div",{className:"absolute left-0 right-0 h-[5px]",style:{bottom:"-33px",background:"linear-gradient(to right, #5C0085, #BA0087, #EE00C3, #FF4229, #FFB000)"}})]},F.id)};return e.jsxs("header",{className:"bg-white shadow-sm sticky top-0 z-40 relative",children:[e.jsx("img",{src:"https://qtrypzzcjebvfcihiynt.supabase.co/storage/v1/object/public/base44-prod/public/68efc20f3e0a30fafad6dde7/26710cf5a_GFIheaderlogo.png",alt:"Graduate Futures Institute",className:"mt-4 absolute z-50",style:{top:"0",left:"max(1rem, calc((100vw - 80rem) / 2))",width:"auto",height:"158px",transform:"translateY(-10px)"}}),e.jsx("div",{className:"py-2 relative",style:{background:"linear-gradient(to right, white 0%, white 33%, #5C0085 50%)"},children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsx("div",{className:"flex justify-end items-center",children:e.jsxs("div",{className:"flex items-center gap-6",children:[(w=a.topNav)==null?void 0:w.map(F=>j(F,!0)),e.jsxs(Ht,{to:Pe(n?"Events":"Home"),className:"flex items-center gap-1 text-white hover:opacity-80 transition-opacity text-sm font-semibold",children:[e.jsx(Xs,{className:"w-4 h-4"}),e.jsx("span",{children:n?"Member Area":"Login"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>s(!t),className:"flex items-center gap-2 text-white hover:opacity-80 transition-opacity text-sm font-semibold",children:[e.jsx(Ys,{className:"w-4 h-4"}),e.jsx("span",{children:"Search"})]}),t&&e.jsxs("div",{className:"absolute top-full right-0 mt-2 w-80 bg-white rounded-lg shadow-xl border border-slate-200 p-4 z-50",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx(he,{type:"text",placeholder:"Search...",className:"pl-10",autoFocus:!0})]}),e.jsx(J,{variant:"outline",onClick:()=>s(!1),children:"Close"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-3",children:"Search functionality coming soon"})]})]}),n&&e.jsx("button",{onClick:v,className:"flex items-center gap-2 text-white hover:opacity-80 transition-opacity text-sm font-semibold",title:"Logout",children:e.jsx(z5,{className:"w-4 h-4"})}),d&&e.jsxs("div",{className:"flex items-center gap-2",children:[((N=d.linkedin)==null?void 0:N.enabled)&&((_=d.linkedin)==null?void 0:_.url)&&e.jsx("a",{href:d.linkedin.url,target:"_blank",rel:"noopener noreferrer",className:"w-7 h-7 bg-white rounded flex items-center justify-center hover:opacity-80 transition-opacity",children:e.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",fill:"#5C0085",children:e.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})})}),((T=d.twitter)==null?void 0:T.enabled)&&((A=d.twitter)==null?void 0:A.url)&&e.jsx("a",{href:d.twitter.url,target:"_blank",rel:"noopener noreferrer",className:"w-7 h-7 bg-white rounded flex items-center justify-center hover:opacity-80 transition-opacity",children:e.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",fill:"#5C0085",children:e.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})}),((P=d.facebook)==null?void 0:P.enabled)&&((C=d.facebook)==null?void 0:C.url)&&e.jsx("a",{href:d.facebook.url,target:"_blank",rel:"noopener noreferrer",className:"w-7 h-7 bg-white rounded flex items-center justify-center hover:opacity-80 transition-opacity",children:e.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",fill:"#5C0085",children:e.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),((O=d.instagram)==null?void 0:O.enabled)&&((M=d.instagram)==null?void 0:M.url)&&e.jsx("a",{href:d.instagram.url,target:"_blank",rel:"noopener noreferrer",className:"w-7 h-7 bg-white rounded flex items-center justify-center hover:opacity-80 transition-opacity",children:e.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",fill:"#5C0085",children:e.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})}),((k=d.youtube)==null?void 0:k.enabled)&&((E=d.youtube)==null?void 0:E.url)&&e.jsx("a",{href:d.youtube.url,target:"_blank",rel:"noopener noreferrer",className:"w-7 h-7 bg-white rounded flex items-center justify-center hover:opacity-80 transition-opacity",children:e.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",fill:"#5C0085",children:e.jsx("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})})})]})]})})})}),e.jsx("div",{className:"bg-white border-b border-slate-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:e.jsxs("div",{className:"flex justify-between items-center h-full",children:[e.jsx("div",{style:{width:"210px"}}),e.jsxs("nav",{className:"hidden md:flex items-center gap-8 h-full",children:[(R=a.mainNav)==null?void 0:R.map(F=>j(F,!1)),e.jsx(Ht,{to:Pe("PublicJoinUs"),children:e.jsxs(J,{className:"text-white font-bold hover:opacity-90 transition-opacity px-6 py-5 rounded-none",style:{fontFamily:"Poppins, sans-serif",background:"linear-gradient(to top right, #5C0085, #BA0087, #EE00C3, #FF4229, #FFB000)"},children:["Join Us",e.jsx(Mr,{className:"ml-0.5 w-5 h-5",strokeWidth:2.5})]})})]}),e.jsx("button",{className:"md:hidden p-2",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})})})]})}function Cee({banner:t}){if(!t||!t.image_url)return null;const s={"full-width":"w-full",contained:"max-w-7xl mx-auto",wide:"max-w-screen-2xl mx-auto"},n={small:"h-32 md:h-48",medium:"h-48 md:h-64 lg:h-80",large:"h-64 md:h-96 lg:h-[32rem]",auto:"h-auto"},r={top:"object-top",center:"object-center",bottom:"object-bottom"},a=s[t.size]||s["full-width"],i=n[t.height]||n.medium,l=r[t.position]||r.center;return e.jsx("div",{className:`${a} overflow-hidden`,children:e.jsx("div",{className:`${i} w-full`,children:e.jsx("img",{src:t.image_url,alt:t.alt_text||t.name,className:`w-full h-full object-cover ${l}`})})})}var gh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},kee={setTimeout:(t,s)=>setTimeout(t,s),clearTimeout:t=>clearTimeout(t),setInterval:(t,s)=>setInterval(t,s),clearInterval:t=>clearInterval(t)},Po,E1,R6,Eee=(R6=class{constructor(){Kt(this,Po,kee);Kt(this,E1,!1)}setTimeoutProvider(t){St(this,Po,t)}setTimeout(t,s){return ge(this,Po).setTimeout(t,s)}clearTimeout(t){ge(this,Po).clearTimeout(t)}setInterval(t,s){return ge(this,Po).setInterval(t,s)}clearInterval(t){ge(this,Po).clearInterval(t)}},Po=new WeakMap,E1=new WeakMap,R6),Ac=new Eee;function Pee(t){setTimeout(t,0)}var sd=typeof window>"u"||"Deno"in globalThis;function Ar(){}function Tee(t,s){return typeof t=="function"?t(s):t}function a_(t){return typeof t=="number"&&t>=0&&t!==1/0}function PO(t,s){return Math.max(t+(s||0)-Date.now(),0)}function zo(t,s){return typeof t=="function"?t(s):t}function za(t,s){return typeof t=="function"?t(s):t}function xP(t,s){const{type:n="all",exact:r,fetchStatus:a,predicate:i,queryKey:l,stale:o}=t;if(l){if(r){if(s.queryHash!==c2(l,s.options))return!1}else if(!lf(s.queryKey,l))return!1}if(n!=="all"){const c=s.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof o=="boolean"&&s.isStale()!==o||a&&a!==s.state.fetchStatus||i&&!i(s))}function gP(t,s){const{exact:n,status:r,predicate:a,mutationKey:i}=t;if(i){if(!s.options.mutationKey)return!1;if(n){if(nd(s.options.mutationKey)!==nd(i))return!1}else if(!lf(s.options.mutationKey,i))return!1}return!(r&&s.state.status!==r||a&&!a(s))}function c2(t,s){return((s==null?void 0:s.queryKeyHashFn)||nd)(t)}function nd(t){return JSON.stringify(t,(s,n)=>i_(n)?Object.keys(n).sort().reduce((r,a)=>(r[a]=n[a],r),{}):n)}function lf(t,s){return t===s?!0:typeof t!=typeof s?!1:t&&s&&typeof t=="object"&&typeof s=="object"?Object.keys(s).every(n=>lf(t[n],s[n])):!1}var Aee=Object.prototype.hasOwnProperty;function TO(t,s){if(t===s)return t;const n=vP(t)&&vP(s);if(!n&&!(i_(t)&&i_(s)))return s;const a=(n?t:Object.keys(t)).length,i=n?s:Object.keys(s),l=i.length,o=n?new Array(l):{};let c=0;for(let u=0;u<l;u++){const d=n?u:i[u],m=t[d],h=s[d];if(m===h){o[d]=m,(n?u<a:Aee.call(t,d))&&c++;continue}if(m===null||h===null||typeof m!="object"||typeof h!="object"){o[d]=h;continue}const p=TO(m,h);o[d]=p,p===m&&c++}return a===l&&c===a?t:o}function $g(t,s){if(!s||Object.keys(t).length!==Object.keys(s).length)return!1;for(const n in t)if(t[n]!==s[n])return!1;return!0}function vP(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function i_(t){if(!yP(t))return!1;const s=t.constructor;if(s===void 0)return!0;const n=s.prototype;return!(!yP(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function yP(t){return Object.prototype.toString.call(t)==="[object Object]"}function Mee(t){return new Promise(s=>{Ac.setTimeout(s,t)})}function l_(t,s,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,s):n.structuralSharing!==!1?TO(t,s):s}function Dee(t,s,n=0){const r=[...t,s];return n&&r.length>n?r.slice(1):r}function Oee(t,s,n=0){const r=[s,...t];return n&&r.length>n?r.slice(0,-1):r}var d2=Symbol();function AO(t,s){return!t.queryFn&&(s!=null&&s.initialPromise)?()=>s.initialPromise:!t.queryFn||t.queryFn===d2?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function MO(t,s){return typeof t=="function"?t(...s):!!t}var Rc,To,ku,F6,Ree=(F6=class extends gh{constructor(){super();Kt(this,Rc);Kt(this,To);Kt(this,ku);St(this,ku,s=>{if(!sd&&window.addEventListener){const n=()=>s();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){ge(this,To)||this.setEventListener(ge(this,ku))}onUnsubscribe(){var s;this.hasListeners()||((s=ge(this,To))==null||s.call(this),St(this,To,void 0))}setEventListener(s){var n;St(this,ku,s),(n=ge(this,To))==null||n.call(this),St(this,To,s(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(s){ge(this,Rc)!==s&&(St(this,Rc,s),this.onFocus())}onFocus(){const s=this.isFocused();this.listeners.forEach(n=>{n(s)})}isFocused(){var s;return typeof ge(this,Rc)=="boolean"?ge(this,Rc):((s=globalThis.document)==null?void 0:s.visibilityState)!=="hidden"}},Rc=new WeakMap,To=new WeakMap,ku=new WeakMap,F6),u2=new Ree;function o_(){let t,s;const n=new Promise((a,i)=>{t=a,s=i});n.status="pending",n.catch(()=>{});function r(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{r({status:"fulfilled",value:a}),t(a)},n.reject=a=>{r({status:"rejected",reason:a}),s(a)},n}var Fee=Pee;function Lee(){let t=[],s=0,n=o=>{o()},r=o=>{o()},a=Fee;const i=o=>{s?t.push(o):a(()=>{n(o)})},l=()=>{const o=t;t=[],o.length&&a(()=>{r(()=>{o.forEach(c=>{n(c)})})})};return{batch:o=>{let c;s++;try{c=o()}finally{s--,s||l()}return c},batchCalls:o=>(...c)=>{i(()=>{o(...c)})},schedule:i,setNotifyFunction:o=>{n=o},setBatchNotifyFunction:o=>{r=o},setScheduler:o=>{a=o}}}var $n=Lee(),Eu,Ao,Pu,L6,Iee=(L6=class extends gh{constructor(){super();Kt(this,Eu,!0);Kt(this,Ao);Kt(this,Pu);St(this,Pu,s=>{if(!sd&&window.addEventListener){const n=()=>s(!0),r=()=>s(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){ge(this,Ao)||this.setEventListener(ge(this,Pu))}onUnsubscribe(){var s;this.hasListeners()||((s=ge(this,Ao))==null||s.call(this),St(this,Ao,void 0))}setEventListener(s){var n;St(this,Pu,s),(n=ge(this,Ao))==null||n.call(this),St(this,Ao,s(this.setOnline.bind(this)))}setOnline(s){ge(this,Eu)!==s&&(St(this,Eu,s),this.listeners.forEach(r=>{r(s)}))}isOnline(){return ge(this,Eu)}},Eu=new WeakMap,Ao=new WeakMap,Pu=new WeakMap,L6),Ug=new Iee;function Bee(t){return Math.min(1e3*2**t,3e4)}function DO(t){return(t??"online")==="online"?Ug.isOnline():!0}var c_=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function OO(t){let s=!1,n=0,r;const a=o_(),i=()=>a.status!=="pending",l=v=>{var y;if(!i()){const j=new c_(v);h(j),(y=t.onCancel)==null||y.call(t,j)}},o=()=>{s=!0},c=()=>{s=!1},u=()=>u2.isFocused()&&(t.networkMode==="always"||Ug.isOnline())&&t.canRun(),d=()=>DO(t.networkMode)&&t.canRun(),m=v=>{i()||(r==null||r(),a.resolve(v))},h=v=>{i()||(r==null||r(),a.reject(v))},p=()=>new Promise(v=>{var y;r=j=>{(i()||u())&&v(j)},(y=t.onPause)==null||y.call(t)}).then(()=>{var v;r=void 0,i()||(v=t.onContinue)==null||v.call(t)}),g=()=>{if(i())return;let v;const y=n===0?t.initialPromise:void 0;try{v=y??t.fn()}catch(j){v=Promise.reject(j)}Promise.resolve(v).then(m).catch(j=>{var A;if(i())return;const w=t.retry??(sd?0:3),N=t.retryDelay??Bee,_=typeof N=="function"?N(n,j):N,T=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,j);if(s||!T){h(j);return}n++,(A=t.onFail)==null||A.call(t,n,j),Mee(_).then(()=>u()?void 0:p()).then(()=>{s?h(j):g()})})};return{promise:a,status:()=>a.status,cancel:l,continue:()=>(r==null||r(),a),cancelRetry:o,continueRetry:c,canStart:d,start:()=>(d()?g():p().then(g),a)}}var Fc,I6,RO=(I6=class{constructor(){Kt(this,Fc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),a_(this.gcTime)&&St(this,Fc,Ac.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(sd?1/0:300*1e3))}clearGcTimeout(){ge(this,Fc)&&(Ac.clearTimeout(ge(this,Fc)),St(this,Fc,void 0))}},Fc=new WeakMap,I6),Lc,Tu,qa,Ic,Qn,Pf,Bc,di,_l,B6,qee=(B6=class extends RO{constructor(s){super();Kt(this,di);Kt(this,Lc);Kt(this,Tu);Kt(this,qa);Kt(this,Ic);Kt(this,Qn);Kt(this,Pf);Kt(this,Bc);St(this,Bc,!1),St(this,Pf,s.defaultOptions),this.setOptions(s.options),this.observers=[],St(this,Ic,s.client),St(this,qa,ge(this,Ic).getQueryCache()),this.queryKey=s.queryKey,this.queryHash=s.queryHash,St(this,Lc,jP(this.options)),this.state=s.state??ge(this,Lc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var s;return(s=ge(this,Qn))==null?void 0:s.promise}setOptions(s){if(this.options={...ge(this,Pf),...s},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=jP(this.options);n.data!==void 0&&(this.setState(bP(n.data,n.dataUpdatedAt)),St(this,Lc,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ge(this,qa).remove(this)}setData(s,n){const r=l_(this.state.data,s,this.options);return gs(this,di,_l).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(s,n){gs(this,di,_l).call(this,{type:"setState",state:s,setStateOptions:n})}cancel(s){var r,a;const n=(r=ge(this,Qn))==null?void 0:r.promise;return(a=ge(this,Qn))==null||a.cancel(s),n?n.then(Ar).catch(Ar):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ge(this,Lc))}isActive(){return this.observers.some(s=>za(s.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===d2||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(s=>zo(s.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(s=>s.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(s=0){return this.state.data===void 0?!0:s==="static"?!1:this.state.isInvalidated?!0:!PO(this.state.dataUpdatedAt,s)}onFocus(){var n;const s=this.observers.find(r=>r.shouldFetchOnWindowFocus());s==null||s.refetch({cancelRefetch:!1}),(n=ge(this,Qn))==null||n.continue()}onOnline(){var n;const s=this.observers.find(r=>r.shouldFetchOnReconnect());s==null||s.refetch({cancelRefetch:!1}),(n=ge(this,Qn))==null||n.continue()}addObserver(s){this.observers.includes(s)||(this.observers.push(s),this.clearGcTimeout(),ge(this,qa).notify({type:"observerAdded",query:this,observer:s}))}removeObserver(s){this.observers.includes(s)&&(this.observers=this.observers.filter(n=>n!==s),this.observers.length||(ge(this,Qn)&&(ge(this,Bc)?ge(this,Qn).cancel({revert:!0}):ge(this,Qn).cancelRetry()),this.scheduleGc()),ge(this,qa).notify({type:"observerRemoved",query:this,observer:s}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||gs(this,di,_l).call(this,{type:"invalidate"})}async fetch(s,n){var c,u,d,m,h,p,g,v,y,j,w,N;if(this.state.fetchStatus!=="idle"&&((c=ge(this,Qn))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(ge(this,Qn))return ge(this,Qn).continueRetry(),ge(this,Qn).promise}if(s&&this.setOptions(s),!this.options.queryFn){const _=this.observers.find(T=>T.options.queryFn);_&&this.setOptions(_.options)}const r=new AbortController,a=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(St(this,Bc,!0),r.signal)})},i=()=>{const _=AO(this.options,n),A=(()=>{const P={client:ge(this,Ic),queryKey:this.queryKey,meta:this.meta};return a(P),P})();return St(this,Bc,!1),this.options.persister?this.options.persister(_,A,this):_(A)},o=(()=>{const _={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:ge(this,Ic),state:this.state,fetchFn:i};return a(_),_})();(u=this.options.behavior)==null||u.onFetch(o,this),St(this,Tu,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&gs(this,di,_l).call(this,{type:"fetch",meta:(m=o.fetchOptions)==null?void 0:m.meta}),St(this,Qn,OO({initialPromise:n==null?void 0:n.initialPromise,fn:o.fetchFn,onCancel:_=>{_ instanceof c_&&_.revert&&this.setState({...ge(this,Tu),fetchStatus:"idle"}),r.abort()},onFail:(_,T)=>{gs(this,di,_l).call(this,{type:"failed",failureCount:_,error:T})},onPause:()=>{gs(this,di,_l).call(this,{type:"pause"})},onContinue:()=>{gs(this,di,_l).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}));try{const _=await ge(this,Qn).start();if(_===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(_),(p=(h=ge(this,qa).config).onSuccess)==null||p.call(h,_,this),(v=(g=ge(this,qa).config).onSettled)==null||v.call(g,_,this.state.error,this),_}catch(_){if(_ instanceof c_){if(_.silent)return ge(this,Qn).promise;if(_.revert){if(this.state.data===void 0)throw _;return this.state.data}}throw gs(this,di,_l).call(this,{type:"error",error:_}),(j=(y=ge(this,qa).config).onError)==null||j.call(y,_,this),(N=(w=ge(this,qa).config).onSettled)==null||N.call(w,this.state.data,_,this),_}finally{this.scheduleGc()}}},Lc=new WeakMap,Tu=new WeakMap,qa=new WeakMap,Ic=new WeakMap,Qn=new WeakMap,Pf=new WeakMap,Bc=new WeakMap,di=new WeakSet,_l=function(s){const n=r=>{switch(s.type){case"failed":return{...r,fetchFailureCount:s.failureCount,fetchFailureReason:s.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...FO(r.data,this.options),fetchMeta:s.meta??null};case"success":const a={...r,...bP(s.data,s.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!s.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return St(this,Tu,s.manual?a:void 0),a;case"error":const i=s.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...s.state}}};this.state=n(this.state),$n.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),ge(this,qa).notify({query:this,type:"updated",action:s})})},B6);function FO(t,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:DO(s.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function bP(t,s){return{data:t,dataUpdatedAt:s??Date.now(),error:null,isInvalidated:!1,status:"success"}}function jP(t){const s=typeof t.initialData=="function"?t.initialData():t.initialData,n=s!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Jr,Ts,Tf,Pr,qc,Au,Cl,Mo,Af,Mu,Du,zc,$c,Do,Ou,Hs,Dm,d_,u_,h_,m_,f_,p_,x_,LO,q6,zee=(q6=class extends gh{constructor(s,n){super();Kt(this,Hs);Kt(this,Jr);Kt(this,Ts);Kt(this,Tf);Kt(this,Pr);Kt(this,qc);Kt(this,Au);Kt(this,Cl);Kt(this,Mo);Kt(this,Af);Kt(this,Mu);Kt(this,Du);Kt(this,zc);Kt(this,$c);Kt(this,Do);Kt(this,Ou,new Set);this.options=n,St(this,Jr,s),St(this,Mo,null),St(this,Cl,o_()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(ge(this,Ts).addObserver(this),wP(ge(this,Ts),this.options)?gs(this,Hs,Dm).call(this):this.updateResult(),gs(this,Hs,m_).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return g_(ge(this,Ts),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return g_(ge(this,Ts),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,gs(this,Hs,f_).call(this),gs(this,Hs,p_).call(this),ge(this,Ts).removeObserver(this)}setOptions(s){const n=this.options,r=ge(this,Ts);if(this.options=ge(this,Jr).defaultQueryOptions(s),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof za(this.options.enabled,ge(this,Ts))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");gs(this,Hs,x_).call(this),ge(this,Ts).setOptions(this.options),n._defaulted&&!$g(this.options,n)&&ge(this,Jr).getQueryCache().notify({type:"observerOptionsUpdated",query:ge(this,Ts),observer:this});const a=this.hasListeners();a&&NP(ge(this,Ts),r,this.options,n)&&gs(this,Hs,Dm).call(this),this.updateResult(),a&&(ge(this,Ts)!==r||za(this.options.enabled,ge(this,Ts))!==za(n.enabled,ge(this,Ts))||zo(this.options.staleTime,ge(this,Ts))!==zo(n.staleTime,ge(this,Ts)))&&gs(this,Hs,d_).call(this);const i=gs(this,Hs,u_).call(this);a&&(ge(this,Ts)!==r||za(this.options.enabled,ge(this,Ts))!==za(n.enabled,ge(this,Ts))||i!==ge(this,Do))&&gs(this,Hs,h_).call(this,i)}getOptimisticResult(s){const n=ge(this,Jr).getQueryCache().build(ge(this,Jr),s),r=this.createResult(n,s);return Uee(this,r)&&(St(this,Pr,r),St(this,Au,this.options),St(this,qc,ge(this,Ts).state)),r}getCurrentResult(){return ge(this,Pr)}trackResult(s,n){return new Proxy(s,{get:(r,a)=>(this.trackProp(a),n==null||n(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&ge(this,Cl).status==="pending"&&ge(this,Cl).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,a))})}trackProp(s){ge(this,Ou).add(s)}getCurrentQuery(){return ge(this,Ts)}refetch({...s}={}){return this.fetch({...s})}fetchOptimistic(s){const n=ge(this,Jr).defaultQueryOptions(s),r=ge(this,Jr).getQueryCache().build(ge(this,Jr),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(s){return gs(this,Hs,Dm).call(this,{...s,cancelRefetch:s.cancelRefetch??!0}).then(()=>(this.updateResult(),ge(this,Pr)))}createResult(s,n){var O;const r=ge(this,Ts),a=this.options,i=ge(this,Pr),l=ge(this,qc),o=ge(this,Au),u=s!==r?s.state:ge(this,Tf),{state:d}=s;let m={...d},h=!1,p;if(n._optimisticResults){const M=this.hasListeners(),k=!M&&wP(s,n),E=M&&NP(s,r,n,a);(k||E)&&(m={...m,...FO(d.data,s.options)}),n._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:g,errorUpdatedAt:v,status:y}=m;p=m.data;let j=!1;if(n.placeholderData!==void 0&&p===void 0&&y==="pending"){let M;i!=null&&i.isPlaceholderData&&n.placeholderData===(o==null?void 0:o.placeholderData)?(M=i.data,j=!0):M=typeof n.placeholderData=="function"?n.placeholderData((O=ge(this,Du))==null?void 0:O.state.data,ge(this,Du)):n.placeholderData,M!==void 0&&(y="success",p=l_(i==null?void 0:i.data,M,n),h=!0)}if(n.select&&p!==void 0&&!j)if(i&&p===(l==null?void 0:l.data)&&n.select===ge(this,Af))p=ge(this,Mu);else try{St(this,Af,n.select),p=n.select(p),p=l_(i==null?void 0:i.data,p,n),St(this,Mu,p),St(this,Mo,null)}catch(M){St(this,Mo,M)}ge(this,Mo)&&(g=ge(this,Mo),p=ge(this,Mu),v=Date.now(),y="error");const w=m.fetchStatus==="fetching",N=y==="pending",_=y==="error",T=N&&w,A=p!==void 0,C={status:y,fetchStatus:m.fetchStatus,isPending:N,isSuccess:y==="success",isError:_,isInitialLoading:T,isLoading:T,data:p,dataUpdatedAt:m.dataUpdatedAt,error:g,errorUpdatedAt:v,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>u.dataUpdateCount||m.errorUpdateCount>u.errorUpdateCount,isFetching:w,isRefetching:w&&!N,isLoadingError:_&&!A,isPaused:m.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:_&&A,isStale:h2(s,n),refetch:this.refetch,promise:ge(this,Cl),isEnabled:za(n.enabled,s)!==!1};if(this.options.experimental_prefetchInRender){const M=R=>{C.status==="error"?R.reject(C.error):C.data!==void 0&&R.resolve(C.data)},k=()=>{const R=St(this,Cl,C.promise=o_());M(R)},E=ge(this,Cl);switch(E.status){case"pending":s.queryHash===r.queryHash&&M(E);break;case"fulfilled":(C.status==="error"||C.data!==E.value)&&k();break;case"rejected":(C.status!=="error"||C.error!==E.reason)&&k();break}}return C}updateResult(){const s=ge(this,Pr),n=this.createResult(ge(this,Ts),this.options);if(St(this,qc,ge(this,Ts).state),St(this,Au,this.options),ge(this,qc).data!==void 0&&St(this,Du,ge(this,Ts)),$g(n,s))return;St(this,Pr,n);const r=()=>{if(!s)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!ge(this,Ou).size)return!0;const l=new Set(i??ge(this,Ou));return this.options.throwOnError&&l.add("error"),Object.keys(ge(this,Pr)).some(o=>{const c=o;return ge(this,Pr)[c]!==s[c]&&l.has(c)})};gs(this,Hs,LO).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&gs(this,Hs,m_).call(this)}},Jr=new WeakMap,Ts=new WeakMap,Tf=new WeakMap,Pr=new WeakMap,qc=new WeakMap,Au=new WeakMap,Cl=new WeakMap,Mo=new WeakMap,Af=new WeakMap,Mu=new WeakMap,Du=new WeakMap,zc=new WeakMap,$c=new WeakMap,Do=new WeakMap,Ou=new WeakMap,Hs=new WeakSet,Dm=function(s){gs(this,Hs,x_).call(this);let n=ge(this,Ts).fetch(this.options,s);return s!=null&&s.throwOnError||(n=n.catch(Ar)),n},d_=function(){gs(this,Hs,f_).call(this);const s=zo(this.options.staleTime,ge(this,Ts));if(sd||ge(this,Pr).isStale||!a_(s))return;const r=PO(ge(this,Pr).dataUpdatedAt,s)+1;St(this,zc,Ac.setTimeout(()=>{ge(this,Pr).isStale||this.updateResult()},r))},u_=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(ge(this,Ts)):this.options.refetchInterval)??!1},h_=function(s){gs(this,Hs,p_).call(this),St(this,Do,s),!(sd||za(this.options.enabled,ge(this,Ts))===!1||!a_(ge(this,Do))||ge(this,Do)===0)&&St(this,$c,Ac.setInterval(()=>{(this.options.refetchIntervalInBackground||u2.isFocused())&&gs(this,Hs,Dm).call(this)},ge(this,Do)))},m_=function(){gs(this,Hs,d_).call(this),gs(this,Hs,h_).call(this,gs(this,Hs,u_).call(this))},f_=function(){ge(this,zc)&&(Ac.clearTimeout(ge(this,zc)),St(this,zc,void 0))},p_=function(){ge(this,$c)&&(Ac.clearInterval(ge(this,$c)),St(this,$c,void 0))},x_=function(){const s=ge(this,Jr).getQueryCache().build(ge(this,Jr),this.options);if(s===ge(this,Ts))return;const n=ge(this,Ts);St(this,Ts,s),St(this,Tf,s.state),this.hasListeners()&&(n==null||n.removeObserver(this),s.addObserver(this))},LO=function(s){$n.batch(()=>{s.listeners&&this.listeners.forEach(n=>{n(ge(this,Pr))}),ge(this,Jr).getQueryCache().notify({query:ge(this,Ts),type:"observerResultsUpdated"})})},q6);function $ee(t,s){return za(s.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&s.retryOnMount===!1)}function wP(t,s){return $ee(t,s)||t.state.data!==void 0&&g_(t,s,s.refetchOnMount)}function g_(t,s,n){if(za(s.enabled,t)!==!1&&zo(s.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&h2(t,s)}return!1}function NP(t,s,n,r){return(t!==s||za(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&h2(t,n)}function h2(t,s){return za(s.enabled,t)!==!1&&t.isStaleByTime(zo(s.staleTime,t))}function Uee(t,s){return!$g(t.getCurrentResult(),s)}function _P(t){return{onFetch:(s,n)=>{var d,m,h,p,g;const r=s.options,a=(h=(m=(d=s.fetchOptions)==null?void 0:d.meta)==null?void 0:m.fetchMore)==null?void 0:h.direction,i=((p=s.state.data)==null?void 0:p.pages)||[],l=((g=s.state.data)==null?void 0:g.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const u=async()=>{let v=!1;const y=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(s.signal.aborted?v=!0:s.signal.addEventListener("abort",()=>{v=!0}),s.signal)})},j=AO(s.options,s.fetchOptions),w=async(N,_,T)=>{if(v)return Promise.reject();if(_==null&&N.pages.length)return Promise.resolve(N);const P=(()=>{const k={client:s.client,queryKey:s.queryKey,pageParam:_,direction:T?"backward":"forward",meta:s.options.meta};return y(k),k})(),C=await j(P),{maxPages:O}=s.options,M=T?Oee:Dee;return{pages:M(N.pages,C,O),pageParams:M(N.pageParams,_,O)}};if(a&&i.length){const N=a==="backward",_=N?Vee:SP,T={pages:i,pageParams:l},A=_(r,T);o=await w(T,A,N)}else{const N=t??i.length;do{const _=c===0?l[0]??r.initialPageParam:SP(r,o);if(c>0&&_==null)break;o=await w(o,_),c++}while(c<N)}return o};s.options.persister?s.fetchFn=()=>{var v,y;return(y=(v=s.options).persister)==null?void 0:y.call(v,u,{client:s.client,queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},n)}:s.fetchFn=u}}}function SP(t,{pages:s,pageParams:n}){const r=s.length-1;return s.length>0?t.getNextPageParam(s[r],s,n[r],n):void 0}function Vee(t,{pages:s,pageParams:n}){var r;return s.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,s[0],s,n[0],n):void 0}var Mf,Fi,Tr,Uc,Li,Co,z6,Wee=(z6=class extends RO{constructor(s){super();Kt(this,Li);Kt(this,Mf);Kt(this,Fi);Kt(this,Tr);Kt(this,Uc);St(this,Mf,s.client),this.mutationId=s.mutationId,St(this,Tr,s.mutationCache),St(this,Fi,[]),this.state=s.state||IO(),this.setOptions(s.options),this.scheduleGc()}setOptions(s){this.options=s,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(s){ge(this,Fi).includes(s)||(ge(this,Fi).push(s),this.clearGcTimeout(),ge(this,Tr).notify({type:"observerAdded",mutation:this,observer:s}))}removeObserver(s){St(this,Fi,ge(this,Fi).filter(n=>n!==s)),this.scheduleGc(),ge(this,Tr).notify({type:"observerRemoved",mutation:this,observer:s})}optionalRemove(){ge(this,Fi).length||(this.state.status==="pending"?this.scheduleGc():ge(this,Tr).remove(this))}continue(){var s;return((s=ge(this,Uc))==null?void 0:s.continue())??this.execute(this.state.variables)}async execute(s){var l,o,c,u,d,m,h,p,g,v,y,j,w,N,_,T,A,P,C,O;const n=()=>{gs(this,Li,Co).call(this,{type:"continue"})},r={client:ge(this,Mf),meta:this.options.meta,mutationKey:this.options.mutationKey};St(this,Uc,OO({fn:()=>this.options.mutationFn?this.options.mutationFn(s,r):Promise.reject(new Error("No mutationFn found")),onFail:(M,k)=>{gs(this,Li,Co).call(this,{type:"failed",failureCount:M,error:k})},onPause:()=>{gs(this,Li,Co).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ge(this,Tr).canRun(this)}));const a=this.state.status==="pending",i=!ge(this,Uc).canStart();try{if(a)n();else{gs(this,Li,Co).call(this,{type:"pending",variables:s,isPaused:i}),await((o=(l=ge(this,Tr).config).onMutate)==null?void 0:o.call(l,s,this,r));const k=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,s,r));k!==this.state.context&&gs(this,Li,Co).call(this,{type:"pending",context:k,variables:s,isPaused:i})}const M=await ge(this,Uc).start();return await((m=(d=ge(this,Tr).config).onSuccess)==null?void 0:m.call(d,M,s,this.state.context,this,r)),await((p=(h=this.options).onSuccess)==null?void 0:p.call(h,M,s,this.state.context,r)),await((v=(g=ge(this,Tr).config).onSettled)==null?void 0:v.call(g,M,null,this.state.variables,this.state.context,this,r)),await((j=(y=this.options).onSettled)==null?void 0:j.call(y,M,null,s,this.state.context,r)),gs(this,Li,Co).call(this,{type:"success",data:M}),M}catch(M){try{throw await((N=(w=ge(this,Tr).config).onError)==null?void 0:N.call(w,M,s,this.state.context,this,r)),await((T=(_=this.options).onError)==null?void 0:T.call(_,M,s,this.state.context,r)),await((P=(A=ge(this,Tr).config).onSettled)==null?void 0:P.call(A,void 0,M,this.state.variables,this.state.context,this,r)),await((O=(C=this.options).onSettled)==null?void 0:O.call(C,void 0,M,s,this.state.context,r)),M}finally{gs(this,Li,Co).call(this,{type:"error",error:M})}}finally{ge(this,Tr).runNext(this)}}},Mf=new WeakMap,Fi=new WeakMap,Tr=new WeakMap,Uc=new WeakMap,Li=new WeakSet,Co=function(s){const n=r=>{switch(s.type){case"failed":return{...r,failureCount:s.failureCount,failureReason:s.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:s.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:s.isPaused,status:"pending",variables:s.variables,submittedAt:Date.now()};case"success":return{...r,data:s.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:s.error,failureCount:r.failureCount+1,failureReason:s.error,isPaused:!1,status:"error"}}};this.state=n(this.state),$n.batch(()=>{ge(this,Fi).forEach(r=>{r.onMutationUpdate(s)}),ge(this,Tr).notify({mutation:this,type:"updated",action:s})})},z6);function IO(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var kl,ui,Df,$6,Hee=($6=class extends gh{constructor(s={}){super();Kt(this,kl);Kt(this,ui);Kt(this,Df);this.config=s,St(this,kl,new Set),St(this,ui,new Map),St(this,Df,0)}build(s,n,r){const a=new Wee({client:s,mutationCache:this,mutationId:++Sx(this,Df)._,options:s.defaultMutationOptions(n),state:r});return this.add(a),a}add(s){ge(this,kl).add(s);const n=Ix(s);if(typeof n=="string"){const r=ge(this,ui).get(n);r?r.push(s):ge(this,ui).set(n,[s])}this.notify({type:"added",mutation:s})}remove(s){if(ge(this,kl).delete(s)){const n=Ix(s);if(typeof n=="string"){const r=ge(this,ui).get(n);if(r)if(r.length>1){const a=r.indexOf(s);a!==-1&&r.splice(a,1)}else r[0]===s&&ge(this,ui).delete(n)}}this.notify({type:"removed",mutation:s})}canRun(s){const n=Ix(s);if(typeof n=="string"){const r=ge(this,ui).get(n),a=r==null?void 0:r.find(i=>i.state.status==="pending");return!a||a===s}else return!0}runNext(s){var r;const n=Ix(s);if(typeof n=="string"){const a=(r=ge(this,ui).get(n))==null?void 0:r.find(i=>i!==s&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){$n.batch(()=>{ge(this,kl).forEach(s=>{this.notify({type:"removed",mutation:s})}),ge(this,kl).clear(),ge(this,ui).clear()})}getAll(){return Array.from(ge(this,kl))}find(s){const n={exact:!0,...s};return this.getAll().find(r=>gP(n,r))}findAll(s={}){return this.getAll().filter(n=>gP(s,n))}notify(s){$n.batch(()=>{this.listeners.forEach(n=>{n(s)})})}resumePausedMutations(){const s=this.getAll().filter(n=>n.state.isPaused);return $n.batch(()=>Promise.all(s.map(n=>n.continue().catch(Ar))))}},kl=new WeakMap,ui=new WeakMap,Df=new WeakMap,$6);function Ix(t){var s;return(s=t.options.scope)==null?void 0:s.id}var El,Oo,Xr,Pl,Bl,pg,v_,U6,Kee=(U6=class extends gh{constructor(n,r){super();Kt(this,Bl);Kt(this,El);Kt(this,Oo);Kt(this,Xr);Kt(this,Pl);St(this,El,n),this.setOptions(r),this.bindMethods(),gs(this,Bl,pg).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var a;const r=this.options;this.options=ge(this,El).defaultMutationOptions(n),$g(this.options,r)||ge(this,El).getMutationCache().notify({type:"observerOptionsUpdated",mutation:ge(this,Xr),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&nd(r.mutationKey)!==nd(this.options.mutationKey)?this.reset():((a=ge(this,Xr))==null?void 0:a.state.status)==="pending"&&ge(this,Xr).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=ge(this,Xr))==null||n.removeObserver(this)}onMutationUpdate(n){gs(this,Bl,pg).call(this),gs(this,Bl,v_).call(this,n)}getCurrentResult(){return ge(this,Oo)}reset(){var n;(n=ge(this,Xr))==null||n.removeObserver(this),St(this,Xr,void 0),gs(this,Bl,pg).call(this),gs(this,Bl,v_).call(this)}mutate(n,r){var a;return St(this,Pl,r),(a=ge(this,Xr))==null||a.removeObserver(this),St(this,Xr,ge(this,El).getMutationCache().build(ge(this,El),this.options)),ge(this,Xr).addObserver(this),ge(this,Xr).execute(n)}},El=new WeakMap,Oo=new WeakMap,Xr=new WeakMap,Pl=new WeakMap,Bl=new WeakSet,pg=function(){var r;const n=((r=ge(this,Xr))==null?void 0:r.state)??IO();St(this,Oo,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},v_=function(n){$n.batch(()=>{var r,a,i,l,o,c,u,d;if(ge(this,Pl)&&this.hasListeners()){const m=ge(this,Oo).variables,h=ge(this,Oo).context,p={client:ge(this,El),meta:this.options.meta,mutationKey:this.options.mutationKey};(n==null?void 0:n.type)==="success"?((a=(r=ge(this,Pl)).onSuccess)==null||a.call(r,n.data,m,h,p),(l=(i=ge(this,Pl)).onSettled)==null||l.call(i,n.data,null,m,h,p)):(n==null?void 0:n.type)==="error"&&((c=(o=ge(this,Pl)).onError)==null||c.call(o,n.error,m,h,p),(d=(u=ge(this,Pl)).onSettled)==null||d.call(u,void 0,n.error,m,h,p))}this.listeners.forEach(m=>{m(ge(this,Oo))})})},U6),Ii,V6,Gee=(V6=class extends gh{constructor(s={}){super();Kt(this,Ii);this.config=s,St(this,Ii,new Map)}build(s,n,r){const a=n.queryKey,i=n.queryHash??c2(a,n);let l=this.get(i);return l||(l=new qee({client:s,queryKey:a,queryHash:i,options:s.defaultQueryOptions(n),state:r,defaultOptions:s.getQueryDefaults(a)}),this.add(l)),l}add(s){ge(this,Ii).has(s.queryHash)||(ge(this,Ii).set(s.queryHash,s),this.notify({type:"added",query:s}))}remove(s){const n=ge(this,Ii).get(s.queryHash);n&&(s.destroy(),n===s&&ge(this,Ii).delete(s.queryHash),this.notify({type:"removed",query:s}))}clear(){$n.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}get(s){return ge(this,Ii).get(s)}getAll(){return[...ge(this,Ii).values()]}find(s){const n={exact:!0,...s};return this.getAll().find(r=>xP(n,r))}findAll(s={}){const n=this.getAll();return Object.keys(s).length>0?n.filter(r=>xP(s,r)):n}notify(s){$n.batch(()=>{this.listeners.forEach(n=>{n(s)})})}onFocus(){$n.batch(()=>{this.getAll().forEach(s=>{s.onFocus()})})}onOnline(){$n.batch(()=>{this.getAll().forEach(s=>{s.onOnline()})})}},Ii=new WeakMap,V6),Cn,Ro,Fo,Ru,Fu,Lo,Lu,Iu,W6,Yee=(W6=class{constructor(t={}){Kt(this,Cn);Kt(this,Ro);Kt(this,Fo);Kt(this,Ru);Kt(this,Fu);Kt(this,Lo);Kt(this,Lu);Kt(this,Iu);St(this,Cn,t.queryCache||new Gee),St(this,Ro,t.mutationCache||new Hee),St(this,Fo,t.defaultOptions||{}),St(this,Ru,new Map),St(this,Fu,new Map),St(this,Lo,0)}mount(){Sx(this,Lo)._++,ge(this,Lo)===1&&(St(this,Lu,u2.subscribe(async t=>{t&&(await this.resumePausedMutations(),ge(this,Cn).onFocus())})),St(this,Iu,Ug.subscribe(async t=>{t&&(await this.resumePausedMutations(),ge(this,Cn).onOnline())})))}unmount(){var t,s;Sx(this,Lo)._--,ge(this,Lo)===0&&((t=ge(this,Lu))==null||t.call(this),St(this,Lu,void 0),(s=ge(this,Iu))==null||s.call(this),St(this,Iu,void 0))}isFetching(t){return ge(this,Cn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return ge(this,Ro).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const s=this.defaultQueryOptions({queryKey:t});return(n=ge(this,Cn).get(s.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const s=this.defaultQueryOptions(t),n=ge(this,Cn).build(this,s),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(zo(s.staleTime,n))&&this.prefetchQuery(s),Promise.resolve(r))}getQueriesData(t){return ge(this,Cn).findAll(t).map(({queryKey:s,state:n})=>{const r=n.data;return[s,r]})}setQueryData(t,s,n){const r=this.defaultQueryOptions({queryKey:t}),a=ge(this,Cn).get(r.queryHash),i=a==null?void 0:a.state.data,l=Tee(s,i);if(l!==void 0)return ge(this,Cn).build(this,r).setData(l,{...n,manual:!0})}setQueriesData(t,s,n){return $n.batch(()=>ge(this,Cn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,s,n)]))}getQueryState(t){var n;const s=this.defaultQueryOptions({queryKey:t});return(n=ge(this,Cn).get(s.queryHash))==null?void 0:n.state}removeQueries(t){const s=ge(this,Cn);$n.batch(()=>{s.findAll(t).forEach(n=>{s.remove(n)})})}resetQueries(t,s){const n=ge(this,Cn);return $n.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},s)))}cancelQueries(t,s={}){const n={revert:!0,...s},r=$n.batch(()=>ge(this,Cn).findAll(t).map(a=>a.cancel(n)));return Promise.all(r).then(Ar).catch(Ar)}invalidateQueries(t,s={}){return $n.batch(()=>(ge(this,Cn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},s)))}refetchQueries(t,s={}){const n={...s,cancelRefetch:s.cancelRefetch??!0},r=$n.batch(()=>ge(this,Cn).findAll(t).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,n);return n.throwOnError||(i=i.catch(Ar)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Ar)}fetchQuery(t){const s=this.defaultQueryOptions(t);s.retry===void 0&&(s.retry=!1);const n=ge(this,Cn).build(this,s);return n.isStaleByTime(zo(s.staleTime,n))?n.fetch(s):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ar).catch(Ar)}fetchInfiniteQuery(t){return t.behavior=_P(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ar).catch(Ar)}ensureInfiniteQueryData(t){return t.behavior=_P(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Ug.isOnline()?ge(this,Ro).resumePausedMutations():Promise.resolve()}getQueryCache(){return ge(this,Cn)}getMutationCache(){return ge(this,Ro)}getDefaultOptions(){return ge(this,Fo)}setDefaultOptions(t){St(this,Fo,t)}setQueryDefaults(t,s){ge(this,Ru).set(nd(t),{queryKey:t,defaultOptions:s})}getQueryDefaults(t){const s=[...ge(this,Ru).values()],n={};return s.forEach(r=>{lf(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,s){ge(this,Fu).set(nd(t),{mutationKey:t,defaultOptions:s})}getMutationDefaults(t){const s=[...ge(this,Fu).values()],n={};return s.forEach(r=>{lf(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const s={...ge(this,Fo).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return s.queryHash||(s.queryHash=c2(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===d2&&(s.enabled=!1),s}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...ge(this,Fo).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){ge(this,Cn).clear(),ge(this,Ro).clear()}},Cn=new WeakMap,Ro=new WeakMap,Fo=new WeakMap,Ru=new WeakMap,Fu=new WeakMap,Lo=new WeakMap,Lu=new WeakMap,Iu=new WeakMap,W6),BO=b.createContext(void 0),Yt=t=>{const s=b.useContext(BO);if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},Qee=({client:t,children:s})=>(b.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(BO.Provider,{value:t,children:s})),qO=b.createContext(!1),Jee=()=>b.useContext(qO);qO.Provider;function Xee(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Zee=b.createContext(Xee()),ete=()=>b.useContext(Zee),tte=(t,s)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(s.isReset()||(t.retryOnMount=!1))},ste=t=>{b.useEffect(()=>{t.clearReset()},[t])},nte=({result:t,errorResetBoundary:s,throwOnError:n,query:r,suspense:a})=>t.isError&&!s.isReset()&&!t.isFetching&&r&&(a&&t.data===void 0||MO(n,[t.error,r])),rte=t=>{if(t.suspense){const n=a=>a==="static"?a:Math.max(a??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...a)=>n(r(...a)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},ate=(t,s)=>t.isLoading&&t.isFetching&&!s,ite=(t,s)=>(t==null?void 0:t.suspense)&&s.isPending,CP=(t,s,n)=>s.fetchOptimistic(t).catch(()=>{n.clearReset()});function lte(t,s,n){var m,h,p,g,v;const r=Jee(),a=ete(),i=Yt(),l=i.defaultQueryOptions(t);(h=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||h.call(m,l),l._optimisticResults=r?"isRestoring":"optimistic",rte(l),tte(l,a),ste(a);const o=!i.getQueryCache().get(l.queryHash),[c]=b.useState(()=>new s(i,l)),u=c.getOptimisticResult(l),d=!r&&t.subscribed!==!1;if(b.useSyncExternalStore(b.useCallback(y=>{const j=d?c.subscribe($n.batchCalls(y)):Ar;return c.updateResult(),j},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),b.useEffect(()=>{c.setOptions(l)},[l,c]),ite(l,u))throw CP(l,c,a);if(nte({result:u,errorResetBoundary:a,throwOnError:l.throwOnError,query:i.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw u.error;if((g=(p=i.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||g.call(p,l,u),l.experimental_prefetchInRender&&!sd&&ate(u,r)){const y=o?CP(l,c,a):(v=i.getQueryCache().get(l.queryHash))==null?void 0:v.promise;y==null||y.catch(Ar).finally(()=>{c.updateResult()})}return l.notifyOnChangeProps?u:c.trackResult(u)}function me(t,s){return lte(t,zee)}function Le(t,s){const n=Yt(),[r]=b.useState(()=>new Kee(n,t));b.useEffect(()=>{r.setOptions(t)},[r,t]);const a=b.useSyncExternalStore(b.useCallback(l=>r.subscribe($n.batchCalls(l)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=b.useCallback((l,o)=>{r.mutate(l,o).catch(Ar)},[r]);if(a.error&&MO(r.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}const Gt=b.forwardRef(({className:t,...s},n)=>e.jsx("textarea",{className:tt("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...s}));Gt.displayName="Textarea";var ote=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],cte=ote.reduce((t,s)=>{const n=V1(`Primitive.${s}`),r=b.forwardRef((a,i)=>{const{asChild:l,...o}=a,c=l?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(c,{...o,ref:i})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{}),dte="Label",zO=b.forwardRef((t,s)=>e.jsx(cte.label,{...t,ref:s,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=t.onMouseDown)==null||a.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));zO.displayName=dte;var $O=zO;const ute=oh("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ee=b.forwardRef(({className:t,...s},n)=>e.jsx($O,{ref:n,className:tt(ute(),t),...s}));ee.displayName=$O.displayName;function K0(t){const s=b.useRef({value:t,previous:t});return b.useMemo(()=>(s.current.value!==t&&(s.current.previous=s.current.value,s.current.value=t),s.current.previous),[t])}var G0="Checkbox",[hte]=vr(G0),[mte,m2]=hte(G0);function fte(t){const{__scopeCheckbox:s,checked:n,children:r,defaultChecked:a,disabled:i,form:l,name:o,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:m}=t,[h,p]=Ja({prop:n,defaultProp:a??!1,onChange:c,caller:G0}),[g,v]=b.useState(null),[y,j]=b.useState(null),w=b.useRef(!1),N=g?!!l||!!g.closest("form"):!0,_={checked:h,disabled:i,setChecked:p,control:g,setControl:v,name:o,form:l,value:d,hasConsumerStoppedPropagationRef:w,required:u,defaultChecked:$o(a)?!1:a,isFormControl:N,bubbleInput:y,setBubbleInput:j};return e.jsx(mte,{scope:s,..._,children:pte(m)?m(_):r})}var UO="CheckboxTrigger",VO=b.forwardRef(({__scopeCheckbox:t,onKeyDown:s,onClick:n,...r},a)=>{const{control:i,value:l,disabled:o,checked:c,required:u,setControl:d,setChecked:m,hasConsumerStoppedPropagationRef:h,isFormControl:p,bubbleInput:g}=m2(UO,t),v=xs(a,d),y=b.useRef(c);return b.useEffect(()=>{const j=i==null?void 0:i.form;if(j){const w=()=>m(y.current);return j.addEventListener("reset",w),()=>j.removeEventListener("reset",w)}},[i,m]),e.jsx(Ut.button,{type:"button",role:"checkbox","aria-checked":$o(c)?"mixed":c,"aria-required":u,"data-state":YO(c),"data-disabled":o?"":void 0,disabled:o,value:l,...r,ref:v,onKeyDown:jt(s,j=>{j.key==="Enter"&&j.preventDefault()}),onClick:jt(n,j=>{m(w=>$o(w)?!0:!w),g&&p&&(h.current=j.isPropagationStopped(),h.current||j.stopPropagation())})})});VO.displayName=UO;var f2=b.forwardRef((t,s)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:i,required:l,disabled:o,value:c,onCheckedChange:u,form:d,...m}=t;return e.jsx(fte,{__scopeCheckbox:n,checked:a,defaultChecked:i,disabled:o,required:l,onCheckedChange:u,name:r,form:d,value:c,internal_do_not_use_render:({isFormControl:h})=>e.jsxs(e.Fragment,{children:[e.jsx(VO,{...m,ref:s,__scopeCheckbox:n}),h&&e.jsx(GO,{__scopeCheckbox:n})]})})});f2.displayName=G0;var WO="CheckboxIndicator",HO=b.forwardRef((t,s)=>{const{__scopeCheckbox:n,forceMount:r,...a}=t,i=m2(WO,n);return e.jsx(yr,{present:r||$o(i.checked)||i.checked===!0,children:e.jsx(Ut.span,{"data-state":YO(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:s,style:{pointerEvents:"none",...t.style}})})});HO.displayName=WO;var KO="CheckboxBubbleInput",GO=b.forwardRef(({__scopeCheckbox:t,...s},n)=>{const{control:r,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:l,required:o,disabled:c,name:u,value:d,form:m,bubbleInput:h,setBubbleInput:p}=m2(KO,t),g=xs(n,p),v=K0(i),y=B0(r);b.useEffect(()=>{const w=h;if(!w)return;const N=window.HTMLInputElement.prototype,T=Object.getOwnPropertyDescriptor(N,"checked").set,A=!a.current;if(v!==i&&T){const P=new Event("click",{bubbles:A});w.indeterminate=$o(i),T.call(w,$o(i)?!1:i),w.dispatchEvent(P)}},[h,v,i,a]);const j=b.useRef($o(i)?!1:i);return e.jsx(Ut.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??j.current,required:o,disabled:c,name:u,value:d,form:m,...s,tabIndex:-1,ref:g,style:{...s.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});GO.displayName=KO;function pte(t){return typeof t=="function"}function $o(t){return t==="indeterminate"}function YO(t){return $o(t)?"indeterminate":t?"checked":"unchecked"}const ba=b.forwardRef(({className:t,...s},n)=>e.jsx(f2,{ref:n,className:tt("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...s,children:e.jsx(HO,{className:tt("flex items-center justify-center text-current"),children:e.jsx(Uf,{className:"h-4 w-4"})})}));ba.displayName=f2.displayName;function kP(t){const s=xte(t),n=b.forwardRef((r,a)=>{const{children:i,...l}=r,o=b.Children.toArray(i),c=o.find(vte);if(c){const u=c.props.children,d=o.map(m=>m===c?b.Children.count(u)>1?b.Children.only(null):b.isValidElement(u)?u.props.children:null:m);return e.jsx(s,{...l,ref:a,children:b.isValidElement(u)?b.cloneElement(u,void 0,d):null})}return e.jsx(s,{...l,ref:a,children:i})});return n.displayName=`${t}.Slot`,n}function xte(t){const s=b.forwardRef((n,r)=>{const{children:a,...i}=n;if(b.isValidElement(a)){const l=bte(a),o=yte(i,a.props);return a.type!==b.Fragment&&(o.ref=r?Fr(r,l):l),b.cloneElement(a,o)}return b.Children.count(a)>1?b.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var gte=Symbol("radix.slottable");function vte(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===gte}function yte(t,s){const n={...s};for(const r in s){const a=t[r],i=s[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...o)=>{const c=i(...o);return a(...o),c}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...t,...n}}function bte(t){var r,a;let s=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function p2(t){const s=t+"CollectionProvider",[n,r]=vr(s),[a,i]=n(s,{collectionRef:{current:null},itemMap:new Map}),l=v=>{const{scope:y,children:j}=v,w=Be.useRef(null),N=Be.useRef(new Map).current;return e.jsx(a,{scope:y,itemMap:N,collectionRef:w,children:j})};l.displayName=s;const o=t+"CollectionSlot",c=kP(o),u=Be.forwardRef((v,y)=>{const{scope:j,children:w}=v,N=i(o,j),_=xs(y,N.collectionRef);return e.jsx(c,{ref:_,children:w})});u.displayName=o;const d=t+"CollectionItemSlot",m="data-radix-collection-item",h=kP(d),p=Be.forwardRef((v,y)=>{const{scope:j,children:w,...N}=v,_=Be.useRef(null),T=xs(y,_),A=i(d,j);return Be.useEffect(()=>(A.itemMap.set(_,{ref:_,...N}),()=>void A.itemMap.delete(_))),e.jsx(h,{[m]:"",ref:T,children:w})});p.displayName=d;function g(v){const y=i(t+"CollectionConsumer",v);return Be.useCallback(()=>{const w=y.collectionRef.current;if(!w)return[];const N=Array.from(w.querySelectorAll(`[${m}]`));return Array.from(y.itemMap.values()).sort((A,P)=>N.indexOf(A.ref.current)-N.indexOf(P.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:l,Slot:u,ItemSlot:p},g,r]}var jte=b.createContext(void 0);function ep(t){const s=b.useContext(jte);return t||s||"ltr"}var $b="rovingFocusGroup.onEntryFocus",wte={bubbles:!1,cancelable:!0},tp="RovingFocusGroup",[y_,QO,Nte]=p2(tp),[_te,vh]=vr(tp,[Nte]),[Ste,Cte]=_te(tp),JO=b.forwardRef((t,s)=>e.jsx(y_.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(y_.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(kte,{...t,ref:s})})}));JO.displayName=tp;var kte=b.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...m}=t,h=b.useRef(null),p=xs(s,h),g=ep(i),[v,y]=Ja({prop:l,defaultProp:o??null,onChange:c,caller:tp}),[j,w]=b.useState(!1),N=el(u),_=QO(n),T=b.useRef(!1),[A,P]=b.useState(0);return b.useEffect(()=>{const C=h.current;if(C)return C.addEventListener($b,N),()=>C.removeEventListener($b,N)},[N]),e.jsx(Ste,{scope:n,orientation:r,dir:g,loop:a,currentTabStopId:v,onItemFocus:b.useCallback(C=>y(C),[y]),onItemShiftTab:b.useCallback(()=>w(!0),[]),onFocusableItemAdd:b.useCallback(()=>P(C=>C+1),[]),onFocusableItemRemove:b.useCallback(()=>P(C=>C-1),[]),children:e.jsx(Ut.div,{tabIndex:j||A===0?-1:0,"data-orientation":r,...m,ref:p,style:{outline:"none",...t.style},onMouseDown:jt(t.onMouseDown,()=>{T.current=!0}),onFocus:jt(t.onFocus,C=>{const O=!T.current;if(C.target===C.currentTarget&&O&&!j){const M=new CustomEvent($b,wte);if(C.currentTarget.dispatchEvent(M),!M.defaultPrevented){const k=_().filter(V=>V.focusable),E=k.find(V=>V.active),R=k.find(V=>V.id===v),z=[E,R,...k].filter(Boolean).map(V=>V.ref.current);eR(z,d)}}T.current=!1}),onBlur:jt(t.onBlur,()=>w(!1))})})}),XO="RovingFocusGroupItem",ZO=b.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:i,children:l,...o}=t,c=Vn(),u=i||c,d=Cte(XO,n),m=d.currentTabStopId===u,h=QO(n),{onFocusableItemAdd:p,onFocusableItemRemove:g,currentTabStopId:v}=d;return b.useEffect(()=>{if(r)return p(),()=>g()},[r,p,g]),e.jsx(y_.ItemSlot,{scope:n,id:u,focusable:r,active:a,children:e.jsx(Ut.span,{tabIndex:m?0:-1,"data-orientation":d.orientation,...o,ref:s,onMouseDown:jt(t.onMouseDown,y=>{r?d.onItemFocus(u):y.preventDefault()}),onFocus:jt(t.onFocus,()=>d.onItemFocus(u)),onKeyDown:jt(t.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){d.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const j=Tte(y,d.orientation,d.dir);if(j!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let N=h().filter(_=>_.focusable).map(_=>_.ref.current);if(j==="last")N.reverse();else if(j==="prev"||j==="next"){j==="prev"&&N.reverse();const _=N.indexOf(y.currentTarget);N=d.loop?Ate(N,_+1):N.slice(_+1)}setTimeout(()=>eR(N))}}),children:typeof l=="function"?l({isCurrentTabStop:m,hasTabStop:v!=null}):l})})});ZO.displayName=XO;var Ete={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Pte(t,s){return s!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Tte(t,s,n){const r=Pte(t.key,n);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Ete[r]}function eR(t,s=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:s}),document.activeElement!==n))return}function Ate(t,s){return t.map((n,r)=>t[(s+r)%t.length])}var x2=JO,g2=ZO,v2="Radio",[Mte,tR]=vr(v2),[Dte,Ote]=Mte(v2),sR=b.forwardRef((t,s)=>{const{__scopeRadio:n,name:r,checked:a=!1,required:i,disabled:l,value:o="on",onCheck:c,form:u,...d}=t,[m,h]=b.useState(null),p=xs(s,y=>h(y)),g=b.useRef(!1),v=m?u||!!m.closest("form"):!0;return e.jsxs(Dte,{scope:n,checked:a,disabled:l,children:[e.jsx(Ut.button,{type:"button",role:"radio","aria-checked":a,"data-state":iR(a),"data-disabled":l?"":void 0,disabled:l,value:o,...d,ref:p,onClick:jt(t.onClick,y=>{a||c==null||c(),v&&(g.current=y.isPropagationStopped(),g.current||y.stopPropagation())})}),v&&e.jsx(aR,{control:m,bubbles:!g.current,name:r,value:o,checked:a,required:i,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});sR.displayName=v2;var nR="RadioIndicator",rR=b.forwardRef((t,s)=>{const{__scopeRadio:n,forceMount:r,...a}=t,i=Ote(nR,n);return e.jsx(yr,{present:r||i.checked,children:e.jsx(Ut.span,{"data-state":iR(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:s})})});rR.displayName=nR;var Rte="RadioBubbleInput",aR=b.forwardRef(({__scopeRadio:t,control:s,checked:n,bubbles:r=!0,...a},i)=>{const l=b.useRef(null),o=xs(l,i),c=K0(n),u=B0(s);return b.useEffect(()=>{const d=l.current;if(!d)return;const m=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==n&&p){const g=new Event("click",{bubbles:r});p.call(d,n),d.dispatchEvent(g)}},[c,n,r]),e.jsx(Ut.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:o,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});aR.displayName=Rte;function iR(t){return t?"checked":"unchecked"}var Fte=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Y0="RadioGroup",[Lte]=vr(Y0,[vh,tR]),lR=vh(),oR=tR(),[Ite,Bte]=Lte(Y0),cR=b.forwardRef((t,s)=>{const{__scopeRadioGroup:n,name:r,defaultValue:a,value:i,required:l=!1,disabled:o=!1,orientation:c,dir:u,loop:d=!0,onValueChange:m,...h}=t,p=lR(n),g=ep(u),[v,y]=Ja({prop:i,defaultProp:a??null,onChange:m,caller:Y0});return e.jsx(Ite,{scope:n,name:r,required:l,disabled:o,value:v,onValueChange:y,children:e.jsx(x2,{asChild:!0,...p,orientation:c,dir:g,loop:d,children:e.jsx(Ut.div,{role:"radiogroup","aria-required":l,"aria-orientation":c,"data-disabled":o?"":void 0,dir:g,...h,ref:s})})})});cR.displayName=Y0;var dR="RadioGroupItem",uR=b.forwardRef((t,s)=>{const{__scopeRadioGroup:n,disabled:r,...a}=t,i=Bte(dR,n),l=i.disabled||r,o=lR(n),c=oR(n),u=b.useRef(null),d=xs(s,u),m=i.value===a.value,h=b.useRef(!1);return b.useEffect(()=>{const p=v=>{Fte.includes(v.key)&&(h.current=!0)},g=()=>h.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",g)}},[]),e.jsx(g2,{asChild:!0,...o,focusable:!l,active:m,children:e.jsx(sR,{disabled:l,required:i.required,checked:m,...c,...a,name:i.name,ref:d,onCheck:()=>i.onValueChange(a.value),onKeyDown:jt(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:jt(a.onFocus,()=>{var p;h.current&&((p=u.current)==null||p.click())})})})});uR.displayName=dR;var qte="RadioGroupIndicator",hR=b.forwardRef((t,s)=>{const{__scopeRadioGroup:n,...r}=t,a=oR(n);return e.jsx(rR,{...a,...r,ref:s})});hR.displayName=qte;var mR=cR,fR=uR,zte=hR;const of=b.forwardRef(({className:t,...s},n)=>e.jsx(mR,{className:tt("grid gap-2",t),...s,ref:n}));of.displayName=mR.displayName;const Al=b.forwardRef(({className:t,...s},n)=>e.jsx(fR,{ref:n,className:tt("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(zte,{className:"flex items-center justify-center",children:e.jsx(L5,{className:"h-3.5 w-3.5 fill-primary"})})}));Al.displayName=fR.displayName;function EP(t,[s,n]){return Math.min(n,Math.max(s,t))}function $te(t){const s=Ute(t),n=b.forwardRef((r,a)=>{const{children:i,...l}=r,o=b.Children.toArray(i),c=o.find(Wte);if(c){const u=c.props.children,d=o.map(m=>m===c?b.Children.count(u)>1?b.Children.only(null):b.isValidElement(u)?u.props.children:null:m);return e.jsx(s,{...l,ref:a,children:b.isValidElement(u)?b.cloneElement(u,void 0,d):null})}return e.jsx(s,{...l,ref:a,children:i})});return n.displayName=`${t}.Slot`,n}function Ute(t){const s=b.forwardRef((n,r)=>{const{children:a,...i}=n;if(b.isValidElement(a)){const l=Kte(a),o=Hte(i,a.props);return a.type!==b.Fragment&&(o.ref=r?Fr(r,l):l),b.cloneElement(a,o)}return b.Children.count(a)>1?b.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var Vte=Symbol("radix.slottable");function Wte(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Vte}function Hte(t,s){const n={...s};for(const r in s){const a=t[r],i=s[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...o)=>{const c=i(...o);return a(...o),c}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...t,...n}}function Kte(t){var r,a;let s=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Gte=[" ","Enter","ArrowUp","ArrowDown"],Yte=[" ","Enter"],rd="Select",[Q0,J0,Qte]=p2(rd),[yh]=vr(rd,[Qte,ec]),X0=ec(),[Jte,tc]=yh(rd),[Xte,Zte]=yh(rd),pR=t=>{const{__scopeSelect:s,children:n,open:r,defaultOpen:a,onOpenChange:i,value:l,defaultValue:o,onValueChange:c,dir:u,name:d,autoComplete:m,disabled:h,required:p,form:g}=t,v=X0(s),[y,j]=b.useState(null),[w,N]=b.useState(null),[_,T]=b.useState(!1),A=ep(u),[P,C]=Ja({prop:r,defaultProp:a??!1,onChange:i,caller:rd}),[O,M]=Ja({prop:l,defaultProp:o,onChange:c,caller:rd}),k=b.useRef(null),E=y?g||!!y.closest("form"):!0,[R,F]=b.useState(new Set),z=Array.from(R).map(V=>V.props.value).join(";");return e.jsx(q0,{...v,children:e.jsxs(Jte,{required:p,scope:s,trigger:y,onTriggerChange:j,valueNode:w,onValueNodeChange:N,valueNodeHasChildren:_,onValueNodeHasChildrenChange:T,contentId:Vn(),value:O,onValueChange:M,open:P,onOpenChange:C,dir:A,triggerPointerDownPosRef:k,disabled:h,children:[e.jsx(Q0.Provider,{scope:s,children:e.jsx(Xte,{scope:t.__scopeSelect,onNativeOptionAdd:b.useCallback(V=>{F(U=>new Set(U).add(V))},[]),onNativeOptionRemove:b.useCallback(V=>{F(U=>{const B=new Set(U);return B.delete(V),B})},[]),children:n})}),E?e.jsxs(BR,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:m,value:O,onChange:V=>M(V.target.value),disabled:h,form:g,children:[O===void 0?e.jsx("option",{value:""}):null,Array.from(R)]},z):null]})})};pR.displayName=rd;var xR="SelectTrigger",gR=b.forwardRef((t,s)=>{const{__scopeSelect:n,disabled:r=!1,...a}=t,i=X0(n),l=tc(xR,n),o=l.disabled||r,c=xs(s,l.onTriggerChange),u=J0(n),d=b.useRef("touch"),[m,h,p]=zR(v=>{const y=u().filter(N=>!N.disabled),j=y.find(N=>N.value===l.value),w=$R(y,v,j);w!==void 0&&l.onValueChange(w.value)}),g=v=>{o||(l.onOpenChange(!0),p()),v&&(l.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return e.jsx(Xf,{asChild:!0,...i,children:e.jsx(Ut.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":qR(l.value)?"":void 0,...a,ref:c,onClick:jt(a.onClick,v=>{v.currentTarget.focus(),d.current!=="mouse"&&g(v)}),onPointerDown:jt(a.onPointerDown,v=>{d.current=v.pointerType;const y=v.target;y.hasPointerCapture(v.pointerId)&&y.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(g(v),v.preventDefault())}),onKeyDown:jt(a.onKeyDown,v=>{const y=m.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&h(v.key),!(y&&v.key===" ")&&Gte.includes(v.key)&&(g(),v.preventDefault())})})})});gR.displayName=xR;var vR="SelectValue",yR=b.forwardRef((t,s)=>{const{__scopeSelect:n,className:r,style:a,children:i,placeholder:l="",...o}=t,c=tc(vR,n),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,m=xs(s,c.onValueNodeChange);return lr(()=>{u(d)},[u,d]),e.jsx(Ut.span,{...o,ref:m,style:{pointerEvents:"none"},children:qR(c.value)?e.jsx(e.Fragment,{children:l}):i})});yR.displayName=vR;var ese="SelectIcon",bR=b.forwardRef((t,s)=>{const{__scopeSelect:n,children:r,...a}=t;return e.jsx(Ut.span,{"aria-hidden":!0,...a,ref:s,children:r||""})});bR.displayName=ese;var tse="SelectPortal",jR=t=>e.jsx(hh,{asChild:!0,...t});jR.displayName=tse;var ad="SelectContent",wR=b.forwardRef((t,s)=>{const n=tc(ad,t.__scopeSelect),[r,a]=b.useState();if(lr(()=>{a(new DocumentFragment)},[]),!n.open){const i=r;return i?hd.createPortal(e.jsx(NR,{scope:t.__scopeSelect,children:e.jsx(Q0.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),i):null}return e.jsx(_R,{...t,ref:s})});wR.displayName=ad;var oi=10,[NR,sc]=yh(ad),sse="SelectContentImpl",nse=$te("SelectContent.RemoveScroll"),_R=b.forwardRef((t,s)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:l,side:o,sideOffset:c,align:u,alignOffset:d,arrowPadding:m,collisionBoundary:h,collisionPadding:p,sticky:g,hideWhenDetached:v,avoidCollisions:y,...j}=t,w=tc(ad,n),[N,_]=b.useState(null),[T,A]=b.useState(null),P=xs(s,K=>_(K)),[C,O]=b.useState(null),[M,k]=b.useState(null),E=J0(n),[R,F]=b.useState(!1),z=b.useRef(!1);b.useEffect(()=>{if(N)return T0(N)},[N]),E0();const V=b.useCallback(K=>{const[ae,...se]=E().map(oe=>oe.ref.current),[de]=se.slice(-1),ue=document.activeElement;for(const oe of K)if(oe===ue||(oe==null||oe.scrollIntoView({block:"nearest"}),oe===ae&&T&&(T.scrollTop=0),oe===de&&T&&(T.scrollTop=T.scrollHeight),oe==null||oe.focus(),document.activeElement!==ue))return},[E,T]),U=b.useCallback(()=>V([C,N]),[V,C,N]);b.useEffect(()=>{R&&U()},[R,U]);const{onOpenChange:B,triggerPointerDownPosRef:$}=w;b.useEffect(()=>{if(N){let K={x:0,y:0};const ae=de=>{var ue,oe;K={x:Math.abs(Math.round(de.pageX)-(((ue=$.current)==null?void 0:ue.x)??0)),y:Math.abs(Math.round(de.pageY)-(((oe=$.current)==null?void 0:oe.y)??0))}},se=de=>{K.x<=10&&K.y<=10?de.preventDefault():N.contains(de.target)||B(!1),document.removeEventListener("pointermove",ae),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",ae),document.addEventListener("pointerup",se,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ae),document.removeEventListener("pointerup",se,{capture:!0})}}},[N,B,$]),b.useEffect(()=>{const K=()=>B(!1);return window.addEventListener("blur",K),window.addEventListener("resize",K),()=>{window.removeEventListener("blur",K),window.removeEventListener("resize",K)}},[B]);const[L,I]=zR(K=>{const ae=E().filter(ue=>!ue.disabled),se=ae.find(ue=>ue.ref.current===document.activeElement),de=$R(ae,K,se);de&&setTimeout(()=>de.ref.current.focus())}),W=b.useCallback((K,ae,se)=>{const de=!z.current&&!se;(w.value!==void 0&&w.value===ae||de)&&(O(K),de&&(z.current=!0))},[w.value]),q=b.useCallback(()=>N==null?void 0:N.focus(),[N]),Z=b.useCallback((K,ae,se)=>{const de=!z.current&&!se;(w.value!==void 0&&w.value===ae||de)&&k(K)},[w.value]),Q=r==="popper"?b_:SR,Y=Q===b_?{side:o,sideOffset:c,align:u,alignOffset:d,arrowPadding:m,collisionBoundary:h,collisionPadding:p,sticky:g,hideWhenDetached:v,avoidCollisions:y}:{};return e.jsx(NR,{scope:n,content:N,viewport:T,onViewportChange:A,itemRefCallback:W,selectedItem:C,onItemLeave:q,itemTextRefCallback:Z,focusSelectedItem:U,selectedItemText:M,position:r,isPositioned:R,searchRef:L,children:e.jsx(Gf,{as:nse,allowPinchZoom:!0,children:e.jsx(Kf,{asChild:!0,trapped:w.open,onMountAutoFocus:K=>{K.preventDefault()},onUnmountAutoFocus:jt(a,K=>{var ae;(ae=w.trigger)==null||ae.focus({preventScroll:!0}),K.preventDefault()}),children:e.jsx(uh,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:K=>K.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:e.jsx(Q,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:K=>K.preventDefault(),...j,...Y,onPlaced:()=>F(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...j.style},onKeyDown:jt(j.onKeyDown,K=>{const ae=K.ctrlKey||K.altKey||K.metaKey;if(K.key==="Tab"&&K.preventDefault(),!ae&&K.key.length===1&&I(K.key),["ArrowUp","ArrowDown","Home","End"].includes(K.key)){let de=E().filter(ue=>!ue.disabled).map(ue=>ue.ref.current);if(["ArrowUp","End"].includes(K.key)&&(de=de.slice().reverse()),["ArrowUp","ArrowDown"].includes(K.key)){const ue=K.target,oe=de.indexOf(ue);de=de.slice(oe+1)}setTimeout(()=>V(de)),K.preventDefault()}})})})})})})});_R.displayName=sse;var rse="SelectItemAlignedPosition",SR=b.forwardRef((t,s)=>{const{__scopeSelect:n,onPlaced:r,...a}=t,i=tc(ad,n),l=sc(ad,n),[o,c]=b.useState(null),[u,d]=b.useState(null),m=xs(s,P=>d(P)),h=J0(n),p=b.useRef(!1),g=b.useRef(!0),{viewport:v,selectedItem:y,selectedItemText:j,focusSelectedItem:w}=l,N=b.useCallback(()=>{if(i.trigger&&i.valueNode&&o&&u&&v&&y&&j){const P=i.trigger.getBoundingClientRect(),C=u.getBoundingClientRect(),O=i.valueNode.getBoundingClientRect(),M=j.getBoundingClientRect();if(i.dir!=="rtl"){const ue=M.left-C.left,oe=O.left-ue,pe=P.left-oe,je=P.width+pe,we=Math.max(je,C.width),qe=window.innerWidth-oi,ze=EP(oe,[oi,Math.max(oi,qe-we)]);o.style.minWidth=je+"px",o.style.left=ze+"px"}else{const ue=C.right-M.right,oe=window.innerWidth-O.right-ue,pe=window.innerWidth-P.right-oe,je=P.width+pe,we=Math.max(je,C.width),qe=window.innerWidth-oi,ze=EP(oe,[oi,Math.max(oi,qe-we)]);o.style.minWidth=je+"px",o.style.right=ze+"px"}const k=h(),E=window.innerHeight-oi*2,R=v.scrollHeight,F=window.getComputedStyle(u),z=parseInt(F.borderTopWidth,10),V=parseInt(F.paddingTop,10),U=parseInt(F.borderBottomWidth,10),B=parseInt(F.paddingBottom,10),$=z+V+R+B+U,L=Math.min(y.offsetHeight*5,$),I=window.getComputedStyle(v),W=parseInt(I.paddingTop,10),q=parseInt(I.paddingBottom,10),Z=P.top+P.height/2-oi,Q=E-Z,Y=y.offsetHeight/2,K=y.offsetTop+Y,ae=z+V+K,se=$-ae;if(ae<=Z){const ue=k.length>0&&y===k[k.length-1].ref.current;o.style.bottom="0px";const oe=u.clientHeight-v.offsetTop-v.offsetHeight,pe=Math.max(Q,Y+(ue?q:0)+oe+U),je=ae+pe;o.style.height=je+"px"}else{const ue=k.length>0&&y===k[0].ref.current;o.style.top="0px";const pe=Math.max(Z,z+v.offsetTop+(ue?W:0)+Y)+se;o.style.height=pe+"px",v.scrollTop=ae-Z+v.offsetTop}o.style.margin=`${oi}px 0`,o.style.minHeight=L+"px",o.style.maxHeight=E+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[h,i.trigger,i.valueNode,o,u,v,y,j,i.dir,r]);lr(()=>N(),[N]);const[_,T]=b.useState();lr(()=>{u&&T(window.getComputedStyle(u).zIndex)},[u]);const A=b.useCallback(P=>{P&&g.current===!0&&(N(),w==null||w(),g.current=!1)},[N,w]);return e.jsx(ise,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:p,onScrollButtonChange:A,children:e.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:e.jsx(Ut.div,{...a,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});SR.displayName=rse;var ase="SelectPopperPosition",b_=b.forwardRef((t,s)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=oi,...i}=t,l=X0(n);return e.jsx(z0,{...l,...i,ref:s,align:r,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});b_.displayName=ase;var[ise,y2]=yh(ad,{}),j_="SelectViewport",CR=b.forwardRef((t,s)=>{const{__scopeSelect:n,nonce:r,...a}=t,i=sc(j_,n),l=y2(j_,n),o=xs(s,i.onViewportChange),c=b.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),e.jsx(Q0.Slot,{scope:n,children:e.jsx(Ut.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:jt(a.onScroll,u=>{const d=u.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:h}=l;if(h!=null&&h.current&&m){const p=Math.abs(c.current-d.scrollTop);if(p>0){const g=window.innerHeight-oi*2,v=parseFloat(m.style.minHeight),y=parseFloat(m.style.height),j=Math.max(v,y);if(j<g){const w=j+p,N=Math.min(g,w),_=w-N;m.style.height=N+"px",m.style.bottom==="0px"&&(d.scrollTop=_>0?_:0,m.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});CR.displayName=j_;var kR="SelectGroup",[lse,ose]=yh(kR),cse=b.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t,a=Vn();return e.jsx(lse,{scope:n,id:a,children:e.jsx(Ut.div,{role:"group","aria-labelledby":a,...r,ref:s})})});cse.displayName=kR;var ER="SelectLabel",PR=b.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t,a=ose(ER,n);return e.jsx(Ut.div,{id:a.id,...r,ref:s})});PR.displayName=ER;var Vg="SelectItem",[dse,TR]=yh(Vg),AR=b.forwardRef((t,s)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:i,...l}=t,o=tc(Vg,n),c=sc(Vg,n),u=o.value===r,[d,m]=b.useState(i??""),[h,p]=b.useState(!1),g=xs(s,w=>{var N;return(N=c.itemRefCallback)==null?void 0:N.call(c,w,r,a)}),v=Vn(),y=b.useRef("touch"),j=()=>{a||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(dse,{scope:n,value:r,disabled:a,textId:v,isSelected:u,onItemTextChange:b.useCallback(w=>{m(N=>N||((w==null?void 0:w.textContent)??"").trim())},[]),children:e.jsx(Q0.ItemSlot,{scope:n,value:r,disabled:a,textValue:d,children:e.jsx(Ut.div,{role:"option","aria-labelledby":v,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...l,ref:g,onFocus:jt(l.onFocus,()=>p(!0)),onBlur:jt(l.onBlur,()=>p(!1)),onClick:jt(l.onClick,()=>{y.current!=="mouse"&&j()}),onPointerUp:jt(l.onPointerUp,()=>{y.current==="mouse"&&j()}),onPointerDown:jt(l.onPointerDown,w=>{y.current=w.pointerType}),onPointerMove:jt(l.onPointerMove,w=>{var N;y.current=w.pointerType,a?(N=c.onItemLeave)==null||N.call(c):y.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:jt(l.onPointerLeave,w=>{var N;w.currentTarget===document.activeElement&&((N=c.onItemLeave)==null||N.call(c))}),onKeyDown:jt(l.onKeyDown,w=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&w.key===" "||(Yte.includes(w.key)&&j(),w.key===" "&&w.preventDefault())})})})})});AR.displayName=Vg;var Om="SelectItemText",MR=b.forwardRef((t,s)=>{const{__scopeSelect:n,className:r,style:a,...i}=t,l=tc(Om,n),o=sc(Om,n),c=TR(Om,n),u=Zte(Om,n),[d,m]=b.useState(null),h=xs(s,j=>m(j),c.onItemTextChange,j=>{var w;return(w=o.itemTextRefCallback)==null?void 0:w.call(o,j,c.value,c.disabled)}),p=d==null?void 0:d.textContent,g=b.useMemo(()=>e.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:v,onNativeOptionRemove:y}=u;return lr(()=>(v(g),()=>y(g)),[v,y,g]),e.jsxs(e.Fragment,{children:[e.jsx(Ut.span,{id:c.textId,...i,ref:h}),c.isSelected&&l.valueNode&&!l.valueNodeHasChildren?hd.createPortal(i.children,l.valueNode):null]})});MR.displayName=Om;var DR="SelectItemIndicator",OR=b.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t;return TR(DR,n).isSelected?e.jsx(Ut.span,{"aria-hidden":!0,...r,ref:s}):null});OR.displayName=DR;var w_="SelectScrollUpButton",RR=b.forwardRef((t,s)=>{const n=sc(w_,t.__scopeSelect),r=y2(w_,t.__scopeSelect),[a,i]=b.useState(!1),l=xs(s,r.onScrollButtonChange);return lr(()=>{if(n.viewport&&n.isPositioned){let o=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),a?e.jsx(LR,{...t,ref:l,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=n;o&&c&&(o.scrollTop=o.scrollTop-c.offsetHeight)}}):null});RR.displayName=w_;var N_="SelectScrollDownButton",FR=b.forwardRef((t,s)=>{const n=sc(N_,t.__scopeSelect),r=y2(N_,t.__scopeSelect),[a,i]=b.useState(!1),l=xs(s,r.onScrollButtonChange);return lr(()=>{if(n.viewport&&n.isPositioned){let o=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=n.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),a?e.jsx(LR,{...t,ref:l,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=n;o&&c&&(o.scrollTop=o.scrollTop+c.offsetHeight)}}):null});FR.displayName=N_;var LR=b.forwardRef((t,s)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=t,i=sc("SelectScrollButton",n),l=b.useRef(null),o=J0(n),c=b.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return b.useEffect(()=>()=>c(),[c]),lr(()=>{var d;const u=o().find(m=>m.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[o]),e.jsx(Ut.div,{"aria-hidden":!0,...a,ref:s,style:{flexShrink:0,...a.style},onPointerDown:jt(a.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(r,50))}),onPointerMove:jt(a.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),l.current===null&&(l.current=window.setInterval(r,50))}),onPointerLeave:jt(a.onPointerLeave,()=>{c()})})}),use="SelectSeparator",IR=b.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t;return e.jsx(Ut.div,{"aria-hidden":!0,...r,ref:s})});IR.displayName=use;var __="SelectArrow",hse=b.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t,a=X0(n),i=tc(__,n),l=sc(__,n);return i.open&&l.position==="popper"?e.jsx($0,{...a,...r,ref:s}):null});hse.displayName=__;var mse="SelectBubbleInput",BR=b.forwardRef(({__scopeSelect:t,value:s,...n},r)=>{const a=b.useRef(null),i=xs(r,a),l=K0(s);return b.useEffect(()=>{const o=a.current;if(!o)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(l!==s&&d){const m=new Event("change",{bubbles:!0});d.call(o,s),o.dispatchEvent(m)}},[l,s]),e.jsx(Ut.select,{...n,style:{...lO,...n.style},ref:i,defaultValue:s})});BR.displayName=mse;function qR(t){return t===""||t===void 0}function zR(t){const s=el(t),n=b.useRef(""),r=b.useRef(0),a=b.useCallback(l=>{const o=n.current+l;s(o),(function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))})(o)},[s]),i=b.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,i]}function $R(t,s,n){const a=s.length>1&&Array.from(s).every(u=>u===s[0])?s[0]:s,i=n?t.indexOf(n):-1;let l=fse(t,Math.max(i,0));a.length===1&&(l=l.filter(u=>u!==n));const c=l.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function fse(t,s){return t.map((n,r)=>t[(s+r)%t.length])}var pse=pR,UR=gR,xse=yR,gse=bR,vse=jR,VR=wR,yse=CR,WR=PR,HR=AR,bse=MR,jse=OR,KR=RR,GR=FR,YR=IR;const Ke=pse,Qe=xse,Ve=b.forwardRef(({className:t,children:s,...n},r)=>e.jsxs(UR,{ref:r,className:tt("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[s,e.jsx(gse,{asChild:!0,children:e.jsx(Or,{className:"h-4 w-4 opacity-50"})})]}));Ve.displayName=UR.displayName;const QR=b.forwardRef(({className:t,...s},n)=>e.jsx(KR,{ref:n,className:tt("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(S0,{className:"h-4 w-4"})}));QR.displayName=KR.displayName;const JR=b.forwardRef(({className:t,...s},n)=>e.jsx(GR,{ref:n,className:tt("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Or,{className:"h-4 w-4"})}));JR.displayName=GR.displayName;const We=b.forwardRef(({className:t,children:s,position:n="popper",...r},a)=>e.jsx(vse,{children:e.jsxs(VR,{ref:a,className:tt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[e.jsx(QR,{}),e.jsx(yse,{className:tt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(JR,{})]})}));We.displayName=VR.displayName;const wse=b.forwardRef(({className:t,...s},n)=>e.jsx(WR,{ref:n,className:tt("px-2 py-1.5 text-sm font-semibold",t),...s}));wse.displayName=WR.displayName;const re=b.forwardRef(({className:t,children:s,...n},r)=>e.jsxs(HR,{ref:r,className:tt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[e.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(jse,{children:e.jsx(Uf,{className:"h-4 w-4"})})}),e.jsx(bse,{children:s})]}));re.displayName=HR.displayName;const Nse=b.forwardRef(({className:t,...s},n)=>e.jsx(YR,{ref:n,className:tt("-mx-1 my-1 h-px bg-muted",t),...s}));Nse.displayName=YR.displayName;function Vu({field:t,value:s,onChange:n,memberInfo:r,organizationInfo:a}){const[i,l]=b.useState(!1),[o,c]=b.useState("");b.useEffect(()=>{if(!r)return;let d=null;switch(t.type){case"user_name":d=`${r.first_name||""} ${r.last_name||""}`.trim();break;case"user_email":d=r.email||"";break;case"user_organization":d=(a==null?void 0:a.name)||"";break;case"user_job_title":d=r.job_title||"";break}d&&!s&&n(d)},[t.type,t.id,r==null?void 0:r.first_name,r==null?void 0:r.last_name,r==null?void 0:r.email,r==null?void 0:r.job_title,a==null?void 0:a.name,s]),b.useEffect(()=>{t.type==="select"&&t.allow_other&&s&&!(t.options||[]).includes(s)&&s!==""&&(l(!0),c(s))},[]);const u=()=>{if(["user_name","user_email","user_organization","user_job_title"].includes(t.type))return e.jsx(he,{type:"text",value:s||"",readOnly:!0,className:"bg-slate-50 cursor-not-allowed",placeholder:t.placeholder||"Auto-populated from your profile"});switch(t.type){case"text":case"email":case"tel":case"number":return e.jsx(he,{type:t.type,value:s||"",onChange:d=>n(d.target.value),placeholder:t.placeholder,required:t.required});case"textarea":return e.jsx(Gt,{value:s||"",onChange:d=>n(d.target.value),placeholder:t.placeholder,required:t.required,rows:4});case"date":case"time":return e.jsx(he,{type:t.type,value:s||"",onChange:d=>n(d.target.value),required:t.required});case"select":return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ke,{value:i?"other":s||"",onValueChange:d=>{d==="other"?(l(!0),n("")):(l(!1),c(""),n(d))},children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:t.placeholder||"Select an option"})}),e.jsxs(We,{children:[(t.options||[]).map((d,m)=>e.jsx(re,{value:d,children:d},m)),t.allow_other&&e.jsx(re,{value:"other",children:"Other"})]})]}),i&&e.jsx(he,{type:"text",value:o,onChange:d=>{c(d.target.value),n(d.target.value)},placeholder:"Please specify...",className:"mt-2"})]});case"radio":return e.jsx(of,{value:s||"",onValueChange:n,children:(t.options||[]).map((d,m)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Al,{value:d,id:`${t.id}-${m}`}),e.jsx(ee,{htmlFor:`${t.id}-${m}`,className:"font-normal",children:d})]},m))});case"checkbox":return e.jsx("div",{className:"space-y-2",children:(t.options||[]).map((d,m)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ba,{id:`${t.id}-${m}`,checked:(s||[]).includes(d),onCheckedChange:h=>{const p=s||[];n(h?[...p,d]:p.filter(g=>g!==d))}}),e.jsx(ee,{htmlFor:`${t.id}-${m}`,className:"font-normal",children:d})]},m))});case"file":return e.jsx(he,{type:"file",onChange:d=>{var h;const m=(h=d.target.files)==null?void 0:h[0];m&&n(m.name)},required:t.required});default:return e.jsxs("p",{className:"text-sm text-slate-500",children:["Unsupported field type: ",t.type]})}};return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ee,{htmlFor:t.id,children:[t.label,t.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),u()]})}function _se(t){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",s.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}Array(12).fill(0);let S_=1;class Sse{constructor(){this.subscribe=s=>(this.subscribers.push(s),()=>{const n=this.subscribers.indexOf(s);this.subscribers.splice(n,1)}),this.publish=s=>{this.subscribers.forEach(n=>n(s))},this.addToast=s=>{this.publish(s),this.toasts=[...this.toasts,s]},this.create=s=>{var n;const{message:r,...a}=s,i=typeof(s==null?void 0:s.id)=="number"||((n=s.id)==null?void 0:n.length)>0?s.id:S_++,l=this.toasts.find(c=>c.id===i),o=s.dismissible===void 0?!0:s.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),l?this.toasts=this.toasts.map(c=>c.id===i?(this.publish({...c,...s,id:i,title:r}),{...c,...s,id:i,dismissible:o,title:r}):c):this.addToast({title:r,...a,dismissible:o,id:i}),i},this.dismiss=s=>(s?(this.dismissedToasts.add(s),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:s,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),s),this.message=(s,n)=>this.create({...n,message:s}),this.error=(s,n)=>this.create({...n,message:s,type:"error"}),this.success=(s,n)=>this.create({...n,type:"success",message:s}),this.info=(s,n)=>this.create({...n,type:"info",message:s}),this.warning=(s,n)=>this.create({...n,type:"warning",message:s}),this.loading=(s,n)=>this.create({...n,type:"loading",message:s}),this.promise=(s,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:s,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const a=Promise.resolve(s instanceof Function?s():s);let i=r!==void 0,l;const o=a.then(async u=>{if(l=["resolve",u],Be.isValidElement(u))i=!1,this.create({id:r,type:"default",message:u});else if(kse(u)&&!u.ok){i=!1;const m=typeof n.error=="function"?await n.error(`HTTP error! status: ${u.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${u.status}`):n.description,g=typeof m=="object"&&!Be.isValidElement(m)?m:{message:m};this.create({id:r,type:"error",description:h,...g})}else if(u instanceof Error){i=!1;const m=typeof n.error=="function"?await n.error(u):n.error,h=typeof n.description=="function"?await n.description(u):n.description,g=typeof m=="object"&&!Be.isValidElement(m)?m:{message:m};this.create({id:r,type:"error",description:h,...g})}else if(n.success!==void 0){i=!1;const m=typeof n.success=="function"?await n.success(u):n.success,h=typeof n.description=="function"?await n.description(u):n.description,g=typeof m=="object"&&!Be.isValidElement(m)?m:{message:m};this.create({id:r,type:"success",description:h,...g})}}).catch(async u=>{if(l=["reject",u],n.error!==void 0){i=!1;const d=typeof n.error=="function"?await n.error(u):n.error,m=typeof n.description=="function"?await n.description(u):n.description,p=typeof d=="object"&&!Be.isValidElement(d)?d:{message:d};this.create({id:r,type:"error",description:m,...p})}}).finally(()=>{i&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),c=()=>new Promise((u,d)=>o.then(()=>l[0]==="reject"?d(l[1]):u(l[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:c}:Object.assign(r,{unwrap:c})},this.custom=(s,n)=>{const r=(n==null?void 0:n.id)||S_++;return this.create({jsx:s(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(s=>!this.dismissedToasts.has(s.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Ia=new Sse,Cse=(t,s)=>{const n=(s==null?void 0:s.id)||S_++;return Ia.addToast({title:t,...s,id:n}),n},kse=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Ese=Cse,Pse=()=>Ia.toasts,Tse=()=>Ia.getActiveToasts(),te=Object.assign(Ese,{success:Ia.success,info:Ia.info,warning:Ia.warning,error:Ia.error,custom:Ia.custom,message:Ia.message,promise:Ia.promise,dismiss:Ia.dismiss,loading:Ia.loading},{getHistory:Pse,getToasts:Tse});_se("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function XR({location:t="portal",memberInfo:s,organizationInfo:n}){const r=Yt(),[a,i]=b.useState(null),[l,o]=b.useState({}),[c,u]=b.useState(!1),[d,m]=b.useState(0),[h,p]=b.useState(!1),{data:g}=me({queryKey:["member-record",s==null?void 0:s.email],queryFn:async()=>(await X.entities.Member.list()).find(E=>E.email===(s==null?void 0:s.email)),enabled:!!(s!=null&&s.email),staleTime:30*1e3}),{data:v=[]}=me({queryKey:["floaters",t],queryFn:async()=>(await X.entities.Floater.list()).filter(E=>E.is_active&&(E.display_location===t||E.display_location==="both")).sort((E,R)=>(E.display_order||0)-(R.display_order||0)),staleTime:60*1e3}),{data:y=[]}=me({queryKey:["forms"],queryFn:async()=>await X.entities.Form.list(),staleTime:60*1e3}),j=Le({mutationFn:async({floaterId:k,currentCount:E})=>await X.entities.Floater.update(k,{click_count:(E||0)+1}),onSuccess:()=>{r.invalidateQueries({queryKey:["floaters"]})}}),w=Le({mutationFn:async({formId:k,formName:E,data:R})=>{const F={form_id:k,form_name:E,submission_data:R,submitted_by_email:s==null?void 0:s.email,submitted_by_name:s?`${s.first_name} ${s.last_name}`:void 0};return await X.entities.FormSubmission.create(F)},onSuccess:()=>{p(!0),r.invalidateQueries({queryKey:["forms"]})},onError:()=>{te.error("Failed to submit form")}}),N=async k=>{try{if(j.mutate({floaterId:k.id,currentCount:k.click_count}),k.action_type==="webhook"&&k.webhook_url)await fetch(k.webhook_url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({floater_id:k.id,floater_name:k.name,timestamp:new Date().toISOString(),location:t})});else if(k.action_type==="url"&&k.redirect_url)switch(k.window_target||"new_tab"){case"current":window.location.href=k.redirect_url;break;case"new_tab":window.open(k.redirect_url,"_blank","noopener,noreferrer");break;case"parent":window.parent.location.href=k.redirect_url;break;case"popup":const R=k.popup_width||800,F=k.popup_height||600,z=(window.screen.width-R)/2,V=(window.screen.height-F)/2;window.open(k.redirect_url,"_blank",`width=${R},height=${F},left=${z},top=${V},resizable=yes,scrollbars=yes`);break}else if(k.action_type==="form"&&k.form_slug){const E=y.find(R=>R.slug===k.form_slug);if(E){if(E.require_authentication&&!s){te.error("Please log in to access this form");return}i(E),o({}),m(0),p(!1)}}}catch(E){console.error("Failed to process floater click:",E)}},_=async k=>{if(k.preventDefault(),!a)return;if(a.fields.filter(F=>F.required).filter(F=>!l[F.id]).length>0){te.error("Please fill in all required fields");return}u(!0);try{await w.mutateAsync({formId:a.id,formName:a.name,data:l})}finally{u(!1)}},T=()=>{if(!a)return;const k=a.fields[d];if(k.required&&!l[k.id]){te.error("This field is required");return}d<a.fields.length-1&&m(d+1)},A=()=>{d>0&&m(d-1)},P=()=>{i(null),o({}),m(0),p(!1)},C=k=>{const E={position:"fixed",zIndex:1e3,cursor:"pointer",width:`${k.width||80}px`,height:`${k.height||80}px`,transition:"transform 0.2s ease"},R=k.offset_x||20,F=k.offset_y||20;switch(k.position){case"bottom-right":E.bottom=`${F}px`,E.right=`${R}px`;break;case"bottom-left":E.bottom=`${F}px`,E.left=`${R}px`;break;case"top-right":E.top=`${F}px`,E.right=`${R}px`;break;case"top-left":E.top=`${F}px`,E.left=`${R}px`;break;default:E.bottom=`${F}px`,E.right=`${R}px`}return E},O=k=>({width:"100%",height:"100%",objectFit:"contain",...(k.show_background??!0)&&{borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"}}),M=g||s;return v.length===0?null:e.jsxs(e.Fragment,{children:[v.map(k=>e.jsx("div",{style:C(k),onClick:()=>N(k),onMouseEnter:E=>E.currentTarget.style.transform="scale(1.05)",onMouseLeave:E=>E.currentTarget.style.transform="scale(1)",title:k.description||k.name,children:e.jsx("img",{src:k.image_url,alt:k.name,style:O(k)})},k.id)),e.jsx(Ct,{open:!!a,onOpenChange:k=>!k&&P(),children:e.jsx(Nt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:a&&e.jsx(e.Fragment,{children:h?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:a.success_message||"Thank you for your submission!"}),e.jsx(J,{onClick:P,className:"mt-6",children:"Close"})]}):a.layout_type==="card_swipe"?e.jsxs("div",{className:"py-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:a.name}),a.description&&e.jsx("p",{className:"text-slate-600",children:a.description})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:a.fields.map((k,E)=>e.jsx("div",{className:`h-2 flex-1 rounded-full transition-colors ${E<=d?"bg-blue-600":"bg-slate-200"}`},E))}),e.jsxs("p",{className:"text-sm text-slate-600 text-center",children:["Question ",d+1," of ",a.fields.length]})]}),e.jsx("div",{className:"min-h-[200px]",children:e.jsx(Vu,{field:a.fields[d],value:l[a.fields[d].id],onChange:k=>o(E=>({...E,[a.fields[d].id]:k})),memberInfo:M,organizationInfo:n})}),e.jsxs("div",{className:"flex justify-between gap-3 pt-6 border-t mt-6",children:[e.jsxs(J,{type:"button",variant:"outline",onClick:A,disabled:d===0,children:[e.jsx(Wn,{className:"w-4 h-4 mr-1"}),"Previous"]}),d===a.fields.length-1?e.jsx(J,{onClick:_,disabled:c,className:"bg-blue-600 hover:bg-blue-700",children:c?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Submitting..."]}):a.submit_button_text||"Submit"}):e.jsxs(J,{onClick:T,children:["Next",e.jsx(js,{className:"w-4 h-4 ml-1"})]})]})]}):e.jsxs("form",{onSubmit:_,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:a.name}),a.description&&e.jsx("p",{className:"text-slate-600",children:a.description})]}),e.jsx("div",{className:"space-y-4",children:a.fields.map(k=>e.jsx(Vu,{field:k,value:l[k.id],onChange:E=>o(R=>({...R,[k.id]:E})),memberInfo:M,organizationInfo:n},k.id))}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(J,{type:"button",variant:"outline",onClick:P,disabled:c,children:"Cancel"}),e.jsx(J,{type:"submit",disabled:c,className:"bg-blue-600 hover:bg-blue-700",children:c?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Submitting..."]}):a.submit_button_text||"Submit"})]})]})})})})]})}function Sa({children:t,currentPageName:s}){const[n,r]=b.useState([]),[a,i]=b.useState(!0),[l,o]=b.useState(!1);return b.useEffect(()=>{(async()=>{if(!s){i(!1);return}try{const d=(await X.entities.PageBanner.filter({is_active:!0})).filter(m=>m.associated_pages&&m.associated_pages.includes(s)).sort((m,h)=>(m.display_order||0)-(h.display_order||0));r(d)}catch(u){console.error("Failed to fetch banners:",u)}finally{i(!1)}})()},[s]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col min-h-screen",style:{fontFamily:"Poppins, sans-serif"},children:[e.jsx("style",{children:`
            @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

            @font-face {
              font-family: 'Degular Medium';
              src: url('https://teeone.pythonanywhere.com/font-assets/Degular-Medium.woff') format('woff');
              font-weight: 500;
              font-style: normal;
              font-display: swap;
            }
            
            h1 {
              font-family: 'Degular Medium', 'Poppins', sans-serif;
            }
            
            .nav-link:hover {
              color: #5C0085 !important;
            }
          `}),e.jsx(See,{}),!a&&n.length>0&&e.jsx("div",{className:"w-full",children:n.map(c=>e.jsx(Cee,{banner:c},c.id))}),e.jsx("main",{className:"flex-1",children:t}),e.jsx("footer",{className:"bg-slate-900 text-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("img",{src:"https://qtrypzzcjebvfcihiynt.supabase.co/storage/v1/object/public/base44-prod/public/68efc20f3e0a30fafad6dde7/6cfe73a57_agcasRoundall.jpg",alt:"AGCAS",className:"w-10 h-10 object-contain"}),e.jsx("h3",{className:"text-xl font-bold",children:"AGCAS"})]}),e.jsx("p",{className:"text-slate-300 mb-4 text-sm",children:"The Association of Graduate Careers Advisory Services represents careers and employability services in higher education across the UK and Ireland."}),e.jsxs(J,{onClick:()=>o(!0),className:"text-white font-bold hover:opacity-90 transition-opacity px-6 py-5 rounded-none mt-4",style:{fontFamily:"Poppins, sans-serif",background:"linear-gradient(to top right, #5C0085, #BA0087, #EE00C3, #FF4229, #FFB000)"},children:["Subscribe to Newsletter",e.jsx(Mr,{className:"ml-0.5 w-5 h-5",strokeWidth:2.5})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Quick Links"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(Ht,{to:Pe("PublicEvents"),className:"text-slate-300 hover:text-white transition-colors",children:"Events"})}),e.jsx("li",{children:e.jsx(Ht,{to:Pe("PublicResources"),className:"text-slate-300 hover:text-white transition-colors",children:"Resources"})}),e.jsx("li",{children:e.jsx(Ht,{to:Pe("PublicArticles"),className:"text-slate-300 hover:text-white transition-colors",children:"Articles"})}),e.jsx("li",{children:e.jsx(Ht,{to:Pe("JobBoard"),className:"text-slate-300 hover:text-white transition-colors",children:"Job Board"})}),e.jsx("li",{children:e.jsx(Ht,{to:Pe("PublicAbout"),className:"text-slate-300 hover:text-white transition-colors",children:"About Us"})}),e.jsx("li",{children:e.jsx(Ht,{to:Pe("PublicContact"),className:"text-slate-300 hover:text-white transition-colors",children:"Contact"})}),e.jsx("li",{children:e.jsx(Ht,{to:Pe("Home"),className:"text-slate-300 hover:text-white transition-colors",children:"Member Login"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Contact Us"}),e.jsxs("ul",{className:"space-y-3 text-sm text-slate-300",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(Ms,{className:"w-4 h-4 mt-0.5 shrink-0"}),e.jsx("span",{children:"info@graduatefutures.org.uk"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(k0,{className:"w-4 h-4 mt-0.5 shrink-0"}),e.jsx("span",{children:"+44 (0)114 251 5750"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(Rr,{className:"w-4 h-4 mt-0.5 shrink-0"}),e.jsx("span",{children:"Sheffield, United Kingdom"})]})]})]})]}),e.jsxs("div",{className:"border-t border-slate-800 mt-8 pt-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("p",{className:"text-sm text-slate-400",children:[" ",new Date().getFullYear()," AGCAS. All rights reserved."]}),e.jsxs("div",{className:"flex gap-6 text-sm text-slate-400",children:[e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy Policy"}),e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Terms of Service"}),e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Accessibility"})]})]}),e.jsxs("div",{className:"text-center mt-6",children:[e.jsx("a",{href:"https://isaasi.co.uk",target:"_blank",rel:"noopener noreferrer",className:"inline-block hover:opacity-80 transition-opacity",children:e.jsx("img",{src:"https://qtrypzzcjebvfcihiynt.supabase.co/storage/v1/object/public/base44-prod/public/68efc20f3e0a30fafad6dde7/fe03f7c5e_linked-aa.png",alt:"isaasi",className:"w-[40px] mx-auto mb-2"})}),e.jsxs("p",{className:"text-xs text-slate-500",children:[e.jsx("span",{style:{color:"#eb008c"},children:"i"}),"Connect by"," ",e.jsx("a",{href:"https://isaasi.co.uk",target:"_blank",rel:"noopener noreferrer",className:"hover:opacity-80 transition-opacity",style:{color:"#eb008c"},children:"isaasi"})]})]})]})]})}),e.jsx(XR,{location:"public"})]}),e.jsx(Ct,{open:l,onOpenChange:o,children:e.jsxs(Nt,{className:"max-w-3xl max-h-[90vh] overflow-hidden",children:[e.jsx(kt,{children:e.jsx(Et,{className:"text-2xl",children:"Subscribe to Our Newsletter"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsx("p",{className:"text-slate-600",children:"Stay up to date with the latest news, events, and resources from Graduate Futures. Join our community and never miss an important update!"}),e.jsx("div",{className:"w-full",style:{minHeight:"500px"},children:e.jsx("iframe",{src:"https://forms.zohopublic.eu/isaasiagcas1/form/Newsletter/formperma/VRkTs4kbQec4LDCN5z0pRWyTRH7HGIqxhDx-dT35YTI",width:"100%",height:"600",frameBorder:"0",marginHeight:"0",marginWidth:"0",title:"Newsletter Signup Form",className:"rounded-lg",children:"Loading newsletter form..."})})]})]})})]})}function Ase({children:t}){return e.jsxs("div",{className:"flex flex-col min-h-screen bg-white",style:{fontFamily:"Poppins, sans-serif"},children:[e.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap",rel:"stylesheet"}),e.jsx("style",{children:`
          @font-face {
            font-family: 'Degular Medium';
            src: url('https://teeone.pythonanywhere.com/font-assets/Degular-Medium.woff') format('woff');
            font-weight: 500;
            font-style: normal;
            font-display: swap;
          }

          body, html {
            font-family: 'Poppins', sans-serif;
          }

          h1 {
            font-family: 'Degular Medium', 'Poppins', sans-serif;
          }
        `}),e.jsx("main",{className:"flex-1",children:t}),e.jsx("footer",{className:"bg-white border-t border-slate-200 py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 text-center",children:[e.jsx("a",{href:"https://isaasi.co.uk",target:"_blank",rel:"noopener noreferrer",className:"inline-block mb-3 hover:opacity-80 transition-opacity",children:e.jsx("img",{src:"https://qtrypzzcjebvfcihiynt.supabase.co/storage/v1/object/public/base44-prod/public/68efc20f3e0a30fafad6dde7/fe03f7c5e_linked-aa.png",alt:"isaasi",className:"w-[50px] mx-auto"})}),e.jsxs("p",{className:"text-sm text-slate-600",children:[e.jsx("span",{style:{color:"#eb008c"},children:"i"}),"Connect by"," ",e.jsx("a",{href:"https://isaasi.co.uk",target:"_blank",rel:"noopener noreferrer",className:"hover:opacity-80 transition-opacity font-medium",style:{color:"#eb008c"},children:"isaasi"})," ","-  Copyright ",new Date().getFullYear()===2025?"2025":`2025-${new Date().getFullYear()}`]})]})})]})}function Mse(){var o,c,u;const[t,s]=b.useState(0),{data:n=[]}=me({queryKey:["news-ticker-settings"],queryFn:async()=>(await X.entities.SystemSettings.list()).filter(m=>m.setting_key==="news_ticker_count"||m.setting_key==="news_ticker_cycle_seconds"||m.setting_key==="news_ticker_enabled"),staleTime:300*1e3}),r=((o=n.find(d=>d.setting_key==="news_ticker_enabled"))==null?void 0:o.setting_value)!=="false",a=parseInt((c=n.find(d=>d.setting_key==="news_ticker_count"))==null?void 0:c.setting_value)||3,i=parseInt((u=n.find(d=>d.setting_key==="news_ticker_cycle_seconds"))==null?void 0:u.setting_value)||5,{data:l=[]}=me({queryKey:["latest-news-ticker",a],queryFn:async()=>{const d=await X.entities.NewsPost.list("-published_date"),m=new Date;return d.filter(h=>h.status==="published"&&new Date(h.published_date)<=m).slice(0,a)},staleTime:120*1e3,refetchInterval:120*1e3});return b.useEffect(()=>{if(l.length<=1)return;const d=setInterval(()=>{s(m=>(m+1)%l.length)},i*1e3);return()=>clearInterval(d)},[l.length,i]),!r||l.length===0?null:e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white overflow-hidden",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider shrink-0 bg-white/20 px-2 py-1 rounded",children:"Latest News"}),e.jsx("div",{className:"flex-1 relative h-6 overflow-hidden",children:l.map((d,m)=>e.jsxs(Ht,{to:`${Pe("NewsView")}?slug=${d.slug}`,className:"absolute inset-0 flex items-center gap-2 hover:underline transition-all duration-500",style:{transform:`translateY(${(m-t)*100}%)`,opacity:m===t?1:0},children:[e.jsx("span",{className:"truncate",children:d.title}),e.jsx(js,{className:"w-4 h-4 shrink-0"})]},d.id))})]})})})}const Dse=[{title:"Buy Tickets",url:Pe("BuyProgramTickets"),icon:xd,featureId:"page_BuyProgramTickets"},{title:"Browse Events",url:Pe("Events"),icon:Ns,featureId:"page_Events"},{title:"Bookings",url:Pe("Bookings"),icon:fd,featureId:"page_Bookings"},{title:"My Tickets",url:Pe("MyTickets"),icon:Rs,featureId:"page_MyTickets"},{title:"Balances",url:Pe("Balances"),icon:Ho,featureId:"page_Balances"},{title:"History",url:Pe("History"),icon:C0,featureId:"page_History"},{title:"Team",url:Pe("Team"),icon:ws,featureId:"page_Team"},{title:"Member Directory",url:Pe("MemberDirectory"),icon:_0,featureId:"page_MemberDirectory"},{title:"Organisation Directory",url:Pe("OrganisationDirectory"),icon:Zo,featureId:"page_OrganisationDirectory"},{title:"Resources",url:Pe("Resources"),icon:aa,featureId:"page_Resources"},{title:"Articles",icon:ns,featureId:"page_ArticlesSection",subItems:[{title:"My Articles",url:Pe("MyArticles"),featureId:"page_MyArticles"},{title:"Articles",url:Pe("Articles"),featureId:"page_Articles"}]},{title:"News",url:Pe("News"),icon:ns,featureId:"page_News"},{title:"My Job Postings",url:Pe("MyJobPostings"),icon:En,featureId:"page_MyJobPostings"},{title:"Preferences",url:Pe("Preferences"),icon:Qa,featureId:"page_Preferences"},{title:"Support",url:Pe("Support"),icon:md,featureId:"page_Support"}],Ose=[{title:"News",icon:ns,featureId:"page_NewsAdmin",subItems:[{title:"News Management",url:Pe("MyNews"),featureId:"page_MyNews"},{title:"Settings",url:Pe("NewsSettings"),featureId:"page_NewsSettings"}]},{title:"Articles",icon:ns,featureId:"page_ArticlesAdmin",subItems:[{title:"All Articles",url:Pe("ArticleManagement"),featureId:"page_ArticleManagement"},{title:"Settings",url:Pe("ArticlesSettings"),featureId:"page_ArticlesSettings"}]},{title:"Role Management",url:Pe("RoleManagement"),icon:In,featureId:"page_RoleManagement"},{title:"Assign Member Roles",url:Pe("MemberRoleAssignment"),icon:ws,featureId:"page_MemberRoleAssignment"},{title:"Team Members",url:Pe("TeamMemberManagement"),icon:ws,featureId:"page_TeamMemberManagement"},{title:"Member Handle Management",url:Pe("MemberHandleManagement"),icon:$f,featureId:"page_MemberHandleManagement"},{title:"Member Directory Settings",url:Pe("MemberDirectorySettings"),icon:ws,featureId:"page_MemberDirectorySettings"},{title:"Discount Codes",url:Pe("DiscountCodeManagement"),icon:Rs,featureId:"page_DiscountCodeManagement"},{title:"Event Settings",url:Pe("EventSettings"),icon:Qa,featureId:"page_EventSettings"},{title:"Ticket Sales Analytics",url:Pe("TicketSalesAnalytics"),icon:ah,featureId:"page_TicketSalesAnalytics"},{title:"Award Management",url:Pe("AwardManagement"),icon:Ln,featureId:"page_AwardManagement"},{title:"Category Management",url:Pe("CategoryManagement"),icon:Xc,featureId:"page_CategoryManagement"},{title:"Category Setup",url:Pe("ResourceSettings"),icon:Xc,featureId:"page_ResourceSettings"},{title:"Resource Management",icon:aa,featureId:"page_ResourcesAdmin",subItems:[{title:"Resources",url:Pe("ResourceManagement"),featureId:"page_ResourceManagement"},{title:"Tags",url:Pe("TagManagement"),featureId:"page_TagManagement"},{title:"Settings",url:Pe("ResourceSettings"),featureId:"page_ResourceSettings"},{title:"File Repository",url:Pe("FileManagement"),featureId:"page_FileManagement"}]},{title:"Job Board Management",icon:En,featureId:"page_JobBoardAdmin",subItems:[{title:"Job Postings",url:Pe("JobPostingManagement"),featureId:"page_JobPostingManagement"},{title:"Settings",url:Pe("JobBoardSettings"),featureId:"page_JobBoardSettings"}]},{title:"Page Builder",icon:Wf,featureId:"page_PageBuilder",subItems:[{title:"Pages",url:Pe("IEditPageManagement"),featureId:"page_IEditPageManagement"},{title:"Element Templates",url:Pe("IEditTemplateManagement"),featureId:"page_IEditTemplateManagement"},{title:"Page Banners",url:Pe("PageBannerManagement"),featureId:"page_PageBannerManagement"},{title:"Navigation Items",url:Pe("NavigationManagement"),featureId:"page_NavigationManagement"},{title:"Buttons",url:Pe("ButtonElements"),featureId:"page_ButtonElements"},{title:"Button Styles",url:Pe("ButtonStyleManagement"),featureId:"page_ButtonStyleManagement"},{title:"Wall of Fame",url:Pe("WallOfFameManagement"),featureId:"page_WallOfFameManagement"},{title:"Installed Fonts",url:Pe("InstalledFonts"),featureId:"page_InstalledFonts"}]},{title:"Forms",icon:ns,featureId:"page_FormsAdmin",subItems:[{title:"Form Management",url:Pe("FormManagement"),featureId:"page_FormManagement"},{title:"View Submissions",url:Pe("FormSubmissions"),featureId:"page_FormSubmissions"}]},{title:"Floater Management",url:Pe("FloaterManagement"),icon:Hf,featureId:"page_FloaterManagement"},{title:"Team Invite Settings",url:Pe("TeamInviteSettings"),icon:Ms,featureId:"page_TeamInviteSettings"},{title:"Data Export",url:Pe("DataExport"),icon:Zn,featureId:"page_DataExport"},{title:"Site Map",url:Pe("SiteMap"),icon:ns,featureId:"page_SiteMap"},{title:"Support Management",url:Pe("SupportManagement"),icon:md,featureId:"page_SupportManagement"},{title:"Portal Navigation",url:Pe("PortalNavigationManagement"),icon:zl,featureId:"page_PortalNavigationManagement"},{title:"Tour Management",url:Pe("TourManagement"),icon:aa,featureId:"page_TourManagement"}];function Rse({children:t,currentPageName:s}){const n=il(),[r,a]=b.useState(()=>{const U=sessionStorage.getItem("agcas_member");return U?JSON.parse(U):null}),[i,l]=b.useState(()=>{const U=sessionStorage.getItem("agcas_organization");return U?JSON.parse(U):null}),o=Be.useRef(null),c=Be.useRef(null),u=Be.useRef(null),{data:d}=me({queryKey:["borderRadiusSetting"],queryFn:async()=>{const B=(await X.entities.SystemSettings.list()).find($=>$.setting_key==="global_border_radius");return(B==null?void 0:B.setting_value)||"8px"},staleTime:300*1e3,refetchOnWindowFocus:!1}),{data:m}=me({queryKey:["memberRecord",r==null?void 0:r.email],queryFn:async()=>(await X.entities.Member.list()).find(B=>B.email===(r==null?void 0:r.email)),enabled:!!(r!=null&&r.email),staleTime:1/0,refetchOnWindowFocus:!1,refetchOnMount:!1}),{data:h}=me({queryKey:["memberRole",r==null?void 0:r.role_id],queryFn:async()=>r!=null&&r.role_id?(await X.entities.Role.list()).find(B=>B.id===r.role_id):null,enabled:!!(r!=null&&r.role_id),staleTime:1/0,refetchOnWindowFocus:!1,refetchOnMount:!1}),{data:p=[]}=me({queryKey:["portal-menu"],queryFn:()=>X.entities.PortalMenu.list("display_order"),staleTime:1/0,refetchOnWindowFocus:!1,refetchOnMount:!1}),g=["Home","AdminSetup","VerifyMagicLink","TestLogin","UnpackedInternationalEmployability","PublicEvents","PublicAbout","PublicContact","PublicResources","PublicArticles","PublicNews","JobBoard","JobDetails","JobPostSuccess","sharon","content"],v=["PostJob","ArticleView","NewsView","icontent","ViewPage","OrganisationDirectory"],y=["RoleManagement","MemberRoleAssignment","TeamMemberManagement","DiscountCodeManagement","EventSettings","TicketSalesAnalytics","ResourceSettings","ResourceManagement","TagManagement","ResourceAuthorSettings","TourManagement","FileManagement","JobPostingManagement","JobBoardSettings","IEditPageManagement","IEditTemplateManagement","PageBannerManagement","NavigationManagement","MemberHandleManagement","ButtonElements","ButtonStyleManagement","AwardManagement","WallOfFameManagement","TeamInviteSettings","FormManagement","FormSubmissions","FloaterManagement","MemberDirectorySettings","SupportManagement"],j=["Home","AdminSetup","VerifyMagicLink","TestLogin"],w=()=>(h==null?void 0:h.is_admin)===!0,N=U=>{if(!r||!U)return!1;const B=(h==null?void 0:h.excluded_features)||[],$=r.member_excluded_features||[];return[...new Set([...B,...$])].includes(U)},_=()=>{const U=`page_${s}`;return N(U)},T=()=>y.includes(s),A=()=>{const U=sessionStorage.getItem("agcas_member");if(U){const B=JSON.parse(U);a(B),console.log("[Layout] memberInfo reloaded from sessionStorage:",B)}},P=async U=>{if(i)return;const B=sessionStorage.getItem("agcas_organization");if(B){l(JSON.parse(B));return}try{const $=await X.entities.Organization.list();let L=$.find(I=>I.id===U);L||(L=$.find(I=>I.zoho_account_id===U)),L&&(sessionStorage.setItem("agcas_organization",JSON.stringify(L)),l(L))}catch($){console.error("Error fetching organization:",$)}},C=()=>g.includes(s)?!0:v.includes(s)?!sessionStorage.getItem("agcas_member"):!1;b.useEffect(()=>{if(g.includes(s)||v.includes(s)&&!sessionStorage.getItem("agcas_member"))return;const U=sessionStorage.getItem("agcas_member");if(!U){window.location.href=Pe("Home");return}const B=JSON.parse(U);if(B.sessionExpiry&&new Date(B.sessionExpiry)<new Date){sessionStorage.removeItem("agcas_member"),window.location.href=Pe("Home");return}(!r||JSON.stringify(r)!==JSON.stringify(B))&&a(B),B.organization_id&&!B.is_team_member&&P(B.organization_id)},[]),b.useEffect(()=>{(async()=>{if(!(r!=null&&r.email)||C())return;const B=Date.now(),$=600*1e3;if(!(u.current&&B-u.current<$))try{const I=(await X.entities.Member.list()).find(W=>W.email===r.email);I&&(await X.entities.Member.update(I.id,{last_activity:new Date().toISOString()}),u.current=B)}catch(L){console.error("Error updating last_activity:",L)}})()},[n.pathname,r==null?void 0:r.email]),b.useEffect(()=>{if(!C()&&r&&h){if(_()){window.location.href=Pe("Events");return}T()&&!w()&&(window.location.href=Pe("Events"))}},[s,r,h]),Be.useEffect(()=>{const U=c.current;if(U){const B=()=>{sessionStorage.setItem("agcas_sidebar_scroll",U.scrollTop.toString())};return U.addEventListener("scroll",B),()=>{U.removeEventListener("scroll",B)}}},[]),Be.useEffect(()=>{const U=c.current;if(U){const B=sessionStorage.getItem("agcas_sidebar_scroll");B&&setTimeout(()=>{U.scrollTop=parseFloat(B)},0)}}),b.useEffect(()=>{o.current&&o.current.scrollTo(0,0)},[n.pathname]);const O=()=>{sessionStorage.removeItem("agcas_member"),sessionStorage.removeItem("agcas_organization"),window.location.href=Pe("Home")};if(C())return j.includes(s)?e.jsx(Ase,{children:t}):e.jsx(Sa,{currentPageName:s,children:t});const M={Menu:zl,Calendar:Ns,CreditCard:fd,Ticket:Rs,Wallet:Ho,ShoppingCart:xd,History:C0,Sparkles:aa,FileText:ns,Briefcase:En,Settings:Qa,BookOpen:_0,Building:Zo,HelpCircle:md,Users:ws,Shield:In,BarChart3:ah,FileEdit:Wf,AtSign:$f,FolderTree:Xc,Trophy:Ln,MousePointer2:Hf,Mail:Ms,Download:Zn},k=U=>{const B=p.filter(L=>L.is_active&&L.section===U);return B.filter(L=>!L.parent_id).sort((L,I)=>L.display_order-I.display_order).map(L=>{const I=B.filter(q=>q.parent_id===L.id),W=M[L.icon]||zl;return I.length>0?{title:L.title,icon:W,featureId:L.feature_id,subItems:I.sort((q,Z)=>q.display_order-Z.display_order).map(q=>({title:q.title,url:q.url?Pe(q.url):"",featureId:q.feature_id}))}:{title:L.title,url:L.url?Pe(L.url):"",icon:W,featureId:L.feature_id}})},E=p.length>0?k("user"):Dse,R=p.length>0?k("admin"):Ose,F=E.map(U=>{if(U.subItems){const B=U.subItems.filter($=>!N($.featureId));return B.length>0&&!N(U.featureId)?{...U,subItems:B}:null}else return N(U.featureId)?null:U}).filter(Boolean),z=w()?R.map(U=>{if(U.subItems){const B=U.subItems.filter($=>!N($.featureId));return B.length>0&&!N(U.featureId)?{...U,subItems:B}:null}else return N(U.featureId)?null:U}).filter(Boolean):[],V=Be.Children.map(t,U=>Be.isValidElement(U)?Be.cloneElement(U,{memberInfo:r,organizationInfo:i,memberRole:h,isAdmin:w(),refreshOrganizationInfo:()=>{r&&!r.is_team_member&&P(r.organization_id)},isFeatureExcluded:N,reloadMemberInfo:A}):U);return e.jsxs("div",{style:{fontFamily:"Poppins, sans-serif"},children:[e.jsx("style",{children:`
          @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

          @font-face {
            font-family: 'Degular Medium';
            src: url('https://teeone.pythonanywhere.com/font-assets/Degular-Medium.woff') format('woff');
            font-weight: 500;
            font-style: normal;
            font-display: block;
          }

          :root {
            --border-radius: ${d||"8px"};
          }

          /* Degular Medium for H1 headers */
          h1 {
            font-family: 'Degular Medium', 'Poppins', sans-serif;
          }
          
          /* Apply border radius globally to common UI elements */
          .Card, [class*="Card"], 
          .card, [class*="card"],
          button:not(.unstyled),
          input:not([type="checkbox"]):not([type="radio"]),
          textarea,
          select,
          [role="dialog"],
          [role="menu"],
          [role="listbox"],
          .shadow, .shadow-sm, .shadow-md, .shadow-lg {
            border-radius: var(--border-radius) !important;
          }
        `}),e.jsxs(yO,{style:{height:"100vh",overflow:"hidden"},children:[e.jsxs(bO,{className:"border-r border-slate-200 bg-white",style:{height:"100vh",display:"flex",flexDirection:"column"},children:[e.jsx(jO,{className:"border-b border-slate-200 p-6",children:e.jsxs(Ht,{to:Pe("Events"),className:"flex items-center gap-3 hover:opacity-80 transition-opacity",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-lg flex items-center justify-center shadow-md border border-slate-200 overflow-hidden",children:m!=null&&m.profile_photo_url?e.jsx("img",{src:m.profile_photo_url,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx(Xs,{className:"w-6 h-6 text-slate-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-slate-900",children:"AGCAS Events"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Member Portal"})]})]})}),e.jsx(NO,{ref:c,className:"p-3",children:h?e.jsxs(e.Fragment,{children:[r&&!r.is_team_member&&i&&e.jsxs(hg,{children:[e.jsx(mg,{className:"text-xs font-medium text-slate-500 uppercase tracking-wider px-3 py-2",children:"Your Account"}),e.jsx(fg,{children:e.jsxs("div",{className:"px-3 py-2 space-y-3",children:[i.name&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-slate-600 block mb-1",children:"Organisation"}),e.jsx("span",{className:"font-medium text-slate-900",children:i.name})]}),i.voucher_balance>0&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Vouchers"}),e.jsxs("span",{className:"font-semibold text-blue-600",children:["",i.voucher_balance]})]})]})})]}),e.jsxs(hg,{className:r&&!r.is_team_member&&i?"mt-4":"",children:[e.jsx(mg,{className:"text-xs font-medium text-slate-500 uppercase tracking-wider px-3 py-2",children:"Navigation"}),e.jsx(fg,{children:e.jsx(ZN,{children:F.map(U=>{const B=U.icon,$=U.url===n.pathname||U.subItems&&U.subItems.some(L=>L.url===n.pathname);return U.subItems?e.jsxs(s_,{defaultOpen:$,children:[e.jsx(Am,{children:e.jsx(n_,{asChild:!0,children:e.jsxs(Mm,{className:`hover:bg-blue-50 hover:text-blue-700 transition-colors rounded-lg mb-1 flex items-center gap-3 px-3 py-2.5 group ${$?"bg-blue-50 text-blue-700 font-medium":""}`,children:[e.jsx(B,{className:"w-4 h-4"}),e.jsx("span",{className:"flex-1",children:U.title}),e.jsx(js,{className:"w-4 h-4 transition-transform group-data-[state=open]:rotate-90"})]})})}),e.jsx(r_,{children:e.jsx(e_,{children:U.subItems.map(L=>{const I=L.url===n.pathname;return e.jsx(t_,{children:e.jsx(Ht,{to:L.url,className:`flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm ${I?"bg-blue-50 text-blue-700 font-medium":"hover:bg-blue-50 hover:text-blue-700"}`,children:e.jsx("span",{children:L.title})})},L.title)})})})]},U.title):e.jsx(Am,{id:U.title==="Buy Tickets"?"buy-tickets-menu-item":void 0,children:e.jsx(Mm,{asChild:!0,className:`hover:bg-blue-50 hover:text-blue-700 transition-colors rounded-lg mb-1 ${$?"bg-blue-50 text-blue-700 font-medium":""}`,children:e.jsxs(Ht,{to:U.url,className:"flex items-center gap-3 px-3 py-2.5",children:[e.jsx(B,{className:"w-4 h-4"}),e.jsx("span",{children:U.title})]})})},U.title)})})})]}),z.length>0&&e.jsxs(hg,{className:"mt-4",children:[e.jsx(mg,{className:"text-xs font-medium text-amber-600 uppercase tracking-wider px-3 py-2",children:"Administration"}),e.jsx(fg,{children:e.jsx(ZN,{children:z.map(U=>{const B=U.icon,$=U.url===n.pathname||U.subItems&&U.subItems.some(L=>L.url===n.pathname);return U.subItems?e.jsxs(s_,{defaultOpen:$,children:[e.jsx(Am,{children:e.jsx(n_,{asChild:!0,children:e.jsxs(Mm,{className:`hover:bg-amber-50 hover:text-amber-700 transition-colors rounded-lg mb-1 flex items-center gap-3 px-3 py-2.5 group ${$?"bg-amber-50 text-amber-700 font-medium":""}`,children:[e.jsx(B,{className:"w-4 h-4"}),e.jsx("span",{className:"flex-1",children:U.title}),e.jsx(js,{className:"w-4 h-4 transition-transform group-data-[state=open]:rotate-90"})]})})}),e.jsx(r_,{children:e.jsx(e_,{children:U.subItems.map(L=>{const I=L.url===n.pathname;return e.jsx(t_,{children:e.jsx(Ht,{to:L.url,className:`flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm ${I?"bg-amber-50 text-amber-700 font-medium":"hover:bg-amber-50 hover:text-amber-700"}`,children:e.jsx("span",{children:L.title})})},L.title)})})})]},U.title):e.jsx(Am,{children:e.jsx(Mm,{asChild:!0,className:`hover:bg-amber-50 hover:text-amber-700 transition-colors rounded-lg mb-1 ${$?"bg-amber-50 text-amber-700 font-medium":""}`,children:e.jsxs(Ht,{to:U.url,className:"flex items-center gap-3 px-3 py-2.5",children:[e.jsx(B,{className:"w-4 h-4"}),e.jsx("span",{children:U.title})]})})},U.title)})})})]})]}):e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-blue-600 rounded-full animate-spin"})})}),e.jsx(wO,{className:"border-t border-slate-200 p-4",children:r&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"px-3 py-2 bg-slate-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Xs,{className:"w-4 h-4 text-slate-500"}),e.jsxs("span",{className:"text-sm font-medium text-slate-900",children:[r.first_name," ",r.last_name]})]}),e.jsx("p",{className:"text-xs text-slate-500 pl-6",children:r.email}),h&&e.jsx("div",{className:"pl-6 mt-2",children:e.jsx(ye,{className:"bg-blue-100 text-blue-700 text-xs",children:h.name})})]}),e.jsxs(J,{variant:"ghost",className:"w-full justify-start text-slate-600 hover:text-slate-900 hover:bg-slate-50",onClick:O,children:[e.jsx(z5,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-h-screen max-h-screen overflow-hidden",children:[!N("element_NewsTickerBar")&&e.jsx(Mse,{}),e.jsx("main",{ref:o,className:"flex-1 overflow-y-auto overflow-x-hidden",children:V}),e.jsx("footer",{className:"bg-white border-t border-slate-200 py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 text-center",children:[e.jsx("a",{href:"https://isaasi.co.uk",target:"_blank",rel:"noopener noreferrer",className:"inline-block mb-3 hover:opacity-80 transition-opacity",children:e.jsx("img",{src:"https://qtrypzzcjebvfcihiynt.supabase.co/storage/v1/object/public/base44-prod/public/68efc20f3e0a30fafad6dde7/fe03f7c5e_linked-aa.png",alt:"isaasi",className:"w-[50px] mx-auto"})}),e.jsxs("p",{className:"text-sm text-slate-600",children:[e.jsx("span",{style:{color:"#eb008c"},children:"i"}),"Connect by"," ",e.jsx("a",{href:"https://isaasi.co.uk",target:"_blank",rel:"noopener noreferrer",className:"hover:opacity-80 transition-opacity font-medium",style:{color:"#eb008c"},children:"isaasi"})," ","-  Copyright ",new Date().getFullYear()===2025?"2025":`2025-${new Date().getFullYear()}`]})]})})]}),!N("element_FloatersDisplay")&&e.jsx(XR,{location:"portal",memberInfo:r,organizationInfo:i})]},"main-sidebar-provider")]})}const le=b.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:tt("rounded-xl border bg-card text-card-foreground shadow",t),...s}));le.displayName="Card";const Fe=b.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:tt("flex flex-col space-y-1.5 p-6",t),...s}));Fe.displayName="CardHeader";const Ue=b.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:tt("font-semibold leading-none tracking-tight",t),...s}));Ue.displayName="CardTitle";const Es=b.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:tt("text-sm text-muted-foreground",t),...s}));Es.displayName="CardDescription";const ce=b.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:tt("p-6 pt-0",t),...s}));ce.displayName="CardContent";const Fse=b.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:tt("flex items-center p-6 pt-0",t),...s}));Fse.displayName="CardFooter";var Z0="Tabs",[Lse]=vr(Z0,[vh]),ZR=vh(),[Ise,b2]=Lse(Z0),eF=b.forwardRef((t,s)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:i,orientation:l="horizontal",dir:o,activationMode:c="automatic",...u}=t,d=ep(o),[m,h]=Ja({prop:r,onChange:a,defaultProp:i??"",caller:Z0});return e.jsx(Ise,{scope:n,baseId:Vn(),value:m,onValueChange:h,orientation:l,dir:d,activationMode:c,children:e.jsx(Ut.div,{dir:d,"data-orientation":l,...u,ref:s})})});eF.displayName=Z0;var tF="TabsList",sF=b.forwardRef((t,s)=>{const{__scopeTabs:n,loop:r=!0,...a}=t,i=b2(tF,n),l=ZR(n);return e.jsx(x2,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:r,children:e.jsx(Ut.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:s})})});sF.displayName=tF;var nF="TabsTrigger",rF=b.forwardRef((t,s)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...i}=t,l=b2(nF,n),o=ZR(n),c=lF(l.baseId,r),u=oF(l.baseId,r),d=r===l.value;return e.jsx(g2,{asChild:!0,...o,focusable:!a,active:d,children:e.jsx(Ut.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:s,onMouseDown:jt(t.onMouseDown,m=>{!a&&m.button===0&&m.ctrlKey===!1?l.onValueChange(r):m.preventDefault()}),onKeyDown:jt(t.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&l.onValueChange(r)}),onFocus:jt(t.onFocus,()=>{const m=l.activationMode!=="manual";!d&&!a&&m&&l.onValueChange(r)})})})});rF.displayName=nF;var aF="TabsContent",iF=b.forwardRef((t,s)=>{const{__scopeTabs:n,value:r,forceMount:a,children:i,...l}=t,o=b2(aF,n),c=lF(o.baseId,r),u=oF(o.baseId,r),d=r===o.value,m=b.useRef(d);return b.useEffect(()=>{const h=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(h)},[]),e.jsx(yr,{present:a||d,children:({present:h})=>e.jsx(Ut.div,{"data-state":d?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:u,tabIndex:0,...l,ref:s,style:{...t.style,animationDuration:m.current?"0s":void 0},children:h&&i})})});iF.displayName=aF;function lF(t,s){return`${t}-trigger-${s}`}function oF(t,s){return`${t}-content-${s}`}var Bse=eF,cF=sF,dF=rF,uF=iF;const ev=Bse,sp=b.forwardRef(({className:t,...s},n)=>e.jsx(cF,{ref:n,className:tt("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...s}));sp.displayName=cF.displayName;const fr=b.forwardRef(({className:t,...s},n)=>e.jsx(dF,{ref:n,className:tt("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...s}));fr.displayName=dF.displayName;const Io=b.forwardRef(({className:t,...s},n)=>e.jsx(uF,{ref:n,className:tt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s}));Io.displayName=uF.displayName;function rs(t){const s=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&s==="[object Date]"?new t.constructor(+t):typeof t=="number"||s==="[object Number]"||typeof t=="string"||s==="[object String]"?new Date(t):new Date(NaN)}function ia(t,s){return t instanceof Date?new t.constructor(s):new Date(s)}function hr(t,s){const n=rs(t);return isNaN(s)?ia(t,NaN):(s&&n.setDate(n.getDate()+s),n)}function bi(t,s){const n=rs(t);if(isNaN(s))return ia(t,NaN);if(!s)return n;const r=n.getDate(),a=ia(t,n.getTime());a.setMonth(n.getMonth()+s+1,0);const i=a.getDate();return r>=i?a:(n.setFullYear(a.getFullYear(),a.getMonth(),r),n)}const j2=6048e5,qse=864e5,zse=6e4,Bx=43200,PP=1440;let $se={};function bh(){return $se}function sl(t,s){var o,c,u,d;const n=bh(),r=(s==null?void 0:s.weekStartsOn)??((c=(o=s==null?void 0:s.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=rs(t),i=a.getDay(),l=(i<r?7:0)+i-r;return a.setDate(a.getDate()-l),a.setHours(0,0,0,0),a}function id(t){return sl(t,{weekStartsOn:1})}function hF(t){const s=rs(t),n=s.getFullYear(),r=ia(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const a=id(r),i=ia(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const l=id(i);return s.getTime()>=a.getTime()?n+1:s.getTime()>=l.getTime()?n:n-1}function Wu(t){const s=rs(t);return s.setHours(0,0,0,0),s}function Hu(t){const s=rs(t),n=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return n.setUTCFullYear(s.getFullYear()),+t-+n}function mi(t,s){const n=Wu(t),r=Wu(s),a=+n-Hu(n),i=+r-Hu(r);return Math.round((a-i)/qse)}function Use(t){const s=hF(t),n=ia(t,0);return n.setFullYear(s,0,4),n.setHours(0,0,0,0),id(n)}function C_(t,s){const n=s*7;return hr(t,n)}function Vse(t,s){return bi(t,s*12)}function Wse(t){let s;return t.forEach(function(n){const r=rs(n);(s===void 0||s<r||isNaN(Number(r)))&&(s=r)}),s||new Date(NaN)}function Hse(t){let s;return t.forEach(n=>{const r=rs(n);(!s||s>r||isNaN(+r))&&(s=r)}),s||new Date(NaN)}function xg(t,s){const n=rs(t),r=rs(s),a=n.getTime()-r.getTime();return a<0?-1:a>0?1:a}function Kse(t){return ia(t,Date.now())}function Zr(t,s){const n=Wu(t),r=Wu(s);return+n==+r}function w2(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Gse(t){if(!w2(t)&&typeof t!="number")return!1;const s=rs(t);return!isNaN(Number(s))}function Ku(t,s){const n=rs(t),r=rs(s),a=n.getFullYear()-r.getFullYear(),i=n.getMonth()-r.getMonth();return a*12+i}function Yse(t,s,n){const r=sl(t,n),a=sl(s,n),i=+r-Hu(r),l=+a-Hu(a);return Math.round((i-l)/j2)}function Vl(t,s){const n=rs(t),r=rs(s),a=TP(n,r),i=Math.abs(mi(n,r));n.setDate(n.getDate()-a*i);const l=+(TP(n,r)===-a),o=a*(i-l);return o===0?0:o}function TP(t,s){const n=t.getFullYear()-s.getFullYear()||t.getMonth()-s.getMonth()||t.getDate()-s.getDate()||t.getHours()-s.getHours()||t.getMinutes()-s.getMinutes()||t.getSeconds()-s.getSeconds()||t.getMilliseconds()-s.getMilliseconds();return n<0?-1:n>0?1:n}function mF(t){return s=>{const n=Math.trunc,r=n(s);return r===0?0:r}}function fF(t,s){return+rs(t)-+rs(s)}function Qse(t,s,n){const r=fF(t,s)/zse;return mF()(r)}function Jse(t){const s=rs(t);return s.setHours(23,59,59,999),s}function tv(t){const s=rs(t),n=s.getMonth();return s.setFullYear(s.getFullYear(),n+1,0),s.setHours(23,59,59,999),s}function Xse(t){const s=rs(t);return+Jse(s)==+tv(s)}function Zse(t,s){const n=rs(t),r=rs(s),a=xg(n,r),i=Math.abs(Ku(n,r));let l;if(i<1)l=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-a*i);let o=xg(n,r)===-a;Xse(rs(t))&&i===1&&xg(t,r)===1&&(o=!1),l=a*(i-Number(o))}return l===0?0:l}function ene(t,s,n){const r=fF(t,s)/1e3;return mF()(r)}function na(t){const s=rs(t);return s.setDate(1),s.setHours(0,0,0,0),s}function pF(t){const s=rs(t),n=ia(t,0);return n.setFullYear(s.getFullYear(),0,1),n.setHours(0,0,0,0),n}function N2(t,s){var o,c,u,d;const n=bh(),r=(s==null?void 0:s.weekStartsOn)??((c=(o=s==null?void 0:s.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=rs(t),i=a.getDay(),l=(i<r?-7:0)+6-(i-r);return a.setDate(a.getDate()+l),a.setHours(23,59,59,999),a}function xF(t){return N2(t,{weekStartsOn:1})}const tne={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},sne=(t,s,n)=>{let r;const a=tne[t];return typeof a=="string"?r=a:s===1?r=a.one:r=a.other.replace("{{count}}",s.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Ub(t){return(s={})=>{const n=s.width?String(s.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const nne={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},rne={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ane={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ine={date:Ub({formats:nne,defaultWidth:"full"}),time:Ub({formats:rne,defaultWidth:"full"}),dateTime:Ub({formats:ane,defaultWidth:"full"})},lne={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},one=(t,s,n,r)=>lne[t];function xm(t){return(s,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):l;a=t.formattingValues[o]||t.formattingValues[l]}else{const l=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;a=t.values[o]||t.values[l]}const i=t.argumentCallback?t.argumentCallback(s):s;return a[i]}}const cne={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},dne={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},une={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},hne={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},mne={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},fne={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},pne=(t,s)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},xne={ordinalNumber:pne,era:xm({values:cne,defaultWidth:"wide"}),quarter:xm({values:dne,defaultWidth:"wide",argumentCallback:t=>t-1}),month:xm({values:une,defaultWidth:"wide"}),day:xm({values:hne,defaultWidth:"wide"}),dayPeriod:xm({values:mne,defaultWidth:"wide",formattingValues:fne,defaultFormattingWidth:"wide"})};function gm(t){return(s,n={})=>{const r=n.width,a=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=s.match(a);if(!i)return null;const l=i[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(o)?vne(o,m=>m.test(l)):gne(o,m=>m.test(l));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=s.slice(l.length);return{value:u,rest:d}}}function gne(t,s){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&s(t[n]))return n}function vne(t,s){for(let n=0;n<t.length;n++)if(s(t[n]))return n}function yne(t){return(s,n={})=>{const r=s.match(t.matchPattern);if(!r)return null;const a=r[0],i=s.match(t.parsePattern);if(!i)return null;let l=t.valueCallback?t.valueCallback(i[0]):i[0];l=n.valueCallback?n.valueCallback(l):l;const o=s.slice(a.length);return{value:l,rest:o}}}const bne=/^(\d+)(th|st|nd|rd)?/i,jne=/\d+/i,wne={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Nne={any:[/^b/i,/^(a|c)/i]},_ne={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Sne={any:[/1/i,/2/i,/3/i,/4/i]},Cne={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},kne={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ene={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Pne={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Tne={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ane={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Mne={ordinalNumber:yne({matchPattern:bne,parsePattern:jne,valueCallback:t=>parseInt(t,10)}),era:gm({matchPatterns:wne,defaultMatchWidth:"wide",parsePatterns:Nne,defaultParseWidth:"any"}),quarter:gm({matchPatterns:_ne,defaultMatchWidth:"wide",parsePatterns:Sne,defaultParseWidth:"any",valueCallback:t=>t+1}),month:gm({matchPatterns:Cne,defaultMatchWidth:"wide",parsePatterns:kne,defaultParseWidth:"any"}),day:gm({matchPatterns:Ene,defaultMatchWidth:"wide",parsePatterns:Pne,defaultParseWidth:"any"}),dayPeriod:gm({matchPatterns:Tne,defaultMatchWidth:"any",parsePatterns:Ane,defaultParseWidth:"any"})},_2={code:"en-US",formatDistance:sne,formatLong:ine,formatRelative:one,localize:xne,match:Mne,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Dne(t){const s=rs(t);return mi(s,pF(s))+1}function gF(t){const s=rs(t),n=+id(s)-+Use(s);return Math.round(n/j2)+1}function vF(t,s){var d,m,h,p;const n=rs(t),r=n.getFullYear(),a=bh(),i=(s==null?void 0:s.firstWeekContainsDate)??((m=(d=s==null?void 0:s.locale)==null?void 0:d.options)==null?void 0:m.firstWeekContainsDate)??a.firstWeekContainsDate??((p=(h=a.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,l=ia(t,0);l.setFullYear(r+1,0,i),l.setHours(0,0,0,0);const o=sl(l,s),c=ia(t,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const u=sl(c,s);return n.getTime()>=o.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function One(t,s){var o,c,u,d;const n=bh(),r=(s==null?void 0:s.firstWeekContainsDate)??((c=(o=s==null?void 0:s.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=vF(t,s),i=ia(t,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),sl(i,s)}function yF(t,s){const n=rs(t),r=+sl(n,s)-+One(n,s);return Math.round(r/j2)+1}function Ks(t,s){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(s,"0");return n+r}const No={y(t,s){const n=t.getFullYear(),r=n>0?n:1-n;return Ks(s==="yy"?r%100:r,s.length)},M(t,s){const n=t.getMonth();return s==="M"?String(n+1):Ks(n+1,2)},d(t,s){return Ks(t.getDate(),s.length)},a(t,s){const n=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,s){return Ks(t.getHours()%12||12,s.length)},H(t,s){return Ks(t.getHours(),s.length)},m(t,s){return Ks(t.getMinutes(),s.length)},s(t,s){return Ks(t.getSeconds(),s.length)},S(t,s){const n=s.length,r=t.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return Ks(a,s.length)}},au={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},AP={G:function(t,s,n){const r=t.getFullYear()>0?1:0;switch(s){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,s,n){if(s==="yo"){const r=t.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return No.y(t,s)},Y:function(t,s,n,r){const a=vF(t,r),i=a>0?a:1-a;if(s==="YY"){const l=i%100;return Ks(l,2)}return s==="Yo"?n.ordinalNumber(i,{unit:"year"}):Ks(i,s.length)},R:function(t,s){const n=hF(t);return Ks(n,s.length)},u:function(t,s){const n=t.getFullYear();return Ks(n,s.length)},Q:function(t,s,n){const r=Math.ceil((t.getMonth()+1)/3);switch(s){case"Q":return String(r);case"QQ":return Ks(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,s,n){const r=Math.ceil((t.getMonth()+1)/3);switch(s){case"q":return String(r);case"qq":return Ks(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,s,n){const r=t.getMonth();switch(s){case"M":case"MM":return No.M(t,s);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,s,n){const r=t.getMonth();switch(s){case"L":return String(r+1);case"LL":return Ks(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,s,n,r){const a=yF(t,r);return s==="wo"?n.ordinalNumber(a,{unit:"week"}):Ks(a,s.length)},I:function(t,s,n){const r=gF(t);return s==="Io"?n.ordinalNumber(r,{unit:"week"}):Ks(r,s.length)},d:function(t,s,n){return s==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):No.d(t,s)},D:function(t,s,n){const r=Dne(t);return s==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ks(r,s.length)},E:function(t,s,n){const r=t.getDay();switch(s){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,s,n,r){const a=t.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(s){case"e":return String(i);case"ee":return Ks(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(t,s,n,r){const a=t.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(s){case"c":return String(i);case"cc":return Ks(i,s.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(t,s,n){const r=t.getDay(),a=r===0?7:r;switch(s){case"i":return String(a);case"ii":return Ks(a,s.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,s,n){const a=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,s,n){const r=t.getHours();let a;switch(r===12?a=au.noon:r===0?a=au.midnight:a=r/12>=1?"pm":"am",s){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,s,n){const r=t.getHours();let a;switch(r>=17?a=au.evening:r>=12?a=au.afternoon:r>=4?a=au.morning:a=au.night,s){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,s,n){if(s==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return No.h(t,s)},H:function(t,s,n){return s==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):No.H(t,s)},K:function(t,s,n){const r=t.getHours()%12;return s==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ks(r,s.length)},k:function(t,s,n){let r=t.getHours();return r===0&&(r=24),s==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ks(r,s.length)},m:function(t,s,n){return s==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):No.m(t,s)},s:function(t,s,n){return s==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):No.s(t,s)},S:function(t,s){return No.S(t,s)},X:function(t,s,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(s){case"X":return DP(r);case"XXXX":case"XX":return _c(r);case"XXXXX":case"XXX":default:return _c(r,":")}},x:function(t,s,n){const r=t.getTimezoneOffset();switch(s){case"x":return DP(r);case"xxxx":case"xx":return _c(r);case"xxxxx":case"xxx":default:return _c(r,":")}},O:function(t,s,n){const r=t.getTimezoneOffset();switch(s){case"O":case"OO":case"OOO":return"GMT"+MP(r,":");case"OOOO":default:return"GMT"+_c(r,":")}},z:function(t,s,n){const r=t.getTimezoneOffset();switch(s){case"z":case"zz":case"zzz":return"GMT"+MP(r,":");case"zzzz":default:return"GMT"+_c(r,":")}},t:function(t,s,n){const r=Math.trunc(t.getTime()/1e3);return Ks(r,s.length)},T:function(t,s,n){const r=t.getTime();return Ks(r,s.length)}};function MP(t,s=""){const n=t>0?"-":"+",r=Math.abs(t),a=Math.trunc(r/60),i=r%60;return i===0?n+String(a):n+String(a)+s+Ks(i,2)}function DP(t,s){return t%60===0?(t>0?"-":"+")+Ks(Math.abs(t)/60,2):_c(t,s)}function _c(t,s=""){const n=t>0?"-":"+",r=Math.abs(t),a=Ks(Math.trunc(r/60),2),i=Ks(r%60,2);return n+a+s+i}const OP=(t,s)=>{switch(t){case"P":return s.date({width:"short"});case"PP":return s.date({width:"medium"});case"PPP":return s.date({width:"long"});case"PPPP":default:return s.date({width:"full"})}},bF=(t,s)=>{switch(t){case"p":return s.time({width:"short"});case"pp":return s.time({width:"medium"});case"ppp":return s.time({width:"long"});case"pppp":default:return s.time({width:"full"})}},Rne=(t,s)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return OP(t,s);let i;switch(r){case"P":i=s.dateTime({width:"short"});break;case"PP":i=s.dateTime({width:"medium"});break;case"PPP":i=s.dateTime({width:"long"});break;case"PPPP":default:i=s.dateTime({width:"full"});break}return i.replace("{{date}}",OP(r,s)).replace("{{time}}",bF(a,s))},Fne={p:bF,P:Rne},Lne=/^D+$/,Ine=/^Y+$/,Bne=["D","DD","YY","YYYY"];function qne(t){return Lne.test(t)}function zne(t){return Ine.test(t)}function $ne(t,s,n){const r=Une(t,s,n);if(console.warn(r),Bne.includes(t))throw new RangeError(r)}function Une(t,s,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${s}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Vne=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Wne=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Hne=/^'([^]*?)'?$/,Kne=/''/g,Gne=/[a-zA-Z]/;function Mt(t,s,n){var d,m,h,p,g,v,y,j;const r=bh(),a=(n==null?void 0:n.locale)??r.locale??_2,i=(n==null?void 0:n.firstWeekContainsDate)??((m=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:m.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(h=r.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,l=(n==null?void 0:n.weekStartsOn)??((v=(g=n==null?void 0:n.locale)==null?void 0:g.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((j=(y=r.locale)==null?void 0:y.options)==null?void 0:j.weekStartsOn)??0,o=rs(t);if(!Gse(o))throw new RangeError("Invalid time value");let c=s.match(Wne).map(w=>{const N=w[0];if(N==="p"||N==="P"){const _=Fne[N];return _(w,a.formatLong)}return w}).join("").match(Vne).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const N=w[0];if(N==="'")return{isToken:!1,value:Yne(w)};if(AP[N])return{isToken:!0,value:w};if(N.match(Gne))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");return{isToken:!1,value:w}});a.localize.preprocessor&&(c=a.localize.preprocessor(o,c));const u={firstWeekContainsDate:i,weekStartsOn:l,locale:a};return c.map(w=>{if(!w.isToken)return w.value;const N=w.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&zne(N)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&qne(N))&&$ne(N,s,String(t));const _=AP[N[0]];return _(o,N,a.localize,u)}).join("")}function Yne(t){const s=t.match(Hne);return s?s[1].replace(Kne,"'"):t}function Qne(t,s,n){const r=bh(),a=(n==null?void 0:n.locale)??r.locale??_2,i=2520,l=xg(t,s);if(isNaN(l))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:l});let c,u;l>0?(c=rs(s),u=rs(t)):(c=rs(t),u=rs(s));const d=ene(u,c),m=(Hu(u)-Hu(c))/1e3,h=Math.round((d-m)/60);let p;if(h<2)return n!=null&&n.includeSeconds?d<5?a.formatDistance("lessThanXSeconds",5,o):d<10?a.formatDistance("lessThanXSeconds",10,o):d<20?a.formatDistance("lessThanXSeconds",20,o):d<40?a.formatDistance("halfAMinute",0,o):d<60?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",1,o):h===0?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",h,o);if(h<45)return a.formatDistance("xMinutes",h,o);if(h<90)return a.formatDistance("aboutXHours",1,o);if(h<PP){const g=Math.round(h/60);return a.formatDistance("aboutXHours",g,o)}else{if(h<i)return a.formatDistance("xDays",1,o);if(h<Bx){const g=Math.round(h/PP);return a.formatDistance("xDays",g,o)}else if(h<Bx*2)return p=Math.round(h/Bx),a.formatDistance("aboutXMonths",p,o)}if(p=Zse(u,c),p<12){const g=Math.round(h/Bx);return a.formatDistance("xMonths",g,o)}else{const g=p%12,v=Math.trunc(p/12);return g<3?a.formatDistance("aboutXYears",v,o):g<9?a.formatDistance("overXYears",v,o):a.formatDistance("almostXYears",v+1,o)}}function jF(t,s){return Qne(t,Kse(t),s)}function Jne(t){const s=rs(t),n=s.getFullYear(),r=s.getMonth(),a=ia(t,0);return a.setFullYear(n,r+1,0),a.setHours(0,0,0,0),a.getDate()}function Xne(t){return Math.trunc(+rs(t)/1e3)}function Zne(t){const s=rs(t),n=s.getMonth();return s.setFullYear(s.getFullYear(),n+1,0),s.setHours(0,0,0,0),s}function ere(t,s){return Yse(Zne(t),na(t),s)+1}function k_(t,s){const n=rs(t),r=rs(s);return n.getTime()>r.getTime()}function Wg(t,s){const n=rs(t),r=rs(s);return+n<+r}function S2(t,s){const n=rs(t),r=rs(s);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function tre(t,s){const n=rs(t),r=rs(s);return n.getFullYear()===r.getFullYear()}function Vb(t,s){return hr(t,-s)}function Wb(t,s){const n=rs(t),r=n.getFullYear(),a=n.getDate(),i=ia(t,0);i.setFullYear(r,s,15),i.setHours(0,0,0,0);const l=Jne(i);return n.setMonth(s,Math.min(a,l)),n}function RP(t,s){const n=rs(t);return isNaN(+n)?ia(t,NaN):(n.setFullYear(s),n)}function sre({event:t,organizationInfo:s,isFeatureExcluded:n}){const r=t.start_date?new Date(t.start_date):null,a=t.end_date?new Date(t.end_date):null,i=t.available_seats===0||t.available_seats===null,l=t.program_tag&&(s!=null&&s.program_ticket_balances)&&s.program_ticket_balances[t.program_tag]||0,o=l>0,c=t.program_tag&&!o;t.backstage_public_url;const u=!n||!n("element_AvailableSeatsDisplay");return e.jsxs(le,{className:"overflow-hidden hover:shadow-lg transition-shadow duration-300 border-slate-200 bg-white",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-r from-slate-50 to-blue-50 border-b border-slate-200",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[t.program_tag&&e.jsx(ye,{variant:"secondary",className:"bg-blue-100 text-blue-700 border-blue-200",children:t.program_tag}),s&&t.program_tag&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-600",children:[e.jsx(Rs,{className:"w-3 h-3 text-purple-600"}),e.jsx("span",{className:"font-medium",children:l})]})]}),c&&e.jsxs("div",{className:"flex items-start gap-2 p-2 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx(vs,{className:"w-4 h-4 text-amber-600 shrink-0 mt-0.5"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-xs font-medium text-amber-900",children:"Purchase tickets to attend"})})]})]}),t.image_url&&e.jsx("div",{className:"h-48 overflow-hidden bg-slate-100",children:e.jsx("img",{src:t.image_url,alt:t.title,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"})}),e.jsxs(Fe,{className:"pb-3",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-900 line-clamp-2",children:t.title}),t.description&&e.jsx("p",{className:"text-sm text-slate-600 line-clamp-2 mt-2",children:t.description})]}),e.jsxs(ce,{className:"space-y-3",children:[r&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(Ns,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{children:Mt(r,"MMM d, yyyy")}),a&&r.getTime()!==a.getTime()&&e.jsxs("span",{className:"text-slate-400",children:["- ",Mt(a,"MMM d, yyyy")]})]}),r&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(tn,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{children:Mt(r,"h:mm a")})]}),t.location&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(Rr,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{className:"line-clamp-1",children:t.location})]}),u&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ws,{className:"w-4 h-4 text-slate-400"}),i?e.jsx("span",{className:"text-green-600 font-medium",children:"Open Registration"}):t.available_seats>0?e.jsxs("span",{className:"text-green-600 font-medium",children:[t.available_seats," seats available"]}):e.jsx("span",{className:"text-red-600 font-medium",children:"Sold out"})]}),e.jsx("div",{className:"pt-3 border-t border-slate-100",children:c?e.jsxs(J,{className:"w-full bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700",onClick:()=>window.location.href=Pe("BuyProgramTickets"),children:[e.jsx(xd,{className:"w-4 h-4 mr-2"}),"Buy Tickets"]}):e.jsx(J,{className:"w-full bg-blue-600 hover:bg-blue-700",disabled:!i&&t.available_seats===0,onClick:()=>window.location.href=Pe("EventDetails")+"?id="+t.id,children:!i&&t.available_seats===0?"Sold Out":"Register"})})]})]})}function nre({programs:t,selectedProgram:s,onProgramChange:n}){return e.jsxs("div",{className:"flex items-center gap-2 min-w-[200px]",children:[e.jsx(HK,{className:"w-4 h-4 text-slate-400"}),e.jsxs(Ke,{value:s,onValueChange:n,children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:"Filter by program"})}),e.jsx(We,{children:t.map(r=>e.jsx(re,{value:r,children:r==="all"?"All Programs":r},r))})]})]})}const C2=b.createContext({});function k2(t){const s=b.useRef(null);return s.current===null&&(s.current=t()),s.current}const E2=typeof window<"u",wF=E2?b.useLayoutEffect:b.useEffect,sv=b.createContext(null);function P2(t,s){t.indexOf(s)===-1&&t.push(s)}function T2(t,s){const n=t.indexOf(s);n>-1&&t.splice(n,1)}const Wl=(t,s,n)=>n>s?s:n<t?t:n;let A2=()=>{};const Hl={},NF=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function _F(t){return typeof t=="object"&&t!==null}const SF=t=>/^0[^.\s]+$/u.test(t);function M2(t){let s;return()=>(s===void 0&&(s=t()),s)}const Ka=t=>t,rre=(t,s)=>n=>s(t(n)),np=(...t)=>t.reduce(rre),cf=(t,s,n)=>{const r=s-t;return r===0?1:(n-t)/r};class D2{constructor(){this.subscriptions=[]}add(s){return P2(this.subscriptions,s),()=>T2(this.subscriptions,s)}notify(s,n,r){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](s,n,r);else for(let i=0;i<a;i++){const l=this.subscriptions[i];l&&l(s,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Xi=t=>t*1e3,Wa=t=>t/1e3;function CF(t,s){return s?t*(1e3/s):0}const kF=(t,s,n)=>(((1-3*n+3*s)*t+(3*n-6*s))*t+3*s)*t,are=1e-7,ire=12;function lre(t,s,n,r,a){let i,l,o=0;do l=s+(n-s)/2,i=kF(l,r,a)-t,i>0?n=l:s=l;while(Math.abs(i)>are&&++o<ire);return l}function rp(t,s,n,r){if(t===s&&n===r)return Ka;const a=i=>lre(i,0,1,t,n);return i=>i===0||i===1?i:kF(a(i),s,r)}const EF=t=>s=>s<=.5?t(2*s)/2:(2-t(2*(1-s)))/2,PF=t=>s=>1-t(1-s),TF=rp(.33,1.53,.69,.99),O2=PF(TF),AF=EF(O2),MF=t=>(t*=2)<1?.5*O2(t):.5*(2-Math.pow(2,-10*(t-1))),R2=t=>1-Math.sin(Math.acos(t)),DF=PF(R2),OF=EF(R2),ore=rp(.42,0,1,1),cre=rp(0,0,.58,1),RF=rp(.42,0,.58,1),dre=t=>Array.isArray(t)&&typeof t[0]!="number",FF=t=>Array.isArray(t)&&typeof t[0]=="number",ure={linear:Ka,easeIn:ore,easeInOut:RF,easeOut:cre,circIn:R2,circInOut:OF,circOut:DF,backIn:O2,backInOut:AF,backOut:TF,anticipate:MF},hre=t=>typeof t=="string",FP=t=>{if(FF(t)){A2(t.length===4);const[s,n,r,a]=t;return rp(s,n,r,a)}else if(hre(t))return ure[t];return t},qx=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function mre(t,s){let n=new Set,r=new Set,a=!1,i=!1;const l=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function c(d){l.has(d)&&(u.schedule(d),t()),d(o)}const u={schedule:(d,m=!1,h=!1)=>{const g=h&&a?n:r;return m&&l.add(d),g.has(d)||g.add(d),d},cancel:d=>{r.delete(d),l.delete(d)},process:d=>{if(o=d,a){i=!0;return}a=!0,[n,r]=[r,n],n.forEach(c),n.clear(),a=!1,i&&(i=!1,u.process(d))}};return u}const fre=40;function LF(t,s){let n=!1,r=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,l=qx.reduce((N,_)=>(N[_]=mre(i),N),{}),{setup:o,read:c,resolveKeyframes:u,preUpdate:d,update:m,preRender:h,render:p,postRender:g}=l,v=()=>{const N=Hl.useManualTiming?a.timestamp:performance.now();n=!1,Hl.useManualTiming||(a.delta=r?1e3/60:Math.max(Math.min(N-a.timestamp,fre),1)),a.timestamp=N,a.isProcessing=!0,o.process(a),c.process(a),u.process(a),d.process(a),m.process(a),h.process(a),p.process(a),g.process(a),a.isProcessing=!1,n&&s&&(r=!1,t(v))},y=()=>{n=!0,r=!0,a.isProcessing||t(v)};return{schedule:qx.reduce((N,_)=>{const T=l[_];return N[_]=(A,P=!1,C=!1)=>(n||y(),T.schedule(A,P,C)),N},{}),cancel:N=>{for(let _=0;_<qx.length;_++)l[qx[_]].cancel(N)},state:a,steps:l}}const{schedule:gn,cancel:Yo,state:ar,steps:Hb}=LF(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ka,!0);let gg;function pre(){gg=void 0}const ea={now:()=>(gg===void 0&&ea.set(ar.isProcessing||Hl.useManualTiming?ar.timestamp:performance.now()),gg),set:t=>{gg=t,queueMicrotask(pre)}},IF=t=>s=>typeof s=="string"&&s.startsWith(t),F2=IF("--"),xre=IF("var(--"),L2=t=>xre(t)?gre.test(t.split("/*")[0].trim()):!1,gre=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,jh={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},df={...jh,transform:t=>Wl(0,1,t)},zx={...jh,default:1},qm=t=>Math.round(t*1e5)/1e5,I2=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function vre(t){return t==null}const yre=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,B2=(t,s)=>n=>!!(typeof n=="string"&&yre.test(n)&&n.startsWith(t)||s&&!vre(n)&&Object.prototype.hasOwnProperty.call(n,s)),BF=(t,s,n)=>r=>{if(typeof r!="string")return r;const[a,i,l,o]=r.match(I2);return{[t]:parseFloat(a),[s]:parseFloat(i),[n]:parseFloat(l),alpha:o!==void 0?parseFloat(o):1}},bre=t=>Wl(0,255,t),Kb={...jh,transform:t=>Math.round(bre(t))},Mc={test:B2("rgb","red"),parse:BF("red","green","blue"),transform:({red:t,green:s,blue:n,alpha:r=1})=>"rgba("+Kb.transform(t)+", "+Kb.transform(s)+", "+Kb.transform(n)+", "+qm(df.transform(r))+")"};function jre(t){let s="",n="",r="",a="";return t.length>5?(s=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),a=t.substring(7,9)):(s=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),a=t.substring(4,5),s+=s,n+=n,r+=r,a+=a),{red:parseInt(s,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}}const E_={test:B2("#"),parse:jre,transform:Mc.transform},ap=t=>({test:s=>typeof s=="string"&&s.endsWith(t)&&s.split(" ").length===1,parse:parseFloat,transform:s=>`${s}${t}`}),ko=ap("deg"),Zi=ap("%"),ts=ap("px"),wre=ap("vh"),Nre=ap("vw"),LP={...Zi,parse:t=>Zi.parse(t)/100,transform:t=>Zi.transform(t*100)},hu={test:B2("hsl","hue"),parse:BF("hue","saturation","lightness"),transform:({hue:t,saturation:s,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Zi.transform(qm(s))+", "+Zi.transform(qm(n))+", "+qm(df.transform(r))+")"},Fn={test:t=>Mc.test(t)||E_.test(t)||hu.test(t),parse:t=>Mc.test(t)?Mc.parse(t):hu.test(t)?hu.parse(t):E_.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Mc.transform(t):hu.transform(t),getAnimatableNone:t=>{const s=Fn.parse(t);return s.alpha=0,Fn.transform(s)}},_re=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Sre(t){var s,n;return isNaN(t)&&typeof t=="string"&&(((s=t.match(I2))==null?void 0:s.length)||0)+(((n=t.match(_re))==null?void 0:n.length)||0)>0}const qF="number",zF="color",Cre="var",kre="var(",IP="${}",Ere=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function uf(t){const s=t.toString(),n=[],r={color:[],number:[],var:[]},a=[];let i=0;const o=s.replace(Ere,c=>(Fn.test(c)?(r.color.push(i),a.push(zF),n.push(Fn.parse(c))):c.startsWith(kre)?(r.var.push(i),a.push(Cre),n.push(c)):(r.number.push(i),a.push(qF),n.push(parseFloat(c))),++i,IP)).split(IP);return{values:n,split:o,indexes:r,types:a}}function $F(t){return uf(t).values}function UF(t){const{split:s,types:n}=uf(t),r=s.length;return a=>{let i="";for(let l=0;l<r;l++)if(i+=s[l],a[l]!==void 0){const o=n[l];o===qF?i+=qm(a[l]):o===zF?i+=Fn.transform(a[l]):i+=a[l]}return i}}const Pre=t=>typeof t=="number"?0:Fn.test(t)?Fn.getAnimatableNone(t):t;function Tre(t){const s=$F(t);return UF(t)(s.map(Pre))}const Qo={test:Sre,parse:$F,createTransformer:UF,getAnimatableNone:Tre};function Gb(t,s,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(s-t)*6*n:n<1/2?s:n<2/3?t+(s-t)*(2/3-n)*6:t}function Are({hue:t,saturation:s,lightness:n,alpha:r}){t/=360,s/=100,n/=100;let a=0,i=0,l=0;if(!s)a=i=l=n;else{const o=n<.5?n*(1+s):n+s-n*s,c=2*n-o;a=Gb(c,o,t+1/3),i=Gb(c,o,t),l=Gb(c,o,t-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(l*255),alpha:r}}function Hg(t,s){return n=>n>0?s:t}const wn=(t,s,n)=>t+(s-t)*n,Yb=(t,s,n)=>{const r=t*t,a=n*(s*s-r)+r;return a<0?0:Math.sqrt(a)},Mre=[E_,Mc,hu],Dre=t=>Mre.find(s=>s.test(t));function BP(t){const s=Dre(t);if(!s)return!1;let n=s.parse(t);return s===hu&&(n=Are(n)),n}const qP=(t,s)=>{const n=BP(t),r=BP(s);if(!n||!r)return Hg(t,s);const a={...n};return i=>(a.red=Yb(n.red,r.red,i),a.green=Yb(n.green,r.green,i),a.blue=Yb(n.blue,r.blue,i),a.alpha=wn(n.alpha,r.alpha,i),Mc.transform(a))},P_=new Set(["none","hidden"]);function Ore(t,s){return P_.has(t)?n=>n<=0?t:s:n=>n>=1?s:t}function Rre(t,s){return n=>wn(t,s,n)}function q2(t){return typeof t=="number"?Rre:typeof t=="string"?L2(t)?Hg:Fn.test(t)?qP:Ire:Array.isArray(t)?VF:typeof t=="object"?Fn.test(t)?qP:Fre:Hg}function VF(t,s){const n=[...t],r=n.length,a=t.map((i,l)=>q2(i)(i,s[l]));return i=>{for(let l=0;l<r;l++)n[l]=a[l](i);return n}}function Fre(t,s){const n={...t,...s},r={};for(const a in n)t[a]!==void 0&&s[a]!==void 0&&(r[a]=q2(t[a])(t[a],s[a]));return a=>{for(const i in r)n[i]=r[i](a);return n}}function Lre(t,s){const n=[],r={color:0,var:0,number:0};for(let a=0;a<s.values.length;a++){const i=s.types[a],l=t.indexes[i][r[i]],o=t.values[l]??0;n[a]=o,r[i]++}return n}const Ire=(t,s)=>{const n=Qo.createTransformer(s),r=uf(t),a=uf(s);return r.indexes.var.length===a.indexes.var.length&&r.indexes.color.length===a.indexes.color.length&&r.indexes.number.length>=a.indexes.number.length?P_.has(t)&&!a.values.length||P_.has(s)&&!r.values.length?Ore(t,s):np(VF(Lre(r,a),a.values),n):Hg(t,s)};function WF(t,s,n){return typeof t=="number"&&typeof s=="number"&&typeof n=="number"?wn(t,s,n):q2(t)(t,s)}const Bre=t=>{const s=({timestamp:n})=>t(n);return{start:(n=!0)=>gn.update(s,n),stop:()=>Yo(s),now:()=>ar.isProcessing?ar.timestamp:ea.now()}},HF=(t,s,n=10)=>{let r="";const a=Math.max(Math.round(s/n),2);for(let i=0;i<a;i++)r+=Math.round(t(i/(a-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Kg=2e4;function z2(t){let s=0;const n=50;let r=t.next(s);for(;!r.done&&s<Kg;)s+=n,r=t.next(s);return s>=Kg?1/0:s}function qre(t,s=100,n){const r=n({...t,keyframes:[0,s]}),a=Math.min(z2(r),Kg);return{type:"keyframes",ease:i=>r.next(a*i).value/s,duration:Wa(a)}}const zre=5;function KF(t,s,n){const r=Math.max(s-zre,0);return CF(n-t(r),s-r)}const kn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Qb=.001;function $re({duration:t=kn.duration,bounce:s=kn.bounce,velocity:n=kn.velocity,mass:r=kn.mass}){let a,i,l=1-s;l=Wl(kn.minDamping,kn.maxDamping,l),t=Wl(kn.minDuration,kn.maxDuration,Wa(t)),l<1?(a=u=>{const d=u*l,m=d*t,h=d-n,p=T_(u,l),g=Math.exp(-m);return Qb-h/p*g},i=u=>{const m=u*l*t,h=m*n+n,p=Math.pow(l,2)*Math.pow(u,2)*t,g=Math.exp(-m),v=T_(Math.pow(u,2),l);return(-a(u)+Qb>0?-1:1)*((h-p)*g)/v}):(a=u=>{const d=Math.exp(-u*t),m=(u-n)*t+1;return-Qb+d*m},i=u=>{const d=Math.exp(-u*t),m=(n-u)*(t*t);return d*m});const o=5/t,c=Vre(a,i,o);if(t=Xi(t),isNaN(c))return{stiffness:kn.stiffness,damping:kn.damping,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:l*2*Math.sqrt(r*u),duration:t}}}const Ure=12;function Vre(t,s,n){let r=n;for(let a=1;a<Ure;a++)r=r-t(r)/s(r);return r}function T_(t,s){return t*Math.sqrt(1-s*s)}const Wre=["duration","bounce"],Hre=["stiffness","damping","mass"];function zP(t,s){return s.some(n=>t[n]!==void 0)}function Kre(t){let s={velocity:kn.velocity,stiffness:kn.stiffness,damping:kn.damping,mass:kn.mass,isResolvedFromDuration:!1,...t};if(!zP(t,Hre)&&zP(t,Wre))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),a=r*r,i=2*Wl(.05,1,1-(t.bounce||0))*Math.sqrt(a);s={...s,mass:kn.mass,stiffness:a,damping:i}}else{const n=$re(t);s={...s,...n,mass:kn.mass},s.isResolvedFromDuration=!0}return s}function Gg(t=kn.visualDuration,s=kn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:s}:t;let{restSpeed:r,restDelta:a}=n;const i=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],o={done:!1,value:i},{stiffness:c,damping:u,mass:d,duration:m,velocity:h,isResolvedFromDuration:p}=Kre({...n,velocity:-Wa(n.velocity||0)}),g=h||0,v=u/(2*Math.sqrt(c*d)),y=l-i,j=Wa(Math.sqrt(c/d)),w=Math.abs(y)<5;r||(r=w?kn.restSpeed.granular:kn.restSpeed.default),a||(a=w?kn.restDelta.granular:kn.restDelta.default);let N;if(v<1){const T=T_(j,v);N=A=>{const P=Math.exp(-v*j*A);return l-P*((g+v*j*y)/T*Math.sin(T*A)+y*Math.cos(T*A))}}else if(v===1)N=T=>l-Math.exp(-j*T)*(y+(g+j*y)*T);else{const T=j*Math.sqrt(v*v-1);N=A=>{const P=Math.exp(-v*j*A),C=Math.min(T*A,300);return l-P*((g+v*j*y)*Math.sinh(C)+T*y*Math.cosh(C))/T}}const _={calculatedDuration:p&&m||null,next:T=>{const A=N(T);if(p)o.done=T>=m;else{let P=T===0?g:0;v<1&&(P=T===0?Xi(g):KF(N,T,A));const C=Math.abs(P)<=r,O=Math.abs(l-A)<=a;o.done=C&&O}return o.value=o.done?l:A,o},toString:()=>{const T=Math.min(z2(_),Kg),A=HF(P=>_.next(T*P).value,T,30);return T+"ms "+A},toTransition:()=>{}};return _}Gg.applyToOptions=t=>{const s=qre(t,100,Gg);return t.ease=s.ease,t.duration=Xi(s.duration),t.type="keyframes",t};function A_({keyframes:t,velocity:s=0,power:n=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:l,min:o,max:c,restDelta:u=.5,restSpeed:d}){const m=t[0],h={done:!1,value:m},p=C=>o!==void 0&&C<o||c!==void 0&&C>c,g=C=>o===void 0?c:c===void 0||Math.abs(o-C)<Math.abs(c-C)?o:c;let v=n*s;const y=m+v,j=l===void 0?y:l(y);j!==y&&(v=j-m);const w=C=>-v*Math.exp(-C/r),N=C=>j+w(C),_=C=>{const O=w(C),M=N(C);h.done=Math.abs(O)<=u,h.value=h.done?j:M};let T,A;const P=C=>{p(h.value)&&(T=C,A=Gg({keyframes:[h.value,g(h.value)],velocity:KF(N,C,h.value),damping:a,stiffness:i,restDelta:u,restSpeed:d}))};return P(0),{calculatedDuration:null,next:C=>{let O=!1;return!A&&T===void 0&&(O=!0,_(C),P(C)),T!==void 0&&C>=T?A.next(C-T):(!O&&_(C),h)}}}function Gre(t,s,n){const r=[],a=n||Hl.mix||WF,i=t.length-1;for(let l=0;l<i;l++){let o=a(t[l],t[l+1]);if(s){const c=Array.isArray(s)?s[l]||Ka:s;o=np(c,o)}r.push(o)}return r}function Yre(t,s,{clamp:n=!0,ease:r,mixer:a}={}){const i=t.length;if(A2(i===s.length),i===1)return()=>s[0];if(i===2&&s[0]===s[1])return()=>s[1];const l=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),s=[...s].reverse());const o=Gre(s,r,a),c=o.length,u=d=>{if(l&&d<t[0])return s[0];let m=0;if(c>1)for(;m<t.length-2&&!(d<t[m+1]);m++);const h=cf(t[m],t[m+1],d);return o[m](h)};return n?d=>u(Wl(t[0],t[i-1],d)):u}function Qre(t,s){const n=t[t.length-1];for(let r=1;r<=s;r++){const a=cf(0,s,r);t.push(wn(n,1,a))}}function Jre(t){const s=[0];return Qre(s,t.length-1),s}function Xre(t,s){return t.map(n=>n*s)}function Zre(t,s){return t.map(()=>s||RF).splice(0,t.length-1)}function zm({duration:t=300,keyframes:s,times:n,ease:r="easeInOut"}){const a=dre(r)?r.map(FP):FP(r),i={done:!1,value:s[0]},l=Xre(n&&n.length===s.length?n:Jre(s),t),o=Yre(l,s,{ease:Array.isArray(a)?a:Zre(s,a)});return{calculatedDuration:t,next:c=>(i.value=o(c),i.done=c>=t,i)}}const eae=t=>t!==null;function $2(t,{repeat:s,repeatType:n="loop"},r,a=1){const i=t.filter(eae),o=a<0||s&&n!=="loop"&&s%2===1?0:i.length-1;return!o||r===void 0?i[o]:r}const tae={decay:A_,inertia:A_,tween:zm,keyframes:zm,spring:Gg};function GF(t){typeof t.type=="string"&&(t.type=tae[t.type])}class U2{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(s=>{this.resolve=s})}notifyFinished(){this.resolve()}then(s,n){return this.finished.then(s,n)}}const sae=t=>t/100;class V2 extends U2{constructor(s){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,a;const{motionValue:n}=this.options;n&&n.updatedAt!==ea.now()&&this.tick(ea.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(a=(r=this.options).onStop)==null||a.call(r))},this.options=s,this.initAnimation(),this.play(),s.autoplay===!1&&this.pause()}initAnimation(){const{options:s}=this;GF(s);const{type:n=zm,repeat:r=0,repeatDelay:a=0,repeatType:i,velocity:l=0}=s;let{keyframes:o}=s;const c=n||zm;c!==zm&&typeof o[0]!="number"&&(this.mixKeyframes=np(sae,WF(o[0],o[1])),o=[0,100]);const u=c({...s,keyframes:o});i==="mirror"&&(this.mirroredGenerator=c({...s,keyframes:[...o].reverse(),velocity:-l})),u.calculatedDuration===null&&(u.calculatedDuration=z2(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+a,this.totalDuration=this.resolvedDuration*(r+1)-a,this.generator=u}updateTime(s){const n=Math.round(s-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(s,n=!1){const{generator:r,totalDuration:a,mixKeyframes:i,mirroredGenerator:l,resolvedDuration:o,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:m,repeatType:h,repeatDelay:p,type:g,onUpdate:v,finalKeyframe:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,s):this.speed<0&&(this.startTime=Math.min(s-a/this.speed,this.startTime)),n?this.currentTime=s:this.updateTime(s);const j=this.currentTime-u*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?j<0:j>a;this.currentTime=Math.max(j,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let N=this.currentTime,_=r;if(m){const C=Math.min(this.currentTime,a)/o;let O=Math.floor(C),M=C%1;!M&&C>=1&&(M=1),M===1&&O--,O=Math.min(O,m+1),!!(O%2)&&(h==="reverse"?(M=1-M,p&&(M-=p/o)):h==="mirror"&&(_=l)),N=Wl(0,1,M)*o}const T=w?{done:!1,value:d[0]}:_.next(N);i&&(T.value=i(T.value));let{done:A}=T;!w&&c!==null&&(A=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&A);return P&&g!==A_&&(T.value=$2(d,this.options,y,this.speed)),v&&v(T.value),P&&this.finish(),T}then(s,n){return this.finished.then(s,n)}get duration(){return Wa(this.calculatedDuration)}get iterationDuration(){const{delay:s=0}=this.options||{};return this.duration+Wa(s)}get time(){return Wa(this.currentTime)}set time(s){var n;s=Xi(s),this.currentTime=s,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=s:this.driver&&(this.startTime=this.driver.now()-s/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(s){this.updateTime(ea.now());const n=this.playbackSpeed!==s;this.playbackSpeed=s,n&&(this.time=Wa(this.currentTime))}play(){var a,i;if(this.isStopped)return;const{driver:s=Bre,startTime:n}=this.options;this.driver||(this.driver=s(l=>this.tick(l))),(i=(a=this.options).onPlay)==null||i.call(a);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ea.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var s,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(s=this.options).onComplete)==null||n.call(s)}cancel(){var s,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(s=this.options).onCancel)==null||n.call(s)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(s){return this.startTime=0,this.tick(s,!0)}attachTimeline(s){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),s.observe(this)}}function nae(t){for(let s=1;s<t.length;s++)t[s]??(t[s]=t[s-1])}const Dc=t=>t*180/Math.PI,M_=t=>{const s=Dc(Math.atan2(t[1],t[0]));return D_(s)},rae={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:M_,rotateZ:M_,skewX:t=>Dc(Math.atan(t[1])),skewY:t=>Dc(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},D_=t=>(t=t%360,t<0&&(t+=360),t),$P=M_,UP=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),VP=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),aae={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:UP,scaleY:VP,scale:t=>(UP(t)+VP(t))/2,rotateX:t=>D_(Dc(Math.atan2(t[6],t[5]))),rotateY:t=>D_(Dc(Math.atan2(-t[2],t[0]))),rotateZ:$P,rotate:$P,skewX:t=>Dc(Math.atan(t[4])),skewY:t=>Dc(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function O_(t){return t.includes("scale")?1:0}function R_(t,s){if(!t||t==="none")return O_(s);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,a;if(n)r=aae,a=n;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=rae,a=o}if(!a)return O_(s);const i=r[s],l=a[1].split(",").map(lae);return typeof i=="function"?i(l):l[i]}const iae=(t,s)=>{const{transform:n="none"}=getComputedStyle(t);return R_(n,s)};function lae(t){return parseFloat(t.trim())}const wh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Nh=new Set(wh),WP=t=>t===jh||t===ts,oae=new Set(["x","y","z"]),cae=wh.filter(t=>!oae.has(t));function dae(t){const s=[];return cae.forEach(n=>{const r=t.getValue(n);r!==void 0&&(s.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),s}const Hc={width:({x:t},{paddingLeft:s="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(s)-parseFloat(n),height:({y:t},{paddingTop:s="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(s)-parseFloat(n),top:(t,{top:s})=>parseFloat(s),left:(t,{left:s})=>parseFloat(s),bottom:({y:t},{top:s})=>parseFloat(s)+(t.max-t.min),right:({x:t},{left:s})=>parseFloat(s)+(t.max-t.min),x:(t,{transform:s})=>R_(s,"x"),y:(t,{transform:s})=>R_(s,"y")};Hc.translateX=Hc.x;Hc.translateY=Hc.y;const Kc=new Set;let F_=!1,L_=!1,I_=!1;function YF(){if(L_){const t=Array.from(Kc).filter(r=>r.needsMeasurement),s=new Set(t.map(r=>r.element)),n=new Map;s.forEach(r=>{const a=dae(r);a.length&&(n.set(r,a),r.render())}),t.forEach(r=>r.measureInitialState()),s.forEach(r=>{r.render();const a=n.get(r);a&&a.forEach(([i,l])=>{var o;(o=r.getValue(i))==null||o.set(l)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}L_=!1,F_=!1,Kc.forEach(t=>t.complete(I_)),Kc.clear()}function QF(){Kc.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(L_=!0)})}function uae(){I_=!0,QF(),YF(),I_=!1}class W2{constructor(s,n,r,a,i,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...s],this.onComplete=n,this.name=r,this.motionValue=a,this.element=i,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Kc.add(this),F_||(F_=!0,gn.read(QF),gn.resolveKeyframes(YF))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:s,name:n,element:r,motionValue:a}=this;if(s[0]===null){const i=a==null?void 0:a.get(),l=s[s.length-1];if(i!==void 0)s[0]=i;else if(r&&n){const o=r.readValue(n,l);o!=null&&(s[0]=o)}s[0]===void 0&&(s[0]=l),a&&i===void 0&&a.set(s[0])}nae(s)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(s=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,s),Kc.delete(this)}cancel(){this.state==="scheduled"&&(Kc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const hae=t=>t.startsWith("--");function mae(t,s,n){hae(s)?t.style.setProperty(s,n):t.style[s]=n}const fae=M2(()=>window.ScrollTimeline!==void 0),pae={};function xae(t,s){const n=M2(t);return()=>pae[s]??n()}const JF=xae(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Rm=([t,s,n,r])=>`cubic-bezier(${t}, ${s}, ${n}, ${r})`,HP={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Rm([0,.65,.55,1]),circOut:Rm([.55,0,1,.45]),backIn:Rm([.31,.01,.66,-.59]),backOut:Rm([.33,1.53,.69,.99])};function XF(t,s){if(t)return typeof t=="function"?JF()?HF(t,s):"ease-out":FF(t)?Rm(t):Array.isArray(t)?t.map(n=>XF(n,s)||HP.easeOut):HP[t]}function gae(t,s,n,{delay:r=0,duration:a=300,repeat:i=0,repeatType:l="loop",ease:o="easeOut",times:c}={},u=void 0){const d={[s]:n};c&&(d.offset=c);const m=XF(o,a);Array.isArray(m)&&(d.easing=m);const h={delay:r,duration:a,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:i+1,direction:l==="reverse"?"alternate":"normal"};return u&&(h.pseudoElement=u),t.animate(d,h)}function ZF(t){return typeof t=="function"&&"applyToOptions"in t}function vae({type:t,...s}){return ZF(t)&&JF()?t.applyToOptions(s):(s.duration??(s.duration=300),s.ease??(s.ease="easeOut"),s)}class yae extends U2{constructor(s){if(super(),this.finishedTime=null,this.isStopped=!1,!s)return;const{element:n,name:r,keyframes:a,pseudoElement:i,allowFlatten:l=!1,finalKeyframe:o,onComplete:c}=s;this.isPseudoElement=!!i,this.allowFlatten=l,this.options=s,A2(typeof s.type!="string");const u=vae(s);this.animation=gae(n,r,a,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const d=$2(a,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):mae(n,r,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var s,n;(n=(s=this.animation).finish)==null||n.call(s)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:s}=this;s==="idle"||s==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var s,n;this.isPseudoElement||(n=(s=this.animation).commitStyles)==null||n.call(s)}get duration(){var n,r;const s=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Wa(Number(s))}get iterationDuration(){const{delay:s=0}=this.options||{};return this.duration+Wa(s)}get time(){return Wa(Number(this.animation.currentTime)||0)}set time(s){this.finishedTime=null,this.animation.currentTime=Xi(s)}get speed(){return this.animation.playbackRate}set speed(s){s<0&&(this.finishedTime=null),this.animation.playbackRate=s}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(s){this.animation.startTime=s}attachTimeline({timeline:s,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,s&&fae()?(this.animation.timeline=s,Ka):n(this)}}const eL={anticipate:MF,backInOut:AF,circInOut:OF};function bae(t){return t in eL}function jae(t){typeof t.ease=="string"&&bae(t.ease)&&(t.ease=eL[t.ease])}const KP=10;class wae extends yae{constructor(s){jae(s),GF(s),super(s),s.startTime&&(this.startTime=s.startTime),this.options=s}updateMotionValue(s){const{motionValue:n,onUpdate:r,onComplete:a,element:i,...l}=this.options;if(!n)return;if(s!==void 0){n.set(s);return}const o=new V2({...l,autoplay:!1}),c=Xi(this.finishedTime??this.time);n.setWithVelocity(o.sample(c-KP).value,o.sample(c).value,KP),o.stop()}}const GP=(t,s)=>s==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Qo.test(t)||t==="0")&&!t.startsWith("url("));function Nae(t){const s=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==s)return!0}function _ae(t,s,n,r){const a=t[0];if(a===null)return!1;if(s==="display"||s==="visibility")return!0;const i=t[t.length-1],l=GP(a,s),o=GP(i,s);return!l||!o?!1:Nae(t)||(n==="spring"||ZF(n))&&r}function B_(t){t.duration=0,t.type="keyframes"}const Sae=new Set(["opacity","clipPath","filter","transform"]),Cae=M2(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function kae(t){var d;const{motionValue:s,name:n,repeatDelay:r,repeatType:a,damping:i,type:l}=t;if(!(((d=s==null?void 0:s.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=s.owner.getProps();return Cae()&&n&&Sae.has(n)&&(n!=="transform"||!u)&&!c&&!r&&a!=="mirror"&&i!==0&&l!=="inertia"}const Eae=40;class Pae extends U2{constructor({autoplay:s=!0,delay:n=0,type:r="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:l="loop",keyframes:o,name:c,motionValue:u,element:d,...m}){var g;super(),this.stop=()=>{var v,y;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(y=this.keyframeResolver)==null||y.cancel()},this.createdAt=ea.now();const h={autoplay:s,delay:n,type:r,repeat:a,repeatDelay:i,repeatType:l,name:c,motionValue:u,element:d,...m},p=(d==null?void 0:d.KeyframeResolver)||W2;this.keyframeResolver=new p(o,(v,y,j)=>this.onKeyframesResolved(v,y,h,!j),c,u,d),(g=this.keyframeResolver)==null||g.scheduleResolve()}onKeyframesResolved(s,n,r,a){this.keyframeResolver=void 0;const{name:i,type:l,velocity:o,delay:c,isHandoff:u,onUpdate:d}=r;this.resolvedAt=ea.now(),_ae(s,i,l,o)||((Hl.instantAnimations||!c)&&(d==null||d($2(s,r,n))),s[0]=s[s.length-1],B_(r),r.repeat=0);const h={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>Eae?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:s},p=!u&&kae(h)?new wae({...h,element:h.motionValue.owner.current}):new V2(h);p.finished.then(()=>this.notifyFinished()).catch(Ka),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(s,n){return this.finished.finally(s).then(()=>{})}get animation(){var s;return this._animation||((s=this.keyframeResolver)==null||s.resume(),uae()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(s){this.animation.time=s}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(s){this.animation.speed=s}get startTime(){return this.animation.startTime}attachTimeline(s){return this._animation?this.stopTimeline=this.animation.attachTimeline(s):this.pendingTimeline=s,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var s;this._animation&&this.animation.cancel(),(s=this.keyframeResolver)==null||s.cancel()}}const Tae=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Aae(t){const s=Tae.exec(t);if(!s)return[,];const[,n,r,a]=s;return[`--${n??r}`,a]}function tL(t,s,n=1){const[r,a]=Aae(t);if(!r)return;const i=window.getComputedStyle(s).getPropertyValue(r);if(i){const l=i.trim();return NF(l)?parseFloat(l):l}return L2(a)?tL(a,s,n+1):a}function H2(t,s){return(t==null?void 0:t[s])??(t==null?void 0:t.default)??t}const sL=new Set(["width","height","top","left","right","bottom",...wh]),Mae={test:t=>t==="auto",parse:t=>t},nL=t=>s=>s.test(t),rL=[jh,ts,Zi,ko,Nre,wre,Mae],YP=t=>rL.find(nL(t));function Dae(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||SF(t):!0}const Oae=new Set(["brightness","contrast","saturate","opacity"]);function Rae(t){const[s,n]=t.slice(0,-1).split("(");if(s==="drop-shadow")return t;const[r]=n.match(I2)||[];if(!r)return t;const a=n.replace(r,"");let i=Oae.has(s)?1:0;return r!==n&&(i*=100),s+"("+i+a+")"}const Fae=/\b([a-z-]*)\(.*?\)/gu,q_={...Qo,getAnimatableNone:t=>{const s=t.match(Fae);return s?s.map(Rae).join(" "):t}},QP={...jh,transform:Math.round},Lae={rotate:ko,rotateX:ko,rotateY:ko,rotateZ:ko,scale:zx,scaleX:zx,scaleY:zx,scaleZ:zx,skew:ko,skewX:ko,skewY:ko,distance:ts,translateX:ts,translateY:ts,translateZ:ts,x:ts,y:ts,z:ts,perspective:ts,transformPerspective:ts,opacity:df,originX:LP,originY:LP,originZ:ts},K2={borderWidth:ts,borderTopWidth:ts,borderRightWidth:ts,borderBottomWidth:ts,borderLeftWidth:ts,borderRadius:ts,radius:ts,borderTopLeftRadius:ts,borderTopRightRadius:ts,borderBottomRightRadius:ts,borderBottomLeftRadius:ts,width:ts,maxWidth:ts,height:ts,maxHeight:ts,top:ts,right:ts,bottom:ts,left:ts,padding:ts,paddingTop:ts,paddingRight:ts,paddingBottom:ts,paddingLeft:ts,margin:ts,marginTop:ts,marginRight:ts,marginBottom:ts,marginLeft:ts,backgroundPositionX:ts,backgroundPositionY:ts,...Lae,zIndex:QP,fillOpacity:df,strokeOpacity:df,numOctaves:QP},Iae={...K2,color:Fn,backgroundColor:Fn,outlineColor:Fn,fill:Fn,stroke:Fn,borderColor:Fn,borderTopColor:Fn,borderRightColor:Fn,borderBottomColor:Fn,borderLeftColor:Fn,filter:q_,WebkitFilter:q_},aL=t=>Iae[t];function iL(t,s){let n=aL(t);return n!==q_&&(n=Qo),n.getAnimatableNone?n.getAnimatableNone(s):void 0}const Bae=new Set(["auto","none","0"]);function qae(t,s,n){let r=0,a;for(;r<t.length&&!a;){const i=t[r];typeof i=="string"&&!Bae.has(i)&&uf(i).values.length&&(a=t[r]),r++}if(a&&n)for(const i of s)t[i]=iL(n,a)}class zae extends W2{constructor(s,n,r,a,i){super(s,n,r,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:s,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<s.length;c++){let u=s[c];if(typeof u=="string"&&(u=u.trim(),L2(u))){const d=tL(u,n.current);d!==void 0&&(s[c]=d),c===s.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!sL.has(r)||s.length!==2)return;const[a,i]=s,l=YP(a),o=YP(i);if(l!==o)if(WP(l)&&WP(o))for(let c=0;c<s.length;c++){const u=s[c];typeof u=="string"&&(s[c]=parseFloat(u))}else Hc[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:s,name:n}=this,r=[];for(let a=0;a<s.length;a++)(s[a]===null||Dae(s[a]))&&r.push(a);r.length&&qae(s,r,n)}measureInitialState(){const{element:s,unresolvedKeyframes:n,name:r}=this;if(!s||!s.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Hc[r](s.measureViewportBox(),window.getComputedStyle(s.current)),n[0]=this.measuredOrigin;const a=n[n.length-1];a!==void 0&&s.getValue(r,a).jump(a,!1)}measureEndState(){var o;const{element:s,name:n,unresolvedKeyframes:r}=this;if(!s||!s.current)return;const a=s.getValue(n);a&&a.jump(this.measuredOrigin,!1);const i=r.length-1,l=r[i];r[i]=Hc[n](s.measureViewportBox(),window.getComputedStyle(s.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([c,u])=>{s.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function $ae(t,s,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const a=(n==null?void 0:n[t])??r.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}const lL=(t,s)=>s&&typeof t=="number"?s.transform(t):t;function oL(t){return _F(t)&&"offsetHeight"in t}const JP=30,Uae=t=>!isNaN(parseFloat(t));class Vae{constructor(s,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const a=ea.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(s),this.owner=n.owner}setCurrent(s){this.current=s,this.updatedAt=ea.now(),this.canTrackVelocity===null&&s!==void 0&&(this.canTrackVelocity=Uae(this.current))}setPrevFrameValue(s=this.current){this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt}onChange(s){return this.on("change",s)}on(s,n){this.events[s]||(this.events[s]=new D2);const r=this.events[s].add(n);return s==="change"?()=>{r(),gn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const s in this.events)this.events[s].clear()}attach(s,n){this.passiveEffect=s,this.stopPassiveEffect=n}set(s){this.passiveEffect?this.passiveEffect(s,this.updateAndNotify):this.updateAndNotify(s)}setWithVelocity(s,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt-r}jump(s,n=!0){this.updateAndNotify(s),this.prev=s,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var s;(s=this.events.change)==null||s.notify(this.current)}addDependent(s){this.dependents||(this.dependents=new Set),this.dependents.add(s)}removeDependent(s){this.dependents&&this.dependents.delete(s)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const s=ea.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||s-this.updatedAt>JP)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,JP);return CF(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(s){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=s(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var s,n;(s=this.dependents)==null||s.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Gu(t,s){return new Vae(t,s)}const{schedule:G2}=LF(queueMicrotask,!1),ci={x:!1,y:!1};function cL(){return ci.x||ci.y}function Wae(t){return t==="x"||t==="y"?ci[t]?null:(ci[t]=!0,()=>{ci[t]=!1}):ci.x||ci.y?null:(ci.x=ci.y=!0,()=>{ci.x=ci.y=!1})}function dL(t,s){const n=$ae(t),r=new AbortController,a={passive:!0,...s,signal:r.signal};return[n,a,()=>r.abort()]}function XP(t){return!(t.pointerType==="touch"||cL())}function Hae(t,s,n={}){const[r,a,i]=dL(t,n),l=o=>{if(!XP(o))return;const{target:c}=o,u=s(c,o);if(typeof u!="function"||!c)return;const d=m=>{XP(m)&&(u(m),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,a)};return r.forEach(o=>{o.addEventListener("pointerenter",l,a)}),i}const uL=(t,s)=>s?t===s?!0:uL(t,s.parentElement):!1,Y2=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Kae=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Gae(t){return Kae.has(t.tagName)||t.tabIndex!==-1}const vg=new WeakSet;function ZP(t){return s=>{s.key==="Enter"&&t(s)}}function Jb(t,s){t.dispatchEvent(new PointerEvent("pointer"+s,{isPrimary:!0,bubbles:!0}))}const Yae=(t,s)=>{const n=t.currentTarget;if(!n)return;const r=ZP(()=>{if(vg.has(n))return;Jb(n,"down");const a=ZP(()=>{Jb(n,"up")}),i=()=>Jb(n,"cancel");n.addEventListener("keyup",a,s),n.addEventListener("blur",i,s)});n.addEventListener("keydown",r,s),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),s)};function eT(t){return Y2(t)&&!cL()}function Qae(t,s,n={}){const[r,a,i]=dL(t,n),l=o=>{const c=o.currentTarget;if(!eT(o))return;vg.add(c);const u=s(c,o),d=(p,g)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",h),vg.has(c)&&vg.delete(c),eT(p)&&typeof u=="function"&&u(p,{success:g})},m=p=>{d(p,c===window||c===document||n.useGlobalTarget||uL(c,p.target))},h=p=>{d(p,!1)};window.addEventListener("pointerup",m,a),window.addEventListener("pointercancel",h,a)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",l,a),oL(o)&&(o.addEventListener("focus",u=>Yae(u,a)),!Gae(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),i}function hL(t){return _F(t)&&"ownerSVGElement"in t}function Jae(t){return hL(t)&&t.tagName==="svg"}const pr=t=>!!(t&&t.getVelocity),Xae=[...rL,Fn,Qo],Zae=t=>Xae.find(nL(t)),Q2=b.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function tT(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function eie(...t){return s=>{let n=!1;const r=t.map(a=>{const i=tT(a,s);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():tT(t[a],null)}}}}function tie(...t){return b.useCallback(eie(...t),t)}class sie extends b.Component{getSnapshotBeforeUpdate(s){const n=this.props.childRef.current;if(n&&s.isPresent&&!this.props.isPresent){const r=n.offsetParent,a=oL(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=a-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function nie({children:t,isPresent:s,anchorX:n,root:r}){const a=b.useId(),i=b.useRef(null),l=b.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=b.useContext(Q2),c=tie(i,t==null?void 0:t.ref);return b.useInsertionEffect(()=>{const{width:u,height:d,top:m,left:h,right:p}=l.current;if(s||!i.current||!u||!d)return;const g=n==="left"?`left: ${h}`:`right: ${p}`;i.current.dataset.motionPopId=a;const v=document.createElement("style");o&&(v.nonce=o);const y=r??document.head;return y.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            ${g}px !important;
            top: ${m}px !important;
          }
        `),()=>{y.contains(v)&&y.removeChild(v)}},[s]),e.jsx(sie,{isPresent:s,childRef:i,sizeRef:l,children:b.cloneElement(t,{ref:c})})}const rie=({children:t,initial:s,isPresent:n,onExitComplete:r,custom:a,presenceAffectsLayout:i,mode:l,anchorX:o,root:c})=>{const u=k2(aie),d=b.useId();let m=!0,h=b.useMemo(()=>(m=!1,{id:d,initial:s,isPresent:n,custom:a,onExitComplete:p=>{u.set(p,!0);for(const g of u.values())if(!g)return;r&&r()},register:p=>(u.set(p,!1),()=>u.delete(p))}),[n,u,r]);return i&&m&&(h={...h}),b.useMemo(()=>{u.forEach((p,g)=>u.set(g,!1))},[n]),b.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),l==="popLayout"&&(t=e.jsx(nie,{isPresent:n,anchorX:o,root:c,children:t})),e.jsx(sv.Provider,{value:h,children:t})};function aie(){return new Map}function mL(t=!0){const s=b.useContext(sv);if(s===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:a}=s,i=b.useId();b.useEffect(()=>{if(t)return a(i)},[t]);const l=b.useCallback(()=>t&&r&&r(i),[i,r,t]);return!n&&r?[!1,l]:[!0]}const $x=t=>t.key||"";function sT(t){const s=[];return b.Children.forEach(t,n=>{b.isValidElement(n)&&s.push(n)}),s}const nT=({children:t,custom:s,initial:n=!0,onExitComplete:r,presenceAffectsLayout:a=!0,mode:i="sync",propagate:l=!1,anchorX:o="left",root:c})=>{const[u,d]=mL(l),m=b.useMemo(()=>sT(t),[t]),h=l&&!u?[]:m.map($x),p=b.useRef(!0),g=b.useRef(m),v=k2(()=>new Map),[y,j]=b.useState(m),[w,N]=b.useState(m);wF(()=>{p.current=!1,g.current=m;for(let A=0;A<w.length;A++){const P=$x(w[A]);h.includes(P)?v.delete(P):v.get(P)!==!0&&v.set(P,!1)}},[w,h.length,h.join("-")]);const _=[];if(m!==y){let A=[...m];for(let P=0;P<w.length;P++){const C=w[P],O=$x(C);h.includes(O)||(A.splice(P,0,C),_.push(C))}return i==="wait"&&_.length&&(A=_),N(sT(A)),j(m),null}const{forceRender:T}=b.useContext(C2);return e.jsx(e.Fragment,{children:w.map(A=>{const P=$x(A),C=l&&!u?!1:m===w||h.includes(P),O=()=>{if(v.has(P))v.set(P,!0);else return;let M=!0;v.forEach(k=>{k||(M=!1)}),M&&(T==null||T(),N(g.current),l&&(d==null||d()),r&&r())};return e.jsx(rie,{isPresent:C,initial:!p.current||n?void 0:!1,custom:s,presenceAffectsLayout:a,mode:i,root:c,onExitComplete:C?void 0:O,anchorX:o,children:A},P)})})},fL=b.createContext({strict:!1}),rT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Yu={};for(const t in rT)Yu[t]={isEnabled:s=>rT[t].some(n=>!!s[n])};function iie(t){for(const s in t)Yu[s]={...Yu[s],...t[s]}}const lie=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Yg(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||lie.has(t)}let pL=t=>!Yg(t);function oie(t){typeof t=="function"&&(pL=s=>s.startsWith("on")?!Yg(s):t(s))}try{oie(require("@emotion/is-prop-valid").default)}catch{}function cie(t,s,n){const r={};for(const a in t)a==="values"&&typeof t.values=="object"||(pL(a)||n===!0&&Yg(a)||!s&&!Yg(a)||t.draggable&&a.startsWith("onDrag"))&&(r[a]=t[a]);return r}const nv=b.createContext({});function rv(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function hf(t){return typeof t=="string"||Array.isArray(t)}const J2=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],X2=["initial",...J2];function av(t){return rv(t.animate)||X2.some(s=>hf(t[s]))}function xL(t){return!!(av(t)||t.variants)}function die(t,s){if(av(t)){const{initial:n,animate:r}=t;return{initial:n===!1||hf(n)?n:void 0,animate:hf(r)?r:void 0}}return t.inherit!==!1?s:{}}function uie(t){const{initial:s,animate:n}=die(t,b.useContext(nv));return b.useMemo(()=>({initial:s,animate:n}),[aT(s),aT(n)])}function aT(t){return Array.isArray(t)?t.join(" "):t}const mf={};function hie(t){for(const s in t)mf[s]=t[s],F2(s)&&(mf[s].isCSSVariable=!0)}function gL(t,{layout:s,layoutId:n}){return Nh.has(t)||t.startsWith("origin")||(s||n!==void 0)&&(!!mf[t]||t==="opacity")}const mie={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},fie=wh.length;function pie(t,s,n){let r="",a=!0;for(let i=0;i<fie;i++){const l=wh[i],o=t[l];if(o===void 0)continue;let c=!0;if(typeof o=="number"?c=o===(l.startsWith("scale")?1:0):c=parseFloat(o)===0,!c||n){const u=lL(o,K2[l]);if(!c){a=!1;const d=mie[l]||l;r+=`${d}(${u}) `}n&&(s[l]=u)}}return r=r.trim(),n?r=n(s,a?"":r):a&&(r="none"),r}function Z2(t,s,n){const{style:r,vars:a,transformOrigin:i}=t;let l=!1,o=!1;for(const c in s){const u=s[c];if(Nh.has(c)){l=!0;continue}else if(F2(c)){a[c]=u;continue}else{const d=lL(u,K2[c]);c.startsWith("origin")?(o=!0,i[c]=d):r[c]=d}}if(s.transform||(l||n?r.transform=pie(s,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:c="50%",originY:u="50%",originZ:d=0}=i;r.transformOrigin=`${c} ${u} ${d}`}}const eS=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function vL(t,s,n){for(const r in s)!pr(s[r])&&!gL(r,n)&&(t[r]=s[r])}function xie({transformTemplate:t},s){return b.useMemo(()=>{const n=eS();return Z2(n,s,t),Object.assign({},n.vars,n.style)},[s])}function gie(t,s){const n=t.style||{},r={};return vL(r,n,t),Object.assign(r,xie(t,s)),r}function vie(t,s){const n={},r=gie(t,s);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const yie={offset:"stroke-dashoffset",array:"stroke-dasharray"},bie={offset:"strokeDashoffset",array:"strokeDasharray"};function jie(t,s,n=1,r=0,a=!0){t.pathLength=1;const i=a?yie:bie;t[i.offset]=ts.transform(-r);const l=ts.transform(s),o=ts.transform(n);t[i.array]=`${l} ${o}`}function yL(t,{attrX:s,attrY:n,attrScale:r,pathLength:a,pathSpacing:i=1,pathOffset:l=0,...o},c,u,d){if(Z2(t,o,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:h}=t;m.transform&&(h.transform=m.transform,delete m.transform),(h.transform||m.transformOrigin)&&(h.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),h.transform&&(h.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete m.transformBox),s!==void 0&&(m.x=s),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),a!==void 0&&jie(m,a,i,l,!1)}const bL=()=>({...eS(),attrs:{}}),jL=t=>typeof t=="string"&&t.toLowerCase()==="svg";function wie(t,s,n,r){const a=b.useMemo(()=>{const i=bL();return yL(i,s,jL(r),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[s]);if(t.style){const i={};vL(i,t.style,t),a.style={...i,...a.style}}return a}const Nie=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function tS(t){return typeof t!="string"||t.includes("-")?!1:!!(Nie.indexOf(t)>-1||/[A-Z]/u.test(t))}function _ie(t,s,n,{latestValues:r},a,i=!1){const o=(tS(t)?wie:vie)(s,r,a,t),c=cie(s,typeof t=="string",i),u=t!==b.Fragment?{...c,...o,ref:n}:{},{children:d}=s,m=b.useMemo(()=>pr(d)?d.get():d,[d]);return b.createElement(t,{...u,children:m})}function iT(t){const s=[{},{}];return t==null||t.values.forEach((n,r)=>{s[0][r]=n.get(),s[1][r]=n.getVelocity()}),s}function sS(t,s,n,r){if(typeof s=="function"){const[a,i]=iT(r);s=s(n!==void 0?n:t.custom,a,i)}if(typeof s=="string"&&(s=t.variants&&t.variants[s]),typeof s=="function"){const[a,i]=iT(r);s=s(n!==void 0?n:t.custom,a,i)}return s}function yg(t){return pr(t)?t.get():t}function Sie({scrapeMotionValuesFromProps:t,createRenderState:s},n,r,a){return{latestValues:Cie(n,r,a,t),renderState:s()}}function Cie(t,s,n,r){const a={},i=r(t,{});for(const h in i)a[h]=yg(i[h]);let{initial:l,animate:o}=t;const c=av(t),u=xL(t);s&&u&&!c&&t.inherit!==!1&&(l===void 0&&(l=s.initial),o===void 0&&(o=s.animate));let d=n?n.initial===!1:!1;d=d||l===!1;const m=d?o:l;if(m&&typeof m!="boolean"&&!rv(m)){const h=Array.isArray(m)?m:[m];for(let p=0;p<h.length;p++){const g=sS(t,h[p]);if(g){const{transitionEnd:v,transition:y,...j}=g;for(const w in j){let N=j[w];if(Array.isArray(N)){const _=d?N.length-1:0;N=N[_]}N!==null&&(a[w]=N)}for(const w in v)a[w]=v[w]}}}return a}const wL=t=>(s,n)=>{const r=b.useContext(nv),a=b.useContext(sv),i=()=>Sie(t,s,r,a);return n?i():k2(i)};function nS(t,s,n){var i;const{style:r}=t,a={};for(const l in r)(pr(r[l])||s.style&&pr(s.style[l])||gL(l,t)||((i=n==null?void 0:n.getValue(l))==null?void 0:i.liveStyle)!==void 0)&&(a[l]=r[l]);return a}const kie=wL({scrapeMotionValuesFromProps:nS,createRenderState:eS});function NL(t,s,n){const r=nS(t,s,n);for(const a in t)if(pr(t[a])||pr(s[a])){const i=wh.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;r[i]=t[a]}return r}const Eie=wL({scrapeMotionValuesFromProps:NL,createRenderState:bL}),Pie=Symbol.for("motionComponentSymbol");function mu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Tie(t,s,n){return b.useCallback(r=>{r&&t.onMount&&t.onMount(r),s&&(r?s.mount(r):s.unmount()),n&&(typeof n=="function"?n(r):mu(n)&&(n.current=r))},[s])}const rS=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Aie="framerAppearId",_L="data-"+rS(Aie),SL=b.createContext({});function Mie(t,s,n,r,a){var v,y;const{visualElement:i}=b.useContext(nv),l=b.useContext(fL),o=b.useContext(sv),c=b.useContext(Q2).reducedMotion,u=b.useRef(null);r=r||l.renderer,!u.current&&r&&(u.current=r(t,{visualState:s,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,m=b.useContext(SL);d&&!d.projection&&a&&(d.type==="html"||d.type==="svg")&&Die(u.current,n,a,m);const h=b.useRef(!1);b.useInsertionEffect(()=>{d&&h.current&&d.update(n,o)});const p=n[_L],g=b.useRef(!!p&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,p))&&((y=window.MotionHasOptimisedAnimation)==null?void 0:y.call(window,p)));return wF(()=>{d&&(h.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),g.current&&d.animationState&&d.animationState.animateChanges())}),b.useEffect(()=>{d&&(!g.current&&d.animationState&&d.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var j;(j=window.MotionHandoffMarkAsComplete)==null||j.call(window,p)}),g.current=!1),d.enteringChildren=void 0)}),d}function Die(t,s,n,r){const{layoutId:a,layout:i,drag:l,dragConstraints:o,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=s;t.projection=new n(t.latestValues,s["data-framer-portal-id"]?void 0:CL(t.parent)),t.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!l||o&&mu(o),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:c,layoutRoot:u})}function CL(t){if(t)return t.options.allowProjection!==!1?t.projection:CL(t.parent)}function Xb(t,{forwardMotionProps:s=!1}={},n,r){n&&iie(n);const a=tS(t)?Eie:kie;function i(o,c){let u;const d={...b.useContext(Q2),...o,layoutId:Oie(o)},{isStatic:m}=d,h=uie(o),p=a(o,m);if(!m&&E2){Rie();const g=Fie(d);u=g.MeasureLayout,h.visualElement=Mie(t,p,d,r,g.ProjectionNode)}return e.jsxs(nv.Provider,{value:h,children:[u&&h.visualElement?e.jsx(u,{visualElement:h.visualElement,...d}):null,_ie(t,o,Tie(p,h.visualElement,c),p,m,s)]})}i.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const l=b.forwardRef(i);return l[Pie]=t,l}function Oie({layoutId:t}){const s=b.useContext(C2).id;return s&&t!==void 0?s+"-"+t:t}function Rie(t,s){b.useContext(fL).strict}function Fie(t){const{drag:s,layout:n}=Yu;if(!s&&!n)return{};const r={...s,...n};return{MeasureLayout:s!=null&&s.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Lie(t,s){if(typeof Proxy>"u")return Xb;const n=new Map,r=(i,l)=>Xb(i,l,t,s),a=(i,l)=>r(i,l);return new Proxy(a,{get:(i,l)=>l==="create"?r:(n.has(l)||n.set(l,Xb(l,void 0,t,s)),n.get(l))})}function kL({top:t,left:s,right:n,bottom:r}){return{x:{min:s,max:n},y:{min:t,max:r}}}function Iie({x:t,y:s}){return{top:s.min,right:t.max,bottom:s.max,left:t.min}}function Bie(t,s){if(!s)return t;const n=s({x:t.left,y:t.top}),r=s({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Zb(t){return t===void 0||t===1}function z_({scale:t,scaleX:s,scaleY:n}){return!Zb(t)||!Zb(s)||!Zb(n)}function Sc(t){return z_(t)||EL(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function EL(t){return lT(t.x)||lT(t.y)}function lT(t){return t&&t!=="0%"}function Qg(t,s,n){const r=t-n,a=s*r;return n+a}function oT(t,s,n,r,a){return a!==void 0&&(t=Qg(t,a,r)),Qg(t,n,r)+s}function $_(t,s=0,n=1,r,a){t.min=oT(t.min,s,n,r,a),t.max=oT(t.max,s,n,r,a)}function PL(t,{x:s,y:n}){$_(t.x,s.translate,s.scale,s.originPoint),$_(t.y,n.translate,n.scale,n.originPoint)}const cT=.999999999999,dT=1.0000000000001;function qie(t,s,n,r=!1){const a=n.length;if(!a)return;s.x=s.y=1;let i,l;for(let o=0;o<a;o++){i=n[o],l=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&pu(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),l&&(s.x*=l.x.scale,s.y*=l.y.scale,PL(t,l)),r&&Sc(i.latestValues)&&pu(t,i.latestValues))}s.x<dT&&s.x>cT&&(s.x=1),s.y<dT&&s.y>cT&&(s.y=1)}function fu(t,s){t.min=t.min+s,t.max=t.max+s}function uT(t,s,n,r,a=.5){const i=wn(t.min,t.max,a);$_(t,s,n,i,r)}function pu(t,s){uT(t.x,s.x,s.scaleX,s.scale,s.originX),uT(t.y,s.y,s.scaleY,s.scale,s.originY)}function TL(t,s){return kL(Bie(t.getBoundingClientRect(),s))}function zie(t,s,n){const r=TL(t,n),{scroll:a}=s;return a&&(fu(r.x,a.offset.x),fu(r.y,a.offset.y)),r}const hT=()=>({translate:0,scale:1,origin:0,originPoint:0}),xu=()=>({x:hT(),y:hT()}),mT=()=>({min:0,max:0}),An=()=>({x:mT(),y:mT()}),U_={current:null},AL={current:!1};function $ie(){if(AL.current=!0,!!E2)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),s=()=>U_.current=t.matches;t.addEventListener("change",s),s()}else U_.current=!1}const Uie=new WeakMap;function Vie(t,s,n){for(const r in s){const a=s[r],i=n[r];if(pr(a))t.addValue(r,a);else if(pr(i))t.addValue(r,Gu(a,{owner:t}));else if(i!==a)if(t.hasValue(r)){const l=t.getValue(r);l.liveStyle===!0?l.jump(a):l.hasAnimated||l.set(a)}else{const l=t.getStaticValue(r);t.addValue(r,Gu(l!==void 0?l:a,{owner:t}))}}for(const r in n)s[r]===void 0&&t.removeValue(r);return s}const fT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Wie{scrapeMotionValuesFromProps(s,n,r){return{}}constructor({parent:s,props:n,presenceContext:r,reducedMotionConfig:a,blockInitialAnimation:i,visualState:l},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=W2,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=ea.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,gn.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=l;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=s,this.props=n,this.presenceContext=r,this.depth=s?s.depth+1:0,this.reducedMotionConfig=a,this.options=o,this.blockInitialAnimation=!!i,this.isControllingVariants=av(n),this.isVariantNode=xL(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(s&&s.current);const{willChange:d,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in m){const p=m[h];c[h]!==void 0&&pr(p)&&p.set(c[h])}}mount(s){var n;this.current=s,Uie.set(s,this),this.projection&&!this.projection.instance&&this.projection.mount(s),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,a)=>this.bindToMotionValue(a,r)),AL.current||$ie(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:U_.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var s;this.projection&&this.projection.unmount(),Yo(this.notifyUpdate),Yo(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(s=this.parent)==null||s.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(s){this.children.add(s),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(s)}removeChild(s){this.children.delete(s),this.enteringChildren&&this.enteringChildren.delete(s)}bindToMotionValue(s,n){this.valueSubscriptions.has(s)&&this.valueSubscriptions.get(s)();const r=Nh.has(s);r&&this.onBindTransform&&this.onBindTransform();const a=n.on("change",l=>{this.latestValues[s]=l,this.props.onUpdate&&gn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,s,n)),this.valueSubscriptions.set(s,()=>{a(),i&&i(),n.owner&&n.stop()})}sortNodePosition(s){return!this.current||!this.sortInstanceNodePosition||this.type!==s.type?0:this.sortInstanceNodePosition(this.current,s.current)}updateFeatures(){let s="animation";for(s in Yu){const n=Yu[s];if(!n)continue;const{isEnabled:r,Feature:a}=n;if(!this.features[s]&&a&&r(this.props)&&(this.features[s]=new a(this)),this.features[s]){const i=this.features[s];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):An()}getStaticValue(s){return this.latestValues[s]}setStaticValue(s,n){this.latestValues[s]=n}update(s,n){(s.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=s,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<fT.length;r++){const a=fT[r];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,l=s[i];l&&(this.propEventSubscriptions[a]=this.on(a,l))}this.prevMotionValues=Vie(this,this.scrapeMotionValuesFromProps(s,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(s){return this.props.variants?this.props.variants[s]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(s){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(s),()=>n.variantChildren.delete(s)}addValue(s,n){const r=this.values.get(s);n!==r&&(r&&this.removeValue(s),this.bindToMotionValue(s,n),this.values.set(s,n),this.latestValues[s]=n.get())}removeValue(s){this.values.delete(s);const n=this.valueSubscriptions.get(s);n&&(n(),this.valueSubscriptions.delete(s)),delete this.latestValues[s],this.removeValueFromRenderState(s,this.renderState)}hasValue(s){return this.values.has(s)}getValue(s,n){if(this.props.values&&this.props.values[s])return this.props.values[s];let r=this.values.get(s);return r===void 0&&n!==void 0&&(r=Gu(n===null?void 0:n,{owner:this}),this.addValue(s,r)),r}readValue(s,n){let r=this.latestValues[s]!==void 0||!this.current?this.latestValues[s]:this.getBaseTargetFromProps(this.props,s)??this.readValueFromInstance(this.current,s,this.options);return r!=null&&(typeof r=="string"&&(NF(r)||SF(r))?r=parseFloat(r):!Zae(r)&&Qo.test(n)&&(r=iL(s,n)),this.setBaseTarget(s,pr(r)?r.get():r)),pr(r)?r.get():r}setBaseTarget(s,n){this.baseTarget[s]=n}getBaseTarget(s){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const l=sS(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);l&&(r=l[s])}if(n&&r!==void 0)return r;const a=this.getBaseTargetFromProps(this.props,s);return a!==void 0&&!pr(a)?a:this.initialValues[s]!==void 0&&r===void 0?void 0:this.baseTarget[s]}on(s,n){return this.events[s]||(this.events[s]=new D2),this.events[s].add(n)}notify(s,...n){this.events[s]&&this.events[s].notify(...n)}scheduleRenderMicrotask(){G2.render(this.render)}}class ML extends Wie{constructor(){super(...arguments),this.KeyframeResolver=zae}sortInstanceNodePosition(s,n){return s.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(s,n){return s.style?s.style[n]:void 0}removeValueFromRenderState(s,{vars:n,style:r}){delete n[s],delete r[s]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:s}=this.props;pr(s)&&(this.childSubscription=s.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function DL(t,{style:s,vars:n},r,a){const i=t.style;let l;for(l in s)i[l]=s[l];a==null||a.applyProjectionStyles(i,r);for(l in n)i.setProperty(l,n[l])}function Hie(t){return window.getComputedStyle(t)}class Kie extends ML{constructor(){super(...arguments),this.type="html",this.renderInstance=DL}readValueFromInstance(s,n){var r;if(Nh.has(n))return(r=this.projection)!=null&&r.isProjecting?O_(n):iae(s,n);{const a=Hie(s),i=(F2(n)?a.getPropertyValue(n):a[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(s,{transformPagePoint:n}){return TL(s,n)}build(s,n,r){Z2(s,n,r.transformTemplate)}scrapeMotionValuesFromProps(s,n,r){return nS(s,n,r)}}const OL=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Gie(t,s,n,r){DL(t,s,void 0,r);for(const a in s.attrs)t.setAttribute(OL.has(a)?a:rS(a),s.attrs[a])}class Yie extends ML{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=An}getBaseTargetFromProps(s,n){return s[n]}readValueFromInstance(s,n){if(Nh.has(n)){const r=aL(n);return r&&r.default||0}return n=OL.has(n)?n:rS(n),s.getAttribute(n)}scrapeMotionValuesFromProps(s,n,r){return NL(s,n,r)}build(s,n,r){yL(s,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(s,n,r,a){Gie(s,n,r,a)}mount(s){this.isSVGTag=jL(s.tagName),super.mount(s)}}const Qie=(t,s)=>tS(t)?new Yie(s):new Kie(s,{allowProjection:t!==b.Fragment});function bu(t,s,n){const r=t.getProps();return sS(r,s,n!==void 0?n:r.custom,t)}const V_=t=>Array.isArray(t);function Jie(t,s,n){t.hasValue(s)?t.getValue(s).set(n):t.addValue(s,Gu(n))}function Xie(t){return V_(t)?t[t.length-1]||0:t}function Zie(t,s){const n=bu(t,s);let{transitionEnd:r={},transition:a={},...i}=n||{};i={...i,...r};for(const l in i){const o=Xie(i[l]);Jie(t,l,o)}}function ele(t){return!!(pr(t)&&t.add)}function W_(t,s){const n=t.getValue("willChange");if(ele(n))return n.add(s);if(!n&&Hl.WillChange){const r=new Hl.WillChange("auto");t.addValue("willChange",r),r.add(s)}}function RL(t){return t.props[_L]}const tle=t=>t!==null;function sle(t,{repeat:s,repeatType:n="loop"},r){const a=t.filter(tle),i=s&&n!=="loop"&&s%2===1?0:a.length-1;return a[i]}const nle={type:"spring",stiffness:500,damping:25,restSpeed:10},rle=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),ale={type:"keyframes",duration:.8},ile={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},lle=(t,{keyframes:s})=>s.length>2?ale:Nh.has(t)?t.startsWith("scale")?rle(s[1]):nle:ile;function ole({when:t,delay:s,delayChildren:n,staggerChildren:r,staggerDirection:a,repeat:i,repeatType:l,repeatDelay:o,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const aS=(t,s,n,r={},a,i)=>l=>{const o=H2(r,t)||{},c=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Xi(c);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:s.getVelocity(),...o,delay:-u,onUpdate:h=>{s.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{l(),o.onComplete&&o.onComplete()},name:t,motionValue:s,element:i?void 0:a};ole(o)||Object.assign(d,lle(t,d)),d.duration&&(d.duration=Xi(d.duration)),d.repeatDelay&&(d.repeatDelay=Xi(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let m=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(B_(d),d.delay===0&&(m=!0)),(Hl.instantAnimations||Hl.skipAnimations)&&(m=!0,B_(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,m&&!i&&s.get()!==void 0){const h=sle(d.keyframes,o);if(h!==void 0){gn.update(()=>{d.onUpdate(h),d.onComplete()});return}}return o.isSync?new V2(d):new Pae(d)};function cle({protectedKeys:t,needsAnimating:s},n){const r=t.hasOwnProperty(n)&&s[n]!==!0;return s[n]=!1,r}function FL(t,s,{delay:n=0,transitionOverride:r,type:a}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:l,...o}=s;r&&(i=r);const c=[],u=a&&t.animationState&&t.animationState.getState()[a];for(const d in o){const m=t.getValue(d,t.latestValues[d]??null),h=o[d];if(h===void 0||u&&cle(u,d))continue;const p={delay:n,...H2(i||{},d)},g=m.get();if(g!==void 0&&!m.isAnimating&&!Array.isArray(h)&&h===g&&!p.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const j=RL(t);if(j){const w=window.MotionHandoffAnimation(j,d,gn);w!==null&&(p.startTime=w,v=!0)}}W_(t,d),m.start(aS(d,m,h,t.shouldReduceMotion&&sL.has(d)?{type:!1}:p,t,v));const y=m.animation;y&&c.push(y)}return l&&Promise.all(c).then(()=>{gn.update(()=>{l&&Zie(t,l)})}),c}function LL(t,s,n,r=0,a=1){const i=Array.from(t).sort((u,d)=>u.sortNodePosition(d)).indexOf(s),l=t.size,o=(l-1)*r;return typeof n=="function"?n(i,l):a===1?i*r:o-i*r}function H_(t,s,n={}){var c;const r=bu(t,s,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(a=n.transitionOverride);const i=r?()=>Promise.all(FL(t,r,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:m,staggerDirection:h}=a;return dle(t,s,u,d,m,h,n)}:()=>Promise.resolve(),{when:o}=a;if(o){const[u,d]=o==="beforeChildren"?[i,l]:[l,i];return u().then(()=>d())}else return Promise.all([i(),l(n.delay)])}function dle(t,s,n=0,r=0,a=0,i=1,l){const o=[];for(const c of t.variantChildren)c.notify("AnimationStart",s),o.push(H_(c,s,{...l,delay:n+(typeof r=="function"?0:r)+LL(t.variantChildren,c,r,a,i)}).then(()=>c.notify("AnimationComplete",s)));return Promise.all(o)}function ule(t,s,n={}){t.notify("AnimationStart",s);let r;if(Array.isArray(s)){const a=s.map(i=>H_(t,i,n));r=Promise.all(a)}else if(typeof s=="string")r=H_(t,s,n);else{const a=typeof s=="function"?bu(t,s,n.custom):s;r=Promise.all(FL(t,a,n))}return r.then(()=>{t.notify("AnimationComplete",s)})}function IL(t,s){if(!Array.isArray(s))return!1;const n=s.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(s[r]!==t[r])return!1;return!0}const hle=X2.length;function BL(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?BL(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const s={};for(let n=0;n<hle;n++){const r=X2[n],a=t.props[r];(hf(a)||a===!1)&&(s[r]=a)}return s}const mle=[...J2].reverse(),fle=J2.length;function ple(t){return s=>Promise.all(s.map(({animation:n,options:r})=>ule(t,n,r)))}function xle(t){let s=ple(t),n=pT(),r=!0;const a=c=>(u,d)=>{var h;const m=bu(t,d,c==="exit"?(h=t.presenceContext)==null?void 0:h.custom:void 0);if(m){const{transition:p,transitionEnd:g,...v}=m;u={...u,...v,...g}}return u};function i(c){s=c(t)}function l(c){const{props:u}=t,d=BL(t.parent)||{},m=[],h=new Set;let p={},g=1/0;for(let y=0;y<fle;y++){const j=mle[y],w=n[j],N=u[j]!==void 0?u[j]:d[j],_=hf(N),T=j===c?w.isActive:null;T===!1&&(g=y);let A=N===d[j]&&N!==u[j]&&_;if(A&&r&&t.manuallyAnimateOnMount&&(A=!1),w.protectedKeys={...p},!w.isActive&&T===null||!N&&!w.prevProp||rv(N)||typeof N=="boolean")continue;const P=gle(w.prevProp,N);let C=P||j===c&&w.isActive&&!A&&_||y>g&&_,O=!1;const M=Array.isArray(N)?N:[N];let k=M.reduce(a(j),{});T===!1&&(k={});const{prevResolvedValues:E={}}=w,R={...E,...k},F=U=>{C=!0,h.has(U)&&(O=!0,h.delete(U)),w.needsAnimating[U]=!0;const B=t.getValue(U);B&&(B.liveStyle=!1)};for(const U in R){const B=k[U],$=E[U];if(p.hasOwnProperty(U))continue;let L=!1;V_(B)&&V_($)?L=!IL(B,$):L=B!==$,L?B!=null?F(U):h.add(U):B!==void 0&&h.has(U)?F(U):w.protectedKeys[U]=!0}w.prevProp=N,w.prevResolvedValues=k,w.isActive&&(p={...p,...k}),r&&t.blockInitialAnimation&&(C=!1);const z=A&&P;C&&(!z||O)&&m.push(...M.map(U=>{const B={type:j};if(typeof U=="string"&&r&&!z&&t.manuallyAnimateOnMount&&t.parent){const{parent:$}=t,L=bu($,U);if($.enteringChildren&&L){const{delayChildren:I}=L.transition||{};B.delay=LL($.enteringChildren,t,I)}}return{animation:U,options:B}}))}if(h.size){const y={};if(typeof u.initial!="boolean"){const j=bu(t,Array.isArray(u.initial)?u.initial[0]:u.initial);j&&j.transition&&(y.transition=j.transition)}h.forEach(j=>{const w=t.getBaseTarget(j),N=t.getValue(j);N&&(N.liveStyle=!0),y[j]=w??null}),m.push({animation:y})}let v=!!m.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(v=!1),r=!1,v?s(m):Promise.resolve()}function o(c,u){var m;if(n[c].isActive===u)return Promise.resolve();(m=t.variantChildren)==null||m.forEach(h=>{var p;return(p=h.animationState)==null?void 0:p.setActive(c,u)}),n[c].isActive=u;const d=l(c);for(const h in n)n[h].protectedKeys={};return d}return{animateChanges:l,setActive:o,setAnimateFunction:i,getState:()=>n,reset:()=>{n=pT()}}}function gle(t,s){return typeof s=="string"?s!==t:Array.isArray(s)?!IL(s,t):!1}function jc(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function pT(){return{animate:jc(!0),whileInView:jc(),whileHover:jc(),whileTap:jc(),whileDrag:jc(),whileFocus:jc(),exit:jc()}}class nc{constructor(s){this.isMounted=!1,this.node=s}update(){}}class vle extends nc{constructor(s){super(s),s.animationState||(s.animationState=xle(s))}updateAnimationControlsSubscription(){const{animate:s}=this.node.getProps();rv(s)&&(this.unmountControls=s.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:s}=this.node.getProps(),{animate:n}=this.node.prevProps||{};s!==n&&this.updateAnimationControlsSubscription()}unmount(){var s;this.node.animationState.reset(),(s=this.unmountControls)==null||s.call(this)}}let yle=0;class ble extends nc{constructor(){super(...arguments),this.id=yle++}update(){if(!this.node.presenceContext)return;const{isPresent:s,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||s===r)return;const a=this.node.animationState.setActive("exit",!s);n&&!s&&a.then(()=>{n(this.id)})}mount(){const{register:s,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),s&&(this.unmount=s(this.id))}unmount(){}}const jle={animation:{Feature:vle},exit:{Feature:ble}};function ff(t,s,n,r={passive:!0}){return t.addEventListener(s,n,r),()=>t.removeEventListener(s,n)}function ip(t){return{point:{x:t.pageX,y:t.pageY}}}const wle=t=>s=>Y2(s)&&t(s,ip(s));function $m(t,s,n,r){return ff(t,s,wle(n),r)}const qL=1e-4,Nle=1-qL,_le=1+qL,zL=.01,Sle=0-zL,Cle=0+zL;function Dr(t){return t.max-t.min}function kle(t,s,n){return Math.abs(t-s)<=n}function xT(t,s,n,r=.5){t.origin=r,t.originPoint=wn(s.min,s.max,t.origin),t.scale=Dr(n)/Dr(s),t.translate=wn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Nle&&t.scale<=_le||isNaN(t.scale))&&(t.scale=1),(t.translate>=Sle&&t.translate<=Cle||isNaN(t.translate))&&(t.translate=0)}function Um(t,s,n,r){xT(t.x,s.x,n.x,r?r.originX:void 0),xT(t.y,s.y,n.y,r?r.originY:void 0)}function gT(t,s,n){t.min=n.min+s.min,t.max=t.min+Dr(s)}function Ele(t,s,n){gT(t.x,s.x,n.x),gT(t.y,s.y,n.y)}function vT(t,s,n){t.min=s.min-n.min,t.max=t.min+Dr(s)}function Vm(t,s,n){vT(t.x,s.x,n.x),vT(t.y,s.y,n.y)}function La(t){return[t("x"),t("y")]}const $L=({current:t})=>t?t.ownerDocument.defaultView:null,yT=(t,s)=>Math.abs(t-s);function Ple(t,s){const n=yT(t.x,s.x),r=yT(t.y,s.y);return Math.sqrt(n**2+r**2)}class UL{constructor(s,n,{transformPagePoint:r,contextWindow:a=window,dragSnapToOrigin:i=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=tj(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,g=Ple(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!g)return;const{point:v}=h,{timestamp:y}=ar;this.history.push({...v,timestamp:y});const{onStart:j,onMove:w}=this.handlers;p||(j&&j(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,h)},this.handlePointerMove=(h,p)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=ej(p,this.transformPagePoint),gn.update(this.updatePoint,!0)},this.handlePointerUp=(h,p)=>{this.end();const{onEnd:g,onSessionEnd:v,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=tj(h.type==="pointercancel"?this.lastMoveEventInfo:ej(p,this.transformPagePoint),this.history);this.startEvent&&g&&g(h,j),v&&v(h,j)},!Y2(s))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=l,this.contextWindow=a||window;const o=ip(s),c=ej(o,this.transformPagePoint),{point:u}=c,{timestamp:d}=ar;this.history=[{...u,timestamp:d}];const{onSessionStart:m}=n;m&&m(s,tj(c,this.history)),this.removeListeners=np($m(this.contextWindow,"pointermove",this.handlePointerMove),$m(this.contextWindow,"pointerup",this.handlePointerUp),$m(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(s){this.handlers=s}end(){this.removeListeners&&this.removeListeners(),Yo(this.updatePoint)}}function ej(t,s){return s?{point:s(t.point)}:t}function bT(t,s){return{x:t.x-s.x,y:t.y-s.y}}function tj({point:t},s){return{point:t,delta:bT(t,VL(s)),offset:bT(t,Tle(s)),velocity:Ale(s,.1)}}function Tle(t){return t[0]}function VL(t){return t[t.length-1]}function Ale(t,s){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const a=VL(t);for(;n>=0&&(r=t[n],!(a.timestamp-r.timestamp>Xi(s)));)n--;if(!r)return{x:0,y:0};const i=Wa(a.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const l={x:(a.x-r.x)/i,y:(a.y-r.y)/i};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function Mle(t,{min:s,max:n},r){return s!==void 0&&t<s?t=r?wn(s,t,r.min):Math.max(t,s):n!==void 0&&t>n&&(t=r?wn(n,t,r.max):Math.min(t,n)),t}function jT(t,s,n){return{min:s!==void 0?t.min+s:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Dle(t,{top:s,left:n,bottom:r,right:a}){return{x:jT(t.x,n,a),y:jT(t.y,s,r)}}function wT(t,s){let n=s.min-t.min,r=s.max-t.max;return s.max-s.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Ole(t,s){return{x:wT(t.x,s.x),y:wT(t.y,s.y)}}function Rle(t,s){let n=.5;const r=Dr(t),a=Dr(s);return a>r?n=cf(s.min,s.max-r,t.min):r>a&&(n=cf(t.min,t.max-a,s.min)),Wl(0,1,n)}function Fle(t,s){const n={};return s.min!==void 0&&(n.min=s.min-t.min),s.max!==void 0&&(n.max=s.max-t.min),n}const K_=.35;function Lle(t=K_){return t===!1?t=0:t===!0&&(t=K_),{x:NT(t,"left","right"),y:NT(t,"top","bottom")}}function NT(t,s,n){return{min:_T(t,s),max:_T(t,n)}}function _T(t,s){return typeof t=="number"?t:t[s]||0}const Ile=new WeakMap;class Ble{constructor(s){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=An(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=s}start(s,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const i=m=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ip(m).point)},l=(m,h)=>{const{drag:p,dragPropagation:g,onDragStart:v}=this.getProps();if(p&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Wae(p),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),La(j=>{let w=this.getAxisMotionValue(j).get()||0;if(Zi.test(w)){const{projection:N}=this.visualElement;if(N&&N.layout){const _=N.layout.layoutBox[j];_&&(w=Dr(_)*(parseFloat(w)/100))}}this.originPoint[j]=w}),v&&gn.postRender(()=>v(m,h)),W_(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},o=(m,h)=>{this.latestPointerEvent=m,this.latestPanInfo=h;const{dragPropagation:p,dragDirectionLock:g,onDirectionLock:v,onDrag:y}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:j}=h;if(g&&this.currentDirection===null){this.currentDirection=qle(j),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",h.point,j),this.updateAxis("y",h.point,j),this.visualElement.render(),y&&y(m,h)},c=(m,h)=>{this.latestPointerEvent=m,this.latestPanInfo=h,this.stop(m,h),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>La(m=>{var h;return this.getAnimationState(m)==="paused"&&((h=this.getAxisMotionValue(m).animation)==null?void 0:h.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new UL(s,{onSessionStart:i,onStart:l,onMove:o,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:$L(this.visualElement)})}stop(s,n){const r=s||this.latestPointerEvent,a=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!a||!r)return;const{velocity:l}=a;this.startAnimation(l);const{onDragEnd:o}=this.getProps();o&&gn.postRender(()=>o(r,a))}cancel(){this.isDragging=!1;const{projection:s,animationState:n}=this.visualElement;s&&(s.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(s,n,r){const{drag:a}=this.getProps();if(!r||!Ux(s,a,this.currentDirection))return;const i=this.getAxisMotionValue(s);let l=this.originPoint[s]+r[s];this.constraints&&this.constraints[s]&&(l=Mle(l,this.constraints[s],this.elastic[s])),i.set(l)}resolveConstraints(){var i;const{dragConstraints:s,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,a=this.constraints;s&&mu(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&r?this.constraints=Dle(r.layoutBox,s):this.constraints=!1,this.elastic=Lle(n),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&La(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=Fle(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:s,onMeasureDragConstraints:n}=this.getProps();if(!s||!mu(s))return!1;const r=s.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=zie(r,a.root,this.visualElement.getTransformPagePoint());let l=Ole(a.layout.layoutBox,i);if(n){const o=n(Iie(l));this.hasMutatedConstraints=!!o,o&&(l=kL(o))}return l}startAnimation(s){const{drag:n,dragMomentum:r,dragElastic:a,dragTransition:i,dragSnapToOrigin:l,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},u=La(d=>{if(!Ux(d,n,this.currentDirection))return;let m=c&&c[d]||{};l&&(m={min:0,max:0});const h=a?200:1e6,p=a?40:1e7,g={type:"inertia",velocity:r?s[d]:0,bounceStiffness:h,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...m};return this.startAxisValueAnimation(d,g)});return Promise.all(u).then(o)}startAxisValueAnimation(s,n){const r=this.getAxisMotionValue(s);return W_(this.visualElement,s),r.start(aS(s,r,0,n,this.visualElement,!1))}stopAnimation(){La(s=>this.getAxisMotionValue(s).stop())}pauseAnimation(){La(s=>{var n;return(n=this.getAxisMotionValue(s).animation)==null?void 0:n.pause()})}getAnimationState(s){var n;return(n=this.getAxisMotionValue(s).animation)==null?void 0:n.state}getAxisMotionValue(s){const n=`_drag${s.toUpperCase()}`,r=this.visualElement.getProps(),a=r[n];return a||this.visualElement.getValue(s,(r.initial?r.initial[s]:void 0)||0)}snapToCursor(s){La(n=>{const{drag:r}=this.getProps();if(!Ux(n,r,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(n);if(a&&a.layout){const{min:l,max:o}=a.layout.layoutBox[n];i.set(s[n]-wn(l,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:s,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!mu(n)||!r||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};La(l=>{const o=this.getAxisMotionValue(l);if(o&&this.constraints!==!1){const c=o.get();a[l]=Rle({min:c,max:c},this.constraints[l])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),La(l=>{if(!Ux(l,s,null))return;const o=this.getAxisMotionValue(l),{min:c,max:u}=this.constraints[l];o.set(wn(c,u,a[l]))})}addListeners(){if(!this.visualElement.current)return;Ile.set(this.visualElement,this);const s=this.visualElement.current,n=$m(s,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();mu(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",r);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),gn.read(r);const l=ff(window,"resize",()=>this.scalePositionWithinConstraints()),o=a.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(La(d=>{const m=this.getAxisMotionValue(d);m&&(this.originPoint[d]+=c[d].translate,m.set(m.get()+c[d].translate))}),this.visualElement.render())}));return()=>{l(),n(),i(),o&&o()}}getProps(){const s=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:l=K_,dragMomentum:o=!0}=s;return{...s,drag:n,dragDirectionLock:r,dragPropagation:a,dragConstraints:i,dragElastic:l,dragMomentum:o}}}function Ux(t,s,n){return(s===!0||s===t)&&(n===null||n===t)}function qle(t,s=10){let n=null;return Math.abs(t.y)>s?n="y":Math.abs(t.x)>s&&(n="x"),n}class zle extends nc{constructor(s){super(s),this.removeGroupControls=Ka,this.removeListeners=Ka,this.controls=new Ble(s)}mount(){const{dragControls:s}=this.node.getProps();s&&(this.removeGroupControls=s.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ka}unmount(){this.removeGroupControls(),this.removeListeners()}}const ST=t=>(s,n)=>{t&&gn.postRender(()=>t(s,n))};class $le extends nc{constructor(){super(...arguments),this.removePointerDownListener=Ka}onPointerDown(s){this.session=new UL(s,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:$L(this.node)})}createPanHandlers(){const{onPanSessionStart:s,onPanStart:n,onPan:r,onPanEnd:a}=this.node.getProps();return{onSessionStart:ST(s),onStart:ST(n),onMove:r,onEnd:(i,l)=>{delete this.session,a&&gn.postRender(()=>a(i,l))}}}mount(){this.removePointerDownListener=$m(this.node.current,"pointerdown",s=>this.onPointerDown(s))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const bg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function CT(t,s){return s.max===s.min?0:t/(s.max-s.min)*100}const vm={correct:(t,s)=>{if(!s.target)return t;if(typeof t=="string")if(ts.test(t))t=parseFloat(t);else return t;const n=CT(t,s.target.x),r=CT(t,s.target.y);return`${n}% ${r}%`}},Ule={correct:(t,{treeScale:s,projectionDelta:n})=>{const r=t,a=Qo.parse(t);if(a.length>5)return r;const i=Qo.createTransformer(t),l=typeof a[0]!="number"?1:0,o=n.x.scale*s.x,c=n.y.scale*s.y;a[0+l]/=o,a[1+l]/=c;const u=wn(o,c,.5);return typeof a[2+l]=="number"&&(a[2+l]/=u),typeof a[3+l]=="number"&&(a[3+l]/=u),i(a)}};let sj=!1;class Vle extends b.Component{componentDidMount(){const{visualElement:s,layoutGroup:n,switchLayoutGroup:r,layoutId:a}=this.props,{projection:i}=s;hie(Wle),i&&(n.group&&n.group.add(i),r&&r.register&&a&&r.register(i),sj&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),bg.hasEverUpdated=!0}getSnapshotBeforeUpdate(s){const{layoutDependency:n,visualElement:r,drag:a,isPresent:i}=this.props,{projection:l}=r;return l&&(l.isPresent=i,sj=!0,a||s.layoutDependency!==n||n===void 0||s.isPresent!==i?l.willUpdate():this.safeToRemove(),s.isPresent!==i&&(i?l.promote():l.relegate()||gn.postRender(()=>{const o=l.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:s}=this.props.visualElement;s&&(s.root.didUpdate(),G2.postRender(()=>{!s.currentAnimation&&s.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:s,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:a}=s;sj=!0,a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),r&&r.deregister&&r.deregister(a))}safeToRemove(){const{safeToRemove:s}=this.props;s&&s()}render(){return null}}function WL(t){const[s,n]=mL(),r=b.useContext(C2);return e.jsx(Vle,{...t,layoutGroup:r,switchLayoutGroup:b.useContext(SL),isPresent:s,safeToRemove:n})}const Wle={borderRadius:{...vm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:vm,borderTopRightRadius:vm,borderBottomLeftRadius:vm,borderBottomRightRadius:vm,boxShadow:Ule};function Hle(t,s,n){const r=pr(t)?t:Gu(t);return r.start(aS("",r,s,n)),r.animation}const Kle=(t,s)=>t.depth-s.depth;class Gle{constructor(){this.children=[],this.isDirty=!1}add(s){P2(this.children,s),this.isDirty=!0}remove(s){T2(this.children,s),this.isDirty=!0}forEach(s){this.isDirty&&this.children.sort(Kle),this.isDirty=!1,this.children.forEach(s)}}function Yle(t,s){const n=ea.now(),r=({timestamp:a})=>{const i=a-n;i>=s&&(Yo(r),t(i-s))};return gn.setup(r,!0),()=>Yo(r)}const HL=["TopLeft","TopRight","BottomLeft","BottomRight"],Qle=HL.length,kT=t=>typeof t=="string"?parseFloat(t):t,ET=t=>typeof t=="number"||ts.test(t);function Jle(t,s,n,r,a,i){a?(t.opacity=wn(0,n.opacity??1,Xle(r)),t.opacityExit=wn(s.opacity??1,0,Zle(r))):i&&(t.opacity=wn(s.opacity??1,n.opacity??1,r));for(let l=0;l<Qle;l++){const o=`border${HL[l]}Radius`;let c=PT(s,o),u=PT(n,o);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||ET(c)===ET(u)?(t[o]=Math.max(wn(kT(c),kT(u),r),0),(Zi.test(u)||Zi.test(c))&&(t[o]+="%")):t[o]=u}(s.rotate||n.rotate)&&(t.rotate=wn(s.rotate||0,n.rotate||0,r))}function PT(t,s){return t[s]!==void 0?t[s]:t.borderRadius}const Xle=KL(0,.5,DF),Zle=KL(.5,.95,Ka);function KL(t,s,n){return r=>r<t?0:r>s?1:n(cf(t,s,r))}function TT(t,s){t.min=s.min,t.max=s.max}function Ra(t,s){TT(t.x,s.x),TT(t.y,s.y)}function AT(t,s){t.translate=s.translate,t.scale=s.scale,t.originPoint=s.originPoint,t.origin=s.origin}function MT(t,s,n,r,a){return t-=s,t=Qg(t,1/n,r),a!==void 0&&(t=Qg(t,1/a,r)),t}function eoe(t,s=0,n=1,r=.5,a,i=t,l=t){if(Zi.test(s)&&(s=parseFloat(s),s=wn(l.min,l.max,s/100)-l.min),typeof s!="number")return;let o=wn(i.min,i.max,r);t===i&&(o-=s),t.min=MT(t.min,s,n,o,a),t.max=MT(t.max,s,n,o,a)}function DT(t,s,[n,r,a],i,l){eoe(t,s[n],s[r],s[a],s.scale,i,l)}const toe=["x","scaleX","originX"],soe=["y","scaleY","originY"];function OT(t,s,n,r){DT(t.x,s,toe,n?n.x:void 0,r?r.x:void 0),DT(t.y,s,soe,n?n.y:void 0,r?r.y:void 0)}function RT(t){return t.translate===0&&t.scale===1}function GL(t){return RT(t.x)&&RT(t.y)}function FT(t,s){return t.min===s.min&&t.max===s.max}function noe(t,s){return FT(t.x,s.x)&&FT(t.y,s.y)}function LT(t,s){return Math.round(t.min)===Math.round(s.min)&&Math.round(t.max)===Math.round(s.max)}function YL(t,s){return LT(t.x,s.x)&&LT(t.y,s.y)}function IT(t){return Dr(t.x)/Dr(t.y)}function BT(t,s){return t.translate===s.translate&&t.scale===s.scale&&t.originPoint===s.originPoint}class roe{constructor(){this.members=[]}add(s){P2(this.members,s),s.scheduleRender()}remove(s){if(T2(this.members,s),s===this.prevLead&&(this.prevLead=void 0),s===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(s){const n=this.members.findIndex(a=>s===a);if(n===0)return!1;let r;for(let a=n;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(s,n){const r=this.lead;if(s!==r&&(this.prevLead=r,this.lead=s,s.show(),r)){r.instance&&r.scheduleRender(),s.scheduleRender(),s.resumeFrom=r,n&&(s.resumeFrom.preserveOpacity=!0),r.snapshot&&(s.snapshot=r.snapshot,s.snapshot.latestValues=r.animationValues||r.latestValues),s.root&&s.root.isUpdating&&(s.isLayoutDirty=!0);const{crossfade:a}=s.options;a===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(s=>{const{options:n,resumingFrom:r}=s;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(s=>{s.instance&&s.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function aoe(t,s,n){let r="";const a=t.x.translate/s.x,i=t.y.translate/s.y,l=(n==null?void 0:n.z)||0;if((a||i||l)&&(r=`translate3d(${a}px, ${i}px, ${l}px) `),(s.x!==1||s.y!==1)&&(r+=`scale(${1/s.x}, ${1/s.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:m,rotateY:h,skewX:p,skewY:g}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),m&&(r+=`rotateX(${m}deg) `),h&&(r+=`rotateY(${h}deg) `),p&&(r+=`skewX(${p}deg) `),g&&(r+=`skewY(${g}deg) `)}const o=t.x.scale*s.x,c=t.y.scale*s.y;return(o!==1||c!==1)&&(r+=`scale(${o}, ${c})`),r||"none"}const nj=["","X","Y","Z"],ioe=1e3;let loe=0;function rj(t,s,n,r){const{latestValues:a}=s;a[t]&&(n[t]=a[t],s.setStaticValue(t,0),r&&(r[t]=0))}function QL(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:s}=t.options;if(!s)return;const n=RL(s);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:a,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",gn,!(a||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&QL(r)}function JL({attachResizeListener:t,defaultParent:s,measureScroll:n,checkIsScrollRoot:r,resetTransform:a}){return class{constructor(l={},o=s==null?void 0:s()){this.id=loe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(doe),this.nodes.forEach(foe),this.nodes.forEach(poe),this.nodes.forEach(uoe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Gle)}addEventListener(l,o){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new D2),this.eventHandlers.get(l).add(o)}notifyListeners(l,...o){const c=this.eventHandlers.get(l);c&&c.notify(...o)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=hL(l)&&!Jae(l),this.instance=l;const{layoutId:o,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||o)&&(this.isLayoutDirty=!0),t){let d,m=0;const h=()=>this.root.updateBlockedByResize=!1;gn.read(()=>{m=window.innerWidth}),t(l,()=>{const p=window.innerWidth;p!==m&&(m=p,this.root.updateBlockedByResize=!0,d&&d(),d=Yle(h,250),bg.hasAnimatedSinceResize&&(bg.hasAnimatedSinceResize=!1,this.nodes.forEach($T)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:m,hasRelativeLayoutChanged:h,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||boe,{onLayoutAnimationStart:v,onLayoutAnimationComplete:y}=u.getProps(),j=!this.targetLayout||!YL(this.targetLayout,p),w=!m&&h;if(this.options.layoutRoot||this.resumeFrom||w||m&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const N={...H2(g,"layout"),onPlay:v,onComplete:y};(u.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N),this.setAnimationOrigin(d,w)}else m||$T(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Yo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(xoe),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&QL(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const m=this.path[d];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(qT);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(zT);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(moe),this.nodes.forEach(ooe),this.nodes.forEach(coe)):this.nodes.forEach(zT),this.clearAllSnapshots();const o=ea.now();ar.delta=Wl(0,1e3/60,o-ar.timestamp),ar.timestamp=o,ar.isProcessing=!0,Hb.update.process(ar),Hb.preRender.process(ar),Hb.render.process(ar),ar.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,G2.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(hoe),this.sharedNodes.forEach(goe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,gn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){gn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Dr(this.snapshot.measuredBox.x)&&!Dr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=An(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(o=!1),o&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!a)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!GL(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;l&&this.instance&&(o||Sc(this.latestValues)||d)&&(a(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return l&&(c=this.removeTransform(c)),joe(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:l}=this.options;if(!l)return An();const o=l.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(woe))){const{scroll:d}=this.root;d&&(fu(o.x,d.offset.x),fu(o.y,d.offset.y))}return o}removeElementScroll(l){var c;const o=An();if(Ra(o,l),(c=this.scroll)!=null&&c.wasRoot)return o;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:m,options:h}=d;d!==this.root&&m&&h.layoutScroll&&(m.wasRoot&&Ra(o,l),fu(o.x,m.offset.x),fu(o.y,m.offset.y))}return o}applyTransform(l,o=!1){const c=An();Ra(c,l);for(let u=0;u<this.path.length;u++){const d=this.path[u];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&pu(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Sc(d.latestValues)&&pu(c,d.latestValues)}return Sc(this.latestValues)&&pu(c,this.latestValues),c}removeTransform(l){const o=An();Ra(o,l);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Sc(u.latestValues))continue;z_(u.latestValues)&&u.updateSnapshot();const d=An(),m=u.measurePageBox();Ra(d,m),OT(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Sc(this.latestValues)&&OT(o,this.latestValues),o}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ar.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var h;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==o;if(!(l||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(h=this.parent)!=null&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:m}=this.options;if(!(!this.layout||!(d||m))){if(this.resolvedRelativeTargetAt=ar.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=An(),this.relativeTargetOrigin=An(),Vm(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Ra(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=An(),this.targetWithTransforms=An()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Ele(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ra(this.target,this.layout.layoutBox),PL(this.target,this.targetDelta)):Ra(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=An(),this.relativeTargetOrigin=An(),Vm(this.relativeTargetOrigin,this.target,p.target),Ra(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||z_(this.parent.latestValues)||EL(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var g;const l=this.getLead(),o=!!this.resumingFrom||this!==l;let c=!0;if((this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty)&&(c=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ar.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Ra(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,h=this.treeScale.y;qie(this.layoutCorrected,this.treeScale,this.path,o),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=An());const{target:p}=l;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(AT(this.prevProjectionDelta.x,this.projectionDelta.x),AT(this.prevProjectionDelta.y,this.projectionDelta.y)),Um(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==h||!BT(this.projectionDelta.x,this.prevProjectionDelta.x)||!BT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),l){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=xu(),this.projectionDelta=xu(),this.projectionDeltaWithTransform=xu()}setAnimationOrigin(l,o=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},m=xu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=An(),p=c?c.source:void 0,g=this.layout?this.layout.source:void 0,v=p!==g,y=this.getStack(),j=!y||y.members.length<=1,w=!!(v&&!j&&this.options.crossfade===!0&&!this.path.some(yoe));this.animationProgress=0;let N;this.mixTargetDelta=_=>{const T=_/1e3;UT(m.x,l.x,T),UT(m.y,l.y,T),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Vm(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),voe(this.relativeTarget,this.relativeTargetOrigin,h,T),N&&noe(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=An()),Ra(N,this.relativeTarget)),v&&(this.animationValues=d,Jle(d,u,this.latestValues,T,w,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){var o,c,u;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(Yo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=gn.update(()=>{bg.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Gu(0)),this.currentAnimation=Hle(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),l.onUpdate&&l.onUpdate(d)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ioe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:o,target:c,layout:u,latestValues:d}=l;if(!(!o||!c||!u)){if(this!==l&&this.layout&&u&&XL(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||An();const m=Dr(this.layout.layoutBox.x);c.x.min=l.target.x.min,c.x.max=c.x.min+m;const h=Dr(this.layout.layoutBox.y);c.y.min=l.target.y.min,c.y.max=c.y.min+h}Ra(o,c),pu(o,d),Um(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(l,o){this.sharedNodes.has(l)||this.sharedNodes.set(l,new roe),this.sharedNodes.get(l).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:o,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),l&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let o=!1;const{latestValues:c}=l;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const u={};c.z&&rj("z",l,u,this.animationValues);for(let d=0;d<nj.length;d++)rj(`rotate${nj[d]}`,l,u,this.animationValues),rj(`skew${nj[d]}`,l,u,this.animationValues);l.render();for(const d in u)l.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);l.scheduleRender()}applyProjectionStyles(l,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=yg(o==null?void 0:o.pointerEvents)||"",l.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=yg(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Sc(this.latestValues)&&(l.transform=c?c({},""):"none",this.hasProjected=!1);return}l.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let m=aoe(this.projectionDeltaWithTransform,this.treeScale,d);c&&(m=c(d,m)),l.transform=m;const{x:h,y:p}=this.projectionDelta;l.transformOrigin=`${h.origin*100}% ${p.origin*100}% 0`,u.animationValues?l.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:l.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const g in mf){if(d[g]===void 0)continue;const{correct:v,applyTo:y,isCSSVariable:j}=mf[g],w=m==="none"?d[g]:v(d[g],u);if(y){const N=y.length;for(let _=0;_<N;_++)l[y[_]]=w}else j?this.options.visualElement.renderState.vars[g]=w:l[g]=w}this.options.layoutId&&(l.pointerEvents=u===this?yg(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var o;return(o=l.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(qT),this.root.sharedNodes.clear()}}}function ooe(t){t.updateLayout()}function coe(t){var n;const s=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&s&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:a}=t.layout,{animationType:i}=t.options,l=s.source!==t.layout.source;i==="size"?La(m=>{const h=l?s.measuredBox[m]:s.layoutBox[m],p=Dr(h);h.min=r[m].min,h.max=h.min+p}):XL(i,s.layoutBox,r)&&La(m=>{const h=l?s.measuredBox[m]:s.layoutBox[m],p=Dr(r[m]);h.max=h.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+p)});const o=xu();Um(o,r,s.layoutBox);const c=xu();l?Um(c,t.applyTransform(a,!0),s.measuredBox):Um(c,r,s.layoutBox);const u=!GL(o);let d=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:h,layout:p}=m;if(h&&p){const g=An();Vm(g,s.layoutBox,h.layoutBox);const v=An();Vm(v,r,p.layoutBox),YL(g,v)||(d=!0),m.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=g,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:s,delta:c,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function doe(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function uoe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function hoe(t){t.clearSnapshot()}function qT(t){t.clearMeasurements()}function zT(t){t.isLayoutDirty=!1}function moe(t){const{visualElement:s}=t.options;s&&s.getProps().onBeforeLayoutMeasure&&s.notify("BeforeLayoutMeasure"),t.resetTransform()}function $T(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function foe(t){t.resolveTargetDelta()}function poe(t){t.calcProjection()}function xoe(t){t.resetSkewAndRotation()}function goe(t){t.removeLeadSnapshot()}function UT(t,s,n){t.translate=wn(s.translate,0,n),t.scale=wn(s.scale,1,n),t.origin=s.origin,t.originPoint=s.originPoint}function VT(t,s,n,r){t.min=wn(s.min,n.min,r),t.max=wn(s.max,n.max,r)}function voe(t,s,n,r){VT(t.x,s.x,n.x,r),VT(t.y,s.y,n.y,r)}function yoe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const boe={duration:.45,ease:[.4,0,.1,1]},WT=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),HT=WT("applewebkit/")&&!WT("chrome/")?Math.round:Ka;function KT(t){t.min=HT(t.min),t.max=HT(t.max)}function joe(t){KT(t.x),KT(t.y)}function XL(t,s,n){return t==="position"||t==="preserve-aspect"&&!kle(IT(s),IT(n),.2)}function woe(t){var s;return t!==t.root&&((s=t.scroll)==null?void 0:s.wasRoot)}const Noe=JL({attachResizeListener:(t,s)=>ff(t,"resize",s),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),aj={current:void 0},ZL=JL({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!aj.current){const t=new Noe({});t.mount(window),t.setOptions({layoutScroll:!0}),aj.current=t}return aj.current},resetTransform:(t,s)=>{t.style.transform=s!==void 0?s:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),_oe={pan:{Feature:$le},drag:{Feature:zle,ProjectionNode:ZL,MeasureLayout:WL}};function GT(t,s,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const a="onHover"+n,i=r[a];i&&gn.postRender(()=>i(s,ip(s)))}class Soe extends nc{mount(){const{current:s}=this.node;s&&(this.unmount=Hae(s,(n,r)=>(GT(this.node,r,"Start"),a=>GT(this.node,a,"End"))))}unmount(){}}class Coe extends nc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let s=!1;try{s=this.node.current.matches(":focus-visible")}catch{s=!0}!s||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=np(ff(this.node.current,"focus",()=>this.onFocus()),ff(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function YT(t,s,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const a="onTap"+(n==="End"?"":n),i=r[a];i&&gn.postRender(()=>i(s,ip(s)))}class koe extends nc{mount(){const{current:s}=this.node;s&&(this.unmount=Qae(s,(n,r)=>(YT(this.node,r,"Start"),(a,{success:i})=>YT(this.node,a,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const G_=new WeakMap,ij=new WeakMap,Eoe=t=>{const s=G_.get(t.target);s&&s(t)},Poe=t=>{t.forEach(Eoe)};function Toe({root:t,...s}){const n=t||document;ij.has(n)||ij.set(n,{});const r=ij.get(n),a=JSON.stringify(s);return r[a]||(r[a]=new IntersectionObserver(Poe,{root:t,...s})),r[a]}function Aoe(t,s,n){const r=Toe(s);return G_.set(t,n),r.observe(t),()=>{G_.delete(t),r.unobserve(t)}}const Moe={some:0,all:1};class Doe extends nc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:s={}}=this.node.getProps(),{root:n,margin:r,amount:a="some",once:i}=s,l={root:n?n.current:void 0,rootMargin:r,threshold:typeof a=="number"?a:Moe[a]},o=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:m}=this.node.getProps(),h=u?d:m;h&&h(c)};return Aoe(this.node.current,l,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:s,prevProps:n}=this.node;["amount","margin","root"].some(Ooe(s,n))&&this.startObserver()}unmount(){}}function Ooe({viewport:t={}},{viewport:s={}}={}){return n=>t[n]!==s[n]}const Roe={inView:{Feature:Doe},tap:{Feature:koe},focus:{Feature:Coe},hover:{Feature:Soe}},Foe={layout:{ProjectionNode:ZL,MeasureLayout:WL}},Loe={...jle,...Roe,..._oe,...Foe},Vx=Lie(Loe,Qie);function ld({tourGroupName:t,viewId:s,onComplete:n,onDismissPermanently:r,autoShow:a=!1}){const[i,l]=b.useState(0),[o,c]=b.useState(a),[u,d]=b.useState(a),[m,h]=b.useState(!1),[p,g]=b.useState(null),[v,y]=b.useState({top:0,left:0}),[j,w]=b.useState(!1),[N,_]=b.useState(!1),[T,A]=b.useState(!1);console.log("[PageTour] Render - tourGroupName:",t,"viewId:",s,"autoShow:",a),console.log("[PageTour] State - isActive:",o,"showPopup:",u,"currentStep:",i);const{data:P}=me({queryKey:["tourGroup",t,s],queryFn:async()=>{const B=await X.entities.TourGroup.list();console.log("[PageTour] All tour groups from DB:",B),console.log("[PageTour] Looking for - page_name:",t,"viewId:",s);const $=B.find(L=>{const I=L.page_name===t,W=s?L.view_id===s:!L.view_id,q=L.is_active===!0;return console.log("[PageTour] Checking group:",L.id,{page_name:L.page_name,view_id:L.view_id,is_active:L.is_active,pageNameMatch:I,viewIdMatch:W,isActiveMatch:q}),I&&W&&q});return console.log("[PageTour] Found tour group:",$),$},enabled:!!t}),{data:C}=me({queryKey:["tourSteps",P==null?void 0:P.id],queryFn:async()=>{if(!(P!=null&&P.id))return console.log("[PageTour] No tour group ID, returning empty steps"),[];const B=await X.entities.TourStep.list();console.log("[PageTour] All steps from DB:",B);const $=B.filter(L=>L.tour_group_id===P.id).sort((L,I)=>L.step_order-I.step_order);return console.log("[PageTour] Filtered steps for group",P.id,":",$),$},enabled:!!(P!=null&&P.id),initialData:[]});console.log("[PageTour] Data - tourGroup:",P==null?void 0:P.id,"steps:",C.length),b.useEffect(()=>{if(console.log("[PageTour] autoShow useEffect triggered - autoShow:",a,"steps.length:",C.length),a&&C.length>0&&P){const B=setTimeout(()=>{if(P.mandatory_selector){if(console.log("[PageTour] Checking for mandatory selector:",P.mandatory_selector),!document.querySelector(P.mandatory_selector)){console.log("[PageTour] Mandatory element not found, showing error popup"),_(!0),A(!0),c(!0),d(!0),h(!0);return}console.log("[PageTour] Mandatory element found, proceeding with tour")}console.log("[PageTour] Setting isActive and showPopup to true"),_(!1),A(!0),c(!0),d(!0),l(0)},500);return()=>clearTimeout(B)}},[a,C,P]),b.useEffect(()=>{if(!o||i>=C.length||!u||C.length===0||N||!T)return;h(!1);const B=C[i];let $,L=0;const I=20;let W=null;const q=()=>{const Q=B.size||"medium";return{width:{small:320,medium:384,large:512}[Q]||384,height:270}},Z=()=>{const{width:Q,height:Y}=q(),K=window.innerWidth,ae=window.innerHeight,se=window.pageYOffset||document.documentElement.scrollTop,de=window.pageXOffset||document.documentElement.scrollLeft,ue=B.gap||40;if(!B.target_selector){g(null);let pe=de+(K-Q)/2,je=se+(ae-Y)/2;pe=Math.max(de+ue,pe),je=Math.max(se+ue,je),pe=Math.min(de+K-Q-ue,pe),je=Math.min(se+ae-Y-ue,je),y({top:je,left:pe}),h(!0);return}const oe=document.querySelector(B.target_selector);if(oe){if(W=oe,g(oe),oe.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),setTimeout(()=>{const pe=window.pageYOffset||document.documentElement.scrollTop,je=window.pageXOffset||document.documentElement.scrollLeft,we=oe.getBoundingClientRect();let qe=0,ze=0;switch(B.placement||"bottom"){case"top":qe=we.top+pe-Y-ue,ze=we.left+je+(we.width-Q)/2,qe<pe&&(qe=we.bottom+pe+ue);break;case"bottom":qe=we.bottom+pe+ue,ze=we.left+je+(we.width-Q)/2,qe+Y>pe+ae&&(qe=we.top+pe-Y-ue);break;case"left":qe=we.top+pe+(we.height-Y)/2,ze=we.left+je-Q-ue,ze<je&&(ze=we.right+je+ue);break;case"right":default:qe=we.top+pe+(we.height-Y)/2,ze=we.right+je+ue,ze+Q>je+K&&(ze=we.left+je-Q-ue);break}ze=Math.max(je+ue,ze),qe=Math.max(pe+ue,qe),ze=Math.min(je+K-Q-ue,ze),qe=Math.min(pe+ae-Y-ue,qe),y({top:qe,left:ze}),h(!0)},300),oe.style.position="relative",oe.style.zIndex="10001",oe.style.backgroundColor="#fef08a",oe.style.boxShadow="0 0 0 4px rgba(234, 179, 8, 0.6)",oe.style.borderRadius="8px",oe.style.transition="all 0.3s ease",B.mode==="interactive"){const pe=()=>{O()};oe.addEventListener("click",pe),oe._tourClickHandler=pe}}else if(L<I)L++,$=setTimeout(Z,100);else{g(null);let pe=de+(K-Q)/2,je=se+(ae-Y)/2;pe=Math.max(de+ue,pe),je=Math.max(se+ue,je),pe=Math.min(de+K-Q-ue,pe),je=Math.min(se+ae-Y-ue,je),y({top:je,left:pe}),h(!0)}};return Z(),()=>{clearTimeout($),W&&(W._tourClickHandler&&(W.removeEventListener("click",W._tourClickHandler),delete W._tourClickHandler),W.style.position="",W.style.zIndex="",W.style.backgroundColor="",W.style.boxShadow="",W.style.borderRadius="",W.style.transition="")}},[i,o,u,C,N,T]);const O=()=>{i<C.length-1?l(i+1):E()},M=()=>{i>0&&l(i-1)},k=()=>{E()},E=()=>{c(!1),d(!1),_(!1),A(!1),j&&r?r():n&&n()};if(console.log("[PageTour] Return condition check - isActive:",o,"showPopup:",u,"mandatoryCheckComplete:",T,"mandatoryElementMissing:",N,"currentStep:",i,"steps.length:",C.length),!o||!u||!T||!N&&(i>=C.length||C.length===0))return console.log("[PageTour] Returning null - not showing tour"),null;if(console.log("[PageTour] Rendering tour UI"),N){const B=window.innerWidth,$=window.pageYOffset||document.documentElement.scrollTop,L=window.pageXOffset||document.documentElement.scrollLeft,I=384,W=40;let q=L+(B-I)/2,Z=$+W;q=Math.max(L+W,q),q=Math.min(L+B-I-W,q);const Q=(P==null?void 0:P.mandatory_selector_missing_message)||"Required page elements for this tour are not currently available.";return e.jsxs(e.Fragment,{children:[u&&e.jsx(Vx.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] bg-black/20",onClick:k}),e.jsx(nT,{children:u&&m&&e.jsx(Vx.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},style:{position:"absolute",top:`${Z}px`,left:`${q}px`,zIndex:10002},className:"w-96",children:e.jsxs(le,{className:"shadow-2xl border-2 border-red-500 bg-gradient-to-br from-white to-red-50",children:[e.jsx(Fe,{className:"pb-4 border-b border-red-100",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(vs,{className:"h-5 w-5 text-red-600"})}),e.jsx(Ue,{className:"text-xl",children:"Tour Unavailable"})]}),e.jsx(J,{variant:"ghost",size:"icon",className:"h-7 w-7 -mt-1 -mr-2 hover:bg-red-100",onClick:k,children:e.jsx(_s,{className:"h-4 w-4"})})]})}),e.jsxs(ce,{className:"pt-6 space-y-6",children:[e.jsx("p",{className:"text-base text-slate-700 leading-relaxed",children:Q}),e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-50 border border-slate-200 rounded-lg",children:[e.jsx("input",{type:"checkbox",id:"dont-show-again",checked:j,onChange:Y=>w(Y.target.checked),className:"h-4 w-4 rounded border-gray-300"}),e.jsx("label",{htmlFor:"dont-show-again",className:"text-sm text-slate-700 cursor-pointer",children:"Don't show this tour automatically again"})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-slate-200",children:e.jsx(J,{size:"sm",onClick:E,className:"bg-red-600 hover:bg-red-700",children:"Close"})})]})]})})})]})}const R=C[i],F=R.mode==="interactive"&&R.target_selector,z=!R.target_selector,V=i===C.length-1,U=()=>{const B=R.size||"medium";return{small:"w-80",medium:"w-96",large:"w-[512px]"}[B]||"w-96"};return e.jsxs(e.Fragment,{children:[u&&e.jsx(Vx.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`fixed inset-0 z-[10000] ${F?"bg-black/70":"bg-black/20"}`,onClick:F?void 0:k}),e.jsx(nT,{children:u&&m&&e.jsx(Vx.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},style:{position:"absolute",top:`${v.top}px`,left:`${v.left}px`,zIndex:10002},className:U(),children:e.jsxs(le,{className:"shadow-2xl border-2 border-blue-500 bg-gradient-to-br from-white to-blue-50",children:[e.jsx(Fe,{className:"pb-4 border-b border-blue-100",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(aa,{className:"h-5 w-5 text-blue-600"})}),e.jsx(Ue,{className:"text-xl",children:R.title})]}),e.jsx(J,{variant:"ghost",size:"icon",className:"h-7 w-7 -mt-1 -mr-2 hover:bg-red-100",onClick:k,children:e.jsx(_s,{className:"h-4 w-4"})})]})}),e.jsxs(ce,{className:"pt-6 space-y-6",children:[e.jsx("p",{className:"text-base text-slate-700 leading-relaxed",children:R.content}),(z||V)&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-50 border border-slate-200 rounded-lg",children:[e.jsx("input",{type:"checkbox",id:"dont-show-again",checked:j,onChange:B=>w(B.target.checked),className:"h-4 w-4 rounded border-gray-300"}),e.jsx("label",{htmlFor:"dont-show-again",className:"text-sm text-slate-700 cursor-pointer",children:"Don't show this tour automatically again"})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-200",children:[e.jsx("div",{className:"flex-shrink-0",children:i>0?e.jsxs(J,{variant:"outline",size:"sm",onClick:M,className:"text-slate-600",children:[e.jsx(Wn,{className:"w-4 h-4 mr-1"}),"Back"]}):e.jsx("div",{className:"w-20"})}),e.jsxs("div",{className:"flex flex-col items-center gap-2 flex-shrink-0",children:[e.jsxs("span",{className:"text-sm font-medium text-slate-600",children:["Step ",i+1," of ",C.length]}),e.jsx("div",{className:"flex gap-1",children:C.map((B,$)=>e.jsx("div",{className:`h-2 w-2 rounded-full transition-colors ${$===i?"bg-blue-600":"bg-slate-300"}`},$))})]}),e.jsx("div",{className:"flex-shrink-0",children:F?e.jsx("div",{className:"w-20"}):e.jsx(J,{size:"sm",onClick:O,className:"bg-blue-600 hover:bg-blue-700",children:V?e.jsxs(e.Fragment,{children:["Finish",e.jsx(js,{className:"w-4 h-4 ml-1"})]}):e.jsxs(e.Fragment,{children:["Next",e.jsx(js,{className:"w-4 h-4 ml-1"})]})})})]})]})]})})})]})}function od({onClick:t}){return e.jsxs(J,{onClick:t,variant:"outline",size:"sm",className:"gap-2 border-purple-200 bg-gradient-to-r from-purple-50 to-blue-50 hover:from-purple-100 hover:to-blue-100",id:"page-tour-button",children:[e.jsx(aa,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-purple-700 font-medium",children:"Page Tour"})]})}function Y_({organizationInfo:t,isFeatureExcluded:s,memberInfo:n,memberRole:r,reloadMemberInfo:a}){var C;const[i,l]=b.useState(""),[o,c]=b.useState("all"),[u,d]=b.useState(!1),[m,h]=b.useState(!1);console.log("[Events] Render - showTour:",u,"tourAutoShow:",m,"shouldShowTours (from memberRole):",r==null?void 0:r.show_tours);const p=(r==null?void 0:r.show_tours)!==!1,g=((C=n==null?void 0:n.page_tours_seen)==null?void 0:C.Events)===!0;console.log("[Events] shouldShowTours:",p,"hasSeenTour:",g),Be.useEffect(()=>{console.log("[Events] Auto-show useEffect - shouldShowTours:",p,"hasSeenTour:",g,"memberInfo:",!!n),p&&!g&&n&&(console.log("[Events] Auto-showing tour"),h(!0),d(!0))},[p,g,n]);const{data:v,isLoading:y}=me({queryKey:["events"],queryFn:()=>X.entities.Event.list("-start_date"),initialData:[]}),j=["all",...new Set(v.map(O=>O.program_tag).filter(Boolean))],w=O=>t!=null&&t.program_ticket_balances&&t.program_ticket_balances[O]||0;let N=v.filter(O=>{var E,R;const M=((E=O.title)==null?void 0:E.toLowerCase().includes(i.toLowerCase()))||((R=O.description)==null?void 0:R.toLowerCase().includes(i.toLowerCase())),k=o==="all"||O.program_tag===o;return M&&k});N.sort((O,M)=>{const k=new Date(O.start_date),E=new Date(M.start_date);return k.getTime()-E.getTime()});const _=async O=>{if(console.log("[Events] updateMemberTourStatus called for:",O),n&&!n.is_team_member)try{const k=(await X.entities.Member.list()).find(E=>E.email===n.email);if(k){const E={...k.page_tours_seen||{},[O]:!0};await X.entities.Member.update(k.id,{page_tours_seen:E});const R={...n,page_tours_seen:E};sessionStorage.setItem("agcas_member",JSON.stringify(R)),console.log("[Events] Tour status updated successfully"),a&&a()}}catch(M){console.error("[Events] Failed to update tour status:",M)}},T=async()=>{console.log("[Events] handleTourComplete called"),d(!1),h(!1)},A=async()=>{console.log("[Events] handleTourDismiss called"),d(!1),h(!1),await _("Events")},P=()=>{console.log("[Events] handleStartTour called - resetting then showing tour"),d(!1),h(!1),setTimeout(()=>{console.log("[Events] Now setting showTour and tourAutoShow to true"),d(!0),h(!0)},10)};return console.log("[Events] Rendering PageTour?",u&&p),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:[u&&p&&e.jsx(ld,{tourGroupName:"Events",viewId:null,onComplete:T,onDismissPermanently:A,autoShow:m}),e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900",children:"Register your tickets"}),p&&e.jsx(od,{onClick:P})]})}),!s("element_EventsSearch")&&e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx(he,{placeholder:"Search events by name or description...",value:i,onChange:O=>l(O.target.value),className:"pl-10"})]}),e.jsx(nre,{programs:j,selectedProgram:o,onProgramChange:c})]})}),y?e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array(6).fill(0).map((O,M)=>e.jsxs(le,{className:"animate-pulse",children:[e.jsx("div",{className:"h-48 bg-slate-200"}),e.jsxs(ce,{className:"p-6",children:[e.jsx("div",{className:"h-4 bg-slate-200 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded w-2/3"})]})]},M))}):e.jsxs(e.Fragment,{children:[t&&o!=="all"&&e.jsxs("div",{className:"flex items-center gap-3 mb-6 p-4 bg-white rounded-lg border border-slate-200",children:[e.jsx(Rs,{className:"w-5 h-5 text-purple-600"}),e.jsxs("span",{className:"font-medium text-slate-700",children:["You have ",w(o)," ",w(o)===1?"ticket":"tickets"," ","available for ",o]})]}),N.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(Ns,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No events found"}),e.jsx("p",{className:"text-slate-600",children:"Try adjusting your search or filters"})]}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map(O=>e.jsx(sre,{event:O,organizationInfo:t,isFeatureExcluded:s},O.id))})]})]})]})}function eI(){const[t,s]=b.useState(""),[n,r]=b.useState(!1),[a,i]=b.useState(""),[l,o]=b.useState(!1),c=async u=>{var d,m;u.preventDefault(),i(""),r(!0),o(!1);try{const h=await X.functions.invoke("sendMagicLink",{email:t});h.data.success?(o(!0),s("")):i(h.data.error||"Unable to send login link")}catch(h){i(((m=(d=h.response)==null?void 0:d.data)==null?void 0:m.error)||"An error occurred. Please try again.")}finally{r(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white rounded-2xl shadow-lg mb-4 p-2",children:e.jsx("img",{src:"https://qtrypzzcjebvfcihiynt.supabase.co/storage/v1/object/public/base44-prod/public/68efc20f3e0a30fafad6dde7/6cfe73a57_agcasRoundall.jpg",alt:"AGCAS",className:"w-full h-full object-contain"})}),e.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"AGCAS Events"}),e.jsx("p",{className:"text-slate-600",children:"Professional Development & Training Portal"})]}),e.jsxs(le,{className:"shadow-xl border-slate-200",children:[e.jsxs(Fe,{className:"space-y-1 pb-4",children:[e.jsx(Ue,{className:"text-2xl font-bold text-center",children:"Member Access"}),e.jsx(Es,{className:"text-center",children:"Enter your AGCAS member email to receive a secure login link"})]}),e.jsxs(ce,{children:[l?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx(Jn,{className:"w-5 h-5 text-green-600 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-green-900 mb-1",children:"Check your email!"}),e.jsx("p",{className:"text-sm text-green-700",children:"We've sent a secure login link to your email address. Click the link to access the portal."}),e.jsx("p",{className:"text-xs text-green-600 mt-2",children:"The link will expire in 30 minutes."})]})]}),e.jsx(J,{variant:"outline",onClick:()=>o(!1),className:"w-full",children:"Send another link"})]}):e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"email",className:"text-sm font-medium text-slate-700",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ms,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx(he,{id:"email",type:"email",placeholder:"your.email@institution.ac.uk",value:t,onChange:u=>s(u.target.value),className:"pl-10",required:!0,disabled:n})]})]}),a&&e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx(vs,{className:"w-5 h-5 text-red-600 shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-800",children:a})]}),e.jsx(J,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending..."]}):"Send Login Link"})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-slate-200",children:e.jsx("p",{className:"text-xs text-slate-500 text-center",children:"Only AGCAS members can access this portal. If you're having trouble logging in, please contact your membership administrator."})})]})]}),e.jsxs("p",{className:"text-center text-sm text-slate-500 mt-6",children:[" ",new Date().getFullYear()," AGCAS. All rights reserved."]})]})})}function tI(){const[t,s]=b.useState(!1),[n,r]=b.useState(!1),[a,i]=b.useState(!1),[l,o]=b.useState(!1),[c,u]=b.useState(null),[d,m]=b.useState(null),[h,p]=b.useState(null),[g,v]=b.useState(null),{data:y}=me({queryKey:["zoho-tokens"],queryFn:()=>X.entities.ZohoToken.list(),initialData:[]}),{data:j}=me({queryKey:["xero-tokens"],queryFn:()=>X.entities.XeroToken.list(),initialData:[]}),w=y.length>0,N=j.length>0,_=async()=>{s(!0);try{const C=await X.functions.invoke("getZohoAuthUrl"),{authUrl:O}=C.data,M=window.open(O,"ZohoAuth","width=600,height=700");p(M);const k=setInterval(()=>{M.closed&&(clearInterval(k),p(null),s(!1),window.location.reload())},1e3)}catch(C){console.error("Auth error:",C),s(!1)}},T=async()=>{var C,O,M;i(!0),m(null);try{const k=await X.functions.invoke("testFunction",{accessToken:y.length>0?y[0].access_token:null});m(k.data)}catch(k){m({success:!1,error:((O=(C=k.response)==null?void 0:C.data)==null?void 0:O.error)||k.message,fullError:JSON.stringify(((M=k.response)==null?void 0:M.data)||k,null,2)})}finally{i(!1)}},A=async()=>{var C,O;r(!0),u(null);try{const M=await X.functions.invoke("syncBackstageEvents",{accessToken:y[0].access_token});u(M.data)}catch(M){u({success:!1,error:((O=(C=M.response)==null?void 0:C.data)==null?void 0:O.error)||M.message})}finally{r(!1)}},P=async()=>{o(!0);try{const C=await X.functions.invoke("getXeroAuthUrl"),{authUrl:O}=C.data,M=window.open(O,"XeroAuth","width=600,height=700");v(M);const k=setInterval(()=>{M.closed&&(clearInterval(k),v(null),o(!1),window.location.reload())},1e3)}catch(C){console.error("Xero auth error:",C),o(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-2xl shadow-lg mb-4",children:e.jsx(In,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Admin Setup"}),e.jsx("p",{className:"text-slate-600",children:"Configure Zoho and Xero integrations for AGCAS Events"})," "]}),e.jsxs(le,{className:"shadow-xl border-slate-200 mb-6",children:[e.jsxs(Fe,{children:[e.jsx(Ue,{children:"Test Function"}),e.jsx(Es,{children:"Test that backend functions are working correctly"})]}),e.jsxs(ce,{className:"space-y-4",children:[d&&e.jsx("div",{className:`flex items-start gap-3 p-4 rounded-lg border ${d.success?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:d.success?e.jsxs(e.Fragment,{children:[e.jsx(Jn,{className:"w-5 h-5 text-green-600 shrink-0 mt-0.5"}),e.jsxs("div",{className:"w-full",children:[e.jsx("h3",{className:"font-semibold text-green-900 mb-1",children:"Test Successful"}),e.jsx("p",{className:"text-sm text-green-700",children:d.message}),d.backstageDomain&&e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Domain: ",d.backstageDomain]}),d.portalName&&e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Portal: ",d.portalName]}),d.constructedUrl&&e.jsxs("p",{className:"text-xs text-green-600 mt-1 break-all",children:["URL: ",d.constructedUrl]}),d.accessTokenPrefix&&e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Token: ",d.accessTokenPrefix]}),d.statusCode&&e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Status: ",d.statusCode]}),d.eventCount!==void 0&&e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Events: ",d.eventCount]}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:d.timestamp})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(Js,{className:"w-5 h-5 text-red-600 shrink-0 mt-0.5"}),e.jsxs("div",{className:"w-full",children:[e.jsx("h3",{className:"font-semibold text-red-900 mb-1",children:"Test Failed"}),e.jsx("p",{className:"text-sm text-red-700",children:d.error}),d.fullError&&e.jsx("pre",{className:"text-xs text-red-600 mt-2 overflow-auto max-h-40 bg-red-100 p-2 rounded",children:d.fullError})]})]})}),e.jsx(J,{onClick:T,disabled:a,className:"w-full",size:"lg",children:a?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-5 h-5 mr-2 animate-spin"}),"Testing..."]}):"Run Test Function"})]})]}),e.jsxs(le,{className:"shadow-xl border-slate-200 mb-6",children:[e.jsxs(Fe,{children:[e.jsx(Ue,{children:"Zoho Authentication"}),e.jsx(Es,{children:"Connect your Zoho CRM and Backstage accounts to sync members and events"})]}),e.jsxs(ce,{className:"space-y-6",children:[w?e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx(Jn,{className:"w-5 h-5 text-green-600 shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-green-900 mb-1",children:" Connected"}),e.jsx("p",{className:"text-sm text-green-700",children:"Your Zoho account is connected and ready to sync data."}),e.jsxs("p",{className:"text-xs text-green-600 mt-2",children:["Last updated: ",new Date(y[0].expires_at).toLocaleString()]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-amber-800",children:[e.jsx("strong",{children:" Authentication Required"}),e.jsx("br",{}),"You need to authenticate with Zoho before members can access the portal."]})}),e.jsxs("div",{className:"space-y-2 text-sm text-slate-600",children:[e.jsx("p",{children:e.jsx("strong",{children:"This will allow the app to:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[e.jsx("li",{children:"Search and validate member contacts in Zoho CRM"}),e.jsx("li",{children:"Access organization and account information"}),e.jsx("li",{children:"Sync events from Zoho Backstage"}),e.jsx("li",{children:"Create registrations and manage bookings"})]})]})]}),e.jsx(J,{onClick:_,disabled:t,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",size:"lg",children:t?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-5 h-5 mr-2 animate-spin"}),"Authenticating..."]}):w?e.jsxs(e.Fragment,{children:[e.jsx(Js,{className:"w-5 h-5 mr-2"}),"Re-authenticate with Zoho"]}):e.jsxs(e.Fragment,{children:[e.jsx(Js,{className:"w-5 h-5 mr-2"}),"Authenticate with Zoho"]})}),w&&e.jsx("div",{className:"pt-4 border-t border-slate-200",children:e.jsx("p",{className:"text-xs text-slate-500 text-center",children:"The app will automatically refresh tokens as needed. Re-authenticate only if you experience issues."})})]})]}),e.jsxs(le,{className:"shadow-xl border-slate-200 mb-6",children:[e.jsxs(Fe,{children:[e.jsx(Ue,{children:"Xero Authentication"}),e.jsx(Es,{children:"Connect your Xero account to automatically create invoices for account charges"})]}),e.jsxs(ce,{className:"space-y-6",children:[N?e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx(Jn,{className:"w-5 h-5 text-green-600 shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-green-900 mb-1",children:" Connected"}),e.jsx("p",{className:"text-sm text-green-700",children:"Your Xero account is connected and ready to create invoices."}),j[0]&&j[0].expires_at&&e.jsxs("p",{className:"text-xs text-green-600 mt-2",children:["Last updated: ",new Date(j[0].expires_at).toLocaleString()]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-amber-800",children:[e.jsx("strong",{children:" Authentication Required"}),e.jsx("br",{}),"Connect to Xero to enable automatic invoice creation for account charges."]})}),e.jsxs("div",{className:"space-y-2 text-sm text-slate-600",children:[e.jsx("p",{children:e.jsx("strong",{children:"This will allow the app to:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[e.jsx("li",{children:"Create invoices in your Xero account"}),e.jsx("li",{children:"Access contact information for billing"}),e.jsx("li",{children:"Track invoice status and payments"})]})]})]}),e.jsx(J,{onClick:P,disabled:l,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",size:"lg",children:l?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-5 h-5 mr-2 animate-spin"}),"Authenticating..."]}):N?e.jsxs(e.Fragment,{children:[e.jsx(Js,{className:"w-5 h-5 mr-2"}),"Re-authenticate with Xero"]}):e.jsxs(e.Fragment,{children:[e.jsx(Js,{className:"w-5 h-5 mr-2"}),"Authenticate with Xero"]})}),N&&e.jsx("div",{className:"pt-4 border-t border-slate-200",children:e.jsx("p",{className:"text-xs text-slate-500 text-center",children:"The app will automatically refresh tokens as needed. Re-authenticate only if you experience issues."})})]})]}),w&&e.jsxs(le,{className:"shadow-xl border-slate-200",children:[e.jsxs(Fe,{children:[e.jsxs(Ue,{className:"flex items-center gap-2",children:[e.jsx(Ns,{className:"w-5 h-5"}),"Backstage Event Sync"]}),e.jsx(Es,{children:"Sync events from Zoho Backstage to make them available in the portal"})]}),e.jsxs(ce,{className:"space-y-4",children:[c&&e.jsx("div",{className:`flex items-start gap-3 p-4 rounded-lg border ${c.success?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:c.success?e.jsxs(e.Fragment,{children:[e.jsx(Jn,{className:"w-5 h-5 text-green-600 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-green-900 mb-1",children:"Sync Complete"}),e.jsxs("p",{className:"text-sm text-green-700",children:["Successfully synced ",c.synced," of ",c.total," events",c.errors>0&&` (${c.errors} errors)`]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(Js,{className:"w-5 h-5 text-red-600 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-900 mb-1",children:"Sync Failed"}),e.jsx("p",{className:"text-sm text-red-700",children:c.error})]})]})}),e.jsx(J,{onClick:A,disabled:n,className:"w-full",size:"lg",children:n?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-5 h-5 mr-2 animate-spin"}),"Syncing Events..."]}):e.jsxs(e.Fragment,{children:[e.jsx(og,{className:"w-5 h-5 mr-2"}),"Sync Events from Backstage"]})}),e.jsx("p",{className:"text-xs text-slate-500",children:"This will fetch all events from Backstage and update the portal. Existing events will be updated with latest information."})]})]})]})})}var iv="Switch",[Ioe]=vr(iv),[Boe,qoe]=Ioe(iv),sI=b.forwardRef((t,s)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:i,required:l,disabled:o,value:c="on",onCheckedChange:u,form:d,...m}=t,[h,p]=b.useState(null),g=xs(s,N=>p(N)),v=b.useRef(!1),y=h?d||!!h.closest("form"):!0,[j,w]=Ja({prop:a,defaultProp:i??!1,onChange:u,caller:iv});return e.jsxs(Boe,{scope:n,checked:j,disabled:o,children:[e.jsx(Ut.button,{type:"button",role:"switch","aria-checked":j,"aria-required":l,"data-state":iI(j),"data-disabled":o?"":void 0,disabled:o,value:c,...m,ref:g,onClick:jt(t.onClick,N=>{w(_=>!_),y&&(v.current=N.isPropagationStopped(),v.current||N.stopPropagation())})}),y&&e.jsx(aI,{control:h,bubbles:!v.current,name:r,value:c,checked:j,required:l,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});sI.displayName=iv;var nI="SwitchThumb",rI=b.forwardRef((t,s)=>{const{__scopeSwitch:n,...r}=t,a=qoe(nI,n);return e.jsx(Ut.span,{"data-state":iI(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:s})});rI.displayName=nI;var zoe="SwitchBubbleInput",aI=b.forwardRef(({__scopeSwitch:t,control:s,checked:n,bubbles:r=!0,...a},i)=>{const l=b.useRef(null),o=xs(l,i),c=K0(n),u=B0(s);return b.useEffect(()=>{const d=l.current;if(!d)return;const m=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==n&&p){const g=new Event("click",{bubbles:r});p.call(d,n),d.dispatchEvent(g)}},[c,n,r]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:o,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});aI.displayName=zoe;function iI(t){return t?"checked":"unchecked"}var lI=sI,$oe=rI;const cs=b.forwardRef(({className:t,...s},n)=>e.jsx(lI,{className:tt("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...s,ref:n,children:e.jsx($oe,{className:tt("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));cs.displayName=lI.displayName;function Uoe({attendees:t,onUpdate:s,onRemove:n,onAdd:r,memberInfo:a}){const[i,l]=b.useState({}),o=async(p,g)=>{if(!g||!g.includes("@")){s(p,"isValid",null),s(p,"validationStatus",null),s(p,"validationMessage",null);return}l(v=>({...v,[p]:!0}));try{const v=await X.functions.invoke("validateColleague",{email:g,memberEmail:a.email,organizationId:a.organization_id});v.data.valid?(s(p,"isValid",!0),s(p,"validationStatus",v.data.status),s(p,"validationMessage",v.data.message),v.data.first_name&&(s(p,"first_name",v.data.first_name),s(p,"last_name",v.data.last_name))):(s(p,"isValid",!0),s(p,"validationStatus",v.data.status),s(p,"validationMessage",v.data.error||"Could not verify. Please enter attendee details."))}catch(v){console.error("Validation error:",v),s(p,"isValid",!0),s(p,"validationStatus","external"),s(p,"validationMessage","Could not verify email. Please enter attendee details manually.")}finally{l(v=>({...v,[p]:!1}))}},c=(p,g)=>{t[p].isSelf||o(p,g)},u=p=>{if(p.isSelf)return"border-blue-200 bg-blue-50";switch(p.validationStatus){case"registered":return"border-green-200 bg-green-50";case"unregistered_domain_match":return"border-blue-200 bg-blue-50";case"external":return"border-amber-200 bg-amber-50";case"wrong_organization":case"error":return"border-red-200 bg-red-50";default:return"border-slate-200 bg-white"}},d=p=>{if(i[t.indexOf(p)])return e.jsx(vt,{className:"w-4 h-4 animate-spin text-slate-400"});switch(p.validationStatus){case"registered":return e.jsx(Jn,{className:"w-4 h-4 text-green-600"});case"unregistered_domain_match":return e.jsx(PE,{className:"w-4 h-4 text-blue-600"});case"external":return e.jsx(PE,{className:"w-4 h-4 text-amber-600"});case"wrong_organization":case"error":return e.jsx(vs,{className:"w-4 h-4 text-red-600"});default:return null}},m=p=>{switch(p){case"registered":return"text-green-700";case"unregistered_domain_match":return"text-blue-700";case"external":return"text-amber-700";case"wrong_organization":case"error":return"text-red-600";default:return"text-slate-600"}},h=p=>!p.isSelf&&(p.validationStatus==="unregistered_domain_match"||p.validationStatus==="external"||p.validationStatus==="wrong_organization");return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map((p,g)=>e.jsx("div",{className:`p-4 rounded-lg border ${u(p)}`,children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(he,{placeholder:"Email address",type:"email",value:p.email,onChange:v=>s(g,"email",v.target.value),onBlur:v=>c(g,v.target.value),disabled:p.isSelf,className:p.isSelf?"bg-blue-50":""}),!p.isSelf&&e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:d(p)})]}),h(p)&&e.jsxs("div",{className:"space-y-2 pt-2 border-t border-slate-200",children:[e.jsx("p",{className:"text-xs font-medium text-slate-700",children:"Attendee Details Required"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(he,{placeholder:"First Name *",value:p.first_name||"",onChange:v=>s(g,"first_name",v.target.value),className:"text-sm",required:!0}),e.jsx(he,{placeholder:"Last Name *",value:p.last_name||"",onChange:v=>s(g,"last_name",v.target.value),className:"text-sm",required:!0})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!p.isSelf&&e.jsx(J,{variant:"ghost",size:"icon",onClick:()=>n(g),className:"text-red-600 hover:text-red-700 hover:bg-red-50 h-8 w-8 shrink-0",children:e.jsx(os,{className:"w-4 h-4"})}),p.isSelf&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-600",children:[e.jsx(Xs,{className:"w-4 h-4"}),e.jsx("span",{children:"This is you"})]}),!p.isSelf&&p.validationStatus==="registered"&&p.first_name&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-700",children:[e.jsx(Xs,{className:"w-4 h-4"}),e.jsxs("span",{children:[p.first_name," ",p.last_name]})]}),!p.isSelf&&p.validationMessage&&!(p.validationStatus==="registered"&&p.first_name)&&e.jsxs("p",{className:`text-xs flex items-start gap-1 flex-1 ${m(p.validationStatus)}`,children:[d(p),e.jsx("span",{className:"flex-1",children:p.validationMessage})]})]})]})},g))})}function Voe({totalCost:t,memberInfo:s,organizationInfo:n,attendees:r,numberOfLinks:a,event:i,submitting:l,setSubmitting:o,registrationMode:c,refreshOrganizationInfo:u}){const d=c==="links"?a:r.filter(g=>g.isValid).length,m=i.program_tag&&(n!=null&&n.program_ticket_balances)&&n.program_ticket_balances[i.program_tag]||0,h=m>=d,p=async()=>{var g,v;if((c==="colleagues"||c==="self")&&r.filter(j=>!j.isSelf&&(j.validationStatus==="unregistered_domain_match"||j.validationStatus==="external")&&(!j.first_name||!j.last_name)).length>0){te.error("Please provide first and last names for all attendees");return}if(!h){te.error("Insufficient program tickets. Please purchase more tickets first.");return}if(c==="colleagues"&&r.some(y=>!y.isValid)){te.error("Please remove or fix invalid attendee emails");return}if(d===0){te.error("Please add at least one attendee or specify number of links");return}o(!0);try{const y=await X.functions.invoke("createBooking",{eventId:i.id,memberEmail:s.email,attendees:c==="colleagues"||c==="self"?r.filter(j=>j.isValid):[],registrationMode:c,numberOfLinks:c==="links"?a:0,ticketsRequired:d,programTag:i.program_tag});y.data.success?(sessionStorage.removeItem(`event_registration_${i.id}`),u&&u(),te.success("Booking confirmed!"),setTimeout(()=>{window.location.href=Pe("MyBookings")},1500)):te.error(y.data.error||"Failed to create booking")}catch(y){te.error(((v=(g=y.response)==null?void 0:g.data)==null?void 0:v.error)||"Failed to create booking")}finally{o(!1)}};return e.jsxs(le,{className:"border-slate-200 shadow-lg sticky top-8",children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsx(Ue,{className:"text-xl",children:"Booking Summary"})}),e.jsxs(ce,{className:"pt-6 space-y-6",children:[i.program_tag?e.jsxs("div",{className:"p-4 rounded-lg border-2 border-purple-200 bg-purple-50",id:"booking-summary-tickets",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Rs,{className:"w-5 h-5 text-purple-600"}),e.jsx("h3",{className:"font-semibold text-purple-900",children:"unpacked tickets"})]}),e.jsxs("span",{className:"text-xs text-purple-600",children:["Available: ",m]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-purple-700",children:"Tickets Required:"}),e.jsx("span",{className:"font-bold text-purple-900",children:d})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-purple-700",children:"Tickets Available:"}),e.jsx("span",{className:"font-bold text-purple-900",children:m})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm pt-2 border-t border-purple-200",children:[e.jsx("span",{className:"text-purple-700",children:"Remaining After Booking:"}),e.jsx("span",{className:`font-bold ${h?"text-green-600":"text-red-600"}`,children:Math.max(0,m-d)})]})]}),!h&&e.jsx("div",{className:"mt-3 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(vs,{className:"w-4 h-4 text-amber-600 mt-0.5 shrink-0"}),e.jsxs("div",{className:"text-xs text-amber-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Insufficient tickets"}),e.jsxs("p",{children:["You need ",d-m," more ",i.program_tag," ticket",d-m>1?"s":""," to complete this booking."]})]})]})})]}):e.jsx("div",{className:"p-4 rounded-lg border-2 border-amber-200 bg-amber-50",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(vs,{className:"w-5 h-5 text-amber-600 shrink-0"}),e.jsxs("div",{className:"text-sm text-amber-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"No Program Required"}),e.jsx("p",{children:"This event is not associated with a program and cannot be booked through this system."})]})]})}),!h&&i.program_tag&&e.jsxs(J,{variant:"outline",className:"w-full",onClick:()=>window.location.href=Pe("BuyProgramTickets"),children:[e.jsx(Rs,{className:"w-4 h-4 mr-2"}),"Buy ",i.program_tag," Tickets"]}),e.jsx(J,{id:"confirm-booking-button",onClick:p,disabled:!h||!i.program_tag||l||d===0,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",size:"lg",children:l?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-5 h-5 mr-2 animate-spin"}),"Processing..."]}):"Confirm Booking"}),d===0&&c==="colleagues"&&e.jsx("p",{className:"text-xs text-center text-slate-500",children:"Add attendees to proceed with booking"})]})]})}function Woe({mode:t,onModeChange:s,isFeatureExcluded:n}){const a=[{id:"self",icon:Xs,title:"Self Register",description:"Register yourself only",featureId:"element_SelfRegistration"},{id:"colleagues",icon:ws,title:"Register Attendees",description:"Register your attendee(s) now"}].filter(i=>i.featureId&&n?!n(i.featureId):!0);return e.jsx("div",{className:"grid grid-cols-1 gap-4",children:a.map(i=>{const l=i.icon,o=t===i.id;return e.jsx("button",{onClick:()=>s(i.id),className:"text-left",children:e.jsx(le,{className:`border-2 transition-all cursor-pointer hover:shadow-md ${o?"border-green-600 bg-green-50":"border-slate-200 hover:border-slate-300"}`,children:e.jsx(ce,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${o?"bg-green-600 text-white":"bg-slate-100 text-slate-600"}`,children:e.jsx(l,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`font-semibold mb-1 ${o?"text-green-900":"text-slate-900"}`,children:i.title}),e.jsx("p",{className:`text-sm ${o?"text-green-700":"text-slate-600"}`,children:i.description})]})]})})})},i.id)})})}function Hoe({organizationId:t,onSelect:s,memberInfo:n}){const[r,a]=b.useState(""),[i,l]=b.useState([]),[o,c]=b.useState(!1),[u,d]=b.useState(!1),[m,h]=b.useState(!1),[p,g]=b.useState(""),[v,y]=b.useState(!1),[j,w]=b.useState(!1),[N,_]=b.useState(!1),[T,A]=b.useState(null);b.useEffect(()=>{t&&(async()=>{try{const F=(await X.entities.Organization.list()).find(V=>V.id===t||V.zoho_account_id===t);if(console.log("Looking for organization with ID:",t),console.log("Found organization:",F),console.log("Base44 Org ID:",F==null?void 0:F.id),console.log("Contacts synced at:",F==null?void 0:F.contacts_synced_at),!F){console.error("Organization not found");return}A(F.id),!F.contacts_synced_at||Qse(new Date,new Date(F.contacts_synced_at))>15?(console.log("Contacts need syncing (never synced or older than 15 minutes)"),await P(t)):(console.log("Contacts are up to date, loading from database"),_(!0),C(F.id))}catch(R){console.error("Failed to check org sync status:",R)}})()},[t]);const P=async E=>{d(!0);try{console.log("Triggering sync for organization:",E);const R=await X.functions.invoke("syncOrganizationContacts",{organizationId:E});if(console.log("Sync response:",R.data),R.data.success){_(!0);const z=(await X.entities.Organization.list()).find(V=>V.zoho_account_id===E);z&&(A(z.id),await C(z.id))}}catch(R){console.error("Sync failed:",R)}finally{d(!1)}},C=async E=>{c(!0);try{console.log("Loading contacts for Base44 organization ID:",E);const R=await X.entities.OrganizationContact.filter({organization_id:E,is_active:!0});console.log("Loaded contacts:",R.length),console.log("Sample contact:",R[0]),l(R)}catch(R){console.error("Failed to load contacts:",R)}finally{c(!1)}},O=i.filter(E=>{var U,B,$;if(!r)return!1;const R=r.toLowerCase(),F=(U=E.first_name)==null?void 0:U.toLowerCase().includes(R),z=(B=E.last_name)==null?void 0:B.toLowerCase().includes(R),V=($=E.email)==null?void 0:$.toLowerCase().includes(R);return F||z||V}),M=E=>{s({email:E.email,first_name:E.first_name,last_name:E.last_name,zoho_contact_id:E.zoho_contact_id,isValid:!0,validationStatus:"registered"}),a(""),w(!1)},k=async()=>{if(!(!p||!p.includes("@"))){y(!0);try{const E=await X.functions.invoke("validateColleague",{email:p,memberEmail:n.email,organizationId:t});E.data.valid?s({email:p,first_name:E.data.first_name||"",last_name:E.data.last_name||"",zoho_contact_id:E.data.zoho_contact_id,isValid:!0,validationStatus:E.data.status,validationMessage:E.data.message}):s({email:p,first_name:"",last_name:"",isValid:!1,validationStatus:E.data.status,validationMessage:E.data.error}),g(""),h(!1)}catch{s({email:p,first_name:"",last_name:"",isValid:!1,validationStatus:"error",validationMessage:"Validation failed"}),g(""),h(!1)}finally{y(!1)}}};return u?e.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50 text-center",children:[e.jsx(vt,{className:"w-6 h-6 animate-spin text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Syncing organization contacts..."}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"This may take a moment"})]}):m?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(he,{placeholder:"Enter email address",type:"email",value:p,onChange:E=>g(E.target.value),onKeyPress:E=>E.key==="Enter"&&k(),disabled:v,autoFocus:!0}),e.jsx(J,{onClick:k,size:"sm",disabled:v,children:v?e.jsx(vt,{className:"w-4 h-4 animate-spin"}):"Add"})]}),e.jsx(J,{variant:"ghost",size:"sm",onClick:()=>h(!1),className:"text-xs",disabled:v,children:" Back to search"})]}):e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx(he,{placeholder:"Search by name or email...",value:r,onChange:E=>{a(E.target.value),w(E.target.value.length>0)},onFocus:()=>r&&w(!0),className:"pl-10",disabled:o})]}),j&&r&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:o?e.jsxs("div",{className:"p-4 text-center text-slate-500",children:[e.jsx(vt,{className:"w-4 h-4 animate-spin mx-auto mb-1"}),e.jsx("p",{className:"text-sm",children:"Loading..."})]}):O.length>0?e.jsxs(e.Fragment,{children:[O.map(E=>e.jsxs("button",{onClick:()=>M(E),className:"w-full px-4 py-3 text-left hover:bg-slate-50 border-b border-slate-100 last:border-0 transition-colors",children:[e.jsxs("div",{className:"font-medium text-slate-900",children:[E.first_name," ",E.last_name]}),e.jsx("div",{className:"text-sm text-slate-500",children:E.email})]},E.id)),e.jsx("button",{onClick:()=>{h(!0),w(!1)},className:"w-full px-4 py-3 text-left hover:bg-blue-50 border-t border-slate-200 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-600",children:[e.jsx(Ms,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Can't find them? Enter email manually"})]})})]}):e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"text-sm text-slate-500 mb-3",children:"No matches found"}),e.jsx("button",{onClick:()=>{h(!0),w(!1)},className:"w-full px-4 py-2 text-left bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-600",children:[e.jsx(Ms,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Enter email manually"})]})})]})})]})}function oI({memberInfo:t,organizationInfo:s,refreshOrganizationInfo:n,isFeatureExcluded:r,memberRole:a,reloadMemberInfo:i}){var je;const[l,o]=b.useState(null),[c,u]=b.useState(!1),[d,m]=b.useState(!1),h=t||l,[p,g]=b.useState([]),[v,y]=b.useState(!1),[j,w]=b.useState("colleagues"),[N,_]=b.useState(!1),[T,A]=b.useState(!1),P=b.useRef(null),O=new URLSearchParams(window.location.search).get("id"),M=(a==null?void 0:a.show_tours)!==!1,k=((je=h==null?void 0:h.page_tours_seen)==null?void 0:je.EventDetails)===!0;Be.useEffect(()=>{M&&!k&&h&&(m(!0),u(!0))},[M,k,h]);const E=Be.useMemo(()=>{const qe=[{id:"self",icon:"User",title:"Self Register",description:"Register yourself only",featureId:"element_SelfRegistration"},{id:"colleagues",icon:"Users",title:"Register Attendees",description:"Register your attendee(s) now"}].filter(ze=>ze.featureId&&r?!r(ze.featureId):!0);return console.log("[EventDetails] Available registration modes:",qe.map(ze=>ze.id)),qe},[r]);b.useEffect(()=>{if(!t){const we=sessionStorage.getItem("agcas_member");o(we?JSON.parse(we):null)}},[t]),b.useEffect(()=>{if(console.log("[EventDetails] Initialization useEffect - hasInitialized.current:",P.current,"eventId:",O),P.current===O){console.log("[EventDetails] Already initialized for this eventId, skipping initialization");return}if(console.log("[EventDetails] Running initialization logic"),P.current=O,h){if(O){const we=sessionStorage.getItem(`event_registration_${O}`);if(console.log("[EventDetails] Saved registration in sessionStorage:",we?"exists":"not found"),we){let{attendees:qe,registrationMode:ze,memberAttending:Ee}=JSON.parse(we);console.log("[EventDetails] Loaded saved registration - mode:",ze,"attendees:",qe.length);const Ce=E.some(Ge=>Ge.id===ze);if(console.log('[EventDetails] Is saved mode "'+ze+'" still available?',Ce),!Ce){console.log("[EventDetails] Saved mode is no longer available - resetting to defaults"),sessionStorage.removeItem(`event_registration_${O}`);let Ge,Ye=!1,De=[],it=!1;const Se=E.find(_e=>_e.id==="colleagues"),at=E.find(_e=>_e.id==="self");Se?(Ge="colleagues",it=!0):at?(Ge="self",Ye=!0,De=[{email:h.email||"",first_name:h.first_name||"",last_name:h.last_name||"",isValid:!0,isSelf:!0}]):(Ge=E.length>0?E[0].id:"colleagues",Ge==="colleagues"&&(it=!0)),w(Ge),_(Ye),g(De),A(it);return}ze==="links"&&(ze="self",Ee=!0,qe=[{email:h.email||"",first_name:h.first_name||"",last_name:h.last_name||"",isValid:!0,isSelf:!0}],console.log("[EventDetails] Converted links mode to self mode")),g(qe),w(ze),_(Ee!==void 0?Ee:!1),ze==="colleagues"&&qe.length===0?A(!0):A(!1)}else{console.log("[EventDetails] No saved registration - initializing defaults");let qe,ze=!1,Ee=[],Ce=!1;const Ge=E.find(De=>De.id==="colleagues"),Ye=E.find(De=>De.id==="self");Ge?(qe="colleagues",Ce=!0):Ye?(qe="self",ze=!0,Ee=[{email:h.email||"",first_name:h.first_name||"",last_name:h.last_name||"",isValid:!0,isSelf:!0}]):(qe=E.length>0?E[0].id:"colleagues",qe==="colleagues"&&(Ce=!0)),w(qe),_(ze),g(Ee),A(Ce)}}}else{console.log("[EventDetails] No memberInfo - setting up for unauthenticated user"),g([]);const qe=E.find(ze=>ze.id==="colleagues")?"colleagues":E.length>0?E[0].id:"colleagues";w(qe),_(!1),A(qe==="colleagues")}},[O]),b.useEffect(()=>{if(O&&h&&P.current===O){const we={attendees:p,registrationMode:j,memberAttending:N};sessionStorage.setItem(`event_registration_${O}`,JSON.stringify(we))}},[p,j,N,O,h]);const{data:R,isLoading:F}=me({queryKey:["event",O],queryFn:async()=>(await X.entities.Event.list()).find(qe=>qe.id===O),enabled:!!O}),z=we=>{g(p.filter((qe,ze)=>ze!==we))},V=(we,qe,ze)=>{const Ee=[...p];Ee[we][qe]=ze,g(Ee)},U=we=>{g([...p,{...we,isValid:!0,isSelf:!1}]),A(!1)},B=we=>{w(we),A(!1),h?we==="self"?(g([{email:h.email||"",first_name:h.first_name||"",last_name:h.last_name||"",isValid:!0,isSelf:!0}]),_(!0)):we==="colleagues"&&(g([]),_(!1),A(!0)):(g([]),_(!1),we==="colleagues"&&A(!0))},$=()=>{if(!h)return;const we=!N;if(_(we),we){const qe={email:h.email||"",first_name:h.first_name||"",last_name:h.last_name||"",isValid:!0,isSelf:!0};if(!p.some(ze=>ze.isSelf))g([qe,...p]);else{const ze=p.filter(Ee=>!Ee.isSelf);g([qe,...ze])}}else g(p.filter(qe=>!qe.isSelf))},L=async()=>{u(!1),m(!1)},I=async()=>{u(!1),m(!1),await q("EventDetails")},W=()=>{u(!1),m(!1),setTimeout(()=>{u(!0),m(!0)},10)},q=async we=>{if(h&&!h.is_team_member)try{const ze=(await X.entities.Member.list()).find(Ee=>Ee.email===h.email);if(ze){const Ee={...ze.page_tours_seen||{},[we]:!0};await X.entities.Member.update(ze.id,{page_tours_seen:Ee});const Ce={...h,page_tours_seen:Ee};sessionStorage.setItem("agcas_member",JSON.stringify(Ce)),i&&i()}}catch(qe){console.error("Failed to update tour status:",qe)}};if(F)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-slate-600",children:"Loading event..."})});if(!R)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center py-16",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Event not found"}),e.jsx(Ht,{to:Pe("Events"),children:e.jsx(J,{children:"Back to Events"})})]})});const Z=R.start_date?new Date(R.start_date):null,Q=R.end_date?new Date(R.end_date):null,Y=R.available_seats===0||R.available_seats===null,K=p.filter(we=>we.isValid).length*(R.ticket_price||0),ae=j==="links"?0:p.filter(we=>we.isValid).length,se=R.program_tag&&(s!=null&&s.program_ticket_balances)&&s.program_ticket_balances[R.program_tag]||0,de=se>=ae,ue=de&&R.program_tag&&!v&&ae>0,oe=!r||!r("element_AvailableSeatsDisplay"),pe=async()=>{var we,qe;if((j==="colleagues"||j==="self")&&p.filter(Ee=>!Ee.isSelf&&(Ee.validationStatus==="unregistered_domain_match"||Ee.validationStatus==="external")&&(!Ee.first_name||!Ee.last_name)).length>0){te.error("Please provide first and last names for all attendees");return}if(!de){te.error("Insufficient program tickets. Please purchase more tickets first.");return}if(j==="colleagues"&&p.some(ze=>!ze.isValid)){te.error("Please remove or fix invalid attendee emails");return}if(ae===0){te.error("Please add at least one attendee or specify number of links");return}y(!0);try{const ze=await X.functions.invoke("createBooking",{eventId:R.id,memberEmail:h.email,attendees:j==="colleagues"||j==="self"?p.filter(Ee=>Ee.isValid):[],registrationMode:j,numberOfLinks:0,ticketsRequired:ae,programTag:R.program_tag});ze.data.success?(sessionStorage.removeItem(`event_registration_${R.id}`),n&&n(),te.success("Booking confirmed!"),setTimeout(()=>{window.location.href=Pe("Bookings")},1500)):te.error(ze.data.error||"Failed to create booking")}catch(ze){te.error(((qe=(we=ze.response)==null?void 0:we.data)==null?void 0:qe.error)||"Failed to create booking")}finally{y(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:[c&&M&&e.jsx(ld,{tourGroupName:"EventDetails",viewId:null,onComplete:L,onDismissPermanently:I,autoShow:d}),e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs(Ht,{to:Pe("Events"),className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900",children:[e.jsx(ll,{className:"w-4 h-4"}),"Back to Events"]}),M&&e.jsx(od,{onClick:W})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8 mb-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[R.image_url&&e.jsx("div",{className:"rounded-xl overflow-hidden shadow-lg",children:e.jsx("img",{src:R.image_url,alt:R.title,className:"w-full h-64 object-cover"})}),e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsxs(Fe,{children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:R.title}),R.program_tag&&e.jsx(ye,{className:"bg-blue-100 text-blue-700 border-blue-200 shrink-0",children:R.program_tag})]}),e.jsxs("div",{className:"space-y-3 pt-4",children:[Z&&e.jsxs("div",{className:"flex items-center gap-3 text-slate-700",children:[e.jsx(Ns,{className:"w-5 h-5 text-slate-400"}),e.jsx("span",{className:"font-medium",children:Mt(Z,"EEEE, MMMM d, yyyy")}),Q&&Z.getTime()!==Q.getTime()&&e.jsxs("span",{className:"text-slate-500",children:["- ",Mt(Q,"MMMM d, yyyy")]})]}),Z&&e.jsxs("div",{className:"flex items-center gap-3 text-slate-700",children:[e.jsx(tn,{className:"w-5 h-5 text-slate-400"}),e.jsx("span",{children:Mt(Z,"h:mm a")}),Q&&e.jsxs("span",{className:"text-slate-500",children:["- ",Mt(Q,"h:mm a")]})]}),R.location&&e.jsxs("div",{className:"flex items-center gap-3 text-slate-700",children:[e.jsx(Rr,{className:"w-5 h-5 text-slate-400"}),e.jsx("span",{children:R.location})]}),oe&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ws,{className:"w-5 h-5 text-slate-400"}),Y?e.jsx("span",{className:"text-green-600 font-medium",children:"Open Registration - No Capacity Limit"}):R.available_seats!==void 0&&R.available_seats>0?e.jsxs("span",{className:"text-green-600 font-medium",children:[R.available_seats," seats available"]}):R.available_seats!==void 0?e.jsx("span",{className:"text-red-600 font-medium",children:"Sold out"}):null]})]})]}),R.description&&e.jsxs(ce,{className:"pt-6 border-t border-slate-200",children:[e.jsx("h3",{className:"font-semibold text-slate-900 mb-3",children:"About this event"}),e.jsx("p",{className:"text-slate-600 whitespace-pre-wrap",children:R.description})]})]}),j==="colleagues"&&e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ue,{className:"text-xl",children:"Attendees"}),e.jsxs("div",{className:"flex items-center gap-4",children:[h&&e.jsxs("div",{className:"flex items-center gap-3",id:"member-attending-toggle",children:[e.jsx(cs,{id:"member-attending",checked:N,onCheckedChange:$}),e.jsx(ee,{htmlFor:"member-attending",className:"text-sm font-medium text-slate-700 cursor-pointer",children:"I am attending"})]}),e.jsxs(J,{id:"add-colleague-button",variant:"outline",size:"sm",onClick:()=>A(!0),className:"gap-2",children:[e.jsx(Pt,{className:"w-4 h-4"}),"Add Colleague"]})]})]})}),e.jsxs(ce,{className:"pt-6 space-y-4",children:[T&&e.jsxs("div",{className:"p-4 border border-blue-200 rounded-lg bg-blue-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-medium text-slate-900",children:"Add Colleague"}),e.jsx(J,{variant:"ghost",size:"sm",onClick:()=>A(!1),children:"Cancel"})]}),e.jsx("div",{id:"colleague-search-input",children:e.jsx(Hoe,{organizationId:h==null?void 0:h.organization_id,onSelect:U,memberInfo:h})})]}),p.length===0?e.jsxs("div",{className:"text-center py-8 text-slate-500",children:[e.jsx(ws,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),e.jsx("p",{children:"No attendees added yet"}),h&&e.jsx("p",{className:"text-sm mt-1",children:'Toggle "I am attending" or add colleagues to get started.'})]}):e.jsxs(e.Fragment,{children:[e.jsx(Uoe,{attendees:p,onUpdate:V,onRemove:z,memberInfo:h}),e.jsxs("div",{className:"pt-4 border-t border-slate-200",children:[e.jsx(J,{onClick:pe,disabled:!ue,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",size:"lg",children:v?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-5 h-5 mr-2 animate-spin"}),"Processing..."]}):"Confirm Booking"}),!de&&R.program_tag&&e.jsxs("p",{className:"text-xs text-center text-amber-600 mt-2",children:["Insufficient program tickets. You need ",ae-se," more ticket",ae-se>1?"s":"","."]}),ae===0&&e.jsx("p",{className:"text-xs text-center text-slate-500 mt-2",children:"Add attendees to proceed with booking"})]})]})]})]})]}),e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsx(Voe,{totalCost:K,memberInfo:h,organizationInfo:s,attendees:p.filter(we=>we.isValid),numberOfLinks:0,event:R,submitting:v,setSubmitting:y,registrationMode:j,refreshOrganizationInfo:n}),E.length>1&&e.jsx("div",{children:e.jsx(Woe,{mode:j,onModeChange:B,isFeatureExcluded:r})})]})]})]})]})}function Koe({organizationId:t,selectedVouchers:s,onVoucherToggle:n,maxAmount:r}){const{data:a,isLoading:i,error:l}=me({queryKey:["vouchers",t],queryFn:async()=>{if(!t)return[];console.log("[VoucherSelector] Fetching vouchers for org:",t);const d=await X.entities.Voucher.list();console.log("[VoucherSelector] All vouchers fetched:",d.length);const m=d.filter(h=>h.organization_id===t&&h.status==="active");return console.log("[VoucherSelector] Active vouchers for this org:",m.length),m},enabled:!!t,initialData:[],staleTime:5e3}),o=b.useMemo(()=>{if(!a||a.length===0)return[];console.log("[VoucherSelector] BEFORE client-side sort:",a.map(m=>({code:m.code,value:m.value,expires_at:m.expires_at,expiryTimestamp:new Date(m.expires_at).getTime()})));const d=[...a].sort((m,h)=>{const p=new Date(m.expires_at).getTime(),g=new Date(h.expires_at).getTime();return p!==g?p-g:m.value-h.value});return console.log("[VoucherSelector] AFTER client-side sort:",d.map(m=>({code:m.code,value:m.value,expires_at:m.expires_at,expiryTimestamp:new Date(m.expires_at).getTime()}))),d},[a]),c=b.useMemo(()=>{const d=new Map;if(!r||s.length===0)return d;const m=s.map(p=>o.find(g=>g.id===p)).filter(p=>p!==void 0).sort((p,g)=>{const v=new Date(p.expires_at).getTime(),y=new Date(g.expires_at).getTime();return v!==y?v-y:p.value-g.value});let h=r;for(const p of m){if(h<=0)break;const g=Math.min(p.value,h),v=g>=p.value,y=p.value-g;d.set(p.id,{amountUsed:g,isFullyUsed:v,remainingValue:y}),h-=g}return d},[o,s,r]),u=(d,m)=>{n(m?[...s,d]:s.filter(h=>h!==d))};return i?e.jsx("div",{className:"p-4 rounded-lg border border-slate-200 bg-blue-50",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(vt,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Loading vouchers..."})]})}):l?e.jsx("div",{className:"p-4 rounded-lg border border-red-200 bg-red-50",children:e.jsxs("div",{className:"flex items-start gap-2 text-sm text-red-600",children:[e.jsx(vs,{className:"w-4 h-4 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Error loading vouchers"}),e.jsx("p",{className:"text-xs mt-1",children:l.message})]})]})}):t?o.length===0?e.jsx("div",{className:"p-4 rounded-lg border border-slate-200 bg-slate-50",children:e.jsxs("div",{className:"flex items-start gap-2 text-sm text-slate-600",children:[e.jsx(vs,{className:"w-4 h-4 mt-0.5"}),e.jsx("span",{children:"No active vouchers available"})]})}):e.jsxs("div",{className:"space-y-3",children:[o.length>0&&e.jsx("p",{className:"text-xs text-slate-500",children:"Sorted by expiry date - vouchers expiring soonest are listed first"}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:o.map(d=>{const m=s.includes(d.id),h=c.get(d.id),p=(h==null?void 0:h.isFullyUsed)||!1,g=(h==null?void 0:h.remainingValue)||0,v=m&&!p&&g>0,y=new Date(d.expires_at),j=Math.ceil((y-new Date)/(1e3*60*60*24)),w=j<=30;let N="bg-white";m&&p?N="bg-green-50":m&&v?N="bg-yellow-50":m&&(N="bg-blue-50");let _="border-slate-200";m&&p?_="border-green-300":m&&v?_="border-yellow-300":m&&(_="border-blue-500");let T="text-slate-400";return m&&p?T="text-green-600":m&&v?T="text-yellow-600":m&&(T="text-blue-600"),e.jsx("div",{className:`p-3 rounded-lg border transition-all ${_} ${N}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Rs,{className:`w-4 h-4 shrink-0 ${T}`}),e.jsx("span",{className:"font-semibold text-slate-900 truncate",children:d.code}),e.jsxs(ye,{className:"bg-green-100 text-green-700 text-xs",children:["",d.value.toFixed(2)]})]}),d.description&&e.jsx("p",{className:"text-xs text-slate-600 mb-2",children:d.description}),e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx(Ns,{className:"w-3 h-3 text-slate-400"}),e.jsxs("span",{className:w?"text-amber-600 font-medium":"text-slate-500",children:["Expires ",Mt(y,"MMM d, yyyy"),w&&` (${j} days)`]})]}),v&&e.jsx("div",{className:"mt-2 pt-2 border-t border-yellow-200",children:e.jsxs("p",{className:"text-xs text-yellow-700 font-medium",children:["Remaining balance after purchase: ",g.toFixed(2)]})})]}),e.jsx(cs,{checked:m,onCheckedChange:A=>u(d.id,A),className:"shrink-0"})]})},d.id)})})]}):e.jsx("div",{className:"p-4 rounded-lg border border-amber-200 bg-amber-50",children:e.jsxs("div",{className:"flex items-start gap-2 text-sm text-amber-600",children:[e.jsx(vs,{className:"w-4 h-4 mt-0.5"}),e.jsx("span",{children:"Organization information not available"})]})})}var cI="clover",Goe=function(s){return s===3?"v3":s},dI="https://js.stripe.com",Yoe="".concat(dI,"/").concat(cI,"/stripe.js"),Qoe=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,Joe=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,Xoe=function(s){return Qoe.test(s)||Joe.test(s)},Zoe=function(){for(var s=document.querySelectorAll('script[src^="'.concat(dI,'"]')),n=0;n<s.length;n++){var r=s[n];if(Xoe(r.src))return r}return null},QT=function(s){var n="",r=document.createElement("script");r.src="".concat(Yoe).concat(n);var a=document.head||document.body;if(!a)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return a.appendChild(r),r},ece=function(s,n){!s||!s._registerWrapper||s._registerWrapper({name:"stripe-js",version:"8.5.3",startTime:n})},ym=null,Wx=null,Hx=null,tce=function(s){return function(n){s(new Error("Failed to load Stripe.js",{cause:n}))}},sce=function(s,n){return function(){window.Stripe?s(window.Stripe):n(new Error("Stripe.js not available"))}},nce=function(s){return ym!==null?ym:(ym=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe){n(window.Stripe);return}try{var a=Zoe();if(!(a&&s)){if(!a)a=QT(s);else if(a&&Hx!==null&&Wx!==null){var i;a.removeEventListener("load",Hx),a.removeEventListener("error",Wx),(i=a.parentNode)===null||i===void 0||i.removeChild(a),a=QT(s)}}Hx=sce(n,r),Wx=tce(r),a.addEventListener("load",Hx),a.addEventListener("error",Wx)}catch(l){r(l);return}}),ym.catch(function(n){return ym=null,Promise.reject(n)}))},rce=function(s,n,r){if(s===null)return null;var a=n[0],i=a.match(/^pk_test/),l=Goe(s.version),o=cI;i&&l!==o&&console.warn("Stripe.js@".concat(l," was loaded on the page, but @stripe/stripe-js@").concat("8.5.3"," expected Stripe.js@").concat(o,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var c=s.apply(void 0,n);return ece(c,r),c},bm,uI=!1,hI=function(){return bm||(bm=nce(null).catch(function(s){return bm=null,Promise.reject(s)}),bm)};Promise.resolve().then(function(){return hI()}).catch(function(t){uI||console.warn(t)});var mI=function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];uI=!0;var a=Date.now();return hI().then(function(i){return rce(i,n,a)})},lj={exports:{}},oj,JT;function ace(){if(JT)return oj;JT=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return oj=t,oj}var cj,XT;function ice(){if(XT)return cj;XT=1;var t=ace();function s(){}function n(){}return n.resetWarningCache=s,cj=function(){function r(l,o,c,u,d,m){if(m!==t){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}r.isRequired=r;function a(){return r}var i={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:a,element:r,elementType:r,instanceOf:a,node:r,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:n,resetWarningCache:s};return i.PropTypes=i,i},cj}var ZT;function lce(){return ZT||(ZT=1,lj.exports=ice()()),lj.exports}var oce=lce();const en=ud(oce);function eA(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function tA(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?eA(Object(n),!0).forEach(function(r){fI(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jg(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?jg=function(s){return typeof s}:jg=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},jg(t)}function fI(t,s,n){return s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function cce(t,s){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(s.indexOf(a)>=0)&&(n[a]=t[a]);return n}function dce(t,s){if(t==null)return{};var n=cce(t,s),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function pI(t,s){return uce(t)||hce(t,s)||mce(t,s)||fce()}function uce(t){if(Array.isArray(t))return t}function hce(t,s){var n=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(n!=null){var r=[],a=!0,i=!1,l,o;try{for(n=n.call(t);!(a=(l=n.next()).done)&&(r.push(l.value),!(s&&r.length===s));a=!0);}catch(c){i=!0,o=c}finally{try{!a&&n.return!=null&&n.return()}finally{if(i)throw o}}return r}}function mce(t,s){if(t){if(typeof t=="string")return sA(t,s);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sA(t,s)}}function sA(t,s){(s==null||s>t.length)&&(s=t.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=t[n];return r}function fce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Cr=function(s,n,r){var a=!!r,i=Be.useRef(r);Be.useEffect(function(){i.current=r},[r]),Be.useEffect(function(){if(!a||!s)return function(){};var l=function(){i.current&&i.current.apply(i,arguments)};return s.on(n,l),function(){s.off(n,l)}},[a,n,s,i])},Q_=function(s){var n=Be.useRef(s);return Be.useEffect(function(){n.current=s},[s]),n.current},Qu=function(s){return s!==null&&jg(s)==="object"},pce=function(s){return Qu(s)&&typeof s.then=="function"},xce=function(s){return Qu(s)&&typeof s.elements=="function"&&typeof s.createToken=="function"&&typeof s.createPaymentMethod=="function"&&typeof s.confirmCardPayment=="function"},nA="[object Object]",gce=function t(s,n){if(!Qu(s)||!Qu(n))return s===n;var r=Array.isArray(s),a=Array.isArray(n);if(r!==a)return!1;var i=Object.prototype.toString.call(s)===nA,l=Object.prototype.toString.call(n)===nA;if(i!==l)return!1;if(!i&&!r)return s===n;var o=Object.keys(s),c=Object.keys(n);if(o.length!==c.length)return!1;for(var u={},d=0;d<o.length;d+=1)u[o[d]]=!0;for(var m=0;m<c.length;m+=1)u[c[m]]=!0;var h=Object.keys(u);if(h.length!==o.length)return!1;var p=s,g=n,v=function(j){return t(p[j],g[j])};return h.every(v)},xI=function(s,n,r){return Qu(s)?Object.keys(s).reduce(function(a,i){var l=!Qu(n)||!gce(s[i],n[i]);return r.includes(i)?(l&&console.warn("Unsupported prop change: options.".concat(i," is not a mutable property.")),a):l?tA(tA({},a||{}),{},fI({},i,s[i])):a},null):null},gI="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",rA=function(s){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gI;if(s===null||xce(s))return s;throw new Error(n)},vce=function(s){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gI;if(pce(s))return{tag:"async",stripePromise:Promise.resolve(s).then(function(a){return rA(a,n)})};var r=rA(s,n);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},yce=function(s){!s||!s._registerWrapper||!s.registerAppInfo||(s._registerWrapper({name:"react-stripe-js",version:"5.4.1"}),s.registerAppInfo({name:"react-stripe-js",version:"5.4.1",url:"https://stripe.com/docs/stripe-js/react"}))},lv=Be.createContext(null);lv.displayName="ElementsContext";var vI=function(s,n){if(!s)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return s},iS=function(s){var n=s.stripe,r=s.options,a=s.children,i=Be.useMemo(function(){return vce(n)},[n]),l=Be.useState(function(){return{stripe:i.tag==="sync"?i.stripe:null,elements:i.tag==="sync"?i.stripe.elements(r):null}}),o=pI(l,2),c=o[0],u=o[1];Be.useEffect(function(){var h=!0,p=function(v){u(function(y){return y.stripe?y:{stripe:v,elements:v.elements(r)}})};return i.tag==="async"&&!c.stripe?i.stripePromise.then(function(g){g&&h&&p(g)}):i.tag==="sync"&&!c.stripe&&p(i.stripe),function(){h=!1}},[i,c,r]);var d=Q_(n);Be.useEffect(function(){d!==null&&d!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[d,n]);var m=Q_(r);return Be.useEffect(function(){if(c.elements){var h=xI(r,m,["clientSecret","fonts"]);h&&c.elements.update(h)}},[r,m,c.elements]),Be.useEffect(function(){yce(c.stripe)},[c.stripe]),Be.createElement(lv.Provider,{value:c},a)};iS.propTypes={stripe:en.any,options:en.object};var bce=function(s){var n=Be.useContext(lv);return vI(n,s)},yI=function(){var s=bce("calls useElements()"),n=s.elements;return n};en.func.isRequired;var bI=Be.createContext(null);bI.displayName="CheckoutContext";en.any,en.shape({clientSecret:en.oneOfType([en.string,en.instanceOf(Promise)]).isRequired,elementsOptions:en.object}).isRequired;var J_=function(s){var n=Be.useContext(bI),r=Be.useContext(lv);if(n){if(r)throw new Error("You cannot wrap the part of your app that ".concat(s," in both <CheckoutProvider> and <Elements> providers."));return n}else return vI(r,s)},jce=["mode"],wce=function(s){return s.charAt(0).toUpperCase()+s.slice(1)},la=function(s,n){var r="".concat(wce(s),"Element"),a=function(c){var u=c.id,d=c.className,m=c.options,h=m===void 0?{}:m,p=c.onBlur,g=c.onFocus,v=c.onReady,y=c.onChange,j=c.onEscape,w=c.onClick,N=c.onLoadError,_=c.onLoaderStart,T=c.onNetworksChange,A=c.onConfirm,P=c.onCancel,C=c.onShippingAddressChange,O=c.onShippingRateChange,M=c.onSavedPaymentMethodRemove,k=c.onSavedPaymentMethodUpdate,E=J_("mounts <".concat(r,">")),R="elements"in E?E.elements:null,F="checkoutState"in E?E.checkoutState:null,z=(F==null?void 0:F.type)==="success"||(F==null?void 0:F.type)==="loading"?F.sdk:null,V=Be.useState(null),U=pI(V,2),B=U[0],$=U[1],L=Be.useRef(null),I=Be.useRef(null);Cr(B,"blur",p),Cr(B,"focus",g),Cr(B,"escape",j),Cr(B,"click",w),Cr(B,"loaderror",N),Cr(B,"loaderstart",_),Cr(B,"networkschange",T),Cr(B,"confirm",A),Cr(B,"cancel",P),Cr(B,"shippingaddresschange",C),Cr(B,"shippingratechange",O),Cr(B,"savedpaymentmethodremove",M),Cr(B,"savedpaymentmethodupdate",k),Cr(B,"change",y);var W;v&&(s==="expressCheckout"?W=v:W=function(){v(B)}),Cr(B,"ready",W),Be.useLayoutEffect(function(){if(L.current===null&&I.current!==null&&(R||z)){var Z=null;if(z)switch(s){case"paymentForm":Z=z.createPaymentFormElement();break;case"payment":Z=z.createPaymentElement(h);break;case"address":if("mode"in h){var Q=h.mode,Y=dce(h,jce);if(Q==="shipping")Z=z.createShippingAddressElement(Y);else if(Q==="billing")Z=z.createBillingAddressElement(Y);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":Z=z.createExpressCheckoutElement(h);break;case"currencySelector":Z=z.createCurrencySelectorElement();break;case"taxId":Z=z.createTaxIdElement(h);break;default:throw new Error("Invalid Element type ".concat(r,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else R&&(Z=R.create(s,h));L.current=Z,$(Z),Z&&Z.mount(I.current)}},[R,z,h]);var q=Q_(h);return Be.useEffect(function(){if(L.current){var Z=xI(h,q,["paymentRequest"]);Z&&"update"in L.current&&L.current.update(Z)}},[h,q]),Be.useLayoutEffect(function(){return function(){if(L.current&&typeof L.current.destroy=="function")try{L.current.destroy(),L.current=null}catch{}}},[]),Be.createElement("div",{id:u,className:d,ref:I})},i=function(c){J_("mounts <".concat(r,">"));var u=c.id,d=c.className;return Be.createElement("div",{id:u,className:d})},l=n?i:a;return l.propTypes={id:en.string,className:en.string,onChange:en.func,onBlur:en.func,onFocus:en.func,onReady:en.func,onEscape:en.func,onClick:en.func,onLoadError:en.func,onLoaderStart:en.func,onNetworksChange:en.func,onConfirm:en.func,onCancel:en.func,onShippingAddressChange:en.func,onShippingRateChange:en.func,onSavedPaymentMethodRemove:en.func,onSavedPaymentMethodUpdate:en.func,options:en.object},l.displayName=r,l.__elementType=s,l},oa=typeof window>"u",Nce=Be.createContext(null);Nce.displayName="EmbeddedCheckoutProviderContext";var jI=function(){var s=J_("calls useStripe()"),n=s.stripe;return n};la("auBankAccount",oa);la("card",oa);la("cardNumber",oa);la("cardExpiry",oa);la("cardCvc",oa);la("iban",oa);var wI=la("payment",oa);la("expressCheckout",oa);la("paymentRequestButton",oa);la("linkAuthentication",oa);la("address",oa);la("shippingAddress",oa);la("paymentMethodMessaging",oa);la("taxId",oa);let dj=null;function _ce({clientSecret:t,onSuccess:s,onCancel:n,amount:r}){const a=jI(),i=yI(),[l,o]=b.useState(!1),[c,u]=b.useState(null),d=async m=>{if(m.preventDefault(),!(!a||!i)){o(!0),u(null);try{const{error:h}=await a.confirmPayment({elements:i,confirmParams:{return_url:window.location.href},redirect:"if_required"});h?(u(h.message),o(!1)):s()}catch(h){console.error("Stripe confirmPayment error:",h),u(h.message),o(!1)}}};return e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("strong",{children:"Amount to charge:"})," ",r.toFixed(2)]})}),e.jsx("div",{children:e.jsx(wI,{options:{layout:"tabs"}})}),c&&e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx(vs,{className:"w-4 h-4 mr-0.5 mt-0.5 text-red-600 shrink-0"}),e.jsx("p",{className:"text-sm text-red-800",children:c})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(J,{type:"button",variant:"outline",onClick:n,disabled:l,className:"flex-1",children:"Cancel"}),e.jsx(J,{type:"submit",disabled:!a||l,className:"flex-1 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700",children:l?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):`Pay ${r.toFixed(2)}`})]})]})}function NI({memberInfo:t,organizationInfo:s,refreshOrganizationInfo:n,isFeatureExcluded:r,memberRole:a,reloadMemberInfo:i}){var ut;const[l,o]=b.useState(null),[c,u]=b.useState(1),[d,m]=b.useState(""),[h,p]=b.useState(!1),[g,v]=b.useState([]),[y,j]=b.useState(0),[w,N]=b.useState("account"),[_,T]=b.useState(""),[A,P]=b.useState(null),[C,O]=b.useState(!1),[M,k]=b.useState(!1),[E,R]=b.useState(null),[F,z]=b.useState(!1),[V,U]=b.useState(null),[B,$]=b.useState(null),[L,I]=b.useState(!1),[W,q]=b.useState(!1),[Z,Q]=b.useState(!1),[Y,K]=b.useState(!1),ae=b.useRef(!1),se=b.useRef(!1),de=Yt(),ue=t&&!t.is_team_member&&a&&a.show_tours!==!1;b.useEffect(()=>{(async()=>{try{const Ze=await X.functions.invoke("getStripePublishableKey");Ze.data.publishableKey?dj=mI(Ze.data.publishableKey):console.warn("Stripe publishable key not found in response.")}catch(Ze){console.error("Failed to load Stripe publishable key:",Ze)}})()},[]),b.useEffect(()=>{t&&s&&(async()=>{try{console.log("[BuyProgramTickets] Updating expired vouchers...");const Ze=await X.functions.invoke("updateExpiredVouchers");Ze.data.success&&Ze.data.updated_count>0?(console.log("[BuyProgramTickets] Updated expired vouchers:",Ze.data.updated_count),de.invalidateQueries({queryKey:["vouchers"]})):console.log("[BuyProgramTickets] No expired vouchers found or update not needed"),de.invalidateQueries({queryKey:["vouchers"]})}catch(Ze){console.error("[BuyProgramTickets] Failed to update expired vouchers:",Ze)}})()},[t,s,de]),b.useEffect(()=>{if(!ue||l!==null||ae.current)return;(t.page_tours_seen||{})["BuyProgramTickets_list"]||(ae.current=!0,Q(!0),I(!0))},[t,l,ue]),b.useEffect(()=>{if(!ue||l===null||se.current)return;(t.page_tours_seen||{})["BuyProgramTickets_form"]||(se.current=!0,K(!0),q(!0))},[t,l,ue]);const{data:oe,isLoading:pe}=me({queryKey:["programs"],queryFn:()=>X.entities.Program.filter({is_active:!0}),initialData:[]}),{data:je}=me({queryKey:["events"],queryFn:()=>X.entities.Event.list(),initialData:[]}),{data:we}=me({queryKey:["vouchers",s==null?void 0:s.id],queryFn:async()=>s!=null&&s.id?await X.entities.Voucher.filter({organization_id:s.id,status:"active"}):[],enabled:!!(s!=null&&s.id)&&!r("payment_training_vouchers"),initialData:[]});b.useEffect(()=>{if(l){const Te=sessionStorage.getItem(`program_purchase_${l.id}`);if(Te){const{selectedVouchers:Ze,trainingFund:yt,paymentMethod:as,po:ds,qty:Qs}=JSON.parse(Te),ms=(Ze||[]).filter(Ir=>we.some(vn=>vn.id===Ir));v(ms),j(yt||0),N(as||"account"),m(ds||""),u(Qs||1)}else v([]),j(0),N("account"),m(""),u(1),P(null),T("")}else v([]),j(0),N("account"),m(""),u(1),P(null),T("")},[l,we]),b.useEffect(()=>{if(g.length>0&&we.length>0){const Te=g.filter(Ze=>we.some(yt=>yt.id===Ze));Te.length!==g.length&&(console.log("[BuyProgramTickets] Cleaning up invalid voucher IDs from state"),v(Te))}},[we,g]),b.useEffect(()=>{if(l){const Te={selectedVouchers:g,trainingFund:y,paymentMethod:w,po:d,qty:c};sessionStorage.setItem(`program_purchase_${l.id}`,JSON.stringify(Te))}},[l,g,y,w,d,c]),b.useEffect(()=>{l&&(P(null),T(""))},[c,l==null?void 0:l.id]);const qe=async Te=>{if(t&&!t.is_team_member)try{const yt=(await X.entities.Member.list()).find(as=>as.email===t.email);if(yt){const as={...yt.page_tours_seen||{},[Te]:!0};await X.entities.Member.update(yt.id,{page_tours_seen:as});const ds={...t,page_tours_seen:as};sessionStorage.setItem("agcas_member",JSON.stringify(ds)),i&&i()}}catch(Ze){console.error("Failed to update tour status:",Ze)}},ze=async()=>{I(!1),Q(!1)},Ee=async()=>{I(!1),Q(!1),await qe("BuyProgramTickets_list")},Ce=async()=>{q(!1),K(!1)},Ge=async()=>{q(!1),K(!1),await qe("BuyProgramTickets_form")},Ye=()=>{I(!0),Q(!0)},De=()=>{q(!0),K(!0)};if(!t||!s)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-slate-600",children:"Loading..."})});const it=s.program_ticket_balances?Object.values(s.program_ticket_balances).reduce((Te,Ze)=>Te+Ze,0):0,Se=je.reduce((Te,Ze)=>(Ze.program_tag&&(Te[Ze.program_tag]=(Te[Ze.program_tag]||0)+1),Te),{}),at=(Te,Ze)=>{const yt=Te.offer_type||"none";let as=yt;yt==="none"&&(Te.bogo_buy_quantity&&Te.bogo_get_free_quantity?as="bogo":Te.bulk_discount_threshold&&Te.bulk_discount_percentage&&(as="bulk_discount"));const ds=Te.program_ticket_price*Ze;if(as==="bogo"){if((Te.bogo_logic_type||"buy_x_get_y_free")==="buy_x_get_y_free"){if(Te.bogo_buy_quantity&&Te.bogo_get_free_quantity&&Ze>=Te.bogo_buy_quantity)return ds}else if(Te.bogo_buy_quantity&&Te.bogo_get_free_quantity&&Ze>=Te.bogo_buy_quantity+Te.bogo_get_free_quantity){const ms=Te.bogo_buy_quantity+Te.bogo_get_free_quantity,Ir=Math.floor(Ze/ms),vn=Ze%ms,tr=Ir*Te.bogo_buy_quantity+vn;return Te.program_ticket_price*tr}}else if(as==="bulk_discount"&&Te.bulk_discount_threshold&&Te.bulk_discount_percentage&&Ze>=Te.bulk_discount_threshold){const Qs=ds*(Te.bulk_discount_percentage/100);return ds-Qs}return ds},_e=(Te,Ze)=>{const yt=Te.offer_type||"none";let as=yt;if(yt==="none"&&Te.bogo_buy_quantity&&Te.bogo_get_free_quantity&&(as="bogo"),as==="bogo"){if((Te.bogo_logic_type||"buy_x_get_y_free")==="buy_x_get_y_free"){if(Te.bogo_buy_quantity&&Te.bogo_get_free_quantity&&Ze>=Te.bogo_buy_quantity)return Math.floor(Ze/Te.bogo_buy_quantity)*Te.bogo_get_free_quantity}else if(Te.bogo_buy_quantity&&Te.bogo_get_free_quantity&&Ze>=Te.bogo_buy_quantity+Te.bogo_get_free_quantity){const Qs=Te.bogo_buy_quantity+Te.bogo_get_free_quantity;return Math.floor(Ze/Qs)*Te.bogo_get_free_quantity}}return 0},$e=(Te,Ze)=>(Te.bogo_logic_type||"buy_x_get_y_free")==="buy_x_get_y_free"?Ze+_e(Te,Ze):Ze,nt=Te=>{o(Te),u(1),m(""),v([]),j(0),N("account"),P(null),T("")},dt=l?at(l,c):0,lt=A?A.totalCostAfterDiscount:dt,Rt=l?_e(l,c):0,es=l?$e(l,c):0,Bs=g.reduce((Te,Ze)=>{const yt=we.find(as=>as.id===Ze);return Te+((yt==null?void 0:yt.value)||0)},0),Ss=r("payment_training_vouchers")?0:Math.min(Bs,lt),on=r("payment_training_fund")?0:Math.min((s==null?void 0:s.training_fund_balance)||0,lt-Ss),Jt=Math.max(0,lt-Ss-y),fn=Te=>{const Ze=Math.max(0,Math.min(on,parseFloat(Te)||0));j(Ze)},Ds=async()=>{var Te,Ze;if(!_.trim()){te.error("Please enter a discount code");return}if(!l){te.error("Please select a program first.");return}O(!0);try{const yt=await X.functions.invoke("applyDiscountCode",{code:_.trim().toUpperCase(),totalCost:dt,programTag:l.program_tag,memberEmail:t.email});yt.data.success?(P(yt.data),te.success(yt.data.message)):(te.error(yt.data.error||"Invalid discount code"),P(null))}catch(yt){console.error("Error applying discount:",yt);const as=((Ze=(Te=yt.response)==null?void 0:Te.data)==null?void 0:Ze.error)||"Invalid discount code";te.error(as),P(null)}finally{O(!1)}},jr=()=>{P(null),T(""),te.info("Discount code removed")},Hn=Ss+y+Jt,Je=Math.abs(Hn-lt)<.01,bt=async()=>{var Te,Ze,yt,as;z(!1),p(!0);try{const ds=await X.functions.invoke("processProgramTicketPurchase",{memberEmail:t.email,programName:l.name,quantity:parseInt(c),purchaseOrderNumber:null,selectedVoucherIds:r("payment_training_vouchers")?[]:g,trainingFundAmount:r("payment_training_fund")?0:y,accountAmount:0,paymentMethod:"card",stripePaymentIntentId:B,appliedDiscountId:(A==null?void 0:A.discountId)||null});((Te=ds==null?void 0:ds.data)==null?void 0:Te.success)===!0?(l&&sessionStorage.removeItem(`program_purchase_${l.id}`),n&&await n(),R({programName:l.name,quantity:es,totalCost:lt,isSimulatedPayment:!1,paymentMethod:"card"}),k(!0),o(null),u(1),m(""),v([]),j(0),N("account"),U(null),$(null),P(null),T("")):(console.error("[BuyProgramTickets] FAILED - response.data:",ds.data),te.error(((Ze=ds.data)==null?void 0:Ze.error)||"Failed to process purchase"))}catch(ds){console.error("[BuyProgramTickets] CAUGHT ERROR during handleStripePaymentSuccess:",ds);const Qs=((as=(yt=ds.response)==null?void 0:yt.data)==null?void 0:as.error)||ds.message||"Failed to process purchase after card payment";te.error(Qs)}finally{p(!1)}},hs=async Te=>{var Ze,yt,as,ds,Qs;if(Te.preventDefault(),c===""||c<1){te.error("Please enter a valid quantity (at least 1)");return}if(!Je){te.error("Please allocate the full amount across payment methods");return}if(Jt>0&&w==="account"&&!d.trim()){te.error("Please enter a purchase order number for account charges");return}if(w==="card"&&Jt>0){p(!0);try{const ms=await X.functions.invoke("createStripePaymentIntent",{amount:Jt,currency:"gbp",memberEmail:t.email,metadata:{program_name:l.program_tag,quantity:c,organization_id:s.id,discount_code:(A==null?void 0:A.code)||null}});ms.data.success?(U(ms.data.clientSecret),$(ms.data.paymentIntentId),z(!0)):te.error("Failed to initialize payment: "+(ms.data.error||"Unknown error"))}catch(ms){console.error("Error creating Stripe Payment Intent:",ms),te.error("Failed to initialize payment")}finally{p(!1)}return}p(!0);try{const ms=await X.functions.invoke("processProgramTicketPurchase",{memberEmail:t.email,programName:l.name,quantity:parseInt(c),purchaseOrderNumber:w==="account"?d.trim():null,selectedVoucherIds:r("payment_training_vouchers")?[]:g,trainingFundAmount:r("payment_training_fund")?0:y,accountAmount:w==="account"?Jt:0,paymentMethod:w,appliedDiscountId:(A==null?void 0:A.discountId)||null});console.log("[BuyProgramTickets] RAW RESPONSE:",JSON.stringify(ms,null,2)),console.log("[BuyProgramTickets] response.data:",ms.data),console.log("[BuyProgramTickets] response.data.success:",(Ze=ms.data)==null?void 0:Ze.success),((yt=ms==null?void 0:ms.data)==null?void 0:yt.success)===!0?(l&&sessionStorage.removeItem(`program_purchase_${l.id}`),n&&await n(),R({programName:l.name,quantity:es,totalCost:lt,isSimulatedPayment:!1,paymentMethod:w}),k(!0),o(null),u(1),m(""),v([]),j(0),N("account"),P(null),T("")):(console.error("[BuyProgramTickets] FAILED - response.data:",ms.data),te.error(((as=ms.data)==null?void 0:as.error)||"Failed to process purchase"))}catch(ms){console.error("[BuyProgramTickets] CAUGHT ERROR"),console.error("[BuyProgramTickets] Error object:",ms),console.error("[BuyProgramTickets] Error.toString():",ms.toString()),console.error("[BuyProgramTickets] JSON.stringify(error):",JSON.stringify(ms,Object.getOwnPropertyNames(ms)));const Ir=((Qs=(ds=ms.response)==null?void 0:ds.data)==null?void 0:Qs.error)||ms.message||"Failed to process purchase";te.error(Ir)}finally{p(!1)}},Ne=()=>{k(!1),R(null)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:[L&&ue&&!l&&e.jsx(ld,{tourGroupName:"BuyProgramTickets",viewId:"list",onComplete:ze,onDismissPermanently:Ee,autoShow:Z}),W&&ue&&l&&e.jsx(ld,{tourGroupName:"BuyProgramTickets",viewId:"form",onComplete:Ce,onDismissPermanently:Ge,autoShow:Y}),e.jsx("div",{className:"max-w-7xl mx-auto",children:l?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>o(null),className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900 mb-6",children:[e.jsx(ll,{className:"w-4 h-4"}),"Back to Programs"]}),ue&&e.jsx("div",{className:"mb-6 flex justify-end",children:e.jsx(od,{onClick:De})}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[l.image_url&&e.jsx("div",{className:"h-48 overflow-hidden bg-slate-100",children:e.jsx("img",{src:l.image_url,alt:l.name,className:"w-full h-full object-cover"})}),e.jsxs(Fe,{children:[e.jsx(Ue,{className:"text-2xl",children:l.name}),l.description&&e.jsx("p",{className:"text-slate-600 mt-2",children:l.description})]}),e.jsxs(ce,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[e.jsx("span",{className:"text-slate-600",children:"Current Balance:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Rs,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"text-xl font-bold text-purple-600",children:((ut=s.program_ticket_balances)==null?void 0:ut[l.program_tag])||0})]})]}),e.jsx("div",{className:"space-y-2",children:e.jsx("p",{className:"text-xs text-slate-500",children:"This is the number of tickets your organisation has already purchased but not yet allocated to attendees"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"quantity-input",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:l.bogo_logic_type==="enter_total_pay_less"?"Enter total number of tickets you want to receive":"Enter number of tickets to purchase"}),e.jsx(he,{id:"quantity-input",type:"number",min:"1",max:"1000",value:c,onChange:Te=>{const Ze=Te.target.value;if(Ze==="")u("");else{const yt=parseInt(Ze);!isNaN(yt)&&yt>=0&&u(yt)}},onBlur:Te=>{const Ze=parseInt(Te.target.value);isNaN(Ze)||Ze<1?u(1):u(Ze)},placeholder:"Enter quantity",className:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]}),e.jsxs("div",{className:"p-4 bg-purple-50 border border-purple-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Price per Ticket:"}),e.jsxs("span",{className:"text-lg font-bold text-slate-900",children:["",l.program_ticket_price]})]}),Rt>0&&e.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-purple-200",children:[e.jsx("span",{className:"text-sm font-medium text-green-700",children:l.bogo_logic_type==="enter_total_pay_less"?"Discount Applied (Free Tickets):":"Free Tickets:"}),e.jsx("span",{className:"text-lg font-bold text-green-600",children:l.bogo_logic_type==="enter_total_pay_less"?`${Rt} ticket${Rt>1?"s":""}`:`+${Rt}`})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-purple-200",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Total Tickets You'll Receive:"}),e.jsx("span",{className:"text-xl font-bold text-purple-600",children:es})]}),e.jsxs("div",{className:"flex items-center justify-between border-t border-purple-200 pt-2",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Total Cost:"}),e.jsxs("span",{className:"text-2xl font-bold text-purple-600",children:["",dt.toFixed(2)]})]}),(()=>{const Te=l.offer_type||"none";let Ze=Te;return Te==="none"&&(l.bogo_buy_quantity&&l.bogo_get_free_quantity?Ze="bogo":l.bulk_discount_threshold&&l.bulk_discount_percentage&&(Ze="bulk_discount")),Ze==="bogo"&&Rt>0?e.jsx("p",{className:"text-xs text-green-600 mt-2 font-medium",children:l.bogo_logic_type==="enter_total_pay_less"?` BOGO offer applied: You entered ${c} ticket${c>1?"s":""}, paying for ${c-Rt}!`:` Buy ${l.bogo_buy_quantity}, Get ${l.bogo_get_free_quantity} Free offer applied!`}):Ze==="bulk_discount"&&l.bulk_discount_threshold&&l.bulk_discount_percentage&&c>=l.bulk_discount_threshold?e.jsxs("p",{className:"text-xs text-green-600 mt-2",children:[" ",l.bulk_discount_percentage,"% bulk discount applied!"]}):null})()]})]})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(le,{id:"payment-options-card",className:"border-slate-200 shadow-lg sticky top-8",children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsx(Ue,{className:"font-semibold tracking-tight text-xl",children:"Payment Options"})}),e.jsxs(ce,{className:"pt-6 space-y-6",children:[!r("payment_training_vouchers")&&e.jsxs("div",{id:"training-vouchers-section",className:"p-4 rounded-lg border border-slate-200 bg-blue-50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Rs,{className:"w-4 h-4 text-blue-600"}),e.jsx(ee,{className:"text-sm font-medium",children:"Training Vouchers"})]}),e.jsx(Koe,{organizationId:s==null?void 0:s.id,selectedVouchers:g,onVoucherToggle:v,maxAmount:lt}),Ss>0&&e.jsx("div",{className:"mt-3 pt-3 border-t border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-blue-700",children:"Voucher Value Applied:"}),e.jsxs("span",{className:"font-bold text-blue-900",children:["",Ss.toFixed(2)]})]})})]}),!r("payment_training_fund")&&e.jsxs("div",{id:"training-fund-section",className:"p-4 rounded-lg border border-slate-200 bg-green-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ho,{className:"w-4 h-4 text-green-600"}),e.jsx(ee,{className:"text-sm font-medium",children:"Training Fund"})]}),e.jsxs("span",{className:"text-xs text-slate-500",children:["Available: ",((s==null?void 0:s.training_fund_balance)||0).toFixed(2)]})]}),e.jsx(he,{type:"number",min:"0",max:on,step:"0.01",placeholder:"Amount in ",value:y||"",onChange:Te=>fn(Te.target.value),disabled:on===0})]}),Jt>0&&e.jsxs("div",{id:"remaining-balance-section",className:"p-4 rounded-lg border border-slate-200 bg-slate-50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(fd,{className:"w-4 h-4 text-indigo-600"}),e.jsx(ee,{className:"peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-sm font-medium",children:"Pay Balance"})]}),e.jsx("div",{id:"amount-due-display",className:"mb-4 p-3 bg-white rounded-lg border border-slate-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"Amount Due:"}),e.jsxs("span",{className:"text-lg font-bold text-slate-900",children:["",Jt.toFixed(2)]})]})}),e.jsx(of,{value:w,onValueChange:N,children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[" ",e.jsxs("div",{id:"account-payment-option",className:"flex items-start space-x-3 p-3 rounded-lg border-2 transition-colors cursor-pointer hover:bg-slate-100",style:{borderColor:w==="account"?"#6366f1":"#e2e8f0"},onClick:()=>N("account"),children:[e.jsx(Al,{value:"account",id:"account",className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ee,{htmlFor:"account",className:"text-sm leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 font-medium cursor-pointer",children:"Charge to Organisation Account"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Requires purchase order number"})]})]}),w==="account"&&e.jsxs("div",{id:"purchase-order-field",className:"flex items-start gap-2 ml-2",children:[e.jsx("div",{className:"pt-6",children:e.jsx(ns,{className:"w-4 h-4 text-indigo-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ee,{htmlFor:"po-number",className:"text-xs text-slate-600 mb-1 block",children:"Purchase Order Number *"}),e.jsx(he,{id:"po-number",type:"text",value:d,onChange:Te=>m(Te.target.value),placeholder:"e.g., PO-2024-001",required:!0})]})]})]}),e.jsxs("div",{id:"card-payment-option",className:"flex items-start space-x-3 p-3 rounded-lg border-2 transition-colors cursor-pointer hover:bg-slate-100",style:{borderColor:w==="card"?"#6366f1":"#e2e8f0"},onClick:()=>N("card"),children:[e.jsx(Al,{value:"card",id:"card",className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ee,{htmlFor:"card",className:"font-medium cursor-pointer",children:"Credit/Debit Card"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Secure payment via Stripe"})]})]})]})})]}),e.jsxs("div",{className:"pt-4 border-t border-slate-200 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Subtotal"}),e.jsxs("span",{className:A?"line-through text-slate-400":"font-semibold text-slate-900",children:["",dt.toFixed(2)]})]}),A?e.jsxs("div",{className:"p-4 rounded-lg border border-green-200 bg-green-50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Wc,{className:"w-4 h-4 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-900",children:A.code}),e.jsx("p",{className:"text-xs text-green-700",children:A.type==="percentage"?`${A.value}% off`:`${A.value} off`})]})]}),e.jsx(J,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-700 hover:text-green-900 hover:bg-green-100",onClick:jr,children:e.jsx(_s,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"mt-2 pt-2 border-t border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-green-700",children:"Discount:"}),e.jsxs("span",{className:"font-semibold text-green-900",children:["-",A.discountAmount.toFixed(2)]})]})})]}):e.jsxs("div",{id:"discount-code-section",className:"p-4 rounded-lg border border-slate-200 bg-slate-50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Wc,{className:"w-4 h-4 text-purple-600"}),e.jsx(ee,{className:"text-sm font-medium",children:"Discount Code"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(he,{placeholder:"Enter code",value:_,onChange:Te=>T(Te.target.value.toUpperCase()),onKeyPress:Te=>Te.key==="Enter"&&Ds(),disabled:C}),e.jsx(J,{onClick:Ds,disabled:C||!_.trim(),size:"sm",variant:"outline",children:C?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-4 h-4 mr-1 animate-spin"}),"Applying..."]}):"Apply"})]})]}),(Ss>0||y>0)&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Vouchers & Training Fund"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["-",(Ss+y).toFixed(2)]})]}),e.jsxs("div",{className:"pt-2 border-t border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-slate-700",children:"Amount Due"}),e.jsxs("span",{className:`text-xl font-bold ${Jt===0?"text-green-600":"text-slate-900"}`,children:["",Jt.toFixed(2)]})]}),Jt===0&&e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Fully covered by vouchers & training fund"}),Jt>0&&e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["To be paid by ",w==="account"?"account charge":"credit/debit card"]})]})]}),e.jsx(J,{id:"complete-purchase-button",onClick:hs,disabled:!Je||h||c==="",className:"w-full bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700",size:"lg",children:h?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-5 h-5 mr-2 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(xd,{className:"w-5 h-5 mr-2"}),"Complete Purchase"]})})]})]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Buy unpacked tickets"})}),ue&&e.jsx(od,{onClick:Ye})]})}),e.jsx(le,{id:"total-tickets-summary-card",className:"border-slate-200 shadow-sm bg-gradient-to-br from-purple-50 to-blue-50 mb-8",children:e.jsxs(ce,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Total Available"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-purple-600",children:it}),e.jsx("span",{className:"text-slate-600",children:"unpacked tickets"})]})]}),e.jsx("div",{className:"p-4 bg-white/50 rounded-lg",children:e.jsx(Rs,{className:"w-8 h-8 text-purple-600"})})]}),s.name&&e.jsxs("p",{className:"text-sm text-slate-500 mt-3",children:["for ",s.name]})]})}),pe?e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array(3).fill(0).map((Te,Ze)=>e.jsxs(le,{className:"animate-pulse border-slate-200",children:[e.jsx("div",{className:"h-48 bg-slate-200"}),e.jsxs(Fe,{children:[e.jsx("div",{className:"h-6 bg-slate-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded w-full"})]})]},Ze))}):oe.length===0?e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(Rs,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No Programs Available"}),e.jsx("p",{className:"text-slate-600",children:"Program tickets will be available here once programs are configured"})]})}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:oe.map((Te,Ze)=>{var ds;const yt=((ds=s.program_ticket_balances)==null?void 0:ds[Te.program_tag])||0,as=Se[Te.program_tag]||0;return e.jsx("button",{id:Ze===0?"first-program-card":void 0,onClick:()=>nt(Te),className:"text-left group",children:e.jsxs(le,{className:"border-slate-200 hover:border-purple-300 hover:shadow-lg transition-all overflow-hidden h-full",children:[Te.image_url&&e.jsx("div",{className:"h-48 overflow-hidden bg-slate-100",children:e.jsx("img",{src:Te.image_url,alt:Te.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),e.jsx(Fe,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsx(Ue,{className:"text-lg group-hover:text-purple-600 transition-colors",children:"International Employability unpacked"}),e.jsxs("div",{className:"flex items-center gap-1 text-purple-600 bg-purple-50 px-2 py-1 rounded-full shrink-0",children:[e.jsx(Rs,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs font-semibold",children:yt})]})]})}),e.jsxs(ce,{className:"space-y-3",children:[Te.description&&e.jsx("p",{className:"text-sm text-slate-600 line-clamp-2",children:Te.description}),e.jsxs("div",{className:"pt-2 border-t border-slate-100 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-slate-500",children:[as," ",as===1?"event":"events"]}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsxs("span",{className:"text-lg font-bold text-slate-900",children:["",Te.program_ticket_price]}),e.jsx("span",{className:"text-xs text-slate-500",children:"per ticket"})]})]}),Te.bogo_buy_quantity&&Te.bogo_get_free_quantity&&e.jsxs("p",{className:"text-xs text-green-600 font-medium",children:["Buy ",Te.bogo_buy_quantity,", Get ",Te.bogo_get_free_quantity," Free!"]}),!Te.bogo_buy_quantity&&Te.bulk_discount_threshold&&Te.bulk_discount_percentage&&e.jsxs("p",{className:"text-xs text-green-600",children:[Te.bulk_discount_percentage,"% off when buying ",Te.bulk_discount_threshold,"+ tickets"]})]})]})]})},Te.id)})})]})}),e.jsx(Ct,{open:F,onOpenChange:z,children:e.jsxs(Nt,{className:"sm:max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs(kt,{children:[e.jsx(Et,{children:"Enter Payment Details"}),e.jsx(ya,{children:"Complete your purchase by entering your card information below."})]}),V&&dj&&e.jsx(iS,{stripe:dj,options:{clientSecret:V},children:e.jsx(_ce,{clientSecret:V,onSuccess:bt,onCancel:()=>{z(!1),U(null),$(null),p(!1)},amount:Jt})})]})}),e.jsx(Ct,{open:M,onOpenChange:k,children:e.jsxs(Nt,{className:"sm:max-w-md",children:[e.jsxs(kt,{children:[e.jsx("div",{className:"flex items-center justify-center w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full",children:e.jsx(Jn,{className:"w-10 h-10 text-green-600"})}),e.jsx(Et,{className:"text-center text-2xl",children:"Purchase Successful!"}),e.jsx(ya,{className:"text-center pt-4",children:E&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-base text-slate-700",children:["You've successfully purchased ",e.jsx("span",{className:"font-bold text-purple-600",children:E.quantity})," ticket",E.quantity>1?"s":""," for"]}),e.jsx("p",{className:"text-lg font-semibold text-slate-900",children:"International Employability"}),e.jsx("p",{className:"text-sm text-slate-600 paddingTop-2",children:"Register your attendees now."})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-full mt-4",children:[e.jsx(J,{onClick:()=>{Ne(),window.location.href=Pe("Events")},className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",children:"Register"}),e.jsx(J,{variant:"outline",onClick:Ne,className:"w-full",children:"Buy More Tickets"})]})]})})]})}function _I(){const[t,s]=b.useState("verifying"),[n,r]=b.useState("");return b.useEffect(()=>{(async()=>{var o,c;const l=new URLSearchParams(window.location.search).get("token");if(!l){s("error"),r("Invalid or missing verification token");return}try{const u=await X.functions.invoke("verifyMagicLink",{token:l});if(u.data.success){s("success"),r("Login successful! Redirecting...");const d=new Date(Date.now()+1800*1e3).toISOString(),m={...u.data.user,sessionExpiry:d};sessionStorage.setItem("agcas_member",JSON.stringify(m));let h="Events";if(u.data.user.role_id)try{const g=(await X.entities.Role.list()).find(v=>v.id===u.data.user.role_id);g&&g.default_landing_page&&(h=g.default_landing_page)}catch(p){console.error("Error fetching role:",p)}setTimeout(()=>{window.location.href=Pe(h)},1500)}else s("error"),r(u.data.error||"Verification failed")}catch(u){s("error"),r(((c=(o=u.response)==null?void 0:o.data)==null?void 0:c.error)||"An error occurred during verification")}})()},[]),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center p-4",children:e.jsx(le,{className:"w-full max-w-md shadow-xl border-slate-200",children:e.jsxs(ce,{className:"p-12",children:[t==="verifying"&&e.jsxs("div",{className:"text-center",children:[e.jsx(vt,{className:"w-16 h-16 text-blue-600 mx-auto mb-4 animate-spin"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Verifying..."}),e.jsx("p",{className:"text-slate-600",children:"Please wait while we verify your login link"})]}),t==="success"&&e.jsxs("div",{className:"text-center",children:[e.jsx(Jn,{className:"w-16 h-16 text-green-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:n}),e.jsx("p",{className:"text-slate-600",children:"Taking you to your dashboard..."})]}),t==="error"&&e.jsxs("div",{className:"text-center",children:[e.jsx(vs,{className:"w-16 h-16 text-red-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Verification Failed"}),e.jsx("p",{className:"text-red-600 mb-6",children:n}),e.jsx("a",{href:Pe("Home"),className:"inline-block px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Request New Link"})]})]})})})}function SI(){const[t,s]=b.useState(""),[n,r]=b.useState(!1),[a,i]=b.useState(""),[l,o]=b.useState(!1),{data:c,isLoading:u}=me({queryKey:["roles"],queryFn:()=>X.entities.Role.list(),initialData:[]}),d=async h=>{var p,g;h.preventDefault(),i(""),r(!0),o(!1);try{console.log("[TestLogin] Calling validateUser with email:",t);const v=await X.functions.invoke("validateUser",{email:t});if(console.log("[TestLogin] Response received:",v.data),v.data.success&&v.data.user){const y={...v.data.user,sessionExpiry:new Date(Date.now()+864e5).toISOString()};if(sessionStorage.setItem("agcas_member",JSON.stringify(y)),y&&!y.is_team_member&&y.email)try{const N=(await X.entities.Member.list()).find(_=>_.email===y.email);N&&(await X.entities.Member.update(N.id,{last_login:new Date().toISOString()}),console.log("[TestLogin] Updated last_login for member:",N.email))}catch(w){console.warn("[TestLogin] Failed to update last_login:",w.message)}o(!0);let j="Events";if(y.role_id)try{const N=(await X.entities.Role.list()).find(_=>_.id===y.role_id);N&&N.default_landing_page&&(j=N.default_landing_page,console.log("[TestLogin] Using role default landing page:",j))}catch(w){console.warn("[TestLogin] Could not fetch role for landing page determination, using default Events:",w)}setTimeout(()=>{window.location.href=Pe(j)},1e3)}else i(v.data.error||"Failed to validate member")}catch(v){console.error("[TestLogin] Error:",v),i(((g=(p=v.response)==null?void 0:p.data)==null?void 0:g.error)||"An error occurred. Please try again.")}finally{r(!1)}},m=(h,p)=>{navigator.clipboard.writeText(h),te.success(`${p} copied to clipboard`)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-4xl",children:[e.jsx("div",{className:"mb-6 p-4 bg-amber-500 text-amber-950 rounded-lg border-2 border-amber-600",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(vs,{className:"w-5 h-5 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-sm",children:"TEST MODE ONLY"}),e.jsx("p",{className:"text-xs mt-1",children:"This page is for development testing only. Remove before production deployment."})]})]})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(le,{className:"border-slate-700 shadow-2xl bg-slate-800/50 backdrop-blur",children:[e.jsx(Fe,{children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-3 bg-purple-600 rounded-lg",children:e.jsx(Xs,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx(Ue,{className:"text-2xl text-white",children:"Test Login"}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Login as any member for testing"})]})]})}),e.jsxs(ce,{children:[e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"test-email",className:"text-sm font-medium text-slate-300",children:"Member Email Address"}),e.jsx(he,{id:"test-email",type:"email",placeholder:"Enter member email from Zoho CRM...",value:t,onChange:h=>s(h.target.value),required:!0,disabled:n,className:"bg-slate-700 border-slate-600 text-white placeholder:text-slate-400"}),e.jsx("p",{className:"text-xs text-slate-400",children:"This will check Zoho CRM for the contact and create/update the member in Base44"})]}),a&&e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-red-950/50 border border-red-800 rounded-lg",children:[e.jsx(vs,{className:"w-5 h-5 text-red-400 shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-200",children:a})]}),l&&e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-green-950/50 border border-green-800 rounded-lg",children:[e.jsx(Jn,{className:"w-5 h-5 text-green-400 shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-green-200",children:"Login successful! Redirecting..."})]}),e.jsx(J,{type:"submit",className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white",disabled:n||l,children:n?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Validating with Zoho CRM..."]}):l?"Redirecting...":"Login as Member"})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-700",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-300 mb-2",children:"How It Works"}),e.jsxs("div",{className:"space-y-2 text-xs text-slate-400",children:[e.jsx("p",{children:"1. Enter any email from your Zoho CRM Contacts"}),e.jsx("p",{children:"2. System validates against CRM and fetches account details"}),e.jsx("p",{children:"3. Creates/updates Member record in Base44"}),e.jsx("p",{children:"4. Logs you in as that member"})]})]})]})]}),e.jsxs(le,{className:"border-slate-700 shadow-2xl bg-slate-800/50 backdrop-blur",children:[e.jsx(Fe,{children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-3 bg-blue-600 rounded-lg",children:e.jsx(In,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx(Ue,{className:"text-2xl text-white",children:"Available Roles"}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Copy role IDs to assign to members"})]})]})}),e.jsxs(ce,{children:[u?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(vt,{className:"w-6 h-6 animate-spin text-slate-400"})}):c.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(In,{className:"w-12 h-12 text-slate-600 mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-slate-400",children:"No roles created yet"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Create roles in the Role entity first"})]}):e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:c.map(h=>e.jsxs("div",{className:"p-3 bg-slate-700/50 rounded-lg border border-slate-600 hover:border-slate-500 transition-colors",children:[e.jsx("div",{className:"flex items-start justify-between gap-2 mb-2",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-white truncate",children:h.name}),h.is_admin&&e.jsx(ye,{className:"bg-amber-600 text-white text-xs",children:"Admin"}),h.is_default&&e.jsx(ye,{className:"bg-green-600 text-white text-xs",children:"Default"})]}),h.description&&e.jsx("p",{className:"text-xs text-slate-400 mb-2",children:h.description})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"flex-1 text-xs bg-slate-900 text-blue-300 px-2 py-1 rounded overflow-x-auto",children:h.id}),e.jsx(J,{size:"sm",variant:"ghost",onClick:()=>m(h.id,"Role ID"),className:"shrink-0 text-slate-400 hover:text-white h-7",children:e.jsx(Va,{className:"w-3 h-3"})})]}),h.excluded_features&&h.excluded_features.length>0&&e.jsx("div",{className:"mt-2 pt-2 border-t border-slate-600",children:e.jsxs("p",{className:"text-xs text-slate-500",children:[h.excluded_features.length," feature(s) restricted"]})})]},h.id))}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-300 mb-2",children:"How to Use"}),e.jsxs("ol",{className:"space-y-1 text-xs text-slate-400 list-decimal list-inside",children:[e.jsx("li",{children:"Click copy button to copy a role ID"}),e.jsx("li",{children:"Go to Dashboard  Data  Member"}),e.jsxs("li",{children:["Edit a member and paste ID into ",e.jsx("code",{className:"px-1 py-0.5 bg-slate-700 rounded",children:"role_id"})," field"]}),e.jsx("li",{children:"Save and test login with that member's email"})]})]})]})]})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("a",{href:Pe("Home"),className:"text-sm text-slate-400 hover:text-slate-300 transition-colors",children:" Back to normal login"})})]})})}function CI({memberInfo:t,organizationInfo:s}){const{data:n,isLoading:r}=me({queryKey:["vouchers",s==null?void 0:s.id],queryFn:async()=>s!=null&&s.id?(await X.entities.Voucher.filter({organization_id:s.id,status:"active"})).sort((u,d)=>new Date(u.expires_at).getTime()-new Date(d.expires_at).getTime()):[],enabled:!!(s!=null&&s.id),initialData:[]});if(!t||!s)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-slate-600",children:"Loading..."})});const a=n.reduce((c,u)=>c+u.value,0),i=s.program_ticket_balances||{},l=Object.keys(i).sort(),o=Object.values(i).reduce((c,u)=>c+u,0);return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Account Balances"}),e.jsx("p",{className:"text-slate-600",children:"View your organization's training fund and voucher balances"})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs(le,{className:"border-slate-200 shadow-sm bg-gradient-to-br from-green-50 to-emerald-50",children:[e.jsx(Fe,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-green-600 rounded-lg",children:e.jsx(Ho,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx(Ue,{className:"text-xl",children:"Training Fund"}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Available for program ticket purchases"})]})]})}),e.jsxs(ce,{children:[e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsxs("span",{className:"text-4xl font-bold text-green-700",children:["",(s.training_fund_balance||0).toFixed(2)]})}),e.jsx("p",{className:"text-sm text-slate-600 mt-3",children:"Use your training fund balance when purchasing program tickets"})]})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm bg-gradient-to-br from-blue-50 to-indigo-50",children:[e.jsx(Fe,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-blue-600 rounded-lg",children:e.jsx(Rs,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx(Ue,{className:"text-xl",children:"Training Vouchers"}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Active vouchers available"})]})]})}),e.jsxs(ce,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsxs("span",{className:"text-4xl font-bold text-blue-700",children:["",a.toFixed(2)]})}),e.jsx("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:e.jsxs("span",{children:[n.length," active ",n.length===1?"voucher":"vouchers"]})})]}),e.jsx("p",{className:"text-sm text-slate-600 mt-3",children:"Apply vouchers when purchasing program tickets"})]})]})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm mb-8 bg-gradient-to-br from-purple-50 to-pink-50",children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-purple-600 rounded-lg",children:e.jsx(Rs,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx(Ue,{className:"text-xl",children:"Program Tickets"}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Available tickets by program"})]})]})}),e.jsx(ce,{className:"pt-6",children:l.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Rs,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-600",children:"No program tickets"}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Purchase program tickets to see them here"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white rounded-lg border-2 border-purple-200",children:[e.jsx("span",{className:"font-semibold text-slate-700",children:"Total Tickets"}),e.jsx("span",{className:"text-2xl font-bold text-purple-600",children:o})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:l.map(c=>e.jsx(le,{className:"border-2 border-purple-200 bg-white",children:e.jsx(ce,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-slate-900 mb-1",children:c}),e.jsx("p",{className:"text-xs text-slate-500",children:"Available tickets"})]}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:"text-3xl font-bold text-purple-600",children:i[c]})})]})})},c))})]})})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsx(Ue,{className:"text-xl",children:"Active Vouchers"})}),e.jsx(ce,{className:"pt-6",children:r?e.jsx("div",{className:"text-center py-8 text-slate-600",children:"Loading vouchers..."}):n.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Rs,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-600",children:"No active vouchers"}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Vouchers will appear here when allocated to your organization"})]}):e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:n.map(c=>{const u=new Date(c.expires_at),d=Vl(u,new Date),m=d<=30&&d>=0,h=d<0;return e.jsx(le,{className:`border-2 ${h?"border-red-200 bg-red-50":m?"border-amber-200 bg-amber-50":"border-blue-200 bg-blue-50"}`,children:e.jsxs(ce,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Rs,{className:`w-4 h-4 ${h?"text-red-600":m?"text-amber-600":"text-blue-600"}`}),e.jsx("h3",{className:"font-semibold text-slate-900",children:c.code})]}),c.description&&e.jsx("p",{className:"text-sm text-slate-600 mb-2",children:c.description})]}),e.jsxs(ye,{className:"bg-green-100 text-green-700 font-semibold shrink-0 ml-2",children:["",c.value.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(Ns,{className:`w-3 h-3 ${h?"text-red-600":m?"text-amber-600":"text-slate-400"}`}),e.jsxs("span",{className:h?"text-red-600 font-medium":m?"text-amber-600 font-medium":"text-slate-500",children:[h?"Expired":"Expires"," ",Mt(u,"MMM d, yyyy"),m&&!h&&` (${d} days)`]})]}),m&&!h&&e.jsxs("div",{className:"flex items-start gap-2 mt-3 p-2 bg-amber-100 rounded-lg",children:[e.jsx(vs,{className:"w-4 h-4 text-amber-700 shrink-0 mt-0.5"}),e.jsx("p",{className:"text-xs text-amber-800",children:"This voucher expires soon. Use it before it becomes invalid."})]})]})},c.id)})})})]})]})})}function kI({memberInfo:t,organizationInfo:s}){if(!t||!s)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-slate-600",children:"Loading..."})});const n=s.program_ticket_balances?Object.values(s.program_ticket_balances).reduce((l,o)=>l+o,0):0,r=[{icon:Ns,title:"Browse Events",description:"Explore our comprehensive calendar of professional development events, training sessions, and networking opportunities tailored for AGCAS members.",link:Pe("Events"),linkText:"View Events",color:"blue"},{icon:fd,title:"My Bookings",description:"View and manage all your event registrations in one place. Track your upcoming events and download booking confirmations.",link:Pe("MyBookings"),linkText:"View Bookings",color:"green"},{icon:Rs,title:"Program Tickets",description:"Purchase and manage program-specific tickets that give you flexible access to events within designated training programs.",link:Pe("BuyProgramTickets"),linkText:"Buy Tickets",color:"purple"},{icon:Ho,title:"Account Balances",description:"Monitor your organization's training fund balance and available vouchers. Keep track of your professional development budget.",link:Pe("Balances"),linkText:"View Balances",color:"indigo"}],a=["Browse available events and filter by program","Check your organization's available tickets and vouchers","Register yourself or colleagues for events","Manage your bookings and track attendance"],i={blue:{bg:"from-blue-600 to-indigo-600",icon:"bg-blue-100 text-blue-600",border:"border-blue-200"},green:{bg:"from-green-600 to-emerald-600",icon:"bg-green-100 text-green-600",border:"border-green-200"},purple:{bg:"from-purple-600 to-pink-600",icon:"bg-purple-100 text-purple-600",border:"border-purple-200"},indigo:{bg:"from-indigo-600 to-blue-600",icon:"bg-indigo-100 text-indigo-600",border:"border-indigo-200"}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-16 px-4 md:px-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"max-w-3xl",children:[e.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:["Welcome back, ",t.first_name,"!"]}),e.jsx("p",{className:"text-xl text-blue-100 mb-8",children:"Your professional development journey starts here. Book training events, manage your tickets, and stay connected with the AGCAS community."}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx(Ht,{to:Pe("Events"),children:e.jsxs(J,{size:"lg",className:"bg-white text-blue-600 hover:bg-blue-50",children:["Browse Events",e.jsx(zN,{className:"w-5 h-5 ml-2"})]})}),e.jsx(Ht,{to:Pe("MyBookings"),children:e.jsx(J,{size:"lg",className:"bg-white text-blue-600 hover:bg-blue-50",children:"My Bookings"})})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-8 -mt-8 mb-12",children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsx(le,{className:"border-slate-200 shadow-lg",children:e.jsx(ce,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Organisation"}),e.jsx("p",{className:"text-xl font-bold text-slate-900",children:s.name})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(Ns,{className:"w-6 h-6 text-blue-600"})})]})})}),e.jsx(le,{className:"border-slate-200 shadow-lg",children:e.jsx(ce,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Training Fund"}),e.jsxs("p",{className:"text-xl font-bold text-green-600",children:["",(s.training_fund_balance||0).toFixed(2)]})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(Ho,{className:"w-6 h-6 text-green-600"})})]})})}),e.jsx(le,{className:"border-slate-200 shadow-lg",children:e.jsx(ce,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Program Tickets"}),e.jsx("p",{className:"text-xl font-bold text-purple-600",children:n})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(Rs,{className:"w-6 h-6 text-purple-600"})})]})})})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-8 mb-12",children:e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsxs(Fe,{className:"border-b border-slate-200",children:[e.jsx(Ue,{className:"text-2xl",children:"How to Use This Portal"}),e.jsx(Es,{className:"text-base mt-2",children:"Follow these simple steps to make the most of your AGCAS membership"})]}),e.jsx(ce,{className:"pt-6",children:e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:a.map((l,o)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold",children:o+1}),e.jsx("p",{className:"text-slate-700 pt-1",children:l})]},o))})})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8 pb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-8",children:"Portal Features"}),e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:r.map((l,o)=>{const c=l.icon,u=i[l.color];return e.jsxs(le,{className:`border-2 ${u.border} hover:shadow-xl transition-all`,children:[e.jsxs(Fe,{children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsx("div",{className:`p-3 ${u.icon} rounded-lg`,children:e.jsx(c,{className:"w-6 h-6"})})}),e.jsx(Ue,{className:"text-xl mb-2",children:l.title}),e.jsx(Es,{className:"text-base text-slate-600",children:l.description})]}),e.jsx(ce,{children:e.jsx(Ht,{to:l.link,children:e.jsxs(J,{className:`w-full bg-gradient-to-r ${u.bg} hover:opacity-90`,children:[l.linkText,e.jsx(zN,{className:"w-4 h-4 ml-2"})]})})})]},o)})})]}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-8 pb-16",children:e.jsx(le,{className:"border-slate-200 shadow-sm bg-gradient-to-r from-slate-50 to-blue-50",children:e.jsxs(ce,{className:"p-8 text-center",children:[e.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-3",children:"Need Help?"}),e.jsx("p",{className:"text-slate-600 mb-6 max-w-2xl mx-auto",children:"If you have any questions about using the portal, booking events, or managing your account, please don't hesitate to contact your AGCAS membership administrator."}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[e.jsx(Jn,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm text-slate-600",children:"Easy event booking"}),e.jsx(Jn,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm text-slate-600",children:"Flexible ticket management"}),e.jsx(Jn,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm text-slate-600",children:"Real-time balance tracking"})]})]})})})]})}function EI(){return b.useEffect(()=>{const t=document.createElement("link");t.rel="stylesheet",t.href="https://static.zohocdn.com/backstage/v1.0/styles/ticket-widget/v1.3/register-widget.min.css",document.head.appendChild(t);const s=document.createElement("script");return s.src="https://static.zohocdn.com/backstage/v1.0/javascript/ticket-widget/v1.3/register-widget.min.js",s.async=!0,s.onload=()=>{window.ZBSCheckOutWidget&&window.ZBSCheckOutWidget._createWidget({eventUrl:"https://agcasevents.zohobackstage.eu/embed/international-employability/buyTickets",modal:!1,clickableElements:[],ticketClassIdVsSelectorMap:{},skipValidation:!1,widgetOptions:{theme:{primaryButton:{backgroundColor:"#003A1A",textColor:"#ffffff",borderColor:"#FFFFFF"},eventHeader:{backgroundColor:"#003A1A",textColor:"#ffffff"}},visibilityOptions:{showEventHeader:!0,showCheckoutProgress:!0,showBSBranding:!0,showEventDate:!0,showEventVenue:!0,ticketClassIds:[]},redirectUrl:"",affiliate:"",promoCode:"",showFillInfo:!1,showRegisterModalWithInfoPage:!1,messageContents:{"lbl.closed":"closed","lbl.yet.to.start":"yet to start","lbl.sales.ended":"sales ended","lbl.unavailable":"unavailable","lbl.sold.out":"sold out","lbl.open":"register now"}},onOrderComplete:function(n){},onClose:function(n){}},"#zbs-register-widget-section")},document.body.appendChild(s),()=>{document.head.removeChild(t),document.body.removeChild(s)}},[]),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-900 to-emerald-800 text-white py-16 px-4 md:px-8",children:e.jsxs("div",{className:"max-w-5xl mx-auto text-center",children:[e.jsx("div",{className:"inline-block px-4 py-2 bg-white/10 rounded-full text-sm font-medium mb-4",children:"Unpacked Series"}),e.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:"International Employability"}),e.jsx("p",{className:"text-xl md:text-2xl text-green-100 max-w-3xl mx-auto",children:"Join us for an insightful session exploring strategies, challenges, and opportunities in international employability for students and graduates."})]})}),e.jsx("div",{className:"max-w-5xl mx-auto px-4 md:px-8 py-12",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:e.jsxs("div",{className:"p-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-4 text-center",children:"Event Registration"}),e.jsx("p",{className:"text-center text-slate-600 mb-8",children:"Secure your place at this exclusive AGCAS event"}),e.jsx("div",{id:"zbs-register-widget-section"})]})})}),e.jsx("footer",{className:"bg-white border-t border-slate-200 py-6 mt-12",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 text-center",children:e.jsxs("p",{className:"text-sm text-slate-600",children:[" ",new Date().getFullYear()," AGCAS. All rights reserved."]})})})]})}function gd({categories:t,selectedSubcategories:s,onSubcategoryToggle:n,searchQuery:r,onSearchChange:a,onClearSearch:i,isLoading:l=!1,displayName:o="Articles"}){const[c,u]=Be.useState({}),[d,m]=Be.useState({}),[h,p]=Be.useState(!0),g=w=>{u(N=>({...N,[w]:!N[w]}))},v=w=>{m(N=>({...N,[w]:!N[w]}))},y=(w,N)=>{N.stopPropagation();const _=t.find(T=>T.name===w);_&&_.subcategories&&_.subcategories.forEach(A=>{s.includes(A)&&n(A)})},j=w=>{const N=t.find(_=>_.name===w);return!N||!N.subcategories?!1:N.subcategories.some(_=>s.includes(_))};return Be.useEffect(()=>{if(!t||t.length===0)return;const w={};t.forEach(N=>{j(N.name)&&(w[N.name]=!0)}),u(N=>({...N,...w}))},[t]),l?e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"text-sm text-slate-500 italic",children:"Loading categories..."})}):!t||t.length===0?e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"text-sm text-slate-500 italic",children:"No categories available"})}):e.jsxs("div",{className:"space-y-0",children:[e.jsx("style",{jsx:!0,children:`
        .accordion-content {
          overflow: hidden;
          transition: max-height 0.3s ease-in-out, opacity 0.3s ease-in-out;
        }
        .accordion-content[data-state="closed"] {
          max-height: 0;
          opacity: 0;
        }
        .accordion-content[data-state="open"] {
          max-height: 1000px;
          opacity: 1;
        }
        .accordion-content[data-state="open-category"] {
          max-height: 2000px;
          opacity: 1;
        }
      `}),e.jsxs("div",{className:"border-b border-slate-200 py-3",children:[e.jsxs("button",{onClick:()=>p(!h),className:"w-full flex items-center justify-between px-2 py-1.5 text-sm font-semibold rounded-md transition-colors text-left hover:bg-slate-100 text-slate-700",children:[e.jsxs("span",{children:["Search ",o]}),h?e.jsx(Or,{className:"w-3.5 h-3.5 text-slate-600 flex-shrink-0 transition-transform duration-200 ease-in-out"}):e.jsx(js,{className:"w-3.5 h-3.5 text-slate-600 flex-shrink-0 transition-transform duration-200 ease-in-out"})]}),e.jsx("div",{className:"accordion-content","data-state":h?"open":"closed",children:e.jsx("div",{className:"pt-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx(he,{placeholder:"Search...",value:r,onChange:w=>a(w.target.value),className:"pl-10 pr-10"}),r&&e.jsx("button",{onClick:i,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:e.jsx(_s,{className:"w-4 h-4"})})]})})})]}),e.jsx("div",{children:t.map(w=>{if(!(w.subcategories&&w.subcategories.length>0))return null;const _=c[w.name],T=d[w.name],A=[...w.subcategories].sort((M,k)=>M.localeCompare(k,void 0,{sensitivity:"base"})),P=T?A:A.slice(0,8),C=A.length>8,O=j(w.name);return e.jsxs("div",{className:"border-b border-slate-200 py-3",children:[e.jsxs("button",{onClick:()=>g(w.name),className:"w-full flex items-center justify-between px-2 py-1.5 text-sm font-semibold rounded-md transition-colors text-left hover:bg-slate-100 text-purple-700",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("span",{className:"break-words",children:w.name}),O&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full font-medium",children:w.subcategories.filter(M=>s.includes(M)).length})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[O&&e.jsx("span",{onClick:M=>y(w.name,M),className:"text-xs text-blue-600 hover:text-blue-700 hover:underline",children:"Clear"}),_?e.jsx(Or,{className:"w-3.5 h-3.5 text-slate-600 flex-shrink-0 transition-transform duration-200 ease-in-out"}):e.jsx(js,{className:"w-3.5 h-3.5 text-slate-600 flex-shrink-0 transition-transform duration-200 ease-in-out"})]})]}),e.jsx("div",{className:"accordion-content","data-state":_?"open-category":"closed",children:e.jsxs("div",{className:"space-y-0.5 pt-1",children:[P.map(M=>{const k=s.includes(M);return e.jsxs("div",{className:`flex items-start gap-2 px-2 py-1 rounded-md cursor-pointer transition-colors ${k?"bg-blue-50":"hover:bg-slate-50"}`,onClick:E=>{E.target===E.currentTarget&&n(M)},children:[e.jsx(ba,{id:`article-subcategory-${M}`,checked:k,onCheckedChange:()=>n(M),className:"mt-0.5 flex-shrink-0 data-[state=checked]:bg-blue-600 data-[state=checked]:border-blue-600"}),e.jsx(ee,{htmlFor:`article-subcategory-${M}`,className:`text-xs cursor-pointer break-words flex-1 leading-tight pt-0.5 ${k?"text-blue-700 font-medium":"text-slate-700"}`,children:M})]},M)}),C&&e.jsx("button",{onClick:()=>v(w.name),className:"w-full text-left px-2 py-1 text-xs text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-md transition-colors",children:T?" Show less":`+ View ${A.length-8} more`})]})})]},w.id)})})]})}const Sce="modulepreload",Cce=function(t){return"/"+t},aA={},ov=function(s,n,r){let a=Promise.resolve();if(n&&n.length>0){let l=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=l(n.map(u=>{if(u=Cce(u),u in aA)return;aA[u]=!0;const d=u.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${m}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Sce,d||(h.as="script"),h.crossOrigin="",h.href=u,c&&h.setAttribute("nonce",c),document.head.appendChild(h),d)return new Promise((p,g)=>{h.addEventListener("load",p),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return a.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return s().catch(i)})};function Is({text:t,link:s,buttonStyleId:n,customBgColor:r,customTextColor:a,customBorderColor:i,openInNewTab:l=!1,size:o="medium",showArrow:c=!1,children:u,onClick:d,className:m,disabled:h=!1,icon:p,...g}){const[v,y]=Be.useState(null);Be.useEffect(()=>{n&&(async()=>{try{const{base44:C}=await ov(async()=>{const{base44:k}=await Promise.resolve().then(()=>N0);return{base44:k}},[]),M=(await C.entities.ButtonStyle.list()).find(k=>k.id===n);y(M)}catch(C){console.error("Failed to fetch button style:",C)}})()},[n]);const j=r||a||i,w=j?{backgroundColor:r||"transparent",color:a||"#ffffff",...i?{border:`2px solid ${i}`}:{},fontFamily:"Poppins, sans-serif"}:v?{backgroundColor:v.background_color||"transparent",color:v.text_color||"#000000",borderColor:v.border_color||"#000000",borderWidth:v.border_width?`${v.border_width}px`:"2px",borderStyle:"solid",borderRadius:v.border_radius?`${v.border_radius}px`:"0px",fontFamily:v.font_family||"Poppins, sans-serif"}:{fontFamily:"Poppins, sans-serif"},N=v!=null&&v.hover_background_color||v!=null&&v.hover_text_color?{"--hover-bg":v.hover_background_color||w.backgroundColor,"--hover-text":v.hover_text_color||w.color}:{},_={small:"px-4 py-2 text-xs",medium:"px-6 py-3 text-sm",large:"px-8 py-4 text-base",xlarge:"px-10 py-5 text-lg"},T=tt("inline-flex items-center justify-center gap-2 whitespace-nowrap",v||j?"":"rounded-none bg-transparent",_[o]||_.medium,"font-bold",v||j?"":"text-black","transition-all duration-300",v||j?"":"hover:text-white","disabled:opacity-50 disabled:cursor-not-allowed",v||j?"agcas-styled-button":"agcas-button",m),A=s?"a":"button";return e.jsxs(A,{href:s||void 0,target:l?"_blank":void 0,rel:l?"noopener noreferrer":void 0,onClick:d,disabled:!s&&h,className:T,style:{...w,...N},...g,children:[e.jsx("style",{jsx:!0,children:`
        .agcas-button {
          box-shadow: inset 0 0 0 2px black;
        }
        .agcas-button:hover:not(:disabled) {
          background: linear-gradient(to right top, rgb(92, 0, 133), rgb(186, 0, 135), rgb(238, 0, 195), rgb(255, 66, 41), rgb(255, 176, 0));
          box-shadow: none !important;
        }
        .agcas-button:disabled {
          background: transparent;
        }
        .agcas-styled-button:hover:not(:disabled) {
          background-color: var(--hover-bg);
          color: var(--hover-text);
        }
      `}),t||u,c&&e.jsx(Mr,{className:"w-5 h-5 ml-0.5",strokeWidth:2.5}),p&&e.jsx(p,{className:"w-5 h-5 ml-0.5",strokeWidth:2.5})]})}function Ba({onClick:t,className:s,disabled:n=!1,...r}){return e.jsxs("button",{onClick:t,disabled:n,className:tt("inline-flex items-center justify-center","rounded-none bg-transparent","w-16 h-16 text-black","transition-all duration-300","hover:text-white","disabled:opacity-50 disabled:cursor-not-allowed","agcas-square-button",s),style:{fontFamily:"Poppins, sans-serif"},...r,children:[e.jsx("style",{jsx:!0,children:`
        .agcas-square-button {
          box-shadow: inset 0 0 0 2px black;
        }
        .agcas-square-button:hover:not(:disabled) {
          background: linear-gradient(to right top, rgb(92, 0, 133), rgb(186, 0, 135), rgb(238, 0, 195), rgb(255, 66, 41), rgb(255, 176, 0));
          box-shadow: none !important;
        }
        .agcas-square-button:disabled {
          background: transparent;
        }
      `}),e.jsx(Mr,{className:"w-10 h-10",strokeWidth:2.5})]})}const kce={ArrowUpRight:Mr,Download:Zn,ExternalLink:Js,PlayCircle:ih,Eye:gr,FileText:ns,Mail:Ms,Plus:Pt};function vd({article:t,buttonStyles:s=[],viewPageUrl:n="ArticleView",showActions:r=!0,displayName:a="Articles"}){const i=s.find(u=>u.card_type==="article")||null,l=`${Pe(n)}?slug=${t.slug}`,o=a.endsWith("s")?a.slice(0,-1):a,c=()=>{if(!i)return e.jsx(J,{asChild:!0,className:"w-full bg-blue-600 hover:bg-blue-700",children:e.jsxs(Ht,{to:l,children:[e.jsx(Mr,{className:"w-4 h-4 mr-2"}),"Read ",o]})});let u=i.button_text||`Read ${o}`;u.includes("Article")&&(u=u.replace("Article",o));const d=i.button_type,m=i.icon_name&&kce[i.icon_name];return d==="square_agcas"?e.jsx(Ht,{to:l,children:e.jsx(Ba,{})}):d==="rectangular_agcas"?e.jsx(Ht,{to:l,children:e.jsx(Is,{icon:i.icon_name!=="none"?m:void 0,className:"w-full",children:u})}):e.jsx(J,{asChild:!0,className:"w-full bg-blue-600 hover:bg-blue-700",children:e.jsxs(Ht,{to:l,children:[m&&i.icon_name!=="none"&&e.jsx(m,{className:"w-4 h-4 mr-2"}),u]})})};return e.jsxs(le,{className:"border-slate-200 hover:shadow-lg transition-shadow duration-300 overflow-hidden h-full flex flex-col",children:[t.feature_image_url&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-48 overflow-hidden bg-slate-100",children:e.jsx("img",{src:t.feature_image_url,alt:t.title,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"})}),e.jsx("div",{className:"w-full h-[3px]",style:{backgroundColor:"#5d0d77"}})]}),e.jsxs(Fe,{className:"pb-3 flex-grow",children:[e.jsx(Ue,{className:"text-lg line-clamp-2",children:t.title}),t.published_date&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-500 py-2",children:[e.jsx(Ns,{className:"w-3 h-3"}),e.jsx("span",{children:Mt(new Date(t.published_date),"MMM d, yyyy")})]}),r&&t.author_name&&e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-slate-600 pb-3",children:[e.jsx(Xs,{className:"w-3 h-3"}),e.jsxs("span",{children:["by ",t.author_name]})]}),t.summary&&e.jsx("p",{className:"text-sm text-slate-600 line-clamp-3",children:t.summary}),t.subcategories&&t.subcategories.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 pt-4",children:[t.subcategories.slice(0,3).map((u,d)=>e.jsx(ye,{variant:"secondary",className:"text-xs",children:u},d)),t.subcategories.length>3&&e.jsxs(ye,{variant:"secondary",className:"text-xs",children:["+",t.subcategories.length-3]})]})]}),e.jsx(ce,{className:"pt-0 pb-4 mt-auto",children:c()})]})}function PI({memberInfo:t,memberRole:s}){const[n,r]=b.useState(""),[a,i]=b.useState([]),[l,o]=b.useState(1),[c,u]=b.useState("newest"),[d,m]=b.useState(6),[h,p]=b.useState(!1),g=Yt(),{data:v}=me({queryKey:["current-user",t==null?void 0:t.email],queryFn:async()=>await X.auth.me(),enabled:!!t,staleTime:300*1e3,refetchOnWindowFocus:!1}),{data:y=[],isLoading:j}=me({queryKey:["published-articles"],queryFn:async()=>(await X.entities.BlogPost.list("-published_date")).filter(Z=>Z.status==="published"),staleTime:0,refetchOnWindowFocus:!0}),{data:w=[],isLoading:N}=me({queryKey:["resourceCategories-articles"],queryFn:async()=>(await X.entities.ResourceCategory.list()).filter(Q=>Q.is_active&&Q.applies_to_content_types&&Q.applies_to_content_types.includes("Articles")).sort((Q,Y)=>(Q.display_order||0)-(Y.display_order||0)),staleTime:0,refetchOnWindowFocus:!0}),{data:_=[]}=me({queryKey:["all-article-views"],queryFn:async()=>await X.entities.ArticleView.list(),staleTime:30*1e3}),{data:T=[]}=me({queryKey:["all-article-reactions"],queryFn:async()=>await X.entities.ArticleReaction.list(),staleTime:30*1e3}),{data:A=[]}=me({queryKey:["buttonStyles-articles"],queryFn:async()=>(await X.entities.ButtonStyle.list()).filter(Z=>Z.card_type==="article"&&Z.is_active),staleTime:0,refetchOnWindowFocus:!0}),{data:P,isLoading:C}=me({queryKey:["article-display-name"],queryFn:async()=>{const Z=(await X.entities.SystemSettings.list()).find(Q=>Q.setting_key==="article_display_name");return(Z==null?void 0:Z.setting_value)||"Articles"},staleTime:0});Be.useEffect(()=>{var q;if((q=v==null?void 0:v.preferences)!=null&&q.resources&&!h){const Z=v.preferences.resources.selectedSubcategories||[];i(Z),p(!0)}},[v,h]);const O=Le({mutationFn:async()=>{const q={...(v==null?void 0:v.preferences)||{},resources:{selectedCategory:"all",selectedSubcategories:a}};await X.auth.updateMe({preferences:q})},onSuccess:()=>{g.invalidateQueries({queryKey:["current-user"]}),te.success("Filter preferences saved as default")},onError:q=>{te.error("Failed to save preferences: "+q.message)}}),M=b.useMemo(()=>{const q={};return y.forEach(Z=>{q[Z.id]={viewCount:_.filter(Q=>Q.article_id===Z.id).length,likeCount:T.filter(Q=>Q.article_id===Z.id&&Q.reaction_type==="up").length}}),q},[y,_,T]),k=b.useMemo(()=>y.filter(q=>{var Y,K,ae;const Z=((Y=q.title)==null?void 0:Y.toLowerCase().includes(n.toLowerCase()))||((K=q.summary)==null?void 0:K.toLowerCase().includes(n.toLowerCase()))||((ae=q.tags)==null?void 0:ae.some(se=>se.toLowerCase().includes(n.toLowerCase()))),Q=a.length===0||q.subcategories&&q.subcategories.some(se=>a.includes(se));return Z&&Q}),[y,n,a]),E=b.useMemo(()=>{const q=[...k];switch(c){case"newest":q.sort((Z,Q)=>new Date(Q.published_date||Q.created_date)-new Date(Z.published_date||Z.created_date));break;case"oldest":q.sort((Z,Q)=>new Date(Z.published_date||Z.created_date)-new Date(Q.published_date||Z.created_date));break;case"title-asc":q.sort((Z,Q)=>Z.title.localeCompare(Q.title));break;case"title-desc":q.sort((Z,Q)=>Q.title.localeCompare(Z.title));break;case"most-viewed":q.sort((Z,Q)=>{var Y,K;return(((Y=M[Q.id])==null?void 0:Y.viewCount)||0)-(((K=M[Z.id])==null?void 0:K.viewCount)||0)});break;case"most-liked":q.sort((Z,Q)=>{var Y,K;return(((Y=M[Q.id])==null?void 0:Y.likeCount)||0)-(((K=M[Z.id])==null?void 0:K.likeCount)||0)});break}return q},[k,c,M]),R=Math.ceil(E.length/d),F=(l-1)*d,z=F+d,V=E.slice(F,z),U=()=>{const q=[];if(R<=5)for(let Q=1;Q<=R;Q++)q.push(Q);else if(l<=3){for(let Q=1;Q<=4;Q++)q.push(Q);R>5&&q.push("..."),q.push(R)}else if(l>=R-2){q.push(1),R>5&&q.push("...");for(let Q=R-3;Q<=R;Q++)q.push(Q)}else{q.push(1),q.push("...");for(let Q=l-1;Q<=l+1;Q++)q.push(Q);q.push("..."),q.push(R)}return q};Be.useEffect(()=>{o(1)},[a,n,c,d]);const B=q=>{i(Z=>Z.includes(q)?Z.filter(Q=>Q!==q):[...Z,q])},$=q=>{o(q),window.scrollTo({top:0,behavior:"smooth"})},L=()=>{O.mutate()},I=j||N||C,W=b.useMemo(()=>{var Z;if(!((Z=v==null?void 0:v.preferences)!=null&&Z.resources))return a.length>0;const q=v.preferences.resources.selectedSubcategories||[];return q.length!==a.length?!0:!q.every(Q=>a.includes(Q))||!a.every(Q=>q.includes(Q))},[v,a]);return I?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Array(6).fill(0).map((q,Z)=>e.jsxs(le,{className:"animate-pulse border-slate-200",children:[e.jsx("div",{className:"h-48 bg-slate-200"}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"h-6 bg-slate-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded w-full"})]})]},Z))})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:P}),e.jsxs("p",{className:"text-slate-600",children:["Explore ",P.toLowerCase()," shared by our community"]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("div",{className:"lg:w-64 flex-shrink-0",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 sticky top-8",children:[e.jsx(gd,{categories:w,selectedSubcategories:a,onSubcategoryToggle:B,searchQuery:n,onSearchChange:r,onClearSearch:()=>r(""),isLoading:N,displayName:P}),t&&W&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200",children:[e.jsx(J,{onClick:L,variant:"outline",size:"sm",className:"w-full gap-2",disabled:O.isPending,children:O.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-3 h-3 border-2 border-slate-400 border-t-transparent rounded-full animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(un,{className:"w-3 h-3"}),"Save as Default"]})}),e.jsx("p",{className:"text-xs text-slate-500 mt-2 text-center",children:"Apply these filters by default"})]})]})}),e.jsx("div",{className:"flex-1",children:E.length===0?e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(Yl,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsxs("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:["No ",P.toLowerCase()," found"]}),e.jsx("p",{className:"text-slate-600",children:n||a.length>0?"Try adjusting your search or filters":"Check back later for new content"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 gap-3",children:[e.jsxs("div",{className:"text-sm text-slate-600",children:["Showing ",F+1,"-",Math.min(z,E.length)," of ",E.length," ",P.toLowerCase()]}),e.jsxs(Ke,{value:c,onValueChange:u,children:[e.jsxs(Ve,{className:"w-48",children:[e.jsx(Ql,{className:"w-4 h-4 mr-2"}),e.jsx(Qe,{placeholder:"Sort By"})]}),e.jsxs(We,{children:[e.jsx(re,{value:"newest",children:"Newest First"}),e.jsx(re,{value:"oldest",children:"Oldest First"}),e.jsx(re,{value:"most-viewed",children:"Most Viewed"}),e.jsx(re,{value:"most-liked",children:"Most Liked"}),e.jsx(re,{value:"title-asc",children:"Title A-Z"}),e.jsx(re,{value:"title-desc",children:"Title Z-A"})]})]})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:V.map(q=>e.jsx(vd,{article:q,buttonStyles:A,displayName:P},q.id))}),E.length>0&&e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsx(ce,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"Items per page:"}),e.jsxs(Ke,{value:d.toString(),onValueChange:q=>{m(Number(q)),o(1)},children:[e.jsx(Ve,{className:"w-20",children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"6",children:"6"}),e.jsx(re,{value:"12",children:"12"}),e.jsx(re,{value:"24",children:"24"}),e.jsx(re,{value:"48",children:"48"})]})]})]}),e.jsxs("div",{className:"text-sm text-slate-600",children:["Page ",l," of ",R]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(J,{variant:"outline",size:"sm",onClick:()=>$(l-1),disabled:l===1,children:e.jsx(Wn,{className:"w-4 h-4"})}),U().map((q,Z)=>e.jsx(Be.Fragment,{children:q==="..."?e.jsx("span",{className:"px-2 text-slate-400",children:"..."}):e.jsx(J,{variant:l===q?"default":"outline",size:"sm",onClick:()=>$(q),className:l===q?"bg-blue-600 hover:bg-blue-700":"",children:q})},Z)),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>$(l+1),disabled:l===R,children:e.jsx(js,{className:"w-4 h-4"})})]})]})})})]})})]})]})})}var uj,iA;function Ece(){if(iA)return uj;iA=1;function t(){this.__data__=[],this.size=0}return uj=t,uj}var hj,lA;function TI(){if(lA)return hj;lA=1;function t(s,n){return s===n||s!==s&&n!==n}return hj=t,hj}var mj,oA;function cv(){if(oA)return mj;oA=1;var t=TI();function s(n,r){for(var a=n.length;a--;)if(t(n[a][0],r))return a;return-1}return mj=s,mj}var fj,cA;function Pce(){if(cA)return fj;cA=1;var t=cv(),s=Array.prototype,n=s.splice;function r(a){var i=this.__data__,l=t(i,a);if(l<0)return!1;var o=i.length-1;return l==o?i.pop():n.call(i,l,1),--this.size,!0}return fj=r,fj}var pj,dA;function Tce(){if(dA)return pj;dA=1;var t=cv();function s(n){var r=this.__data__,a=t(r,n);return a<0?void 0:r[a][1]}return pj=s,pj}var xj,uA;function Ace(){if(uA)return xj;uA=1;var t=cv();function s(n){return t(this.__data__,n)>-1}return xj=s,xj}var gj,hA;function Mce(){if(hA)return gj;hA=1;var t=cv();function s(n,r){var a=this.__data__,i=t(a,n);return i<0?(++this.size,a.push([n,r])):a[i][1]=r,this}return gj=s,gj}var vj,mA;function dv(){if(mA)return vj;mA=1;var t=Ece(),s=Pce(),n=Tce(),r=Ace(),a=Mce();function i(l){var o=-1,c=l==null?0:l.length;for(this.clear();++o<c;){var u=l[o];this.set(u[0],u[1])}}return i.prototype.clear=t,i.prototype.delete=s,i.prototype.get=n,i.prototype.has=r,i.prototype.set=a,vj=i,vj}var yj,fA;function Dce(){if(fA)return yj;fA=1;var t=dv();function s(){this.__data__=new t,this.size=0}return yj=s,yj}var bj,pA;function Oce(){if(pA)return bj;pA=1;function t(s){var n=this.__data__,r=n.delete(s);return this.size=n.size,r}return bj=t,bj}var jj,xA;function Rce(){if(xA)return jj;xA=1;function t(s){return this.__data__.get(s)}return jj=t,jj}var wj,gA;function Fce(){if(gA)return wj;gA=1;function t(s){return this.__data__.has(s)}return wj=t,wj}var Nj,vA;function AI(){if(vA)return Nj;vA=1;var t=typeof Cx=="object"&&Cx&&Cx.Object===Object&&Cx;return Nj=t,Nj}var _j,yA;function Jl(){if(yA)return _j;yA=1;var t=AI(),s=typeof self=="object"&&self&&self.Object===Object&&self,n=t||s||Function("return this")();return _j=n,_j}var Sj,bA;function lS(){if(bA)return Sj;bA=1;var t=Jl(),s=t.Symbol;return Sj=s,Sj}var Cj,jA;function Lce(){if(jA)return Cj;jA=1;var t=lS(),s=Object.prototype,n=s.hasOwnProperty,r=s.toString,a=t?t.toStringTag:void 0;function i(l){var o=n.call(l,a),c=l[a];try{l[a]=void 0;var u=!0}catch{}var d=r.call(l);return u&&(o?l[a]=c:delete l[a]),d}return Cj=i,Cj}var kj,wA;function Ice(){if(wA)return kj;wA=1;var t=Object.prototype,s=t.toString;function n(r){return s.call(r)}return kj=n,kj}var Ej,NA;function uv(){if(NA)return Ej;NA=1;var t=lS(),s=Lce(),n=Ice(),r="[object Null]",a="[object Undefined]",i=t?t.toStringTag:void 0;function l(o){return o==null?o===void 0?a:r:i&&i in Object(o)?s(o):n(o)}return Ej=l,Ej}var Pj,_A;function MI(){if(_A)return Pj;_A=1;function t(s){var n=typeof s;return s!=null&&(n=="object"||n=="function")}return Pj=t,Pj}var Tj,SA;function DI(){if(SA)return Tj;SA=1;var t=uv(),s=MI(),n="[object AsyncFunction]",r="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function l(o){if(!s(o))return!1;var c=t(o);return c==r||c==a||c==n||c==i}return Tj=l,Tj}var Aj,CA;function Bce(){if(CA)return Aj;CA=1;var t=Jl(),s=t["__core-js_shared__"];return Aj=s,Aj}var Mj,kA;function qce(){if(kA)return Mj;kA=1;var t=Bce(),s=(function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function n(r){return!!s&&s in r}return Mj=n,Mj}var Dj,EA;function OI(){if(EA)return Dj;EA=1;var t=Function.prototype,s=t.toString;function n(r){if(r!=null){try{return s.call(r)}catch{}try{return r+""}catch{}}return""}return Dj=n,Dj}var Oj,PA;function zce(){if(PA)return Oj;PA=1;var t=DI(),s=qce(),n=MI(),r=OI(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,l=Function.prototype,o=Object.prototype,c=l.toString,u=o.hasOwnProperty,d=RegExp("^"+c.call(u).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(h){if(!n(h)||s(h))return!1;var p=t(h)?d:i;return p.test(r(h))}return Oj=m,Oj}var Rj,TA;function $ce(){if(TA)return Rj;TA=1;function t(s,n){return s==null?void 0:s[n]}return Rj=t,Rj}var Fj,AA;function _h(){if(AA)return Fj;AA=1;var t=zce(),s=$ce();function n(r,a){var i=s(r,a);return t(i)?i:void 0}return Fj=n,Fj}var Lj,MA;function oS(){if(MA)return Lj;MA=1;var t=_h(),s=Jl(),n=t(s,"Map");return Lj=n,Lj}var Ij,DA;function hv(){if(DA)return Ij;DA=1;var t=_h(),s=t(Object,"create");return Ij=s,Ij}var Bj,OA;function Uce(){if(OA)return Bj;OA=1;var t=hv();function s(){this.__data__=t?t(null):{},this.size=0}return Bj=s,Bj}var qj,RA;function Vce(){if(RA)return qj;RA=1;function t(s){var n=this.has(s)&&delete this.__data__[s];return this.size-=n?1:0,n}return qj=t,qj}var zj,FA;function Wce(){if(FA)return zj;FA=1;var t=hv(),s="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function a(i){var l=this.__data__;if(t){var o=l[i];return o===s?void 0:o}return r.call(l,i)?l[i]:void 0}return zj=a,zj}var $j,LA;function Hce(){if(LA)return $j;LA=1;var t=hv(),s=Object.prototype,n=s.hasOwnProperty;function r(a){var i=this.__data__;return t?i[a]!==void 0:n.call(i,a)}return $j=r,$j}var Uj,IA;function Kce(){if(IA)return Uj;IA=1;var t=hv(),s="__lodash_hash_undefined__";function n(r,a){var i=this.__data__;return this.size+=this.has(r)?0:1,i[r]=t&&a===void 0?s:a,this}return Uj=n,Uj}var Vj,BA;function Gce(){if(BA)return Vj;BA=1;var t=Uce(),s=Vce(),n=Wce(),r=Hce(),a=Kce();function i(l){var o=-1,c=l==null?0:l.length;for(this.clear();++o<c;){var u=l[o];this.set(u[0],u[1])}}return i.prototype.clear=t,i.prototype.delete=s,i.prototype.get=n,i.prototype.has=r,i.prototype.set=a,Vj=i,Vj}var Wj,qA;function Yce(){if(qA)return Wj;qA=1;var t=Gce(),s=dv(),n=oS();function r(){this.size=0,this.__data__={hash:new t,map:new(n||s),string:new t}}return Wj=r,Wj}var Hj,zA;function Qce(){if(zA)return Hj;zA=1;function t(s){var n=typeof s;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?s!=="__proto__":s===null}return Hj=t,Hj}var Kj,$A;function mv(){if($A)return Kj;$A=1;var t=Qce();function s(n,r){var a=n.__data__;return t(r)?a[typeof r=="string"?"string":"hash"]:a.map}return Kj=s,Kj}var Gj,UA;function Jce(){if(UA)return Gj;UA=1;var t=mv();function s(n){var r=t(this,n).delete(n);return this.size-=r?1:0,r}return Gj=s,Gj}var Yj,VA;function Xce(){if(VA)return Yj;VA=1;var t=mv();function s(n){return t(this,n).get(n)}return Yj=s,Yj}var Qj,WA;function Zce(){if(WA)return Qj;WA=1;var t=mv();function s(n){return t(this,n).has(n)}return Qj=s,Qj}var Jj,HA;function ede(){if(HA)return Jj;HA=1;var t=mv();function s(n,r){var a=t(this,n),i=a.size;return a.set(n,r),this.size+=a.size==i?0:1,this}return Jj=s,Jj}var Xj,KA;function RI(){if(KA)return Xj;KA=1;var t=Yce(),s=Jce(),n=Xce(),r=Zce(),a=ede();function i(l){var o=-1,c=l==null?0:l.length;for(this.clear();++o<c;){var u=l[o];this.set(u[0],u[1])}}return i.prototype.clear=t,i.prototype.delete=s,i.prototype.get=n,i.prototype.has=r,i.prototype.set=a,Xj=i,Xj}var Zj,GA;function tde(){if(GA)return Zj;GA=1;var t=dv(),s=oS(),n=RI(),r=200;function a(i,l){var o=this.__data__;if(o instanceof t){var c=o.__data__;if(!s||c.length<r-1)return c.push([i,l]),this.size=++o.size,this;o=this.__data__=new n(c)}return o.set(i,l),this.size=o.size,this}return Zj=a,Zj}var ew,YA;function sde(){if(YA)return ew;YA=1;var t=dv(),s=Dce(),n=Oce(),r=Rce(),a=Fce(),i=tde();function l(o){var c=this.__data__=new t(o);this.size=c.size}return l.prototype.clear=s,l.prototype.delete=n,l.prototype.get=r,l.prototype.has=a,l.prototype.set=i,ew=l,ew}var tw,QA;function nde(){if(QA)return tw;QA=1;var t="__lodash_hash_undefined__";function s(n){return this.__data__.set(n,t),this}return tw=s,tw}var sw,JA;function rde(){if(JA)return sw;JA=1;function t(s){return this.__data__.has(s)}return sw=t,sw}var nw,XA;function ade(){if(XA)return nw;XA=1;var t=RI(),s=nde(),n=rde();function r(a){var i=-1,l=a==null?0:a.length;for(this.__data__=new t;++i<l;)this.add(a[i])}return r.prototype.add=r.prototype.push=s,r.prototype.has=n,nw=r,nw}var rw,ZA;function ide(){if(ZA)return rw;ZA=1;function t(s,n){for(var r=-1,a=s==null?0:s.length;++r<a;)if(n(s[r],r,s))return!0;return!1}return rw=t,rw}var aw,eM;function lde(){if(eM)return aw;eM=1;function t(s,n){return s.has(n)}return aw=t,aw}var iw,tM;function FI(){if(tM)return iw;tM=1;var t=ade(),s=ide(),n=lde(),r=1,a=2;function i(l,o,c,u,d,m){var h=c&r,p=l.length,g=o.length;if(p!=g&&!(h&&g>p))return!1;var v=m.get(l),y=m.get(o);if(v&&y)return v==o&&y==l;var j=-1,w=!0,N=c&a?new t:void 0;for(m.set(l,o),m.set(o,l);++j<p;){var _=l[j],T=o[j];if(u)var A=h?u(T,_,j,o,l,m):u(_,T,j,l,o,m);if(A!==void 0){if(A)continue;w=!1;break}if(N){if(!s(o,function(P,C){if(!n(N,C)&&(_===P||d(_,P,c,u,m)))return N.push(C)})){w=!1;break}}else if(!(_===T||d(_,T,c,u,m))){w=!1;break}}return m.delete(l),m.delete(o),w}return iw=i,iw}var lw,sM;function ode(){if(sM)return lw;sM=1;var t=Jl(),s=t.Uint8Array;return lw=s,lw}var ow,nM;function cde(){if(nM)return ow;nM=1;function t(s){var n=-1,r=Array(s.size);return s.forEach(function(a,i){r[++n]=[i,a]}),r}return ow=t,ow}var cw,rM;function dde(){if(rM)return cw;rM=1;function t(s){var n=-1,r=Array(s.size);return s.forEach(function(a){r[++n]=a}),r}return cw=t,cw}var dw,aM;function ude(){if(aM)return dw;aM=1;var t=lS(),s=ode(),n=TI(),r=FI(),a=cde(),i=dde(),l=1,o=2,c="[object Boolean]",u="[object Date]",d="[object Error]",m="[object Map]",h="[object Number]",p="[object RegExp]",g="[object Set]",v="[object String]",y="[object Symbol]",j="[object ArrayBuffer]",w="[object DataView]",N=t?t.prototype:void 0,_=N?N.valueOf:void 0;function T(A,P,C,O,M,k,E){switch(C){case w:if(A.byteLength!=P.byteLength||A.byteOffset!=P.byteOffset)return!1;A=A.buffer,P=P.buffer;case j:return!(A.byteLength!=P.byteLength||!k(new s(A),new s(P)));case c:case u:case h:return n(+A,+P);case d:return A.name==P.name&&A.message==P.message;case p:case v:return A==P+"";case m:var R=a;case g:var F=O&l;if(R||(R=i),A.size!=P.size&&!F)return!1;var z=E.get(A);if(z)return z==P;O|=o,E.set(A,P);var V=r(R(A),R(P),O,M,k,E);return E.delete(A),V;case y:if(_)return _.call(A)==_.call(P)}return!1}return dw=T,dw}var uw,iM;function hde(){if(iM)return uw;iM=1;function t(s,n){for(var r=-1,a=n.length,i=s.length;++r<a;)s[i+r]=n[r];return s}return uw=t,uw}var hw,lM;function cS(){if(lM)return hw;lM=1;var t=Array.isArray;return hw=t,hw}var mw,oM;function mde(){if(oM)return mw;oM=1;var t=hde(),s=cS();function n(r,a,i){var l=a(r);return s(r)?l:t(l,i(r))}return mw=n,mw}var fw,cM;function fde(){if(cM)return fw;cM=1;function t(s,n){for(var r=-1,a=s==null?0:s.length,i=0,l=[];++r<a;){var o=s[r];n(o,r,s)&&(l[i++]=o)}return l}return fw=t,fw}var pw,dM;function pde(){if(dM)return pw;dM=1;function t(){return[]}return pw=t,pw}var xw,uM;function xde(){if(uM)return xw;uM=1;var t=fde(),s=pde(),n=Object.prototype,r=n.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(l){return l==null?[]:(l=Object(l),t(a(l),function(o){return r.call(l,o)}))}:s;return xw=i,xw}var gw,hM;function gde(){if(hM)return gw;hM=1;function t(s,n){for(var r=-1,a=Array(s);++r<s;)a[r]=n(r);return a}return gw=t,gw}var vw,mM;function fv(){if(mM)return vw;mM=1;function t(s){return s!=null&&typeof s=="object"}return vw=t,vw}var yw,fM;function vde(){if(fM)return yw;fM=1;var t=uv(),s=fv(),n="[object Arguments]";function r(a){return s(a)&&t(a)==n}return yw=r,yw}var bw,pM;function yde(){if(pM)return bw;pM=1;var t=vde(),s=fv(),n=Object.prototype,r=n.hasOwnProperty,a=n.propertyIsEnumerable,i=t((function(){return arguments})())?t:function(l){return s(l)&&r.call(l,"callee")&&!a.call(l,"callee")};return bw=i,bw}var Fm={exports:{}},jw,xM;function bde(){if(xM)return jw;xM=1;function t(){return!1}return jw=t,jw}Fm.exports;var gM;function LI(){return gM||(gM=1,(function(t,s){var n=Jl(),r=bde(),a=s&&!s.nodeType&&s,i=a&&!0&&t&&!t.nodeType&&t,l=i&&i.exports===a,o=l?n.Buffer:void 0,c=o?o.isBuffer:void 0,u=c||r;t.exports=u})(Fm,Fm.exports)),Fm.exports}var ww,vM;function jde(){if(vM)return ww;vM=1;var t=9007199254740991,s=/^(?:0|[1-9]\d*)$/;function n(r,a){var i=typeof r;return a=a??t,!!a&&(i=="number"||i!="symbol"&&s.test(r))&&r>-1&&r%1==0&&r<a}return ww=n,ww}var Nw,yM;function II(){if(yM)return Nw;yM=1;var t=9007199254740991;function s(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return Nw=s,Nw}var _w,bM;function wde(){if(bM)return _w;bM=1;var t=uv(),s=II(),n=fv(),r="[object Arguments]",a="[object Array]",i="[object Boolean]",l="[object Date]",o="[object Error]",c="[object Function]",u="[object Map]",d="[object Number]",m="[object Object]",h="[object RegExp]",p="[object Set]",g="[object String]",v="[object WeakMap]",y="[object ArrayBuffer]",j="[object DataView]",w="[object Float32Array]",N="[object Float64Array]",_="[object Int8Array]",T="[object Int16Array]",A="[object Int32Array]",P="[object Uint8Array]",C="[object Uint8ClampedArray]",O="[object Uint16Array]",M="[object Uint32Array]",k={};k[w]=k[N]=k[_]=k[T]=k[A]=k[P]=k[C]=k[O]=k[M]=!0,k[r]=k[a]=k[y]=k[i]=k[j]=k[l]=k[o]=k[c]=k[u]=k[d]=k[m]=k[h]=k[p]=k[g]=k[v]=!1;function E(R){return n(R)&&s(R.length)&&!!k[t(R)]}return _w=E,_w}var Sw,jM;function Nde(){if(jM)return Sw;jM=1;function t(s){return function(n){return s(n)}}return Sw=t,Sw}var Lm={exports:{}};Lm.exports;var wM;function _de(){return wM||(wM=1,(function(t,s){var n=AI(),r=s&&!s.nodeType&&s,a=r&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===r,l=i&&n.process,o=(function(){try{var c=a&&a.require&&a.require("util").types;return c||l&&l.binding&&l.binding("util")}catch{}})();t.exports=o})(Lm,Lm.exports)),Lm.exports}var Cw,NM;function BI(){if(NM)return Cw;NM=1;var t=wde(),s=Nde(),n=_de(),r=n&&n.isTypedArray,a=r?s(r):t;return Cw=a,Cw}var kw,_M;function Sde(){if(_M)return kw;_M=1;var t=gde(),s=yde(),n=cS(),r=LI(),a=jde(),i=BI(),l=Object.prototype,o=l.hasOwnProperty;function c(u,d){var m=n(u),h=!m&&s(u),p=!m&&!h&&r(u),g=!m&&!h&&!p&&i(u),v=m||h||p||g,y=v?t(u.length,String):[],j=y.length;for(var w in u)(d||o.call(u,w))&&!(v&&(w=="length"||p&&(w=="offset"||w=="parent")||g&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||a(w,j)))&&y.push(w);return y}return kw=c,kw}var Ew,SM;function Cde(){if(SM)return Ew;SM=1;var t=Object.prototype;function s(n){var r=n&&n.constructor,a=typeof r=="function"&&r.prototype||t;return n===a}return Ew=s,Ew}var Pw,CM;function kde(){if(CM)return Pw;CM=1;function t(s,n){return function(r){return s(n(r))}}return Pw=t,Pw}var Tw,kM;function Ede(){if(kM)return Tw;kM=1;var t=kde(),s=t(Object.keys,Object);return Tw=s,Tw}var Aw,EM;function Pde(){if(EM)return Aw;EM=1;var t=Cde(),s=Ede(),n=Object.prototype,r=n.hasOwnProperty;function a(i){if(!t(i))return s(i);var l=[];for(var o in Object(i))r.call(i,o)&&o!="constructor"&&l.push(o);return l}return Aw=a,Aw}var Mw,PM;function Tde(){if(PM)return Mw;PM=1;var t=DI(),s=II();function n(r){return r!=null&&s(r.length)&&!t(r)}return Mw=n,Mw}var Dw,TM;function Ade(){if(TM)return Dw;TM=1;var t=Sde(),s=Pde(),n=Tde();function r(a){return n(a)?t(a):s(a)}return Dw=r,Dw}var Ow,AM;function Mde(){if(AM)return Ow;AM=1;var t=mde(),s=xde(),n=Ade();function r(a){return t(a,n,s)}return Ow=r,Ow}var Rw,MM;function Dde(){if(MM)return Rw;MM=1;var t=Mde(),s=1,n=Object.prototype,r=n.hasOwnProperty;function a(i,l,o,c,u,d){var m=o&s,h=t(i),p=h.length,g=t(l),v=g.length;if(p!=v&&!m)return!1;for(var y=p;y--;){var j=h[y];if(!(m?j in l:r.call(l,j)))return!1}var w=d.get(i),N=d.get(l);if(w&&N)return w==l&&N==i;var _=!0;d.set(i,l),d.set(l,i);for(var T=m;++y<p;){j=h[y];var A=i[j],P=l[j];if(c)var C=m?c(P,A,j,l,i,d):c(A,P,j,i,l,d);if(!(C===void 0?A===P||u(A,P,o,c,d):C)){_=!1;break}T||(T=j=="constructor")}if(_&&!T){var O=i.constructor,M=l.constructor;O!=M&&"constructor"in i&&"constructor"in l&&!(typeof O=="function"&&O instanceof O&&typeof M=="function"&&M instanceof M)&&(_=!1)}return d.delete(i),d.delete(l),_}return Rw=a,Rw}var Fw,DM;function Ode(){if(DM)return Fw;DM=1;var t=_h(),s=Jl(),n=t(s,"DataView");return Fw=n,Fw}var Lw,OM;function Rde(){if(OM)return Lw;OM=1;var t=_h(),s=Jl(),n=t(s,"Promise");return Lw=n,Lw}var Iw,RM;function Fde(){if(RM)return Iw;RM=1;var t=_h(),s=Jl(),n=t(s,"Set");return Iw=n,Iw}var Bw,FM;function Lde(){if(FM)return Bw;FM=1;var t=_h(),s=Jl(),n=t(s,"WeakMap");return Bw=n,Bw}var qw,LM;function Ide(){if(LM)return qw;LM=1;var t=Ode(),s=oS(),n=Rde(),r=Fde(),a=Lde(),i=uv(),l=OI(),o="[object Map]",c="[object Object]",u="[object Promise]",d="[object Set]",m="[object WeakMap]",h="[object DataView]",p=l(t),g=l(s),v=l(n),y=l(r),j=l(a),w=i;return(t&&w(new t(new ArrayBuffer(1)))!=h||s&&w(new s)!=o||n&&w(n.resolve())!=u||r&&w(new r)!=d||a&&w(new a)!=m)&&(w=function(N){var _=i(N),T=_==c?N.constructor:void 0,A=T?l(T):"";if(A)switch(A){case p:return h;case g:return o;case v:return u;case y:return d;case j:return m}return _}),qw=w,qw}var zw,IM;function Bde(){if(IM)return zw;IM=1;var t=sde(),s=FI(),n=ude(),r=Dde(),a=Ide(),i=cS(),l=LI(),o=BI(),c=1,u="[object Arguments]",d="[object Array]",m="[object Object]",h=Object.prototype,p=h.hasOwnProperty;function g(v,y,j,w,N,_){var T=i(v),A=i(y),P=T?d:a(v),C=A?d:a(y);P=P==u?m:P,C=C==u?m:C;var O=P==m,M=C==m,k=P==C;if(k&&l(v)){if(!l(y))return!1;T=!0,O=!1}if(k&&!O)return _||(_=new t),T||o(v)?s(v,y,j,w,N,_):n(v,y,P,j,w,N,_);if(!(j&c)){var E=O&&p.call(v,"__wrapped__"),R=M&&p.call(y,"__wrapped__");if(E||R){var F=E?v.value():v,z=R?y.value():y;return _||(_=new t),N(F,z,j,w,_)}}return k?(_||(_=new t),r(v,y,j,w,N,_)):!1}return zw=g,zw}var $w,BM;function qde(){if(BM)return $w;BM=1;var t=Bde(),s=fv();function n(r,a,i,l,o){return r===a?!0:r==null||a==null||!s(r)&&!s(a)?r!==r&&a!==a:t(r,a,i,l,n,o)}return $w=n,$w}var Uw,qM;function zde(){if(qM)return Uw;qM=1;var t=qde();function s(n,r){return t(n,r)}return Uw=s,Uw}var wg={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */var $de=wg.exports,zM;function Ude(){return zM||(zM=1,(function(t,s){(function(r,a){t.exports=a()})(typeof self<"u"?self:$de,function(){return(function(n){var r={};function a(i){if(r[i])return r[i].exports;var l=r[i]={i,l:!1,exports:{}};return n[i].call(l.exports,l,l.exports,a),l.l=!0,l.exports}return a.m=n,a.c=r,a.d=function(i,l,o){a.o(i,l)||Object.defineProperty(i,l,{configurable:!1,enumerable:!0,get:o})},a.n=function(i){var l=i&&i.__esModule?function(){return i.default}:function(){return i};return a.d(l,"a",l),l},a.o=function(i,l){return Object.prototype.hasOwnProperty.call(i,l)},a.p="",a(a.s=109)})([(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(17),l=a(18),o=a(19),c=a(45),u=a(46),d=a(47),m=a(48),h=a(49),p=a(12),g=a(32),v=a(33),y=a(31),j=a(1),w={Scope:j.Scope,create:j.create,find:j.find,query:j.query,register:j.register,Container:i.default,Format:l.default,Leaf:o.default,Embed:m.default,Scroll:c.default,Block:d.default,Inline:u.default,Text:h.default,Attributor:{Attribute:p.default,Class:g.default,Style:v.default,Store:y.default}};r.default=w}),(function(n,r,a){var i=this&&this.__extends||(function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,w){j.__proto__=w}||function(j,w){for(var N in w)w.hasOwnProperty(N)&&(j[N]=w[N])};return function(j,w){y(j,w);function N(){this.constructor=j}j.prototype=w===null?Object.create(w):(N.prototype=w.prototype,new N)}})();Object.defineProperty(r,"__esModule",{value:!0});var l=(function(y){i(j,y);function j(w){var N=this;return w="[Parchment] "+w,N=y.call(this,w)||this,N.message=w,N.name=N.constructor.name,N}return j})(Error);r.ParchmentError=l;var o={},c={},u={},d={};r.DATA_KEY="__blot";var m;(function(y){y[y.TYPE=3]="TYPE",y[y.LEVEL=12]="LEVEL",y[y.ATTRIBUTE=13]="ATTRIBUTE",y[y.BLOT=14]="BLOT",y[y.INLINE=7]="INLINE",y[y.BLOCK=11]="BLOCK",y[y.BLOCK_BLOT=10]="BLOCK_BLOT",y[y.INLINE_BLOT=6]="INLINE_BLOT",y[y.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",y[y.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",y[y.ANY=15]="ANY"})(m=r.Scope||(r.Scope={}));function h(y,j){var w=g(y);if(w==null)throw new l("Unable to create "+y+" blot");var N=w,_=y instanceof Node||y.nodeType===Node.TEXT_NODE?y:N.create(j);return new N(_,j)}r.create=h;function p(y,j){return j===void 0&&(j=!1),y==null?null:y[r.DATA_KEY]!=null?y[r.DATA_KEY].blot:j?p(y.parentNode,j):null}r.find=p;function g(y,j){j===void 0&&(j=m.ANY);var w;if(typeof y=="string")w=d[y]||o[y];else if(y instanceof Text||y.nodeType===Node.TEXT_NODE)w=d.text;else if(typeof y=="number")y&m.LEVEL&m.BLOCK?w=d.block:y&m.LEVEL&m.INLINE&&(w=d.inline);else if(y instanceof HTMLElement){var N=(y.getAttribute("class")||"").split(/\s+/);for(var _ in N)if(w=c[N[_]],w)break;w=w||u[y.tagName]}return w==null?null:j&m.LEVEL&w.scope&&j&m.TYPE&w.scope?w:null}r.query=g;function v(){for(var y=[],j=0;j<arguments.length;j++)y[j]=arguments[j];if(y.length>1)return y.map(function(_){return v(_)});var w=y[0];if(typeof w.blotName!="string"&&typeof w.attrName!="string")throw new l("Invalid definition");if(w.blotName==="abstract")throw new l("Cannot register abstract class");if(d[w.blotName||w.attrName]=w,typeof w.keyName=="string")o[w.keyName]=w;else if(w.className!=null&&(c[w.className]=w),w.tagName!=null){Array.isArray(w.tagName)?w.tagName=w.tagName.map(function(_){return _.toUpperCase()}):w.tagName=w.tagName.toUpperCase();var N=Array.isArray(w.tagName)?w.tagName:[w.tagName];N.forEach(function(_){(u[_]==null||w.className==null)&&(u[_]=w)})}return w}r.register=v}),(function(n,r,a){var i=a(51),l=a(11),o=a(3),c=a(20),u="\0",d=function(m){Array.isArray(m)?this.ops=m:m!=null&&Array.isArray(m.ops)?this.ops=m.ops:this.ops=[]};d.prototype.insert=function(m,h){var p={};return m.length===0?this:(p.insert=m,h!=null&&typeof h=="object"&&Object.keys(h).length>0&&(p.attributes=h),this.push(p))},d.prototype.delete=function(m){return m<=0?this:this.push({delete:m})},d.prototype.retain=function(m,h){if(m<=0)return this;var p={retain:m};return h!=null&&typeof h=="object"&&Object.keys(h).length>0&&(p.attributes=h),this.push(p)},d.prototype.push=function(m){var h=this.ops.length,p=this.ops[h-1];if(m=o(!0,{},m),typeof p=="object"){if(typeof m.delete=="number"&&typeof p.delete=="number")return this.ops[h-1]={delete:p.delete+m.delete},this;if(typeof p.delete=="number"&&m.insert!=null&&(h-=1,p=this.ops[h-1],typeof p!="object"))return this.ops.unshift(m),this;if(l(m.attributes,p.attributes)){if(typeof m.insert=="string"&&typeof p.insert=="string")return this.ops[h-1]={insert:p.insert+m.insert},typeof m.attributes=="object"&&(this.ops[h-1].attributes=m.attributes),this;if(typeof m.retain=="number"&&typeof p.retain=="number")return this.ops[h-1]={retain:p.retain+m.retain},typeof m.attributes=="object"&&(this.ops[h-1].attributes=m.attributes),this}}return h===this.ops.length?this.ops.push(m):this.ops.splice(h,0,m),this},d.prototype.chop=function(){var m=this.ops[this.ops.length-1];return m&&m.retain&&!m.attributes&&this.ops.pop(),this},d.prototype.filter=function(m){return this.ops.filter(m)},d.prototype.forEach=function(m){this.ops.forEach(m)},d.prototype.map=function(m){return this.ops.map(m)},d.prototype.partition=function(m){var h=[],p=[];return this.forEach(function(g){var v=m(g)?h:p;v.push(g)}),[h,p]},d.prototype.reduce=function(m,h){return this.ops.reduce(m,h)},d.prototype.changeLength=function(){return this.reduce(function(m,h){return h.insert?m+c.length(h):h.delete?m-h.delete:m},0)},d.prototype.length=function(){return this.reduce(function(m,h){return m+c.length(h)},0)},d.prototype.slice=function(m,h){m=m||0,typeof h!="number"&&(h=1/0);for(var p=[],g=c.iterator(this.ops),v=0;v<h&&g.hasNext();){var y;v<m?y=g.next(m-v):(y=g.next(h-v),p.push(y)),v+=c.length(y)}return new d(p)},d.prototype.compose=function(m){var h=c.iterator(this.ops),p=c.iterator(m.ops),g=[],v=p.peek();if(v!=null&&typeof v.retain=="number"&&v.attributes==null){for(var y=v.retain;h.peekType()==="insert"&&h.peekLength()<=y;)y-=h.peekLength(),g.push(h.next());v.retain-y>0&&p.next(v.retain-y)}for(var j=new d(g);h.hasNext()||p.hasNext();)if(p.peekType()==="insert")j.push(p.next());else if(h.peekType()==="delete")j.push(h.next());else{var w=Math.min(h.peekLength(),p.peekLength()),N=h.next(w),_=p.next(w);if(typeof _.retain=="number"){var T={};typeof N.retain=="number"?T.retain=w:T.insert=N.insert;var A=c.attributes.compose(N.attributes,_.attributes,typeof N.retain=="number");if(A&&(T.attributes=A),j.push(T),!p.hasNext()&&l(j.ops[j.ops.length-1],T)){var P=new d(h.rest());return j.concat(P).chop()}}else typeof _.delete=="number"&&typeof N.retain=="number"&&j.push(_)}return j.chop()},d.prototype.concat=function(m){var h=new d(this.ops.slice());return m.ops.length>0&&(h.push(m.ops[0]),h.ops=h.ops.concat(m.ops.slice(1))),h},d.prototype.diff=function(m,h){if(this.ops===m.ops)return new d;var p=[this,m].map(function(w){return w.map(function(N){if(N.insert!=null)return typeof N.insert=="string"?N.insert:u;var _=w===m?"on":"with";throw new Error("diff() called "+_+" non-document")}).join("")}),g=new d,v=i(p[0],p[1],h),y=c.iterator(this.ops),j=c.iterator(m.ops);return v.forEach(function(w){for(var N=w[1].length;N>0;){var _=0;switch(w[0]){case i.INSERT:_=Math.min(j.peekLength(),N),g.push(j.next(_));break;case i.DELETE:_=Math.min(N,y.peekLength()),y.next(_),g.delete(_);break;case i.EQUAL:_=Math.min(y.peekLength(),j.peekLength(),N);var T=y.next(_),A=j.next(_);l(T.insert,A.insert)?g.retain(_,c.attributes.diff(T.attributes,A.attributes)):g.push(A).delete(_);break}N-=_}}),g.chop()},d.prototype.eachLine=function(m,h){h=h||`
`;for(var p=c.iterator(this.ops),g=new d,v=0;p.hasNext();){if(p.peekType()!=="insert")return;var y=p.peek(),j=c.length(y)-p.peekLength(),w=typeof y.insert=="string"?y.insert.indexOf(h,j)-j:-1;if(w<0)g.push(p.next());else if(w>0)g.push(p.next(w));else{if(m(g,p.next(1).attributes||{},v)===!1)return;v+=1,g=new d}}g.length()>0&&m(g,{},v)},d.prototype.transform=function(m,h){if(h=!!h,typeof m=="number")return this.transformPosition(m,h);for(var p=c.iterator(this.ops),g=c.iterator(m.ops),v=new d;p.hasNext()||g.hasNext();)if(p.peekType()==="insert"&&(h||g.peekType()!=="insert"))v.retain(c.length(p.next()));else if(g.peekType()==="insert")v.push(g.next());else{var y=Math.min(p.peekLength(),g.peekLength()),j=p.next(y),w=g.next(y);if(j.delete)continue;w.delete?v.push(w):v.retain(y,c.attributes.transform(j.attributes,w.attributes,h))}return v.chop()},d.prototype.transformPosition=function(m,h){h=!!h;for(var p=c.iterator(this.ops),g=0;p.hasNext()&&g<=m;){var v=p.peekLength(),y=p.peekType();if(p.next(),y==="delete"){m-=Math.min(v,m-g);continue}else y==="insert"&&(g<m||!h)&&(m+=v);g+=v}return m},n.exports=d}),(function(n,r){var a=Object.prototype.hasOwnProperty,i=Object.prototype.toString,l=Object.defineProperty,o=Object.getOwnPropertyDescriptor,c=function(p){return typeof Array.isArray=="function"?Array.isArray(p):i.call(p)==="[object Array]"},u=function(p){if(!p||i.call(p)!=="[object Object]")return!1;var g=a.call(p,"constructor"),v=p.constructor&&p.constructor.prototype&&a.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!g&&!v)return!1;var y;for(y in p);return typeof y>"u"||a.call(p,y)},d=function(p,g){l&&g.name==="__proto__"?l(p,g.name,{enumerable:!0,configurable:!0,value:g.newValue,writable:!0}):p[g.name]=g.newValue},m=function(p,g){if(g==="__proto__")if(a.call(p,g)){if(o)return o(p,g).value}else return;return p[g]};n.exports=function h(){var p,g,v,y,j,w,N=arguments[0],_=1,T=arguments.length,A=!1;for(typeof N=="boolean"&&(A=N,N=arguments[1]||{},_=2),(N==null||typeof N!="object"&&typeof N!="function")&&(N={});_<T;++_)if(p=arguments[_],p!=null)for(g in p)v=m(N,g),y=m(p,g),N!==y&&(A&&y&&(u(y)||(j=c(y)))?(j?(j=!1,w=v&&c(v)?v:[]):w=v&&u(v)?v:{},d(N,{name:g,newValue:h(A,w,y)})):typeof y<"u"&&d(N,{name:g,newValue:y}));return N}}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BlockEmbed=r.bubbleFormats=void 0;var i=(function(){function k(E,R){for(var F=0;F<R.length;F++){var z=R[F];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(E,z.key,z)}}return function(E,R,F){return R&&k(E.prototype,R),F&&k(E,F),E}})(),l=function k(E,R,F){E===null&&(E=Function.prototype);var z=Object.getOwnPropertyDescriptor(E,R);if(z===void 0){var V=Object.getPrototypeOf(E);return V===null?void 0:k(V,R,F)}else{if("value"in z)return z.value;var U=z.get;return U===void 0?void 0:U.call(F)}},o=a(3),c=N(o),u=a(2),d=N(u),m=a(0),h=N(m),p=a(16),g=N(p),v=a(6),y=N(v),j=a(7),w=N(j);function N(k){return k&&k.__esModule?k:{default:k}}function _(k,E){if(!(k instanceof E))throw new TypeError("Cannot call a class as a function")}function T(k,E){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:k}function A(k,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);k.prototype=Object.create(E&&E.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(k,E):k.__proto__=E)}var P=1,C=(function(k){A(E,k);function E(){return _(this,E),T(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return i(E,[{key:"attach",value:function(){l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"attach",this).call(this),this.attributes=new h.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new d.default().insert(this.value(),(0,c.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(F,z){var V=h.default.query(F,h.default.Scope.BLOCK_ATTRIBUTE);V!=null&&this.attributes.attribute(V,z)}},{key:"formatAt",value:function(F,z,V,U){this.format(V,U)}},{key:"insertAt",value:function(F,z,V){if(typeof z=="string"&&z.endsWith(`
`)){var U=h.default.create(O.blotName);this.parent.insertBefore(U,F===0?this:this.next),U.insertAt(0,z.slice(0,-1))}else l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,F,z,V)}}]),E})(h.default.Embed);C.scope=h.default.Scope.BLOCK_BLOT;var O=(function(k){A(E,k);function E(R){_(this,E);var F=T(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,R));return F.cache={},F}return i(E,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(h.default.Leaf).reduce(function(F,z){return z.length()===0?F:F.insert(z.value(),M(z))},new d.default).insert(`
`,M(this))),this.cache.delta}},{key:"deleteAt",value:function(F,z){l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"deleteAt",this).call(this,F,z),this.cache={}}},{key:"formatAt",value:function(F,z,V,U){z<=0||(h.default.query(V,h.default.Scope.BLOCK)?F+z===this.length()&&this.format(V,U):l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"formatAt",this).call(this,F,Math.min(z,this.length()-F-1),V,U),this.cache={})}},{key:"insertAt",value:function(F,z,V){if(V!=null)return l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,F,z,V);if(z.length!==0){var U=z.split(`
`),B=U.shift();B.length>0&&(F<this.length()-1||this.children.tail==null?l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,Math.min(F,this.length()-1),B):this.children.tail.insertAt(this.children.tail.length(),B),this.cache={});var $=this;U.reduce(function(L,I){return $=$.split(L,!0),$.insertAt(0,I),I.length},F+B.length)}}},{key:"insertBefore",value:function(F,z){var V=this.children.head;l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertBefore",this).call(this,F,z),V instanceof g.default&&V.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"length",this).call(this)+P),this.cache.length}},{key:"moveChildren",value:function(F,z){l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"moveChildren",this).call(this,F,z),this.cache={}}},{key:"optimize",value:function(F){l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,F),this.cache={}}},{key:"path",value:function(F){return l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"path",this).call(this,F,!0)}},{key:"removeChild",value:function(F){l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"removeChild",this).call(this,F),this.cache={}}},{key:"split",value:function(F){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(z&&(F===0||F>=this.length()-P)){var V=this.clone();return F===0?(this.parent.insertBefore(V,this),this):(this.parent.insertBefore(V,this.next),V)}else{var U=l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"split",this).call(this,F,z);return this.cache={},U}}}]),E})(h.default.Block);O.blotName="block",O.tagName="P",O.defaultChild="break",O.allowedChildren=[y.default,h.default.Embed,w.default];function M(k){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return k==null||(typeof k.formats=="function"&&(E=(0,c.default)(E,k.formats())),k.parent==null||k.parent.blotName=="scroll"||k.parent.statics.scope!==k.statics.scope)?E:M(k.parent,E)}r.bubbleFormats=M,r.BlockEmbed=C,r.default=O}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.overload=r.expandConfig=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},l=(function(){function $(L,I){var W=[],q=!0,Z=!1,Q=void 0;try{for(var Y=L[Symbol.iterator](),K;!(q=(K=Y.next()).done)&&(W.push(K.value),!(I&&W.length===I));q=!0);}catch(ae){Z=!0,Q=ae}finally{try{!q&&Y.return&&Y.return()}finally{if(Z)throw Q}}return W}return function(L,I){if(Array.isArray(L))return L;if(Symbol.iterator in Object(L))return $(L,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function $(L,I){for(var W=0;W<I.length;W++){var q=I[W];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(L,q.key,q)}}return function(L,I,W){return I&&$(L.prototype,I),W&&$(L,W),L}})();a(50);var c=a(2),u=M(c),d=a(14),m=M(d),h=a(8),p=M(h),g=a(9),v=M(g),y=a(0),j=M(y),w=a(15),N=M(w),_=a(3),T=M(_),A=a(10),P=M(A),C=a(34),O=M(C);function M($){return $&&$.__esModule?$:{default:$}}function k($,L,I){return L in $?Object.defineProperty($,L,{value:I,enumerable:!0,configurable:!0,writable:!0}):$[L]=I,$}function E($,L){if(!($ instanceof L))throw new TypeError("Cannot call a class as a function")}var R=(0,P.default)("quill"),F=(function(){o($,null,[{key:"debug",value:function(I){I===!0&&(I="log"),P.default.level(I)}},{key:"find",value:function(I){return I.__quill||j.default.find(I)}},{key:"import",value:function(I){return this.imports[I]==null&&R.error("Cannot import "+I+". Are you sure it was registered?"),this.imports[I]}},{key:"register",value:function(I,W){var q=this,Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof I!="string"){var Q=I.attrName||I.blotName;typeof Q=="string"?this.register("formats/"+Q,I,W):Object.keys(I).forEach(function(Y){q.register(Y,I[Y],W)})}else this.imports[I]!=null&&!Z&&R.warn("Overwriting "+I+" with",W),this.imports[I]=W,(I.startsWith("blots/")||I.startsWith("formats/"))&&W.blotName!=="abstract"?j.default.register(W):I.startsWith("modules")&&typeof W.register=="function"&&W.register()}}]);function $(L){var I=this,W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(E(this,$),this.options=z(L,W),this.container=this.options.container,this.container==null)return R.error("Invalid Quill container",L);this.options.debug&&$.debug(this.options.debug);var q=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new p.default,this.scroll=j.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new m.default(this.scroll),this.selection=new N.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(p.default.events.EDITOR_CHANGE,function(Q){Q===p.default.events.TEXT_CHANGE&&I.root.classList.toggle("ql-blank",I.editor.isBlank())}),this.emitter.on(p.default.events.SCROLL_UPDATE,function(Q,Y){var K=I.selection.lastRange,ae=K&&K.length===0?K.index:void 0;V.call(I,function(){return I.editor.update(null,Y,ae)},Q)});var Z=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+q+"<p><br></p></div>");this.setContents(Z),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return o($,[{key:"addContainer",value:function(I){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof I=="string"){var q=I;I=document.createElement("div"),I.classList.add(q)}return this.container.insertBefore(I,W),I}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(I,W,q){var Z=this,Q=U(I,W,q),Y=l(Q,4);return I=Y[0],W=Y[1],q=Y[3],V.call(this,function(){return Z.editor.deleteText(I,W)},q,I,-1*W)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(I),this.container.classList.toggle("ql-disabled",!I)}},{key:"focus",value:function(){var I=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=I,this.scrollIntoView()}},{key:"format",value:function(I,W){var q=this,Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.default.sources.API;return V.call(this,function(){var Q=q.getSelection(!0),Y=new u.default;if(Q==null)return Y;if(j.default.query(I,j.default.Scope.BLOCK))Y=q.editor.formatLine(Q.index,Q.length,k({},I,W));else{if(Q.length===0)return q.selection.format(I,W),Y;Y=q.editor.formatText(Q.index,Q.length,k({},I,W))}return q.setSelection(Q,p.default.sources.SILENT),Y},Z)}},{key:"formatLine",value:function(I,W,q,Z,Q){var Y=this,K=void 0,ae=U(I,W,q,Z,Q),se=l(ae,4);return I=se[0],W=se[1],K=se[2],Q=se[3],V.call(this,function(){return Y.editor.formatLine(I,W,K)},Q,I,0)}},{key:"formatText",value:function(I,W,q,Z,Q){var Y=this,K=void 0,ae=U(I,W,q,Z,Q),se=l(ae,4);return I=se[0],W=se[1],K=se[2],Q=se[3],V.call(this,function(){return Y.editor.formatText(I,W,K)},Q,I,0)}},{key:"getBounds",value:function(I){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,q=void 0;typeof I=="number"?q=this.selection.getBounds(I,W):q=this.selection.getBounds(I.index,I.length);var Z=this.container.getBoundingClientRect();return{bottom:q.bottom-Z.top,height:q.height,left:q.left-Z.left,right:q.right-Z.left,top:q.top-Z.top,width:q.width}}},{key:"getContents",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-I,q=U(I,W),Z=l(q,2);return I=Z[0],W=Z[1],this.editor.getContents(I,W)}},{key:"getFormat",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof I=="number"?this.editor.getFormat(I,W):this.editor.getFormat(I.index,I.length)}},{key:"getIndex",value:function(I){return I.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(I){return this.scroll.leaf(I)}},{key:"getLine",value:function(I){return this.scroll.line(I)}},{key:"getLines",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof I!="number"?this.scroll.lines(I.index,I.length):this.scroll.lines(I,W)}},{key:"getModule",value:function(I){return this.theme.modules[I]}},{key:"getSelection",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return I&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-I,q=U(I,W),Z=l(q,2);return I=Z[0],W=Z[1],this.editor.getText(I,W)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(I,W,q){var Z=this,Q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:$.sources.API;return V.call(this,function(){return Z.editor.insertEmbed(I,W,q)},Q,I)}},{key:"insertText",value:function(I,W,q,Z,Q){var Y=this,K=void 0,ae=U(I,0,q,Z,Q),se=l(ae,4);return I=se[0],K=se[2],Q=se[3],V.call(this,function(){return Y.editor.insertText(I,W,K)},Q,I,W.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(I,W,q){this.clipboard.dangerouslyPasteHTML(I,W,q)}},{key:"removeFormat",value:function(I,W,q){var Z=this,Q=U(I,W,q),Y=l(Q,4);return I=Y[0],W=Y[1],q=Y[3],V.call(this,function(){return Z.editor.removeFormat(I,W)},q,I)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(I){var W=this,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return V.call(this,function(){I=new u.default(I);var Z=W.getLength(),Q=W.editor.deleteText(0,Z),Y=W.editor.applyDelta(I),K=Y.ops[Y.ops.length-1];K!=null&&typeof K.insert=="string"&&K.insert[K.insert.length-1]===`
`&&(W.editor.deleteText(W.getLength()-1,1),Y.delete(1));var ae=Q.compose(Y);return ae},q)}},{key:"setSelection",value:function(I,W,q){if(I==null)this.selection.setRange(null,W||$.sources.API);else{var Z=U(I,W,q),Q=l(Z,4);I=Q[0],W=Q[1],q=Q[3],this.selection.setRange(new w.Range(I,W),q),q!==p.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(I){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API,q=new u.default().insert(I);return this.setContents(q,W)}},{key:"update",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p.default.sources.USER,W=this.scroll.update(I);return this.selection.update(I),W}},{key:"updateContents",value:function(I){var W=this,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return V.call(this,function(){return I=new u.default(I),W.editor.applyDelta(I,q)},q,!0)}}]),$})();F.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},F.events=p.default.events,F.sources=p.default.sources,F.version="1.3.7",F.imports={delta:u.default,parchment:j.default,"core/module":v.default,"core/theme":O.default};function z($,L){if(L=(0,T.default)(!0,{container:$,modules:{clipboard:!0,keyboard:!0,history:!0}},L),!L.theme||L.theme===F.DEFAULTS.theme)L.theme=O.default;else if(L.theme=F.import("themes/"+L.theme),L.theme==null)throw new Error("Invalid theme "+L.theme+". Did you register it?");var I=(0,T.default)(!0,{},L.theme.DEFAULTS);[I,L].forEach(function(Z){Z.modules=Z.modules||{},Object.keys(Z.modules).forEach(function(Q){Z.modules[Q]===!0&&(Z.modules[Q]={})})});var W=Object.keys(I.modules).concat(Object.keys(L.modules)),q=W.reduce(function(Z,Q){var Y=F.import("modules/"+Q);return Y==null?R.error("Cannot load "+Q+" module. Are you sure you registered it?"):Z[Q]=Y.DEFAULTS||{},Z},{});return L.modules!=null&&L.modules.toolbar&&L.modules.toolbar.constructor!==Object&&(L.modules.toolbar={container:L.modules.toolbar}),L=(0,T.default)(!0,{},F.DEFAULTS,{modules:q},I,L),["bounds","container","scrollingContainer"].forEach(function(Z){typeof L[Z]=="string"&&(L[Z]=document.querySelector(L[Z]))}),L.modules=Object.keys(L.modules).reduce(function(Z,Q){return L.modules[Q]&&(Z[Q]=L.modules[Q]),Z},{}),L}function V($,L,I,W){if(this.options.strict&&!this.isEnabled()&&L===p.default.sources.USER)return new u.default;var q=I==null?null:this.getSelection(),Z=this.editor.delta,Q=$();if(q!=null&&(I===!0&&(I=q.index),W==null?q=B(q,Q,L):W!==0&&(q=B(q,I,W,L)),this.setSelection(q,p.default.sources.SILENT)),Q.length()>0){var Y,K=[p.default.events.TEXT_CHANGE,Q,Z,L];if((Y=this.emitter).emit.apply(Y,[p.default.events.EDITOR_CHANGE].concat(K)),L!==p.default.sources.SILENT){var ae;(ae=this.emitter).emit.apply(ae,K)}}return Q}function U($,L,I,W,q){var Z={};return typeof $.index=="number"&&typeof $.length=="number"?typeof L!="number"?(q=W,W=I,I=L,L=$.length,$=$.index):(L=$.length,$=$.index):typeof L!="number"&&(q=W,W=I,I=L,L=0),(typeof I>"u"?"undefined":i(I))==="object"?(Z=I,q=W):typeof I=="string"&&(W!=null?Z[I]=W:q=I),q=q||p.default.sources.API,[$,L,Z,q]}function B($,L,I,W){if($==null)return null;var q=void 0,Z=void 0;if(L instanceof u.default){var Q=[$.index,$.index+$.length].map(function(se){return L.transformPosition(se,W!==p.default.sources.USER)}),Y=l(Q,2);q=Y[0],Z=Y[1]}else{var K=[$.index,$.index+$.length].map(function(se){return se<L||se===L&&W===p.default.sources.USER?se:I>=0?se+I:Math.max(L,se+I)}),ae=l(K,2);q=ae[0],Z=ae[1]}return new w.Range(q,Z-q)}r.expandConfig=z,r.overload=U,r.default=F}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=(function(){function y(j,w){for(var N=0;N<w.length;N++){var _=w[N];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(j,_.key,_)}}return function(j,w,N){return w&&y(j.prototype,w),N&&y(j,N),j}})(),l=function y(j,w,N){j===null&&(j=Function.prototype);var _=Object.getOwnPropertyDescriptor(j,w);if(_===void 0){var T=Object.getPrototypeOf(j);return T===null?void 0:y(T,w,N)}else{if("value"in _)return _.value;var A=_.get;return A===void 0?void 0:A.call(N)}},o=a(7),c=m(o),u=a(0),d=m(u);function m(y){return y&&y.__esModule?y:{default:y}}function h(y,j){if(!(y instanceof j))throw new TypeError("Cannot call a class as a function")}function p(y,j){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:y}function g(y,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);y.prototype=Object.create(j&&j.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(y,j):y.__proto__=j)}var v=(function(y){g(j,y);function j(){return h(this,j),p(this,(j.__proto__||Object.getPrototypeOf(j)).apply(this,arguments))}return i(j,[{key:"formatAt",value:function(N,_,T,A){if(j.compare(this.statics.blotName,T)<0&&d.default.query(T,d.default.Scope.BLOT)){var P=this.isolate(N,_);A&&P.wrap(T,A)}else l(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"formatAt",this).call(this,N,_,T,A)}},{key:"optimize",value:function(N){if(l(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"optimize",this).call(this,N),this.parent instanceof j&&j.compare(this.statics.blotName,this.parent.statics.blotName)>0){var _=this.parent.isolate(this.offset(),this.length());this.moveChildren(_),_.wrap(this)}}}],[{key:"compare",value:function(N,_){var T=j.order.indexOf(N),A=j.order.indexOf(_);return T>=0||A>=0?T-A:N===_?0:N<_?-1:1}}]),j})(d.default.Inline);v.allowedChildren=[v,d.default.Embed,c.default],v.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],r.default=v}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(0),l=o(i);function o(h){return h&&h.__esModule?h:{default:h}}function c(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}function u(h,p){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:h}function d(h,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);h.prototype=Object.create(p&&p.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(h,p):h.__proto__=p)}var m=(function(h){d(p,h);function p(){return c(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(l.default.Text);r.default=m}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=(function(){function w(N,_){for(var T=0;T<_.length;T++){var A=_[T];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(N,A.key,A)}}return function(N,_,T){return _&&w(N.prototype,_),T&&w(N,T),N}})(),l=function w(N,_,T){N===null&&(N=Function.prototype);var A=Object.getOwnPropertyDescriptor(N,_);if(A===void 0){var P=Object.getPrototypeOf(N);return P===null?void 0:w(P,_,T)}else{if("value"in A)return A.value;var C=A.get;return C===void 0?void 0:C.call(T)}},o=a(54),c=m(o),u=a(10),d=m(u);function m(w){return w&&w.__esModule?w:{default:w}}function h(w,N){if(!(w instanceof N))throw new TypeError("Cannot call a class as a function")}function p(w,N){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:w}function g(w,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);w.prototype=Object.create(N&&N.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(w,N):w.__proto__=N)}var v=(0,d.default)("quill:events"),y=["selectionchange","mousedown","mouseup","click"];y.forEach(function(w){document.addEventListener(w,function(){for(var N=arguments.length,_=Array(N),T=0;T<N;T++)_[T]=arguments[T];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(A){if(A.__quill&&A.__quill.emitter){var P;(P=A.__quill.emitter).handleDOM.apply(P,_)}})})});var j=(function(w){g(N,w);function N(){h(this,N);var _=p(this,(N.__proto__||Object.getPrototypeOf(N)).call(this));return _.listeners={},_.on("error",v.error),_}return i(N,[{key:"emit",value:function(){v.log.apply(v,arguments),l(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(T){for(var A=arguments.length,P=Array(A>1?A-1:0),C=1;C<A;C++)P[C-1]=arguments[C];(this.listeners[T.type]||[]).forEach(function(O){var M=O.node,k=O.handler;(T.target===M||M.contains(T.target))&&k.apply(void 0,[T].concat(P))})}},{key:"listenDOM",value:function(T,A,P){this.listeners[T]||(this.listeners[T]=[]),this.listeners[T].push({node:A,handler:P})}}]),N})(c.default);j.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},j.sources={API:"api",SILENT:"silent",USER:"user"},r.default=j}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});function i(o,c){if(!(o instanceof c))throw new TypeError("Cannot call a class as a function")}var l=function o(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i(this,o),this.quill=c,this.options=u};l.DEFAULTS={},r.default=l}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=["error","warn","log","info"],l="warn";function o(u){if(i.indexOf(u)<=i.indexOf(l)){for(var d,m=arguments.length,h=Array(m>1?m-1:0),p=1;p<m;p++)h[p-1]=arguments[p];(d=console)[u].apply(d,h)}}function c(u){return i.reduce(function(d,m){return d[m]=o.bind(console,m,u),d},{})}o.level=c.level=function(u){l=u},r.default=c}),(function(n,r,a){var i=Array.prototype.slice,l=a(52),o=a(53),c=n.exports=function(h,p,g){return g||(g={}),h===p?!0:h instanceof Date&&p instanceof Date?h.getTime()===p.getTime():!h||!p||typeof h!="object"&&typeof p!="object"?g.strict?h===p:h==p:m(h,p,g)};function u(h){return h==null}function d(h){return!(!h||typeof h!="object"||typeof h.length!="number"||typeof h.copy!="function"||typeof h.slice!="function"||h.length>0&&typeof h[0]!="number")}function m(h,p,g){var v,y;if(u(h)||u(p)||h.prototype!==p.prototype)return!1;if(o(h))return o(p)?(h=i.call(h),p=i.call(p),c(h,p,g)):!1;if(d(h)){if(!d(p)||h.length!==p.length)return!1;for(v=0;v<h.length;v++)if(h[v]!==p[v])return!1;return!0}try{var j=l(h),w=l(p)}catch{return!1}if(j.length!=w.length)return!1;for(j.sort(),w.sort(),v=j.length-1;v>=0;v--)if(j[v]!=w[v])return!1;for(v=j.length-1;v>=0;v--)if(y=j[v],!c(h[y],p[y],g))return!1;return typeof h==typeof p}}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(1),l=(function(){function o(c,u,d){d===void 0&&(d={}),this.attrName=c,this.keyName=u;var m=i.Scope.TYPE&i.Scope.ATTRIBUTE;d.scope!=null?this.scope=d.scope&i.Scope.LEVEL|m:this.scope=i.Scope.ATTRIBUTE,d.whitelist!=null&&(this.whitelist=d.whitelist)}return o.keys=function(c){return[].map.call(c.attributes,function(u){return u.name})},o.prototype.add=function(c,u){return this.canAdd(c,u)?(c.setAttribute(this.keyName,u),!0):!1},o.prototype.canAdd=function(c,u){var d=i.query(c,i.Scope.BLOT&(this.scope|i.Scope.TYPE));return d==null?!1:this.whitelist==null?!0:typeof u=="string"?this.whitelist.indexOf(u.replace(/["']/g,""))>-1:this.whitelist.indexOf(u)>-1},o.prototype.remove=function(c){c.removeAttribute(this.keyName)},o.prototype.value=function(c){var u=c.getAttribute(this.keyName);return this.canAdd(c,u)&&u?u:""},o})();r.default=l}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Code=void 0;var i=(function(){function C(O,M){var k=[],E=!0,R=!1,F=void 0;try{for(var z=O[Symbol.iterator](),V;!(E=(V=z.next()).done)&&(k.push(V.value),!(M&&k.length===M));E=!0);}catch(U){R=!0,F=U}finally{try{!E&&z.return&&z.return()}finally{if(R)throw F}}return k}return function(O,M){if(Array.isArray(O))return O;if(Symbol.iterator in Object(O))return C(O,M);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=(function(){function C(O,M){for(var k=0;k<M.length;k++){var E=M[k];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(O,E.key,E)}}return function(O,M,k){return M&&C(O.prototype,M),k&&C(O,k),O}})(),o=function C(O,M,k){O===null&&(O=Function.prototype);var E=Object.getOwnPropertyDescriptor(O,M);if(E===void 0){var R=Object.getPrototypeOf(O);return R===null?void 0:C(R,M,k)}else{if("value"in E)return E.value;var F=E.get;return F===void 0?void 0:F.call(k)}},c=a(2),u=w(c),d=a(0),m=w(d),h=a(4),p=w(h),g=a(6),v=w(g),y=a(7),j=w(y);function w(C){return C&&C.__esModule?C:{default:C}}function N(C,O){if(!(C instanceof O))throw new TypeError("Cannot call a class as a function")}function _(C,O){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:C}function T(C,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);C.prototype=Object.create(O&&O.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(C,O):C.__proto__=O)}var A=(function(C){T(O,C);function O(){return N(this,O),_(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return O})(v.default);A.blotName="code",A.tagName="CODE";var P=(function(C){T(O,C);function O(){return N(this,O),_(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return l(O,[{key:"delta",value:function(){var k=this,E=this.domNode.textContent;return E.endsWith(`
`)&&(E=E.slice(0,-1)),E.split(`
`).reduce(function(R,F){return R.insert(F).insert(`
`,k.formats())},new u.default)}},{key:"format",value:function(k,E){if(!(k===this.statics.blotName&&E)){var R=this.descendant(j.default,this.length()-1),F=i(R,1),z=F[0];z!=null&&z.deleteAt(z.length()-1,1),o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"format",this).call(this,k,E)}}},{key:"formatAt",value:function(k,E,R,F){if(E!==0&&!(m.default.query(R,m.default.Scope.BLOCK)==null||R===this.statics.blotName&&F===this.statics.formats(this.domNode))){var z=this.newlineIndex(k);if(!(z<0||z>=k+E)){var V=this.newlineIndex(k,!0)+1,U=z-V+1,B=this.isolate(V,U),$=B.next;B.format(R,F),$ instanceof O&&$.formatAt(0,k-V+E-U,R,F)}}}},{key:"insertAt",value:function(k,E,R){if(R==null){var F=this.descendant(j.default,k),z=i(F,2),V=z[0],U=z[1];V.insertAt(U,E)}}},{key:"length",value:function(){var k=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?k:k+1}},{key:"newlineIndex",value:function(k){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(E)return this.domNode.textContent.slice(0,k).lastIndexOf(`
`);var R=this.domNode.textContent.slice(k).indexOf(`
`);return R>-1?k+R:-1}},{key:"optimize",value:function(k){this.domNode.textContent.endsWith(`
`)||this.appendChild(m.default.create("text",`
`)),o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"optimize",this).call(this,k);var E=this.next;E!=null&&E.prev===this&&E.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===E.statics.formats(E.domNode)&&(E.optimize(k),E.moveChildren(this),E.remove())}},{key:"replace",value:function(k){o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"replace",this).call(this,k),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(E){var R=m.default.find(E);R==null?E.parentNode.removeChild(E):R instanceof m.default.Embed?R.remove():R.unwrap()})}}],[{key:"create",value:function(k){var E=o(O.__proto__||Object.getPrototypeOf(O),"create",this).call(this,k);return E.setAttribute("spellcheck",!1),E}},{key:"formats",value:function(){return!0}}]),O})(p.default);P.blotName="code-block",P.tagName="PRE",P.TAB="  ",r.Code=A,r.default=P}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},l=(function(){function $(L,I){var W=[],q=!0,Z=!1,Q=void 0;try{for(var Y=L[Symbol.iterator](),K;!(q=(K=Y.next()).done)&&(W.push(K.value),!(I&&W.length===I));q=!0);}catch(ae){Z=!0,Q=ae}finally{try{!q&&Y.return&&Y.return()}finally{if(Z)throw Q}}return W}return function(L,I){if(Array.isArray(L))return L;if(Symbol.iterator in Object(L))return $(L,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function $(L,I){for(var W=0;W<I.length;W++){var q=I[W];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(L,q.key,q)}}return function(L,I,W){return I&&$(L.prototype,I),W&&$(L,W),L}})(),c=a(2),u=E(c),d=a(20),m=E(d),h=a(0),p=E(h),g=a(13),v=E(g),y=a(24),j=E(y),w=a(4),N=E(w),_=a(16),T=E(_),A=a(21),P=E(A),C=a(11),O=E(C),M=a(3),k=E(M);function E($){return $&&$.__esModule?$:{default:$}}function R($,L,I){return L in $?Object.defineProperty($,L,{value:I,enumerable:!0,configurable:!0,writable:!0}):$[L]=I,$}function F($,L){if(!($ instanceof L))throw new TypeError("Cannot call a class as a function")}var z=/^[ -~]*$/,V=(function(){function $(L){F(this,$),this.scroll=L,this.delta=this.getDelta()}return o($,[{key:"applyDelta",value:function(I){var W=this,q=!1;this.scroll.update();var Z=this.scroll.length();return this.scroll.batchStart(),I=B(I),I.reduce(function(Q,Y){var K=Y.retain||Y.delete||Y.insert.length||1,ae=Y.attributes||{};if(Y.insert!=null){if(typeof Y.insert=="string"){var se=Y.insert;se.endsWith(`
`)&&q&&(q=!1,se=se.slice(0,-1)),Q>=Z&&!se.endsWith(`
`)&&(q=!0),W.scroll.insertAt(Q,se);var de=W.scroll.line(Q),ue=l(de,2),oe=ue[0],pe=ue[1],je=(0,k.default)({},(0,w.bubbleFormats)(oe));if(oe instanceof N.default){var we=oe.descendant(p.default.Leaf,pe),qe=l(we,1),ze=qe[0];je=(0,k.default)(je,(0,w.bubbleFormats)(ze))}ae=m.default.attributes.diff(je,ae)||{}}else if(i(Y.insert)==="object"){var Ee=Object.keys(Y.insert)[0];if(Ee==null)return Q;W.scroll.insertAt(Q,Ee,Y.insert[Ee])}Z+=K}return Object.keys(ae).forEach(function(Ce){W.scroll.formatAt(Q,K,Ce,ae[Ce])}),Q+K},0),I.reduce(function(Q,Y){return typeof Y.delete=="number"?(W.scroll.deleteAt(Q,Y.delete),Q):Q+(Y.retain||Y.insert.length||1)},0),this.scroll.batchEnd(),this.update(I)}},{key:"deleteText",value:function(I,W){return this.scroll.deleteAt(I,W),this.update(new u.default().retain(I).delete(W))}},{key:"formatLine",value:function(I,W){var q=this,Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(Z).forEach(function(Q){if(!(q.scroll.whitelist!=null&&!q.scroll.whitelist[Q])){var Y=q.scroll.lines(I,Math.max(W,1)),K=W;Y.forEach(function(ae){var se=ae.length();if(!(ae instanceof v.default))ae.format(Q,Z[Q]);else{var de=I-ae.offset(q.scroll),ue=ae.newlineIndex(de+K)-de+1;ae.formatAt(de,ue,Q,Z[Q])}K-=se})}}),this.scroll.optimize(),this.update(new u.default().retain(I).retain(W,(0,P.default)(Z)))}},{key:"formatText",value:function(I,W){var q=this,Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(Z).forEach(function(Q){q.scroll.formatAt(I,W,Q,Z[Q])}),this.update(new u.default().retain(I).retain(W,(0,P.default)(Z)))}},{key:"getContents",value:function(I,W){return this.delta.slice(I,I+W)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(I,W){return I.concat(W.delta())},new u.default)}},{key:"getFormat",value:function(I){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,q=[],Z=[];W===0?this.scroll.path(I).forEach(function(Y){var K=l(Y,1),ae=K[0];ae instanceof N.default?q.push(ae):ae instanceof p.default.Leaf&&Z.push(ae)}):(q=this.scroll.lines(I,W),Z=this.scroll.descendants(p.default.Leaf,I,W));var Q=[q,Z].map(function(Y){if(Y.length===0)return{};for(var K=(0,w.bubbleFormats)(Y.shift());Object.keys(K).length>0;){var ae=Y.shift();if(ae==null)return K;K=U((0,w.bubbleFormats)(ae),K)}return K});return k.default.apply(k.default,Q)}},{key:"getText",value:function(I,W){return this.getContents(I,W).filter(function(q){return typeof q.insert=="string"}).map(function(q){return q.insert}).join("")}},{key:"insertEmbed",value:function(I,W,q){return this.scroll.insertAt(I,W,q),this.update(new u.default().retain(I).insert(R({},W,q)))}},{key:"insertText",value:function(I,W){var q=this,Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return W=W.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(I,W),Object.keys(Z).forEach(function(Q){q.scroll.formatAt(I,W.length,Q,Z[Q])}),this.update(new u.default().retain(I).insert(W,(0,P.default)(Z)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var I=this.scroll.children.head;return I.statics.blotName!==N.default.blotName||I.children.length>1?!1:I.children.head instanceof T.default}},{key:"removeFormat",value:function(I,W){var q=this.getText(I,W),Z=this.scroll.line(I+W),Q=l(Z,2),Y=Q[0],K=Q[1],ae=0,se=new u.default;Y!=null&&(Y instanceof v.default?ae=Y.newlineIndex(K)-K+1:ae=Y.length()-K,se=Y.delta().slice(K,K+ae-1).insert(`
`));var de=this.getContents(I,W+ae),ue=de.diff(new u.default().insert(q).concat(se)),oe=new u.default().retain(I).concat(ue);return this.applyDelta(oe)}},{key:"update",value:function(I){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,Z=this.delta;if(W.length===1&&W[0].type==="characterData"&&W[0].target.data.match(z)&&p.default.find(W[0].target)){var Q=p.default.find(W[0].target),Y=(0,w.bubbleFormats)(Q),K=Q.offset(this.scroll),ae=W[0].oldValue.replace(j.default.CONTENTS,""),se=new u.default().insert(ae),de=new u.default().insert(Q.value()),ue=new u.default().retain(K).concat(se.diff(de,q));I=ue.reduce(function(oe,pe){return pe.insert?oe.insert(pe.insert,Y):oe.push(pe)},new u.default),this.delta=Z.compose(I)}else this.delta=this.getDelta(),(!I||!(0,O.default)(Z.compose(I),this.delta))&&(I=Z.diff(this.delta,q));return I}}]),$})();function U($,L){return Object.keys(L).reduce(function(I,W){return $[W]==null||(L[W]===$[W]?I[W]=L[W]:Array.isArray(L[W])?L[W].indexOf($[W])<0&&(I[W]=L[W].concat([$[W]])):I[W]=[L[W],$[W]]),I},{})}function B($){return $.reduce(function(L,I){if(I.insert===1){var W=(0,P.default)(I.attributes);return delete W.image,L.insert({image:I.attributes.image},W)}if(I.attributes!=null&&(I.attributes.list===!0||I.attributes.bullet===!0)&&(I=(0,P.default)(I),I.attributes.list?I.attributes.list="ordered":(I.attributes.list="bullet",delete I.attributes.bullet)),typeof I.insert=="string"){var q=I.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return L.insert(q,I.attributes)}return L.push(I)},new u.default)}r.default=V}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Range=void 0;var i=(function(){function C(O,M){var k=[],E=!0,R=!1,F=void 0;try{for(var z=O[Symbol.iterator](),V;!(E=(V=z.next()).done)&&(k.push(V.value),!(M&&k.length===M));E=!0);}catch(U){R=!0,F=U}finally{try{!E&&z.return&&z.return()}finally{if(R)throw F}}return k}return function(O,M){if(Array.isArray(O))return O;if(Symbol.iterator in Object(O))return C(O,M);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=(function(){function C(O,M){for(var k=0;k<M.length;k++){var E=M[k];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(O,E.key,E)}}return function(O,M,k){return M&&C(O.prototype,M),k&&C(O,k),O}})(),o=a(0),c=j(o),u=a(21),d=j(u),m=a(11),h=j(m),p=a(8),g=j(p),v=a(10),y=j(v);function j(C){return C&&C.__esModule?C:{default:C}}function w(C){if(Array.isArray(C)){for(var O=0,M=Array(C.length);O<C.length;O++)M[O]=C[O];return M}else return Array.from(C)}function N(C,O){if(!(C instanceof O))throw new TypeError("Cannot call a class as a function")}var _=(0,y.default)("quill:selection"),T=function C(O){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;N(this,C),this.index=O,this.length=M},A=(function(){function C(O,M){var k=this;N(this,C),this.emitter=M,this.scroll=O,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=c.default.create("cursor",this),this.lastRange=this.savedRange=new T(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){k.mouseDown||setTimeout(k.update.bind(k,g.default.sources.USER),1)}),this.emitter.on(g.default.events.EDITOR_CHANGE,function(E,R){E===g.default.events.TEXT_CHANGE&&R.length()>0&&k.update(g.default.sources.SILENT)}),this.emitter.on(g.default.events.SCROLL_BEFORE_UPDATE,function(){if(k.hasFocus()){var E=k.getNativeRange();E!=null&&E.start.node!==k.cursor.textNode&&k.emitter.once(g.default.events.SCROLL_UPDATE,function(){try{k.setNativeRange(E.start.node,E.start.offset,E.end.node,E.end.offset)}catch{}})}}),this.emitter.on(g.default.events.SCROLL_OPTIMIZE,function(E,R){if(R.range){var F=R.range,z=F.startNode,V=F.startOffset,U=F.endNode,B=F.endOffset;k.setNativeRange(z,V,U,B)}}),this.update(g.default.sources.SILENT)}return l(C,[{key:"handleComposition",value:function(){var M=this;this.root.addEventListener("compositionstart",function(){M.composing=!0}),this.root.addEventListener("compositionend",function(){if(M.composing=!1,M.cursor.parent){var k=M.cursor.restore();if(!k)return;setTimeout(function(){M.setNativeRange(k.startNode,k.startOffset,k.endNode,k.endOffset)},1)}})}},{key:"handleDragging",value:function(){var M=this;this.emitter.listenDOM("mousedown",document.body,function(){M.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){M.mouseDown=!1,M.update(g.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(M,k){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[M])){this.scroll.update();var E=this.getNativeRange();if(!(E==null||!E.native.collapsed||c.default.query(M,c.default.Scope.BLOCK))){if(E.start.node!==this.cursor.textNode){var R=c.default.find(E.start.node,!1);if(R==null)return;if(R instanceof c.default.Leaf){var F=R.split(E.start.offset);R.parent.insertBefore(this.cursor,F)}else R.insertBefore(this.cursor,E.start.node);this.cursor.attach()}this.cursor.format(M,k),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(M){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,E=this.scroll.length();M=Math.min(M,E-1),k=Math.min(M+k,E-1)-M;var R=void 0,F=this.scroll.leaf(M),z=i(F,2),V=z[0],U=z[1];if(V==null)return null;var B=V.position(U,!0),$=i(B,2);R=$[0],U=$[1];var L=document.createRange();if(k>0){L.setStart(R,U);var I=this.scroll.leaf(M+k),W=i(I,2);if(V=W[0],U=W[1],V==null)return null;var q=V.position(U,!0),Z=i(q,2);return R=Z[0],U=Z[1],L.setEnd(R,U),L.getBoundingClientRect()}else{var Q="left",Y=void 0;return R instanceof Text?(U<R.data.length?(L.setStart(R,U),L.setEnd(R,U+1)):(L.setStart(R,U-1),L.setEnd(R,U),Q="right"),Y=L.getBoundingClientRect()):(Y=V.domNode.getBoundingClientRect(),U>0&&(Q="right")),{bottom:Y.top+Y.height,height:Y.height,left:Y[Q],right:Y[Q],top:Y.top,width:0}}}},{key:"getNativeRange",value:function(){var M=document.getSelection();if(M==null||M.rangeCount<=0)return null;var k=M.getRangeAt(0);if(k==null)return null;var E=this.normalizeNative(k);return _.info("getNativeRange",E),E}},{key:"getRange",value:function(){var M=this.getNativeRange();if(M==null)return[null,null];var k=this.normalizedToRange(M);return[k,M]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(M){var k=this,E=[[M.start.node,M.start.offset]];M.native.collapsed||E.push([M.end.node,M.end.offset]);var R=E.map(function(V){var U=i(V,2),B=U[0],$=U[1],L=c.default.find(B,!0),I=L.offset(k.scroll);return $===0?I:L instanceof c.default.Container?I+L.length():I+L.index(B,$)}),F=Math.min(Math.max.apply(Math,w(R)),this.scroll.length()-1),z=Math.min.apply(Math,[F].concat(w(R)));return new T(z,F-z)}},{key:"normalizeNative",value:function(M){if(!P(this.root,M.startContainer)||!M.collapsed&&!P(this.root,M.endContainer))return null;var k={start:{node:M.startContainer,offset:M.startOffset},end:{node:M.endContainer,offset:M.endOffset},native:M};return[k.start,k.end].forEach(function(E){for(var R=E.node,F=E.offset;!(R instanceof Text)&&R.childNodes.length>0;)if(R.childNodes.length>F)R=R.childNodes[F],F=0;else if(R.childNodes.length===F)R=R.lastChild,F=R instanceof Text?R.data.length:R.childNodes.length+1;else break;E.node=R,E.offset=F}),k}},{key:"rangeToNative",value:function(M){var k=this,E=M.collapsed?[M.index]:[M.index,M.index+M.length],R=[],F=this.scroll.length();return E.forEach(function(z,V){z=Math.min(F-1,z);var U=void 0,B=k.scroll.leaf(z),$=i(B,2),L=$[0],I=$[1],W=L.position(I,V!==0),q=i(W,2);U=q[0],I=q[1],R.push(U,I)}),R.length<2&&(R=R.concat(R)),R}},{key:"scrollIntoView",value:function(M){var k=this.lastRange;if(k!=null){var E=this.getBounds(k.index,k.length);if(E!=null){var R=this.scroll.length()-1,F=this.scroll.line(Math.min(k.index,R)),z=i(F,1),V=z[0],U=V;if(k.length>0){var B=this.scroll.line(Math.min(k.index+k.length,R)),$=i(B,1);U=$[0]}if(!(V==null||U==null)){var L=M.getBoundingClientRect();E.top<L.top?M.scrollTop-=L.top-E.top:E.bottom>L.bottom&&(M.scrollTop+=E.bottom-L.bottom)}}}}},{key:"setNativeRange",value:function(M,k){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:M,R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:k,F=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(_.info("setNativeRange",M,k,E,R),!(M!=null&&(this.root.parentNode==null||M.parentNode==null||E.parentNode==null))){var z=document.getSelection();if(z!=null)if(M!=null){this.hasFocus()||this.root.focus();var V=(this.getNativeRange()||{}).native;if(V==null||F||M!==V.startContainer||k!==V.startOffset||E!==V.endContainer||R!==V.endOffset){M.tagName=="BR"&&(k=[].indexOf.call(M.parentNode.childNodes,M),M=M.parentNode),E.tagName=="BR"&&(R=[].indexOf.call(E.parentNode.childNodes,E),E=E.parentNode);var U=document.createRange();U.setStart(M,k),U.setEnd(E,R),z.removeAllRanges(),z.addRange(U)}}else z.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(M){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.default.sources.API;if(typeof k=="string"&&(E=k,k=!1),_.info("setRange",M),M!=null){var R=this.rangeToNative(M);this.setNativeRange.apply(this,w(R).concat([k]))}else this.setNativeRange(null);this.update(E)}},{key:"update",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g.default.sources.USER,k=this.lastRange,E=this.getRange(),R=i(E,2),F=R[0],z=R[1];if(this.lastRange=F,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,h.default)(k,this.lastRange)){var V;!this.composing&&z!=null&&z.native.collapsed&&z.start.node!==this.cursor.textNode&&this.cursor.restore();var U=[g.default.events.SELECTION_CHANGE,(0,d.default)(this.lastRange),(0,d.default)(k),M];if((V=this.emitter).emit.apply(V,[g.default.events.EDITOR_CHANGE].concat(U)),M!==g.default.sources.SILENT){var B;(B=this.emitter).emit.apply(B,U)}}}}]),C})();function P(C,O){try{O.parentNode}catch{return!1}return O instanceof Text&&(O=O.parentNode),C.contains(O)}r.Range=T,r.default=A}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=(function(){function g(v,y){for(var j=0;j<y.length;j++){var w=y[j];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,y,j){return y&&g(v.prototype,y),j&&g(v,j),v}})(),l=function g(v,y,j){v===null&&(v=Function.prototype);var w=Object.getOwnPropertyDescriptor(v,y);if(w===void 0){var N=Object.getPrototypeOf(v);return N===null?void 0:g(N,y,j)}else{if("value"in w)return w.value;var _=w.get;return _===void 0?void 0:_.call(j)}},o=a(0),c=u(o);function u(g){return g&&g.__esModule?g:{default:g}}function d(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}function m(g,v){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:g}function h(g,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);g.prototype=Object.create(v&&v.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(g,v):g.__proto__=v)}var p=(function(g){h(v,g);function v(){return d(this,v),m(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"insertInto",value:function(j,w){j.children.length===0?l(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"insertInto",this).call(this,j,w):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),v})(c.default.Embed);p.blotName="break",p.tagName="BR",r.default=p}),(function(n,r,a){var i=this&&this.__extends||(function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var g in p)p.hasOwnProperty(g)&&(h[g]=p[g])};return function(h,p){m(h,p);function g(){this.constructor=h}h.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}})();Object.defineProperty(r,"__esModule",{value:!0});var l=a(44),o=a(30),c=a(1),u=(function(m){i(h,m);function h(p){var g=m.call(this,p)||this;return g.build(),g}return h.prototype.appendChild=function(p){this.insertBefore(p)},h.prototype.attach=function(){m.prototype.attach.call(this),this.children.forEach(function(p){p.attach()})},h.prototype.build=function(){var p=this;this.children=new l.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(g){try{var v=d(g);p.insertBefore(v,p.children.head||void 0)}catch(y){if(y instanceof c.ParchmentError)return;throw y}})},h.prototype.deleteAt=function(p,g){if(p===0&&g===this.length())return this.remove();this.children.forEachAt(p,g,function(v,y,j){v.deleteAt(y,j)})},h.prototype.descendant=function(p,g){var v=this.children.find(g),y=v[0],j=v[1];return p.blotName==null&&p(y)||p.blotName!=null&&y instanceof p?[y,j]:y instanceof h?y.descendant(p,j):[null,-1]},h.prototype.descendants=function(p,g,v){g===void 0&&(g=0),v===void 0&&(v=Number.MAX_VALUE);var y=[],j=v;return this.children.forEachAt(g,v,function(w,N,_){(p.blotName==null&&p(w)||p.blotName!=null&&w instanceof p)&&y.push(w),w instanceof h&&(y=y.concat(w.descendants(p,N,j))),j-=_}),y},h.prototype.detach=function(){this.children.forEach(function(p){p.detach()}),m.prototype.detach.call(this)},h.prototype.formatAt=function(p,g,v,y){this.children.forEachAt(p,g,function(j,w,N){j.formatAt(w,N,v,y)})},h.prototype.insertAt=function(p,g,v){var y=this.children.find(p),j=y[0],w=y[1];if(j)j.insertAt(w,g,v);else{var N=v==null?c.create("text",g):c.create(g,v);this.appendChild(N)}},h.prototype.insertBefore=function(p,g){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(v){return p instanceof v}))throw new c.ParchmentError("Cannot insert "+p.statics.blotName+" into "+this.statics.blotName);p.insertInto(this,g)},h.prototype.length=function(){return this.children.reduce(function(p,g){return p+g.length()},0)},h.prototype.moveChildren=function(p,g){this.children.forEach(function(v){p.insertBefore(v,g)})},h.prototype.optimize=function(p){if(m.prototype.optimize.call(this,p),this.children.length===0)if(this.statics.defaultChild!=null){var g=c.create(this.statics.defaultChild);this.appendChild(g),g.optimize(p)}else this.remove()},h.prototype.path=function(p,g){g===void 0&&(g=!1);var v=this.children.find(p,g),y=v[0],j=v[1],w=[[this,p]];return y instanceof h?w.concat(y.path(j,g)):(y!=null&&w.push([y,j]),w)},h.prototype.removeChild=function(p){this.children.remove(p)},h.prototype.replace=function(p){p instanceof h&&p.moveChildren(this),m.prototype.replace.call(this,p)},h.prototype.split=function(p,g){if(g===void 0&&(g=!1),!g){if(p===0)return this;if(p===this.length())return this.next}var v=this.clone();return this.parent.insertBefore(v,this.next),this.children.forEachAt(p,this.length(),function(y,j,w){y=y.split(j,g),v.appendChild(y)}),v},h.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},h.prototype.update=function(p,g){var v=this,y=[],j=[];p.forEach(function(w){w.target===v.domNode&&w.type==="childList"&&(y.push.apply(y,w.addedNodes),j.push.apply(j,w.removedNodes))}),j.forEach(function(w){if(!(w.parentNode!=null&&w.tagName!=="IFRAME"&&document.body.compareDocumentPosition(w)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var N=c.find(w);N!=null&&(N.domNode.parentNode==null||N.domNode.parentNode===v.domNode)&&N.detach()}}),y.filter(function(w){return w.parentNode==v.domNode}).sort(function(w,N){return w===N?0:w.compareDocumentPosition(N)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(w){var N=null;w.nextSibling!=null&&(N=c.find(w.nextSibling));var _=d(w);(_.next!=N||_.next==null)&&(_.parent!=null&&_.parent.removeChild(v),v.insertBefore(_,N||void 0))})},h})(o.default);function d(m){var h=c.find(m);if(h==null)try{h=c.create(m)}catch{h=c.create(c.Scope.INLINE),[].slice.call(m.childNodes).forEach(function(g){h.domNode.appendChild(g)}),m.parentNode&&m.parentNode.replaceChild(h.domNode,m),h.attach()}return h}r.default=u}),(function(n,r,a){var i=this&&this.__extends||(function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var g in p)p.hasOwnProperty(g)&&(h[g]=p[g])};return function(h,p){m(h,p);function g(){this.constructor=h}h.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}})();Object.defineProperty(r,"__esModule",{value:!0});var l=a(12),o=a(31),c=a(17),u=a(1),d=(function(m){i(h,m);function h(p){var g=m.call(this,p)||this;return g.attributes=new o.default(g.domNode),g}return h.formats=function(p){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return p.tagName.toLowerCase()},h.prototype.format=function(p,g){var v=u.query(p);v instanceof l.default?this.attributes.attribute(v,g):g&&v!=null&&(p!==this.statics.blotName||this.formats()[p]!==g)&&this.replaceWith(p,g)},h.prototype.formats=function(){var p=this.attributes.values(),g=this.statics.formats(this.domNode);return g!=null&&(p[this.statics.blotName]=g),p},h.prototype.replaceWith=function(p,g){var v=m.prototype.replaceWith.call(this,p,g);return this.attributes.copy(v),v},h.prototype.update=function(p,g){var v=this;m.prototype.update.call(this,p,g),p.some(function(y){return y.target===v.domNode&&y.type==="attributes"})&&this.attributes.build()},h.prototype.wrap=function(p,g){var v=m.prototype.wrap.call(this,p,g);return v instanceof h&&v.statics.scope===this.statics.scope&&this.attributes.move(v),v},h})(c.default);r.default=d}),(function(n,r,a){var i=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,m){d.__proto__=m}||function(d,m){for(var h in m)m.hasOwnProperty(h)&&(d[h]=m[h])};return function(d,m){u(d,m);function h(){this.constructor=d}d.prototype=m===null?Object.create(m):(h.prototype=m.prototype,new h)}})();Object.defineProperty(r,"__esModule",{value:!0});var l=a(30),o=a(1),c=(function(u){i(d,u);function d(){return u!==null&&u.apply(this,arguments)||this}return d.value=function(m){return!0},d.prototype.index=function(m,h){return this.domNode===m||this.domNode.compareDocumentPosition(m)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(h,1):-1},d.prototype.position=function(m,h){var p=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return m>0&&(p+=1),[this.parent.domNode,p]},d.prototype.value=function(){var m;return m={},m[this.statics.blotName]=this.statics.value(this.domNode)||!0,m},d.scope=o.Scope.INLINE_BLOT,d})(l.default);r.default=c}),(function(n,r,a){var i=a(11),l=a(3),o={attributes:{compose:function(u,d,m){typeof u!="object"&&(u={}),typeof d!="object"&&(d={});var h=l(!0,{},d);m||(h=Object.keys(h).reduce(function(g,v){return h[v]!=null&&(g[v]=h[v]),g},{}));for(var p in u)u[p]!==void 0&&d[p]===void 0&&(h[p]=u[p]);return Object.keys(h).length>0?h:void 0},diff:function(u,d){typeof u!="object"&&(u={}),typeof d!="object"&&(d={});var m=Object.keys(u).concat(Object.keys(d)).reduce(function(h,p){return i(u[p],d[p])||(h[p]=d[p]===void 0?null:d[p]),h},{});return Object.keys(m).length>0?m:void 0},transform:function(u,d,m){if(typeof u!="object")return d;if(typeof d=="object"){if(!m)return d;var h=Object.keys(d).reduce(function(p,g){return u[g]===void 0&&(p[g]=d[g]),p},{});return Object.keys(h).length>0?h:void 0}}},iterator:function(u){return new c(u)},length:function(u){return typeof u.delete=="number"?u.delete:typeof u.retain=="number"?u.retain:typeof u.insert=="string"?u.insert.length:1}};function c(u){this.ops=u,this.index=0,this.offset=0}c.prototype.hasNext=function(){return this.peekLength()<1/0},c.prototype.next=function(u){u||(u=1/0);var d=this.ops[this.index];if(d){var m=this.offset,h=o.length(d);if(u>=h-m?(u=h-m,this.index+=1,this.offset=0):this.offset+=u,typeof d.delete=="number")return{delete:u};var p={};return d.attributes&&(p.attributes=d.attributes),typeof d.retain=="number"?p.retain=u:typeof d.insert=="string"?p.insert=d.insert.substr(m,u):p.insert=d.insert,p}else return{retain:1/0}},c.prototype.peek=function(){return this.ops[this.index]},c.prototype.peekLength=function(){return this.ops[this.index]?o.length(this.ops[this.index])-this.offset:1/0},c.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},c.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var u=this.offset,d=this.index,m=this.next(),h=this.ops.slice(this.index);return this.offset=u,this.index=d,[m].concat(h)}else return[]},n.exports=o}),(function(n,r){var a=(function(){function i(v,y){return y!=null&&v instanceof y}var l;try{l=Map}catch{l=function(){}}var o;try{o=Set}catch{o=function(){}}var c;try{c=Promise}catch{c=function(){}}function u(v,y,j,w,N){typeof y=="object"&&(j=y.depth,w=y.prototype,N=y.includeNonEnumerable,y=y.circular);var _=[],T=[],A=typeof Buffer<"u";typeof y>"u"&&(y=!0),typeof j>"u"&&(j=1/0);function P(C,O){if(C===null)return null;if(O===0)return C;var M,k;if(typeof C!="object")return C;if(i(C,l))M=new l;else if(i(C,o))M=new o;else if(i(C,c))M=new c(function(L,I){C.then(function(W){L(P(W,O-1))},function(W){I(P(W,O-1))})});else if(u.__isArray(C))M=[];else if(u.__isRegExp(C))M=new RegExp(C.source,g(C)),C.lastIndex&&(M.lastIndex=C.lastIndex);else if(u.__isDate(C))M=new Date(C.getTime());else{if(A&&Buffer.isBuffer(C))return Buffer.allocUnsafe?M=Buffer.allocUnsafe(C.length):M=new Buffer(C.length),C.copy(M),M;i(C,Error)?M=Object.create(C):typeof w>"u"?(k=Object.getPrototypeOf(C),M=Object.create(k)):(M=Object.create(w),k=w)}if(y){var E=_.indexOf(C);if(E!=-1)return T[E];_.push(C),T.push(M)}i(C,l)&&C.forEach(function(L,I){var W=P(I,O-1),q=P(L,O-1);M.set(W,q)}),i(C,o)&&C.forEach(function(L){var I=P(L,O-1);M.add(I)});for(var R in C){var F;k&&(F=Object.getOwnPropertyDescriptor(k,R)),!(F&&F.set==null)&&(M[R]=P(C[R],O-1))}if(Object.getOwnPropertySymbols)for(var z=Object.getOwnPropertySymbols(C),R=0;R<z.length;R++){var V=z[R],U=Object.getOwnPropertyDescriptor(C,V);U&&!U.enumerable&&!N||(M[V]=P(C[V],O-1),U.enumerable||Object.defineProperty(M,V,{enumerable:!1}))}if(N)for(var B=Object.getOwnPropertyNames(C),R=0;R<B.length;R++){var $=B[R],U=Object.getOwnPropertyDescriptor(C,$);U&&U.enumerable||(M[$]=P(C[$],O-1),Object.defineProperty(M,$,{enumerable:!1}))}return M}return P(v,j)}u.clonePrototype=function(y){if(y===null)return null;var j=function(){};return j.prototype=y,new j};function d(v){return Object.prototype.toString.call(v)}u.__objToStr=d;function m(v){return typeof v=="object"&&d(v)==="[object Date]"}u.__isDate=m;function h(v){return typeof v=="object"&&d(v)==="[object Array]"}u.__isArray=h;function p(v){return typeof v=="object"&&d(v)==="[object RegExp]"}u.__isRegExp=p;function g(v){var y="";return v.global&&(y+="g"),v.ignoreCase&&(y+="i"),v.multiline&&(y+="m"),y}return u.__getRegExpFlags=g,u})();typeof n=="object"&&n.exports&&(n.exports=a)}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=(function(){function M(k,E){var R=[],F=!0,z=!1,V=void 0;try{for(var U=k[Symbol.iterator](),B;!(F=(B=U.next()).done)&&(R.push(B.value),!(E&&R.length===E));F=!0);}catch($){z=!0,V=$}finally{try{!F&&U.return&&U.return()}finally{if(z)throw V}}return R}return function(k,E){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return M(k,E);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=(function(){function M(k,E){for(var R=0;R<E.length;R++){var F=E[R];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(k,F.key,F)}}return function(k,E,R){return E&&M(k.prototype,E),R&&M(k,R),k}})(),o=function M(k,E,R){k===null&&(k=Function.prototype);var F=Object.getOwnPropertyDescriptor(k,E);if(F===void 0){var z=Object.getPrototypeOf(k);return z===null?void 0:M(z,E,R)}else{if("value"in F)return F.value;var V=F.get;return V===void 0?void 0:V.call(R)}},c=a(0),u=_(c),d=a(8),m=_(d),h=a(4),p=_(h),g=a(16),v=_(g),y=a(13),j=_(y),w=a(25),N=_(w);function _(M){return M&&M.__esModule?M:{default:M}}function T(M,k){if(!(M instanceof k))throw new TypeError("Cannot call a class as a function")}function A(M,k){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:M}function P(M,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);M.prototype=Object.create(k&&k.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(M,k):M.__proto__=k)}function C(M){return M instanceof p.default||M instanceof h.BlockEmbed}var O=(function(M){P(k,M);function k(E,R){T(this,k);var F=A(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,E));return F.emitter=R.emitter,Array.isArray(R.whitelist)&&(F.whitelist=R.whitelist.reduce(function(z,V){return z[V]=!0,z},{})),F.domNode.addEventListener("DOMNodeInserted",function(){}),F.optimize(),F.enable(),F}return l(k,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(R,F){var z=this.line(R),V=i(z,2),U=V[0],B=V[1],$=this.line(R+F),L=i($,1),I=L[0];if(o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"deleteAt",this).call(this,R,F),I!=null&&U!==I&&B>0){if(U instanceof h.BlockEmbed||I instanceof h.BlockEmbed){this.optimize();return}if(U instanceof j.default){var W=U.newlineIndex(U.length(),!0);if(W>-1&&(U=U.split(W+1),U===I)){this.optimize();return}}else if(I instanceof j.default){var q=I.newlineIndex(0);q>-1&&I.split(q+1)}var Z=I.children.head instanceof v.default?null:I.children.head;U.moveChildren(I,Z),U.remove()}this.optimize()}},{key:"enable",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",R)}},{key:"formatAt",value:function(R,F,z,V){this.whitelist!=null&&!this.whitelist[z]||(o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"formatAt",this).call(this,R,F,z,V),this.optimize())}},{key:"insertAt",value:function(R,F,z){if(!(z!=null&&this.whitelist!=null&&!this.whitelist[F])){if(R>=this.length())if(z==null||u.default.query(F,u.default.Scope.BLOCK)==null){var V=u.default.create(this.statics.defaultChild);this.appendChild(V),z==null&&F.endsWith(`
`)&&(F=F.slice(0,-1)),V.insertAt(0,F,z)}else{var U=u.default.create(F,z);this.appendChild(U)}else o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertAt",this).call(this,R,F,z);this.optimize()}}},{key:"insertBefore",value:function(R,F){if(R.statics.scope===u.default.Scope.INLINE_BLOT){var z=u.default.create(this.statics.defaultChild);z.appendChild(R),R=z}o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertBefore",this).call(this,R,F)}},{key:"leaf",value:function(R){return this.path(R).pop()||[null,-1]}},{key:"line",value:function(R){return R===this.length()?this.line(R-1):this.descendant(C,R)}},{key:"lines",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,z=function V(U,B,$){var L=[],I=$;return U.children.forEachAt(B,$,function(W,q,Z){C(W)?L.push(W):W instanceof u.default.Container&&(L=L.concat(V(W,q,I))),I-=Z}),L};return z(this,R,F)}},{key:"optimize",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"optimize",this).call(this,R,F),R.length>0&&this.emitter.emit(m.default.events.SCROLL_OPTIMIZE,R,F))}},{key:"path",value:function(R){return o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"path",this).call(this,R).slice(1)}},{key:"update",value:function(R){if(this.batch!==!0){var F=m.default.sources.USER;typeof R=="string"&&(F=R),Array.isArray(R)||(R=this.observer.takeRecords()),R.length>0&&this.emitter.emit(m.default.events.SCROLL_BEFORE_UPDATE,F,R),o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"update",this).call(this,R.concat([])),R.length>0&&this.emitter.emit(m.default.events.SCROLL_UPDATE,F,R)}}}]),k})(u.default.Scroll);O.blotName="scroll",O.className="ql-editor",O.tagName="DIV",O.defaultChild="block",O.allowedChildren=[p.default,h.BlockEmbed,N.default],r.default=O}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.SHORTKEY=r.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},l=(function(){function Y(K,ae){var se=[],de=!0,ue=!1,oe=void 0;try{for(var pe=K[Symbol.iterator](),je;!(de=(je=pe.next()).done)&&(se.push(je.value),!(ae&&se.length===ae));de=!0);}catch(we){ue=!0,oe=we}finally{try{!de&&pe.return&&pe.return()}finally{if(ue)throw oe}}return se}return function(K,ae){if(Array.isArray(K))return K;if(Symbol.iterator in Object(K))return Y(K,ae);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function Y(K,ae){for(var se=0;se<ae.length;se++){var de=ae[se];de.enumerable=de.enumerable||!1,de.configurable=!0,"value"in de&&(de.writable=!0),Object.defineProperty(K,de.key,de)}}return function(K,ae,se){return ae&&Y(K.prototype,ae),se&&Y(K,se),K}})(),c=a(21),u=M(c),d=a(11),m=M(d),h=a(3),p=M(h),g=a(2),v=M(g),y=a(20),j=M(y),w=a(0),N=M(w),_=a(5),T=M(_),A=a(10),P=M(A),C=a(9),O=M(C);function M(Y){return Y&&Y.__esModule?Y:{default:Y}}function k(Y,K,ae){return K in Y?Object.defineProperty(Y,K,{value:ae,enumerable:!0,configurable:!0,writable:!0}):Y[K]=ae,Y}function E(Y,K){if(!(Y instanceof K))throw new TypeError("Cannot call a class as a function")}function R(Y,K){if(!Y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return K&&(typeof K=="object"||typeof K=="function")?K:Y}function F(Y,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof K);Y.prototype=Object.create(K&&K.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}}),K&&(Object.setPrototypeOf?Object.setPrototypeOf(Y,K):Y.__proto__=K)}var z=(0,P.default)("quill:keyboard"),V=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",U=(function(Y){F(K,Y),o(K,null,[{key:"match",value:function(se,de){return de=Q(de),["altKey","ctrlKey","metaKey","shiftKey"].some(function(ue){return!!de[ue]!==se[ue]&&de[ue]!==null})?!1:de.key===(se.which||se.keyCode)}}]);function K(ae,se){E(this,K);var de=R(this,(K.__proto__||Object.getPrototypeOf(K)).call(this,ae,se));return de.bindings={},Object.keys(de.options.bindings).forEach(function(ue){ue==="list autofill"&&ae.scroll.whitelist!=null&&!ae.scroll.whitelist.list||de.options.bindings[ue]&&de.addBinding(de.options.bindings[ue])}),de.addBinding({key:K.keys.ENTER,shiftKey:null},W),de.addBinding({key:K.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(de.addBinding({key:K.keys.BACKSPACE},{collapsed:!0},$),de.addBinding({key:K.keys.DELETE},{collapsed:!0},L)):(de.addBinding({key:K.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},$),de.addBinding({key:K.keys.DELETE},{collapsed:!0,suffix:/^.?$/},L)),de.addBinding({key:K.keys.BACKSPACE},{collapsed:!1},I),de.addBinding({key:K.keys.DELETE},{collapsed:!1},I),de.addBinding({key:K.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},$),de.listen(),de}return o(K,[{key:"addBinding",value:function(se){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},oe=Q(se);if(oe==null||oe.key==null)return z.warn("Attempted to add invalid keyboard binding",oe);typeof de=="function"&&(de={handler:de}),typeof ue=="function"&&(ue={handler:ue}),oe=(0,p.default)(oe,de,ue),this.bindings[oe.key]=this.bindings[oe.key]||[],this.bindings[oe.key].push(oe)}},{key:"listen",value:function(){var se=this;this.quill.root.addEventListener("keydown",function(de){if(!de.defaultPrevented){var ue=de.which||de.keyCode,oe=(se.bindings[ue]||[]).filter(function(lt){return K.match(de,lt)});if(oe.length!==0){var pe=se.quill.getSelection();if(!(pe==null||!se.quill.hasFocus())){var je=se.quill.getLine(pe.index),we=l(je,2),qe=we[0],ze=we[1],Ee=se.quill.getLeaf(pe.index),Ce=l(Ee,2),Ge=Ce[0],Ye=Ce[1],De=pe.length===0?[Ge,Ye]:se.quill.getLeaf(pe.index+pe.length),it=l(De,2),Se=it[0],at=it[1],_e=Ge instanceof N.default.Text?Ge.value().slice(0,Ye):"",$e=Se instanceof N.default.Text?Se.value().slice(at):"",nt={collapsed:pe.length===0,empty:pe.length===0&&qe.length()<=1,format:se.quill.getFormat(pe),offset:ze,prefix:_e,suffix:$e},dt=oe.some(function(lt){if(lt.collapsed!=null&&lt.collapsed!==nt.collapsed||lt.empty!=null&&lt.empty!==nt.empty||lt.offset!=null&&lt.offset!==nt.offset)return!1;if(Array.isArray(lt.format)){if(lt.format.every(function(Rt){return nt.format[Rt]==null}))return!1}else if(i(lt.format)==="object"&&!Object.keys(lt.format).every(function(Rt){return lt.format[Rt]===!0?nt.format[Rt]!=null:lt.format[Rt]===!1?nt.format[Rt]==null:(0,m.default)(lt.format[Rt],nt.format[Rt])}))return!1;return lt.prefix!=null&&!lt.prefix.test(nt.prefix)||lt.suffix!=null&&!lt.suffix.test(nt.suffix)?!1:lt.handler.call(se,pe,nt)!==!0});dt&&de.preventDefault()}}}})}}]),K})(O.default);U.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},U.DEFAULTS={bindings:{bold:Z("bold"),italic:Z("italic"),underline:Z("underline"),indent:{key:U.keys.TAB,format:["blockquote","indent","list"],handler:function(K,ae){if(ae.collapsed&&ae.offset!==0)return!0;this.quill.format("indent","+1",T.default.sources.USER)}},outdent:{key:U.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(K,ae){if(ae.collapsed&&ae.offset!==0)return!0;this.quill.format("indent","-1",T.default.sources.USER)}},"outdent backspace":{key:U.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(K,ae){ae.format.indent!=null?this.quill.format("indent","-1",T.default.sources.USER):ae.format.list!=null&&this.quill.format("list",!1,T.default.sources.USER)}},"indent code-block":q(!0),"outdent code-block":q(!1),"remove tab":{key:U.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(K){this.quill.deleteText(K.index-1,1,T.default.sources.USER)}},tab:{key:U.keys.TAB,handler:function(K){this.quill.history.cutoff();var ae=new v.default().retain(K.index).delete(K.length).insert("	");this.quill.updateContents(ae,T.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(K.index+1,T.default.sources.SILENT)}},"list empty enter":{key:U.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(K,ae){this.quill.format("list",!1,T.default.sources.USER),ae.format.indent&&this.quill.format("indent",!1,T.default.sources.USER)}},"checklist enter":{key:U.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(K){var ae=this.quill.getLine(K.index),se=l(ae,2),de=se[0],ue=se[1],oe=(0,p.default)({},de.formats(),{list:"checked"}),pe=new v.default().retain(K.index).insert(`
`,oe).retain(de.length()-ue-1).retain(1,{list:"unchecked"});this.quill.updateContents(pe,T.default.sources.USER),this.quill.setSelection(K.index+1,T.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:U.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(K,ae){var se=this.quill.getLine(K.index),de=l(se,2),ue=de[0],oe=de[1],pe=new v.default().retain(K.index).insert(`
`,ae.format).retain(ue.length()-oe-1).retain(1,{header:null});this.quill.updateContents(pe,T.default.sources.USER),this.quill.setSelection(K.index+1,T.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(K,ae){var se=ae.prefix.length,de=this.quill.getLine(K.index),ue=l(de,2),oe=ue[0],pe=ue[1];if(pe>se)return!0;var je=void 0;switch(ae.prefix.trim()){case"[]":case"[ ]":je="unchecked";break;case"[x]":je="checked";break;case"-":case"*":je="bullet";break;default:je="ordered"}this.quill.insertText(K.index," ",T.default.sources.USER),this.quill.history.cutoff();var we=new v.default().retain(K.index-pe).delete(se+1).retain(oe.length()-2-pe).retain(1,{list:je});this.quill.updateContents(we,T.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(K.index-se,T.default.sources.SILENT)}},"code exit":{key:U.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(K){var ae=this.quill.getLine(K.index),se=l(ae,2),de=se[0],ue=se[1],oe=new v.default().retain(K.index+de.length()-ue-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(oe,T.default.sources.USER)}},"embed left":B(U.keys.LEFT,!1),"embed left shift":B(U.keys.LEFT,!0),"embed right":B(U.keys.RIGHT,!1),"embed right shift":B(U.keys.RIGHT,!0)}};function B(Y,K){var ae,se=Y===U.keys.LEFT?"prefix":"suffix";return ae={key:Y,shiftKey:K,altKey:null},k(ae,se,/^$/),k(ae,"handler",function(ue){var oe=ue.index;Y===U.keys.RIGHT&&(oe+=ue.length+1);var pe=this.quill.getLeaf(oe),je=l(pe,1),we=je[0];return we instanceof N.default.Embed?(Y===U.keys.LEFT?K?this.quill.setSelection(ue.index-1,ue.length+1,T.default.sources.USER):this.quill.setSelection(ue.index-1,T.default.sources.USER):K?this.quill.setSelection(ue.index,ue.length+1,T.default.sources.USER):this.quill.setSelection(ue.index+ue.length+1,T.default.sources.USER),!1):!0}),ae}function $(Y,K){if(!(Y.index===0||this.quill.getLength()<=1)){var ae=this.quill.getLine(Y.index),se=l(ae,1),de=se[0],ue={};if(K.offset===0){var oe=this.quill.getLine(Y.index-1),pe=l(oe,1),je=pe[0];if(je!=null&&je.length()>1){var we=de.formats(),qe=this.quill.getFormat(Y.index-1,1);ue=j.default.attributes.diff(we,qe)||{}}}var ze=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(K.prefix)?2:1;this.quill.deleteText(Y.index-ze,ze,T.default.sources.USER),Object.keys(ue).length>0&&this.quill.formatLine(Y.index-ze,ze,ue,T.default.sources.USER),this.quill.focus()}}function L(Y,K){var ae=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(K.suffix)?2:1;if(!(Y.index>=this.quill.getLength()-ae)){var se={},de=0,ue=this.quill.getLine(Y.index),oe=l(ue,1),pe=oe[0];if(K.offset>=pe.length()-1){var je=this.quill.getLine(Y.index+1),we=l(je,1),qe=we[0];if(qe){var ze=pe.formats(),Ee=this.quill.getFormat(Y.index,1);se=j.default.attributes.diff(ze,Ee)||{},de=qe.length()}}this.quill.deleteText(Y.index,ae,T.default.sources.USER),Object.keys(se).length>0&&this.quill.formatLine(Y.index+de-1,ae,se,T.default.sources.USER)}}function I(Y){var K=this.quill.getLines(Y),ae={};if(K.length>1){var se=K[0].formats(),de=K[K.length-1].formats();ae=j.default.attributes.diff(de,se)||{}}this.quill.deleteText(Y,T.default.sources.USER),Object.keys(ae).length>0&&this.quill.formatLine(Y.index,1,ae,T.default.sources.USER),this.quill.setSelection(Y.index,T.default.sources.SILENT),this.quill.focus()}function W(Y,K){var ae=this;Y.length>0&&this.quill.scroll.deleteAt(Y.index,Y.length);var se=Object.keys(K.format).reduce(function(de,ue){return N.default.query(ue,N.default.Scope.BLOCK)&&!Array.isArray(K.format[ue])&&(de[ue]=K.format[ue]),de},{});this.quill.insertText(Y.index,`
`,se,T.default.sources.USER),this.quill.setSelection(Y.index+1,T.default.sources.SILENT),this.quill.focus(),Object.keys(K.format).forEach(function(de){se[de]==null&&(Array.isArray(K.format[de])||de!=="link"&&ae.quill.format(de,K.format[de],T.default.sources.USER))})}function q(Y){return{key:U.keys.TAB,shiftKey:!Y,format:{"code-block":!0},handler:function(ae){var se=N.default.query("code-block"),de=ae.index,ue=ae.length,oe=this.quill.scroll.descendant(se,de),pe=l(oe,2),je=pe[0],we=pe[1];if(je!=null){var qe=this.quill.getIndex(je),ze=je.newlineIndex(we,!0)+1,Ee=je.newlineIndex(qe+we+ue),Ce=je.domNode.textContent.slice(ze,Ee).split(`
`);we=0,Ce.forEach(function(Ge,Ye){Y?(je.insertAt(ze+we,se.TAB),we+=se.TAB.length,Ye===0?de+=se.TAB.length:ue+=se.TAB.length):Ge.startsWith(se.TAB)&&(je.deleteAt(ze+we,se.TAB.length),we-=se.TAB.length,Ye===0?de-=se.TAB.length:ue-=se.TAB.length),we+=Ge.length+1}),this.quill.update(T.default.sources.USER),this.quill.setSelection(de,ue,T.default.sources.SILENT)}}}}function Z(Y){return{key:Y[0].toUpperCase(),shortKey:!0,handler:function(ae,se){this.quill.format(Y,!se.format[Y],T.default.sources.USER)}}}function Q(Y){if(typeof Y=="string"||typeof Y=="number")return Q({key:Y});if((typeof Y>"u"?"undefined":i(Y))==="object"&&(Y=(0,u.default)(Y,!1)),typeof Y.key=="string")if(U.keys[Y.key.toUpperCase()]!=null)Y.key=U.keys[Y.key.toUpperCase()];else if(Y.key.length===1)Y.key=Y.key.toUpperCase().charCodeAt(0);else return null;return Y.shortKey&&(Y[V]=Y.shortKey,delete Y.shortKey),Y}r.default=U,r.SHORTKEY=V}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=(function(){function j(w,N){var _=[],T=!0,A=!1,P=void 0;try{for(var C=w[Symbol.iterator](),O;!(T=(O=C.next()).done)&&(_.push(O.value),!(N&&_.length===N));T=!0);}catch(M){A=!0,P=M}finally{try{!T&&C.return&&C.return()}finally{if(A)throw P}}return _}return function(w,N){if(Array.isArray(w))return w;if(Symbol.iterator in Object(w))return j(w,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=function j(w,N,_){w===null&&(w=Function.prototype);var T=Object.getOwnPropertyDescriptor(w,N);if(T===void 0){var A=Object.getPrototypeOf(w);return A===null?void 0:j(A,N,_)}else{if("value"in T)return T.value;var P=T.get;return P===void 0?void 0:P.call(_)}},o=(function(){function j(w,N){for(var _=0;_<N.length;_++){var T=N[_];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(w,T.key,T)}}return function(w,N,_){return N&&j(w.prototype,N),_&&j(w,_),w}})(),c=a(0),u=h(c),d=a(7),m=h(d);function h(j){return j&&j.__esModule?j:{default:j}}function p(j,w){if(!(j instanceof w))throw new TypeError("Cannot call a class as a function")}function g(j,w){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:j}function v(j,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);j.prototype=Object.create(w&&w.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(j,w):j.__proto__=w)}var y=(function(j){v(w,j),o(w,null,[{key:"value",value:function(){}}]);function w(N,_){p(this,w);var T=g(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,N));return T.selection=_,T.textNode=document.createTextNode(w.CONTENTS),T.domNode.appendChild(T.textNode),T._length=0,T}return o(w,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(_,T){if(this._length!==0)return l(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,_,T);for(var A=this,P=0;A!=null&&A.statics.scope!==u.default.Scope.BLOCK_BLOT;)P+=A.offset(A.parent),A=A.parent;A!=null&&(this._length=w.CONTENTS.length,A.optimize(),A.formatAt(P,w.CONTENTS.length,_,T),this._length=0)}},{key:"index",value:function(_,T){return _===this.textNode?0:l(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"index",this).call(this,_,T)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){l(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var _=this.textNode,T=this.selection.getNativeRange(),A=void 0,P=void 0,C=void 0;if(T!=null&&T.start.node===_&&T.end.node===_){var O=[_,T.start.offset,T.end.offset];A=O[0],P=O[1],C=O[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==w.CONTENTS){var M=this.textNode.data.split(w.CONTENTS).join("");this.next instanceof m.default?(A=this.next.domNode,this.next.insertAt(0,M),this.textNode.data=w.CONTENTS):(this.textNode.data=M,this.parent.insertBefore(u.default.create(this.textNode),this),this.textNode=document.createTextNode(w.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),P!=null){var k=[P,C].map(function(R){return Math.max(0,Math.min(A.data.length,R-1))}),E=i(k,2);return P=E[0],C=E[1],{startNode:A,startOffset:P,endNode:A,endOffset:C}}}}},{key:"update",value:function(_,T){var A=this;if(_.some(function(C){return C.type==="characterData"&&C.target===A.textNode})){var P=this.restore();P&&(T.range=P)}}},{key:"value",value:function(){return""}}]),w})(u.default.Embed);y.blotName="cursor",y.className="ql-cursor",y.tagName="span",y.CONTENTS="\uFEFF",r.default=y}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(0),l=u(i),o=a(4),c=u(o);function u(g){return g&&g.__esModule?g:{default:g}}function d(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}function m(g,v){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:g}function h(g,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);g.prototype=Object.create(v&&v.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(g,v):g.__proto__=v)}var p=(function(g){h(v,g);function v(){return d(this,v),m(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return v})(l.default.Container);p.allowedChildren=[c.default,o.BlockEmbed,p],r.default=p}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.ColorStyle=r.ColorClass=r.ColorAttributor=void 0;var i=(function(){function y(j,w){for(var N=0;N<w.length;N++){var _=w[N];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(j,_.key,_)}}return function(j,w,N){return w&&y(j.prototype,w),N&&y(j,N),j}})(),l=function y(j,w,N){j===null&&(j=Function.prototype);var _=Object.getOwnPropertyDescriptor(j,w);if(_===void 0){var T=Object.getPrototypeOf(j);return T===null?void 0:y(T,w,N)}else{if("value"in _)return _.value;var A=_.get;return A===void 0?void 0:A.call(N)}},o=a(0),c=u(o);function u(y){return y&&y.__esModule?y:{default:y}}function d(y,j){if(!(y instanceof j))throw new TypeError("Cannot call a class as a function")}function m(y,j){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:y}function h(y,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);y.prototype=Object.create(j&&j.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(y,j):y.__proto__=j)}var p=(function(y){h(j,y);function j(){return d(this,j),m(this,(j.__proto__||Object.getPrototypeOf(j)).apply(this,arguments))}return i(j,[{key:"value",value:function(N){var _=l(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"value",this).call(this,N);return _.startsWith("rgb(")?(_=_.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+_.split(",").map(function(T){return("00"+parseInt(T).toString(16)).slice(-2)}).join("")):_}}]),j})(c.default.Attributor.Style),g=new c.default.Attributor.Class("color","ql-color",{scope:c.default.Scope.INLINE}),v=new p("color","color",{scope:c.default.Scope.INLINE});r.ColorAttributor=p,r.ColorClass=g,r.ColorStyle=v}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitize=r.default=void 0;var i=(function(){function v(y,j){for(var w=0;w<j.length;w++){var N=j[w];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(y,N.key,N)}}return function(y,j,w){return j&&v(y.prototype,j),w&&v(y,w),y}})(),l=function v(y,j,w){y===null&&(y=Function.prototype);var N=Object.getOwnPropertyDescriptor(y,j);if(N===void 0){var _=Object.getPrototypeOf(y);return _===null?void 0:v(_,j,w)}else{if("value"in N)return N.value;var T=N.get;return T===void 0?void 0:T.call(w)}},o=a(6),c=u(o);function u(v){return v&&v.__esModule?v:{default:v}}function d(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function m(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function h(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var p=(function(v){h(y,v);function y(){return d(this,y),m(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return i(y,[{key:"format",value:function(w,N){if(w!==this.statics.blotName||!N)return l(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"format",this).call(this,w,N);N=this.constructor.sanitize(N),this.domNode.setAttribute("href",N)}}],[{key:"create",value:function(w){var N=l(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,w);return w=this.sanitize(w),N.setAttribute("href",w),N.setAttribute("rel","noopener noreferrer"),N.setAttribute("target","_blank"),N}},{key:"formats",value:function(w){return w.getAttribute("href")}},{key:"sanitize",value:function(w){return g(w,this.PROTOCOL_WHITELIST)?w:this.SANITIZED_URL}}]),y})(c.default);p.blotName="link",p.tagName="A",p.SANITIZED_URL="about:blank",p.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function g(v,y){var j=document.createElement("a");j.href=v;var w=j.href.slice(0,j.href.indexOf(":"));return y.indexOf(w)>-1}r.default=p,r.sanitize=g}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},l=(function(){function y(j,w){for(var N=0;N<w.length;N++){var _=w[N];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(j,_.key,_)}}return function(j,w,N){return w&&y(j.prototype,w),N&&y(j,N),j}})(),o=a(23),c=m(o),u=a(107),d=m(u);function m(y){return y&&y.__esModule?y:{default:y}}function h(y,j){if(!(y instanceof j))throw new TypeError("Cannot call a class as a function")}var p=0;function g(y,j){y.setAttribute(j,y.getAttribute(j)!=="true")}var v=(function(){function y(j){var w=this;h(this,y),this.select=j,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){w.togglePicker()}),this.label.addEventListener("keydown",function(N){switch(N.keyCode){case c.default.keys.ENTER:w.togglePicker();break;case c.default.keys.ESCAPE:w.escape(),N.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return l(y,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),g(this.label,"aria-expanded"),g(this.options,"aria-hidden")}},{key:"buildItem",value:function(w){var N=this,_=document.createElement("span");return _.tabIndex="0",_.setAttribute("role","button"),_.classList.add("ql-picker-item"),w.hasAttribute("value")&&_.setAttribute("data-value",w.getAttribute("value")),w.textContent&&_.setAttribute("data-label",w.textContent),_.addEventListener("click",function(){N.selectItem(_,!0)}),_.addEventListener("keydown",function(T){switch(T.keyCode){case c.default.keys.ENTER:N.selectItem(_,!0),T.preventDefault();break;case c.default.keys.ESCAPE:N.escape(),T.preventDefault();break}}),_}},{key:"buildLabel",value:function(){var w=document.createElement("span");return w.classList.add("ql-picker-label"),w.innerHTML=d.default,w.tabIndex="0",w.setAttribute("role","button"),w.setAttribute("aria-expanded","false"),this.container.appendChild(w),w}},{key:"buildOptions",value:function(){var w=this,N=document.createElement("span");N.classList.add("ql-picker-options"),N.setAttribute("aria-hidden","true"),N.tabIndex="-1",N.id="ql-picker-options-"+p,p+=1,this.label.setAttribute("aria-controls",N.id),this.options=N,[].slice.call(this.select.options).forEach(function(_){var T=w.buildItem(_);N.appendChild(T),_.selected===!0&&w.selectItem(T)}),this.container.appendChild(N)}},{key:"buildPicker",value:function(){var w=this;[].slice.call(this.select.attributes).forEach(function(N){w.container.setAttribute(N.name,N.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var w=this;this.close(),setTimeout(function(){return w.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(w){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,_=this.container.querySelector(".ql-selected");if(w!==_&&(_!=null&&_.classList.remove("ql-selected"),w!=null&&(w.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(w.parentNode.children,w),w.hasAttribute("data-value")?this.label.setAttribute("data-value",w.getAttribute("data-value")):this.label.removeAttribute("data-value"),w.hasAttribute("data-label")?this.label.setAttribute("data-label",w.getAttribute("data-label")):this.label.removeAttribute("data-label"),N))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":i(Event))==="object"){var T=document.createEvent("Event");T.initEvent("change",!0,!0),this.select.dispatchEvent(T)}this.close()}}},{key:"update",value:function(){var w=void 0;if(this.select.selectedIndex>-1){var N=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];w=this.select.options[this.select.selectedIndex],this.selectItem(N)}else this.selectItem(null);var _=w!=null&&w!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",_)}}]),y})();r.default=v}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(0),l=z(i),o=a(5),c=z(o),u=a(4),d=z(u),m=a(16),h=z(m),p=a(25),g=z(p),v=a(24),y=z(v),j=a(35),w=z(j),N=a(6),_=z(N),T=a(22),A=z(T),P=a(7),C=z(P),O=a(55),M=z(O),k=a(42),E=z(k),R=a(23),F=z(R);function z(V){return V&&V.__esModule?V:{default:V}}c.default.register({"blots/block":d.default,"blots/block/embed":u.BlockEmbed,"blots/break":h.default,"blots/container":g.default,"blots/cursor":y.default,"blots/embed":w.default,"blots/inline":_.default,"blots/scroll":A.default,"blots/text":C.default,"modules/clipboard":M.default,"modules/history":E.default,"modules/keyboard":F.default}),l.default.register(d.default,h.default,y.default,_.default,A.default,C.default),r.default=c.default}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(1),l=(function(){function o(c){this.domNode=c,this.domNode[i.DATA_KEY]={blot:this}}return Object.defineProperty(o.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),o.create=function(c){if(this.tagName==null)throw new i.ParchmentError("Blot definition missing tagName");var u;return Array.isArray(this.tagName)?(typeof c=="string"&&(c=c.toUpperCase(),parseInt(c).toString()===c&&(c=parseInt(c))),typeof c=="number"?u=document.createElement(this.tagName[c-1]):this.tagName.indexOf(c)>-1?u=document.createElement(c):u=document.createElement(this.tagName[0])):u=document.createElement(this.tagName),this.className&&u.classList.add(this.className),u},o.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},o.prototype.clone=function(){var c=this.domNode.cloneNode(!1);return i.create(c)},o.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[i.DATA_KEY]},o.prototype.deleteAt=function(c,u){var d=this.isolate(c,u);d.remove()},o.prototype.formatAt=function(c,u,d,m){var h=this.isolate(c,u);if(i.query(d,i.Scope.BLOT)!=null&&m)h.wrap(d,m);else if(i.query(d,i.Scope.ATTRIBUTE)!=null){var p=i.create(this.statics.scope);h.wrap(p),p.format(d,m)}},o.prototype.insertAt=function(c,u,d){var m=d==null?i.create("text",u):i.create(u,d),h=this.split(c);this.parent.insertBefore(m,h)},o.prototype.insertInto=function(c,u){u===void 0&&(u=null),this.parent!=null&&this.parent.children.remove(this);var d=null;c.children.insertBefore(this,u),u!=null&&(d=u.domNode),(this.domNode.parentNode!=c.domNode||this.domNode.nextSibling!=d)&&c.domNode.insertBefore(this.domNode,d),this.parent=c,this.attach()},o.prototype.isolate=function(c,u){var d=this.split(c);return d.split(u),d},o.prototype.length=function(){return 1},o.prototype.offset=function(c){return c===void 0&&(c=this.parent),this.parent==null||this==c?0:this.parent.children.offset(this)+this.parent.offset(c)},o.prototype.optimize=function(c){this.domNode[i.DATA_KEY]!=null&&delete this.domNode[i.DATA_KEY].mutations},o.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},o.prototype.replace=function(c){c.parent!=null&&(c.parent.insertBefore(this,c.next),c.remove())},o.prototype.replaceWith=function(c,u){var d=typeof c=="string"?i.create(c,u):c;return d.replace(this),d},o.prototype.split=function(c,u){return c===0?this:this.next},o.prototype.update=function(c,u){},o.prototype.wrap=function(c,u){var d=typeof c=="string"?i.create(c,u):c;return this.parent!=null&&this.parent.insertBefore(d,this.next),d.appendChild(this),d},o.blotName="abstract",o})();r.default=l}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(12),l=a(32),o=a(33),c=a(1),u=(function(){function d(m){this.attributes={},this.domNode=m,this.build()}return d.prototype.attribute=function(m,h){h?m.add(this.domNode,h)&&(m.value(this.domNode)!=null?this.attributes[m.attrName]=m:delete this.attributes[m.attrName]):(m.remove(this.domNode),delete this.attributes[m.attrName])},d.prototype.build=function(){var m=this;this.attributes={};var h=i.default.keys(this.domNode),p=l.default.keys(this.domNode),g=o.default.keys(this.domNode);h.concat(p).concat(g).forEach(function(v){var y=c.query(v,c.Scope.ATTRIBUTE);y instanceof i.default&&(m.attributes[y.attrName]=y)})},d.prototype.copy=function(m){var h=this;Object.keys(this.attributes).forEach(function(p){var g=h.attributes[p].value(h.domNode);m.format(p,g)})},d.prototype.move=function(m){var h=this;this.copy(m),Object.keys(this.attributes).forEach(function(p){h.attributes[p].remove(h.domNode)}),this.attributes={}},d.prototype.values=function(){var m=this;return Object.keys(this.attributes).reduce(function(h,p){return h[p]=m.attributes[p].value(m.domNode),h},{})},d})();r.default=u}),(function(n,r,a){var i=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,m){d.__proto__=m}||function(d,m){for(var h in m)m.hasOwnProperty(h)&&(d[h]=m[h])};return function(d,m){u(d,m);function h(){this.constructor=d}d.prototype=m===null?Object.create(m):(h.prototype=m.prototype,new h)}})();Object.defineProperty(r,"__esModule",{value:!0});var l=a(12);function o(u,d){var m=u.getAttribute("class")||"";return m.split(/\s+/).filter(function(h){return h.indexOf(d+"-")===0})}var c=(function(u){i(d,u);function d(){return u!==null&&u.apply(this,arguments)||this}return d.keys=function(m){return(m.getAttribute("class")||"").split(/\s+/).map(function(h){return h.split("-").slice(0,-1).join("-")})},d.prototype.add=function(m,h){return this.canAdd(m,h)?(this.remove(m),m.classList.add(this.keyName+"-"+h),!0):!1},d.prototype.remove=function(m){var h=o(m,this.keyName);h.forEach(function(p){m.classList.remove(p)}),m.classList.length===0&&m.removeAttribute("class")},d.prototype.value=function(m){var h=o(m,this.keyName)[0]||"",p=h.slice(this.keyName.length+1);return this.canAdd(m,p)?p:""},d})(l.default);r.default=c}),(function(n,r,a){var i=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,m){d.__proto__=m}||function(d,m){for(var h in m)m.hasOwnProperty(h)&&(d[h]=m[h])};return function(d,m){u(d,m);function h(){this.constructor=d}d.prototype=m===null?Object.create(m):(h.prototype=m.prototype,new h)}})();Object.defineProperty(r,"__esModule",{value:!0});var l=a(12);function o(u){var d=u.split("-"),m=d.slice(1).map(function(h){return h[0].toUpperCase()+h.slice(1)}).join("");return d[0]+m}var c=(function(u){i(d,u);function d(){return u!==null&&u.apply(this,arguments)||this}return d.keys=function(m){return(m.getAttribute("style")||"").split(";").map(function(h){var p=h.split(":");return p[0].trim()})},d.prototype.add=function(m,h){return this.canAdd(m,h)?(m.style[o(this.keyName)]=h,!0):!1},d.prototype.remove=function(m){m.style[o(this.keyName)]="",m.getAttribute("style")||m.removeAttribute("style")},d.prototype.value=function(m){var h=m.style[o(this.keyName)];return this.canAdd(m,h)?h:""},d})(l.default);r.default=c}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=(function(){function c(u,d){for(var m=0;m<d.length;m++){var h=d[m];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(u,h.key,h)}}return function(u,d,m){return d&&c(u.prototype,d),m&&c(u,m),u}})();function l(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}var o=(function(){function c(u,d){l(this,c),this.quill=u,this.options=d,this.modules={}}return i(c,[{key:"init",value:function(){var d=this;Object.keys(this.options.modules).forEach(function(m){d.modules[m]==null&&d.addModule(m)})}},{key:"addModule",value:function(d){var m=this.quill.constructor.import("modules/"+d);return this.modules[d]=new m(this.quill,this.options.modules[d]||{}),this.modules[d]}}]),c})();o.DEFAULTS={modules:{}},o.themes={default:o},r.default=o}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=(function(){function j(w,N){for(var _=0;_<N.length;_++){var T=N[_];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(w,T.key,T)}}return function(w,N,_){return N&&j(w.prototype,N),_&&j(w,_),w}})(),l=function j(w,N,_){w===null&&(w=Function.prototype);var T=Object.getOwnPropertyDescriptor(w,N);if(T===void 0){var A=Object.getPrototypeOf(w);return A===null?void 0:j(A,N,_)}else{if("value"in T)return T.value;var P=T.get;return P===void 0?void 0:P.call(_)}},o=a(0),c=m(o),u=a(7),d=m(u);function m(j){return j&&j.__esModule?j:{default:j}}function h(j,w){if(!(j instanceof w))throw new TypeError("Cannot call a class as a function")}function p(j,w){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:j}function g(j,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);j.prototype=Object.create(w&&w.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(j,w):j.__proto__=w)}var v="\uFEFF",y=(function(j){g(w,j);function w(N){h(this,w);var _=p(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,N));return _.contentNode=document.createElement("span"),_.contentNode.setAttribute("contenteditable",!1),[].slice.call(_.domNode.childNodes).forEach(function(T){_.contentNode.appendChild(T)}),_.leftGuard=document.createTextNode(v),_.rightGuard=document.createTextNode(v),_.domNode.appendChild(_.leftGuard),_.domNode.appendChild(_.contentNode),_.domNode.appendChild(_.rightGuard),_}return i(w,[{key:"index",value:function(_,T){return _===this.leftGuard?0:_===this.rightGuard?1:l(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"index",this).call(this,_,T)}},{key:"restore",value:function(_){var T=void 0,A=void 0,P=_.data.split(v).join("");if(_===this.leftGuard)if(this.prev instanceof d.default){var C=this.prev.length();this.prev.insertAt(C,P),T={startNode:this.prev.domNode,startOffset:C+P.length}}else A=document.createTextNode(P),this.parent.insertBefore(c.default.create(A),this),T={startNode:A,startOffset:P.length};else _===this.rightGuard&&(this.next instanceof d.default?(this.next.insertAt(0,P),T={startNode:this.next.domNode,startOffset:P.length}):(A=document.createTextNode(P),this.parent.insertBefore(c.default.create(A),this.next),T={startNode:A,startOffset:P.length}));return _.data=v,T}},{key:"update",value:function(_,T){var A=this;_.forEach(function(P){if(P.type==="characterData"&&(P.target===A.leftGuard||P.target===A.rightGuard)){var C=A.restore(P.target);C&&(T.range=C)}})}}]),w})(c.default.Embed);r.default=y}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.AlignStyle=r.AlignClass=r.AlignAttribute=void 0;var i=a(0),l=o(i);function o(h){return h&&h.__esModule?h:{default:h}}var c={scope:l.default.Scope.BLOCK,whitelist:["right","center","justify"]},u=new l.default.Attributor.Attribute("align","align",c),d=new l.default.Attributor.Class("align","ql-align",c),m=new l.default.Attributor.Style("align","text-align",c);r.AlignAttribute=u,r.AlignClass=d,r.AlignStyle=m}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.BackgroundStyle=r.BackgroundClass=void 0;var i=a(0),l=c(i),o=a(26);function c(m){return m&&m.__esModule?m:{default:m}}var u=new l.default.Attributor.Class("background","ql-bg",{scope:l.default.Scope.INLINE}),d=new o.ColorAttributor("background","background-color",{scope:l.default.Scope.INLINE});r.BackgroundClass=u,r.BackgroundStyle=d}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.DirectionStyle=r.DirectionClass=r.DirectionAttribute=void 0;var i=a(0),l=o(i);function o(h){return h&&h.__esModule?h:{default:h}}var c={scope:l.default.Scope.BLOCK,whitelist:["rtl"]},u=new l.default.Attributor.Attribute("direction","dir",c),d=new l.default.Attributor.Class("direction","ql-direction",c),m=new l.default.Attributor.Style("direction","direction",c);r.DirectionAttribute=u,r.DirectionClass=d,r.DirectionStyle=m}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.FontClass=r.FontStyle=void 0;var i=(function(){function j(w,N){for(var _=0;_<N.length;_++){var T=N[_];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(w,T.key,T)}}return function(w,N,_){return N&&j(w.prototype,N),_&&j(w,_),w}})(),l=function j(w,N,_){w===null&&(w=Function.prototype);var T=Object.getOwnPropertyDescriptor(w,N);if(T===void 0){var A=Object.getPrototypeOf(w);return A===null?void 0:j(A,N,_)}else{if("value"in T)return T.value;var P=T.get;return P===void 0?void 0:P.call(_)}},o=a(0),c=u(o);function u(j){return j&&j.__esModule?j:{default:j}}function d(j,w){if(!(j instanceof w))throw new TypeError("Cannot call a class as a function")}function m(j,w){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:j}function h(j,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);j.prototype=Object.create(w&&w.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(j,w):j.__proto__=w)}var p={scope:c.default.Scope.INLINE,whitelist:["serif","monospace"]},g=new c.default.Attributor.Class("font","ql-font",p),v=(function(j){h(w,j);function w(){return d(this,w),m(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return i(w,[{key:"value",value:function(_){return l(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"value",this).call(this,_).replace(/["']/g,"")}}]),w})(c.default.Attributor.Style),y=new v("font","font-family",p);r.FontStyle=y,r.FontClass=g}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.SizeStyle=r.SizeClass=void 0;var i=a(0),l=o(i);function o(d){return d&&d.__esModule?d:{default:d}}var c=new l.default.Attributor.Class("size","ql-size",{scope:l.default.Scope.INLINE,whitelist:["small","large","huge"]}),u=new l.default.Attributor.Style("size","font-size",{scope:l.default.Scope.INLINE,whitelist:["10px","18px","32px"]});r.SizeClass=c,r.SizeStyle=u}),(function(n,r,a){n.exports={align:{"":a(76),center:a(77),right:a(78),justify:a(79)},background:a(80),blockquote:a(81),bold:a(82),clean:a(83),code:a(58),"code-block":a(58),color:a(84),direction:{"":a(85),rtl:a(86)},float:{center:a(87),full:a(88),left:a(89),right:a(90)},formula:a(91),header:{1:a(92),2:a(93)},italic:a(94),image:a(95),indent:{"+1":a(96),"-1":a(97)},link:a(98),list:{ordered:a(99),bullet:a(100),check:a(101)},script:{sub:a(102),super:a(103)},strike:a(104),underline:a(105),video:a(106)}}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.getLastChangeIndex=r.default=void 0;var i=(function(){function N(_,T){for(var A=0;A<T.length;A++){var P=T[A];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(_,P.key,P)}}return function(_,T,A){return T&&N(_.prototype,T),A&&N(_,A),_}})(),l=a(0),o=h(l),c=a(5),u=h(c),d=a(9),m=h(d);function h(N){return N&&N.__esModule?N:{default:N}}function p(N,_){if(!(N instanceof _))throw new TypeError("Cannot call a class as a function")}function g(N,_){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:N}function v(N,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);N.prototype=Object.create(_&&_.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(N,_):N.__proto__=_)}var y=(function(N){v(_,N);function _(T,A){p(this,_);var P=g(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,T,A));return P.lastRecorded=0,P.ignoreChange=!1,P.clear(),P.quill.on(u.default.events.EDITOR_CHANGE,function(C,O,M,k){C!==u.default.events.TEXT_CHANGE||P.ignoreChange||(!P.options.userOnly||k===u.default.sources.USER?P.record(O,M):P.transform(O))}),P.quill.keyboard.addBinding({key:"Z",shortKey:!0},P.undo.bind(P)),P.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},P.redo.bind(P)),/Win/i.test(navigator.platform)&&P.quill.keyboard.addBinding({key:"Y",shortKey:!0},P.redo.bind(P)),P}return i(_,[{key:"change",value:function(A,P){if(this.stack[A].length!==0){var C=this.stack[A].pop();this.stack[P].push(C),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(C[A],u.default.sources.USER),this.ignoreChange=!1;var O=w(C[A]);this.quill.setSelection(O)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(A,P){if(A.ops.length!==0){this.stack.redo=[];var C=this.quill.getContents().diff(P),O=Date.now();if(this.lastRecorded+this.options.delay>O&&this.stack.undo.length>0){var M=this.stack.undo.pop();C=C.compose(M.undo),A=M.redo.compose(A)}else this.lastRecorded=O;this.stack.undo.push({redo:A,undo:C}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(A){this.stack.undo.forEach(function(P){P.undo=A.transform(P.undo,!0),P.redo=A.transform(P.redo,!0)}),this.stack.redo.forEach(function(P){P.undo=A.transform(P.undo,!0),P.redo=A.transform(P.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),_})(m.default);y.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function j(N){var _=N.ops[N.ops.length-1];return _==null?!1:_.insert!=null?typeof _.insert=="string"&&_.insert.endsWith(`
`):_.attributes!=null?Object.keys(_.attributes).some(function(T){return o.default.query(T,o.default.Scope.BLOCK)!=null}):!1}function w(N){var _=N.reduce(function(A,P){return A+=P.delete||0,A},0),T=N.length()-_;return j(N)&&(T-=1),T}r.default=y,r.getLastChangeIndex=w}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BaseTooltip=void 0;var i=(function(){function W(q,Z){for(var Q=0;Q<Z.length;Q++){var Y=Z[Q];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(q,Y.key,Y)}}return function(q,Z,Q){return Z&&W(q.prototype,Z),Q&&W(q,Q),q}})(),l=function W(q,Z,Q){q===null&&(q=Function.prototype);var Y=Object.getOwnPropertyDescriptor(q,Z);if(Y===void 0){var K=Object.getPrototypeOf(q);return K===null?void 0:W(K,Z,Q)}else{if("value"in Y)return Y.value;var ae=Y.get;return ae===void 0?void 0:ae.call(Q)}},o=a(3),c=O(o),u=a(2),d=O(u),m=a(8),h=O(m),p=a(23),g=O(p),v=a(34),y=O(v),j=a(59),w=O(j),N=a(60),_=O(N),T=a(28),A=O(T),P=a(61),C=O(P);function O(W){return W&&W.__esModule?W:{default:W}}function M(W,q){if(!(W instanceof q))throw new TypeError("Cannot call a class as a function")}function k(W,q){if(!W)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return q&&(typeof q=="object"||typeof q=="function")?q:W}function E(W,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof q);W.prototype=Object.create(q&&q.prototype,{constructor:{value:W,enumerable:!1,writable:!0,configurable:!0}}),q&&(Object.setPrototypeOf?Object.setPrototypeOf(W,q):W.__proto__=q)}var R=[!1,"center","right","justify"],F=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],z=[!1,"serif","monospace"],V=["1","2","3",!1],U=["small",!1,"large","huge"],B=(function(W){E(q,W);function q(Z,Q){M(this,q);var Y=k(this,(q.__proto__||Object.getPrototypeOf(q)).call(this,Z,Q)),K=function ae(se){if(!document.body.contains(Z.root))return document.body.removeEventListener("click",ae);Y.tooltip!=null&&!Y.tooltip.root.contains(se.target)&&document.activeElement!==Y.tooltip.textbox&&!Y.quill.hasFocus()&&Y.tooltip.hide(),Y.pickers!=null&&Y.pickers.forEach(function(de){de.container.contains(se.target)||de.close()})};return Z.emitter.listenDOM("click",document.body,K),Y}return i(q,[{key:"addModule",value:function(Q){var Y=l(q.prototype.__proto__||Object.getPrototypeOf(q.prototype),"addModule",this).call(this,Q);return Q==="toolbar"&&this.extendToolbar(Y),Y}},{key:"buildButtons",value:function(Q,Y){Q.forEach(function(K){var ae=K.getAttribute("class")||"";ae.split(/\s+/).forEach(function(se){if(se.startsWith("ql-")&&(se=se.slice(3),Y[se]!=null))if(se==="direction")K.innerHTML=Y[se][""]+Y[se].rtl;else if(typeof Y[se]=="string")K.innerHTML=Y[se];else{var de=K.value||"";de!=null&&Y[se][de]&&(K.innerHTML=Y[se][de])}})})}},{key:"buildPickers",value:function(Q,Y){var K=this;this.pickers=Q.map(function(se){if(se.classList.contains("ql-align"))return se.querySelector("option")==null&&I(se,R),new _.default(se,Y.align);if(se.classList.contains("ql-background")||se.classList.contains("ql-color")){var de=se.classList.contains("ql-background")?"background":"color";return se.querySelector("option")==null&&I(se,F,de==="background"?"#ffffff":"#000000"),new w.default(se,Y[de])}else return se.querySelector("option")==null&&(se.classList.contains("ql-font")?I(se,z):se.classList.contains("ql-header")?I(se,V):se.classList.contains("ql-size")&&I(se,U)),new A.default(se)});var ae=function(){K.pickers.forEach(function(de){de.update()})};this.quill.on(h.default.events.EDITOR_CHANGE,ae)}}]),q})(y.default);B.DEFAULTS=(0,c.default)(!0,{},y.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var q=this,Z=this.container.querySelector("input.ql-image[type=file]");Z==null&&(Z=document.createElement("input"),Z.setAttribute("type","file"),Z.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),Z.classList.add("ql-image"),Z.addEventListener("change",function(){if(Z.files!=null&&Z.files[0]!=null){var Q=new FileReader;Q.onload=function(Y){var K=q.quill.getSelection(!0);q.quill.updateContents(new d.default().retain(K.index).delete(K.length).insert({image:Y.target.result}),h.default.sources.USER),q.quill.setSelection(K.index+1,h.default.sources.SILENT),Z.value=""},Q.readAsDataURL(Z.files[0])}}),this.container.appendChild(Z)),Z.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var $=(function(W){E(q,W);function q(Z,Q){M(this,q);var Y=k(this,(q.__proto__||Object.getPrototypeOf(q)).call(this,Z,Q));return Y.textbox=Y.root.querySelector('input[type="text"]'),Y.listen(),Y}return i(q,[{key:"listen",value:function(){var Q=this;this.textbox.addEventListener("keydown",function(Y){g.default.match(Y,"enter")?(Q.save(),Y.preventDefault()):g.default.match(Y,"escape")&&(Q.cancel(),Y.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),Y!=null?this.textbox.value=Y:Q!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+Q)||""),this.root.setAttribute("data-mode",Q)}},{key:"restoreFocus",value:function(){var Q=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=Q}},{key:"save",value:function(){var Q=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var Y=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",Q,h.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",Q,h.default.sources.USER)),this.quill.root.scrollTop=Y;break}case"video":Q=L(Q);case"formula":{if(!Q)break;var K=this.quill.getSelection(!0);if(K!=null){var ae=K.index+K.length;this.quill.insertEmbed(ae,this.root.getAttribute("data-mode"),Q,h.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(ae+1," ",h.default.sources.USER),this.quill.setSelection(ae+2,h.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),q})(C.default);function L(W){var q=W.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||W.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return q?(q[1]||"https")+"://www.youtube.com/embed/"+q[2]+"?showinfo=0":(q=W.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(q[1]||"https")+"://player.vimeo.com/video/"+q[2]+"/":W}function I(W,q){var Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;q.forEach(function(Q){var Y=document.createElement("option");Q===Z?Y.setAttribute("selected","selected"):Y.setAttribute("value",Q),W.appendChild(Y)})}r.BaseTooltip=$,r.default=B}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=(function(){function l(){this.head=this.tail=null,this.length=0}return l.prototype.append=function(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];this.insertBefore(o[0],null),o.length>1&&this.append.apply(this,o.slice(1))},l.prototype.contains=function(o){for(var c,u=this.iterator();c=u();)if(c===o)return!0;return!1},l.prototype.insertBefore=function(o,c){o&&(o.next=c,c!=null?(o.prev=c.prev,c.prev!=null&&(c.prev.next=o),c.prev=o,c===this.head&&(this.head=o)):this.tail!=null?(this.tail.next=o,o.prev=this.tail,this.tail=o):(o.prev=null,this.head=this.tail=o),this.length+=1)},l.prototype.offset=function(o){for(var c=0,u=this.head;u!=null;){if(u===o)return c;c+=u.length(),u=u.next}return-1},l.prototype.remove=function(o){this.contains(o)&&(o.prev!=null&&(o.prev.next=o.next),o.next!=null&&(o.next.prev=o.prev),o===this.head&&(this.head=o.next),o===this.tail&&(this.tail=o.prev),this.length-=1)},l.prototype.iterator=function(o){return o===void 0&&(o=this.head),function(){var c=o;return o!=null&&(o=o.next),c}},l.prototype.find=function(o,c){c===void 0&&(c=!1);for(var u,d=this.iterator();u=d();){var m=u.length();if(o<m||c&&o===m&&(u.next==null||u.next.length()!==0))return[u,o];o-=m}return[null,0]},l.prototype.forEach=function(o){for(var c,u=this.iterator();c=u();)o(c)},l.prototype.forEachAt=function(o,c,u){if(!(c<=0))for(var d=this.find(o),m=d[0],h=d[1],p,g=o-h,v=this.iterator(m);(p=v())&&g<o+c;){var y=p.length();o>g?u(p,o-g,Math.min(c,g+y-o)):u(p,0,Math.min(y,o+c-g)),g+=y}},l.prototype.map=function(o){return this.reduce(function(c,u){return c.push(o(u)),c},[])},l.prototype.reduce=function(o,c){for(var u,d=this.iterator();u=d();)c=o(c,u);return c},l})();r.default=i}),(function(n,r,a){var i=this&&this.__extends||(function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var g in p)p.hasOwnProperty(g)&&(h[g]=p[g])};return function(h,p){m(h,p);function g(){this.constructor=h}h.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}})();Object.defineProperty(r,"__esModule",{value:!0});var l=a(17),o=a(1),c={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},u=100,d=(function(m){i(h,m);function h(p){var g=m.call(this,p)||this;return g.scroll=g,g.observer=new MutationObserver(function(v){g.update(v)}),g.observer.observe(g.domNode,c),g.attach(),g}return h.prototype.detach=function(){m.prototype.detach.call(this),this.observer.disconnect()},h.prototype.deleteAt=function(p,g){this.update(),p===0&&g===this.length()?this.children.forEach(function(v){v.remove()}):m.prototype.deleteAt.call(this,p,g)},h.prototype.formatAt=function(p,g,v,y){this.update(),m.prototype.formatAt.call(this,p,g,v,y)},h.prototype.insertAt=function(p,g,v){this.update(),m.prototype.insertAt.call(this,p,g,v)},h.prototype.optimize=function(p,g){var v=this;p===void 0&&(p=[]),g===void 0&&(g={}),m.prototype.optimize.call(this,g);for(var y=[].slice.call(this.observer.takeRecords());y.length>0;)p.push(y.pop());for(var j=function(T,A){A===void 0&&(A=!0),!(T==null||T===v)&&T.domNode.parentNode!=null&&(T.domNode[o.DATA_KEY].mutations==null&&(T.domNode[o.DATA_KEY].mutations=[]),A&&j(T.parent))},w=function(T){T.domNode[o.DATA_KEY]==null||T.domNode[o.DATA_KEY].mutations==null||(T instanceof l.default&&T.children.forEach(w),T.optimize(g))},N=p,_=0;N.length>0;_+=1){if(_>=u)throw new Error("[Parchment] Maximum optimize iterations reached");for(N.forEach(function(T){var A=o.find(T.target,!0);A!=null&&(A.domNode===T.target&&(T.type==="childList"?(j(o.find(T.previousSibling,!1)),[].forEach.call(T.addedNodes,function(P){var C=o.find(P,!1);j(C,!1),C instanceof l.default&&C.children.forEach(function(O){j(O,!1)})})):T.type==="attributes"&&j(A.prev)),j(A))}),this.children.forEach(w),N=[].slice.call(this.observer.takeRecords()),y=N.slice();y.length>0;)p.push(y.pop())}},h.prototype.update=function(p,g){var v=this;g===void 0&&(g={}),p=p||this.observer.takeRecords(),p.map(function(y){var j=o.find(y.target,!0);return j==null?null:j.domNode[o.DATA_KEY].mutations==null?(j.domNode[o.DATA_KEY].mutations=[y],j):(j.domNode[o.DATA_KEY].mutations.push(y),null)}).forEach(function(y){y==null||y===v||y.domNode[o.DATA_KEY]==null||y.update(y.domNode[o.DATA_KEY].mutations||[],g)}),this.domNode[o.DATA_KEY].mutations!=null&&m.prototype.update.call(this,this.domNode[o.DATA_KEY].mutations,g),this.optimize(p,g)},h.blotName="scroll",h.defaultChild="block",h.scope=o.Scope.BLOCK_BLOT,h.tagName="DIV",h})(l.default);r.default=d}),(function(n,r,a){var i=this&&this.__extends||(function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,h){m.__proto__=h}||function(m,h){for(var p in h)h.hasOwnProperty(p)&&(m[p]=h[p])};return function(m,h){d(m,h);function p(){this.constructor=m}m.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}})();Object.defineProperty(r,"__esModule",{value:!0});var l=a(18),o=a(1);function c(d,m){if(Object.keys(d).length!==Object.keys(m).length)return!1;for(var h in d)if(d[h]!==m[h])return!1;return!0}var u=(function(d){i(m,d);function m(){return d!==null&&d.apply(this,arguments)||this}return m.formats=function(h){if(h.tagName!==m.tagName)return d.formats.call(this,h)},m.prototype.format=function(h,p){var g=this;h===this.statics.blotName&&!p?(this.children.forEach(function(v){v instanceof l.default||(v=v.wrap(m.blotName,!0)),g.attributes.copy(v)}),this.unwrap()):d.prototype.format.call(this,h,p)},m.prototype.formatAt=function(h,p,g,v){if(this.formats()[g]!=null||o.query(g,o.Scope.ATTRIBUTE)){var y=this.isolate(h,p);y.format(g,v)}else d.prototype.formatAt.call(this,h,p,g,v)},m.prototype.optimize=function(h){d.prototype.optimize.call(this,h);var p=this.formats();if(Object.keys(p).length===0)return this.unwrap();var g=this.next;g instanceof m&&g.prev===this&&c(p,g.formats())&&(g.moveChildren(this),g.remove())},m.blotName="inline",m.scope=o.Scope.INLINE_BLOT,m.tagName="SPAN",m})(l.default);r.default=u}),(function(n,r,a){var i=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,m){d.__proto__=m}||function(d,m){for(var h in m)m.hasOwnProperty(h)&&(d[h]=m[h])};return function(d,m){u(d,m);function h(){this.constructor=d}d.prototype=m===null?Object.create(m):(h.prototype=m.prototype,new h)}})();Object.defineProperty(r,"__esModule",{value:!0});var l=a(18),o=a(1),c=(function(u){i(d,u);function d(){return u!==null&&u.apply(this,arguments)||this}return d.formats=function(m){var h=o.query(d.blotName).tagName;if(m.tagName!==h)return u.formats.call(this,m)},d.prototype.format=function(m,h){o.query(m,o.Scope.BLOCK)!=null&&(m===this.statics.blotName&&!h?this.replaceWith(d.blotName):u.prototype.format.call(this,m,h))},d.prototype.formatAt=function(m,h,p,g){o.query(p,o.Scope.BLOCK)!=null?this.format(p,g):u.prototype.formatAt.call(this,m,h,p,g)},d.prototype.insertAt=function(m,h,p){if(p==null||o.query(h,o.Scope.INLINE)!=null)u.prototype.insertAt.call(this,m,h,p);else{var g=this.split(m),v=o.create(h,p);g.parent.insertBefore(v,g)}},d.prototype.update=function(m,h){navigator.userAgent.match(/Trident/)?this.build():u.prototype.update.call(this,m,h)},d.blotName="block",d.scope=o.Scope.BLOCK_BLOT,d.tagName="P",d})(l.default);r.default=c}),(function(n,r,a){var i=this&&this.__extends||(function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var m in d)d.hasOwnProperty(m)&&(u[m]=d[m])};return function(u,d){c(u,d);function m(){this.constructor=u}u.prototype=d===null?Object.create(d):(m.prototype=d.prototype,new m)}})();Object.defineProperty(r,"__esModule",{value:!0});var l=a(19),o=(function(c){i(u,c);function u(){return c!==null&&c.apply(this,arguments)||this}return u.formats=function(d){},u.prototype.format=function(d,m){c.prototype.formatAt.call(this,0,this.length(),d,m)},u.prototype.formatAt=function(d,m,h,p){d===0&&m===this.length()?this.format(h,p):c.prototype.formatAt.call(this,d,m,h,p)},u.prototype.formats=function(){return this.statics.formats(this.domNode)},u})(l.default);r.default=o}),(function(n,r,a){var i=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,m){d.__proto__=m}||function(d,m){for(var h in m)m.hasOwnProperty(h)&&(d[h]=m[h])};return function(d,m){u(d,m);function h(){this.constructor=d}d.prototype=m===null?Object.create(m):(h.prototype=m.prototype,new h)}})();Object.defineProperty(r,"__esModule",{value:!0});var l=a(19),o=a(1),c=(function(u){i(d,u);function d(m){var h=u.call(this,m)||this;return h.text=h.statics.value(h.domNode),h}return d.create=function(m){return document.createTextNode(m)},d.value=function(m){var h=m.data;return h.normalize&&(h=h.normalize()),h},d.prototype.deleteAt=function(m,h){this.domNode.data=this.text=this.text.slice(0,m)+this.text.slice(m+h)},d.prototype.index=function(m,h){return this.domNode===m?h:-1},d.prototype.insertAt=function(m,h,p){p==null?(this.text=this.text.slice(0,m)+h+this.text.slice(m),this.domNode.data=this.text):u.prototype.insertAt.call(this,m,h,p)},d.prototype.length=function(){return this.text.length},d.prototype.optimize=function(m){u.prototype.optimize.call(this,m),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof d&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},d.prototype.position=function(m,h){return[this.domNode,m]},d.prototype.split=function(m,h){if(h===void 0&&(h=!1),!h){if(m===0)return this;if(m===this.length())return this.next}var p=o.create(this.domNode.splitText(m));return this.parent.insertBefore(p,this.next),this.text=this.statics.value(this.domNode),p},d.prototype.update=function(m,h){var p=this;m.some(function(g){return g.type==="characterData"&&g.target===p.domNode})&&(this.text=this.statics.value(this.domNode))},d.prototype.value=function(){return this.text},d.blotName="text",d.scope=o.Scope.INLINE_BLOT,d})(l.default);r.default=c}),(function(n,r,a){var i=document.createElement("div");if(i.classList.toggle("test-class",!1),i.classList.contains("test-class")){var l=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(o,c){return arguments.length>1&&!this.contains(o)==!c?c:l.call(this,o)}}String.prototype.startsWith||(String.prototype.startsWith=function(o,c){return c=c||0,this.substr(c,o.length)===o}),String.prototype.endsWith||(String.prototype.endsWith=function(o,c){var u=this.toString();(typeof c!="number"||!isFinite(c)||Math.floor(c)!==c||c>u.length)&&(c=u.length),c-=o.length;var d=u.indexOf(o,c);return d!==-1&&d===c}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(c){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof c!="function")throw new TypeError("predicate must be a function");for(var u=Object(this),d=u.length>>>0,m=arguments[1],h,p=0;p<d;p++)if(h=u[p],c.call(m,h,p,u))return h}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})}),(function(n,r){var a=-1,i=1,l=0;function o(_,T,A){if(_==T)return _?[[l,_]]:[];(A<0||_.length<A)&&(A=null);var P=m(_,T),C=_.substring(0,P);_=_.substring(P),T=T.substring(P),P=h(_,T);var O=_.substring(_.length-P);_=_.substring(0,_.length-P),T=T.substring(0,T.length-P);var M=c(_,T);return C&&M.unshift([l,C]),O&&M.push([l,O]),g(M),A!=null&&(M=j(M,A)),M=w(M),M}function c(_,T){var A;if(!_)return[[i,T]];if(!T)return[[a,_]];var P=_.length>T.length?_:T,C=_.length>T.length?T:_,O=P.indexOf(C);if(O!=-1)return A=[[i,P.substring(0,O)],[l,C],[i,P.substring(O+C.length)]],_.length>T.length&&(A[0][0]=A[2][0]=a),A;if(C.length==1)return[[a,_],[i,T]];var M=p(_,T);if(M){var k=M[0],E=M[1],R=M[2],F=M[3],z=M[4],V=o(k,R),U=o(E,F);return V.concat([[l,z]],U)}return u(_,T)}function u(_,T){for(var A=_.length,P=T.length,C=Math.ceil((A+P)/2),O=C,M=2*C,k=new Array(M),E=new Array(M),R=0;R<M;R++)k[R]=-1,E[R]=-1;k[O+1]=0,E[O+1]=0;for(var F=A-P,z=F%2!=0,V=0,U=0,B=0,$=0,L=0;L<C;L++){for(var I=-L+V;I<=L-U;I+=2){var W=O+I,q;I==-L||I!=L&&k[W-1]<k[W+1]?q=k[W+1]:q=k[W-1]+1;for(var Z=q-I;q<A&&Z<P&&_.charAt(q)==T.charAt(Z);)q++,Z++;if(k[W]=q,q>A)U+=2;else if(Z>P)V+=2;else if(z){var Q=O+F-I;if(Q>=0&&Q<M&&E[Q]!=-1){var Y=A-E[Q];if(q>=Y)return d(_,T,q,Z)}}}for(var K=-L+B;K<=L-$;K+=2){var Q=O+K,Y;K==-L||K!=L&&E[Q-1]<E[Q+1]?Y=E[Q+1]:Y=E[Q-1]+1;for(var ae=Y-K;Y<A&&ae<P&&_.charAt(A-Y-1)==T.charAt(P-ae-1);)Y++,ae++;if(E[Q]=Y,Y>A)$+=2;else if(ae>P)B+=2;else if(!z){var W=O+F-K;if(W>=0&&W<M&&k[W]!=-1){var q=k[W],Z=O+q-W;if(Y=A-Y,q>=Y)return d(_,T,q,Z)}}}}return[[a,_],[i,T]]}function d(_,T,A,P){var C=_.substring(0,A),O=T.substring(0,P),M=_.substring(A),k=T.substring(P),E=o(C,O),R=o(M,k);return E.concat(R)}function m(_,T){if(!_||!T||_.charAt(0)!=T.charAt(0))return 0;for(var A=0,P=Math.min(_.length,T.length),C=P,O=0;A<C;)_.substring(O,C)==T.substring(O,C)?(A=C,O=A):P=C,C=Math.floor((P-A)/2+A);return C}function h(_,T){if(!_||!T||_.charAt(_.length-1)!=T.charAt(T.length-1))return 0;for(var A=0,P=Math.min(_.length,T.length),C=P,O=0;A<C;)_.substring(_.length-C,_.length-O)==T.substring(T.length-C,T.length-O)?(A=C,O=A):P=C,C=Math.floor((P-A)/2+A);return C}function p(_,T){var A=_.length>T.length?_:T,P=_.length>T.length?T:_;if(A.length<4||P.length*2<A.length)return null;function C(U,B,$){for(var L=U.substring($,$+Math.floor(U.length/4)),I=-1,W="",q,Z,Q,Y;(I=B.indexOf(L,I+1))!=-1;){var K=m(U.substring($),B.substring(I)),ae=h(U.substring(0,$),B.substring(0,I));W.length<ae+K&&(W=B.substring(I-ae,I)+B.substring(I,I+K),q=U.substring(0,$-ae),Z=U.substring($+K),Q=B.substring(0,I-ae),Y=B.substring(I+K))}return W.length*2>=U.length?[q,Z,Q,Y,W]:null}var O=C(A,P,Math.ceil(A.length/4)),M=C(A,P,Math.ceil(A.length/2)),k;if(!O&&!M)return null;M?O?k=O[4].length>M[4].length?O:M:k=M:k=O;var E,R,F,z;_.length>T.length?(E=k[0],R=k[1],F=k[2],z=k[3]):(F=k[0],z=k[1],E=k[2],R=k[3]);var V=k[4];return[E,R,F,z,V]}function g(_){_.push([l,""]);for(var T=0,A=0,P=0,C="",O="",M;T<_.length;)switch(_[T][0]){case i:P++,O+=_[T][1],T++;break;case a:A++,C+=_[T][1],T++;break;case l:A+P>1?(A!==0&&P!==0&&(M=m(O,C),M!==0&&(T-A-P>0&&_[T-A-P-1][0]==l?_[T-A-P-1][1]+=O.substring(0,M):(_.splice(0,0,[l,O.substring(0,M)]),T++),O=O.substring(M),C=C.substring(M)),M=h(O,C),M!==0&&(_[T][1]=O.substring(O.length-M)+_[T][1],O=O.substring(0,O.length-M),C=C.substring(0,C.length-M))),A===0?_.splice(T-P,A+P,[i,O]):P===0?_.splice(T-A,A+P,[a,C]):_.splice(T-A-P,A+P,[a,C],[i,O]),T=T-A-P+(A?1:0)+(P?1:0)+1):T!==0&&_[T-1][0]==l?(_[T-1][1]+=_[T][1],_.splice(T,1)):T++,P=0,A=0,C="",O="";break}_[_.length-1][1]===""&&_.pop();var k=!1;for(T=1;T<_.length-1;)_[T-1][0]==l&&_[T+1][0]==l&&(_[T][1].substring(_[T][1].length-_[T-1][1].length)==_[T-1][1]?(_[T][1]=_[T-1][1]+_[T][1].substring(0,_[T][1].length-_[T-1][1].length),_[T+1][1]=_[T-1][1]+_[T+1][1],_.splice(T-1,1),k=!0):_[T][1].substring(0,_[T+1][1].length)==_[T+1][1]&&(_[T-1][1]+=_[T+1][1],_[T][1]=_[T][1].substring(_[T+1][1].length)+_[T+1][1],_.splice(T+1,1),k=!0)),T++;k&&g(_)}var v=o;v.INSERT=i,v.DELETE=a,v.EQUAL=l,n.exports=v;function y(_,T){if(T===0)return[l,_];for(var A=0,P=0;P<_.length;P++){var C=_[P];if(C[0]===a||C[0]===l){var O=A+C[1].length;if(T===O)return[P+1,_];if(T<O){_=_.slice();var M=T-A,k=[C[0],C[1].slice(0,M)],E=[C[0],C[1].slice(M)];return _.splice(P,1,k,E),[P+1,_]}else A=O}}throw new Error("cursor_pos is out of bounds!")}function j(_,T){var A=y(_,T),P=A[1],C=A[0],O=P[C],M=P[C+1];if(O==null)return _;if(O[0]!==l)return _;if(M!=null&&O[1]+M[1]===M[1]+O[1])return P.splice(C,2,M,O),N(P,C,2);if(M!=null&&M[1].indexOf(O[1])===0){P.splice(C,2,[M[0],O[1]],[0,O[1]]);var k=M[1].slice(O[1].length);return k.length>0&&P.splice(C+2,0,[M[0],k]),N(P,C,3)}else return _}function w(_){for(var T=!1,A=function(M){return M.charCodeAt(0)>=56320&&M.charCodeAt(0)<=57343},P=function(M){return M.charCodeAt(M.length-1)>=55296&&M.charCodeAt(M.length-1)<=56319},C=2;C<_.length;C+=1)_[C-2][0]===l&&P(_[C-2][1])&&_[C-1][0]===a&&A(_[C-1][1])&&_[C][0]===i&&A(_[C][1])&&(T=!0,_[C-1][1]=_[C-2][1].slice(-1)+_[C-1][1],_[C][1]=_[C-2][1].slice(-1)+_[C][1],_[C-2][1]=_[C-2][1].slice(0,-1));if(!T)return _;for(var O=[],C=0;C<_.length;C+=1)_[C][1].length>0&&O.push(_[C]);return O}function N(_,T,A){for(var P=T+A-1;P>=0&&P>=T-1;P--)if(P+1<_.length){var C=_[P],O=_[P+1];C[0]===O[1]&&_.splice(P,2,[C[0],C[1]+O[1]])}return _}}),(function(n,r){r=n.exports=typeof Object.keys=="function"?Object.keys:a,r.shim=a;function a(i){var l=[];for(var o in i)l.push(o);return l}}),(function(n,r){var a=(function(){return Object.prototype.toString.call(arguments)})()=="[object Arguments]";r=n.exports=a?i:l,r.supported=i;function i(o){return Object.prototype.toString.call(o)=="[object Arguments]"}r.unsupported=l;function l(o){return o&&typeof o=="object"&&typeof o.length=="number"&&Object.prototype.hasOwnProperty.call(o,"callee")&&!Object.prototype.propertyIsEnumerable.call(o,"callee")||!1}}),(function(n,r){var a=Object.prototype.hasOwnProperty,i="~";function l(){}Object.create&&(l.prototype=Object.create(null),new l().__proto__||(i=!1));function o(u,d,m){this.fn=u,this.context=d,this.once=m||!1}function c(){this._events=new l,this._eventsCount=0}c.prototype.eventNames=function(){var d=[],m,h;if(this._eventsCount===0)return d;for(h in m=this._events)a.call(m,h)&&d.push(i?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(m)):d},c.prototype.listeners=function(d,m){var h=i?i+d:d,p=this._events[h];if(m)return!!p;if(!p)return[];if(p.fn)return[p.fn];for(var g=0,v=p.length,y=new Array(v);g<v;g++)y[g]=p[g].fn;return y},c.prototype.emit=function(d,m,h,p,g,v){var y=i?i+d:d;if(!this._events[y])return!1;var j=this._events[y],w=arguments.length,N,_;if(j.fn){switch(j.once&&this.removeListener(d,j.fn,void 0,!0),w){case 1:return j.fn.call(j.context),!0;case 2:return j.fn.call(j.context,m),!0;case 3:return j.fn.call(j.context,m,h),!0;case 4:return j.fn.call(j.context,m,h,p),!0;case 5:return j.fn.call(j.context,m,h,p,g),!0;case 6:return j.fn.call(j.context,m,h,p,g,v),!0}for(_=1,N=new Array(w-1);_<w;_++)N[_-1]=arguments[_];j.fn.apply(j.context,N)}else{var T=j.length,A;for(_=0;_<T;_++)switch(j[_].once&&this.removeListener(d,j[_].fn,void 0,!0),w){case 1:j[_].fn.call(j[_].context);break;case 2:j[_].fn.call(j[_].context,m);break;case 3:j[_].fn.call(j[_].context,m,h);break;case 4:j[_].fn.call(j[_].context,m,h,p);break;default:if(!N)for(A=1,N=new Array(w-1);A<w;A++)N[A-1]=arguments[A];j[_].fn.apply(j[_].context,N)}}return!0},c.prototype.on=function(d,m,h){var p=new o(m,h||this),g=i?i+d:d;return this._events[g]?this._events[g].fn?this._events[g]=[this._events[g],p]:this._events[g].push(p):(this._events[g]=p,this._eventsCount++),this},c.prototype.once=function(d,m,h){var p=new o(m,h||this,!0),g=i?i+d:d;return this._events[g]?this._events[g].fn?this._events[g]=[this._events[g],p]:this._events[g].push(p):(this._events[g]=p,this._eventsCount++),this},c.prototype.removeListener=function(d,m,h,p){var g=i?i+d:d;if(!this._events[g])return this;if(!m)return--this._eventsCount===0?this._events=new l:delete this._events[g],this;var v=this._events[g];if(v.fn)v.fn===m&&(!p||v.once)&&(!h||v.context===h)&&(--this._eventsCount===0?this._events=new l:delete this._events[g]);else{for(var y=0,j=[],w=v.length;y<w;y++)(v[y].fn!==m||p&&!v[y].once||h&&v[y].context!==h)&&j.push(v[y]);j.length?this._events[g]=j.length===1?j[0]:j:--this._eventsCount===0?this._events=new l:delete this._events[g]}return this},c.prototype.removeAllListeners=function(d){var m;return d?(m=i?i+d:d,this._events[m]&&(--this._eventsCount===0?this._events=new l:delete this._events[m])):(this._events=new l,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prototype.setMaxListeners=function(){return this},c.prefixed=i,c.EventEmitter=c,typeof n<"u"&&(n.exports=c)}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.matchText=r.matchSpacing=r.matchNewline=r.matchBlot=r.matchAttributor=r.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ee){return typeof Ee}:function(Ee){return Ee&&typeof Symbol=="function"&&Ee.constructor===Symbol&&Ee!==Symbol.prototype?"symbol":typeof Ee},l=(function(){function Ee(Ce,Ge){var Ye=[],De=!0,it=!1,Se=void 0;try{for(var at=Ce[Symbol.iterator](),_e;!(De=(_e=at.next()).done)&&(Ye.push(_e.value),!(Ge&&Ye.length===Ge));De=!0);}catch($e){it=!0,Se=$e}finally{try{!De&&at.return&&at.return()}finally{if(it)throw Se}}return Ye}return function(Ce,Ge){if(Array.isArray(Ce))return Ce;if(Symbol.iterator in Object(Ce))return Ee(Ce,Ge);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function Ee(Ce,Ge){for(var Ye=0;Ye<Ge.length;Ye++){var De=Ge[Ye];De.enumerable=De.enumerable||!1,De.configurable=!0,"value"in De&&(De.writable=!0),Object.defineProperty(Ce,De.key,De)}}return function(Ce,Ge,Ye){return Ge&&Ee(Ce.prototype,Ge),Ye&&Ee(Ce,Ye),Ce}})(),c=a(3),u=E(c),d=a(2),m=E(d),h=a(0),p=E(h),g=a(5),v=E(g),y=a(10),j=E(y),w=a(9),N=E(w),_=a(36),T=a(37),A=a(13),P=E(A),C=a(26),O=a(38),M=a(39),k=a(40);function E(Ee){return Ee&&Ee.__esModule?Ee:{default:Ee}}function R(Ee,Ce,Ge){return Ce in Ee?Object.defineProperty(Ee,Ce,{value:Ge,enumerable:!0,configurable:!0,writable:!0}):Ee[Ce]=Ge,Ee}function F(Ee,Ce){if(!(Ee instanceof Ce))throw new TypeError("Cannot call a class as a function")}function z(Ee,Ce){if(!Ee)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ce&&(typeof Ce=="object"||typeof Ce=="function")?Ce:Ee}function V(Ee,Ce){if(typeof Ce!="function"&&Ce!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ce);Ee.prototype=Object.create(Ce&&Ce.prototype,{constructor:{value:Ee,enumerable:!1,writable:!0,configurable:!0}}),Ce&&(Object.setPrototypeOf?Object.setPrototypeOf(Ee,Ce):Ee.__proto__=Ce)}var U=(0,j.default)("quill:clipboard"),B="__ql-matcher",$=[[Node.TEXT_NODE,ze],[Node.TEXT_NODE,je],["br",ue],[Node.ELEMENT_NODE,je],[Node.ELEMENT_NODE,de],[Node.ELEMENT_NODE,we],[Node.ELEMENT_NODE,se],[Node.ELEMENT_NODE,qe],["li",pe],["b",ae.bind(ae,"bold")],["i",ae.bind(ae,"italic")],["style",oe]],L=[_.AlignAttribute,O.DirectionAttribute].reduce(function(Ee,Ce){return Ee[Ce.keyName]=Ce,Ee},{}),I=[_.AlignStyle,T.BackgroundStyle,C.ColorStyle,O.DirectionStyle,M.FontStyle,k.SizeStyle].reduce(function(Ee,Ce){return Ee[Ce.keyName]=Ce,Ee},{}),W=(function(Ee){V(Ce,Ee);function Ce(Ge,Ye){F(this,Ce);var De=z(this,(Ce.__proto__||Object.getPrototypeOf(Ce)).call(this,Ge,Ye));return De.quill.root.addEventListener("paste",De.onPaste.bind(De)),De.container=De.quill.addContainer("ql-clipboard"),De.container.setAttribute("contenteditable",!0),De.container.setAttribute("tabindex",-1),De.matchers=[],$.concat(De.options.matchers).forEach(function(it){var Se=l(it,2),at=Se[0],_e=Se[1];!Ye.matchVisual&&_e===we||De.addMatcher(at,_e)}),De}return o(Ce,[{key:"addMatcher",value:function(Ye,De){this.matchers.push([Ye,De])}},{key:"convert",value:function(Ye){if(typeof Ye=="string")return this.container.innerHTML=Ye.replace(/\>\r?\n +\</g,"><"),this.convert();var De=this.quill.getFormat(this.quill.selection.savedRange.index);if(De[P.default.blotName]){var it=this.container.innerText;return this.container.innerHTML="",new m.default().insert(it,R({},P.default.blotName,De[P.default.blotName]))}var Se=this.prepareMatching(),at=l(Se,2),_e=at[0],$e=at[1],nt=K(this.container,_e,$e);return Q(nt,`
`)&&nt.ops[nt.ops.length-1].attributes==null&&(nt=nt.compose(new m.default().retain(nt.length()-1).delete(1))),U.log("convert",this.container.innerHTML,nt),this.container.innerHTML="",nt}},{key:"dangerouslyPasteHTML",value:function(Ye,De){var it=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.default.sources.API;if(typeof Ye=="string")this.quill.setContents(this.convert(Ye),De),this.quill.setSelection(0,v.default.sources.SILENT);else{var Se=this.convert(De);this.quill.updateContents(new m.default().retain(Ye).concat(Se),it),this.quill.setSelection(Ye+Se.length(),v.default.sources.SILENT)}}},{key:"onPaste",value:function(Ye){var De=this;if(!(Ye.defaultPrevented||!this.quill.isEnabled())){var it=this.quill.getSelection(),Se=new m.default().retain(it.index),at=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(v.default.sources.SILENT),setTimeout(function(){Se=Se.concat(De.convert()).delete(it.length),De.quill.updateContents(Se,v.default.sources.USER),De.quill.setSelection(Se.length()-it.length,v.default.sources.SILENT),De.quill.scrollingContainer.scrollTop=at,De.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var Ye=this,De=[],it=[];return this.matchers.forEach(function(Se){var at=l(Se,2),_e=at[0],$e=at[1];switch(_e){case Node.TEXT_NODE:it.push($e);break;case Node.ELEMENT_NODE:De.push($e);break;default:[].forEach.call(Ye.container.querySelectorAll(_e),function(nt){nt[B]=nt[B]||[],nt[B].push($e)});break}}),[De,it]}}]),Ce})(N.default);W.DEFAULTS={matchers:[],matchVisual:!0};function q(Ee,Ce,Ge){return(typeof Ce>"u"?"undefined":i(Ce))==="object"?Object.keys(Ce).reduce(function(Ye,De){return q(Ye,De,Ce[De])},Ee):Ee.reduce(function(Ye,De){return De.attributes&&De.attributes[Ce]?Ye.push(De):Ye.insert(De.insert,(0,u.default)({},R({},Ce,Ge),De.attributes))},new m.default)}function Z(Ee){if(Ee.nodeType!==Node.ELEMENT_NODE)return{};var Ce="__ql-computed-style";return Ee[Ce]||(Ee[Ce]=window.getComputedStyle(Ee))}function Q(Ee,Ce){for(var Ge="",Ye=Ee.ops.length-1;Ye>=0&&Ge.length<Ce.length;--Ye){var De=Ee.ops[Ye];if(typeof De.insert!="string")break;Ge=De.insert+Ge}return Ge.slice(-1*Ce.length)===Ce}function Y(Ee){if(Ee.childNodes.length===0)return!1;var Ce=Z(Ee);return["block","list-item"].indexOf(Ce.display)>-1}function K(Ee,Ce,Ge){return Ee.nodeType===Ee.TEXT_NODE?Ge.reduce(function(Ye,De){return De(Ee,Ye)},new m.default):Ee.nodeType===Ee.ELEMENT_NODE?[].reduce.call(Ee.childNodes||[],function(Ye,De){var it=K(De,Ce,Ge);return De.nodeType===Ee.ELEMENT_NODE&&(it=Ce.reduce(function(Se,at){return at(De,Se)},it),it=(De[B]||[]).reduce(function(Se,at){return at(De,Se)},it)),Ye.concat(it)},new m.default):new m.default}function ae(Ee,Ce,Ge){return q(Ge,Ee,!0)}function se(Ee,Ce){var Ge=p.default.Attributor.Attribute.keys(Ee),Ye=p.default.Attributor.Class.keys(Ee),De=p.default.Attributor.Style.keys(Ee),it={};return Ge.concat(Ye).concat(De).forEach(function(Se){var at=p.default.query(Se,p.default.Scope.ATTRIBUTE);at!=null&&(it[at.attrName]=at.value(Ee),it[at.attrName])||(at=L[Se],at!=null&&(at.attrName===Se||at.keyName===Se)&&(it[at.attrName]=at.value(Ee)||void 0),at=I[Se],at!=null&&(at.attrName===Se||at.keyName===Se)&&(at=I[Se],it[at.attrName]=at.value(Ee)||void 0))}),Object.keys(it).length>0&&(Ce=q(Ce,it)),Ce}function de(Ee,Ce){var Ge=p.default.query(Ee);if(Ge==null)return Ce;if(Ge.prototype instanceof p.default.Embed){var Ye={},De=Ge.value(Ee);De!=null&&(Ye[Ge.blotName]=De,Ce=new m.default().insert(Ye,Ge.formats(Ee)))}else typeof Ge.formats=="function"&&(Ce=q(Ce,Ge.blotName,Ge.formats(Ee)));return Ce}function ue(Ee,Ce){return Q(Ce,`
`)||Ce.insert(`
`),Ce}function oe(){return new m.default}function pe(Ee,Ce){var Ge=p.default.query(Ee);if(Ge==null||Ge.blotName!=="list-item"||!Q(Ce,`
`))return Ce;for(var Ye=-1,De=Ee.parentNode;!De.classList.contains("ql-clipboard");)(p.default.query(De)||{}).blotName==="list"&&(Ye+=1),De=De.parentNode;return Ye<=0?Ce:Ce.compose(new m.default().retain(Ce.length()-1).retain(1,{indent:Ye}))}function je(Ee,Ce){return Q(Ce,`
`)||(Y(Ee)||Ce.length()>0&&Ee.nextSibling&&Y(Ee.nextSibling))&&Ce.insert(`
`),Ce}function we(Ee,Ce){if(Y(Ee)&&Ee.nextElementSibling!=null&&!Q(Ce,`

`)){var Ge=Ee.offsetHeight+parseFloat(Z(Ee).marginTop)+parseFloat(Z(Ee).marginBottom);Ee.nextElementSibling.offsetTop>Ee.offsetTop+Ge*1.5&&Ce.insert(`
`)}return Ce}function qe(Ee,Ce){var Ge={},Ye=Ee.style||{};return Ye.fontStyle&&Z(Ee).fontStyle==="italic"&&(Ge.italic=!0),Ye.fontWeight&&(Z(Ee).fontWeight.startsWith("bold")||parseInt(Z(Ee).fontWeight)>=700)&&(Ge.bold=!0),Object.keys(Ge).length>0&&(Ce=q(Ce,Ge)),parseFloat(Ye.textIndent||0)>0&&(Ce=new m.default().insert("	").concat(Ce)),Ce}function ze(Ee,Ce){var Ge=Ee.data;if(Ee.parentNode.tagName==="O:P")return Ce.insert(Ge.trim());if(Ge.trim().length===0&&Ee.parentNode.classList.contains("ql-clipboard"))return Ce;if(!Z(Ee.parentNode).whiteSpace.startsWith("pre")){var Ye=function(it,Se){return Se=Se.replace(/[^\u00a0]/g,""),Se.length<1&&it?" ":Se};Ge=Ge.replace(/\r\n/g," ").replace(/\n/g," "),Ge=Ge.replace(/\s\s+/g,Ye.bind(Ye,!0)),(Ee.previousSibling==null&&Y(Ee.parentNode)||Ee.previousSibling!=null&&Y(Ee.previousSibling))&&(Ge=Ge.replace(/^\s+/,Ye.bind(Ye,!1))),(Ee.nextSibling==null&&Y(Ee.parentNode)||Ee.nextSibling!=null&&Y(Ee.nextSibling))&&(Ge=Ge.replace(/\s+$/,Ye.bind(Ye,!1)))}return Ce.insert(Ge)}r.default=W,r.matchAttributor=se,r.matchBlot=de,r.matchNewline=je,r.matchSpacing=we,r.matchText=ze}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=(function(){function g(v,y){for(var j=0;j<y.length;j++){var w=y[j];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,y,j){return y&&g(v.prototype,y),j&&g(v,j),v}})(),l=function g(v,y,j){v===null&&(v=Function.prototype);var w=Object.getOwnPropertyDescriptor(v,y);if(w===void 0){var N=Object.getPrototypeOf(v);return N===null?void 0:g(N,y,j)}else{if("value"in w)return w.value;var _=w.get;return _===void 0?void 0:_.call(j)}},o=a(6),c=u(o);function u(g){return g&&g.__esModule?g:{default:g}}function d(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}function m(g,v){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:g}function h(g,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);g.prototype=Object.create(v&&v.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(g,v):g.__proto__=v)}var p=(function(g){h(v,g);function v(){return d(this,v),m(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"optimize",value:function(j){l(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,j),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return l(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),v})(c.default);p.blotName="bold",p.tagName=["STRONG","B"],r.default=p}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.addControls=r.default=void 0;var i=(function(){function k(E,R){var F=[],z=!0,V=!1,U=void 0;try{for(var B=E[Symbol.iterator](),$;!(z=($=B.next()).done)&&(F.push($.value),!(R&&F.length===R));z=!0);}catch(L){V=!0,U=L}finally{try{!z&&B.return&&B.return()}finally{if(V)throw U}}return F}return function(E,R){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return k(E,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=(function(){function k(E,R){for(var F=0;F<R.length;F++){var z=R[F];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(E,z.key,z)}}return function(E,R,F){return R&&k(E.prototype,R),F&&k(E,F),E}})(),o=a(2),c=j(o),u=a(0),d=j(u),m=a(5),h=j(m),p=a(10),g=j(p),v=a(9),y=j(v);function j(k){return k&&k.__esModule?k:{default:k}}function w(k,E,R){return E in k?Object.defineProperty(k,E,{value:R,enumerable:!0,configurable:!0,writable:!0}):k[E]=R,k}function N(k,E){if(!(k instanceof E))throw new TypeError("Cannot call a class as a function")}function _(k,E){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:k}function T(k,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);k.prototype=Object.create(E&&E.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(k,E):k.__proto__=E)}var A=(0,g.default)("quill:toolbar"),P=(function(k){T(E,k);function E(R,F){N(this,E);var z=_(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,R,F));if(Array.isArray(z.options.container)){var V=document.createElement("div");O(V,z.options.container),R.container.parentNode.insertBefore(V,R.container),z.container=V}else typeof z.options.container=="string"?z.container=document.querySelector(z.options.container):z.container=z.options.container;if(!(z.container instanceof HTMLElement)){var U;return U=A.error("Container required for toolbar",z.options),_(z,U)}return z.container.classList.add("ql-toolbar"),z.controls=[],z.handlers={},Object.keys(z.options.handlers).forEach(function(B){z.addHandler(B,z.options.handlers[B])}),[].forEach.call(z.container.querySelectorAll("button, select"),function(B){z.attach(B)}),z.quill.on(h.default.events.EDITOR_CHANGE,function(B,$){B===h.default.events.SELECTION_CHANGE&&z.update($)}),z.quill.on(h.default.events.SCROLL_OPTIMIZE,function(){var B=z.quill.selection.getRange(),$=i(B,1),L=$[0];z.update(L)}),z}return l(E,[{key:"addHandler",value:function(F,z){this.handlers[F]=z}},{key:"attach",value:function(F){var z=this,V=[].find.call(F.classList,function(B){return B.indexOf("ql-")===0});if(V){if(V=V.slice(3),F.tagName==="BUTTON"&&F.setAttribute("type","button"),this.handlers[V]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[V]==null){A.warn("ignoring attaching to disabled format",V,F);return}if(d.default.query(V)==null){A.warn("ignoring attaching to nonexistent format",V,F);return}}var U=F.tagName==="SELECT"?"change":"click";F.addEventListener(U,function(B){var $=void 0;if(F.tagName==="SELECT"){if(F.selectedIndex<0)return;var L=F.options[F.selectedIndex];L.hasAttribute("selected")?$=!1:$=L.value||!1}else F.classList.contains("ql-active")?$=!1:$=F.value||!F.hasAttribute("value"),B.preventDefault();z.quill.focus();var I=z.quill.selection.getRange(),W=i(I,1),q=W[0];if(z.handlers[V]!=null)z.handlers[V].call(z,$);else if(d.default.query(V).prototype instanceof d.default.Embed){if($=prompt("Enter "+V),!$)return;z.quill.updateContents(new c.default().retain(q.index).delete(q.length).insert(w({},V,$)),h.default.sources.USER)}else z.quill.format(V,$,h.default.sources.USER);z.update(q)}),this.controls.push([V,F])}}},{key:"update",value:function(F){var z=F==null?{}:this.quill.getFormat(F);this.controls.forEach(function(V){var U=i(V,2),B=U[0],$=U[1];if($.tagName==="SELECT"){var L=void 0;if(F==null)L=null;else if(z[B]==null)L=$.querySelector("option[selected]");else if(!Array.isArray(z[B])){var I=z[B];typeof I=="string"&&(I=I.replace(/\"/g,'\\"')),L=$.querySelector('option[value="'+I+'"]')}L==null?($.value="",$.selectedIndex=-1):L.selected=!0}else if(F==null)$.classList.remove("ql-active");else if($.hasAttribute("value")){var W=z[B]===$.getAttribute("value")||z[B]!=null&&z[B].toString()===$.getAttribute("value")||z[B]==null&&!$.getAttribute("value");$.classList.toggle("ql-active",W)}else $.classList.toggle("ql-active",z[B]!=null)})}}]),E})(y.default);P.DEFAULTS={};function C(k,E,R){var F=document.createElement("button");F.setAttribute("type","button"),F.classList.add("ql-"+E),R!=null&&(F.value=R),k.appendChild(F)}function O(k,E){Array.isArray(E[0])||(E=[E]),E.forEach(function(R){var F=document.createElement("span");F.classList.add("ql-formats"),R.forEach(function(z){if(typeof z=="string")C(F,z);else{var V=Object.keys(z)[0],U=z[V];Array.isArray(U)?M(F,V,U):C(F,V,U)}}),k.appendChild(F)})}function M(k,E,R){var F=document.createElement("select");F.classList.add("ql-"+E),R.forEach(function(z){var V=document.createElement("option");z!==!1?V.setAttribute("value",z):V.setAttribute("selected","selected"),F.appendChild(V)}),k.appendChild(F)}P.DEFAULTS={container:null,handlers:{clean:function(){var E=this,R=this.quill.getSelection();if(R!=null)if(R.length==0){var F=this.quill.getFormat();Object.keys(F).forEach(function(z){d.default.query(z,d.default.Scope.INLINE)!=null&&E.quill.format(z,!1)})}else this.quill.removeFormat(R,h.default.sources.USER)},direction:function(E){var R=this.quill.getFormat().align;E==="rtl"&&R==null?this.quill.format("align","right",h.default.sources.USER):!E&&R==="right"&&this.quill.format("align",!1,h.default.sources.USER),this.quill.format("direction",E,h.default.sources.USER)},indent:function(E){var R=this.quill.getSelection(),F=this.quill.getFormat(R),z=parseInt(F.indent||0);if(E==="+1"||E==="-1"){var V=E==="+1"?1:-1;F.direction==="rtl"&&(V*=-1),this.quill.format("indent",z+V,h.default.sources.USER)}},link:function(E){E===!0&&(E=prompt("Enter link URL:")),this.quill.format("link",E,h.default.sources.USER)},list:function(E){var R=this.quill.getSelection(),F=this.quill.getFormat(R);E==="check"?F.list==="checked"||F.list==="unchecked"?this.quill.format("list",!1,h.default.sources.USER):this.quill.format("list","unchecked",h.default.sources.USER):this.quill.format("list",E,h.default.sources.USER)}}},r.default=P,r.addControls=O}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=(function(){function g(v,y){for(var j=0;j<y.length;j++){var w=y[j];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,y,j){return y&&g(v.prototype,y),j&&g(v,j),v}})(),l=function g(v,y,j){v===null&&(v=Function.prototype);var w=Object.getOwnPropertyDescriptor(v,y);if(w===void 0){var N=Object.getPrototypeOf(v);return N===null?void 0:g(N,y,j)}else{if("value"in w)return w.value;var _=w.get;return _===void 0?void 0:_.call(j)}},o=a(28),c=u(o);function u(g){return g&&g.__esModule?g:{default:g}}function d(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}function m(g,v){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:g}function h(g,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);g.prototype=Object.create(v&&v.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(g,v):g.__proto__=v)}var p=(function(g){h(v,g);function v(y,j){d(this,v);var w=m(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,y));return w.label.innerHTML=j,w.container.classList.add("ql-color-picker"),[].slice.call(w.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(N){N.classList.add("ql-primary")}),w}return i(v,[{key:"buildItem",value:function(j){var w=l(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"buildItem",this).call(this,j);return w.style.backgroundColor=j.getAttribute("value")||"",w}},{key:"selectItem",value:function(j,w){l(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,j,w);var N=this.label.querySelector(".ql-color-label"),_=j&&j.getAttribute("data-value")||"";N&&(N.tagName==="line"?N.style.stroke=_:N.style.fill=_)}}]),v})(c.default);r.default=p}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=(function(){function g(v,y){for(var j=0;j<y.length;j++){var w=y[j];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,y,j){return y&&g(v.prototype,y),j&&g(v,j),v}})(),l=function g(v,y,j){v===null&&(v=Function.prototype);var w=Object.getOwnPropertyDescriptor(v,y);if(w===void 0){var N=Object.getPrototypeOf(v);return N===null?void 0:g(N,y,j)}else{if("value"in w)return w.value;var _=w.get;return _===void 0?void 0:_.call(j)}},o=a(28),c=u(o);function u(g){return g&&g.__esModule?g:{default:g}}function d(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}function m(g,v){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:g}function h(g,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);g.prototype=Object.create(v&&v.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(g,v):g.__proto__=v)}var p=(function(g){h(v,g);function v(y,j){d(this,v);var w=m(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,y));return w.container.classList.add("ql-icon-picker"),[].forEach.call(w.container.querySelectorAll(".ql-picker-item"),function(N){N.innerHTML=j[N.getAttribute("data-value")||""]}),w.defaultItem=w.container.querySelector(".ql-selected"),w.selectItem(w.defaultItem),w}return i(v,[{key:"selectItem",value:function(j,w){l(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,j,w),j=j||this.defaultItem,this.label.innerHTML=j.innerHTML}}]),v})(c.default);r.default=p}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=(function(){function c(u,d){for(var m=0;m<d.length;m++){var h=d[m];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(u,h.key,h)}}return function(u,d,m){return d&&c(u.prototype,d),m&&c(u,m),u}})();function l(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}var o=(function(){function c(u,d){var m=this;l(this,c),this.quill=u,this.boundsContainer=d||document.body,this.root=u.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){m.root.style.marginTop=-1*m.quill.root.scrollTop+"px"}),this.hide()}return i(c,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(d){var m=d.left+d.width/2-this.root.offsetWidth/2,h=d.bottom+this.quill.root.scrollTop;this.root.style.left=m+"px",this.root.style.top=h+"px",this.root.classList.remove("ql-flip");var p=this.boundsContainer.getBoundingClientRect(),g=this.root.getBoundingClientRect(),v=0;if(g.right>p.right&&(v=p.right-g.right,this.root.style.left=m+v+"px"),g.left<p.left&&(v=p.left-g.left,this.root.style.left=m+v+"px"),g.bottom>p.bottom){var y=g.bottom-g.top,j=d.bottom-d.top+y;this.root.style.top=h-j+"px",this.root.classList.add("ql-flip")}return v}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),c})();r.default=o}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=(function(){function M(k,E){var R=[],F=!0,z=!1,V=void 0;try{for(var U=k[Symbol.iterator](),B;!(F=(B=U.next()).done)&&(R.push(B.value),!(E&&R.length===E));F=!0);}catch($){z=!0,V=$}finally{try{!F&&U.return&&U.return()}finally{if(z)throw V}}return R}return function(k,E){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return M(k,E);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=function M(k,E,R){k===null&&(k=Function.prototype);var F=Object.getOwnPropertyDescriptor(k,E);if(F===void 0){var z=Object.getPrototypeOf(k);return z===null?void 0:M(z,E,R)}else{if("value"in F)return F.value;var V=F.get;return V===void 0?void 0:V.call(R)}},o=(function(){function M(k,E){for(var R=0;R<E.length;R++){var F=E[R];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(k,F.key,F)}}return function(k,E,R){return E&&M(k.prototype,E),R&&M(k,R),k}})(),c=a(3),u=N(c),d=a(8),m=N(d),h=a(43),p=N(h),g=a(27),v=N(g),y=a(15),j=a(41),w=N(j);function N(M){return M&&M.__esModule?M:{default:M}}function _(M,k){if(!(M instanceof k))throw new TypeError("Cannot call a class as a function")}function T(M,k){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:M}function A(M,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);M.prototype=Object.create(k&&k.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(M,k):M.__proto__=k)}var P=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],C=(function(M){A(k,M);function k(E,R){_(this,k),R.modules.toolbar!=null&&R.modules.toolbar.container==null&&(R.modules.toolbar.container=P);var F=T(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,E,R));return F.quill.container.classList.add("ql-snow"),F}return o(k,[{key:"extendToolbar",value:function(R){R.container.classList.add("ql-snow"),this.buildButtons([].slice.call(R.container.querySelectorAll("button")),w.default),this.buildPickers([].slice.call(R.container.querySelectorAll("select")),w.default),this.tooltip=new O(this.quill,this.options.bounds),R.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(F,z){R.handlers.link.call(R,!z.format.link)})}}]),k})(p.default);C.DEFAULTS=(0,u.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(k){if(k){var E=this.quill.getSelection();if(E==null||E.length==0)return;var R=this.quill.getText(E);/^\S+@\S+\.\S+$/.test(R)&&R.indexOf("mailto:")!==0&&(R="mailto:"+R);var F=this.quill.theme.tooltip;F.edit("link",R)}else this.quill.format("link",!1)}}}}});var O=(function(M){A(k,M);function k(E,R){_(this,k);var F=T(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,E,R));return F.preview=F.root.querySelector("a.ql-preview"),F}return o(k,[{key:"listen",value:function(){var R=this;l(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(F){R.root.classList.contains("ql-editing")?R.save():R.edit("link",R.preview.textContent),F.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(F){if(R.linkRange!=null){var z=R.linkRange;R.restoreFocus(),R.quill.formatText(z,"link",!1,m.default.sources.USER),delete R.linkRange}F.preventDefault(),R.hide()}),this.quill.on(m.default.events.SELECTION_CHANGE,function(F,z,V){if(F!=null){if(F.length===0&&V===m.default.sources.USER){var U=R.quill.scroll.descendant(v.default,F.index),B=i(U,2),$=B[0],L=B[1];if($!=null){R.linkRange=new y.Range(F.index-L,$.length());var I=v.default.formats($.domNode);R.preview.textContent=I,R.preview.setAttribute("href",I),R.show(),R.position(R.quill.getBounds(R.linkRange));return}}else delete R.linkRange;R.hide()}})}},{key:"show",value:function(){l(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),k})(h.BaseTooltip);O.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),r.default=C}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(29),l=De(i),o=a(36),c=a(38),u=a(64),d=a(65),m=De(d),h=a(66),p=De(h),g=a(67),v=De(g),y=a(37),j=a(26),w=a(39),N=a(40),_=a(56),T=De(_),A=a(68),P=De(A),C=a(27),O=De(C),M=a(69),k=De(M),E=a(70),R=De(E),F=a(71),z=De(F),V=a(72),U=De(V),B=a(73),$=De(B),L=a(13),I=De(L),W=a(74),q=De(W),Z=a(75),Q=De(Z),Y=a(57),K=De(Y),ae=a(41),se=De(ae),de=a(28),ue=De(de),oe=a(59),pe=De(oe),je=a(60),we=De(je),qe=a(61),ze=De(qe),Ee=a(108),Ce=De(Ee),Ge=a(62),Ye=De(Ge);function De(it){return it&&it.__esModule?it:{default:it}}l.default.register({"attributors/attribute/direction":c.DirectionAttribute,"attributors/class/align":o.AlignClass,"attributors/class/background":y.BackgroundClass,"attributors/class/color":j.ColorClass,"attributors/class/direction":c.DirectionClass,"attributors/class/font":w.FontClass,"attributors/class/size":N.SizeClass,"attributors/style/align":o.AlignStyle,"attributors/style/background":y.BackgroundStyle,"attributors/style/color":j.ColorStyle,"attributors/style/direction":c.DirectionStyle,"attributors/style/font":w.FontStyle,"attributors/style/size":N.SizeStyle},!0),l.default.register({"formats/align":o.AlignClass,"formats/direction":c.DirectionClass,"formats/indent":u.IndentClass,"formats/background":y.BackgroundStyle,"formats/color":j.ColorStyle,"formats/font":w.FontClass,"formats/size":N.SizeClass,"formats/blockquote":m.default,"formats/code-block":I.default,"formats/header":p.default,"formats/list":v.default,"formats/bold":T.default,"formats/code":L.Code,"formats/italic":P.default,"formats/link":O.default,"formats/script":k.default,"formats/strike":R.default,"formats/underline":z.default,"formats/image":U.default,"formats/video":$.default,"formats/list/item":g.ListItem,"modules/formula":q.default,"modules/syntax":Q.default,"modules/toolbar":K.default,"themes/bubble":Ce.default,"themes/snow":Ye.default,"ui/icons":se.default,"ui/picker":ue.default,"ui/icon-picker":we.default,"ui/color-picker":pe.default,"ui/tooltip":ze.default},!0),r.default=l.default}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.IndentClass=void 0;var i=(function(){function v(y,j){for(var w=0;w<j.length;w++){var N=j[w];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(y,N.key,N)}}return function(y,j,w){return j&&v(y.prototype,j),w&&v(y,w),y}})(),l=function v(y,j,w){y===null&&(y=Function.prototype);var N=Object.getOwnPropertyDescriptor(y,j);if(N===void 0){var _=Object.getPrototypeOf(y);return _===null?void 0:v(_,j,w)}else{if("value"in N)return N.value;var T=N.get;return T===void 0?void 0:T.call(w)}},o=a(0),c=u(o);function u(v){return v&&v.__esModule?v:{default:v}}function d(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function m(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function h(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var p=(function(v){h(y,v);function y(){return d(this,y),m(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return i(y,[{key:"add",value:function(w,N){if(N==="+1"||N==="-1"){var _=this.value(w)||0;N=N==="+1"?_+1:_-1}return N===0?(this.remove(w),!0):l(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"add",this).call(this,w,N)}},{key:"canAdd",value:function(w,N){return l(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"canAdd",this).call(this,w,N)||l(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"canAdd",this).call(this,w,parseInt(N))}},{key:"value",value:function(w){return parseInt(l(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"value",this).call(this,w))||void 0}}]),y})(c.default.Attributor.Class),g=new p("indent","ql-indent",{scope:c.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});r.IndentClass=g}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(4),l=o(i);function o(h){return h&&h.__esModule?h:{default:h}}function c(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}function u(h,p){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:h}function d(h,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);h.prototype=Object.create(p&&p.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(h,p):h.__proto__=p)}var m=(function(h){d(p,h);function p(){return c(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(l.default);m.blotName="blockquote",m.tagName="blockquote",r.default=m}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=(function(){function p(g,v){for(var y=0;y<v.length;y++){var j=v[y];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(g,j.key,j)}}return function(g,v,y){return v&&p(g.prototype,v),y&&p(g,y),g}})(),l=a(4),o=c(l);function c(p){return p&&p.__esModule?p:{default:p}}function u(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function d(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:p}function m(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(p,g):p.__proto__=g)}var h=(function(p){m(g,p);function g(){return u(this,g),d(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return i(g,null,[{key:"formats",value:function(y){return this.tagName.indexOf(y.tagName)+1}}]),g})(o.default);h.blotName="header",h.tagName=["H1","H2","H3","H4","H5","H6"],r.default=h}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ListItem=void 0;var i=(function(){function _(T,A){for(var P=0;P<A.length;P++){var C=A[P];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(T,C.key,C)}}return function(T,A,P){return A&&_(T.prototype,A),P&&_(T,P),T}})(),l=function _(T,A,P){T===null&&(T=Function.prototype);var C=Object.getOwnPropertyDescriptor(T,A);if(C===void 0){var O=Object.getPrototypeOf(T);return O===null?void 0:_(O,A,P)}else{if("value"in C)return C.value;var M=C.get;return M===void 0?void 0:M.call(P)}},o=a(0),c=p(o),u=a(4),d=p(u),m=a(25),h=p(m);function p(_){return _&&_.__esModule?_:{default:_}}function g(_,T,A){return T in _?Object.defineProperty(_,T,{value:A,enumerable:!0,configurable:!0,writable:!0}):_[T]=A,_}function v(_,T){if(!(_ instanceof T))throw new TypeError("Cannot call a class as a function")}function y(_,T){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:_}function j(_,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);_.prototype=Object.create(T&&T.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(_,T):_.__proto__=T)}var w=(function(_){j(T,_);function T(){return v(this,T),y(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return i(T,[{key:"format",value:function(P,C){P===N.blotName&&!C?this.replaceWith(c.default.create(this.statics.scope)):l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"format",this).call(this,P,C)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(P,C){return this.parent.isolate(this.offset(this.parent),this.length()),P===this.parent.statics.blotName?(this.parent.replaceWith(P,C),this):(this.parent.unwrap(),l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"replaceWith",this).call(this,P,C))}}],[{key:"formats",value:function(P){return P.tagName===this.tagName?void 0:l(T.__proto__||Object.getPrototypeOf(T),"formats",this).call(this,P)}}]),T})(d.default);w.blotName="list-item",w.tagName="LI";var N=(function(_){j(T,_),i(T,null,[{key:"create",value:function(P){var C=P==="ordered"?"OL":"UL",O=l(T.__proto__||Object.getPrototypeOf(T),"create",this).call(this,C);return(P==="checked"||P==="unchecked")&&O.setAttribute("data-checked",P==="checked"),O}},{key:"formats",value:function(P){if(P.tagName==="OL")return"ordered";if(P.tagName==="UL")return P.hasAttribute("data-checked")?P.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function T(A){v(this,T);var P=y(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,A)),C=function(M){if(M.target.parentNode===A){var k=P.statics.formats(A),E=c.default.find(M.target);k==="checked"?E.format("list","unchecked"):k==="unchecked"&&E.format("list","checked")}};return A.addEventListener("touchstart",C),A.addEventListener("mousedown",C),P}return i(T,[{key:"format",value:function(P,C){this.children.length>0&&this.children.tail.format(P,C)}},{key:"formats",value:function(){return g({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(P,C){if(P instanceof w)l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"insertBefore",this).call(this,P,C);else{var O=C==null?this.length():C.offset(this),M=this.split(O);M.parent.insertBefore(P,M)}}},{key:"optimize",value:function(P){l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"optimize",this).call(this,P);var C=this.next;C!=null&&C.prev===this&&C.statics.blotName===this.statics.blotName&&C.domNode.tagName===this.domNode.tagName&&C.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(C.moveChildren(this),C.remove())}},{key:"replace",value:function(P){if(P.statics.blotName!==this.statics.blotName){var C=c.default.create(this.statics.defaultChild);P.moveChildren(C),this.appendChild(C)}l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"replace",this).call(this,P)}}]),T})(h.default);N.blotName="list",N.scope=c.default.Scope.BLOCK_BLOT,N.tagName=["OL","UL"],N.defaultChild="list-item",N.allowedChildren=[w],r.ListItem=w,r.default=N}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(56),l=o(i);function o(h){return h&&h.__esModule?h:{default:h}}function c(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}function u(h,p){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:h}function d(h,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);h.prototype=Object.create(p&&p.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(h,p):h.__proto__=p)}var m=(function(h){d(p,h);function p(){return c(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(l.default);m.blotName="italic",m.tagName=["EM","I"],r.default=m}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=(function(){function g(v,y){for(var j=0;j<y.length;j++){var w=y[j];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,y,j){return y&&g(v.prototype,y),j&&g(v,j),v}})(),l=function g(v,y,j){v===null&&(v=Function.prototype);var w=Object.getOwnPropertyDescriptor(v,y);if(w===void 0){var N=Object.getPrototypeOf(v);return N===null?void 0:g(N,y,j)}else{if("value"in w)return w.value;var _=w.get;return _===void 0?void 0:_.call(j)}},o=a(6),c=u(o);function u(g){return g&&g.__esModule?g:{default:g}}function d(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}function m(g,v){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:g}function h(g,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);g.prototype=Object.create(v&&v.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(g,v):g.__proto__=v)}var p=(function(g){h(v,g);function v(){return d(this,v),m(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,null,[{key:"create",value:function(j){return j==="super"?document.createElement("sup"):j==="sub"?document.createElement("sub"):l(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,j)}},{key:"formats",value:function(j){if(j.tagName==="SUB")return"sub";if(j.tagName==="SUP")return"super"}}]),v})(c.default);p.blotName="script",p.tagName=["SUB","SUP"],r.default=p}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(6),l=o(i);function o(h){return h&&h.__esModule?h:{default:h}}function c(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}function u(h,p){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:h}function d(h,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);h.prototype=Object.create(p&&p.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(h,p):h.__proto__=p)}var m=(function(h){d(p,h);function p(){return c(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(l.default);m.blotName="strike",m.tagName="S",r.default=m}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(6),l=o(i);function o(h){return h&&h.__esModule?h:{default:h}}function c(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}function u(h,p){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:h}function d(h,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);h.prototype=Object.create(p&&p.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(h,p):h.__proto__=p)}var m=(function(h){d(p,h);function p(){return c(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(l.default);m.blotName="underline",m.tagName="U",r.default=m}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=(function(){function y(j,w){for(var N=0;N<w.length;N++){var _=w[N];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(j,_.key,_)}}return function(j,w,N){return w&&y(j.prototype,w),N&&y(j,N),j}})(),l=function y(j,w,N){j===null&&(j=Function.prototype);var _=Object.getOwnPropertyDescriptor(j,w);if(_===void 0){var T=Object.getPrototypeOf(j);return T===null?void 0:y(T,w,N)}else{if("value"in _)return _.value;var A=_.get;return A===void 0?void 0:A.call(N)}},o=a(0),c=d(o),u=a(27);function d(y){return y&&y.__esModule?y:{default:y}}function m(y,j){if(!(y instanceof j))throw new TypeError("Cannot call a class as a function")}function h(y,j){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:y}function p(y,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);y.prototype=Object.create(j&&j.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(y,j):y.__proto__=j)}var g=["alt","height","width"],v=(function(y){p(j,y);function j(){return m(this,j),h(this,(j.__proto__||Object.getPrototypeOf(j)).apply(this,arguments))}return i(j,[{key:"format",value:function(N,_){g.indexOf(N)>-1?_?this.domNode.setAttribute(N,_):this.domNode.removeAttribute(N):l(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"format",this).call(this,N,_)}}],[{key:"create",value:function(N){var _=l(j.__proto__||Object.getPrototypeOf(j),"create",this).call(this,N);return typeof N=="string"&&_.setAttribute("src",this.sanitize(N)),_}},{key:"formats",value:function(N){return g.reduce(function(_,T){return N.hasAttribute(T)&&(_[T]=N.getAttribute(T)),_},{})}},{key:"match",value:function(N){return/\.(jpe?g|gif|png)$/.test(N)||/^data:image\/.+;base64/.test(N)}},{key:"sanitize",value:function(N){return(0,u.sanitize)(N,["http","https","data"])?N:"//:0"}},{key:"value",value:function(N){return N.getAttribute("src")}}]),j})(c.default.Embed);v.blotName="image",v.tagName="IMG",r.default=v}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=(function(){function y(j,w){for(var N=0;N<w.length;N++){var _=w[N];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(j,_.key,_)}}return function(j,w,N){return w&&y(j.prototype,w),N&&y(j,N),j}})(),l=function y(j,w,N){j===null&&(j=Function.prototype);var _=Object.getOwnPropertyDescriptor(j,w);if(_===void 0){var T=Object.getPrototypeOf(j);return T===null?void 0:y(T,w,N)}else{if("value"in _)return _.value;var A=_.get;return A===void 0?void 0:A.call(N)}},o=a(4),c=a(27),u=d(c);function d(y){return y&&y.__esModule?y:{default:y}}function m(y,j){if(!(y instanceof j))throw new TypeError("Cannot call a class as a function")}function h(y,j){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:y}function p(y,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);y.prototype=Object.create(j&&j.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(y,j):y.__proto__=j)}var g=["height","width"],v=(function(y){p(j,y);function j(){return m(this,j),h(this,(j.__proto__||Object.getPrototypeOf(j)).apply(this,arguments))}return i(j,[{key:"format",value:function(N,_){g.indexOf(N)>-1?_?this.domNode.setAttribute(N,_):this.domNode.removeAttribute(N):l(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"format",this).call(this,N,_)}}],[{key:"create",value:function(N){var _=l(j.__proto__||Object.getPrototypeOf(j),"create",this).call(this,N);return _.setAttribute("frameborder","0"),_.setAttribute("allowfullscreen",!0),_.setAttribute("src",this.sanitize(N)),_}},{key:"formats",value:function(N){return g.reduce(function(_,T){return N.hasAttribute(T)&&(_[T]=N.getAttribute(T)),_},{})}},{key:"sanitize",value:function(N){return u.default.sanitize(N)}},{key:"value",value:function(N){return N.getAttribute("src")}}]),j})(o.BlockEmbed);v.blotName="video",v.className="ql-video",v.tagName="IFRAME",r.default=v}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.FormulaBlot=void 0;var i=(function(){function N(_,T){for(var A=0;A<T.length;A++){var P=T[A];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(_,P.key,P)}}return function(_,T,A){return T&&N(_.prototype,T),A&&N(_,A),_}})(),l=function N(_,T,A){_===null&&(_=Function.prototype);var P=Object.getOwnPropertyDescriptor(_,T);if(P===void 0){var C=Object.getPrototypeOf(_);return C===null?void 0:N(C,T,A)}else{if("value"in P)return P.value;var O=P.get;return O===void 0?void 0:O.call(A)}},o=a(35),c=p(o),u=a(5),d=p(u),m=a(9),h=p(m);function p(N){return N&&N.__esModule?N:{default:N}}function g(N,_){if(!(N instanceof _))throw new TypeError("Cannot call a class as a function")}function v(N,_){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:N}function y(N,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);N.prototype=Object.create(_&&_.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(N,_):N.__proto__=_)}var j=(function(N){y(_,N);function _(){return g(this,_),v(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return i(_,null,[{key:"create",value:function(A){var P=l(_.__proto__||Object.getPrototypeOf(_),"create",this).call(this,A);return typeof A=="string"&&(window.katex.render(A,P,{throwOnError:!1,errorColor:"#f00"}),P.setAttribute("data-value",A)),P}},{key:"value",value:function(A){return A.getAttribute("data-value")}}]),_})(c.default);j.blotName="formula",j.className="ql-formula",j.tagName="SPAN";var w=(function(N){y(_,N),i(_,null,[{key:"register",value:function(){d.default.register(j,!0)}}]);function _(){g(this,_);var T=v(this,(_.__proto__||Object.getPrototypeOf(_)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return T}return _})(h.default);r.FormulaBlot=j,r.default=w}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CodeToken=r.CodeBlock=void 0;var i=(function(){function A(P,C){for(var O=0;O<C.length;O++){var M=C[O];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(P,M.key,M)}}return function(P,C,O){return C&&A(P.prototype,C),O&&A(P,O),P}})(),l=function A(P,C,O){P===null&&(P=Function.prototype);var M=Object.getOwnPropertyDescriptor(P,C);if(M===void 0){var k=Object.getPrototypeOf(P);return k===null?void 0:A(k,C,O)}else{if("value"in M)return M.value;var E=M.get;return E===void 0?void 0:E.call(O)}},o=a(0),c=v(o),u=a(5),d=v(u),m=a(9),h=v(m),p=a(13),g=v(p);function v(A){return A&&A.__esModule?A:{default:A}}function y(A,P){if(!(A instanceof P))throw new TypeError("Cannot call a class as a function")}function j(A,P){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:A}function w(A,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);A.prototype=Object.create(P&&P.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(A,P):A.__proto__=P)}var N=(function(A){w(P,A);function P(){return y(this,P),j(this,(P.__proto__||Object.getPrototypeOf(P)).apply(this,arguments))}return i(P,[{key:"replaceWith",value:function(O){this.domNode.textContent=this.domNode.textContent,this.attach(),l(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"replaceWith",this).call(this,O)}},{key:"highlight",value:function(O){var M=this.domNode.textContent;this.cachedText!==M&&((M.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=O(M),this.domNode.normalize(),this.attach()),this.cachedText=M)}}]),P})(g.default);N.className="ql-syntax";var _=new c.default.Attributor.Class("token","hljs",{scope:c.default.Scope.INLINE}),T=(function(A){w(P,A),i(P,null,[{key:"register",value:function(){d.default.register(_,!0),d.default.register(N,!0)}}]);function P(C,O){y(this,P);var M=j(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,C,O));if(typeof M.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var k=null;return M.quill.on(d.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(k),k=setTimeout(function(){M.highlight(),k=null},M.options.interval)}),M.highlight(),M}return i(P,[{key:"highlight",value:function(){var O=this;if(!this.quill.selection.composing){this.quill.update(d.default.sources.USER);var M=this.quill.getSelection();this.quill.scroll.descendants(N).forEach(function(k){k.highlight(O.options.highlight)}),this.quill.update(d.default.sources.SILENT),M!=null&&this.quill.setSelection(M,d.default.sources.SILENT)}}}]),P})(h.default);T.DEFAULTS={highlight:(function(){return window.hljs==null?null:function(A){var P=window.hljs.highlightAuto(A);return P.value}})(),interval:1e3},r.CodeBlock=N,r.CodeToken=_,r.default=T}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'}),(function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'}),(function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'}),(function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'}),(function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'}),(function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'}),(function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BubbleTooltip=void 0;var i=function P(C,O,M){C===null&&(C=Function.prototype);var k=Object.getOwnPropertyDescriptor(C,O);if(k===void 0){var E=Object.getPrototypeOf(C);return E===null?void 0:P(E,O,M)}else{if("value"in k)return k.value;var R=k.get;return R===void 0?void 0:R.call(M)}},l=(function(){function P(C,O){for(var M=0;M<O.length;M++){var k=O[M];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(C,k.key,k)}}return function(C,O,M){return O&&P(C.prototype,O),M&&P(C,M),C}})(),o=a(3),c=y(o),u=a(8),d=y(u),m=a(43),h=y(m),p=a(15),g=a(41),v=y(g);function y(P){return P&&P.__esModule?P:{default:P}}function j(P,C){if(!(P instanceof C))throw new TypeError("Cannot call a class as a function")}function w(P,C){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:P}function N(P,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);P.prototype=Object.create(C&&C.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(P,C):P.__proto__=C)}var _=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],T=(function(P){N(C,P);function C(O,M){j(this,C),M.modules.toolbar!=null&&M.modules.toolbar.container==null&&(M.modules.toolbar.container=_);var k=w(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,O,M));return k.quill.container.classList.add("ql-bubble"),k}return l(C,[{key:"extendToolbar",value:function(M){this.tooltip=new A(this.quill,this.options.bounds),this.tooltip.root.appendChild(M.container),this.buildButtons([].slice.call(M.container.querySelectorAll("button")),v.default),this.buildPickers([].slice.call(M.container.querySelectorAll("select")),v.default)}}]),C})(h.default);T.DEFAULTS=(0,c.default)(!0,{},h.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(C){C?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var A=(function(P){N(C,P);function C(O,M){j(this,C);var k=w(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,O,M));return k.quill.on(d.default.events.EDITOR_CHANGE,function(E,R,F,z){if(E===d.default.events.SELECTION_CHANGE)if(R!=null&&R.length>0&&z===d.default.sources.USER){k.show(),k.root.style.left="0px",k.root.style.width="",k.root.style.width=k.root.offsetWidth+"px";var V=k.quill.getLines(R.index,R.length);if(V.length===1)k.position(k.quill.getBounds(R));else{var U=V[V.length-1],B=k.quill.getIndex(U),$=Math.min(U.length()-1,R.index+R.length-B),L=k.quill.getBounds(new p.Range(B,$));k.position(L)}}else document.activeElement!==k.textbox&&k.quill.hasFocus()&&k.hide()}),k}return l(C,[{key:"listen",value:function(){var M=this;i(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){M.root.classList.remove("ql-editing")}),this.quill.on(d.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!M.root.classList.contains("ql-hidden")){var k=M.quill.getSelection();k!=null&&M.position(M.quill.getBounds(k))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(M){var k=i(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"position",this).call(this,M),E=this.root.querySelector(".ql-tooltip-arrow");if(E.style.marginLeft="",k===0)return k;E.style.marginLeft=-1*k-E.offsetWidth/2+"px"}}]),C})(m.BaseTooltip);A.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),r.BubbleTooltip=A,r.default=T}),(function(n,r,a){n.exports=a(63)})]).default})})(wg)),wg.exports}var li,$M;function Vde(){if($M)return li;$M=1;var t=li&&li.__extends||(function(){var d=function(m,h){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var v in g)g.hasOwnProperty(v)&&(p[v]=g[v])},d(m,h)};return function(m,h){d(m,h);function p(){this.constructor=m}m.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}})(),s=li&&li.__assign||function(){return s=Object.assign||function(d){for(var m,h=1,p=arguments.length;h<p;h++){m=arguments[h];for(var g in m)Object.prototype.hasOwnProperty.call(m,g)&&(d[g]=m[g])}return d},s.apply(this,arguments)},n=li&&li.__spreadArrays||function(){for(var d=0,m=0,h=arguments.length;m<h;m++)d+=arguments[m].length;for(var p=Array(d),g=0,m=0;m<h;m++)for(var v=arguments[m],y=0,j=v.length;y<j;y++,g++)p[g]=v[y];return p},r=li&&li.__importDefault||function(d){return d&&d.__esModule?d:{default:d}},a=r(Of()),i=r(T1()),l=r(zde()),o=r(Ude()),c=(function(d){t(m,d);function m(h){var p=d.call(this,h)||this;p.dirtyProps=["modules","formats","bounds","theme","children"],p.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],p.state={generation:0},p.selection=null,p.onEditorChange=function(v,y,j,w){var N,_,T,A;v==="text-change"?(_=(N=p).onEditorChangeText)===null||_===void 0||_.call(N,p.editor.root.innerHTML,y,w,p.unprivilegedEditor):v==="selection-change"&&((A=(T=p).onEditorChangeSelection)===null||A===void 0||A.call(T,y,w,p.unprivilegedEditor))};var g=p.isControlled()?h.value:h.defaultValue;return p.value=g??"",p}return m.prototype.validateProps=function(h){var p;if(a.default.Children.count(h.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(a.default.Children.count(h.children)){var g=a.default.Children.only(h.children);if(((p=g)===null||p===void 0?void 0:p.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&h.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},m.prototype.shouldComponentUpdate=function(h,p){var g=this,v;if(this.validateProps(h),!this.editor||this.state.generation!==p.generation)return!0;if("value"in h){var y=this.getEditorContents(),j=(v=h.value,v??"");this.isEqualValue(j,y)||this.setEditorContents(this.editor,j)}return h.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,h.readOnly),n(this.cleanProps,this.dirtyProps).some(function(w){return!l.default(h[w],g.props[w])})},m.prototype.shouldComponentRegenerate=function(h){var p=this;return this.dirtyProps.some(function(g){return!l.default(h[g],p.props[g])})},m.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},m.prototype.componentWillUnmount=function(){this.destroyEditor()},m.prototype.componentDidUpdate=function(h,p){var g=this;if(this.editor&&this.shouldComponentRegenerate(h)){var v=this.editor.getContents(),y=this.editor.getSelection();this.regenerationSnapshot={delta:v,selection:y},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==p.generation){var j=this.regenerationSnapshot,v=j.delta,w=j.selection;delete this.regenerationSnapshot,this.instantiateEditor();var N=this.editor;N.setContents(v),u(function(){return g.setEditorSelection(N,w)})}},m.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},m.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},m.prototype.isControlled=function(){return"value"in this.props},m.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},m.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},m.prototype.createEditor=function(h,p){var g=new o.default(h,p);return p.tabIndex!=null&&this.setEditorTabIndex(g,p.tabIndex),this.hookEditor(g),g},m.prototype.hookEditor=function(h){this.unprivilegedEditor=this.makeUnprivilegedEditor(h),h.on("editor-change",this.onEditorChange)},m.prototype.unhookEditor=function(h){h.off("editor-change",this.onEditorChange)},m.prototype.getEditorContents=function(){return this.value},m.prototype.getEditorSelection=function(){return this.selection},m.prototype.isDelta=function(h){return h&&h.ops},m.prototype.isEqualValue=function(h,p){return this.isDelta(h)&&this.isDelta(p)?l.default(h.ops,p.ops):l.default(h,p)},m.prototype.setEditorContents=function(h,p){var g=this;this.value=p;var v=this.getEditorSelection();typeof p=="string"?h.setContents(h.clipboard.convert(p)):h.setContents(p),u(function(){return g.setEditorSelection(h,v)})},m.prototype.setEditorSelection=function(h,p){if(this.selection=p,p){var g=h.getLength();p.index=Math.max(0,Math.min(p.index,g-1)),p.length=Math.max(0,Math.min(p.length,g-1-p.index)),h.setSelection(p)}},m.prototype.setEditorTabIndex=function(h,p){var g,v;!((v=(g=h)===null||g===void 0?void 0:g.scroll)===null||v===void 0)&&v.domNode&&(h.scroll.domNode.tabIndex=p)},m.prototype.setEditorReadOnly=function(h,p){p?h.disable():h.enable()},m.prototype.makeUnprivilegedEditor=function(h){var p=h;return{getHTML:function(){return p.root.innerHTML},getLength:p.getLength.bind(p),getText:p.getText.bind(p),getContents:p.getContents.bind(p),getSelection:p.getSelection.bind(p),getBounds:p.getBounds.bind(p)}},m.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var h=i.default.findDOMNode(this.editingArea);if(!h)throw new Error("Cannot find element for editing area");if(h.nodeType===3)throw new Error("Editing area cannot be a text node");return h},m.prototype.renderEditingArea=function(){var h=this,p=this.props,g=p.children,v=p.preserveWhitespace,y=this.state.generation,j={key:y,ref:function(w){h.editingArea=w}};return a.default.Children.count(g)?a.default.cloneElement(a.default.Children.only(g),j):v?a.default.createElement("pre",s({},j)):a.default.createElement("div",s({},j))},m.prototype.render=function(){var h;return a.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(h=this.props.className,h??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},m.prototype.onEditorChangeText=function(h,p,g,v){var y,j;if(this.editor){var w=this.isDelta(this.value)?v.getContents():v.getHTML();w!==this.getEditorContents()&&(this.lastDeltaChangeSet=p,this.value=w,(j=(y=this.props).onChange)===null||j===void 0||j.call(y,h,p,g,v))}},m.prototype.onEditorChangeSelection=function(h,p,g){var v,y,j,w,N,_;if(this.editor){var T=this.getEditorSelection(),A=!T&&h,P=T&&!h;l.default(h,T)||(this.selection=h,(y=(v=this.props).onChangeSelection)===null||y===void 0||y.call(v,h,p,g),A?(w=(j=this.props).onFocus)===null||w===void 0||w.call(j,h,p,g):P&&((_=(N=this.props).onBlur)===null||_===void 0||_.call(N,T,p,g)))}},m.prototype.focus=function(){this.editor&&this.editor.focus()},m.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},m.displayName="React Quill",m.Quill=o.default,m.defaultProps={theme:"snow",modules:{},readOnly:!1},m})(a.default.Component);function u(d){Promise.resolve().then(d)}return li=c,li}var Wde=Vde();const dS=ud(Wde);function qI({tags:t,setTags:s}){const[n,r]=b.useState(""),a=l=>{l.key==="Enter"&&n.trim()&&(l.preventDefault(),t.includes(n.trim())||s([...t,n.trim()]),r(""))},i=l=>{s(t.filter(o=>o!==l))};return e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsx(Fe,{children:e.jsx(Ue,{className:"text-base",children:"Tags"})}),e.jsxs(ce,{className:"space-y-3",children:[e.jsx(he,{value:n,onChange:l=>r(l.target.value),onKeyDown:a,placeholder:"Type and press Enter...",className:"text-sm"}),t.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:t.map((l,o)=>e.jsxs(ye,{variant:"secondary",className:"gap-1",children:[l,e.jsx("button",{onClick:()=>i(l),className:"hover:text-red-600",children:e.jsx(_s,{className:"w-3 h-3"})})]},o))})]})]})}function zI({categories:t,selectedSubcategories:s,onChange:n}){const[r,a]=Be.useState({}),[i,l]=Be.useState(""),o=d=>{a(m=>({...m,[d]:!m[d]}))},c=d=>{const m=s.includes(d)?s.filter(h=>h!==d):[...s,d];n(m)},u=Be.useMemo(()=>{if(!i.trim())return t;const d=i.toLowerCase();return t.map(m=>{if(!m.subcategories||m.subcategories.length===0)return null;const h=m.subcategories.filter(g=>g.toLowerCase().includes(d)),p=m.name.toLowerCase().includes(d);return h.length===0&&!p?null:{...m,subcategories:h.length>0?h:m.subcategories}}).filter(Boolean)},[t,i]);return Be.useEffect(()=>{const d={};t.forEach(m=>{var h;(h=m.subcategories)!=null&&h.some(p=>s.includes(p))&&(d[m.name]=!0)}),a(m=>({...m,...d}))},[t,s]),!t||t.length===0?e.jsx("div",{className:"text-sm text-slate-500 italic",children:"Loading categories..."}):e.jsxs("div",{className:"space-y-3",children:[e.jsx(ee,{children:"Categories"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx(he,{placeholder:"Search categories...",value:i,onChange:d=>l(d.target.value),className:"pl-10 pr-10"}),i&&e.jsx("button",{onClick:()=>l(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:e.jsx(_s,{className:"w-4 h-4"})})]}),s.length>0&&e.jsxs("div",{className:"text-xs text-blue-600 font-medium",children:[s.length," selected"]}),e.jsx("div",{className:"border border-slate-200 rounded-lg max-h-64 overflow-y-auto",children:u.map(d=>{if(!(d.subcategories&&d.subcategories.length>0))return null;const h=r[d.name],p=[...d.subcategories].sort((g,v)=>g.localeCompare(v,void 0,{sensitivity:"base"}));return e.jsxs("div",{className:"border-b border-slate-200 last:border-b-0",children:[e.jsxs("button",{onClick:()=>o(d.name),className:"w-full flex items-center justify-between px-3 py-2 text-sm font-semibold hover:bg-slate-50 text-purple-700",children:[e.jsx("span",{children:d.name}),h?e.jsx(Or,{className:"w-4 h-4"}):e.jsx(js,{className:"w-4 h-4"})]}),h&&e.jsx("div",{className:"px-3 pb-2 space-y-1",children:p.map(g=>{const v=s.includes(g);return e.jsxs("div",{className:`flex items-start gap-2 px-2 py-1 rounded cursor-pointer transition-colors ${v?"bg-blue-50":"hover:bg-slate-50"}`,onClick:()=>c(g),children:[e.jsx(ba,{id:`editor-sub-${g}`,checked:v,onCheckedChange:()=>c(g),className:"mt-0.5 flex-shrink-0 data-[state=checked]:bg-blue-600 data-[state=checked]:border-blue-600"}),e.jsx(ee,{htmlFor:`editor-sub-${g}`,className:`text-xs cursor-pointer break-words flex-1 leading-tight pt-0.5 ${v?"text-blue-700 font-medium":"text-slate-700"}`,children:g})]},g)})})]},d.id)})}),s.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 p-3 bg-blue-50 rounded-lg",children:s.map((d,m)=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded",children:[d,e.jsx("button",{onClick:()=>c(d),className:"hover:bg-blue-200 rounded-full p-0.5",children:e.jsx(_s,{className:"w-3 h-3"})})]},m))})]})}function $I({status:t,setStatus:s}){var r,a;const n={draft:{label:"Draft",color:"bg-amber-100 text-amber-700"},published:{label:"Published",color:"bg-green-100 text-green-700"},archived:{label:"Archived",color:"bg-slate-100 text-slate-700"}};return e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsx(Fe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ue,{className:"text-base",children:"Status"}),e.jsx(ye,{className:(r=n[t])==null?void 0:r.color,children:(a=n[t])==null?void 0:a.label})]})}),e.jsxs(ce,{children:[e.jsxs(Ke,{value:t,onValueChange:s,children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"draft",children:"Draft"}),e.jsx(re,{value:"published",children:"Published"}),e.jsx(re,{value:"archived",children:"Archived"})]})]}),e.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:[t==="draft"&&"Only visible to you",t==="published"&&"Visible to all members",t==="archived"&&"Hidden from listings"]})]})]})}function UI({seoTitle:t,onSeoTitleChange:s,seoDescription:n,onSeoDescriptionChange:r,defaultTitle:a,defaultDescription:i}){return e.jsx(s_,{children:e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsx(Fe,{className:"pb-3",children:e.jsxs(n_,{className:"flex items-center justify-between w-full hover:opacity-70",children:[e.jsx(Ue,{className:"text-base",children:"SEO Settings"}),e.jsx(Or,{className:"w-4 h-4 transition-transform ui-open:rotate-180"})]})}),e.jsx(r_,{children:e.jsxs(ce,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"seo-title",className:"text-sm",children:"SEO Title"}),e.jsx(he,{id:"seo-title",value:t,onChange:l=>s(l.target.value),placeholder:a||"Article title for search engines...",className:"mt-2"}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[t.length||(a==null?void 0:a.length)||0," / 60 characters recommended"]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"seo-desc",className:"text-sm",children:"SEO Description"}),e.jsx(Gt,{id:"seo-desc",value:n,onChange:l=>r(l.target.value),placeholder:i||"Brief description for search results...",className:"mt-2 min-h-[80px]"}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[n.length||(i==null?void 0:i.length)||0," / 160 characters recommended"]})]})]})})]})})}function VI({memberInfo:t}){const n=new URLSearchParams(window.location.search).get("id"),r=!!n,a=Yt(),i=b.useRef(null),[l,o]=b.useState(""),[c,u]=b.useState(""),[d,m]=b.useState(""),[h,p]=b.useState(""),[g,v]=b.useState(""),[y,j]=b.useState([]),[w,N]=b.useState([]),[_,T]=b.useState("draft"),[A,P]=b.useState(""),[C,O]=b.useState(""),[M,k]=b.useState(new Date().toISOString()),[E,R]=b.useState(!1),[F,z]=b.useState(!1),[V,U]=b.useState(null),[B,$]=b.useState("member"),[L,I]=b.useState(null),{data:W}=me({queryKey:["current-member",t==null?void 0:t.email],queryFn:async()=>(await X.entities.Member.list()).find(qe=>qe.email===(t==null?void 0:t.email)),enabled:!!t,staleTime:300*1e3}),{data:q=[]}=me({queryKey:["resourceCategories-articles"],queryFn:async()=>(await X.entities.ResourceCategory.list()).filter(ze=>ze.is_active&&ze.applies_to_content_types&&ze.applies_to_content_types.includes("Articles")).sort((ze,Ee)=>(ze.display_order||0)-(Ee.display_order||0)),staleTime:300*1e3,refetchOnWindowFocus:!1}),{data:Z=[]}=me({queryKey:["guest-writers-active"],queryFn:async()=>(await X.entities.GuestWriter.list()).filter(qe=>qe.is_active),staleTime:300*1e3,refetchOnWindowFocus:!1}),{data:Q,isLoading:Y}=me({queryKey:["article",n],queryFn:async()=>(await X.entities.BlogPost.list()).find(qe=>qe.id===n),enabled:r});b.useEffect(()=>{if(Q){if(o(Q.title||""),Q.guest_writer_id)$("guest"),I(Q.guest_writer_id),u(Q.slug||"");else if(W!=null&&W.handle){$("member");const we=`-by-${W.handle}`;let qe=Q.slug||"";qe.endsWith(we)&&(qe=qe.slice(0,-we.length)),u(qe)}m(Q.summary||""),p(Q.content||""),v(Q.feature_image_url||""),j(Q.subcategories||[]),N(Q.tags||[]),T(Q.status||"draft"),k(Q.published_date||new Date().toISOString()),P(Q.seo_title||""),O(Q.seo_description||"")}},[Q,W]),b.useEffect(()=>{if(l&&!r){const we=l.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");u(we)}},[l,r]),b.useEffect(()=>{if(!t||!l||!(W!=null&&W.handle))return;const we=setTimeout(async()=>{if(r){z(!0);try{const qe=`${c}-by-${W.handle}`;await X.entities.BlogPost.update(n,{title:l,slug:qe,summary:d,content:h,feature_image_url:g,subcategories:y,tags:w,status:_,published_date:M,seo_title:A,seo_description:C}),U(new Date)}catch(qe){console.error("Auto-save failed:",qe)}finally{z(!1)}}},3e3);return()=>clearTimeout(we)},[l,c,d,h,g,y,w,_,M,A,C,r,n,t,W]);const K=Le({mutationFn:async(we=!1)=>{if(!t)throw new Error("Member information not available");if(!W)throw new Error("Member record not found");let qe,ze;if(B==="guest"){if(!L)throw new Error("Please select a guest writer");const Ee=Z.find(Ce=>Ce.id===L);if(!Ee)throw new Error("Selected guest writer not found");qe=c,ze={title:l,slug:qe,author_id:null,guest_writer_id:L,author_name:Ee.full_name,summary:d,content:h,feature_image_url:g,subcategories:y,tags:w,status:we?"published":_,published_date:M,seo_title:A,seo_description:C}}else{if(!W.handle)throw new Error("You need a handle to publish articles. Please contact an administrator.");qe=`${c}-by-${W.handle}`,ze={title:l,slug:qe,author_id:W.id,guest_writer_id:null,author_name:`${t.first_name} ${t.last_name}`,summary:d,content:h,feature_image_url:g,subcategories:y,tags:w,status:we?"published":_,published_date:M,seo_title:A,seo_description:C}}return r?await X.entities.BlogPost.update(n,ze):await X.entities.BlogPost.create(ze)},onSuccess:(we,qe)=>{a.invalidateQueries({queryKey:["articles"]}),te.success(qe?"Article published successfully!":"Article saved successfully!"),U(new Date),r||(window.location.href=`${Pe("ArticleEditor")}?id=${we.id}`)},onError:we=>{te.error(we.message||"Failed to save article")}}),ae=Le({mutationFn:()=>X.entities.BlogPost.delete(n),onSuccess:()=>{a.invalidateQueries({queryKey:["articles"]}),te.success("Article deleted successfully"),window.location.href=Pe("Articles")},onError:()=>{te.error("Failed to delete article")}}),se=async we=>{var ze;const qe=(ze=we.target.files)==null?void 0:ze[0];if(qe){R(!0);try{const{file_url:Ee}=await X.integrations.Core.UploadFile({file:qe});v(Ee),te.success("Image uploaded successfully")}catch{te.error("Failed to upload image")}finally{R(!1)}}},de=()=>{const we=document.createElement("input");we.type="file",we.accept="image/*",we.onchange=async qe=>{var Ee,Ce;const ze=(Ee=qe.target.files)==null?void 0:Ee[0];if(ze)try{const{file_url:Ge}=await X.integrations.Core.UploadFile({file:ze}),Ye=(Ce=i.current)==null?void 0:Ce.getEditor();if(Ye){const De=Ye.getSelection(!0);Ye.insertEmbed(De.index,"image",Ge)}te.success("Image inserted")}catch{te.error("Failed to upload image")}},we.click()},ue=b.useMemo(()=>({toolbar:{container:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],["blockquote","code-block"],["link","image"],["clean"]],handlers:{image:de}}}),[]),oe=()=>{window.confirm("Are you sure you want to delete this article? This action cannot be undone.")&&ae.mutate()};if(!t)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-slate-600",children:"Loading..."})});if(r&&(Y||!W))return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-slate-600",children:"Loading article..."})});if(!(W!=null&&W.handle))return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx(le,{className:"border-amber-200 shadow-sm",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Handle Required"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"You need a unique handle to create or edit articles. This handle will be part of your article URLs."}),e.jsx("p",{className:"text-sm text-slate-500",children:"Please contact an administrator to get a handle assigned to your account."})]})})})});const pe=B==="guest"?c:`${c}-by-${W.handle}`,je=Z.find(we=>we.id===L);return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs(Ht,{to:Pe("Articles"),className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900",children:[e.jsx(ll,{className:"w-4 h-4"}),"Back to Articles"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[F&&e.jsxs("span",{className:"text-sm text-slate-500 flex items-center gap-2",children:[e.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}),V&&!F&&e.jsxs("span",{className:"text-sm text-slate-500 flex items-center gap-2",children:[e.jsx(Jn,{className:"w-4 h-4 text-green-600"}),"Saved ",Mt(V,"h:mm a")]}),e.jsxs(J,{variant:"outline",onClick:()=>K.mutate(!1),disabled:K.isPending||!l||!c,className:"gap-2",children:[e.jsx(un,{className:"w-4 h-4"}),"Save Draft"]}),e.jsx(J,{onClick:()=>K.mutate(!0),disabled:K.isPending||!l||!c,className:"bg-blue-600 hover:bg-blue-700 gap-2",children:_==="published"?"Update":"Publish"})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsxs(ce,{className:"pt-6 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"title",className:"text-base font-semibold",children:"Article Title"}),e.jsx(he,{id:"title",placeholder:"Enter your article title...",value:l,onChange:we=>o(we.target.value),className:"text-2xl font-bold border-0 px-0 focus-visible:ring-0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{className:"text-sm",children:"Article Author"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"authorType",value:"member",checked:B==="member",onChange:we=>$(we.target.value),className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm",children:["Me (",t.first_name," ",t.last_name,")"]})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"authorType",value:"guest",checked:B==="guest",onChange:we=>$(we.target.value),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Guest Writer"})]})]})]}),B==="guest"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"guestWriter",children:"Select Guest Writer"}),e.jsxs("select",{id:"guestWriter",value:L||"",onChange:we=>I(we.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Choose a guest writer..."}),Z.map(we=>e.jsxs("option",{value:we.id,children:[we.full_name," ",we.organization?`(${we.organization})`:""]},we.id))]}),je&&e.jsxs("p",{className:"text-xs text-slate-500",children:[je.email," ",je.job_title&&` ${je.job_title}`]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ee,{htmlFor:"slug",className:"text-sm",children:["URL Slug",B==="member"&&(W==null?void 0:W.handle)&&e.jsxs("span",{className:"text-slate-500 font-normal ml-2",children:["(Your handle: @",W.handle,")"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-slate-500",children:"/articles/"}),e.jsx(he,{id:"slug",placeholder:"article-url-slug",value:c,onChange:we=>u(we.target.value),className:"flex-1"})]}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Final URL: ",e.jsxs("span",{className:"font-mono text-blue-600",children:["/articles/",pe]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"summary",children:"Summary / Excerpt"}),e.jsx(Gt,{id:"summary",placeholder:"Brief description of the article (shown in listings)...",value:d,onChange:we=>m(we.target.value),rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Content"}),e.jsx("div",{style:{height:"500px"},children:e.jsx(dS,{ref:i,theme:"snow",value:h,onChange:p,modules:ue,placeholder:"Start writing your article content here...",style:{height:"450px"}})})]})]})})}),e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsx(Fe,{children:e.jsx(Ue,{className:"text-base",children:"Feature Image"})}),e.jsx(ce,{className:"space-y-4",children:g?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:g,alt:"Feature",className:"w-full h-48 object-cover rounded-lg"}),e.jsx(J,{variant:"destructive",size:"icon",className:"absolute top-2 right-2",onClick:()=>v(""),children:e.jsx(_s,{className:"w-4 h-4"})})]}):e.jsxs("label",{className:"block",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:se,className:"hidden",disabled:E}),e.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-lg p-8 text-center cursor-pointer hover:border-slate-400 transition-colors",children:[E?e.jsx(vt,{className:"w-8 h-8 text-slate-400 mx-auto mb-2 animate-spin"}):e.jsx(Gs,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-slate-600",children:E?"Uploading...":"Click to upload"})]})]})})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsx(Fe,{children:e.jsx(Ue,{className:"text-base",children:"Organization"})}),e.jsxs(ce,{className:"space-y-4",children:[e.jsx(zI,{categories:q,selectedSubcategories:y,onChange:j}),e.jsx(qI,{tags:w,onChange:N})]})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsx(Fe,{children:e.jsx(Ue,{className:"text-base",children:"Publishing"})}),e.jsxs(ce,{className:"space-y-4",children:[e.jsx($I,{value:_,onChange:T}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"published-date",children:"Published Date & Time"}),e.jsx(he,{id:"published-date",type:"datetime-local",value:M?new Date(M).toISOString().slice(0,16):"",onChange:we=>{const qe=we.target.value?new Date(we.target.value).toISOString():new Date().toISOString();k(qe)}}),e.jsx("p",{className:"text-xs text-slate-500",children:"Set a future date to schedule the article. Past dates show when it was originally published."}),M&&new Date(M)>new Date&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx(tn,{className:"w-4 h-4 text-purple-600"}),e.jsxs("p",{className:"text-sm text-purple-900",children:["Scheduled for ",Mt(new Date(M),"MMM d, yyyy h:mm a")]})]})]})]})]}),e.jsx(UI,{seoTitle:A,seoDescription:C,onSeoTitleChange:P,onSeoDescriptionChange:O}),r&&e.jsxs(J,{variant:"destructive",onClick:oe,disabled:ae.isPending,className:"w-full gap-2",children:[e.jsx(os,{className:"w-4 h-4"}),"Delete Article"]})]})]})]})})}function Hde({articleId:t,memberInfo:s,showThumbsUp:n=!0,showThumbsDown:r=!0}){const[a,i]=b.useState(""),[l,o]=b.useState(""),[c,u]=b.useState(""),[d,m]=b.useState(!1),h=Yt();b.useEffect(()=>{if(s)u(s.email);else{let A=sessionStorage.getItem("public_user_id");A||(A=`public_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sessionStorage.setItem("public_user_id",A)),u(A)}},[s]);const{data:p=[],isLoading:g}=me({queryKey:["article-comments",t],queryFn:async()=>(await X.entities.ArticleComment.list("-created_date")).filter(P=>P.article_id===t),enabled:!!t}),{data:v=[]}=me({queryKey:["user-reactions",c],queryFn:async()=>c?(await X.entities.CommentReaction.list()).filter(P=>P.user_identifier===c):[],enabled:!!c}),y=Le({mutationFn:async A=>await X.entities.ArticleComment.create(A),onSuccess:()=>{h.invalidateQueries({queryKey:["article-comments",t]}),i(""),o(""),te.success("Comment added successfully")},onError:()=>{te.error("Failed to add comment")}}),j=Le({mutationFn:async({commentId:A,reactionType:P,currentReaction:C})=>{const O=p.find(k=>k.id===A);if(!O)throw new Error("Comment not found");if(C&&C.reaction_type===P){await X.entities.CommentReaction.delete(C.id);const k=P==="up"?{thumbs_up_count:Math.max(0,(O.thumbs_up_count||0)-1)}:{thumbs_down_count:Math.max(0,(O.thumbs_down_count||0)-1)};return await X.entities.ArticleComment.update(A,k),{action:"removed",reactionType:P}}if(C&&C.reaction_type!==P){await X.entities.CommentReaction.update(C.id,{reaction_type:P});const k=P==="up"?{thumbs_up_count:(O.thumbs_up_count||0)+1,thumbs_down_count:Math.max(0,(O.thumbs_down_count||0)-1)}:{thumbs_down_count:(O.thumbs_down_count||0)+1,thumbs_up_count:Math.max(0,(O.thumbs_up_count||0)-1)};return await X.entities.ArticleComment.update(A,k),{action:"switched",reactionType:P}}await X.entities.CommentReaction.create({comment_id:A,reaction_type:P,user_identifier:c,is_member:!!s});const M=P==="up"?{thumbs_up_count:(O.thumbs_up_count||0)+1}:{thumbs_down_count:(O.thumbs_down_count||0)+1};return await X.entities.ArticleComment.update(A,M),{action:"added",reactionType:P}},onSuccess:()=>{h.invalidateQueries({queryKey:["article-comments",t]}),h.invalidateQueries({queryKey:["user-reactions",c]})},onError:()=>{te.error("Failed to update reaction")}}),w=async A=>{if(A.preventDefault(),!a.trim()){te.error("Please enter a comment");return}if(!s&&!l.trim()){te.error("Please enter your name");return}m(!0);try{if(!(await X.integrations.Core.InvokeLLM({prompt:`You are a content moderation system. Analyze the following comment for inappropriate content including profanity, hate speech, sexually explicit material, threats, or harassment. 

Comment to analyze: "${a.trim()}"

Respond with your analysis.`,response_json_schema:{type:"object",properties:{is_safe:{type:"boolean",description:"true if content is appropriate, false if it contains inappropriate content"},reason:{type:"string",description:"Brief explanation of why content was flagged (empty if safe)"}}}})).is_safe){m(!1),te.error(e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(RE,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Comment blocked"}),e.jsx("p",{className:"text-sm",children:"Your comment contains inappropriate content and cannot be posted. Please revise and try again."})]})]})}),{duration:5e3});return}const C={article_id:t,content:a.trim(),author_name:s?`${s.first_name} ${s.last_name}`:l.trim(),author_member_id:(s==null?void 0:s.email)||null,is_member:!!s,thumbs_up_count:0,thumbs_down_count:0};y.mutate(C)}catch(P){console.error("Content moderation error:",P),te.error("Failed to verify comment content. Please try again.")}finally{m(!1)}},N=(A,P)=>{const C=v.find(O=>O.comment_id===A);j.mutate({commentId:A,reactionType:P,currentReaction:C})},_=A=>v.find(P=>P.comment_id===A),T=y.isPending||d;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ME,{className:"w-5 h-5 text-slate-600"}),e.jsxs("h3",{className:"text-xl font-semibold text-slate-900",children:["Comments (",p.length,")"]})]}),e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsx(ce,{className:"pt-6",children:e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[!s&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"name",children:"Your Name *"}),e.jsx(he,{id:"name",placeholder:"Enter your name",value:l,onChange:A=>o(A.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"comment",children:s?"Add a comment":"Your Comment *"}),e.jsx(Gt,{id:"comment",placeholder:"Share your thoughts...",value:a,onChange:A=>i(A.target.value),rows:3,required:!0}),e.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:[e.jsx(RE,{className:"w-3 h-3"}),"Comments are automatically checked for inappropriate content"]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(J,{type:"submit",disabled:T,className:"bg-blue-600 hover:bg-blue-700 gap-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Checking content..."]}):y.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Posting..."]}):e.jsxs(e.Fragment,{children:[e.jsx($5,{className:"w-4 h-4"}),"Post Comment"]})})})]})})}),g?e.jsx("div",{className:"space-y-4",children:Array(3).fill(0).map((A,P)=>e.jsx(le,{className:"border-slate-200 animate-pulse",children:e.jsxs(ce,{className:"p-6",children:[e.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/4 mb-3"}),e.jsx("div",{className:"h-3 bg-slate-200 rounded w-full mb-2"}),e.jsx("div",{className:"h-3 bg-slate-200 rounded w-3/4"})]})},P))}):p.length===0?e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(ME,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-600",children:"No comments yet. Be the first to share your thoughts!"})]})}):e.jsx("div",{className:"space-y-4",children:p.map(A=>{const P=_(A.id),C=(P==null?void 0:P.reaction_type)==="up",O=(P==null?void 0:P.reaction_type)==="down";return e.jsx(le,{className:"border-slate-200 shadow-sm hover:shadow-md transition-shadow",children:e.jsx(ce,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold flex-shrink-0",children:A.is_member?e.jsx(Xs,{className:"w-5 h-5"}):A.author_name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold text-slate-900",children:A.author_name}),A.is_member&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full",children:"Member"}),e.jsxs("span",{className:"text-sm text-slate-500",children:[" ",Mt(new Date(A.created_date),"MMM d, yyyy")]})]}),e.jsx("p",{className:"text-slate-700 mb-3 whitespace-pre-wrap break-words",children:A.content}),(n||r)&&e.jsxs("div",{className:"flex items-center gap-4",children:[n&&e.jsxs(J,{variant:"ghost",size:"sm",onClick:()=>N(A.id,"up"),disabled:j.isPending,className:`gap-1 ${C?"text-blue-600 bg-blue-50":"text-slate-600"} hover:text-blue-600 hover:bg-blue-50`,children:[e.jsx(V5,{className:`w-4 h-4 ${C?"fill-blue-600":""}`}),e.jsx("span",{className:"text-sm font-medium",children:A.thumbs_up_count||0})]}),r&&e.jsxs(J,{variant:"ghost",size:"sm",onClick:()=>N(A.id,"down"),disabled:j.isPending,className:`gap-1 ${O?"text-red-600 bg-red-50":"text-slate-600"} hover:text-red-600 hover:bg-red-50`,children:[e.jsx(U5,{className:`w-4 h-4 ${O?"fill-red-600":""}`}),e.jsx("span",{className:"text-sm font-medium",children:A.thumbs_down_count||0})]})]})]})]})})},A.id)})})]})}function Kde({articleId:t,memberInfo:s,showThumbsUp:n=!0,showThumbsDown:r=!0}){const[a,i]=b.useState(""),l=Yt();b.useEffect(()=>{if(s)i(s.email);else{let v=sessionStorage.getItem("public_user_id");v||(v=`public_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sessionStorage.setItem("public_user_id",v)),i(v)}},[s]);const{data:o=[]}=me({queryKey:["article-reactions",t],queryFn:async()=>(await X.entities.ArticleReaction.list()).filter(y=>y.article_id===t),enabled:!!t}),{data:c}=me({queryKey:["user-article-reaction",t,a],queryFn:async()=>a?(await X.entities.ArticleReaction.list()).find(y=>y.article_id===t&&y.user_identifier===a):null,enabled:!!t&&!!a}),u=o.filter(v=>v.reaction_type==="up").length,d=o.filter(v=>v.reaction_type==="down").length,m=Le({mutationFn:async v=>c&&c.reaction_type===v?(await X.entities.ArticleReaction.delete(c.id),{action:"removed"}):c&&c.reaction_type!==v?(await X.entities.ArticleReaction.update(c.id,{reaction_type:v}),{action:"switched"}):(await X.entities.ArticleReaction.create({article_id:t,reaction_type:v,user_identifier:a,is_member:!!s}),{action:"added"}),onSuccess:()=>{l.invalidateQueries({queryKey:["article-reactions",t]}),l.invalidateQueries({queryKey:["user-article-reaction",t,a]})},onError:()=>{te.error("Failed to update reaction")}}),h=v=>{m.mutate(v)},p=(c==null?void 0:c.reaction_type)==="up",g=(c==null?void 0:c.reaction_type)==="down";return e.jsxs("div",{className:"flex items-center gap-3",children:[n&&e.jsxs(J,{variant:"outline",size:"lg",onClick:()=>h("up"),disabled:m.isPending,className:`gap-2 ${p?"bg-blue-50 border-blue-300 text-blue-700 hover:bg-blue-100":"hover:bg-blue-50 hover:border-blue-300 hover:text-blue-700"} transition-all`,children:[e.jsx(V5,{className:`w-5 h-5 ${p?"fill-blue-700":""}`}),e.jsx("span",{className:"text-lg font-semibold",children:u})]}),r&&e.jsxs(J,{variant:"outline",size:"lg",onClick:()=>h("down"),disabled:m.isPending,className:`gap-2 ${g?"bg-red-50 border-red-300 text-red-700 hover:bg-red-100":"hover:bg-red-50 hover:border-red-300 hover:text-red-700"} transition-all`,children:[e.jsx(U5,{className:`w-5 h-5 ${g?"fill-red-700":""}`}),e.jsx("span",{className:"text-lg font-semibold",children:d})]})]})}function WI({memberInfo:t}){console.log("[ArticleView] Component initialized"),console.log("[ArticleView] window.location.href:",window.location.href),console.log("[ArticleView] window.location.search:",window.location.search),console.log("[ArticleView] window.location.hash:",window.location.hash),console.log("[ArticleView] window.location.pathname:",window.location.pathname);const s=new URLSearchParams(window.location.search);console.log("[ArticleView] urlParams created from window.location.search");const n=s.get("slug");console.log("[ArticleView] slug extracted from urlParams:",n);const[r,a]=b.useState(""),[i,l]=b.useState(!1),[o,c]=b.useState(!1),{data:u}=me({queryKey:["article-settings"],queryFn:async()=>{const V=await X.entities.SystemSettings.list();console.log("[ArticleView] All settings fetched:",V.length);const U=V.find(K=>K.setting_key==="article_show_view_count"),B=V.find(K=>K.setting_key==="article_show_author_bio"),$=V.find(K=>K.setting_key==="article_show_awards_label"),L=V.find(K=>K.setting_key==="article_show_about_author_label"),I=V.find(K=>K.setting_key==="article_show_author_organization"),W=V.find(K=>K.setting_key==="article_show_author_email"),q=V.find(K=>K.setting_key==="article_show_author_photo"),Z=V.find(K=>K.setting_key==="article_show_thumbs_up"),Q=V.find(K=>K.setting_key==="article_show_thumbs_down");console.log("[ArticleView] Photo setting found:",q);const Y={showViewCount:(U==null?void 0:U.setting_value)!=="false",showAuthorBio:(B==null?void 0:B.setting_value)!=="false",showAwardsLabel:($==null?void 0:$.setting_value)!=="false",showAboutAuthorLabel:(L==null?void 0:L.setting_value)!=="false",showAuthorOrganization:(I==null?void 0:I.setting_value)!=="false",showAuthorEmail:(W==null?void 0:W.setting_value)!=="false",showAuthorPhoto:(q==null?void 0:q.setting_value)!=="false",showThumbsUp:(Z==null?void 0:Z.setting_value)!=="false",showThumbsDown:(Q==null?void 0:Q.setting_value)!=="false"};return console.log("[ArticleView] Parsed settings:",Y),Y},initialData:{showViewCount:!0,showAuthorBio:!0,showAwardsLabel:!0,showAboutAuthorLabel:!0,showAuthorOrganization:!0,showAuthorEmail:!0,showAuthorPhoto:!0,showThumbsUp:!0,showThumbsDown:!0},refetchOnMount:!0}),d=!!sessionStorage.getItem("agcas_member");b.useEffect(()=>{if(t)a(t.email);else{let V=sessionStorage.getItem("public_user_id");V||(V=`public_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sessionStorage.setItem("public_user_id",V)),a(V)}},[t]);const{data:m,isLoading:h}=me({queryKey:["article-by-slug",n],queryFn:async()=>{console.log("[ArticleView] Fetching article for slug:",n);const U=(await X.entities.BlogPost.list()).find(B=>B.slug===n);return console.log("[ArticleView] Article found:",!!U),console.log("[ArticleView] Article author_id:",U==null?void 0:U.author_id),U},enabled:!!n}),{data:p=0}=me({queryKey:["article-view-count",m==null?void 0:m.id],queryFn:async()=>(await X.entities.ArticleView.list()).filter(U=>U.article_id===m.id).length,enabled:!!(m!=null&&m.id),staleTime:10*1e3}),{data:g}=me({queryKey:["author-member",m==null?void 0:m.author_id],queryFn:async()=>{if(!(m!=null&&m.author_id))return null;const U=(await X.entities.Member.list()).find(B=>B.id===m.author_id);return console.log("[ArticleView] authorMember found:",U),console.log("[ArticleView] authorMember.organization_id:",U==null?void 0:U.organization_id),U},enabled:!!(m!=null&&m.author_id)}),{data:v}=me({queryKey:["guest-writer",m==null?void 0:m.guest_writer_id],queryFn:async()=>m!=null&&m.guest_writer_id?(await X.entities.GuestWriter.list()).find(U=>U.id===m.guest_writer_id):null,enabled:!!(m!=null&&m.guest_writer_id)}),y=v||g,j=!!v,{data:w,isLoading:N,isError:_}=me({queryKey:["author-organization",g==null?void 0:g.organization_id],queryFn:async()=>{if(console.log("[ArticleView] Fetching organization for Zoho ID:",g==null?void 0:g.organization_id),!(g!=null&&g.organization_id))return console.log("[ArticleView] No organization_id, returning null"),null;const V=await X.entities.Organization.list();console.log("[ArticleView] All organizations:",V.length),console.log("[ArticleView] Looking for org with zoho_account_id:",g.organization_id);const U=V.find(B=>B.zoho_account_id===g.organization_id);return console.log("[ArticleView] Found organization:",U),U},enabled:!!(g!=null&&g.organization_id)&&!j,staleTime:1/0,refetchOnWindowFocus:!1,refetchOnMount:!1});console.log("[ArticleView] Query state - orgLoading:",N,"orgError:",_,"authorOrganization:",w);const T=j?v==null?void 0:v.organization:w==null?void 0:w.name,{data:A}=me({queryKey:["author-stats",g==null?void 0:g.id],queryFn:async()=>{if(!(g!=null&&g.id))return{eventsAttended:0,articlesWritten:0,jobsPosted:0};const[V,U,B]=await Promise.all([X.entities.Booking.list(),X.entities.BlogPost.list(),X.entities.JobPosting.list()]),$=V.filter(W=>W.member_id===g.id&&W.status==="confirmed").length,L=U.filter(W=>W.author_id===g.id&&W.status==="published").length,I=B.filter(W=>W.posted_by_member_id===g.id).length;return{eventsAttended:$,articlesWritten:L,jobsPosted:I}},enabled:!!(g!=null&&g.id)&&!j}),{data:P=[]}=me({queryKey:["awards"],queryFn:async()=>(await X.entities.Award.list()).filter(U=>U.is_active).sort((U,B)=>(U.level||0)-(B.level||0))}),{data:C=[]}=me({queryKey:["author-offline-assignments",g==null?void 0:g.id],queryFn:async()=>g!=null&&g.id?(await X.entities.OfflineAwardAssignment.list()).filter(U=>U.member_id===g.id):[],enabled:!!(g!=null&&g.id)}),{data:O=[]}=me({queryKey:["offlineAwards"],queryFn:async()=>(await X.entities.OfflineAward.list()).filter(U=>U.is_active)}),M=Be.useMemo(()=>!A||!P||P.length===0?[]:P.filter(V=>(V.award_type==="events_attended"?A.eventsAttended:V.award_type==="articles_published"?A.articlesWritten:V.award_type==="jobs_posted"?A.jobsPosted:0)>=V.threshold),[A,P]),k=Be.useMemo(()=>!C||C.length===0||!O?[]:C.map(V=>O.find(U=>U.id===V.offline_award_id)).filter(Boolean).sort((V,U)=>(V.level||0)-(U.level||0)),[C,O]),E=Le({mutationFn:async()=>{if(!m||!r||i)return;(await X.entities.ArticleView.list()).some(B=>B.article_id===m.id&&B.user_identifier===r)||(await X.entities.ArticleView.create({article_id:m.id,user_identifier:r,is_member:!!t}),l(!0))}});b.useEffect(()=>{m&&r&&!i&&E.mutate()},[m,r,i]);const R=()=>{const U=`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(window.location.href)}`;window.open(U,"_blank","width=600,height=600")},F=()=>{const V=encodeURIComponent((m==null?void 0:m.title)||"Check out this article"),U=encodeURIComponent(`I thought you might find this article interesting:

${(m==null?void 0:m.title)||""}

${(m==null?void 0:m.summary)||""}

${window.location.href}`);window.location.href=`mailto:?subject=${V}&body=${U}`};if(h)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-slate-600",children:"Loading article..."})});if(!m)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center py-16",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Article not found"}),e.jsx(Ht,{to:Pe(d?"Articles":"PublicArticles"),children:e.jsx(J,{children:"Back to Articles"})})]})});const z=t&&m.author_id===t.id;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs(Ht,{to:Pe(d?"Articles":"PublicArticles"),className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900",children:[e.jsx(ll,{className:"w-4 h-4"}),"Back to Articles"]}),z&&e.jsx(Ht,{to:`${Pe("ArticleEditor")}?id=${m.id}`,children:e.jsxs(J,{variant:"outline",className:"gap-2",children:[e.jsx(gi,{className:"w-4 h-4"}),"Edit"]})})]}),e.jsxs(le,{className:"border-slate-200 shadow-lg mb-8",children:[m.feature_image_url&&e.jsx("div",{className:"h-96 overflow-hidden rounded-t-lg",children:e.jsx("img",{src:m.feature_image_url,alt:m.title,className:"w-full h-full object-cover"})}),e.jsxs(ce,{className:"pt-8 pb-12 px-8 md:px-12",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-slate-600 mb-6",children:[m.subcategories&&m.subcategories.length>0&&e.jsxs(e.Fragment,{children:[m.subcategories.slice(0,3).map((V,U)=>e.jsx(ye,{variant:"secondary",className:"bg-blue-100 text-blue-700",children:V},U)),m.subcategories.length>3&&e.jsxs(ye,{variant:"secondary",className:"bg-slate-100 text-slate-700",children:["+",m.subcategories.length-3," more"]})]}),(u==null?void 0:u.showViewCount)&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(gr,{className:"w-4 h-4 text-purple-600"}),e.jsxs("span",{className:"font-medium",children:[p," ",p===1?"view":"views"]})]}),m.published_date&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ns,{className:"w-4 h-4"}),e.jsx("span",{children:Mt(new Date(m.published_date),"MMMM d, yyyy")})]})]}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-slate-900 mb-6",children:m.title}),m.summary&&e.jsx("p",{className:"text-xl text-slate-600 mb-8 leading-relaxed",children:m.summary}),y&&e.jsxs("div",{className:"mb-8 p-6 bg-gradient-to-br from-slate-50 to-blue-50 rounded-lg border border-slate-200",children:[(u==null?void 0:u.showAboutAuthorLabel)&&e.jsx("h4",{className:"text-sm font-semibold text-slate-700 mb-4",children:"About the author"}),e.jsxs("div",{className:"flex items-start gap-4",children:[(u==null?void 0:u.showAuthorPhoto)&&e.jsx("div",{className:"flex-shrink-0",children:y.profile_photo_url?e.jsx("img",{src:y.profile_photo_url,alt:j?y.full_name:`${y.first_name} ${y.last_name}`,className:"w-20 h-20 rounded-full object-cover border-2 border-slate-200"}):e.jsx("div",{className:"w-20 h-20 rounded-full bg-slate-200 flex items-center justify-center",children:e.jsx(Xs,{className:"w-10 h-10 text-slate-400"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:j?y.full_name:`${y.first_name} ${y.last_name}`}),(u==null?void 0:u.showAuthorOrganization)&&T&&e.jsx("p",{className:"text-sm text-blue-700 font-medium mt-0.5",children:T}),y.job_title&&e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:y.job_title}),(u==null?void 0:u.showAuthorEmail)&&y.email&&e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:y.email})]})}),(u==null?void 0:u.showAuthorBio)&&y.biography&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:`text-sm text-slate-700 leading-relaxed ${o?"":"line-clamp-3"}`,children:y.biography}),e.jsx("button",{onClick:()=>c(!o),className:"flex items-center gap-1 text-sm text-blue-600 hover:text-blue-700 mt-2 font-medium",children:o?e.jsxs(e.Fragment,{children:["Hide ",e.jsx(S0,{className:"w-4 h-4"})]}):e.jsxs(e.Fragment,{children:["Read More ",e.jsx(Or,{className:"w-4 h-4"})]})})]}),!j&&(M.length>0||k.length>0)&&e.jsxs("div",{className:"mt-4",children:[(u==null?void 0:u.showAwardsLabel)&&e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ln,{className:"w-4 h-4 text-amber-600"}),e.jsx("span",{className:"text-xs font-semibold text-slate-700",children:"Awards"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[M.slice(0,4).map(V=>e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gradient-to-br from-amber-50 to-amber-100 rounded-lg border border-amber-200",title:V.description,children:[V.image_url?e.jsx("img",{src:V.image_url,alt:V.name,className:"w-5 h-5 object-contain"}):e.jsx(Ln,{className:"w-4 h-4 text-amber-600"}),e.jsx("span",{className:"text-xs font-medium text-slate-900",children:V.name})]},V.id)),k.slice(0,4).map(V=>e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg border border-purple-200",title:V.description,children:[V.image_url?e.jsx("img",{src:V.image_url,alt:V.name,className:"w-5 h-5 object-contain"}):e.jsx(Ln,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-xs font-medium text-slate-900",children:V.name})]},V.id)),M.length+k.length>4&&e.jsx("div",{className:"px-3 py-1.5 bg-slate-100 rounded-lg border border-slate-200",children:e.jsxs("span",{className:"text-xs font-medium text-slate-600",children:["+",M.length+k.length-4," more"]})})]})]})]})]})]}),e.jsx("div",{className:"prose prose-lg prose-slate max-w-none",dangerouslySetInnerHTML:{__html:m.content}}),m.tags&&m.tags.length>0&&e.jsx("div",{className:"mt-12 pt-8 border-t border-slate-200",children:e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(Wc,{className:"w-4 h-4 text-slate-400"}),m.tags.map(V=>e.jsx(ye,{variant:"outline",className:"text-sm",children:V},V))]})}),e.jsx("div",{className:"mt-12 pt-8 border-t border-slate-200",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[((u==null?void 0:u.showThumbsUp)||(u==null?void 0:u.showThumbsDown))&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsx("p",{className:"text-sm text-slate-600",children:"Was this article helpful?"}),e.jsx(Kde,{articleId:m.id,memberInfo:t,showThumbsUp:u==null?void 0:u.showThumbsUp,showThumbsDown:u==null?void 0:u.showThumbsDown})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 pt-4 border-t border-slate-200",children:[e.jsx("p",{className:"text-sm text-slate-600",children:"Share this article:"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(J,{variant:"outline",size:"lg",onClick:R,className:"gap-2 hover:bg-[#0077B5] hover:text-white hover:border-[#0077B5] transition-all",children:[e.jsx(qu,{className:"w-5 h-5"}),e.jsx("span",{children:"LinkedIn"})]}),e.jsxs(J,{variant:"outline",size:"lg",onClick:F,className:"gap-2 hover:bg-slate-700 hover:text-white hover:border-slate-700 transition-all",children:[e.jsx(Ms,{className:"w-5 h-5"}),e.jsx("span",{children:"Email"})]})]})]})]})})]})]}),e.jsx(Hde,{articleId:m.id,memberInfo:t,showThumbsUp:u==null?void 0:u.showThumbsUp,showThumbsDown:u==null?void 0:u.showThumbsDown})]})})}function HI(){const t=[{icon:ws,title:"Community",description:"Bringing together careers professionals across UK and Ireland higher education institutions."},{icon:nY,title:"Excellence",description:"Setting high standards for careers guidance and employability support in higher education."},{icon:ZH,title:"Innovation",description:"Championing best practices and innovative approaches to careers education."},{icon:eG,title:"Support",description:"Providing professional development and networking opportunities for our members."}];return e.jsxs("div",{className:"bg-white",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:"About AGCAS"}),e.jsx("p",{className:"text-xl text-blue-100 max-w-3xl",children:"The Association of Graduate Careers Advisory Services represents careers and employability services in higher education across the UK and Ireland."})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-16",children:[e.jsxs("div",{className:"prose prose-lg max-w-none mb-16",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-6",children:"Our Mission"}),e.jsx("p",{className:"text-slate-600 text-lg leading-relaxed mb-8",children:"AGCAS exists to support career development and employability professionals working in higher education. We provide a platform for professional development, networking, and knowledge sharing that enables our members to deliver outstanding support to students and graduates."}),e.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-6",children:"What We Do"}),e.jsx("p",{className:"text-slate-600 text-lg leading-relaxed mb-8",children:"We offer a comprehensive range of services including professional development training, research and best practice guidance, networking events, and advocacy for the careers and employability sector. Our members benefit from access to a supportive community of professionals who share knowledge, resources, and expertise."})]}),e.jsxs("div",{className:"mb-16",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-8 text-center",children:"Our Values"}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map((s,n)=>{const r=s.icon;return e.jsx(le,{className:"border-slate-200 hover:shadow-lg transition-shadow",children:e.jsxs(ce,{className:"p-6 text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4",children:e.jsx(r,{className:"w-8 h-8 text-blue-600"})}),e.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-2",children:s.title}),e.jsx("p",{className:"text-slate-600 text-sm",children:s.description})]})},n)})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-blue-50 rounded-2xl p-8 md:p-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-6",children:"Membership"}),e.jsx("p",{className:"text-slate-600 text-lg leading-relaxed mb-6",children:"AGCAS membership is open to individuals and institutions involved in careers education, information, advice and guidance in higher education. Our members include careers advisers, employability professionals, academics, and other professionals committed to supporting student career development."}),e.jsx("p",{className:"text-slate-600 text-lg leading-relaxed",children:"Join a community of over 1,000 careers professionals and gain access to exclusive training events, research publications, networking opportunities, and much more."})]})]})]})}function KI(){const[t,s]=b.useState({name:"",email:"",subject:"",message:""}),[n,r]=b.useState(!1),a=async i=>{i.preventDefault(),r(!0),setTimeout(()=>{te.success("Thank you for your message! We'll be in touch soon."),s({name:"",email:"",subject:"",message:""}),r(!1)},1e3)};return e.jsxs("div",{className:"bg-white",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:"Contact Us"}),e.jsx("p",{className:"text-xl text-blue-100 max-w-3xl",children:"Get in touch with the AGCAS team. We're here to help with any questions about membership, events, or our services."})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-16",children:e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs(le,{className:"border-slate-200",children:[e.jsx(Fe,{children:e.jsx(Ue,{children:"Get In Touch"})}),e.jsxs(ce,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Ms,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:"Email"}),e.jsx("a",{href:"mailto:info@agcas.org.uk",className:"text-blue-600 hover:text-blue-700",children:"info@agcas.org.uk"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(k0,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:"Phone"}),e.jsx("a",{href:"tel:+441142515750",className:"text-blue-600 hover:text-blue-700",children:"+44 (0)114 251 5750"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Rr,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:"Address"}),e.jsxs("p",{className:"text-slate-600",children:["AGCAS",e.jsx("br",{}),"Sheffield",e.jsx("br",{}),"United Kingdom"]})]})]})]})]}),e.jsx(le,{className:"border-slate-200 bg-gradient-to-br from-blue-50 to-indigo-50",children:e.jsxs(ce,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"Office Hours"}),e.jsxs("p",{className:"text-sm text-slate-600",children:["Monday - Friday",e.jsx("br",{}),"9:00 AM - 5:00 PM (GMT)"]})]})})]}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(le,{className:"border-slate-200",children:[e.jsx(Fe,{children:e.jsx(Ue,{children:"Send Us a Message"})}),e.jsx(ce,{children:e.jsxs("form",{onSubmit:a,className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"name",children:"Name *"}),e.jsx(he,{id:"name",value:t.name,onChange:i=>s({...t,name:i.target.value}),placeholder:"Your name",required:!0})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"email",children:"Email *"}),e.jsx(he,{id:"email",type:"email",value:t.email,onChange:i=>s({...t,email:i.target.value}),placeholder:"your.email@example.com",required:!0})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"subject",children:"Subject *"}),e.jsx(he,{id:"subject",value:t.subject,onChange:i=>s({...t,subject:i.target.value}),placeholder:"What is this regarding?",required:!0})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"message",children:"Message *"}),e.jsx(Gt,{id:"message",value:t.message,onChange:i=>s({...t,message:i.target.value}),placeholder:"Tell us how we can help...",rows:6,required:!0})]}),e.jsx(J,{type:"submit",disabled:n,className:"w-full md:w-auto bg-blue-600 hover:bg-blue-700",children:n?"Sending...":e.jsxs(e.Fragment,{children:[e.jsx($5,{className:"w-4 h-4 mr-2"}),"Send Message"]})})]})})]})})]})})]})}function GI(){const{data:t,isLoading:s}=me({queryKey:["public-events"],queryFn:()=>X.entities.Event.filter({status:"published"},"-start_date",50),initialData:[]});return e.jsxs("div",{className:"bg-white min-h-screen",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:"Upcoming Events"}),e.jsx("p",{className:"text-xl text-blue-100 max-w-3xl",children:"Discover professional development opportunities, training sessions, and networking events for careers professionals in higher education."})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-16",children:s?e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array(6).fill(0).map((n,r)=>e.jsxs(le,{className:"animate-pulse border-slate-200",children:[e.jsx("div",{className:"h-48 bg-slate-200"}),e.jsxs(Fe,{children:[e.jsx("div",{className:"h-6 bg-slate-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded w-full"})]})]},r))}):t.length===0?e.jsx(le,{className:"border-slate-200",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(Ns,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No Upcoming Events"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"Check back soon for new professional development opportunities"})]})}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(n=>{const r=n.start_date?new Date(n.start_date):null,a=n.available_seats===0||n.available_seats===null;return e.jsxs(le,{className:"border-slate-200 hover:shadow-lg transition-shadow overflow-hidden",children:[n.image_url&&e.jsx("div",{className:"h-48 overflow-hidden bg-slate-100",children:e.jsx("img",{src:n.image_url,alt:n.title,className:"w-full h-full object-cover"})}),e.jsxs(Fe,{children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsx(Ue,{className:"text-lg",children:n.title}),n.program_tag&&e.jsx(ye,{className:"bg-blue-100 text-blue-700 border-blue-200 shrink-0",children:n.program_tag})]}),n.description&&e.jsx("p",{className:"text-sm text-slate-600 line-clamp-2",children:n.description})]}),e.jsxs(ce,{className:"space-y-3",children:[r&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(Ns,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{children:Mt(r,"MMM d, yyyy")})]}),r&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(tn,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{children:Mt(r,"h:mm a")})]}),n.location&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(Rr,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{className:"line-clamp-1",children:n.location})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ws,{className:"w-4 h-4 text-slate-400"}),a?e.jsx("span",{className:"text-green-600 font-medium",children:"Open Registration"}):n.available_seats>0?e.jsxs("span",{className:"text-green-600 font-medium",children:[n.available_seats," seats available"]}):e.jsx("span",{className:"text-red-600 font-medium",children:"Sold out"})]}),e.jsx("div",{className:"pt-3 border-t border-slate-100",children:e.jsx(J,{className:"w-full bg-blue-600 hover:bg-blue-700",onClick:()=>window.location.href=Pe("Home"),children:"Member Login to Book"})})]})]},n.id)})})})]})}const Gde=[{id:"page_user_BuyProgramTickets",label:"Buy Tickets",category:"User Navigation"},{id:"page_user_Events",label:"Browse Events",category:"User Navigation"},{id:"page_user_Bookings",label:"Bookings",category:"User Navigation"},{id:"page_user_MyTickets",label:"My Tickets",category:"User Navigation"},{id:"page_user_Balances",label:"Balances",category:"User Navigation"},{id:"page_user_History",label:"History",category:"User Navigation"},{id:"page_user_Team",label:"Team",category:"User Navigation"},{id:"page_user_MemberDirectory",label:"Member Directory",category:"User Navigation"},{id:"page_user_OrganisationDirectory",label:"Organisation Directory",category:"User Navigation"},{id:"page_user_Resources",label:"Resources",category:"User Navigation"},{id:"page_user_ArticlesSection",label:"Articles Section (Parent)",category:"User Navigation"},{id:"page_user_MyArticles",label:"My Articles",category:"User Navigation"},{id:"page_user_Articles",label:"Articles",category:"User Navigation"},{id:"page_user_News",label:"News",category:"User Navigation"},{id:"page_user_MyJobPostings",label:"My Job Postings",category:"User Navigation"},{id:"page_user_Preferences",label:"Preferences",category:"User Navigation"},{id:"page_user_Support",label:"Support",category:"User Navigation"},{id:"page_admin_NewsSection",label:"News Section (Parent)",category:"Admin Navigation"},{id:"page_admin_MyNews",label:"News Management",category:"Admin Navigation"},{id:"page_admin_NewsSettings",label:"News Settings",category:"Admin Navigation"},{id:"page_admin_ArticlesSection",label:"Articles Section (Parent)",category:"Admin Navigation"},{id:"page_admin_ArticleManagement",label:"All Articles",category:"Admin Navigation"},{id:"page_admin_ArticlesSettings",label:"Articles Settings",category:"Admin Navigation"},{id:"page_admin_RoleManagement",label:"Role Management",category:"Admin Navigation"},{id:"page_admin_MemberRoleAssignment",label:"Assign Member Roles",category:"Admin Navigation"},{id:"page_admin_TeamMemberManagement",label:"Team Members",category:"Admin Navigation"},{id:"page_admin_MemberHandleManagement",label:"Member Handle Management",category:"Admin Navigation"},{id:"page_admin_MemberDirectorySettings",label:"Member Directory Settings",category:"Admin Navigation"},{id:"page_admin_DiscountCodeManagement",label:"Discount Codes",category:"Admin Navigation"},{id:"page_admin_EventSettings",label:"Event Settings",category:"Admin Navigation"},{id:"page_admin_TicketSalesAnalytics",label:"Ticket Sales Analytics",category:"Admin Navigation"},{id:"page_admin_AwardManagement",label:"Award Management",category:"Admin Navigation"},{id:"page_admin_CategoryManagement",label:"Category Management",category:"Admin Navigation"},{id:"page_admin_ResourceSettings",label:"Category Setup",category:"Admin Navigation"},{id:"page_admin_ResourcesSection",label:"Resource Management Section (Parent)",category:"Admin Navigation"},{id:"page_admin_ResourceManagement",label:"Resources",category:"Admin Navigation"},{id:"page_admin_TagManagement",label:"Tags",category:"Admin Navigation"},{id:"page_admin_FileManagement",label:"File Repository",category:"Admin Navigation"},{id:"page_admin_JobBoardSection",label:"Job Board Section (Parent)",category:"Admin Navigation"},{id:"page_admin_JobPostingManagement",label:"Job Postings",category:"Admin Navigation"},{id:"page_admin_JobBoardSettings",label:"Job Board Settings",category:"Admin Navigation"},{id:"page_admin_PageBuilder",label:"Page Builder Section (Parent)",category:"Admin Navigation"},{id:"page_admin_IEditPageManagement",label:"Pages",category:"Admin Navigation"},{id:"page_admin_IEditTemplateManagement",label:"Element Templates",category:"Admin Navigation"},{id:"page_admin_PageBannerManagement",label:"Page Banners",category:"Admin Navigation"},{id:"page_admin_NavigationManagement",label:"Navigation Items",category:"Admin Navigation"},{id:"page_admin_ButtonElements",label:"Buttons",category:"Admin Navigation"},{id:"page_admin_ButtonStyleManagement",label:"Button Styles",category:"Admin Navigation"},{id:"page_admin_WallOfFameManagement",label:"Wall of Fame",category:"Admin Navigation"},{id:"page_admin_InstalledFonts",label:"Installed Fonts",category:"Admin Navigation"},{id:"page_admin_FormsSection",label:"Forms Section (Parent)",category:"Admin Navigation"},{id:"page_admin_FormManagement",label:"Form Management",category:"Admin Navigation"},{id:"page_admin_FormSubmissions",label:"View Submissions",category:"Admin Navigation"},{id:"page_admin_FloaterManagement",label:"Floater Management",category:"Admin Navigation"},{id:"page_admin_TeamInviteSettings",label:"Team Invite Settings",category:"Admin Navigation"},{id:"page_admin_DataExport",label:"Data Export",category:"Admin Navigation"},{id:"page_admin_SiteMap",label:"Site Map",category:"Admin Navigation"},{id:"page_admin_SupportManagement",label:"Support Management",category:"Admin Navigation"},{id:"page_admin_PortalNavigationManagement",label:"Portal Navigation (Legacy)",category:"Admin Navigation"},{id:"page_admin_PortalMenuManagement",label:"Portal Menu Management",category:"Admin Navigation"},{id:"page_admin_TourManagement",label:"Tour Management",category:"Admin Navigation"},{id:"page_admin_MemberGroupManagement",label:"Member Groups",category:"Admin Navigation"},{id:"page_Dashboard",label:"Dashboard Page",category:"Standalone Pages"},{id:"page_EventDetails",label:"Event Details Page",category:"Standalone Pages"},{id:"page_ArticleEditor",label:"Article Editor Page",category:"Standalone Pages"},{id:"page_ArticleView",label:"Article View Page",category:"Standalone Pages"},{id:"page_NewsEditor",label:"News Editor Page",category:"Standalone Pages"},{id:"page_NewsView",label:"News View Page",category:"Standalone Pages"},{id:"page_IEditPageEditor",label:"Page Builder Editor",category:"Standalone Pages"},{id:"page_GuestWriterManagement",label:"Guest Writer Management",category:"Standalone Pages"},{id:"page_OrganisationDirectorySettings",label:"Organisation Directory Settings",category:"Standalone Pages"},{id:"element_EventDescription",label:"Event Description Element",category:"UI Elements"},{id:"element_EventsPageDescription",label:"Events Page Description",category:"UI Elements"},{id:"element_EventsSearch",label:"Events Page Search & Filters",category:"UI Elements"},{id:"element_SelfRegistration",label:"Self Registration for Events",category:"UI Elements"},{id:"element_PurchaseButton",label:"Purchase Button",category:"UI Elements"},{id:"element_AvailableSeatsDisplay",label:"Event Available Seats Display",category:"UI Elements"},{id:"element_FloatersDisplay",label:"Floater Elements Display",category:"UI Elements"},{id:"element_NewsTickerBar",label:"News Ticker Bar",category:"UI Elements"},{id:"payment_training_vouchers",label:"Use Training Vouchers for Purchases",category:"Payment Options"},{id:"payment_training_fund",label:"Use Training Fund for Purchases",category:"Payment Options"}];function YI({isAdmin:t,memberRole:s,isFeatureExcluded:n}){const[r,a]=b.useState(null),[i,l]=b.useState(!1),[o,c]=b.useState(!1),[u,d]=b.useState(null),m=Yt();b.useEffect(()=>{s!=null&&(!t||n("page_RoleManagement"))&&(window.location.href=Pe("Events"))},[t,s,n]);const{data:h,isLoading:p}=me({queryKey:["roles"],queryFn:()=>X.entities.Role.list(),initialData:[]}),g=Le({mutationFn:P=>X.entities.Role.create(P),onSuccess:()=>{m.invalidateQueries({queryKey:["roles"]}),l(!1),a(null),te.success("Role created successfully")},onError:P=>{te.error("Failed to create role: "+P.message)}}),v=Le({mutationFn:({id:P,roleData:C})=>X.entities.Role.update(P,C),onSuccess:()=>{m.invalidateQueries({queryKey:["roles"]}),l(!1),a(null),te.success("Role updated successfully")},onError:P=>{te.error("Failed to update role: "+P.message)}}),y=Le({mutationFn:P=>X.entities.Role.delete(P),onSuccess:()=>{m.invalidateQueries({queryKey:["roles"]}),c(!1),d(null),te.success("Role deleted successfully")},onError:P=>{te.error("Failed to delete role: "+P.message)}}),j=()=>{a({name:"",description:"",excluded_features:[],is_default:!1,is_admin:!1,show_tours:!0,default_landing_page:"Events",layout_theme:"default"}),l(!0)},w=P=>{a({...P}),l(!0)},N=P=>{d(P),c(!0)},_=()=>{if(!r.name.trim()){te.error("Role name is required");return}r.id?v.mutate({id:r.id,roleData:{name:r.name,description:r.description,excluded_features:r.excluded_features,is_default:r.is_default,is_admin:r.is_admin,show_tours:r.show_tours,default_landing_page:r.default_landing_page||"Events",layout_theme:r.layout_theme||"default",requires_effective_from_date:r.requires_effective_from_date||!1}}):g.mutate({name:r.name,description:r.description,excluded_features:r.excluded_features,is_default:r.is_default,is_admin:r.is_admin,show_tours:r.show_tours,default_landing_page:r.default_landing_page||"Events",layout_theme:r.layout_theme||"default",requires_effective_from_date:r.requires_effective_from_date||!1})},T=P=>{const C=r.excluded_features||[],O=C.includes(P)?C.filter(M=>M!==P):[...C,P];a({...r,excluded_features:O})},A=Gde.reduce((P,C)=>(P[C.category]||(P[C.category]=[]),P[C.category].push(C),P),{});return s==null?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-slate-600",children:"Loading..."})}):!t||n("page_RoleManagement")?null:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Role Management"}),e.jsx("p",{className:"text-slate-600",children:"Define roles and control what features members can access"})]}),e.jsxs(J,{onClick:j,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Create Role"]})]}),p?e.jsx("div",{className:"text-center py-12",children:"Loading roles..."}):h.length===0?e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(In,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No Roles Yet"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"Create your first role to start managing member access"}),e.jsxs(J,{onClick:j,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Create First Role"]})]})}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(P=>e.jsxs(le,{className:"border-slate-200 shadow-sm hover:shadow-md transition-shadow",children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(In,{className:"w-5 h-5 text-blue-600"}),e.jsx(Ue,{className:"text-lg",children:P.name})]}),e.jsxs("div",{className:"flex gap-2 mt-2 flex-wrap",children:[P.is_default&&e.jsx(ye,{className:"bg-green-100 text-green-700",children:"Default Role"}),P.is_admin&&e.jsx(ye,{className:"bg-amber-100 text-amber-700",children:"Administrator"}),P.show_tours&&e.jsx(ye,{className:"bg-purple-100 text-purple-700",children:"Tours Enabled"}),P.requires_effective_from_date&&e.jsx(ye,{className:"bg-blue-100 text-blue-700",children:"Effective From Required"})]})]})})}),e.jsxs(ce,{className:"pt-4",children:[P.description&&e.jsx("p",{className:"text-sm text-slate-600 mb-4",children:P.description}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsx("div",{className:"text-xs font-medium text-slate-500 uppercase",children:"Restrictions"}),P.excluded_features&&P.excluded_features.length>0?e.jsxs("div",{className:"text-sm text-slate-700",children:[P.excluded_features.length," feature",P.excluded_features.length>1?"s":""," restricted"]}):e.jsx("div",{className:"text-sm text-green-600",children:"Full access"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(J,{variant:"outline",size:"sm",onClick:()=>w(P),className:"flex-1",children:[e.jsx(As,{className:"w-3 h-3 mr-1"}),"Edit"]}),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>N(P),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(os,{className:"w-3 h-3"})})]})]})]},P.id))}),e.jsx(Ct,{open:i,onOpenChange:l,children:e.jsxs(Nt,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsx(kt,{children:e.jsx(Et,{children:r!=null&&r.id?"Edit Role":"Create New Role"})}),r&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"role-name",children:"Role Name *"}),e.jsx(he,{id:"role-name",value:r.name,onChange:P=>a({...r,name:P.target.value}),placeholder:"e.g., Standard Member"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"role-description",children:"Description"}),e.jsx(Gt,{id:"role-description",value:r.description||"",onChange:P=>a({...r,description:P.target.value}),placeholder:"Describe what this role includes...",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"landing-page",children:"Default Landing Page"}),e.jsxs(Ke,{value:r.default_landing_page||"Events",onValueChange:P=>a({...r,default_landing_page:P}),children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:"Select landing page"})}),e.jsxs(We,{children:[e.jsx(re,{value:"Events",children:"Browse Events"}),e.jsx(re,{value:"Dashboard",children:"Dashboard"}),e.jsx(re,{value:"Bookings",children:"Bookings"}),e.jsx(re,{value:"Balances",children:"Balances"}),e.jsx(re,{value:"BuyProgramTickets",children:"Buy Program Tickets"}),e.jsx(re,{value:"History",children:"History"}),e.jsx(re,{value:"Resources",children:"Resources"}),e.jsx(re,{value:"Articles",children:"Articles"}),e.jsx(re,{value:"MyArticles",children:"My Articles"}),e.jsx(re,{value:"MyJobPostings",children:"My Job Postings"}),e.jsx(re,{value:"Team",children:"Team"}),e.jsx(re,{value:"MemberDirectory",children:"Member Directory"}),e.jsx(re,{value:"OrganisationDirectory",children:"Organisation Directory"})]})]}),e.jsx("p",{className:"text-xs text-slate-500",children:"The page users with this role will see after logging in"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"layout-theme",children:"Layout Theme"}),e.jsxs(Ke,{value:r.layout_theme||"default",onValueChange:P=>a({...r,layout_theme:P}),children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:"Select theme"})}),e.jsxs(We,{children:[e.jsx(re,{value:"default",children:"Default Theme"}),e.jsx(re,{value:"new_header",children:"New Header Theme"}),e.jsx(re,{value:"bare_home",children:"Bare Home Page Layout"})]})]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Visual theme/layout to apply for users with this role"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-slate-50 rounded-lg",children:[e.jsx(cs,{id:"is-default",checked:r.is_default||!1,onCheckedChange:P=>a({...r,is_default:P})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ee,{htmlFor:"is-default",className:"cursor-pointer",children:"Default Role"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Automatically assign this role to new members"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-amber-50 rounded-lg border border-amber-200",children:[e.jsx(cs,{id:"is-admin",checked:r.is_admin||!1,onCheckedChange:P=>a({...r,is_admin:P})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ee,{htmlFor:"is-admin",className:"cursor-pointer font-medium text-amber-900",children:"Administrator Role"}),e.jsx("p",{className:"text-xs text-amber-700 mt-1",children:"Grant full admin access to manage roles and members"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx(cs,{id:"show-tours",checked:r.show_tours!==!1,onCheckedChange:P=>a({...r,show_tours:P})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ee,{htmlFor:"show-tours",className:"cursor-pointer font-medium text-purple-900",children:"Enable Page Tours"}),e.jsx("p",{className:"text-xs text-purple-700 mt-1",children:"Show guided tours to users with this role"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx(cs,{id:"requires-effective-from",checked:r.requires_effective_from_date||!1,onCheckedChange:P=>a({...r,requires_effective_from_date:P})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ee,{htmlFor:"requires-effective-from",className:"cursor-pointer font-medium text-blue-900",children:"Requires Effective From Date"}),e.jsx("p",{className:"text-xs text-blue-700 mt-1",children:'Require an "Effective From" date when assigning this role (e.g., for Alumni)'})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ee,{className:"text-base",children:"Feature Restrictions"}),e.jsx("p",{className:"text-sm text-slate-500 mt-1 mb-4",children:"Select features that members with this role should NOT have access to"})]}),Object.entries(A).map(([P,C])=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-700",children:P}),e.jsx("div",{className:"space-y-2 pl-4",children:C.map(O=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors",children:[e.jsx(cs,{id:O.id,checked:(r.excluded_features||[]).includes(O.id),onCheckedChange:()=>T(O.id)}),e.jsx(ee,{htmlFor:O.id,className:"flex-1 cursor-pointer",children:O.label})]},O.id))})]},P))]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>{l(!1),a(null)},children:"Cancel"}),e.jsx(J,{onClick:_,disabled:g.isPending||v.isPending,className:"bg-blue-600 hover:bg-blue-700",children:r!=null&&r.id?"Update Role":"Create Role"})]})]})}),e.jsx(Ct,{open:o,onOpenChange:c,children:e.jsxs(Nt,{children:[e.jsx(kt,{children:e.jsx(Et,{children:"Delete Role"})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-50 rounded-lg",children:[e.jsx(vs,{className:"w-5 h-5 text-red-600 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-red-900 font-medium",children:['Are you sure you want to delete "',u==null?void 0:u.name,'"?']}),e.jsx("p",{className:"text-xs text-red-700 mt-1",children:"Members assigned to this role will lose their role assignment."})]})]})}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>{c(!1),d(null)},children:"Cancel"}),e.jsx(J,{onClick:()=>u&&y.mutate(u.id),disabled:y.isPending,className:"bg-red-600 hover:bg-red-700",children:"Delete Role"})]})]})})]})})}function Yde(t){const s=Qde(t),n=b.forwardRef((r,a)=>{const{children:i,...l}=r,o=b.Children.toArray(i),c=o.find(Xde);if(c){const u=c.props.children,d=o.map(m=>m===c?b.Children.count(u)>1?b.Children.only(null):b.isValidElement(u)?u.props.children:null:m);return e.jsx(s,{...l,ref:a,children:b.isValidElement(u)?b.cloneElement(u,void 0,d):null})}return e.jsx(s,{...l,ref:a,children:i})});return n.displayName=`${t}.Slot`,n}function Qde(t){const s=b.forwardRef((n,r)=>{const{children:a,...i}=n;if(b.isValidElement(a)){const l=eue(a),o=Zde(i,a.props);return a.type!==b.Fragment&&(o.ref=r?Fr(r,l):l),b.cloneElement(a,o)}return b.Children.count(a)>1?b.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var Jde=Symbol("radix.slottable");function Xde(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Jde}function Zde(t,s){const n={...s};for(const r in s){const a=t[r],i=s[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...o)=>{const c=i(...o);return a(...o),c}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...t,...n}}function eue(t){var r,a;let s=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var pv="Popover",[QI]=vr(pv,[ec]),lp=ec(),[tue,rc]=QI(pv),JI=t=>{const{__scopePopover:s,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:l=!1}=t,o=lp(s),c=b.useRef(null),[u,d]=b.useState(!1),[m,h]=Ja({prop:r,defaultProp:a??!1,onChange:i,caller:pv});return e.jsx(q0,{...o,children:e.jsx(tue,{scope:s,contentId:Vn(),triggerRef:c,open:m,onOpenChange:h,onOpenToggle:b.useCallback(()=>h(p=>!p),[h]),hasCustomAnchor:u,onCustomAnchorAdd:b.useCallback(()=>d(!0),[]),onCustomAnchorRemove:b.useCallback(()=>d(!1),[]),modal:l,children:n})})};JI.displayName=pv;var XI="PopoverAnchor",sue=b.forwardRef((t,s)=>{const{__scopePopover:n,...r}=t,a=rc(XI,n),i=lp(n),{onCustomAnchorAdd:l,onCustomAnchorRemove:o}=a;return b.useEffect(()=>(l(),()=>o()),[l,o]),e.jsx(Xf,{...i,...r,ref:s})});sue.displayName=XI;var ZI="PopoverTrigger",eB=b.forwardRef((t,s)=>{const{__scopePopover:n,...r}=t,a=rc(ZI,n),i=lp(n),l=xs(s,a.triggerRef),o=e.jsx(Ut.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":aB(a.open),...r,ref:l,onClick:jt(t.onClick,a.onOpenToggle)});return a.hasCustomAnchor?o:e.jsx(Xf,{asChild:!0,...i,children:o})});eB.displayName=ZI;var uS="PopoverPortal",[nue,rue]=QI(uS,{forceMount:void 0}),tB=t=>{const{__scopePopover:s,forceMount:n,children:r,container:a}=t,i=rc(uS,s);return e.jsx(nue,{scope:s,forceMount:n,children:e.jsx(yr,{present:n||i.open,children:e.jsx(hh,{asChild:!0,container:a,children:r})})})};tB.displayName=uS;var Ju="PopoverContent",sB=b.forwardRef((t,s)=>{const n=rue(Ju,t.__scopePopover),{forceMount:r=n.forceMount,...a}=t,i=rc(Ju,t.__scopePopover);return e.jsx(yr,{present:r||i.open,children:i.modal?e.jsx(iue,{...a,ref:s}):e.jsx(lue,{...a,ref:s})})});sB.displayName=Ju;var aue=Yde("PopoverContent.RemoveScroll"),iue=b.forwardRef((t,s)=>{const n=rc(Ju,t.__scopePopover),r=b.useRef(null),a=xs(s,r),i=b.useRef(!1);return b.useEffect(()=>{const l=r.current;if(l)return T0(l)},[]),e.jsx(Gf,{as:aue,allowPinchZoom:!0,children:e.jsx(nB,{...t,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:jt(t.onCloseAutoFocus,l=>{var o;l.preventDefault(),i.current||(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:jt(t.onPointerDownOutside,l=>{const o=l.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0,u=o.button===2||c;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:jt(t.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})})}),lue=b.forwardRef((t,s)=>{const n=rc(Ju,t.__scopePopover),r=b.useRef(!1),a=b.useRef(!1);return e.jsx(nB,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var l,o;(l=t.onCloseAutoFocus)==null||l.call(t,i),i.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(l))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),nB=b.forwardRef((t,s)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...m}=t,h=rc(Ju,n),p=lp(n);return E0(),e.jsx(Kf,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:e.jsx(uh,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:d,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:e.jsx(z0,{"data-state":aB(h.open),role:"dialog",id:h.contentId,...p,...m,ref:s,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),rB="PopoverClose",oue=b.forwardRef((t,s)=>{const{__scopePopover:n,...r}=t,a=rc(rB,n);return e.jsx(Ut.button,{type:"button",...r,ref:s,onClick:jt(t.onClick,()=>a.onOpenChange(!1))})});oue.displayName=rB;var cue="PopoverArrow",due=b.forwardRef((t,s)=>{const{__scopePopover:n,...r}=t,a=lp(n);return e.jsx($0,{...a,...r,ref:s})});due.displayName=cue;function aB(t){return t?"open":"closed"}var uue=JI,hue=eB,mue=tB,iB=sB;const lB=uue,oB=hue,hS=b.forwardRef(({className:t,align:s="center",sideOffset:n=4,...r},a)=>e.jsx(mue,{children:e.jsx(iB,{ref:a,align:s,sideOffset:n,className:tt("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));hS.displayName=iB.displayName;var ss=function(){return ss=Object.assign||function(s){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[i]=n[i])}return s},ss.apply(this,arguments)};function fue(t,s){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&s.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)s.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function cB(t,s,n){for(var r=0,a=s.length,i;r<a;r++)(i||!(r in s))&&(i||(i=Array.prototype.slice.call(s,0,r)),i[r]=s[r]);return t.concat(i||Array.prototype.slice.call(s))}function op(t){return t.mode==="multiple"}function cp(t){return t.mode==="range"}function xv(t){return t.mode==="single"}var pue={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function xue(t,s){return Mt(t,"LLLL y",s)}function gue(t,s){return Mt(t,"d",s)}function vue(t,s){return Mt(t,"LLLL",s)}function yue(t){return"".concat(t)}function bue(t,s){return Mt(t,"cccccc",s)}function jue(t,s){return Mt(t,"yyyy",s)}var wue=Object.freeze({__proto__:null,formatCaption:xue,formatDay:gue,formatMonthCaption:vue,formatWeekNumber:yue,formatWeekdayName:bue,formatYearCaption:jue}),Nue=function(t,s,n){return Mt(t,"do MMMM (EEEE)",n)},_ue=function(){return"Month: "},Sue=function(){return"Go to next month"},Cue=function(){return"Go to previous month"},kue=function(t,s){return Mt(t,"cccc",s)},Eue=function(t){return"Week n. ".concat(t)},Pue=function(){return"Year: "},Tue=Object.freeze({__proto__:null,labelDay:Nue,labelMonthDropdown:_ue,labelNext:Sue,labelPrevious:Cue,labelWeekNumber:Eue,labelWeekday:kue,labelYearDropdown:Pue});function Aue(){var t="buttons",s=pue,n=_2,r={},a={},i=1,l={},o=new Date;return{captionLayout:t,classNames:s,formatters:wue,labels:Tue,locale:n,modifiersClassNames:r,modifiers:a,numberOfMonths:i,styles:l,today:o,mode:"default"}}function Mue(t){var s=t.fromYear,n=t.toYear,r=t.fromMonth,a=t.toMonth,i=t.fromDate,l=t.toDate;return r?i=na(r):s&&(i=new Date(s,0,1)),a?l=tv(a):n&&(l=new Date(n,11,31)),{fromDate:i?Wu(i):void 0,toDate:l?Wu(l):void 0}}var dB=b.createContext(void 0);function Due(t){var s,n=t.initialProps,r=Aue(),a=Mue(n),i=a.fromDate,l=a.toDate,o=(s=n.captionLayout)!==null&&s!==void 0?s:r.captionLayout;o!=="buttons"&&(!i||!l)&&(o="buttons");var c;(xv(n)||op(n)||cp(n))&&(c=n.onSelect);var u=ss(ss(ss({},r),n),{captionLayout:o,classNames:ss(ss({},r.classNames),n.classNames),components:ss({},n.components),formatters:ss(ss({},r.formatters),n.formatters),fromDate:i,labels:ss(ss({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:ss(ss({},r.modifiers),n.modifiers),modifiersClassNames:ss(ss({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:ss(ss({},r.styles),n.styles),toDate:l});return e.jsx(dB.Provider,{value:u,children:t.children})}function ln(){var t=b.useContext(dB);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function uB(t){var s=ln(),n=s.locale,r=s.classNames,a=s.styles,i=s.formatters.formatCaption;return e.jsx("div",{className:r.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:i(t.displayMonth,{locale:n})})}function Oue(t){return e.jsx("svg",ss({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:e.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function hB(t){var s,n,r=t.onChange,a=t.value,i=t.children,l=t.caption,o=t.className,c=t.style,u=ln(),d=(n=(s=u.components)===null||s===void 0?void 0:s.IconDropdown)!==null&&n!==void 0?n:Oue;return e.jsxs("div",{className:o,style:c,children:[e.jsx("span",{className:u.classNames.vhidden,children:t["aria-label"]}),e.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:a,onChange:r,children:i}),e.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[l,e.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function Rue(t){var s,n=ln(),r=n.fromDate,a=n.toDate,i=n.styles,l=n.locale,o=n.formatters.formatMonthCaption,c=n.classNames,u=n.components,d=n.labels.labelMonthDropdown;if(!r)return e.jsx(e.Fragment,{});if(!a)return e.jsx(e.Fragment,{});var m=[];if(tre(r,a))for(var h=na(r),p=r.getMonth();p<=a.getMonth();p++)m.push(Wb(h,p));else for(var h=na(new Date),p=0;p<=11;p++)m.push(Wb(h,p));var g=function(y){var j=Number(y.target.value),w=Wb(na(t.displayMonth),j);t.onChange(w)},v=(s=u==null?void 0:u.Dropdown)!==null&&s!==void 0?s:hB;return e.jsx(v,{name:"months","aria-label":d(),className:c.dropdown_month,style:i.dropdown_month,onChange:g,value:t.displayMonth.getMonth(),caption:o(t.displayMonth,{locale:l}),children:m.map(function(y){return e.jsx("option",{value:y.getMonth(),children:o(y,{locale:l})},y.getMonth())})})}function Fue(t){var s,n=t.displayMonth,r=ln(),a=r.fromDate,i=r.toDate,l=r.locale,o=r.styles,c=r.classNames,u=r.components,d=r.formatters.formatYearCaption,m=r.labels.labelYearDropdown,h=[];if(!a)return e.jsx(e.Fragment,{});if(!i)return e.jsx(e.Fragment,{});for(var p=a.getFullYear(),g=i.getFullYear(),v=p;v<=g;v++)h.push(RP(pF(new Date),v));var y=function(w){var N=RP(na(n),Number(w.target.value));t.onChange(N)},j=(s=u==null?void 0:u.Dropdown)!==null&&s!==void 0?s:hB;return e.jsx(j,{name:"years","aria-label":m(),className:c.dropdown_year,style:o.dropdown_year,onChange:y,value:n.getFullYear(),caption:d(n,{locale:l}),children:h.map(function(w){return e.jsx("option",{value:w.getFullYear(),children:d(w,{locale:l})},w.getFullYear())})})}function Lue(t,s){var n=b.useState(t),r=n[0],a=n[1],i=s===void 0?r:s;return[i,a]}function Iue(t){var s=t.month,n=t.defaultMonth,r=t.today,a=s||n||r||new Date,i=t.toDate,l=t.fromDate,o=t.numberOfMonths,c=o===void 0?1:o;if(i&&Ku(i,a)<0){var u=-1*(c-1);a=bi(i,u)}return l&&Ku(a,l)<0&&(a=l),na(a)}function Bue(){var t=ln(),s=Iue(t),n=Lue(s,t.month),r=n[0],a=n[1],i=function(l){var o;if(!t.disableNavigation){var c=na(l);a(c),(o=t.onMonthChange)===null||o===void 0||o.call(t,c)}};return[r,i]}function que(t,s){for(var n=s.reverseMonths,r=s.numberOfMonths,a=na(t),i=na(bi(a,r)),l=Ku(i,a),o=[],c=0;c<l;c++){var u=bi(a,c);o.push(u)}return n&&(o=o.reverse()),o}function zue(t,s){if(!s.disableNavigation){var n=s.toDate,r=s.pagedNavigation,a=s.numberOfMonths,i=a===void 0?1:a,l=r?i:1,o=na(t);if(!n)return bi(o,l);var c=Ku(n,t);if(!(c<i))return bi(o,l)}}function $ue(t,s){if(!s.disableNavigation){var n=s.fromDate,r=s.pagedNavigation,a=s.numberOfMonths,i=a===void 0?1:a,l=r?i:1,o=na(t);if(!n)return bi(o,-l);var c=Ku(o,n);if(!(c<=0))return bi(o,-l)}}var mB=b.createContext(void 0);function Uue(t){var s=ln(),n=Bue(),r=n[0],a=n[1],i=que(r,s),l=zue(r,s),o=$ue(r,s),c=function(m){return i.some(function(h){return S2(m,h)})},u=function(m,h){c(m)||(h&&Wg(m,h)?a(bi(m,1+s.numberOfMonths*-1)):a(m))},d={currentMonth:r,displayMonths:i,goToMonth:a,goToDate:u,previousMonth:o,nextMonth:l,isDateDisplayed:c};return e.jsx(mB.Provider,{value:d,children:t.children})}function dp(){var t=b.useContext(mB);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function UM(t){var s,n=ln(),r=n.classNames,a=n.styles,i=n.components,l=dp().goToMonth,o=function(d){l(bi(d,t.displayIndex?-t.displayIndex:0))},c=(s=i==null?void 0:i.CaptionLabel)!==null&&s!==void 0?s:uB,u=e.jsx(c,{id:t.id,displayMonth:t.displayMonth});return e.jsxs("div",{className:r.caption_dropdowns,style:a.caption_dropdowns,children:[e.jsx("div",{className:r.vhidden,children:u}),e.jsx(Rue,{onChange:o,displayMonth:t.displayMonth}),e.jsx(Fue,{onChange:o,displayMonth:t.displayMonth})]})}function Vue(t){return e.jsx("svg",ss({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:e.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Wue(t){return e.jsx("svg",ss({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:e.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Jg=b.forwardRef(function(t,s){var n=ln(),r=n.classNames,a=n.styles,i=[r.button_reset,r.button];t.className&&i.push(t.className);var l=i.join(" "),o=ss(ss({},a.button_reset),a.button);return t.style&&Object.assign(o,t.style),e.jsx("button",ss({},t,{ref:s,type:"button",className:l,style:o}))});function Hue(t){var s,n,r=ln(),a=r.dir,i=r.locale,l=r.classNames,o=r.styles,c=r.labels,u=c.labelPrevious,d=c.labelNext,m=r.components;if(!t.nextMonth&&!t.previousMonth)return e.jsx(e.Fragment,{});var h=u(t.previousMonth,{locale:i}),p=[l.nav_button,l.nav_button_previous].join(" "),g=d(t.nextMonth,{locale:i}),v=[l.nav_button,l.nav_button_next].join(" "),y=(s=m==null?void 0:m.IconRight)!==null&&s!==void 0?s:Wue,j=(n=m==null?void 0:m.IconLeft)!==null&&n!==void 0?n:Vue;return e.jsxs("div",{className:l.nav,style:o.nav,children:[!t.hidePrevious&&e.jsx(Jg,{name:"previous-month","aria-label":h,className:p,style:o.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:a==="rtl"?e.jsx(y,{className:l.nav_icon,style:o.nav_icon}):e.jsx(j,{className:l.nav_icon,style:o.nav_icon})}),!t.hideNext&&e.jsx(Jg,{name:"next-month","aria-label":g,className:v,style:o.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:a==="rtl"?e.jsx(j,{className:l.nav_icon,style:o.nav_icon}):e.jsx(y,{className:l.nav_icon,style:o.nav_icon})})]})}function VM(t){var s=ln().numberOfMonths,n=dp(),r=n.previousMonth,a=n.nextMonth,i=n.goToMonth,l=n.displayMonths,o=l.findIndex(function(g){return S2(t.displayMonth,g)}),c=o===0,u=o===l.length-1,d=s>1&&(c||!u),m=s>1&&(u||!c),h=function(){r&&i(r)},p=function(){a&&i(a)};return e.jsx(Hue,{displayMonth:t.displayMonth,hideNext:d,hidePrevious:m,nextMonth:a,previousMonth:r,onPreviousClick:h,onNextClick:p})}function Kue(t){var s,n=ln(),r=n.classNames,a=n.disableNavigation,i=n.styles,l=n.captionLayout,o=n.components,c=(s=o==null?void 0:o.CaptionLabel)!==null&&s!==void 0?s:uB,u;return a?u=e.jsx(c,{id:t.id,displayMonth:t.displayMonth}):l==="dropdown"?u=e.jsx(UM,{displayMonth:t.displayMonth,id:t.id}):l==="dropdown-buttons"?u=e.jsxs(e.Fragment,{children:[e.jsx(UM,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),e.jsx(VM,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):u=e.jsxs(e.Fragment,{children:[e.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),e.jsx(VM,{displayMonth:t.displayMonth,id:t.id})]}),e.jsx("div",{className:r.caption,style:i.caption,children:u})}function Gue(t){var s=ln(),n=s.footer,r=s.styles,a=s.classNames.tfoot;return n?e.jsx("tfoot",{className:a,style:r.tfoot,children:e.jsx("tr",{children:e.jsx("td",{colSpan:8,children:n})})}):e.jsx(e.Fragment,{})}function Yue(t,s,n){for(var r=n?id(new Date):sl(new Date,{locale:t,weekStartsOn:s}),a=[],i=0;i<7;i++){var l=hr(r,i);a.push(l)}return a}function Que(){var t=ln(),s=t.classNames,n=t.styles,r=t.showWeekNumber,a=t.locale,i=t.weekStartsOn,l=t.ISOWeek,o=t.formatters.formatWeekdayName,c=t.labels.labelWeekday,u=Yue(a,i,l);return e.jsxs("tr",{style:n.head_row,className:s.head_row,children:[r&&e.jsx("td",{style:n.head_cell,className:s.head_cell}),u.map(function(d,m){return e.jsx("th",{scope:"col",className:s.head_cell,style:n.head_cell,"aria-label":c(d,{locale:a}),children:o(d,{locale:a})},m)})]})}function Jue(){var t,s=ln(),n=s.classNames,r=s.styles,a=s.components,i=(t=a==null?void 0:a.HeadRow)!==null&&t!==void 0?t:Que;return e.jsx("thead",{style:r.head,className:n.head,children:e.jsx(i,{})})}function Xue(t){var s=ln(),n=s.locale,r=s.formatters.formatDay;return e.jsx(e.Fragment,{children:r(t.date,{locale:n})})}var mS=b.createContext(void 0);function Zue(t){if(!op(t.initialProps)){var s={selected:void 0,modifiers:{disabled:[]}};return e.jsx(mS.Provider,{value:s,children:t.children})}return e.jsx(ehe,{initialProps:t.initialProps,children:t.children})}function ehe(t){var s=t.initialProps,n=t.children,r=s.selected,a=s.min,i=s.max,l=function(u,d,m){var h,p;(h=s.onDayClick)===null||h===void 0||h.call(s,u,d,m);var g=!!(d.selected&&a&&(r==null?void 0:r.length)===a);if(!g){var v=!!(!d.selected&&i&&(r==null?void 0:r.length)===i);if(!v){var y=r?cB([],r):[];if(d.selected){var j=y.findIndex(function(w){return Zr(u,w)});y.splice(j,1)}else y.push(u);(p=s.onSelect)===null||p===void 0||p.call(s,y,u,d,m)}}},o={disabled:[]};r&&o.disabled.push(function(u){var d=i&&r.length>i-1,m=r.some(function(h){return Zr(h,u)});return!!(d&&!m)});var c={selected:r,onDayClick:l,modifiers:o};return e.jsx(mS.Provider,{value:c,children:n})}function fS(){var t=b.useContext(mS);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function the(t,s){var n=s||{},r=n.from,a=n.to;return r&&a?Zr(a,t)&&Zr(r,t)?void 0:Zr(a,t)?{from:a,to:void 0}:Zr(r,t)?void 0:k_(r,t)?{from:t,to:a}:{from:r,to:t}:a?k_(t,a)?{from:a,to:t}:{from:t,to:a}:r?Wg(t,r)?{from:t,to:r}:{from:r,to:t}:{from:t,to:void 0}}var pS=b.createContext(void 0);function she(t){if(!cp(t.initialProps)){var s={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return e.jsx(pS.Provider,{value:s,children:t.children})}return e.jsx(nhe,{initialProps:t.initialProps,children:t.children})}function nhe(t){var s=t.initialProps,n=t.children,r=s.selected,a=r||{},i=a.from,l=a.to,o=s.min,c=s.max,u=function(p,g,v){var y,j;(y=s.onDayClick)===null||y===void 0||y.call(s,p,g,v);var w=the(p,r);(j=s.onSelect)===null||j===void 0||j.call(s,w,p,g,v)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(d.range_start=[i],l?(d.range_end=[l],Zr(i,l)||(d.range_middle=[{after:i,before:l}])):d.range_end=[i]):l&&(d.range_start=[l],d.range_end=[l]),o&&(i&&!l&&d.disabled.push({after:Vb(i,o-1),before:hr(i,o-1)}),i&&l&&d.disabled.push({after:i,before:hr(i,o-1)}),!i&&l&&d.disabled.push({after:Vb(l,o-1),before:hr(l,o-1)})),c){if(i&&!l&&(d.disabled.push({before:hr(i,-c+1)}),d.disabled.push({after:hr(i,c-1)})),i&&l){var m=mi(l,i)+1,h=c-m;d.disabled.push({before:Vb(i,h)}),d.disabled.push({after:hr(l,h)})}!i&&l&&(d.disabled.push({before:hr(l,-c+1)}),d.disabled.push({after:hr(l,c-1)}))}return e.jsx(pS.Provider,{value:{selected:r,onDayClick:u,modifiers:d},children:n})}function xS(){var t=b.useContext(pS);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function Ng(t){return Array.isArray(t)?cB([],t):t!==void 0?[t]:[]}function rhe(t){var s={};return Object.entries(t).forEach(function(n){var r=n[0],a=n[1];s[r]=Ng(a)}),s}var ji;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(ji||(ji={}));var ahe=ji.Selected,wl=ji.Disabled,ihe=ji.Hidden,lhe=ji.Today,Vw=ji.RangeEnd,Ww=ji.RangeMiddle,Hw=ji.RangeStart,ohe=ji.Outside;function che(t,s,n){var r,a=(r={},r[ahe]=Ng(t.selected),r[wl]=Ng(t.disabled),r[ihe]=Ng(t.hidden),r[lhe]=[t.today],r[Vw]=[],r[Ww]=[],r[Hw]=[],r[ohe]=[],r);return t.fromDate&&a[wl].push({before:t.fromDate}),t.toDate&&a[wl].push({after:t.toDate}),op(t)?a[wl]=a[wl].concat(s.modifiers[wl]):cp(t)&&(a[wl]=a[wl].concat(n.modifiers[wl]),a[Hw]=n.modifiers[Hw],a[Ww]=n.modifiers[Ww],a[Vw]=n.modifiers[Vw]),a}var fB=b.createContext(void 0);function dhe(t){var s=ln(),n=fS(),r=xS(),a=che(s,n,r),i=rhe(s.modifiers),l=ss(ss({},a),i);return e.jsx(fB.Provider,{value:l,children:t.children})}function pB(){var t=b.useContext(fB);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function uhe(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function hhe(t){return!!(t&&typeof t=="object"&&"from"in t)}function mhe(t){return!!(t&&typeof t=="object"&&"after"in t)}function fhe(t){return!!(t&&typeof t=="object"&&"before"in t)}function phe(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function xhe(t,s){var n,r=s.from,a=s.to;if(r&&a){var i=mi(a,r)<0;i&&(n=[a,r],r=n[0],a=n[1]);var l=mi(t,r)>=0&&mi(a,t)>=0;return l}return a?Zr(a,t):r?Zr(r,t):!1}function ghe(t){return w2(t)}function vhe(t){return Array.isArray(t)&&t.every(w2)}function yhe(t,s){return s.some(function(n){if(typeof n=="boolean")return n;if(ghe(n))return Zr(t,n);if(vhe(n))return n.includes(t);if(hhe(n))return xhe(t,n);if(phe(n))return n.dayOfWeek.includes(t.getDay());if(uhe(n)){var r=mi(n.before,t),a=mi(n.after,t),i=r>0,l=a<0,o=k_(n.before,n.after);return o?l&&i:i||l}return mhe(n)?mi(t,n.after)>0:fhe(n)?mi(n.before,t)>0:typeof n=="function"?n(t):!1})}function gS(t,s,n){var r=Object.keys(s).reduce(function(i,l){var o=s[l];return yhe(t,o)&&i.push(l),i},[]),a={};return r.forEach(function(i){return a[i]=!0}),n&&!S2(t,n)&&(a.outside=!0),a}function bhe(t,s){for(var n=na(t[0]),r=tv(t[t.length-1]),a,i,l=n;l<=r;){var o=gS(l,s),c=!o.disabled&&!o.hidden;if(!c){l=hr(l,1);continue}if(o.selected)return l;o.today&&!i&&(i=l),a||(a=l),l=hr(l,1)}return i||a}var jhe=365;function xB(t,s){var n=s.moveBy,r=s.direction,a=s.context,i=s.modifiers,l=s.retry,o=l===void 0?{count:0,lastFocused:t}:l,c=a.weekStartsOn,u=a.fromDate,d=a.toDate,m=a.locale,h={day:hr,week:C_,month:bi,year:Vse,startOfWeek:function(y){return a.ISOWeek?id(y):sl(y,{locale:m,weekStartsOn:c})},endOfWeek:function(y){return a.ISOWeek?xF(y):N2(y,{locale:m,weekStartsOn:c})}},p=h[n](t,r==="after"?1:-1);r==="before"&&u?p=Wse([u,p]):r==="after"&&d&&(p=Hse([d,p]));var g=!0;if(i){var v=gS(p,i);g=!v.disabled&&!v.hidden}return g?p:o.count>jhe?o.lastFocused:xB(p,{moveBy:n,direction:r,context:a,modifiers:i,retry:ss(ss({},o),{count:o.count+1})})}var gB=b.createContext(void 0);function whe(t){var s=dp(),n=pB(),r=b.useState(),a=r[0],i=r[1],l=b.useState(),o=l[0],c=l[1],u=bhe(s.displayMonths,n),d=a??(o&&s.isDateDisplayed(o))?o:u,m=function(){c(a),i(void 0)},h=function(y){i(y)},p=ln(),g=function(y,j){if(a){var w=xB(a,{moveBy:y,direction:j,context:p,modifiers:n});Zr(a,w)||(s.goToDate(w,a),h(w))}},v={focusedDay:a,focusTarget:d,blur:m,focus:h,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return e.jsx(gB.Provider,{value:v,children:t.children})}function vS(){var t=b.useContext(gB);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function Nhe(t,s){var n=pB(),r=gS(t,n,s);return r}var yS=b.createContext(void 0);function _he(t){if(!xv(t.initialProps)){var s={selected:void 0};return e.jsx(yS.Provider,{value:s,children:t.children})}return e.jsx(She,{initialProps:t.initialProps,children:t.children})}function She(t){var s=t.initialProps,n=t.children,r=function(i,l,o){var c,u,d;if((c=s.onDayClick)===null||c===void 0||c.call(s,i,l,o),l.selected&&!s.required){(u=s.onSelect)===null||u===void 0||u.call(s,void 0,i,l,o);return}(d=s.onSelect)===null||d===void 0||d.call(s,i,i,l,o)},a={selected:s.selected,onDayClick:r};return e.jsx(yS.Provider,{value:a,children:n})}function vB(){var t=b.useContext(yS);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function Che(t,s){var n=ln(),r=vB(),a=fS(),i=xS(),l=vS(),o=l.focusDayAfter,c=l.focusDayBefore,u=l.focusWeekAfter,d=l.focusWeekBefore,m=l.blur,h=l.focus,p=l.focusMonthBefore,g=l.focusMonthAfter,v=l.focusYearBefore,y=l.focusYearAfter,j=l.focusStartOfWeek,w=l.focusEndOfWeek,N=function(U){var B,$,L,I;xv(n)?(B=r.onDayClick)===null||B===void 0||B.call(r,t,s,U):op(n)?($=a.onDayClick)===null||$===void 0||$.call(a,t,s,U):cp(n)?(L=i.onDayClick)===null||L===void 0||L.call(i,t,s,U):(I=n.onDayClick)===null||I===void 0||I.call(n,t,s,U)},_=function(U){var B;h(t),(B=n.onDayFocus)===null||B===void 0||B.call(n,t,s,U)},T=function(U){var B;m(),(B=n.onDayBlur)===null||B===void 0||B.call(n,t,s,U)},A=function(U){var B;(B=n.onDayMouseEnter)===null||B===void 0||B.call(n,t,s,U)},P=function(U){var B;(B=n.onDayMouseLeave)===null||B===void 0||B.call(n,t,s,U)},C=function(U){var B;(B=n.onDayPointerEnter)===null||B===void 0||B.call(n,t,s,U)},O=function(U){var B;(B=n.onDayPointerLeave)===null||B===void 0||B.call(n,t,s,U)},M=function(U){var B;(B=n.onDayTouchCancel)===null||B===void 0||B.call(n,t,s,U)},k=function(U){var B;(B=n.onDayTouchEnd)===null||B===void 0||B.call(n,t,s,U)},E=function(U){var B;(B=n.onDayTouchMove)===null||B===void 0||B.call(n,t,s,U)},R=function(U){var B;(B=n.onDayTouchStart)===null||B===void 0||B.call(n,t,s,U)},F=function(U){var B;(B=n.onDayKeyUp)===null||B===void 0||B.call(n,t,s,U)},z=function(U){var B;switch(U.key){case"ArrowLeft":U.preventDefault(),U.stopPropagation(),n.dir==="rtl"?o():c();break;case"ArrowRight":U.preventDefault(),U.stopPropagation(),n.dir==="rtl"?c():o();break;case"ArrowDown":U.preventDefault(),U.stopPropagation(),u();break;case"ArrowUp":U.preventDefault(),U.stopPropagation(),d();break;case"PageUp":U.preventDefault(),U.stopPropagation(),U.shiftKey?v():p();break;case"PageDown":U.preventDefault(),U.stopPropagation(),U.shiftKey?y():g();break;case"Home":U.preventDefault(),U.stopPropagation(),j();break;case"End":U.preventDefault(),U.stopPropagation(),w();break}(B=n.onDayKeyDown)===null||B===void 0||B.call(n,t,s,U)},V={onClick:N,onFocus:_,onBlur:T,onKeyDown:z,onKeyUp:F,onMouseEnter:A,onMouseLeave:P,onPointerEnter:C,onPointerLeave:O,onTouchCancel:M,onTouchEnd:k,onTouchMove:E,onTouchStart:R};return V}function khe(){var t=ln(),s=vB(),n=fS(),r=xS(),a=xv(t)?s.selected:op(t)?n.selected:cp(t)?r.selected:void 0;return a}function Ehe(t){return Object.values(ji).includes(t)}function Phe(t,s){var n=[t.classNames.day];return Object.keys(s).forEach(function(r){var a=t.modifiersClassNames[r];if(a)n.push(a);else if(Ehe(r)){var i=t.classNames["day_".concat(r)];i&&n.push(i)}}),n}function The(t,s){var n=ss({},t.styles.day);return Object.keys(s).forEach(function(r){var a;n=ss(ss({},n),(a=t.modifiersStyles)===null||a===void 0?void 0:a[r])}),n}function Ahe(t,s,n){var r,a,i,l=ln(),o=vS(),c=Nhe(t,s),u=Che(t,c),d=khe(),m=!!(l.onDayClick||l.mode!=="default");b.useEffect(function(){var A;c.outside||o.focusedDay&&m&&Zr(o.focusedDay,t)&&((A=n.current)===null||A===void 0||A.focus())},[o.focusedDay,t,n,m,c.outside]);var h=Phe(l,c).join(" "),p=The(l,c),g=!!(c.outside&&!l.showOutsideDays||c.hidden),v=(i=(a=l.components)===null||a===void 0?void 0:a.DayContent)!==null&&i!==void 0?i:Xue,y=e.jsx(v,{date:t,displayMonth:s,activeModifiers:c}),j={style:p,className:h,children:y,role:"gridcell"},w=o.focusTarget&&Zr(o.focusTarget,t)&&!c.outside,N=o.focusedDay&&Zr(o.focusedDay,t),_=ss(ss(ss({},j),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=N||w?0:-1,r)),u),T={isButton:m,isHidden:g,activeModifiers:c,selectedDays:d,buttonProps:_,divProps:j};return T}function Mhe(t){var s=b.useRef(null),n=Ahe(t.date,t.displayMonth,s);return n.isHidden?e.jsx("div",{role:"gridcell"}):n.isButton?e.jsx(Jg,ss({name:"day",ref:s},n.buttonProps)):e.jsx("div",ss({},n.divProps))}function Dhe(t){var s=t.number,n=t.dates,r=ln(),a=r.onWeekNumberClick,i=r.styles,l=r.classNames,o=r.locale,c=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,d=u(Number(s),{locale:o});if(!a)return e.jsx("span",{className:l.weeknumber,style:i.weeknumber,children:d});var m=c(Number(s),{locale:o}),h=function(p){a(s,n,p)};return e.jsx(Jg,{name:"week-number","aria-label":m,className:l.weeknumber,style:i.weeknumber,onClick:h,children:d})}function Ohe(t){var s,n,r=ln(),a=r.styles,i=r.classNames,l=r.showWeekNumber,o=r.components,c=(s=o==null?void 0:o.Day)!==null&&s!==void 0?s:Mhe,u=(n=o==null?void 0:o.WeekNumber)!==null&&n!==void 0?n:Dhe,d;return l&&(d=e.jsx("td",{className:i.cell,style:a.cell,children:e.jsx(u,{number:t.weekNumber,dates:t.dates})})),e.jsxs("tr",{className:i.row,style:a.row,children:[d,t.dates.map(function(m){return e.jsx("td",{className:i.cell,style:a.cell,role:"presentation",children:e.jsx(c,{displayMonth:t.displayMonth,date:m})},Xne(m))})]})}function WM(t,s,n){for(var r=n!=null&&n.ISOWeek?xF(s):N2(s,n),a=n!=null&&n.ISOWeek?id(t):sl(t,n),i=mi(r,a),l=[],o=0;o<=i;o++)l.push(hr(a,o));var c=l.reduce(function(u,d){var m=n!=null&&n.ISOWeek?gF(d):yF(d,n),h=u.find(function(p){return p.weekNumber===m});return h?(h.dates.push(d),u):(u.push({weekNumber:m,dates:[d]}),u)},[]);return c}function Rhe(t,s){var n=WM(na(t),tv(t),s);if(s!=null&&s.useFixedWeeks){var r=ere(t,s);if(r<6){var a=n[n.length-1],i=a.dates[a.dates.length-1],l=C_(i,6-r),o=WM(C_(i,1),l,s);n.push.apply(n,o)}}return n}function Fhe(t){var s,n,r,a=ln(),i=a.locale,l=a.classNames,o=a.styles,c=a.hideHead,u=a.fixedWeeks,d=a.components,m=a.weekStartsOn,h=a.firstWeekContainsDate,p=a.ISOWeek,g=Rhe(t.displayMonth,{useFixedWeeks:!!u,ISOWeek:p,locale:i,weekStartsOn:m,firstWeekContainsDate:h}),v=(s=d==null?void 0:d.Head)!==null&&s!==void 0?s:Jue,y=(n=d==null?void 0:d.Row)!==null&&n!==void 0?n:Ohe,j=(r=d==null?void 0:d.Footer)!==null&&r!==void 0?r:Gue;return e.jsxs("table",{id:t.id,className:l.table,style:o.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!c&&e.jsx(v,{}),e.jsx("tbody",{className:l.tbody,style:o.tbody,children:g.map(function(w){return e.jsx(y,{displayMonth:t.displayMonth,dates:w.dates,weekNumber:w.weekNumber},w.weekNumber)})}),e.jsx(j,{displayMonth:t.displayMonth})]})}function Lhe(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Ihe=Lhe()?b.useLayoutEffect:b.useEffect,Kw=!1,Bhe=0;function HM(){return"react-day-picker-".concat(++Bhe)}function qhe(t){var s,n=t??(Kw?HM():null),r=b.useState(n),a=r[0],i=r[1];return Ihe(function(){a===null&&i(HM())},[]),b.useEffect(function(){Kw===!1&&(Kw=!0)},[]),(s=t??a)!==null&&s!==void 0?s:void 0}function zhe(t){var s,n,r=ln(),a=r.dir,i=r.classNames,l=r.styles,o=r.components,c=dp().displayMonths,u=qhe(r.id?"".concat(r.id,"-").concat(t.displayIndex):void 0),d=r.id?"".concat(r.id,"-grid-").concat(t.displayIndex):void 0,m=[i.month],h=l.month,p=t.displayIndex===0,g=t.displayIndex===c.length-1,v=!p&&!g;a==="rtl"&&(s=[p,g],g=s[0],p=s[1]),p&&(m.push(i.caption_start),h=ss(ss({},h),l.caption_start)),g&&(m.push(i.caption_end),h=ss(ss({},h),l.caption_end)),v&&(m.push(i.caption_between),h=ss(ss({},h),l.caption_between));var y=(n=o==null?void 0:o.Caption)!==null&&n!==void 0?n:Kue;return e.jsxs("div",{className:m.join(" "),style:h,children:[e.jsx(y,{id:u,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),e.jsx(Fhe,{id:d,"aria-labelledby":u,displayMonth:t.displayMonth})]},t.displayIndex)}function $he(t){var s=ln(),n=s.classNames,r=s.styles;return e.jsx("div",{className:n.months,style:r.months,children:t.children})}function Uhe(t){var s,n,r=t.initialProps,a=ln(),i=vS(),l=dp(),o=b.useState(!1),c=o[0],u=o[1];b.useEffect(function(){a.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),u(!0)))},[a.initialFocus,c,i.focus,i.focusTarget,i]);var d=[a.classNames.root,a.className];a.numberOfMonths>1&&d.push(a.classNames.multiple_months),a.showWeekNumber&&d.push(a.classNames.with_weeknumber);var m=ss(ss({},a.styles.root),a.style),h=Object.keys(r).filter(function(g){return g.startsWith("data-")}).reduce(function(g,v){var y;return ss(ss({},g),(y={},y[v]=r[v],y))},{}),p=(n=(s=r.components)===null||s===void 0?void 0:s.Months)!==null&&n!==void 0?n:$he;return e.jsx("div",ss({className:d.join(" "),style:m,dir:a.dir,id:a.id,nonce:r.nonce,title:r.title,lang:r.lang},h,{children:e.jsx(p,{children:l.displayMonths.map(function(g,v){return e.jsx(zhe,{displayIndex:v,displayMonth:g},v)})})}))}function Vhe(t){var s=t.children,n=fue(t,["children"]);return e.jsx(Due,{initialProps:n,children:e.jsx(Uue,{children:e.jsx(_he,{initialProps:n,children:e.jsx(Zue,{initialProps:n,children:e.jsx(she,{initialProps:n,children:e.jsx(dhe,{children:e.jsx(whe,{children:s})})})})})})})}function Whe(t){return e.jsx(Vhe,ss({},t,{children:e.jsx(Uhe,{initialProps:t})}))}function bS({className:t,classNames:s,showOutsideDays:n=!0,...r}){return e.jsx(Whe,{showOutsideDays:n,className:tt("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:tt(ef({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:tt("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md",r.mode==="range"?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:tt(ef({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},components:{IconLeft:({className:a,...i})=>e.jsx(Wn,{className:tt("h-4 w-4",a),...i}),IconRight:({className:a,...i})=>e.jsx(js,{className:tt("h-4 w-4",a),...i})},...r})}bS.displayName="Calendar";function yB({isAdmin:t,memberRole:s,isFeatureExcluded:n}){const[r,a]=b.useState(""),[i,l]=b.useState("all"),[o,c]=b.useState(null),[u,d]=b.useState(null),m=Yt();b.useEffect(()=>{s!=null&&(!t||n("page_MemberRoleAssignment"))&&(window.location.href=Pe("Events"))},[t,s,n]);const{data:h,isLoading:p}=me({queryKey:["members"],queryFn:()=>X.entities.Member.list(),initialData:[]}),{data:g,isLoading:v}=me({queryKey:["roles"],queryFn:()=>X.entities.Role.list(),initialData:[]}),y=Le({mutationFn:({memberId:A,roleId:P,effectiveFrom:C})=>X.entities.Member.update(A,{role_id:P,role_effective_from:C||null}),onSuccess:()=>{m.invalidateQueries({queryKey:["members"]}),te.success("Member role updated successfully"),c(null),d(null)},onError:A=>{te.error("Failed to update member role: "+A.message)}}),j=(A,P)=>{if(P==="none"||!P){y.mutate({memberId:A,roleId:null,effectiveFrom:null});return}const C=g.find(O=>O.id===P);C!=null&&C.requires_effective_from_date?(c({memberId:A,roleId:P,requiresDate:!0}),d(null)):y.mutate({memberId:A,roleId:P,effectiveFrom:null})},w=()=>{if(o){if(!u){te.error("Please select an Effective From date");return}y.mutate({memberId:o.memberId,roleId:o.roleId,effectiveFrom:Mt(u,"yyyy-MM-dd")})}},N=h.filter(A=>{var M,k,E;const P=r.toLowerCase(),C=((M=A.email)==null?void 0:M.toLowerCase().includes(P))||((k=A.first_name)==null?void 0:k.toLowerCase().includes(P))||((E=A.last_name)==null?void 0:E.toLowerCase().includes(P)),O=i==="all"||i==="none"&&!A.role_id||A.role_id===i;return C&&O}),_=A=>{const P=g.find(C=>C.id===A);return(P==null?void 0:P.name)||"No Role"},T=p||v;return s==null?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-slate-600",children:"Loading..."})}):!t||n("page_MemberRoleAssignment")?null:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Assign Member Roles"}),e.jsx("p",{className:"text-slate-600",children:"Assign roles to members to control their access to features"})]}),e.jsx(le,{className:"border-slate-200 shadow-sm mb-6",children:e.jsx(ce,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx(he,{placeholder:"Search members by name or email...",value:r,onChange:A=>a(A.target.value),className:"pl-10"})]}),e.jsx("div",{className:"w-full md:w-64",children:e.jsxs(Ke,{value:i,onValueChange:l,children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:"Filter by role"})}),e.jsxs(We,{children:[e.jsx(re,{value:"all",children:"All Roles"}),e.jsx(re,{value:"none",children:"No Role Assigned"}),g.map(A=>e.jsx(re,{value:A.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(In,{className:"w-3 h-3"}),A.name]})},A.id))]})]})})]})})}),T?e.jsx("div",{className:"text-center py-12",children:"Loading members..."}):N.length===0?e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(ws,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No Members Found"}),e.jsx("p",{className:"text-slate-600",children:r?"Try adjusting your search":"No members in the system yet"})]})}):e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsxs(Ue,{children:["Members (",N.length,")"]})}),e.jsx(ce,{className:"p-0",children:e.jsx("div",{className:"divide-y divide-slate-200",children:N.map(A=>e.jsxs("div",{className:"flex items-center gap-4 p-4 hover:bg-slate-50 transition-colors",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[e.jsxs("h3",{className:"font-semibold text-slate-900 truncate",children:[A.first_name," ",A.last_name]}),A.role_id&&e.jsx(ye,{variant:"outline",className:"text-xs",children:_(A.role_id)}),A.role_effective_from&&e.jsxs(ye,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-700",children:["Effective: ",Mt(new Date(A.role_effective_from),"dd MMM yyyy")]})]}),e.jsx("p",{className:"text-sm text-slate-600 truncate",children:A.email})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-48",children:e.jsxs(Ke,{value:A.role_id||"none",onValueChange:P=>j(A.id,P==="none"?null:P),children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:"Select role"})}),e.jsxs(We,{children:[e.jsx(re,{value:"none",children:e.jsx("span",{className:"text-slate-500",children:"No Role"})}),g.map(P=>e.jsx(re,{value:P.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(In,{className:"w-3 h-3"}),P.name,P.is_default&&e.jsx("span",{className:"text-xs text-green-600",children:"(Default)"})]})},P.id))]})]})}),A.role_id&&e.jsx(Jn,{className:"w-5 h-5 text-green-600"}),(o==null?void 0:o.memberId)===A.id&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(ee,{className:"text-xs text-blue-700 mb-1 block",children:"Effective From Date *"}),e.jsxs(lB,{children:[e.jsx(oB,{asChild:!0,children:e.jsxs(J,{variant:"outline",className:"w-40 justify-start text-left font-normal",children:[e.jsx(Ns,{className:"mr-2 h-4 w-4"}),u?Mt(u,"dd MMM yyyy"):e.jsx("span",{className:"text-slate-500",children:"Pick a date"})]})}),e.jsx(hS,{className:"w-auto p-0",align:"start",children:e.jsx(bS,{mode:"single",selected:u,onSelect:d,initialFocus:!0})})]})]}),e.jsx(J,{size:"sm",onClick:w,disabled:y.isPending,className:"bg-blue-600 hover:bg-blue-700",children:"Confirm"}),e.jsx(J,{size:"sm",variant:"outline",onClick:()=>{c(null),d(null)},children:"Cancel"})]})]})]},A.id))})})]})]})})}function bB({isAdmin:t,memberRole:s,isFeatureExcluded:n}){const[r,a]=b.useState(null),[i,l]=b.useState(!1),[o,c]=b.useState(!1),[u,d]=b.useState(null),[m,h]=b.useState(""),p=Yt();b.useEffect(()=>{s!=null&&(!t||n("page_TeamMemberManagement"))&&(window.location.href=Pe("Events"))},[t,s,n]);const{data:g,isLoading:v}=me({queryKey:["team-members"],queryFn:()=>X.entities.TeamMember.list(),initialData:[]}),{data:y,isLoading:j}=me({queryKey:["roles"],queryFn:()=>X.entities.Role.list(),initialData:[]}),w=Le({mutationFn:R=>X.entities.TeamMember.create(R),onSuccess:()=>{p.invalidateQueries({queryKey:["team-members"]}),l(!1),a(null),te.success("Team member created successfully")},onError:R=>{te.error("Failed to create team member: "+R.message)}}),N=Le({mutationFn:({id:R,teamMemberData:F})=>X.entities.TeamMember.update(R,F),onSuccess:()=>{p.invalidateQueries({queryKey:["team-members"]}),l(!1),a(null),te.success("Team member updated successfully")},onError:R=>{te.error("Failed to update team member: "+R.message)}}),_=Le({mutationFn:R=>X.entities.TeamMember.delete(R),onSuccess:()=>{p.invalidateQueries({queryKey:["team-members"]}),c(!1),d(null),te.success("Team member deleted successfully")},onError:R=>{te.error("Failed to delete team member: "+R.message)}}),T=()=>{a({email:"",first_name:"",last_name:"",role_id:"",is_active:!0}),l(!0)},A=R=>{a({...R}),l(!0)},P=R=>{d(R),c(!0)},C=()=>{if(!r.email||!r.email.trim()){te.error("Email is required");return}if(!r.first_name||!r.first_name.trim()){te.error("First name is required");return}if(!r.last_name||!r.last_name.trim()){te.error("Last name is required");return}if(!r.role_id){te.error("Role is required");return}const R={email:r.email.trim(),first_name:r.first_name.trim(),last_name:r.last_name.trim(),role_id:r.role_id,is_active:r.is_active};r.id?N.mutate({id:r.id,teamMemberData:R}):w.mutate(R)},O=R=>{const F=y.find(z=>z.id===R);return(F==null?void 0:F.name)||"Unknown Role"},M=R=>{const F=y.find(z=>z.id===R);return(F==null?void 0:F.is_admin)||!1},k=g.filter(R=>{var z,V,U;const F=m.toLowerCase();return((z=R.email)==null?void 0:z.toLowerCase().includes(F))||((V=R.first_name)==null?void 0:V.toLowerCase().includes(F))||((U=R.last_name)==null?void 0:U.toLowerCase().includes(F))}),E=v||j;return s==null?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-slate-600",children:"Loading..."})}):!t||n("page_TeamMemberManagement")?null:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Team Member Management"}),e.jsx("p",{className:"text-slate-600",children:"Manage internal team members and administrators"})]}),e.jsxs(J,{onClick:T,className:"bg-indigo-600 hover:bg-indigo-700",children:[e.jsx(Zc,{className:"w-4 h-4 mr-2"}),"Add Team Member"]})]}),e.jsx(le,{className:"border-slate-200 shadow-sm mb-6",children:e.jsx(ce,{className:"p-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ms,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx(he,{placeholder:"Search by name or email...",value:m,onChange:R=>h(R.target.value),className:"pl-10"})]})})}),E?e.jsx("div",{className:"text-center py-12",children:"Loading team members..."}):k.length===0?e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(ws,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:m?"No Team Members Found":"No Team Members Yet"}),e.jsx("p",{className:"text-slate-600 mb-6",children:m?"Try adjusting your search":"Create your first team member to get started"}),!m&&e.jsxs(J,{onClick:T,className:"bg-indigo-600 hover:bg-indigo-700",children:[e.jsx(Zc,{className:"w-4 h-4 mr-2"}),"Add Team Member"]})]})}):e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsxs(Ue,{children:["Team Members (",k.length,")"]})}),e.jsx(ce,{className:"p-0",children:e.jsx("div",{className:"divide-y divide-slate-200",children:k.map(R=>e.jsxs("div",{className:"flex items-center gap-4 p-4 hover:bg-slate-50 transition-colors",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("h3",{className:"font-semibold text-slate-900 truncate",children:[R.first_name," ",R.last_name]}),!R.is_active&&e.jsx(ye,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:"Inactive"}),R.is_active&&e.jsx(ye,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Active"})]}),e.jsx("p",{className:"text-sm text-slate-600 truncate mb-1",children:R.email}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(In,{className:"w-3 h-3 text-slate-400"}),e.jsx("span",{className:"text-xs text-slate-600",children:O(R.role_id)}),M(R.role_id)&&e.jsx(ye,{className:"bg-amber-100 text-amber-700 text-xs",children:"Admin"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(J,{variant:"outline",size:"sm",onClick:()=>A(R),children:[e.jsx(As,{className:"w-3 h-3 mr-1"}),"Edit"]}),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>P(R),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(os,{className:"w-3 h-3"})})]})]},R.id))})})]}),e.jsx(Ct,{open:i,onOpenChange:l,children:e.jsxs(Nt,{className:"max-w-2xl",children:[e.jsx(kt,{children:e.jsx(Et,{children:r!=null&&r.id?"Edit Team Member":"Add New Team Member"})}),r&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"first-name",children:"First Name *"}),e.jsx(he,{id:"first-name",value:r.first_name,onChange:R=>a({...r,first_name:R.target.value}),placeholder:"John"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"last-name",children:"Last Name *"}),e.jsx(he,{id:"last-name",value:r.last_name,onChange:R=>a({...r,last_name:R.target.value}),placeholder:"Doe"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"email",children:"Email Address *"}),e.jsx(he,{id:"email",type:"email",value:r.email,onChange:R=>a({...r,email:R.target.value}),placeholder:"john.doe@example.com",disabled:!!r.id}),r.id&&e.jsx("p",{className:"text-xs text-slate-500",children:"Email cannot be changed after creation"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"role",children:"Role *"}),e.jsxs(Ke,{value:r.role_id,onValueChange:R=>a({...r,role_id:R}),children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:"Select a role"})}),e.jsx(We,{children:y.map(R=>e.jsx(re,{value:R.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(In,{className:"w-3 h-3"}),R.name,R.is_admin&&e.jsx("span",{className:"text-xs text-amber-600",children:"(Admin)"})]})},R.id))})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-slate-50 rounded-lg",children:[e.jsx(cs,{id:"is-active",checked:r.is_active,onCheckedChange:R=>a({...r,is_active:R})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ee,{htmlFor:"is-active",className:"cursor-pointer",children:"Active Account"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Inactive accounts cannot log in"})]})]}),!r.id&&e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx(vs,{className:"w-4 h-4 text-blue-600 shrink-0 mt-0.5"}),e.jsx("p",{className:"text-xs text-blue-800",children:"After creating this team member, they can log in using the magic link system on the home page."})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>{l(!1),a(null)},children:"Cancel"}),e.jsx(J,{onClick:C,disabled:w.isPending||N.isPending,className:"bg-indigo-600 hover:bg-indigo-700",children:r!=null&&r.id?"Update Team Member":"Create Team Member"})]})]})}),e.jsx(Ct,{open:o,onOpenChange:c,children:e.jsxs(Nt,{children:[e.jsx(kt,{children:e.jsx(Et,{children:"Delete Team Member"})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-50 rounded-lg",children:[e.jsx(vs,{className:"w-5 h-5 text-red-600 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-red-900 font-medium",children:"Are you sure you want to delete this team member?"}),u&&e.jsxs("p",{className:"text-xs text-red-700 mt-1",children:[u.first_name," ",u.last_name," (",u.email,")"]}),e.jsx("p",{className:"text-xs text-red-700 mt-2",children:"This action cannot be undone. They will no longer be able to access the system."})]})]})}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>{c(!1),d(null)},children:"Cancel"}),e.jsx(J,{onClick:()=>u&&_.mutate(u.id),disabled:_.isPending,className:"bg-red-600 hover:bg-red-700",children:"Delete Team Member"})]})]})})]})})}function jB({isAdmin:t,memberRole:s,isFeatureExcluded:n}){const[r,a]=b.useState(null),[i,l]=b.useState(!1),[o,c]=b.useState(!1),[u,d]=b.useState(null),m=Yt(),{data:h,isLoading:p}=me({queryKey:["discount-codes"],queryFn:()=>X.entities.DiscountCode.list("-created_date"),initialData:[]}),{data:g}=me({queryKey:["organizations"],queryFn:()=>X.entities.Organization.list(),initialData:[]}),{data:v}=me({queryKey:["programs"],queryFn:()=>X.entities.Program.list(),initialData:[]}),{data:y}=me({queryKey:["discount-usage"],queryFn:()=>X.entities.DiscountCodeUsage.list(),initialData:[]}),j=Le({mutationFn:E=>X.entities.DiscountCode.create(E),onSuccess:()=>{m.invalidateQueries({queryKey:["discount-codes"]}),l(!1),a(null),te.success("Discount code created successfully")},onError:E=>{te.error("Failed to create discount code: "+E.message)}}),w=Le({mutationFn:({id:E,codeData:R})=>X.entities.DiscountCode.update(E,R),onSuccess:()=>{m.invalidateQueries({queryKey:["discount-codes"]}),l(!1),a(null),te.success("Discount code updated successfully")},onError:E=>{te.error("Failed to update discount code: "+E.message)}}),N=Le({mutationFn:E=>X.entities.DiscountCode.delete(E),onSuccess:()=>{m.invalidateQueries({queryKey:["discount-codes"]}),c(!1),d(null),te.success("Discount code deleted successfully")},onError:E=>{te.error("Failed to delete discount code: "+E.message)}}),_=E=>{if(E.organization_id){const R=y.find(F=>F.discount_code_id===E.id&&F.organization_id===E.organization_id);return!R||R.usage_count===0}else return(E.current_usage_count||0)===0},T=()=>{a({code:"",type:"percentage",value:0,description:"",is_active:!1,expires_at:"",min_purchase_amount:0,max_usage_count:null,program_tag:"",organization_id:""}),l(!0)},A=E=>{a({...E,expires_at:E.expires_at?Mt(new Date(E.expires_at),"yyyy-MM-dd'T'HH:mm"):"",organization_id:E.organization_id||"",program_tag:E.program_tag||"",max_usage_count:E.max_usage_count||null}),l(!0)},P=E=>{a({...E,id:void 0,code:E.code+"_COPY",is_active:!1,current_usage_count:0,expires_at:E.expires_at?Mt(new Date(E.expires_at),"yyyy-MM-dd'T'HH:mm"):"",organization_id:E.organization_id||"",program_tag:E.program_tag||""}),l(!0)},C=E=>{if(!_(E)){te.error("Cannot delete a discount code that has been used");return}d(E),c(!0)},O=async E=>{try{await X.entities.DiscountCode.update(E.id,{is_active:!E.is_active}),m.invalidateQueries({queryKey:["discount-codes"]}),te.success(`Discount code ${E.is_active?"deactivated":"activated"}`)}catch(R){te.error("Failed to update status: "+R.message)}},M=()=>{if(!r.code.trim()){te.error("Code is required");return}if(r.value<=0){te.error("Value must be greater than 0");return}if(r.type==="percentage"&&r.value>100){te.error("Percentage cannot exceed 100%");return}const E={code:r.code.toUpperCase().trim(),type:r.type,value:parseFloat(r.value),description:r.description||"",is_active:r.is_active,expires_at:r.expires_at?new Date(r.expires_at).toISOString():null,min_purchase_amount:parseFloat(r.min_purchase_amount)||0,max_usage_count:r.max_usage_count?parseInt(r.max_usage_count):null,program_tag:r.program_tag||null,organization_id:r.organization_id||null};r.id?w.mutate({id:r.id,codeData:E}):j.mutate(E)},k=E=>{if(E.organization_id){const R=y.find(z=>z.discount_code_id===E.id&&z.organization_id===E.organization_id);return{used:(R==null?void 0:R.usage_count)||0,max:E.max_usage_count,hasMax:!!E.max_usage_count}}else return{used:E.current_usage_count||0,max:E.max_usage_count,hasMax:!!E.max_usage_count}};return!t||n("page_DiscountCodeManagement")?null:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Discount Code Management"}),e.jsx("p",{className:"text-slate-600",children:"Create and manage discount codes for program ticket purchases"})]}),e.jsxs(J,{onClick:T,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Create Code"]})]}),p?e.jsx("div",{className:"text-center py-12",children:"Loading discount codes..."}):h.length===0?e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(Rs,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No Discount Codes Yet"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"Create your first discount code to start offering promotions"}),e.jsxs(J,{onClick:T,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Create First Code"]})]})}):e.jsx("div",{className:"grid gap-6",children:h.map(E=>{const R=k(E),F=E.organization_id?g.find(V=>V.id===E.organization_id):null,z=E.expires_at&&new Date(E.expires_at)<new Date;return e.jsxs(le,{className:`border-2 ${E.is_active?z?"border-red-200 bg-red-50":"border-slate-200":"border-slate-200 bg-slate-50"}`,children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Rs,{className:"w-5 h-5 text-blue-600"}),e.jsx(Ue,{className:"text-2xl font-bold",children:E.code}),E.is_active?e.jsx(ye,{className:"bg-green-100 text-green-700",children:"Active"}):e.jsx(ye,{className:"bg-slate-200 text-slate-700",children:"Draft"}),z&&e.jsx(ye,{className:"bg-red-100 text-red-700",children:"Expired"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[E.type==="percentage"?e.jsxs(ye,{variant:"outline",className:"bg-purple-50 text-purple-700 border-purple-200",children:[E.value,"% OFF"]}):e.jsxs(ye,{variant:"outline",className:"bg-purple-50 text-purple-700 border-purple-200",children:["",E.value.toFixed(2)," OFF"]}),E.organization_id?e.jsxs(ye,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:[e.jsx(Na,{className:"w-3 h-3 mr-1"}),(F==null?void 0:F.name)||"Organization"]}):e.jsxs(ye,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[e.jsx(B5,{className:"w-3 h-3 mr-1"}),"Global"]}),E.program_tag&&e.jsx(ye,{variant:"outline",className:"bg-amber-50 text-amber-700 border-amber-200",children:E.program_tag})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(J,{variant:"outline",size:"sm",onClick:()=>A(E),children:[e.jsx(As,{className:"w-3 h-3 mr-1"}),"Edit"]}),e.jsxs(J,{variant:"outline",size:"sm",onClick:()=>P(E),children:[e.jsx(Va,{className:"w-3 h-3 mr-1"}),"Copy"]}),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>O(E),children:E.is_active?"Deactivate":"Activate"}),_(E)&&e.jsx(J,{variant:"outline",size:"sm",onClick:()=>C(E),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(os,{className:"w-3 h-3"})})]})]})}),e.jsx(ce,{className:"pt-4",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[E.description&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-slate-500 mb-1",children:"Description"}),e.jsx("p",{className:"text-sm text-slate-700",children:E.description})]}),E.min_purchase_amount>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-slate-500 mb-1",children:"Minimum Purchase"}),e.jsxs("p",{className:"text-sm text-slate-700",children:["",E.min_purchase_amount.toFixed(2)]})]}),E.expires_at&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-slate-500 mb-1",children:"Expires"}),e.jsx("p",{className:`text-sm ${z?"text-red-600 font-medium":"text-slate-700"}`,children:Mt(new Date(E.expires_at),"MMM d, yyyy h:mm a")})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-slate-500 mb-1",children:"Usage"}),R.hasMax?e.jsxs("p",{className:"text-sm text-slate-700",children:[R.used," / ",R.max," times used"]}):e.jsxs("p",{className:"text-sm text-slate-700",children:[R.used," times used (no limit)"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-slate-500 mb-1",children:"Created"}),e.jsx("p",{className:"text-sm text-slate-700",children:Mt(new Date(E.created_date),"MMM d, yyyy")})]})]})]})})]},E.id)})}),e.jsx(Ct,{open:i,onOpenChange:l,children:e.jsxs(Nt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(kt,{children:e.jsx(Et,{children:r!=null&&r.id?"Edit Discount Code":"Create New Discount Code"})}),r&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"code",children:"Code *"}),e.jsx(he,{id:"code",value:r.code,onChange:E=>a({...r,code:E.target.value.toUpperCase()}),placeholder:"e.g., SUMMER20"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"type",children:"Type *"}),e.jsxs(Ke,{value:r.type,onValueChange:E=>a({...r,type:E}),children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"percentage",children:"Percentage"}),e.jsx(re,{value:"fixed",children:"Fixed Amount"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ee,{htmlFor:"value",children:["Value * ",r.type==="percentage"?"(%)":"()"]}),e.jsx(he,{id:"value",type:"number",step:"0.01",min:"0",max:r.type==="percentage"?"100":void 0,value:r.value,onChange:E=>a({...r,value:E.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"description",children:"Description"}),e.jsx(Gt,{id:"description",value:r.description,onChange:E=>a({...r,description:E.target.value}),placeholder:"Internal description for this code...",rows:2})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"organization",children:"Organization (Optional)"}),e.jsxs(Ke,{value:r.organization_id,onValueChange:E=>a({...r,organization_id:E}),children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:"Global (all organizations)"})}),e.jsxs(We,{children:[e.jsx(re,{value:null,children:"Global (all organizations)"}),g.map(E=>e.jsx(re,{value:E.id,children:E.name},E.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"program",children:"Program (Optional)"}),e.jsxs(Ke,{value:r.program_tag,onValueChange:E=>a({...r,program_tag:E}),children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:"All programs"})}),e.jsxs(We,{children:[e.jsx(re,{value:null,children:"All programs"}),v.map(E=>e.jsx(re,{value:E.program_tag,children:E.name},E.id))]})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"min-purchase",children:"Minimum Purchase ()"}),e.jsx(he,{id:"min-purchase",type:"number",step:"0.01",min:"0",value:r.min_purchase_amount,onChange:E=>a({...r,min_purchase_amount:E.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"max-usage",children:"Max Uses (Optional)"}),e.jsx(he,{id:"max-usage",type:"number",min:"1",value:r.max_usage_count||"",onChange:E=>a({...r,max_usage_count:E.target.value}),placeholder:"Unlimited"}),e.jsx("p",{className:"text-xs text-slate-500",children:r.organization_id?"Per organization":"Total across all organizations"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"expires",children:"Expiry Date (Optional)"}),e.jsx(he,{id:"expires",type:"datetime-local",value:r.expires_at,onChange:E=>a({...r,expires_at:E.target.value})})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-slate-50 rounded-lg",children:[e.jsx(cs,{id:"is-active",checked:r.is_active,onCheckedChange:E=>a({...r,is_active:E})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ee,{htmlFor:"is-active",className:"cursor-pointer font-medium",children:"Active"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Only active codes can be used by members"})]})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>{l(!1),a(null)},children:"Cancel"}),e.jsx(J,{onClick:M,disabled:j.isPending||w.isPending,className:"bg-blue-600 hover:bg-blue-700",children:r!=null&&r.id?"Update Code":"Create Code"})]})]})}),e.jsx(Ct,{open:o,onOpenChange:c,children:e.jsxs(Nt,{children:[e.jsx(kt,{children:e.jsx(Et,{children:"Delete Discount Code"})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-50 rounded-lg",children:[e.jsx(vs,{className:"w-5 h-5 text-red-600 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-red-900 font-medium",children:['Are you sure you want to delete "',u==null?void 0:u.code,'"?']}),e.jsx("p",{className:"text-xs text-red-700 mt-1",children:"This action cannot be undone."})]})]})}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>{c(!1),d(null)},children:"Cancel"}),e.jsx(J,{onClick:()=>u&&N.mutate(u.id),disabled:N.isPending,className:"bg-red-600 hover:bg-red-700",children:"Delete Code"})]})]})})]})})}var Hhe=Symbol("radix.slottable");function Khe(t){const s=({children:n})=>e.jsx(e.Fragment,{children:n});return s.displayName=`${t}.Slottable`,s.__radixId=Hhe,s}var wB="AlertDialog",[Ghe]=vr(wB,[w3]),Xl=w3(),NB=t=>{const{__scopeAlertDialog:s,...n}=t,r=Xl(s);return e.jsx(M0,{...r,...n,modal:!0})};NB.displayName=wB;var Yhe="AlertDialogTrigger",Qhe=b.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,a=Xl(n);return e.jsx(oX,{...a,...r,ref:s})});Qhe.displayName=Yhe;var Jhe="AlertDialogPortal",_B=t=>{const{__scopeAlertDialog:s,...n}=t,r=Xl(s);return e.jsx(D0,{...r,...n})};_B.displayName=Jhe;var Xhe="AlertDialogOverlay",SB=b.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,a=Xl(n);return e.jsx(mh,{...a,...r,ref:s})});SB.displayName=Xhe;var ju="AlertDialogContent",[Zhe,eme]=Ghe(ju),tme=Khe("AlertDialogContent"),CB=b.forwardRef((t,s)=>{const{__scopeAlertDialog:n,children:r,...a}=t,i=Xl(n),l=b.useRef(null),o=xs(s,l),c=b.useRef(null);return e.jsx(rX,{contentName:ju,titleName:kB,docsSlug:"alert-dialog",children:e.jsx(Zhe,{scope:n,cancelRef:c,children:e.jsxs(fh,{role:"alertdialog",...i,...a,ref:o,onOpenAutoFocus:jt(a.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[e.jsx(tme,{children:r}),e.jsx(nme,{contentRef:l})]})})})});CB.displayName=ju;var kB="AlertDialogTitle",EB=b.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,a=Xl(n);return e.jsx(Yf,{...a,...r,ref:s})});EB.displayName=kB;var PB="AlertDialogDescription",TB=b.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,a=Xl(n);return e.jsx(Qf,{...a,...r,ref:s})});TB.displayName=PB;var sme="AlertDialogAction",AB=b.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,a=Xl(n);return e.jsx(O0,{...a,...r,ref:s})});AB.displayName=sme;var MB="AlertDialogCancel",DB=b.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:a}=eme(MB,n),i=Xl(n),l=xs(s,a);return e.jsx(O0,{...i,...r,ref:l})});DB.displayName=MB;var nme=({contentRef:t})=>{const s=`\`${ju}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ju}\` by passing a \`${PB}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ju}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return b.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(s)},[s,t]),null},rme=NB,ame=_B,OB=SB,RB=CB,FB=AB,LB=DB,IB=EB,BB=TB;const Ml=rme,ime=ame,qB=b.forwardRef(({className:t,...s},n)=>e.jsx(OB,{className:tt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:n}));qB.displayName=OB.displayName;const Vi=b.forwardRef(({className:t,...s},n)=>e.jsxs(ime,{children:[e.jsx(qB,{}),e.jsx(RB,{ref:n,className:tt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s})]}));Vi.displayName=RB.displayName;const Wi=({className:t,...s})=>e.jsx("div",{className:tt("flex flex-col space-y-2 text-center sm:text-left",t),...s});Wi.displayName="AlertDialogHeader";const Hi=({className:t,...s})=>e.jsx("div",{className:tt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});Hi.displayName="AlertDialogFooter";const Ki=b.forwardRef(({className:t,...s},n)=>e.jsx(IB,{ref:n,className:tt("text-lg font-semibold",t),...s}));Ki.displayName=IB.displayName;const Gi=b.forwardRef(({className:t,...s},n)=>e.jsx(BB,{ref:n,className:tt("text-sm text-muted-foreground",t),...s}));Gi.displayName=BB.displayName;const Yi=b.forwardRef(({className:t,...s},n)=>e.jsx(FB,{ref:n,className:tt(ef(),t),...s}));Yi.displayName=FB.displayName;const Qi=b.forwardRef(({className:t,...s},n)=>e.jsx(LB,{ref:n,className:tt(ef({variant:"outline"}),"mt-2 sm:mt-0",t),...s}));Qi.displayName=LB.displayName;function zB({memberInfo:t,memberRole:s,reloadMemberInfo:n}){var B;const[r,a]=Be.useState(null),[i,l]=Be.useState(!1),[o,c]=Be.useState(null),[u,d]=Be.useState(new Set),[m,h]=Be.useState(!1),[p,g]=Be.useState(!1),v=Be.useRef(!1),y=(s==null?void 0:s.show_tours)!==!1,j=((B=t==null?void 0:t.page_tours_seen)==null?void 0:B.MyTickets)===!0;Be.useEffect(()=>{y&&!j&&t&&!v.current&&(v.current=!0,g(!0),h(!0))},[y,j,t]);const{data:w,isLoading:N}=me({queryKey:["my-tickets",t==null?void 0:t.email],queryFn:async()=>t!=null&&t.email?(await X.entities.Booking.list("-created_date")).filter(L=>L.attendee_email===t.email):[],enabled:!!(t!=null&&t.email),initialData:[]}),{data:_,isLoading:T}=me({queryKey:["events"],queryFn:()=>X.entities.Event.list(),initialData:[]}),{data:A,isLoading:P}=me({queryKey:["members"],queryFn:()=>X.entities.Member.list(),initialData:[]}),C=async()=>{h(!1),g(!1)},O=async()=>{h(!1),g(!1),await k("MyTickets")},M=()=>{h(!1),g(!1),setTimeout(()=>{h(!0),g(!0)},10)},k=async $=>{if(t&&!t.is_team_member)try{const L=await X.entities.Member.get(t.id);if(L){const I={...L.page_tours_seen||{},[$]:!0};await X.entities.Member.update(L.id,{page_tours_seen:I});const W={...t,page_tours_seen:I};sessionStorage.setItem("agcas_member",JSON.stringify(W)),n&&n()}}catch(L){console.error("Failed to update tour status:",L)}};if(!t)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-slate-600",children:"Loading..."})});const E=N||T||P,R=$=>{switch($){case"confirmed":return"bg-green-100 text-green-700 border-green-200";case"pending":return"bg-amber-100 text-amber-700 border-amber-200";case"cancelled":return"bg-red-100 text-red-700 border-red-200";default:return"bg-slate-100 text-slate-700 border-slate-200"}},F=$=>$?new Date($).toISOString().replace(/[-:]/g,"").split(".")[0]+"Z":"",z=($,L)=>{const I=$.start_date?new Date($.start_date):null,W=$.end_date?new Date($.end_date):null;if(!I)return;const q=W||new Date(I.getTime()+3600*1e3),Z=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//AGCAS Events//iConnect//EN","CALSCALE:GREGORIAN","METHOD:PUBLISH","BEGIN:VEVENT",`UID:${L.id}@agcas-events.com`,`DTSTAMP:${F(new Date)}`,`DTSTART:${F(I)}`,`DTEND:${F(q)}`,`SUMMARY:${$.title}`,$.description?`DESCRIPTION:${$.description.replace(/\n/g,"\\n")}`:"",$.location?`LOCATION:${$.location}`:"",`STATUS:${L.status==="confirmed"?"CONFIRMED":"TENTATIVE"}`,"END:VEVENT","END:VCALENDAR"].filter(ae=>ae).join(`\r
`),Q=new Blob([Z],{type:"text/calendar;charset=utf-8"}),Y=window.URL.createObjectURL(Q),K=document.createElement("a");K.href=Y,K.download=`${$.title.replace(/[^a-z0-9]/gi,"_")}.ics`,document.body.appendChild(K),K.click(),document.body.removeChild(K),window.URL.revokeObjectURL(Y)},V=$=>{c($),l(!0)},U=async()=>{if(!o||!o.backstage_order_id){te.error("Unable to cancel: Missing ticket information"),l(!1);return}a(o.id),l(!1);try{const L=(await X.entities.Member.list()).find(W=>W.email===t.email);if(!L){te.error("Unable to verify member identity"),a(null),c(null);return}const I=await X.functions.invoke("cancelTicketViaFlow",{orderId:o.backstage_order_id,cancelReason:"Cancelled by member via iConnect",memberId:L.id});if(I.data.success)d(W=>new Set([...W,o.id])),te.success("Ticket cancelled successfully"),setTimeout(()=>{window.location.reload()},1500);else throw new Error(I.data.error||"Failed to cancel ticket")}catch($){console.error("Cancellation error:",$),te.error("Failed to cancel ticket. Please try again or contact support.")}finally{a(null),c(null)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:[m&&y&&e.jsx(ld,{tourGroupName:"MyTickets",viewId:null,onComplete:C,onDismissPermanently:O,autoShow:p}),e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900",children:"My Tickets"}),y&&e.jsx(od,{onClick:M})]}),e.jsx("p",{className:"text-slate-600",children:"Events you are registered to attend"})]}),E?e.jsx("div",{className:"space-y-6",children:Array(4).fill(0).map(($,L)=>e.jsxs(le,{className:"animate-pulse border-slate-200",children:[e.jsxs(Fe,{children:[e.jsx("div",{className:"h-6 bg-slate-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/2"})]}),e.jsx(ce,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-slate-200 rounded"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded w-5/6"})]})})]},L))}):w.length===0?e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(Rs,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No tickets yet"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"You don't have any event tickets registered in your name yet"}),e.jsx(Ht,{to:Pe("Events"),children:e.jsx("button",{className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Browse Events"})})]})}):e.jsx("div",{className:"space-y-6",children:w.map(($,L)=>{const I=_.find(K=>K.id===$.event_id),W=A.find(K=>K.id===$.member_id);if(!I)return null;const q=I.start_date?new Date(I.start_date):null,Z=$.member_id===t.id||t.email===$.attendee_email,Q=$.status==="cancelled"||u.has($.id),Y=I.backstage_public_url||null;return e.jsxs(le,{id:L===0?"first-my-ticket-card":void 0,className:`border-slate-200 shadow-sm hover:shadow-md transition-shadow ${Q?"opacity-75 border-red-300 bg-red-50/30":""}`,children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[e.jsx(Ue,{className:`text-xl ${Q?"line-through text-slate-500":""}`,children:I.title}),I.program_tag&&e.jsx(ye,{className:"bg-blue-100 text-blue-700 border-blue-200",children:I.program_tag})]}),e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx(ye,{id:L===0?"first-ticket-status-badge":void 0,className:R(Q?"cancelled":$.status),children:Q?"cancelled":$.status})}),!Z&&W&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 mt-2",children:[e.jsx(Xs,{className:"w-3 h-3"}),e.jsxs("span",{children:["Booked by ",W.first_name," ",W.last_name]})]})]}),I.image_url&&e.jsx("img",{src:I.image_url,alt:I.title,className:`w-24 h-24 object-cover rounded-lg shrink-0 ${Q?"grayscale":""}`})]})}),e.jsxs(ce,{className:"pt-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[q&&e.jsxs("div",{className:`flex items-center gap-2 text-sm ${Q?"text-slate-400":"text-slate-600"}`,children:[e.jsx(Ns,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{children:Mt(q,"EEEE, MMMM d, yyyy")})]}),q&&e.jsxs("div",{className:`flex items-center gap-2 text-sm ${Q?"text-slate-400":"text-slate-600"}`,children:[e.jsx(tn,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{children:Mt(q,"h:mm a")})]}),I.location&&e.jsxs("div",{className:`flex items-center gap-2 text-sm ${Q?"text-slate-400":"text-slate-600"}`,children:[e.jsx(Rr,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{className:"line-clamp-1",children:I.location})]})]}),e.jsxs("div",{className:"space-y-3",children:[$.backstage_order_id&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[e.jsx(Rs,{className:"w-3 h-3 text-purple-400"}),e.jsx("span",{className:"text-slate-600",children:"Ticket ID:"}),e.jsx("span",{className:"font-mono text-purple-600 bg-purple-50 px-2 py-0.5 rounded",children:$.backstage_order_id})]}),$.booking_reference&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[e.jsx("span",{className:"text-slate-600",children:"Booking Ref:"}),e.jsx("span",{className:"font-semibold text-slate-900",children:$.booking_reference})]}),!Q&&q&&e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(J,{id:L===0?"add-to-calendar-button":void 0,variant:"outline",size:"sm",onClick:()=>z(I,$),className:"flex-1",children:[e.jsx(Zn,{className:"w-4 h-4 mr-2"}),"Add to Calendar"]}),$.backstage_order_id&&e.jsx(J,{id:L===0?"cancel-ticket-button":void 0,variant:"outline",size:"sm",onClick:()=>V($),disabled:r===$.id,className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(As,{className:"w-4 h-4"})})]}),Y&&e.jsx(J,{id:L===0?"go-to-event-page-button":void 0,variant:"outline",size:"sm",asChild:!0,className:"w-full",children:e.jsxs("a",{href:Y,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(Js,{className:"w-4 h-4 mr-2"}),"Go to Event Page"]})})]}),Q&&e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx(vs,{className:"w-4 h-4 text-red-600 shrink-0 mt-0.5"}),e.jsx("p",{className:"text-xs text-red-800 font-medium",children:"This ticket has been cancelled"})]})]})]}),$.status==="pending"&&!Q&&e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-amber-50 border border-amber-200 rounded-lg mt-4",children:[e.jsx(vs,{className:"w-4 h-4 text-amber-600 shrink-0 mt-0.5"}),e.jsx("p",{className:"text-xs text-amber-800",children:"This ticket is pending confirmation. Please check your email for the confirmation link."})]})]})]},$.id)})})]}),e.jsx(Ml,{open:i,onOpenChange:l,children:e.jsxs(Vi,{children:[e.jsxs(Wi,{children:[e.jsx(Ki,{className:"text-lg font-semibold",children:"Cancel Registration?"}),e.jsx(Gi,{className:"text-sm text-muted-foreground",children:"Cancelling this registration will make the ticket available for reallocation."})]}),e.jsxs(Hi,{children:[e.jsx(Qi,{children:"No, keep registration"}),e.jsx(Yi,{onClick:U,className:"bg-red-600 hover:bg-red-700",children:"Yes, cancel registration"})]})]})})]})}function $B({isAdmin:t,memberRole:s,isFeatureExcluded:n}){const[r,a]=b.useState(24),[i,l]=b.useState(!1),[o,c]=b.useState(null),[u,d]=b.useState(null),[m,h]=b.useState(null),[p,g]=b.useState(""),[v,y]=b.useState(""),[j,w]=b.useState(!1),[N,_]=b.useState(null),[T,A]=b.useState(null),[P,C]=b.useState(null),[O,M]=b.useState(""),[k,E]=b.useState("none"),[R,F]=b.useState("buy_x_get_y_free"),[z,V]=b.useState(""),[U,B]=b.useState(""),[$,L]=b.useState(""),[I,W]=b.useState(""),[q,Z]=b.useState(!1),Q=Yt();b.useEffect(()=>{s!=null&&(!t||n("page_EventSettings"))&&(window.location.href=Pe("Events"))},[t,s,n]);const{data:Y,isLoading:K}=me({queryKey:["events"],queryFn:()=>X.entities.Event.list("-start_date"),initialData:[]}),{data:ae,isLoading:se}=me({queryKey:["system-settings"],queryFn:()=>X.entities.SystemSettings.list(),initialData:[]}),{data:de,isLoading:ue}=me({queryKey:["programs"],queryFn:()=>X.entities.Program.filter({is_active:!0}),initialData:[]});b.useEffect(()=>{const Se=ae.find(at=>at.setting_key==="cancellation_deadline_hours");Se&&a(parseInt(Se.setting_value)||0)},[ae]);const oe=Le({mutationFn:()=>X.functions.invoke("syncBackstageEvents",{}),onSuccess:()=>{Q.invalidateQueries({queryKey:["events"]}),te.success("Events synced successfully")},onError:Se=>{te.error("Failed to sync events: "+Se.message)}}),pe=async()=>{l(!0);try{const Se=ae.find(at=>at.setting_key==="cancellation_deadline_hours");Se?await X.entities.SystemSettings.update(Se.id,{setting_value:r.toString(),description:"Number of hours before event start that cancellations are allowed"}):await X.entities.SystemSettings.create({setting_key:"cancellation_deadline_hours",setting_value:r.toString(),description:"Number of hours before event start that cancellations are allowed"}),Q.invalidateQueries({queryKey:["system-settings"]}),te.success("Settings saved successfully")}catch(Se){te.error("Failed to save settings: "+Se.message)}finally{l(!1)}},je=()=>{oe.mutate()},we=Se=>{c(Se),d(null),h(null),g(Se.description||""),y(Se.backstage_public_url||"")},qe=Se=>{const at=Se.target.files[0];if(at){d(at);const _e=new FileReader;_e.onloadend=()=>{h(_e.result)},_e.readAsDataURL(at)}},ze=async()=>{if(!o)return;const Se=u!==null,at=p!==(o.description||""),_e=v!==(o.backstage_public_url||"");if(!Se&&!at&&!_e){te.error("No changes to save");return}w(!0);try{const $e=sessionStorage.getItem("agcas_member"),nt=$e?JSON.parse($e):null;if(!nt||!nt.email)throw new Error("User session not found. Please log in again.");const dt={eventId:o.id,userEmail:nt.email,description:p,backstagePublicUrl:v};if(Se){const Rt=new FileReader;Rt.readAsDataURL(u),await new Promise((es,Bs)=>{Rt.onload=()=>{dt.imageBase64=Rt.result,dt.fileName=u.name,es()},Rt.onerror=()=>{Bs(new Error("Failed to read image file"))}})}const lt=await X.functions.invoke("updateEventImage",dt);if(lt.data&&lt.data.success)Q.invalidateQueries({queryKey:["events"]}),te.success("Event updated successfully"),c(null),d(null),h(null),g(""),y("");else throw new Error(lt.data?lt.data.error:"Failed to update event")}catch($e){console.error("Event update error:",$e),te.error("Failed to update event: "+$e.message)}finally{w(!1)}},Ee=Se=>{_(Se),A(null),C(null),M(Se.description||"");let at=Se.offer_type||"none";Se.offer_type||(Se.bogo_buy_quantity!==null&&Se.bogo_get_free_quantity!==null?at="bogo":Se.bulk_discount_threshold!==null&&Se.bulk_discount_percentage!==null&&(at="bulk_discount")),E(at),F(Se.bogo_logic_type||"buy_x_get_y_free"),V(Se.bogo_buy_quantity===null||Se.bogo_buy_quantity===void 0?"":Se.bogo_buy_quantity.toString()),B(Se.bogo_get_free_quantity===null||Se.bogo_get_free_quantity===void 0?"":Se.bogo_get_free_quantity.toString()),L(Se.bulk_discount_threshold===null||Se.bulk_discount_threshold===void 0?"":Se.bulk_discount_threshold.toString()),W(Se.bulk_discount_percentage===null||Se.bulk_discount_percentage===void 0?"":Se.bulk_discount_percentage.toString())},Ce=Se=>{const at=Se.target.files[0];if(at){A(at);const _e=new FileReader;_e.onloadend=()=>{C(_e.result)},_e.readAsDataURL(at)}},Ge=(Se,at,_e,$e,nt,dt)=>{const lt={offerType:Se,bogoBuyQuantity:null,bogoGetFreeQuantity:null,bogoLogicType:null,bulkDiscountThreshold:null,bulkDiscountPercentage:null};return Se==="bogo"?(lt.bogoBuyQuantity=at===""||at===null?null:parseInt(at),lt.bogoGetFreeQuantity=_e===""||_e===null?null:parseInt(_e),lt.bogoLogicType=$e):Se==="bulk_discount"&&(lt.bulkDiscountThreshold=nt===""||nt===null?null:parseInt(nt),lt.bulkDiscountPercentage=dt===""||dt===null?null:parseFloat(dt)),lt},Ye=async()=>{if(!N)return;const Se=T!==null,at=O!==(N.description||"");let _e=N.offer_type||"none";N.offer_type||(N.bogo_buy_quantity!==null&&N.bogo_get_free_quantity!==null?_e="bogo":N.bulk_discount_threshold!==null&&N.bulk_discount_percentage!==null&&(_e="bulk_discount"));const $e=Ge(_e,N.bogo_buy_quantity,N.bogo_get_free_quantity,N.bogo_logic_type,N.bulk_discount_threshold,N.bulk_discount_percentage),nt=Ge(k,z,U,R,$,I),dt=JSON.stringify($e)!==JSON.stringify(nt);if(!Se&&!at&&!dt){te.error("No changes to save");return}if(k==="bogo"){if(!z||!U){te.error("Please enter both BOGO buy and free quantities");return}const lt=parseInt(z),Rt=parseInt(U);if(isNaN(lt)||lt<1||isNaN(Rt)||Rt<1){te.error("BOGO quantities must be positive integers");return}}if(k==="bulk_discount"){if(!$||!I){te.error("Please enter both bulk discount threshold and percentage");return}const lt=parseInt($),Rt=parseFloat(I);if(isNaN(lt)||lt<2){te.error("Bulk discount threshold must be an integer of at least 2");return}if(isNaN(Rt)||Rt<0||Rt>100){te.error("Bulk discount percentage must be a number between 0 and 100");return}}Z(!0);try{const lt=sessionStorage.getItem("agcas_member"),Rt=lt?JSON.parse(lt):null;if(!Rt||!Rt.email)throw new Error("User session not found. Please log in again.");const es={programId:N.id,userEmail:Rt.email,description:O,offerType:k};if(k==="bogo"?(es.bogoBuyQuantity=parseInt(z),es.bogoGetFreeQuantity=parseInt(U),es.bogoLogicType=R,es.bulkDiscountThreshold=null,es.bulkDiscountPercentage=null):k==="bulk_discount"?(es.bulkDiscountThreshold=parseInt($),es.bulkDiscountPercentage=parseFloat(I),es.bogoBuyQuantity=null,es.bogoGetFreeQuantity=null,es.bogoLogicType=null):(es.bogoBuyQuantity=null,es.bogoGetFreeQuantity=null,es.bogoLogicType=null,es.bulkDiscountThreshold=null,es.bulkDiscountPercentage=null),Se){const Ss=new FileReader;Ss.readAsDataURL(T),await new Promise((on,Jt)=>{Ss.onload=()=>{es.imageBase64=Ss.result,es.fileName=T.name,on()},Ss.onerror=()=>{Jt(new Error("Failed to read image file"))}})}const Bs=await X.functions.invoke("updateProgramDetails",es);if(Bs.data&&Bs.data.success)Q.invalidateQueries({queryKey:["programs"]}),te.success("Program updated successfully"),_(null),A(null),C(null),M(""),E("none"),F("buy_x_get_y_free"),V(""),B(""),L(""),W("");else throw new Error(Bs.data?Bs.data.error:"Failed to update program")}catch(lt){console.error("Program update error:",lt),te.error("Failed to update program: "+lt.message)}finally{Z(!1)}};if(s==null)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-slate-600",children:"Loading..."})});if(!t||n("page_EventSettings"))return null;const De=Y.filter(Se=>Se.start_date?new Date(Se.start_date)>new Date:!1),it=Y.filter(Se=>Se.start_date?new Date(Se.start_date)<=new Date:!1);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Event Settings"}),e.jsx("p",{className:"text-slate-600",children:"Manage synced events and system configuration"})]}),e.jsxs(J,{onClick:je,disabled:oe.isPending,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(og,{className:`w-4 h-4 mr-2 ${oe.isPending?"animate-spin":""}`}),"Sync Events"]})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm mb-8",children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qa,{className:"w-5 h-5 text-amber-600"}),e.jsx(Ue,{children:"Cancellation Settings"})]})}),e.jsx(ce,{className:"pt-6",children:e.jsx("div",{className:"max-w-2xl space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"cancellation-deadline",children:"Cancellation Deadline (Hours Before Event)"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(he,{id:"cancellation-deadline",type:"number",min:"0",step:"1",value:r,onChange:Se=>a(parseInt(Se.target.value)||0),className:"w-32"}),e.jsx("span",{className:"text-sm text-slate-600",children:"hours"}),e.jsxs(J,{onClick:pe,disabled:i,className:"ml-auto",children:[e.jsx(un,{className:"w-4 h-4 mr-2"}),"Save Settings"]})]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Members will not be able to cancel tickets within this timeframe before the event starts. Set to 0 to allow cancellations up until the event start time."})]})})})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm mb-8",children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Rs,{className:"w-5 h-5 text-purple-600"}),e.jsx(Ue,{children:"Programs"})]})}),e.jsx(ce,{className:"pt-6",children:de.length===0?e.jsx("p",{className:"text-center text-slate-500 py-8",children:"No active programs found"}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:de.map(Se=>e.jsxs(le,{className:"border-slate-200 shadow-sm hover:shadow-md transition-shadow",children:[Se.image_url&&e.jsx("div",{className:"h-32 overflow-hidden bg-slate-100",children:e.jsx("img",{src:Se.image_url,alt:Se.name,className:"w-full h-full object-cover"})}),e.jsxs(Fe,{className:"border-b border-slate-200",children:[e.jsx(Ue,{className:"text-base",children:Se.name}),Se.description&&e.jsx("p",{className:"text-sm text-slate-600 line-clamp-2 mt-2",children:Se.description})]}),e.jsx(ce,{className:"pt-4",children:e.jsxs(J,{size:"sm",variant:"outline",onClick:()=>Ee(Se),className:"w-full",children:[e.jsx(hi,{className:"w-3 h-3 mr-2"}),"Edit Program"]})})]},Se.id))})})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(Ns,{className:"w-6 h-6 text-blue-600"}),"Upcoming Events (",De.length,")"]}),De.length===0?e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsx(ce,{className:"p-8 text-center text-slate-500",children:"No upcoming events synced"})}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:De.map(Se=>e.jsxs(le,{className:"border-slate-200 shadow-sm hover:shadow-md transition-shadow",children:[Se.image_url&&e.jsx("div",{className:"h-32 overflow-hidden bg-slate-100",children:e.jsx("img",{src:Se.image_url,alt:Se.title,className:"w-full h-full object-cover"})}),e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx(Ue,{className:"text-base line-clamp-2",children:Se.title}),Se.program_tag&&e.jsx(ye,{className:"bg-blue-100 text-blue-700 border-blue-200 shrink-0",children:Se.program_tag})]})}),e.jsxs(ce,{className:"pt-4 space-y-2",children:[Se.start_date&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600",children:[e.jsx(tn,{className:"w-3 h-3 text-slate-400"}),e.jsx("span",{children:Mt(new Date(Se.start_date),"MMM d, yyyy h:mm a")})]}),Se.location&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600",children:[e.jsx(Rr,{className:"w-3 h-3 text-slate-400"}),e.jsx("span",{className:"line-clamp-1",children:Se.location})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600",children:[e.jsx(Rs,{className:"w-3 h-3 text-slate-400"}),e.jsx("span",{children:Se.available_seats===0||Se.available_seats===null?"Unlimited seats":`${Se.available_seats} seats available`})]}),Se.ticket_price>0&&e.jsx("div",{className:"pt-2 mt-2 border-t border-slate-200",children:e.jsxs("span",{className:"text-sm font-semibold text-slate-900",children:["",Se.ticket_price.toFixed(2)]})}),e.jsx("div",{className:"pt-2",children:e.jsxs(J,{size:"sm",variant:"outline",onClick:()=>we(Se),className:"w-full",children:[e.jsx(hi,{className:"w-3 h-3 mr-2"}),"Edit Event"]})})]})]},Se.id))})]}),it.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(Ns,{className:"w-6 h-6 text-slate-400"}),"Past Events (",it.length,")"]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:it.map(Se=>e.jsxs(le,{className:"border-slate-200 shadow-sm opacity-60",children:[Se.image_url&&e.jsx("div",{className:"h-32 overflow-hidden bg-slate-100",children:e.jsx("img",{src:Se.image_url,alt:Se.title,className:"w-full h-full object-cover"})}),e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx(Ue,{className:"text-base line-clamp-2",children:Se.title}),Se.program_tag&&e.jsx(ye,{variant:"outline",className:"shrink-0",children:Se.program_tag})]})}),e.jsxs(ce,{className:"pt-4 space-y-2",children:[Se.start_date&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[e.jsx(tn,{className:"w-3 h-3 text-slate-400"}),e.jsx("span",{children:Mt(new Date(Se.start_date),"MMM d, yyyy h:mm a")})]}),Se.location&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[e.jsx(Rr,{className:"w-3 h-3 text-slate-400"}),e.jsx("span",{className:"line-clamp-1",children:Se.location})]})]})]},Se.id))})]})]})]}),e.jsx(Ct,{open:!!o,onOpenChange:Se=>{Se||(c(null),d(null),h(null),g(""),y(""))},children:e.jsxs(Nt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(kt,{children:e.jsx(Et,{children:"Edit Event Details"})}),o&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:o.title}),e.jsx("p",{className:"text-sm text-slate-600",children:"Update the image, description, and public event link"})]}),e.jsxs("div",{children:[e.jsx(ee,{className:"text-sm font-medium text-slate-700 mb-2 block",children:"Current Image"}),o.image_url?e.jsx("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:e.jsx("img",{src:o.image_url,alt:"Current event image",className:"w-full h-48 object-cover"})}):e.jsxs("div",{className:"border border-slate-200 rounded-lg p-8 text-center bg-slate-50",children:[e.jsx(hi,{className:"w-12 h-12 text-slate-300 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-slate-500",children:"No image set"})]})]}),m&&e.jsxs("div",{children:[e.jsx(ee,{className:"text-sm font-medium text-slate-700 mb-2 block",children:"New Image Preview"}),e.jsx("div",{className:"border border-blue-200 rounded-lg overflow-hidden",children:e.jsx("img",{src:m,alt:"Preview",className:"w-full h-48 object-cover"})})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"image-upload",className:"text-sm font-medium text-slate-700 mb-2 block",children:"Select New Image (Optional)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{id:"image-upload",type:"file",accept:"image/*",onChange:qe,className:"flex-1"}),u&&e.jsx(J,{variant:"ghost",size:"icon",onClick:()=>{d(null),h(null)},children:e.jsx(_s,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"event-description",className:"text-sm font-medium text-slate-700 mb-2 block",children:"Event Description"}),e.jsx(Gt,{id:"event-description",value:p,onChange:Se=>g(Se.target.value),placeholder:"Enter event description...",rows:6,className:"w-full"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"This description will override the synced description from Backstage"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"event-public-url",className:"text-sm font-medium text-slate-700 mb-2 block",children:"Public Event Page URL"}),e.jsx(he,{id:"event-public-url",type:"url",value:v,onChange:Se=>y(Se.target.value),placeholder:"https://agcasevents.zohobackstage.eu/event/...",className:"w-full"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Paste the public Backstage event link that attendees will use to view event details"})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>{c(null),d(null),h(null),g(""),y("")},disabled:j,children:"Cancel"}),e.jsx(J,{onClick:ze,disabled:j,className:"bg-blue-600 hover:bg-blue-700",children:j?e.jsxs(e.Fragment,{children:[e.jsx(og,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(un,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]})]})}),e.jsx(Ct,{open:!!N,onOpenChange:Se=>{Se||(_(null),A(null),C(null),M(""),E("none"),F("buy_x_get_y_free"),V(""),B(""),L(""),W(""))},children:e.jsxs(Nt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(kt,{children:e.jsx(Et,{children:"Edit Program Details"})}),N&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:N.name}),e.jsx("p",{className:"text-sm text-slate-600",children:"Update the image, description, and offer details for this program"})]}),e.jsxs("div",{children:[e.jsx(ee,{className:"text-sm font-medium text-slate-700 mb-2 block",children:"Current Image"}),N.image_url?e.jsx("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:e.jsx("img",{src:N.image_url,alt:"Current program image",className:"w-full h-48 object-cover"})}):e.jsxs("div",{className:"border border-slate-200 rounded-lg p-8 text-center bg-slate-50",children:[e.jsx(hi,{className:"w-12 h-12 text-slate-300 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-slate-500",children:"No image set"})]})]}),P&&e.jsxs("div",{children:[e.jsx(ee,{className:"text-sm font-medium text-slate-700 mb-2 block",children:"New Image Preview"}),e.jsx("div",{className:"border border-blue-200 rounded-lg overflow-hidden",children:e.jsx("img",{src:P,alt:"Preview",className:"w-full h-48 object-cover"})})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"program-image-upload",className:"text-sm font-medium text-slate-700 mb-2 block",children:"Select New Image (Optional)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{id:"program-image-upload",type:"file",accept:"image/*",onChange:Ce,className:"flex-1"}),T&&e.jsx(J,{variant:"ghost",size:"icon",onClick:()=>{A(null),C(null)},children:e.jsx(_s,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"program-description",className:"text-sm font-medium text-slate-700 mb-2 block",children:"Program Description"}),e.jsx(Gt,{id:"program-description",value:O,onChange:Se=>M(Se.target.value),placeholder:"Enter program description...",rows:6,className:"w-full"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"This description will be displayed on the program cards"})]}),e.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-lg space-y-4",children:[e.jsxs("div",{children:[e.jsx(ee,{className:"text-sm font-medium text-slate-700 mb-3 block",children:"Offer Type"}),e.jsx(of,{value:k,onValueChange:E,children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg border-2 cursor-pointer transition-colors ${k==="none"?"border-blue-500 bg-blue-50":"border-slate-200 hover:bg-slate-100"}`,onClick:()=>E("none"),children:[e.jsx(Al,{value:"none",id:"offer-none",className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ee,{htmlFor:"offer-none",className:"font-medium cursor-pointer",children:"No Offer"}),e.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Standard pricing with no discounts"})]})]}),e.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg border-2 cursor-pointer transition-colors ${k==="bogo"?"border-blue-500 bg-blue-50":"border-slate-200 hover:bg-slate-100"}`,onClick:()=>E("bogo"),children:[e.jsx(Al,{value:"bogo",id:"offer-bogo",className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ee,{htmlFor:"offer-bogo",className:"font-medium cursor-pointer",children:"BOGO (Buy X Get Y Free)"}),e.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Customers receive free tickets with their purchase"})]})]}),e.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg border-2 cursor-pointer transition-colors ${k==="bulk_discount"?"border-blue-500 bg-blue-50":"border-slate-200 hover:bg-slate-100"}`,onClick:()=>E("bulk_discount"),children:[e.jsx(Al,{value:"bulk_discount",id:"offer-bulk",className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ee,{htmlFor:"offer-bulk",className:"font-medium cursor-pointer",children:"Bulk Discount"}),e.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Percentage discount when buying multiple tickets"})]})]})]})})]}),k==="bogo"&&e.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-300",children:[e.jsxs("div",{children:[e.jsx(ee,{className:"text-sm font-medium text-slate-700 mb-2 block",children:"BOGO Configuration"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"bogo-buy-qty",className:"text-xs text-slate-600 mb-1 block",children:"Buy Quantity"}),e.jsx(he,{id:"bogo-buy-qty",type:"number",min:"1",value:z,onChange:Se=>V(Se.target.value),placeholder:"e.g., 4"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"bogo-free-qty",className:"text-xs text-slate-600 mb-1 block",children:"Get Free Quantity"}),e.jsx(he,{id:"bogo-free-qty",type:"number",min:"1",value:U,onChange:Se=>B(Se.target.value),placeholder:"e.g., 1"})]})]})]}),e.jsxs("div",{children:[e.jsx(ee,{className:"text-sm font-medium text-slate-700 mb-2 block",children:"BOGO Logic Type"}),e.jsx(of,{value:R,onValueChange:F,children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Al,{value:"buy_x_get_y_free",id:"logic-legacy",className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ee,{htmlFor:"logic-legacy",className:"text-sm cursor-pointer",children:"Buy X, Get Y Free (Legacy)"}),e.jsxs("p",{className:"text-xs text-slate-500 mt-0.5",children:["User enters ",z||"X","  Receives ",z&&U?parseInt(z)+parseInt(U):"X+Y","  Pays for ",z||"X"]})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Al,{value:"enter_total_pay_less",id:"logic-new",className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ee,{htmlFor:"logic-new",className:"text-sm cursor-pointer",children:"Enter Total, Pay for Fewer"}),e.jsxs("p",{className:"text-xs text-slate-500 mt-0.5",children:["User enters ",z&&U?parseInt(z)+parseInt(U):"X+Y","  Receives ",z&&U?parseInt(z)+parseInt(U):"X+Y","  Pays for ",z||"X"]})]})]})]})})]})]}),k==="bulk_discount"&&e.jsx("div",{className:"space-y-4 pt-4 border-t border-slate-300",children:e.jsxs("div",{children:[e.jsx(ee,{className:"text-sm font-medium text-slate-700 mb-2 block",children:"Bulk Discount Configuration"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"bulk-threshold",className:"text-xs text-slate-600 mb-1 block",children:"Minimum Tickets"}),e.jsx(he,{id:"bulk-threshold",type:"number",min:"2",value:$,onChange:Se=>L(Se.target.value),placeholder:"e.g., 10"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"bulk-percentage",className:"text-xs text-slate-600 mb-1 block",children:"Discount %"}),e.jsx(he,{id:"bulk-percentage",type:"number",min:"0",max:"100",step:"0.1",value:I,onChange:Se=>W(Se.target.value),placeholder:"e.g., 15"})]})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:$&&I?`Customers buying ${$}+ tickets will receive ${I}% off`:"Enter values to see preview"})]})})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>{_(null),A(null),C(null),M(""),E("none"),F("buy_x_get_y_free"),V(""),B(""),L(""),W("")},disabled:q,children:"Cancel"}),e.jsx(J,{onClick:Ye,disabled:q,className:"bg-blue-600 hover:bg-blue-700",children:q?e.jsxs(e.Fragment,{children:[e.jsx(og,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(un,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]})]})})]})}function UB({memberInfo:t,memberRole:s}){var F;const[n,r]=Be.useState(null),[a,i]=Be.useState(!1),[l,o]=Be.useState(null),[c,u]=Be.useState(new Set),[d,m]=Be.useState(!1),[h,p]=Be.useState(!1),g=Be.useRef(!1),v=(s==null?void 0:s.show_tours)!==!1,y=((F=t==null?void 0:t.page_tours_seen)==null?void 0:F.Bookings)===!0;Be.useEffect(()=>{v&&!y&&t&&!g.current&&(g.current=!0,p(!0),m(!0))},[v,y,t]);const{data:j,isLoading:w}=me({queryKey:["my-bookings",t==null?void 0:t.email],queryFn:async()=>{if(!(t!=null&&t.email))return[];const V=(await X.entities.Member.list()).find(B=>B.email===t.email);return V?(await X.entities.Booking.list("-created_date")).filter(B=>B.member_id===V.id):[]},enabled:!!(t!=null&&t.email),initialData:[]}),{data:N,isLoading:_}=me({queryKey:["events"],queryFn:()=>X.entities.Event.list(),initialData:[]}),T=async()=>{m(!1),p(!1)},A=async()=>{m(!1),p(!1),await C("Bookings")},P=()=>{m(!1),p(!1),setTimeout(()=>{m(!0),p(!0)},10)},C=async z=>{if(t&&!t.is_team_member)try{const U=(await X.entities.Member.list()).find(B=>B.email===t.email);if(U){const B={...U.page_tours_seen||{},[z]:!0};await X.entities.Member.update(U.id,{page_tours_seen:B});const $={...t,page_tours_seen:B};sessionStorage.setItem("agcas_member",JSON.stringify($))}}catch(V){console.error("Failed to update tour status:",V)}},O=z=>{o(z),i(!0)},M=async()=>{if(!l||!l.backstage_order_id){te.error("Unable to cancel: Missing ticket information"),i(!1);return}r(l.id),i(!1);try{const V=(await X.entities.Member.list()).find(B=>B.email===t.email);if(!V){te.error("Unable to verify member identity"),r(null),o(null);return}const U=await X.functions.invoke("cancelTicketViaFlow",{orderId:l.backstage_order_id,cancelReason:"Cancelled by member via iConnect",memberId:V.id});if(U.data.success)u(B=>new Set([...B,l.id])),te.success("Ticket cancelled successfully"),setTimeout(()=>{window.location.reload()},1500);else throw new Error(U.data.error||"Failed to cancel ticket")}catch(z){console.error("Cancellation error:",z),te.error("Failed to cancel ticket. Please try again or contact support.")}finally{r(null),o(null)}};if(!t)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-slate-600",children:"Loading..."})});const k=w||_,E=j.reduce((z,V)=>{const U=V.booking_reference||"unknown";return z[U]||(z[U]=[]),z[U].push(V),z},{}),R=z=>{switch(z){case"confirmed":return"bg-green-100 text-green-700 border-green-200";case"pending":return"bg-amber-100 text-amber-700 border-amber-200";case"cancelled":return"bg-red-100 text-red-700 border-red-200";default:return"bg-slate-100 text-slate-700 border-slate-200"}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:[d&&v&&e.jsx(ld,{tourGroupName:"Bookings",viewId:null,onComplete:T,onDismissPermanently:A,autoShow:h}),e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900",children:"Bookings"}),v&&e.jsx(od,{onClick:P})]}),e.jsx("p",{className:"text-slate-600",children:"View and manage your event registrations"})]}),k?e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Array(4).fill(0).map((z,V)=>e.jsxs(le,{className:"animate-pulse border-slate-200",children:[e.jsxs(Fe,{children:[e.jsx("div",{className:"h-6 bg-slate-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/2"})]}),e.jsx(ce,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-slate-200 rounded"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded w-5/6"})]})})]},V))}):j.length===0?e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(Ns,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No bookings yet"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"Your event registrations will appear here once you book tickets"}),e.jsx(Ht,{to:Pe("Events"),children:e.jsx("button",{className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Browse Events"})})]})}):e.jsx("div",{className:"space-y-6",children:Object.entries(E).map(([z,V],U)=>{const B=V[0],$=N.find(I=>I.id===B.event_id);if(!$)return null;const L=$.start_date?new Date($.start_date):null;return e.jsxs(le,{id:U===0?"first-booking-card":void 0,className:"border-slate-200 shadow-sm hover:shadow-md transition-shadow",children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ue,{className:"text-xl",children:$.title}),$.program_tag&&e.jsx(ye,{className:"bg-blue-100 text-blue-700 border-blue-200",children:$.program_tag})]}),e.jsxs("div",{className:"space-y-2",children:[L&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(Ns,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{children:Mt(L,"EEEE, MMMM d, yyyy")})]}),L&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(tn,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{children:Mt(L,"h:mm a")})]}),$.location&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(Rr,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{children:$.location})]})]})]}),$.image_url&&e.jsx("img",{src:$.image_url,alt:$.title,className:"w-24 h-24 object-cover rounded-lg"})]})}),e.jsx(ce,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Rs,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{className:"text-slate-600",children:"Booking Reference:"}),e.jsx("span",{className:"font-semibold text-slate-900",children:z})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold text-slate-700 mb-3",children:["Attendees (",V.length,")"]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:V.map((I,W)=>{const q=I.status==="cancelled"||c.has(I.id);return e.jsxs("div",{id:U===0&&W===0?"first-ticket-card":void 0,className:`flex flex-col gap-2 p-3 rounded-lg border ${q?"bg-red-50/50 border-red-200":"bg-slate-50 border-slate-200"}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx(Xs,{className:"w-4 h-4 text-slate-400 shrink-0 mt-0.5"}),e.jsx("div",{className:"flex-1 min-w-0",children:I.attendee_first_name&&I.attendee_last_name?e.jsxs("div",{children:[e.jsxs("p",{className:`text-sm font-medium truncate ${q?"line-through text-slate-500":"text-slate-900"}`,children:[I.attendee_first_name," ",I.attendee_last_name]}),e.jsx("p",{className:`text-xs truncate ${q?"text-slate-400":"text-slate-500"}`,children:I.attendee_email})]}):I.attendee_email?e.jsx("p",{className:`text-sm truncate ${q?"line-through text-slate-500":"text-slate-700"}`,children:I.attendee_email}):e.jsx("p",{className:"text-sm text-slate-500 italic",children:"Pending confirmation"})})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsx(ye,{className:`${R(q?"cancelled":I.status)}`,children:q?"cancelled":I.status}),!q&&I.backstage_order_id&&e.jsx(J,{id:U===0&&W===0?"first-ticket-edit-button":void 0,variant:"ghost",size:"icon",className:"h-6 w-6 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>O(I),disabled:n===I.id,children:e.jsx(As,{className:"w-3 h-3"})})]})]}),I.backstage_order_id&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 pl-6",children:[e.jsx(Rs,{className:"w-3 h-3 text-purple-400"}),e.jsx("span",{className:"font-mono text-purple-600 bg-purple-50 px-2 py-0.5 rounded",children:I.backstage_order_id})]})]},I.id)})})]}),V.some(I=>I.status==="pending")&&e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx(vs,{className:"w-4 h-4 text-amber-600 shrink-0 mt-0.5"}),e.jsx("p",{className:"text-xs text-amber-800",children:"Some bookings are pending confirmation. Confirmation links have been sent to the attendees' email addresses."})]})]})})]},z)})})]}),e.jsx(Ml,{open:a,onOpenChange:i,children:e.jsxs(Vi,{children:[e.jsxs(Wi,{children:[e.jsx(Ki,{children:"Cancel Registration?"}),e.jsx(Gi,{children:"Cancelling this registration will make the ticket available for reallocation."})]}),e.jsxs(Hi,{children:[e.jsx(Qi,{children:"No, keep registration"}),e.jsx(Yi,{onClick:M,className:"bg-red-600 hover:bg-red-700",children:"Yes, cancel registration"})]})]})})]})}function VB({isAdmin:t}){const[s,n]=b.useState(null),[r,a]=b.useState(null),[i,l]=b.useState(null),[o,c]=b.useState(!1),[u,d]=b.useState(!1),[m,h]=b.useState(""),[p,g]=b.useState(""),[v,y]=b.useState(!1),[j,w]=b.useState(""),[N,_]=b.useState(""),T=Yt(),A=[{value:"Events",label:"Events"},{value:"BuyProgramTickets",label:"Buy Program Tickets"},{value:"EventDetails",label:"Event Details"},{value:"Bookings",label:"Bookings"},{value:"MyTickets",label:"My Tickets"},{value:"History",label:"History"},{value:"Dashboard",label:"Dashboard"},{value:"Articles",label:"Articles"},{value:"ArticleEditor",label:"Article Editor"},{value:"ArticleView",label:"Article View"},{value:"RoleManagement",label:"Role Management"},{value:"MemberRoleAssignment",label:"Member Role Assignment"},{value:"TeamMemberManagement",label:"Team Member Management"},{value:"DiscountCodeManagement",label:"Discount Code Management"},{value:"EventSettings",label:"Event Settings"},{value:"TourManagement",label:"Tour Management"},{value:"PublicEvents",label:"Public Events"},{value:"PublicAbout",label:"Public About"},{value:"PublicContact",label:"Public Contact"}].sort((Z,Q)=>Z.label.localeCompare(Q.label)),P=[{value:"none",label:"No specific view (single page tour)",description:"Use this for pages with just one view"},{value:"list",label:"List View",description:"Use for listing/browsing views (e.g., program cards, event list)"},{value:"form",label:"Form View",description:"Use for form/detail views (e.g., purchase form, registration form)"}],C=[{group:"Navigation",label:"Buy Tickets Menu Item",selector:"#buy-tickets-menu-item",page:"all"},{group:"Navigation",label:"Events Menu Item",selector:"a[href*='Events']",page:"all"},{group:"Navigation",label:"Bookings Menu Item",selector:"a[href*='Bookings']",page:"all"},{group:"Navigation",label:"My Tickets Menu Item",selector:"a[href*='MyTickets']",page:"all"},{group:"Buy Program Tickets",label:"Total Tickets Summary Card",selector:"#total-tickets-summary-card",page:"BuyProgramTickets"},{group:"Buy Program Tickets",label:"First Program Card",selector:"#first-program-card",page:"BuyProgramTickets"},{group:"Buy Program Tickets",label:"Quantity Input Field",selector:"#quantity-input",page:"BuyProgramTickets"},{group:"Buy Program Tickets",label:"Payment Options Card",selector:"#payment-options-card",page:"BuyProgramTickets"},{group:"Buy Program Tickets",label:"Training Vouchers Section",selector:"#training-vouchers-section",page:"BuyProgramTickets"},{group:"Buy Program Tickets",label:"Training Fund Section",selector:"#training-fund-section",page:"BuyProgramTickets"},{group:"Buy Program Tickets",label:"Remaining Balance Section",selector:"#remaining-balance-section",page:"BuyProgramTickets"},{group:"Buy Program Tickets",label:"Amount Due Display",selector:"#amount-due-display",page:"BuyProgramTickets"},{group:"Buy Program Tickets",label:"Account Payment Option",selector:"#account-payment-option",page:"BuyProgramTickets"},{group:"Buy Program Tickets",label:"Card Payment Option",selector:"#card-payment-option",page:"BuyProgramTickets"},{group:"Buy Program Tickets",label:"Purchase Order Field",selector:"#purchase-order-field",page:"BuyProgramTickets"},{group:"Buy Program Tickets",label:"Discount Code Section",selector:"#discount-code-section",page:"BuyProgramTickets"},{group:"Buy Program Tickets",label:"Complete Purchase Button",selector:"#complete-purchase-button",page:"BuyProgramTickets"},{group:"Buy Program Tickets",label:"Page Tour Button",selector:"#page-tour-button",page:"BuyProgramTickets"},{group:"Buy Program Tickets",label:"All Program Cards",selector:".grid button",page:"BuyProgramTickets"},{group:"Events",label:"Search Input",selector:"input[placeholder*='Search']",page:"Events"},{group:"Events",label:"First Event Card",selector:".grid > div:first-child",page:"Events"},{group:"Events",label:"Event Cards Grid",selector:".grid",page:"Events"},{group:"Event Details",label:"Event Title",selector:"h1",page:"EventDetails"},{group:"Event Details",label:"Booking Summary - Tickets Card",selector:"#booking-summary-tickets",page:"EventDetails"},{group:"Event Details",label:"Confirm Booking Button",selector:"#confirm-booking-button",page:"EventDetails"},{group:"Event Details",label:"I Am Attending Toggle",selector:"#member-attending-toggle",page:"EventDetails"},{group:"Event Details",label:"Add Colleague Button",selector:"#add-colleague-button",page:"EventDetails"},{group:"Event Details",label:"Colleague Search Input",selector:"#colleague-search-input",page:"EventDetails"},{group:"Event Details",label:"Attendee List",selector:"#attendee-list",page:"EventDetails"},{group:"Bookings",label:"First Booking Card",selector:"#first-booking-card",page:"Bookings"},{group:"Bookings",label:"First Ticket Card",selector:"#first-ticket-card",page:"Bookings"},{group:"Bookings",label:"First Ticket Edit Button",selector:"#first-ticket-edit-button",page:"Bookings"},{group:"Bookings",label:"Bookings Table",selector:"table",page:"Bookings"},{group:"Bookings",label:"First Booking Row",selector:"table tbody tr:first-child",page:"Bookings"},{group:"My Tickets",label:"First My Ticket Card",selector:"#first-my-ticket-card",page:"MyTickets"},{group:"My Tickets",label:"First Ticket Status Badge",selector:"#first-ticket-status-badge",page:"MyTickets"},{group:"My Tickets",label:"Add to Calendar Button",selector:"#add-to-calendar-button",page:"MyTickets"},{group:"My Tickets",label:"Cancel Ticket Button",selector:"#cancel-ticket-button",page:"MyTickets"},{group:"My Tickets",label:"Go to Event Page Button",selector:"#go-to-event-page-button",page:"MyTickets"},{group:"General",label:"Page Heading (H1)",selector:"h1",page:"all"},{group:"General",label:"Main Content Area",selector:"main",page:"all"},{group:"General",label:"Primary Action Button",selector:"button[type='submit']",page:"all"},{group:"General",label:"First Card",selector:".grid > div:first-child",page:"all"},{group:"Custom",label:"Enter Custom Selector...",selector:"custom",page:"all"}],O=()=>{const Z=(r==null?void 0:r.page_name)||(s==null?void 0:s.page_name);return Z?C.filter(Q=>Q.page==="all"||Q.page===Z):C},M=()=>O().reduce((Q,Y)=>(Q[Y.group]||(Q[Y.group]=[]),Q[Y.group].push(Y),Q),{}),{data:k,isLoading:E}=me({queryKey:["tourGroups"],queryFn:()=>X.entities.TourGroup.list(),initialData:[]}),{data:R,isLoading:F}=me({queryKey:["tourSteps",s==null?void 0:s.id],queryFn:async()=>s!=null&&s.id?(await X.entities.TourStep.list()).filter(Q=>Q.tour_group_id===s.id).sort((Q,Y)=>Q.step_order-Y.step_order):[],enabled:!!(s!=null&&s.id),initialData:[]}),z=Le({mutationFn:Z=>X.entities.TourGroup.create(Z),onSuccess:()=>{T.invalidateQueries({queryKey:["tourGroups"]}),c(!1),a(null),te.success("Tour group created")}}),V=Le({mutationFn:({id:Z,data:Q})=>X.entities.TourGroup.update(Z,Q),onSuccess:()=>{T.invalidateQueries({queryKey:["tourGroups"]}),c(!1),a(null),te.success("Tour group updated")}}),U=Le({mutationFn:Z=>X.entities.TourGroup.delete(Z),onSuccess:()=>{T.invalidateQueries({queryKey:["tourGroups"]}),n(null),te.success("Tour group deleted")}}),B=Le({mutationFn:Z=>X.entities.TourStep.create(Z),onSuccess:()=>{T.invalidateQueries({queryKey:["tourSteps"]}),d(!1),l(null),te.success("Tour step created")}}),$=Le({mutationFn:({id:Z,data:Q})=>X.entities.TourStep.update(Z,Q),onSuccess:()=>{T.invalidateQueries({queryKey:["tourSteps"]}),d(!1),l(null),te.success("Tour step updated")}}),L=Le({mutationFn:Z=>X.entities.TourStep.delete(Z),onSuccess:()=>{T.invalidateQueries({queryKey:["tourSteps"]}),te.success("Tour step deleted")}});if(!t)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx(le,{className:"border-red-200",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-red-900 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-red-700",children:"Only administrators can manage tours."})]})})})});const I=Z=>{Z.preventDefault();const Q=new FormData(Z.target),Y=Q.get("view_id");let K=null;j&&(j==="custom"?K=N||null:K=j);const ae={name:Q.get("name"),page_name:Q.get("page_name"),view_id:Y==="none"?null:Y,description:Q.get("description")||null,is_active:Q.get("is_active")==="on",mandatory_selector:K,mandatory_selector_missing_message:Q.get("mandatory_selector_missing_message")||null};r!=null&&r.id?V.mutate({id:r.id,data:ae}):z.mutate(ae)},W=Z=>{Z.preventDefault();let Q=null;if(!v&&(p==="custom"?Q=m:Q=p,!Q)){te.error("Please select or enter a target selector, or mark this as a welcome step.");return}const Y=new FormData(Z.target),K={tour_group_id:s.id,step_order:parseInt(Y.get("step_order")),target_selector:Q,title:Y.get("title"),content:Y.get("content"),placement:Y.get("placement"),mode:Y.get("mode"),size:Y.get("size")||"medium",gap:parseInt(Y.get("gap"))||40};i!=null&&i.id?$.mutate({id:i.id,data:K}):B.mutate(K)},q=async(Z,Q)=>{const Y=R.findIndex(de=>de.id===Z);if(Y===-1||Q==="up"&&Y===0||Q==="down"&&Y===R.length-1)return;const K=Q==="up"?Y-1:Y+1,ae=R[Y],se=R[K];await X.entities.TourStep.update(ae.id,{step_order:se.step_order}),await X.entities.TourStep.update(se.id,{step_order:ae.step_order}),T.invalidateQueries({queryKey:["tourSteps"]})};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Tour Management"}),e.jsx("p",{className:"text-slate-600",children:"Create and manage guided tours for your app pages"})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsxs(le,{className:"lg:col-span-1 border-slate-200",children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ue,{className:"text-lg",children:"Tour Groups"}),e.jsxs(J,{size:"sm",onClick:()=>{a(null),c(!0)},className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-1"}),"New"]})]})}),e.jsx(ce,{className:"p-4",children:E?e.jsx("div",{className:"text-center py-8 text-slate-600",children:"Loading..."}):k.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(aa,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-600 text-sm",children:"No tour groups yet"})]}):e.jsx("div",{className:"space-y-2",children:k.map(Z=>e.jsx("button",{onClick:()=>n(Z),className:`w-full text-left p-3 rounded-lg border-2 transition-all ${(s==null?void 0:s.id)===Z.id?"border-blue-500 bg-blue-50":"border-slate-200 hover:border-slate-300"}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-slate-900 truncate",children:Z.name}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[Z.page_name,Z.view_id?` (${Z.view_id})`:""]})]}),e.jsx(ye,{variant:Z.is_active?"default":"secondary",className:"shrink-0",children:Z.is_active?"Active":"Inactive"})]})},Z.id))})})]}),e.jsxs(le,{className:"lg:col-span-2 border-slate-200",children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ue,{className:"text-lg",children:s?`Steps: ${s.name}`:"Select a Tour Group"}),s&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(J,{size:"sm",variant:"outline",onClick:()=>{a(s),c(!0)},children:[e.jsx(gi,{className:"w-4 h-4 mr-1"}),"Edit Group"]}),e.jsxs(J,{size:"sm",variant:"outline",onClick:()=>{confirm("Delete this tour group and all its steps?")&&U.mutate(s.id)},className:"text-red-600 hover:text-red-700",children:[e.jsx(os,{className:"w-4 h-4 mr-1"}),"Delete"]}),e.jsxs(J,{size:"sm",onClick:()=>{l(null),y(!1),g(""),h(""),d(!0)},className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-1"}),"Add Step"]})]})]})}),e.jsx(ce,{className:"p-4",children:s?F?e.jsx("div",{className:"text-center py-8 text-slate-600",children:"Loading steps..."}):R.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-slate-600 mb-4",children:"No steps yet for this tour"}),e.jsxs(J,{onClick:()=>{l(null),y(!1),g(""),h(""),d(!0)},className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Add First Step"]})]}):e.jsx("div",{className:"space-y-3",children:R.map((Z,Q)=>e.jsx("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(J,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>q(Z.id,"up"),disabled:Q===0,children:e.jsx(R5,{className:"w-4 h-4"})}),e.jsx(ye,{variant:"outline",className:"w-6 h-6 flex items-center justify-center p-0",children:Z.step_order}),e.jsx(J,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>q(Z.id,"down"),disabled:Q===R.length-1,children:e.jsx(O5,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-slate-900 mb-1",children:Z.title}),e.jsx("p",{className:"text-sm text-slate-600 mb-2",children:Z.content}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[Z.target_selector?e.jsx(ye,{variant:"outline",className:"text-xs",children:Z.target_selector}):e.jsx(ye,{variant:"default",className:"text-xs bg-blue-100 text-blue-700 border-blue-200",children:"Welcome Step"}),e.jsx(ye,{variant:"outline",className:"text-xs",children:Z.placement}),e.jsx(ye,{variant:"outline",className:"text-xs",children:Z.mode}),Z.gap!==void 0&&e.jsxs(ye,{variant:"outline",className:"text-xs",children:["Gap: ",Z.gap,"px"]})]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(J,{variant:"ghost",size:"icon",onClick:()=>{if(l(Z),Z.target_selector===null)y(!0),g(""),h("");else{y(!1);const Y=C.find(K=>K.selector===Z.target_selector);Y?(g(Y.selector),h("")):(g("custom"),h(Z.target_selector))}d(!0)},children:e.jsx(gi,{className:"w-4 h-4"})}),e.jsx(J,{variant:"ghost",size:"icon",onClick:()=>{confirm("Delete this step?")&&L.mutate(Z.id)},className:"text-red-600 hover:text-red-700",children:e.jsx(os,{className:"w-4 h-4"})})]})]})},Z.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(aa,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Select a tour group to view and edit its steps"})]})})]})]}),e.jsx(Ct,{open:o,onOpenChange:Z=>{c(Z),Z?r&&r.mandatory_selector?C.find(Y=>Y.selector===r.mandatory_selector)?(w(r.mandatory_selector),_("")):(w("custom"),_(r.mandatory_selector)):(w(""),_("")):(w(""),_(""),a(null))},children:e.jsxs(Nt,{children:[e.jsx(kt,{children:e.jsx(Et,{children:r?"Edit Tour Group":"New Tour Group"})}),e.jsxs("form",{onSubmit:I,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"name",children:"Name *"}),e.jsx(he,{id:"name",name:"name",defaultValue:r==null?void 0:r.name,placeholder:"e.g., Buy Program Tickets - List View",required:!0})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"page_name",children:"Page Name *"}),e.jsxs(Ke,{name:"page_name",defaultValue:r==null?void 0:r.page_name,required:!0,children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:"Select a page"})}),e.jsx(We,{children:A.map(Z=>e.jsx(re,{value:Z.value,children:Z.label},Z.value))})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"The page this tour will appear on"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"view_id",children:"View ID"}),e.jsxs(Ke,{name:"view_id",defaultValue:(r==null?void 0:r.view_id)||"none",children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:"Select a view type"})}),e.jsx(We,{children:P.map(Z=>e.jsx(re,{value:Z.value,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:Z.label}),e.jsx("span",{className:"text-xs text-slate-500",children:Z.description})]})},Z.value))})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Use this to create different tours for different views of the same page"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(Gt,{id:"description",name:"description",defaultValue:r==null?void 0:r.description,placeholder:"What does this tour cover?",rows:3})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-4",children:[e.jsx("h4",{className:"font-medium text-slate-900 mb-3",children:"Tour Requirements (Optional)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"mandatory_selector",children:"Mandatory Element CSS Selector"}),e.jsxs(Ke,{value:j===null?"":j,onValueChange:Z=>{w(Z),Z!=="custom"&&_("")},children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:"Select an element (optional)"})}),e.jsxs(We,{className:"max-h-[400px]",children:[e.jsx(re,{value:null,children:"None (no mandatory element)"}),Object.entries(M()).map(([Z,Q])=>e.jsxs(Be.Fragment,{children:[e.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold text-slate-500 bg-slate-50 sticky top-0",children:Z}),Q.map(Y=>e.jsxs(re,{value:Y.selector,children:[Y.label,Y.selector!=="custom"&&e.jsx("span",{className:"text-xs text-slate-400 ml-2",children:Y.selector})]},Y.selector))]},Z))]})]}),j==="custom"&&e.jsx("div",{className:"mt-2",children:e.jsx(he,{placeholder:"Enter CSS selector (e.g., #my-element, .my-class)",value:N,onChange:Z=>_(Z.target.value)})}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"If specified, this element must be present on the page for the tour to start"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"mandatory_selector_missing_message",children:"Message if Element Missing"}),e.jsx(Gt,{id:"mandatory_selector_missing_message",name:"mandatory_selector_missing_message",defaultValue:r==null?void 0:r.mandatory_selector_missing_message,placeholder:"e.g., Please add at least one program before viewing this tour.",rows:2}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Custom message shown when the mandatory element is not found"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(cs,{id:"is_active",name:"is_active",defaultChecked:(r==null?void 0:r.is_active)!==!1}),e.jsx(ee,{htmlFor:"is_active",children:"Active"})]}),e.jsxs(zt,{children:[e.jsx(J,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsx(J,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",children:r?"Update":"Create"})]})]})]})}),e.jsx(Ct,{open:u,onOpenChange:Z=>{d(Z),Z||(y(!1),g(""),h(""))},children:e.jsxs(Nt,{className:"max-w-2xl",children:[e.jsx(kt,{children:e.jsx(Et,{children:i?"Edit Tour Step":"New Tour Step"})}),e.jsxs("form",{onSubmit:W,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"step_order",children:"Step Order *"}),e.jsx(he,{id:"step_order",name:"step_order",type:"number",min:"1",defaultValue:(i==null?void 0:i.step_order)||R.length+1,required:!0})]}),e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("input",{type:"checkbox",id:"is_welcome_step",checked:v,onChange:Z=>{y(Z.target.checked),Z.target.checked&&(g(""),h(""))},className:"h-4 w-4 rounded border-gray-300"}),e.jsx(ee,{htmlFor:"is_welcome_step",className:"cursor-pointer flex-1",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-blue-900",children:"Welcome/Info Step"}),e.jsx("div",{className:"text-xs text-blue-700",children:"No element to highlight - displays centered popup with 'don't show again' option"})]})})]}),v&&e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"size",children:"Card Size"}),e.jsxs(Ke,{name:"size",defaultValue:(i==null?void 0:i.size)||"medium",children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"small",children:"Small (320px)"}),e.jsx(re,{value:"medium",children:"Medium (384px)"}),e.jsx(re,{value:"large",children:"Large (512px)"})]})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Choose the width of the welcome card"})]}),!v&&e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"target_selector",children:"Target Element *"}),e.jsxs(Ke,{value:p||"",onValueChange:Z=>{g(Z),Z!=="custom"&&h("")},children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:"Select a target element"})}),e.jsx(We,{className:"max-h-[400px]",children:Object.entries(M()).map(([Z,Q])=>e.jsxs(Be.Fragment,{children:[e.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold text-slate-500 bg-slate-50 sticky top-0",children:Z}),Q.map(Y=>e.jsxs(re,{value:Y.selector,children:[Y.label,Y.selector!=="custom"&&e.jsx("span",{className:"text-xs text-slate-400 ml-2",children:Y.selector})]},Y.selector))]},Z))})]}),p==="custom"&&e.jsx("div",{className:"mt-2",children:e.jsx(he,{placeholder:"Enter CSS selector (e.g., #my-element, .my-class)",value:m,onChange:Z=>h(Z.target.value)})}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:s!=null&&s.page_name?`Showing elements for "${s.page_name}" page and general elements`:'Select a common element or choose "Custom" to enter your own CSS selector'})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"title",children:"Title *"}),e.jsx(he,{id:"title",name:"title",defaultValue:i==null?void 0:i.title,placeholder:v?"e.g., Welcome to Buy Program Tickets":"e.g., Select a Program",required:!0})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"content",children:"Content *"}),e.jsx(Gt,{id:"content",name:"content",defaultValue:i==null?void 0:i.content,placeholder:v?"This is your first time here! Let us guide you through the process.":"Explain what the user should do or provide welcome information...",rows:4,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"placement",children:"Placement"}),e.jsxs(Ke,{name:"placement",defaultValue:(i==null?void 0:i.placement)||"bottom",children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"top",children:"Top"}),e.jsx(re,{value:"bottom",children:"Bottom"}),e.jsx(re,{value:"left",children:"Left"}),e.jsx(re,{value:"right",children:"Right"})]})]}),v&&e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Not used for welcome steps (always centered)"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"mode",children:"Mode"}),e.jsxs(Ke,{name:"mode",defaultValue:(i==null?void 0:i.mode)||"standard",children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"standard",children:"Standard"}),e.jsx(re,{value:"interactive",children:"Interactive"})]})]}),v&&e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Not used for welcome steps (always standard)"})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"gap",children:"Spacing Gap (pixels)"}),e.jsx(he,{id:"gap",name:"gap",type:"number",min:"0",max:"100",defaultValue:(i==null?void 0:i.gap)||40,placeholder:"40"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Distance between the popup and the target element (or screen edge for welcome steps). Default: 40px"})]}),e.jsxs(zt,{children:[e.jsx(J,{type:"button",variant:"outline",onClick:()=>{d(!1),y(!1),g(""),h("")},children:"Cancel"}),e.jsx(J,{type:"submit",className:"bg-green-600 hover:bg-green-700",children:i?"Update":"Create"})]})]})]})})]})})}function WB({memberInfo:t,organizationInfo:s,refreshOrganizationInfo:n,memberRole:r,reloadMemberInfo:a}){var U;const[i,l]=b.useState(null),[o,c]=b.useState(null),[u,d]=b.useState(!1),[m,h]=b.useState(null),[p,g]=b.useState(null),[v,y]=b.useState(!1),[j,w]=b.useState(!1),N=(r==null?void 0:r.show_tours)!==!1,_=((U=t==null?void 0:t.page_tours_seen)==null?void 0:U.History)===!0;b.useEffect(()=>{N&&!_&&t&&(w(!0),y(!0))},[N,_,t]);const{data:T,isLoading:A}=me({queryKey:["program-transactions",s==null?void 0:s.id],queryFn:async()=>s!=null&&s.id?(await X.entities.ProgramTicketTransaction.list("-created_date")).filter($=>$.organization_id===s.id):[],enabled:!!(s!=null&&s.id),initialData:[]});if(!t||!s)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-slate-600",children:"Loading..."})});const P=s.program_ticket_balances||{},C=Object.keys(P).sort(),O=i?T.filter(B=>B.program_name===i):T,M=async B=>{if(t&&!t.is_team_member)try{const L=(await X.entities.Member.list()).find(I=>I.email===t.email);if(L){const I={...L.page_tours_seen||{},[B]:!0};await X.entities.Member.update(L.id,{page_tours_seen:I});const W={...t,page_tours_seen:I};sessionStorage.setItem("agcas_member",JSON.stringify(W)),a&&a()}}catch($){console.error("Failed to update tour status:",$)}},k=async()=>{y(!1),w(!1)},E=async()=>{y(!1),w(!1),await M("History")},R=()=>{y(!1),w(!1),setTimeout(()=>{y(!0),w(!0)},10)},F=async B=>{if(!B.xero_invoice_pdf_uri){te.error("Invoice not available");return}c(B.id);try{const $=await X.integrations.Core.CreateFileSignedUrl({file_uri:B.xero_invoice_pdf_uri,expires_in:300});if($.signed_url){const I=await(await fetch($.signed_url)).arrayBuffer(),W=new Blob([I],{type:"application/pdf"}),Z=`${URL.createObjectURL(W)}#view=Fit&navpanes=0&toolbar=0`;h(Z),g(B.xero_invoice_number),d(!0)}else te.error("Failed to generate invoice link")}catch($){console.error("Error loading invoice:",$),te.error("Failed to load invoice")}finally{c(null)}},z=()=>{if(!m)return;const B=document.createElement("a");B.href=m,B.download=`invoice-${p||"download"}.pdf`,document.body.appendChild(B),B.click(),document.body.removeChild(B),te.success("Downloading invoice...")},V=B=>{if(!B&&m){const $=m.split("#")[0];URL.revokeObjectURL($),h(null),g(null)}d(B)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:[v&&N&&e.jsx(ld,{tourGroupName:"History",viewId:null,onComplete:k,onDismissPermanently:E,autoShow:j}),e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900",id:"history-page-title",children:"History"}),N&&e.jsx(od,{onClick:R})]}),e.jsx("p",{className:"text-slate-600",children:"View your organisation's program ticket balances and transaction history"})]}),C.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",id:"program-balance-cards",children:C.map(B=>e.jsx("button",{onClick:()=>l(i===B?null:B),className:"text-left",children:e.jsxs(le,{className:`border-2 transition-all hover:shadow-lg cursor-pointer ${i===B?"border-purple-600 bg-purple-50":"border-slate-200 hover:border-slate-300"}`,children:[e.jsx(Fe,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Rs,{className:`w-5 h-5 ${i===B?"text-purple-600":"text-slate-400"}`}),e.jsx(Ue,{className:"text-lg",children:B})]}),i===B&&e.jsx(ye,{className:"bg-purple-600",children:"Selected"})]})}),e.jsxs(ce,{children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-purple-600",children:P[B]}),e.jsx("span",{className:"text-slate-600",children:"tickets"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Click to view transactions"})]})]})},B))}),e.jsxs(le,{className:"border-slate-200 shadow-sm",id:"transaction-history-card",children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsx(Ue,{className:"flex items-center gap-2",children:i?e.jsxs(e.Fragment,{children:["Transaction History: ",i,e.jsx("button",{onClick:()=>l(null),className:"ml-auto text-sm text-blue-600 hover:text-blue-700",children:"View All"})]}):"All Transactions"})}),e.jsx(ce,{className:"pt-6",children:A?e.jsx("div",{className:"text-center py-8 text-slate-600",children:"Loading transactions..."}):O.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Rs,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-600",children:"No transactions yet"})]}):e.jsx("div",{className:"space-y-3",children:O.map(B=>{let $,L,I;B.transaction_type==="purchase"?($=xd,L="bg-green-100 text-green-600",I="Purchase"):B.transaction_type==="refund"?($=Eb,L="bg-blue-100 text-blue-600",I="Return to balance"):($=Ns,L="bg-purple-100 text-purple-600",I="Used for Event");const W=$;return e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-50 rounded-lg border border-slate-200",children:[e.jsx("div",{className:`p-3 rounded-lg ${L}`,children:e.jsx(W,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:I}),e.jsx(ye,{variant:"outline",className:"text-xs",children:B.program_name})]}),B.transaction_type==="purchase"?e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-sm text-slate-600",children:["PO: ",B.purchase_order_number,"  ",B.quantity," ticket",B.quantity>1?"s":""]}),B.xero_invoice_number&&e.jsxs("p",{className:"text-xs text-slate-500",children:["Invoice: ",B.xero_invoice_number]})]}):B.transaction_type==="refund"?e.jsxs("p",{className:"text-sm text-slate-600",children:[B.event_name,"  ",B.quantity," ticket",B.quantity>1?"s":""," returned",B.booking_reference&&`  ${B.booking_reference}`]}):e.jsxs("p",{className:"text-sm text-slate-600",children:[B.event_name,"  ",B.quantity," ticket",B.quantity>1?"s":"",B.booking_reference&&`  ${B.booking_reference}`]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:Mt(new Date(B.created_date),"MMM d, yyyy  h:mm a")})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:`flex items-center gap-1 font-semibold ${B.transaction_type==="purchase"?"text-green-600":B.transaction_type==="refund"?"text-blue-600":"text-purple-600"}`,children:[B.transaction_type==="purchase"?e.jsx(Eb,{className:"w-4 h-4"}):B.transaction_type==="refund"?e.jsx(Eb,{className:"w-4 h-4"}):e.jsx(xK,{className:"w-4 h-4"}),e.jsxs("span",{children:[B.transaction_type==="usage"?"-":"+",B.quantity]})]}),B.xero_invoice_pdf_uri&&e.jsx(J,{variant:"outline",size:"sm",onClick:()=>F(B),disabled:o===B.id,className:"shrink-0",children:o===B.id?e.jsx(vt,{className:"w-4 h-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(ns,{className:"w-4 h-4 mr-1"}),"Invoice"]})})]})]},B.id)})})})]})]}):e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(Rs,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No Program Tickets Yet"}),e.jsx("p",{className:"text-slate-600",children:"Purchase program tickets to get started"})]})})]}),e.jsx(Ct,{open:u,onOpenChange:V,children:e.jsxs(Nt,{className:"max-w-4xl h-[90vh] p-0 flex flex-col",children:[e.jsx(kt,{className:"p-6 pb-4 border-b border-slate-200 shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Et,{children:["Invoice ",p||"Preview"]}),e.jsxs(J,{variant:"outline",size:"sm",onClick:z,className:"gap-2",children:[e.jsx(Zn,{className:"w-4 h-4"}),"Download"]})]})}),e.jsx("div",{className:"flex-1 min-h-0",children:m?e.jsx("iframe",{src:m,className:"w-full h-full border-0",title:"Invoice PDF"}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(vt,{className:"w-8 h-8 animate-spin text-slate-400"})})})]})})]})}function lme({organizationId:t,organizationName:s,programNameFilter:n,memberInfo:r,onClose:a,onTransactionUpdated:i}){const[l,o]=b.useState(null),[c,u]=b.useState(null),[d,m]=b.useState(""),h=Yt(),{data:p,isLoading:g}=me({queryKey:["organization-transactions",t,n],queryFn:async()=>{let O=(await X.entities.ProgramTicketTransaction.list()).filter(M=>M.organization_id===t);return n&&n!=="all"&&(O=O.filter(M=>M.program_name===n)),O.sort((M,k)=>new Date(k.created_date).getTime()-new Date(M.created_date).getTime())},enabled:!!t,initialData:[]}),v=Le({mutationFn:async({transactionId:C,quantity:O})=>(await X.functions.invoke("cancelProgramTicketTransaction",{transactionId:C,quantityToCancel:O,adminEmail:r.email})).data,onSuccess:C=>{h.invalidateQueries({queryKey:["organization-transactions"]}),h.invalidateQueries({queryKey:["all-transactions"]}),h.invalidateQueries({queryKey:["all-organizations"]}),o(null),m(""),te.success(C.message||"Transaction cancelled successfully"),i&&i()},onError:C=>{var M,k;const O=((k=(M=C.response)==null?void 0:M.data)==null?void 0:k.error)||C.message||"Failed to cancel transaction";te.error(O)}}),y=Le({mutationFn:async({transactionId:C})=>(await X.functions.invoke("reinstateProgramTicketTransaction",{transactionId:C,adminEmail:r.email})).data,onSuccess:C=>{h.invalidateQueries({queryKey:["organization-transactions"]}),h.invalidateQueries({queryKey:["all-transactions"]}),h.invalidateQueries({queryKey:["all-organizations"]}),u(null),te.success(C.message||"Transaction reinstated successfully"),i&&i()},onError:C=>{var M,k;const O=((k=(M=C.response)==null?void 0:M.data)==null?void 0:k.error)||C.message||"Failed to reinstate transaction";te.error(O)}}),j=C=>{const O=C.original_quantity||C.quantity,M=C.cancelled_quantity||0,k=O-M;o(C),m(k.toString())},w=()=>{const C=parseInt(d);if(isNaN(C)||C<=0){te.error("Please enter a valid quantity");return}const O=l.original_quantity||l.quantity,M=l.cancelled_quantity||0,k=O-M;if(C>k){te.error(`Cannot cancel more than ${k} ticket(s)`);return}v.mutate({transactionId:l.id,quantity:C})},N=C=>{u(C)},_=()=>{y.mutate({transactionId:c.id})},T=async C=>{if(!C.xero_invoice_pdf_uri){te.error("No invoice PDF available");return}try{const O=await X.integrations.Core.CreateFileSignedUrl({file_uri:C.xero_invoice_pdf_uri,expires_in:300});O.signed_url&&window.open(O.signed_url,"_blank")}catch(O){te.error("Failed to download invoice"),console.error("Invoice download error:",O)}},A=C=>{switch(C){case"purchase":return"bg-green-100 text-green-700";case"usage":return"bg-blue-100 text-blue-700";case"refund":return"bg-purple-100 text-purple-700";case"cancellation_void":return"bg-red-100 text-red-700";case"reinstatement":return"bg-emerald-100 text-emerald-700";default:return"bg-slate-100 text-slate-700"}},P=C=>{switch(C){case"purchase":return"Purchase";case"usage":return"Usage";case"refund":return"Refund";case"cancellation_void":return"Cancelled";case"reinstatement":return"Reinstated";default:return C}};return e.jsxs(e.Fragment,{children:[e.jsx(Ct,{open:!0,onOpenChange:a,children:e.jsxs(Nt,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsx(kt,{children:e.jsxs(Et,{className:"text-xl",children:["Transaction History - ",s,n&&n!=="all"&&e.jsxs("span",{className:"text-slate-500 font-normal ml-2",children:["(",n,")"]})]})}),g?e.jsx("div",{className:"py-12 text-center text-slate-600",children:"Loading transactions..."}):p.length===0?e.jsx("div",{className:"py-12 text-center",children:e.jsx("p",{className:"text-slate-600",children:"No transactions found"})}):e.jsx("div",{className:"space-y-3",children:p.map(C=>{const O=C.original_quantity||C.quantity||0,M=C.cancelled_quantity||0,k=O-M,E=C.transaction_type==="purchase",R=!C.status||C.status==="active",F=C.status==="cancelled",z=E&&R&&k>0,V=E&&M>0;return console.log("[OrganizationTransactionsModal] Transaction:",{id:C.id,type:C.transaction_type,status:C.status,originalQty:O,cancelledQty:M,remainingQty:k,isPurchase:E,isActive:R,isCancelled:F,canBeCancelled:z,canBeReinstated:V}),e.jsx(le,{className:"border-slate-200",children:e.jsx(ce,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[e.jsx(ye,{className:A(C.transaction_type),children:P(C.transaction_type)}),C.status==="cancelled"&&e.jsx(ye,{className:"bg-red-100 text-red-700",children:"Fully Cancelled"}),E&&M>0&&C.status!=="cancelled"&&e.jsx(ye,{className:"bg-amber-100 text-amber-700",children:"Partially Cancelled"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600",children:"Program:"}),e.jsx("span",{className:"font-medium text-slate-900 ml-2",children:C.program_name})]}),E?e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600",children:"Quantity:"}),e.jsx("span",{className:"font-medium text-slate-900 ml-2",children:M>0?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-green-600",children:O}),e.jsx("span",{className:"text-slate-400 mx-1",children:"-"}),e.jsx("span",{className:"text-red-600",children:M}),e.jsx("span",{className:"text-slate-400 mx-1",children:"="}),e.jsx("span",{className:"text-blue-600",children:k})]}):O})]}):e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600",children:"Quantity:"}),e.jsx("span",{className:"font-medium text-slate-900 ml-2",children:C.quantity})]}),C.member_email&&e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600",children:"Member:"}),e.jsx("span",{className:"font-medium text-slate-900 ml-2",children:C.member_email})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ns,{className:"w-3 h-3 text-slate-400"}),e.jsx("span",{className:"text-slate-600",children:Mt(new Date(C.created_date),"MMM d, yyyy HH:mm")})]}),C.purchase_order_number&&e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600",children:"PO Number:"}),e.jsx("span",{className:"font-medium text-slate-900 ml-2",children:C.purchase_order_number})]}),C.booking_reference&&e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600",children:"Booking Ref:"}),e.jsx("span",{className:"font-medium text-slate-900 ml-2",children:C.booking_reference})]}),C.event_name&&e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600",children:"Event:"}),e.jsx("span",{className:"font-medium text-slate-900 ml-2",children:C.event_name})]}),C.xero_invoice_number&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-slate-600",children:"Invoice:"}),e.jsx("span",{className:"font-medium text-slate-900",children:C.xero_invoice_number}),C.xero_invoice_pdf_uri&&e.jsx(J,{variant:"ghost",size:"sm",className:"h-6 px-2",onClick:()=>T(C),children:e.jsx(Zn,{className:"w-3 h-3"})})]}),C.total_cost_before_discount&&e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600",children:"Value:"}),e.jsxs("span",{className:"font-medium text-slate-900 ml-2",children:["",C.total_cost_before_discount.toFixed(2)]})]})]}),C.notes&&e.jsx("div",{className:"mt-2 text-sm text-slate-600 italic",children:C.notes})]}),e.jsxs("div",{className:"flex-shrink-0 flex gap-2",children:[z&&e.jsx(J,{variant:"outline",size:"sm",onClick:()=>j(C),className:"text-red-600 hover:text-red-700 hover:bg-red-50 whitespace-nowrap",children:"Cancel Tickets"}),V&&e.jsxs(J,{variant:"outline",size:"sm",onClick:()=>N(C),className:"text-green-600 hover:text-green-700 hover:bg-green-50 whitespace-nowrap",children:[e.jsx(OE,{className:"w-3 h-3 mr-1"}),"Reinstate"]})]})]})})},C.id)})}),e.jsx(zt,{children:e.jsx(J,{variant:"outline",onClick:a,children:"Close"})})]})}),l&&e.jsx(Ct,{open:!0,onOpenChange:()=>o(null),children:e.jsxs(Nt,{children:[e.jsx(kt,{children:e.jsx(Et,{children:"Cancel Tickets"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(vs,{className:"w-5 h-5 text-amber-600 shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-amber-900 mb-1",children:"Important:"}),e.jsx("p",{className:"text-amber-800",children:"This will void the selected tickets from this purchase. The tickets will be removed from the organization's available balance. You can reinstate them later if needed."})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Original Purchase:"}),e.jsxs("span",{className:"font-semibold text-slate-900 ml-2",children:[l.original_quantity||l.quantity," ticket(s)"]})]}),(l.cancelled_quantity||0)>0&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Already Cancelled:"}),e.jsxs("span",{className:"font-semibold text-red-600 ml-2",children:[l.cancelled_quantity," ticket(s)"]})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Available to Cancel:"}),e.jsxs("span",{className:"font-semibold text-blue-600 ml-2",children:[(l.original_quantity||l.quantity)-(l.cancelled_quantity||0)," ticket(s)"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"cancel-quantity",children:"Quantity to Cancel *"}),e.jsx(he,{id:"cancel-quantity",type:"number",min:"1",max:(l.original_quantity||l.quantity)-(l.cancelled_quantity||0),value:d,onChange:C=>m(C.target.value),placeholder:"Enter number of tickets to cancel"})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>o(null),disabled:v.isPending,children:"Cancel"}),e.jsx(J,{onClick:w,disabled:v.isPending||!d,className:"bg-red-600 hover:bg-red-700",children:v.isPending?"Cancelling...":"Confirm Cancellation"})]})]})}),c&&e.jsx(Ct,{open:!0,onOpenChange:()=>u(null),children:e.jsxs(Nt,{children:[e.jsx(kt,{children:e.jsx(Et,{children:"Reinstate Cancelled Tickets"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(OE,{className:"w-5 h-5 text-green-600 shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-green-900 mb-1",children:"Reinstate Transaction"}),e.jsx("p",{className:"text-green-800",children:"This will reverse the cancellation and restore the tickets back to the organization's available balance."})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Program:"}),e.jsx("span",{className:"font-semibold text-slate-900 ml-2",children:c.program_name})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Tickets to Reinstate:"}),e.jsxs("span",{className:"font-semibold text-green-600 ml-2",children:[c.cancelled_quantity||0," ticket(s)"]})]}),c.purchase_order_number&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"PO Number:"}),e.jsx("span",{className:"font-semibold text-slate-900 ml-2",children:c.purchase_order_number})]})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>u(null),disabled:y.isPending,children:"Cancel"}),e.jsx(J,{onClick:_,disabled:y.isPending,className:"bg-green-600 hover:bg-green-700",children:y.isPending?"Reinstating...":"Confirm Reinstatement"})]})]})})]})}function HB({isAdmin:t,memberRole:s,memberInfo:n,isFeatureExcluded:r}){const[a,i]=b.useState(""),[l,o]=b.useState("all"),[c,u]=b.useState("tickets_desc"),[d,m]=b.useState(null);Be.useEffect(()=>{s!=null&&(!t||r("page_TicketSalesAnalytics"))&&(window.location.href=Pe("Events"))},[t,s,r]);const{data:h,isLoading:p}=me({queryKey:["all-transactions"],queryFn:()=>X.entities.ProgramTicketTransaction.list(),initialData:[]}),{data:g,isLoading:v}=me({queryKey:["all-organizations"],queryFn:()=>X.entities.Organization.list(),initialData:[]}),y=p||v,j=b.useMemo(()=>[...new Set(h.map(P=>P.program_name).filter(Boolean))].sort(),[h]),w=b.useMemo(()=>{const A=new Map;return(l==="all"?h:h.filter(C=>C.program_name===l)).forEach(C=>{const O=C.organization_id;if(!O)return;if(!A.has(O)){const k=g.find(E=>E.id===O);A.set(O,{organization_id:O,organization_name:(k==null?void 0:k.name)||"Unknown Organization",total_tickets_purchased:0,total_tickets_used:0,total_tickets_refunded:0,net_tickets:0,total_sales_value:0,programs:new Set,transaction_count:0})}const M=A.get(O);if(M.transaction_count++,C.program_name&&M.programs.add(C.program_name),C.transaction_type==="purchase"){const k=C.original_quantity||C.quantity,E=C.cancelled_quantity||0,R=k-E;M.total_tickets_purchased+=R,M.net_tickets+=R;const F=C.total_cost_before_discount||0;M.total_sales_value+=F}else C.transaction_type==="refund"?(M.total_tickets_refunded+=C.quantity||0,M.net_tickets+=C.quantity||0):C.transaction_type==="usage"&&(M.total_tickets_used+=C.quantity||0)}),Array.from(A.values())},[h,g,l]),N=b.useMemo(()=>{let A=w.filter(P=>P.organization_name.toLowerCase().includes(a.toLowerCase()));return A.sort((P,C)=>{switch(c){case"tickets_desc":return C.total_tickets_purchased-P.total_tickets_purchased;case"tickets_asc":return P.total_tickets_purchased-C.total_tickets_purchased;case"value_desc":return C.total_sales_value-P.total_sales_value;case"value_asc":return P.total_sales_value-C.total_sales_value;case"name_asc":return P.organization_name.localeCompare(C.organization_name);case"name_desc":return C.organization_name.localeCompare(P.organization_name);default:return 0}}),A},[w,a,c]),_=b.useMemo(()=>N.reduce((A,P)=>({tickets:A.tickets+P.total_tickets_purchased,value:A.value+P.total_sales_value,organizations:A.organizations+1}),{tickets:0,value:0,organizations:0}),[N]),T=()=>{const A=["Organization","Tickets Purchased","Tickets Used","Tickets Refunded","Net Tickets","Sales Value ()","Programs","Transactions"],P=N.map(E=>[E.organization_name,E.total_tickets_purchased,E.total_tickets_used,E.total_tickets_refunded,E.net_tickets,E.total_sales_value.toFixed(2),Array.from(E.programs).join("; "),E.transaction_count]),C=[A.join(","),...P.map(E=>E.map(R=>`"${R}"`).join(","))].join(`
`),O=new Blob([C],{type:"text/csv"}),M=window.URL.createObjectURL(O),k=document.createElement("a");k.href=M,k.download=`ticket-sales-${Mt(new Date,"yyyy-MM-dd")}.csv`,document.body.appendChild(k),k.click(),window.URL.revokeObjectURL(M),k.remove()};return s==null?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-slate-600",children:"Loading..."})}):!t||r("page_TicketSalesAnalytics")?null:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(ah,{className:"w-8 h-8 text-blue-600"}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900",children:"Ticket Sales Analytics"})]}),e.jsx("p",{className:"text-slate-600",children:"Overview of ticket sales across all organizations"})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsx(Fe,{className:"pb-3",children:e.jsx(Ue,{className:"text-sm font-medium text-slate-600",children:"Total Organizations"})}),e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Na,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-3xl font-bold text-slate-900",children:_.organizations})]})})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsx(Fe,{className:"pb-3",children:e.jsx(Ue,{className:"text-sm font-medium text-slate-600",children:"Total Tickets Sold"})}),e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Rs,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"text-3xl font-bold text-slate-900",children:_.tickets})]})})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsx(Fe,{className:"pb-3",children:e.jsx(Ue,{className:"text-sm font-medium text-slate-600",children:"Total Sales Value"})}),e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(DK,{className:"w-5 h-5 text-green-600"}),e.jsxs("span",{className:"text-3xl font-bold text-slate-900",children:["",_.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})})]})]}),e.jsx(le,{className:"border-slate-200 shadow-sm mb-6",children:e.jsx(ce,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx(he,{placeholder:"Search organizations...",value:a,onChange:A=>i(A.target.value),className:"pl-10"})]}),e.jsxs(Ke,{value:l,onValueChange:o,children:[e.jsx(Ve,{className:"w-full md:w-[200px]",children:e.jsx(Qe,{placeholder:"Filter by program"})}),e.jsxs(We,{children:[e.jsx(re,{value:"all",children:"All Programs"}),j.map(A=>e.jsx(re,{value:A,children:A},A))]})]}),e.jsxs(Ke,{value:c,onValueChange:u,children:[e.jsx(Ve,{className:"w-full md:w-[200px]",children:e.jsx(Qe,{placeholder:"Sort by"})}),e.jsxs(We,{children:[e.jsx(re,{value:"tickets_desc",children:"Tickets (High to Low)"}),e.jsx(re,{value:"tickets_asc",children:"Tickets (Low to High)"}),e.jsx(re,{value:"value_desc",children:"Value (High to Low)"}),e.jsx(re,{value:"value_asc",children:"Value (Low to High)"}),e.jsx(re,{value:"name_asc",children:"Name (A-Z)"}),e.jsx(re,{value:"name_desc",children:"Name (Z-A)"})]})]}),e.jsxs(J,{variant:"outline",onClick:T,className:"gap-2",disabled:N.length===0,children:[e.jsx(Zn,{className:"w-4 h-4"}),"Export CSV"]})]})})}),e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsx(Ue,{children:"Sales by Organization"})}),e.jsx(ce,{className:"p-0",children:y?e.jsx("div",{className:"p-12 text-center text-slate-600",children:"Loading sales data..."}):N.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(cY,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No sales data found"}),e.jsx("p",{className:"text-slate-600",children:"Try adjusting your filters"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Organization"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Purchased"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Used"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Refunded"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Net Balance"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Sales Value"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Programs"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-600 uppercase tracking-wider",children:"Transactions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:N.map(A=>e.jsxs("tr",{className:"hover:bg-slate-50 cursor-pointer transition-colors",onClick:()=>m(A),children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Na,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{className:"font-medium text-slate-900",children:A.organization_name})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsx("span",{className:"font-semibold text-green-600",children:A.total_tickets_purchased})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-slate-600",children:A.total_tickets_used}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-slate-600",children:A.total_tickets_refunded}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsx("span",{className:`font-semibold ${A.net_tickets>0?"text-blue-600":"text-slate-600"}`,children:A.net_tickets})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right font-semibold text-slate-900",children:["",A.total_sales_value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:A.programs.size})}),e.jsx("td",{className:"px-6 py-4 text-center text-slate-600",children:A.transaction_count})]},A.organization_id))})]})})})]})]}),d&&e.jsx(lme,{organizationId:d.organization_id,organizationName:d.organization_name,programNameFilter:l,memberInfo:n,onClose:()=>m(null),onTransactionUpdated:()=>{m(null)}})]})}function jS({categories:t,selectedSubcategories:s,onSubcategoryToggle:n,searchQuery:r,onSearchChange:a,onClearSearch:i,isLoading:l=!1}){const[o,c]=Be.useState({}),[u,d]=Be.useState({}),[m,h]=Be.useState(!0),p=j=>{c(w=>({...w,[j]:!w[j]}))},g=j=>{d(w=>({...w,[j]:!w[j]}))},v=(j,w)=>{w.stopPropagation();const N=t.find(_=>_.name===j);N&&N.subcategories&&N.subcategories.forEach(T=>{s.includes(T)&&n(T)})},y=j=>{const w=t.find(N=>N.name===j);return!w||!w.subcategories?!1:w.subcategories.some(N=>s.includes(N))};return Be.useEffect(()=>{if(!t||t.length===0)return;const j={};t.forEach(w=>{y(w.name)&&(j[w.name]=!0)}),c(w=>({...w,...j}))},[t]),l?e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"text-sm text-slate-500 italic",children:"Loading categories..."})}):!t||t.length===0?e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"text-sm text-slate-500 italic",children:"No categories available"})}):e.jsxs("div",{className:"space-y-0",children:[e.jsx("style",{jsx:!0,children:`
        .accordion-content {
          overflow: hidden;
          transition: max-height 0.3s ease-in-out, opacity 0.3s ease-in-out;
        }
        .accordion-content[data-state="closed"] {
          max-height: 0;
          opacity: 0;
        }
        .accordion-content[data-state="open"] {
          max-height: 1000px;
          opacity: 1;
        }
        .accordion-content[data-state="open-category"] {
          max-height: 2000px;
          opacity: 1;
        }
      `}),e.jsxs("div",{className:"border-b border-slate-200 py-3",children:[e.jsxs("button",{onClick:()=>h(!m),className:"w-full flex items-center justify-between px-2 py-1.5 text-sm font-semibold transition-colors text-left hover:bg-slate-100 text-slate-700",children:[e.jsx("span",{children:"Search Resources"}),m?e.jsx(Or,{className:"w-3.5 h-3.5 text-slate-600 flex-shrink-0 transition-transform duration-200 ease-in-out"}):e.jsx(js,{className:"w-3.5 h-3.5 text-slate-600 flex-shrink-0 transition-transform duration-200 ease-in-out"})]}),e.jsx("div",{className:"accordion-content","data-state":m?"open":"closed",children:e.jsx("div",{className:"pt-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx(he,{placeholder:"Search...",value:r,onChange:j=>a(j.target.value),className:"pl-10 pr-10 rounded-none"}),r&&e.jsx("button",{onClick:i,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:e.jsx(_s,{className:"w-4 h-4"})})]})})})]}),e.jsx("div",{children:t.map(j=>{if(!(j.subcategories&&j.subcategories.length>0))return null;const N=o[j.name],_=u[j.name],T=[...j.subcategories].sort((O,M)=>O.localeCompare(M,void 0,{sensitivity:"base"})),A=_?T:T.slice(0,8),P=T.length>8,C=y(j.name);return e.jsxs("div",{className:"border-b border-slate-200 py-3",children:[e.jsxs("button",{onClick:()=>p(j.name),className:"w-full flex items-center justify-between px-2 py-1.5 text-sm font-semibold transition-colors text-left hover:bg-slate-100 text-purple-700",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("span",{className:"break-words",children:j.name}),C&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 font-medium",children:j.subcategories.filter(O=>s.includes(O)).length})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[C&&e.jsx("span",{onClick:O=>v(j.name,O),className:"text-xs text-blue-600 hover:text-blue-700 hover:underline",children:"Clear"}),N?e.jsx(Or,{className:"w-3.5 h-3.5 text-slate-600 flex-shrink-0 transition-transform duration-200 ease-in-out"}):e.jsx(js,{className:"w-3.5 h-3.5 text-slate-600 flex-shrink-0 transition-transform duration-200 ease-in-out"})]})]}),e.jsx("div",{className:"accordion-content","data-state":N?"open-category":"closed",children:e.jsxs("div",{className:"space-y-0.5 pt-1",children:[A.map(O=>{const M=s.includes(O);return e.jsxs("div",{className:`flex items-start gap-2 px-2 py-1 cursor-pointer transition-colors ${M?"bg-blue-50":"hover:bg-slate-50"}`,onClick:k=>{k.target===k.currentTarget&&n(O)},children:[e.jsx(ba,{id:`subcategory-${O}`,checked:M,onCheckedChange:()=>n(O),className:"mt-0.5 flex-shrink-0 data-[state=checked]:bg-blue-600 data-[state=checked]:border-blue-600 rounded-none"}),e.jsx(ee,{htmlFor:`subcategory-${O}`,className:`text-xs cursor-pointer break-words flex-1 leading-tight pt-0.5 ${M?"text-blue-700 font-medium":"text-slate-700"}`,children:O})]},O)}),P&&e.jsx("button",{onClick:()=>g(j.name),className:"w-full text-left px-2 py-1 text-xs text-blue-600 hover:text-blue-700 hover:bg-blue-50 transition-colors",children:_?" Show less":`+ View ${T.length-8} more`})]})})]},j.id)})})]})}function ome(t){const s=cme(t),n=b.forwardRef((r,a)=>{const{children:i,...l}=r,o=b.Children.toArray(i),c=o.find(ume);if(c){const u=c.props.children,d=o.map(m=>m===c?b.Children.count(u)>1?b.Children.only(null):b.isValidElement(u)?u.props.children:null:m);return e.jsx(s,{...l,ref:a,children:b.isValidElement(u)?b.cloneElement(u,void 0,d):null})}return e.jsx(s,{...l,ref:a,children:i})});return n.displayName=`${t}.Slot`,n}function cme(t){const s=b.forwardRef((n,r)=>{const{children:a,...i}=n;if(b.isValidElement(a)){const l=mme(a),o=hme(i,a.props);return a.type!==b.Fragment&&(o.ref=r?Fr(r,l):l),b.cloneElement(a,o)}return b.Children.count(a)>1?b.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var dme=Symbol("radix.slottable");function ume(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===dme}function hme(t,s){const n={...s};for(const r in s){const a=t[r],i=s[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...o)=>{const c=i(...o);return a(...o),c}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...t,...n}}function mme(t){var r,a;let s=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var X_=["Enter"," "],fme=["ArrowDown","PageUp","Home"],KB=["ArrowUp","PageDown","End"],pme=[...fme,...KB],xme={ltr:[...X_,"ArrowRight"],rtl:[...X_,"ArrowLeft"]},gme={ltr:["ArrowLeft"],rtl:["ArrowRight"]},up="Menu",[pf,vme,yme]=p2(up),[yd,GB]=vr(up,[yme,ec,vh]),gv=ec(),YB=vh(),[bme,bd]=yd(up),[jme,hp]=yd(up),QB=t=>{const{__scopeMenu:s,open:n=!1,children:r,dir:a,onOpenChange:i,modal:l=!0}=t,o=gv(s),[c,u]=b.useState(null),d=b.useRef(!1),m=el(i),h=ep(a);return b.useEffect(()=>{const p=()=>{d.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>d.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),e.jsx(q0,{...o,children:e.jsx(bme,{scope:s,open:n,onOpenChange:m,content:c,onContentChange:u,children:e.jsx(jme,{scope:s,onClose:b.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:d,dir:h,modal:l,children:r})})})};QB.displayName=up;var wme="MenuAnchor",wS=b.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t,a=gv(n);return e.jsx(Xf,{...a,...r,ref:s})});wS.displayName=wme;var NS="MenuPortal",[Nme,JB]=yd(NS,{forceMount:void 0}),XB=t=>{const{__scopeMenu:s,forceMount:n,children:r,container:a}=t,i=bd(NS,s);return e.jsx(Nme,{scope:s,forceMount:n,children:e.jsx(yr,{present:n||i.open,children:e.jsx(hh,{asChild:!0,container:a,children:r})})})};XB.displayName=NS;var Ga="MenuContent",[_me,_S]=yd(Ga),ZB=b.forwardRef((t,s)=>{const n=JB(Ga,t.__scopeMenu),{forceMount:r=n.forceMount,...a}=t,i=bd(Ga,t.__scopeMenu),l=hp(Ga,t.__scopeMenu);return e.jsx(pf.Provider,{scope:t.__scopeMenu,children:e.jsx(yr,{present:r||i.open,children:e.jsx(pf.Slot,{scope:t.__scopeMenu,children:l.modal?e.jsx(Sme,{...a,ref:s}):e.jsx(Cme,{...a,ref:s})})})})}),Sme=b.forwardRef((t,s)=>{const n=bd(Ga,t.__scopeMenu),r=b.useRef(null),a=xs(s,r);return b.useEffect(()=>{const i=r.current;if(i)return T0(i)},[]),e.jsx(SS,{...t,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:jt(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Cme=b.forwardRef((t,s)=>{const n=bd(Ga,t.__scopeMenu);return e.jsx(SS,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),kme=ome("MenuContent.ScrollLock"),SS=b.forwardRef((t,s)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:l,disableOutsidePointerEvents:o,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:m,onInteractOutside:h,onDismiss:p,disableOutsideScroll:g,...v}=t,y=bd(Ga,n),j=hp(Ga,n),w=gv(n),N=YB(n),_=vme(n),[T,A]=b.useState(null),P=b.useRef(null),C=xs(s,P,y.onContentChange),O=b.useRef(0),M=b.useRef(""),k=b.useRef(0),E=b.useRef(null),R=b.useRef("right"),F=b.useRef(0),z=g?Gf:b.Fragment,V=g?{as:kme,allowPinchZoom:!0}:void 0,U=$=>{var K,ae;const L=M.current+$,I=_().filter(se=>!se.disabled),W=document.activeElement,q=(K=I.find(se=>se.ref.current===W))==null?void 0:K.textValue,Z=I.map(se=>se.textValue),Q=Bme(Z,L,q),Y=(ae=I.find(se=>se.textValue===Q))==null?void 0:ae.ref.current;(function se(de){M.current=de,window.clearTimeout(O.current),de!==""&&(O.current=window.setTimeout(()=>se(""),1e3))})(L),Y&&setTimeout(()=>Y.focus())};b.useEffect(()=>()=>window.clearTimeout(O.current),[]),E0();const B=b.useCallback($=>{var I,W;return R.current===((I=E.current)==null?void 0:I.side)&&zme($,(W=E.current)==null?void 0:W.area)},[]);return e.jsx(_me,{scope:n,searchRef:M,onItemEnter:b.useCallback($=>{B($)&&$.preventDefault()},[B]),onItemLeave:b.useCallback($=>{var L;B($)||((L=P.current)==null||L.focus(),A(null))},[B]),onTriggerLeave:b.useCallback($=>{B($)&&$.preventDefault()},[B]),pointerGraceTimerRef:k,onPointerGraceIntentChange:b.useCallback($=>{E.current=$},[]),children:e.jsx(z,{...V,children:e.jsx(Kf,{asChild:!0,trapped:a,onMountAutoFocus:jt(i,$=>{var L;$.preventDefault(),(L=P.current)==null||L.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:e.jsx(uh,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:m,onInteractOutside:h,onDismiss:p,children:e.jsx(x2,{asChild:!0,...N,dir:j.dir,orientation:"vertical",loop:r,currentTabStopId:T,onCurrentTabStopIdChange:A,onEntryFocus:jt(c,$=>{j.isUsingKeyboardRef.current||$.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(z0,{role:"menu","aria-orientation":"vertical","data-state":p8(y.open),"data-radix-menu-content":"",dir:j.dir,...w,...v,ref:C,style:{outline:"none",...v.style},onKeyDown:jt(v.onKeyDown,$=>{const I=$.target.closest("[data-radix-menu-content]")===$.currentTarget,W=$.ctrlKey||$.altKey||$.metaKey,q=$.key.length===1;I&&($.key==="Tab"&&$.preventDefault(),!W&&q&&U($.key));const Z=P.current;if($.target!==Z||!pme.includes($.key))return;$.preventDefault();const Y=_().filter(K=>!K.disabled).map(K=>K.ref.current);KB.includes($.key)&&Y.reverse(),Lme(Y)}),onBlur:jt(t.onBlur,$=>{$.currentTarget.contains($.target)||(window.clearTimeout(O.current),M.current="")}),onPointerMove:jt(t.onPointerMove,xf($=>{const L=$.target,I=F.current!==$.clientX;if($.currentTarget.contains(L)&&I){const W=$.clientX>F.current?"right":"left";R.current=W,F.current=$.clientX}}))})})})})})})});ZB.displayName=Ga;var Eme="MenuGroup",CS=b.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t;return e.jsx(Ut.div,{role:"group",...r,ref:s})});CS.displayName=Eme;var Pme="MenuLabel",e8=b.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t;return e.jsx(Ut.div,{...r,ref:s})});e8.displayName=Pme;var Xg="MenuItem",KM="menu.itemSelect",vv=b.forwardRef((t,s)=>{const{disabled:n=!1,onSelect:r,...a}=t,i=b.useRef(null),l=hp(Xg,t.__scopeMenu),o=_S(Xg,t.__scopeMenu),c=xs(s,i),u=b.useRef(!1),d=()=>{const m=i.current;if(!n&&m){const h=new CustomEvent(KM,{bubbles:!0,cancelable:!0});m.addEventListener(KM,p=>r==null?void 0:r(p),{once:!0}),c3(m,h),h.defaultPrevented?u.current=!1:l.onClose()}};return e.jsx(t8,{...a,ref:c,disabled:n,onClick:jt(t.onClick,d),onPointerDown:m=>{var h;(h=t.onPointerDown)==null||h.call(t,m),u.current=!0},onPointerUp:jt(t.onPointerUp,m=>{var h;u.current||(h=m.currentTarget)==null||h.click()}),onKeyDown:jt(t.onKeyDown,m=>{const h=o.searchRef.current!=="";n||h&&m.key===" "||X_.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});vv.displayName=Xg;var t8=b.forwardRef((t,s)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...i}=t,l=_S(Xg,n),o=YB(n),c=b.useRef(null),u=xs(s,c),[d,m]=b.useState(!1),[h,p]=b.useState("");return b.useEffect(()=>{const g=c.current;g&&p((g.textContent??"").trim())},[i.children]),e.jsx(pf.ItemSlot,{scope:n,disabled:r,textValue:a??h,children:e.jsx(g2,{asChild:!0,...o,focusable:!r,children:e.jsx(Ut.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:jt(t.onPointerMove,xf(g=>{r?l.onItemLeave(g):(l.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:jt(t.onPointerLeave,xf(g=>l.onItemLeave(g))),onFocus:jt(t.onFocus,()=>m(!0)),onBlur:jt(t.onBlur,()=>m(!1))})})})}),Tme="MenuCheckboxItem",s8=b.forwardRef((t,s)=>{const{checked:n=!1,onCheckedChange:r,...a}=t;return e.jsx(l8,{scope:t.__scopeMenu,checked:n,children:e.jsx(vv,{role:"menuitemcheckbox","aria-checked":Zg(n)?"mixed":n,...a,ref:s,"data-state":ES(n),onSelect:jt(a.onSelect,()=>r==null?void 0:r(Zg(n)?!0:!n),{checkForDefaultPrevented:!1})})})});s8.displayName=Tme;var n8="MenuRadioGroup",[Ame,Mme]=yd(n8,{value:void 0,onValueChange:()=>{}}),r8=b.forwardRef((t,s)=>{const{value:n,onValueChange:r,...a}=t,i=el(r);return e.jsx(Ame,{scope:t.__scopeMenu,value:n,onValueChange:i,children:e.jsx(CS,{...a,ref:s})})});r8.displayName=n8;var a8="MenuRadioItem",i8=b.forwardRef((t,s)=>{const{value:n,...r}=t,a=Mme(a8,t.__scopeMenu),i=n===a.value;return e.jsx(l8,{scope:t.__scopeMenu,checked:i,children:e.jsx(vv,{role:"menuitemradio","aria-checked":i,...r,ref:s,"data-state":ES(i),onSelect:jt(r.onSelect,()=>{var l;return(l=a.onValueChange)==null?void 0:l.call(a,n)},{checkForDefaultPrevented:!1})})})});i8.displayName=a8;var kS="MenuItemIndicator",[l8,Dme]=yd(kS,{checked:!1}),o8=b.forwardRef((t,s)=>{const{__scopeMenu:n,forceMount:r,...a}=t,i=Dme(kS,n);return e.jsx(yr,{present:r||Zg(i.checked)||i.checked===!0,children:e.jsx(Ut.span,{...a,ref:s,"data-state":ES(i.checked)})})});o8.displayName=kS;var Ome="MenuSeparator",c8=b.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t;return e.jsx(Ut.div,{role:"separator","aria-orientation":"horizontal",...r,ref:s})});c8.displayName=Ome;var Rme="MenuArrow",d8=b.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t,a=gv(n);return e.jsx($0,{...a,...r,ref:s})});d8.displayName=Rme;var Fme="MenuSub",[pke,u8]=yd(Fme),Im="MenuSubTrigger",h8=b.forwardRef((t,s)=>{const n=bd(Im,t.__scopeMenu),r=hp(Im,t.__scopeMenu),a=u8(Im,t.__scopeMenu),i=_S(Im,t.__scopeMenu),l=b.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:c}=i,u={__scopeMenu:t.__scopeMenu},d=b.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return b.useEffect(()=>d,[d]),b.useEffect(()=>{const m=o.current;return()=>{window.clearTimeout(m),c(null)}},[o,c]),e.jsx(wS,{asChild:!0,...u,children:e.jsx(t8,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":p8(n.open),...t,ref:Fr(s,a.onTriggerChange),onClick:m=>{var h;(h=t.onClick)==null||h.call(t,m),!(t.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:jt(t.onPointerMove,xf(m=>{i.onItemEnter(m),!m.defaultPrevented&&!t.disabled&&!n.open&&!l.current&&(i.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:jt(t.onPointerLeave,xf(m=>{var p,g;d();const h=(p=n.content)==null?void 0:p.getBoundingClientRect();if(h){const v=(g=n.content)==null?void 0:g.dataset.side,y=v==="right",j=y?-5:5,w=h[y?"left":"right"],N=h[y?"right":"left"];i.onPointerGraceIntentChange({area:[{x:m.clientX+j,y:m.clientY},{x:w,y:h.top},{x:N,y:h.top},{x:N,y:h.bottom},{x:w,y:h.bottom}],side:v}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(m),m.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:jt(t.onKeyDown,m=>{var p;const h=i.searchRef.current!=="";t.disabled||h&&m.key===" "||xme[r.dir].includes(m.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),m.preventDefault())})})})});h8.displayName=Im;var m8="MenuSubContent",f8=b.forwardRef((t,s)=>{const n=JB(Ga,t.__scopeMenu),{forceMount:r=n.forceMount,...a}=t,i=bd(Ga,t.__scopeMenu),l=hp(Ga,t.__scopeMenu),o=u8(m8,t.__scopeMenu),c=b.useRef(null),u=xs(s,c);return e.jsx(pf.Provider,{scope:t.__scopeMenu,children:e.jsx(yr,{present:r||i.open,children:e.jsx(pf.Slot,{scope:t.__scopeMenu,children:e.jsx(SS,{id:o.contentId,"aria-labelledby":o.triggerId,...a,ref:u,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var m;l.isUsingKeyboardRef.current&&((m=c.current)==null||m.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:jt(t.onFocusOutside,d=>{d.target!==o.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:jt(t.onEscapeKeyDown,d=>{l.onClose(),d.preventDefault()}),onKeyDown:jt(t.onKeyDown,d=>{var p;const m=d.currentTarget.contains(d.target),h=gme[l.dir].includes(d.key);m&&h&&(i.onOpenChange(!1),(p=o.trigger)==null||p.focus(),d.preventDefault())})})})})})});f8.displayName=m8;function p8(t){return t?"open":"closed"}function Zg(t){return t==="indeterminate"}function ES(t){return Zg(t)?"indeterminate":t?"checked":"unchecked"}function Lme(t){const s=document.activeElement;for(const n of t)if(n===s||(n.focus(),document.activeElement!==s))return}function Ime(t,s){return t.map((n,r)=>t[(s+r)%t.length])}function Bme(t,s,n){const a=s.length>1&&Array.from(s).every(u=>u===s[0])?s[0]:s,i=n?t.indexOf(n):-1;let l=Ime(t,Math.max(i,0));a.length===1&&(l=l.filter(u=>u!==n));const c=l.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function qme(t,s){const{x:n,y:r}=t;let a=!1;for(let i=0,l=s.length-1;i<s.length;l=i++){const o=s[i],c=s[l],u=o.x,d=o.y,m=c.x,h=c.y;d>r!=h>r&&n<(m-u)*(r-d)/(h-d)+u&&(a=!a)}return a}function zme(t,s){if(!s)return!1;const n={x:t.clientX,y:t.clientY};return qme(n,s)}function xf(t){return s=>s.pointerType==="mouse"?t(s):void 0}var $me=QB,Ume=wS,Vme=XB,Wme=ZB,Hme=CS,Kme=e8,Gme=vv,Yme=s8,Qme=r8,Jme=i8,Xme=o8,Zme=c8,efe=d8,tfe=h8,sfe=f8,yv="DropdownMenu",[nfe]=vr(yv,[GB]),Lr=GB(),[rfe,x8]=nfe(yv),g8=t=>{const{__scopeDropdownMenu:s,children:n,dir:r,open:a,defaultOpen:i,onOpenChange:l,modal:o=!0}=t,c=Lr(s),u=b.useRef(null),[d,m]=Ja({prop:a,defaultProp:i??!1,onChange:l,caller:yv});return e.jsx(rfe,{scope:s,triggerId:Vn(),triggerRef:u,contentId:Vn(),open:d,onOpenChange:m,onOpenToggle:b.useCallback(()=>m(h=>!h),[m]),modal:o,children:e.jsx($me,{...c,open:d,onOpenChange:m,dir:r,modal:o,children:n})})};g8.displayName=yv;var v8="DropdownMenuTrigger",y8=b.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=t,i=x8(v8,n),l=Lr(n);return e.jsx(Ume,{asChild:!0,...l,children:e.jsx(Ut.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:Fr(s,i.triggerRef),onPointerDown:jt(t.onPointerDown,o=>{!r&&o.button===0&&o.ctrlKey===!1&&(i.onOpenToggle(),i.open||o.preventDefault())}),onKeyDown:jt(t.onKeyDown,o=>{r||(["Enter"," "].includes(o.key)&&i.onOpenToggle(),o.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})})});y8.displayName=v8;var afe="DropdownMenuPortal",b8=t=>{const{__scopeDropdownMenu:s,...n}=t,r=Lr(s);return e.jsx(Vme,{...r,...n})};b8.displayName=afe;var j8="DropdownMenuContent",w8=b.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=x8(j8,n),i=Lr(n),l=b.useRef(!1);return e.jsx(Wme,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...r,ref:s,onCloseAutoFocus:jt(t.onCloseAutoFocus,o=>{var c;l.current||(c=a.triggerRef.current)==null||c.focus(),l.current=!1,o.preventDefault()}),onInteractOutside:jt(t.onInteractOutside,o=>{const c=o.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!a.modal||d)&&(l.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});w8.displayName=j8;var ife="DropdownMenuGroup",lfe=b.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Lr(n);return e.jsx(Hme,{...a,...r,ref:s})});lfe.displayName=ife;var ofe="DropdownMenuLabel",N8=b.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Lr(n);return e.jsx(Kme,{...a,...r,ref:s})});N8.displayName=ofe;var cfe="DropdownMenuItem",_8=b.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Lr(n);return e.jsx(Gme,{...a,...r,ref:s})});_8.displayName=cfe;var dfe="DropdownMenuCheckboxItem",S8=b.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Lr(n);return e.jsx(Yme,{...a,...r,ref:s})});S8.displayName=dfe;var ufe="DropdownMenuRadioGroup",hfe=b.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Lr(n);return e.jsx(Qme,{...a,...r,ref:s})});hfe.displayName=ufe;var mfe="DropdownMenuRadioItem",C8=b.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Lr(n);return e.jsx(Jme,{...a,...r,ref:s})});C8.displayName=mfe;var ffe="DropdownMenuItemIndicator",k8=b.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Lr(n);return e.jsx(Xme,{...a,...r,ref:s})});k8.displayName=ffe;var pfe="DropdownMenuSeparator",E8=b.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Lr(n);return e.jsx(Zme,{...a,...r,ref:s})});E8.displayName=pfe;var xfe="DropdownMenuArrow",gfe=b.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Lr(n);return e.jsx(efe,{...a,...r,ref:s})});gfe.displayName=xfe;var vfe="DropdownMenuSubTrigger",P8=b.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Lr(n);return e.jsx(tfe,{...a,...r,ref:s})});P8.displayName=vfe;var yfe="DropdownMenuSubContent",T8=b.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Lr(n);return e.jsx(sfe,{...a,...r,ref:s,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});T8.displayName=yfe;var bfe=g8,jfe=y8,wfe=b8,A8=w8,M8=N8,D8=_8,O8=S8,R8=C8,F8=k8,L8=E8,I8=P8,B8=T8;const Kx=bfe,Gx=jfe,Nfe=b.forwardRef(({className:t,inset:s,children:n,...r},a)=>e.jsxs(I8,{ref:a,className:tt("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",t),...r,children:[n,e.jsx(js,{className:"ml-auto"})]}));Nfe.displayName=I8.displayName;const _fe=b.forwardRef(({className:t,...s},n)=>e.jsx(B8,{ref:n,className:tt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s}));_fe.displayName=B8.displayName;const Bm=b.forwardRef(({className:t,sideOffset:s=4,...n},r)=>e.jsx(wfe,{children:e.jsx(A8,{ref:r,sideOffset:s,className:tt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));Bm.displayName=A8.displayName;const xa=b.forwardRef(({className:t,inset:s,...n},r)=>e.jsx(D8,{ref:r,className:tt("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",s&&"pl-8",t),...n}));xa.displayName=D8.displayName;const Sfe=b.forwardRef(({className:t,children:s,checked:n,...r},a)=>e.jsxs(O8,{ref:a,className:tt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(F8,{children:e.jsx(Uf,{className:"h-4 w-4"})})}),s]}));Sfe.displayName=O8.displayName;const Cfe=b.forwardRef(({className:t,children:s,...n},r)=>e.jsxs(R8,{ref:r,className:tt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(F8,{children:e.jsx(L5,{className:"h-2 w-2 fill-current"})})}),s]}));Cfe.displayName=R8.displayName;const kfe=b.forwardRef(({className:t,inset:s,...n},r)=>e.jsx(M8,{ref:r,className:tt("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",t),...n}));kfe.displayName=M8.displayName;const Efe=b.forwardRef(({className:t,...s},n)=>e.jsx(L8,{ref:n,className:tt("-mx-1 my-1 h-px bg-muted",t),...s}));Efe.displayName=L8.displayName;const Pfe={ArrowUpRight:Mr,Download:Zn,ExternalLink:Js,PlayCircle:ih,Eye:gr,FileText:ns,Mail:Ms,Plus:Pt};function q8({resource:t,isLocked:s=!1,buttonStyles:n=[],enabledSocialIcons:r=["x","linkedin","email"]}){const a=n.find(d=>d.resource_type===t.resource_type)||null,i=d=>{switch(d){case"download":return e.jsx(Zn,{className:"w-4 h-4"});case"video":return e.jsx(ih,{className:"w-4 h-4"});case"external_link":return e.jsx(Js,{className:"w-4 h-4"});default:return e.jsx(Js,{className:"w-4 h-4"})}},l=d=>{switch(d){case"download":return"Download";case"video":return"Watch Video";case"external_link":return"Visit Site";default:return"View Resource"}},o=()=>{window.open(t.target_url,"_blank","noopener,noreferrer")},c=d=>{const m=encodeURIComponent(t.target_url),h=encodeURIComponent(t.title),p=encodeURIComponent(t.description||"");switch(d){case"x":window.open(`https://twitter.com/intent/tweet?text=${h}&url=${m}`,"_blank","noopener,noreferrer");break;case"linkedin":window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${m}`,"_blank","noopener,noreferrer");break;case"email":window.location.href=`mailto:?subject=${h}&body=${p}%0A%0A${m}`;break}},u=()=>{if(!a)return e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(J,{onClick:o,className:`bg-blue-600 hover:bg-blue-700 ${t.is_public?"flex-1":"w-full"}`,children:[i(t.resource_type),e.jsx("span",{className:"ml-2",children:l(t.resource_type)})]}),t.is_public&&e.jsxs(Kx,{children:[e.jsx(Gx,{asChild:!0,children:e.jsx("button",{className:"shrink-0 w-10 self-stretch inline-flex items-center justify-center bg-transparent rounded-none transition-all duration-300 hover:text-white agcas-share-button",children:e.jsx(Tc,{className:"w-4 h-4"})})}),e.jsxs(Bm,{align:"end",children:[r.includes("x")&&e.jsxs(xa,{onClick:()=>c("x"),className:"cursor-pointer",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),"Share on X"]}),r.includes("linkedin")&&e.jsxs(xa,{onClick:()=>c("linkedin"),className:"cursor-pointer",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})}),"Share on LinkedIn"]}),r.includes("email")&&e.jsxs(xa,{onClick:()=>c("email"),className:"cursor-pointer",children:[e.jsx(Ms,{className:"w-4 h-4 mr-2"}),"Share via Email"]})]})]})]});const d=a.button_text||l(t.resource_type),m=a.button_type,h=a.icon_name&&Pfe[a.icon_name];return m==="square_agcas"?e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ba,{onClick:o,className:"shrink-0"}),t.is_public&&e.jsxs(Kx,{children:[e.jsx(Gx,{asChild:!0,children:e.jsx("button",{className:"shrink-0 w-10 self-stretch inline-flex items-center justify-center bg-transparent rounded-none transition-all duration-300 hover:text-white agcas-share-button",children:e.jsx(Tc,{className:"w-4 h-4"})})}),e.jsxs(Bm,{align:"end",children:[r.includes("x")&&e.jsxs(xa,{onClick:()=>c("x"),className:"cursor-pointer",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),"Share on X"]}),r.includes("linkedin")&&e.jsxs(xa,{onClick:()=>c("linkedin"),className:"cursor-pointer",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})}),"Share on LinkedIn"]}),r.includes("email")&&e.jsxs(xa,{onClick:()=>c("email"),className:"cursor-pointer",children:[e.jsx(Ms,{className:"w-4 h-4 mr-2"}),"Share via Email"]})]})]})]}):m==="rectangular_agcas"?e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Is,{onClick:o,icon:h&&a.icon_name!=="none"?h:void 0,className:t.is_public?"flex-1":"w-full",children:d}),t.is_public&&e.jsxs(Kx,{children:[e.jsx(Gx,{asChild:!0,children:e.jsx("button",{className:"shrink-0 w-10 self-stretch inline-flex items-center justify-center bg-transparent rounded-none transition-all duration-300 hover:text-white agcas-share-button",children:e.jsx(Tc,{className:"w-4 h-4"})})}),e.jsxs(Bm,{align:"end",children:[r.includes("x")&&e.jsxs(xa,{onClick:()=>c("x"),className:"cursor-pointer",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),"Share on X"]}),r.includes("linkedin")&&e.jsxs(xa,{onClick:()=>c("linkedin"),className:"cursor-pointer",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})}),"Share on LinkedIn"]}),r.includes("email")&&e.jsxs(xa,{onClick:()=>c("email"),className:"cursor-pointer",children:[e.jsx(Ms,{className:"w-4 h-4 mr-2"}),"Share via Email"]})]})]})]}):e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(J,{onClick:o,className:`bg-blue-600 hover:bg-blue-700 ${t.is_public?"flex-1":"w-full"}`,children:[h&&a.icon_name!=="none"?e.jsx(h,{className:"w-4 h-4 mr-2"}):i(t.resource_type),d]}),t.is_public&&e.jsxs(Kx,{children:[e.jsx(Gx,{asChild:!0,children:e.jsx("button",{className:"shrink-0 w-10 self-stretch inline-flex items-center justify-center bg-transparent rounded-none transition-all duration-300 hover:text-white agcas-share-button",children:e.jsx(Tc,{className:"w-4 h-4"})})}),e.jsxs(Bm,{align:"end",children:[r.includes("x")&&e.jsxs(xa,{onClick:()=>c("x"),className:"cursor-pointer",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),"Share on X"]}),r.includes("linkedin")&&e.jsxs(xa,{onClick:()=>c("linkedin"),className:"cursor-pointer",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})}),"Share on LinkedIn"]}),r.includes("email")&&e.jsxs(xa,{onClick:()=>c("email"),className:"cursor-pointer",children:[e.jsx(Ms,{className:"w-4 h-4 mr-2"}),"Share via Email"]})]})]})]})};return e.jsxs(le,{className:"border-slate-200 hover:shadow-lg transition-shadow duration-300 overflow-hidden h-full flex flex-col rounded-none relative",children:[e.jsx("style",{jsx:!0,children:`
        .agcas-share-button {
          box-shadow: inset 0 0 0 2px black;
        }
        .agcas-share-button:hover {
          background: linear-gradient(to right top, rgb(92, 0, 133), rgb(186, 0, 135), rgb(238, 0, 195), rgb(255, 66, 41), rgb(255, 176, 0));
          box-shadow: none !important;
        }
      `}),s&&e.jsx("div",{className:"absolute top-0 right-0 z-10 bg-slate-900 p-2 shadow-lg",children:e.jsx($N,{className:"w-5 h-5 text-white"})}),t.image_url&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-48 overflow-hidden bg-slate-100 relative",children:e.jsx("img",{src:t.image_url,alt:t.title,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"})}),e.jsx("div",{className:"w-full h-[3px]",style:{backgroundColor:"#5d0d77"}})]}),e.jsxs(Fe,{className:"pb-3 flex-grow",children:[e.jsx(Ue,{className:"text-lg line-clamp-2",children:t.title}),(t.published_date||t.created_date)&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-500 py-3",children:[e.jsx(Ns,{className:"w-3 h-3"}),e.jsx("span",{children:Mt(new Date(t.published_date||t.created_date),"dd MMM yyyy")})]}),t.author_name&&e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-slate-600 mt-2",children:[e.jsx(Xs,{className:"w-3 h-3"}),e.jsxs("span",{children:["by ",t.author_name]})]}),t.description&&e.jsx("p",{className:"text-sm text-slate-600",children:t.description}),t.tags&&t.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 pt-4",children:t.tags.map((d,m)=>e.jsx("span",{className:"text-xs bg-slate-100 text-slate-600 px-2 py-1 rounded-none",children:d},m))})]}),e.jsx(ce,{className:"pt-0 pb-4 mt-auto",children:s?e.jsxs(J,{onClick:()=>window.location.href=Pe("Home"),variant:"outline",className:"w-full border-slate-300 hover:bg-slate-50 rounded-none",children:[e.jsx($N,{className:"w-4 h-4 mr-2 text-slate-600"}),e.jsx("span",{className:"text-slate-700",children:"Member only content - click to login"})]}):u()})]})}function z8({memberInfo:t,memberRole:s,isAdmin:n}){const[r,a]=b.useState(""),[i,l]=b.useState([]),[o,c]=b.useState(1),[u,d]=b.useState("newest"),[m,h]=b.useState(12),[p,g]=b.useState(!1),v=Yt(),{data:y}=me({queryKey:["current-user",t==null?void 0:t.email],queryFn:async()=>await X.auth.me(),enabled:!!t,staleTime:300*1e3,refetchOnWindowFocus:!1}),{data:j=[],isLoading:w}=me({queryKey:["resources"],queryFn:async()=>{console.log("[Resources] Fetching at:",new Date().toISOString());const $=await X.entities.Resource.list("-published_date");console.log("[Resources Debug] Raw resources from DB:",$.length,$[0]);const L=$.filter(I=>I.status==="draft"?!1:n||I.is_public===!0?!0:s?!I.allowed_role_ids||I.allowed_role_ids.length===0?!0:I.allowed_role_ids.includes(s.id):!1);return console.log("[Resources Debug] Filtered resources:",L.length),L},enabled:!!s||n===!0,initialData:[],refetchOnWindowFocus:!1}),{data:N=[],isLoading:_}=me({queryKey:["resourceCategories-resources"],queryFn:async()=>{const $=await X.entities.ResourceCategory.list();console.log("[Resources Debug] Raw categories from DB:",$.length,$[0]);const I=$.filter(W=>W.is_active&&W.applies_to_content_types&&W.applies_to_content_types.includes("Resources")).sort((W,q)=>(W.display_order||0)-(q.display_order||0));return console.log("[Resources Debug] Active sorted resource categories:",I.length,I),I},staleTime:0,refetchOnWindowFocus:!0}),{data:T=[]}=me({queryKey:["buttonStyles-resources"],queryFn:async()=>(await X.entities.ButtonStyle.list()).filter(L=>L.card_type==="resource"&&L.is_active),staleTime:0,refetchOnWindowFocus:!0});Be.useEffect(()=>{var $;if(($=y==null?void 0:y.preferences)!=null&&$.resources&&!p){const L=y.preferences.resources.selectedSubcategories||[];l(L),g(!0)}},[y,p]);const A=Le({mutationFn:async()=>{const $={...(y==null?void 0:y.preferences)||{},resources:{selectedCategory:"all",selectedSubcategories:i}};await X.auth.updateMe({preferences:$})},onSuccess:()=>{v.invalidateQueries({queryKey:["current-user"]}),te.success("Filter preferences saved as default")},onError:$=>{te.error("Failed to save preferences: "+$.message)}}),P=b.useMemo(()=>j.filter($=>{var W,q,Z;const L=!r.trim()||((W=$.title)==null?void 0:W.toLowerCase().includes(r.toLowerCase()))||((q=$.description)==null?void 0:q.toLowerCase().includes(r.toLowerCase()))||((Z=$.tags)==null?void 0:Z.some(Q=>Q.toLowerCase().includes(r.toLowerCase()))),I=i.length===0||$.subcategories&&Array.isArray($.subcategories)&&$.subcategories.some(Q=>i.includes(Q));return L&&I}),[j,r,i]),C=b.useMemo(()=>{const $=[...P];switch(u){case"newest":$.sort((L,I)=>new Date(I.published_date||I.created_date)-new Date(L.published_date||L.created_date));break;case"oldest":$.sort((L,I)=>new Date(L.published_date||L.created_date)-new Date(I.published_date||L.created_date));break;case"title-asc":$.sort((L,I)=>L.title.localeCompare(I.title));break;case"title-desc":$.sort((L,I)=>I.title.localeCompare(L.title));break}return $},[P,u]),O=Math.ceil(C.length/m),M=(o-1)*m,k=M+m,E=C.slice(M,k),R=()=>{const $=[];if(O<=5)for(let I=1;I<=O;I++)$.push(I);else if(o<=3){for(let I=1;I<=4;I++)$.push(I);O>5&&$.push("..."),$.push(O)}else if(o>=O-2){$.push(1),O>5&&$.push("...");for(let I=O-3;I<=O;I++)$.push(I)}else{$.push(1),$.push("...");for(let I=o-1;I<=o+1;I++)$.push(I);$.push("..."),$.push(O)}return $};Be.useEffect(()=>{c(1)},[i,r,u,m]);const F=$=>{l(L=>L.includes($)?L.filter(I=>I!==$):[...L,$])},z=$=>{c($),window.scrollTo({top:0,behavior:"smooth"})},V=()=>{A.mutate()},U=w||_,B=b.useMemo(()=>{var L;if(!((L=y==null?void 0:y.preferences)!=null&&L.resources))return i.length>0;const $=y.preferences.resources.selectedSubcategories||[];return $.length!==i.length?!0:!$.every(I=>i.includes(I))||!i.every(I=>$.includes(I))},[y,i]);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:[e.jsx("style",{jsx:!0,children:`
        .agcas-pagination-button {
          box-shadow: inset 0 0 0 2px black;
          background: transparent;
          border: none;
          border-radius: 0;
          transition: all 0.3s;
        }
        .agcas-pagination-button:hover:not(:disabled) {
          background: linear-gradient(to right top, rgb(92, 0, 133), rgb(186, 0, 135), rgb(238, 0, 195), rgb(255, 66, 41), rgb(255, 176, 0));
          color: white;
          box-shadow: none !important;
        }
        .agcas-pagination-button.active {
          background: linear-gradient(to right top, rgb(92, 0, 133), rgb(186, 0, 135), rgb(238, 0, 195), rgb(255, 66, 41), rgb(255, 176, 0));
          color: white;
          box-shadow: none !important;
        }
        .agcas-pagination-button:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }
      `}),e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Resources"}),e.jsx("p",{className:"text-slate-600",children:"Explore helpful resources curated for you"})]}),e.jsxs(J,{onClick:()=>{v.invalidateQueries({queryKey:["resources"]}),te.success("Refreshing resources...")},variant:"outline",className:"gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Force Refresh"]})]})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("div",{className:"lg:w-64 flex-shrink-0",children:e.jsxs("div",{className:"bg-white rounded-none shadow-sm border border-slate-200 p-6 sticky top-8",children:[e.jsx(jS,{categories:N,selectedSubcategories:i,onSubcategoryToggle:F,searchQuery:r,onSearchChange:a,onClearSearch:()=>a(""),isLoading:_}),t&&B&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200",children:[e.jsx(J,{onClick:V,variant:"outline",size:"sm",className:"w-full gap-2 rounded-none",disabled:A.isPending,children:A.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-3 h-3 border-2 border-slate-400 border-t-transparent rounded-full animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(un,{className:"w-3 h-3"}),"Save as Default"]})}),e.jsx("p",{className:"text-xs text-slate-500 mt-2 text-center",children:"Apply these filters by default"})]})]})}),e.jsx("div",{className:"flex-1",children:U?e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Array(12).fill(0).map(($,L)=>e.jsxs(le,{className:"animate-pulse border-slate-200 rounded-none",children:[e.jsx("div",{className:"h-48 bg-slate-200"}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"h-6 bg-slate-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded w-full"})]})]},L))}):C.length===0?e.jsx(le,{className:"border-slate-200 shadow-sm rounded-none",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(Yl,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No resources found"}),e.jsx("p",{className:"text-slate-600",children:r||i.length>0?"Try adjusting your search or filters":"Check back later for new content"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 gap-3",children:[e.jsxs("div",{className:"text-sm text-slate-600",children:["Showing ",M+1,"-",Math.min(k,C.length)," of ",C.length," resources"]}),e.jsxs(Ke,{value:u,onValueChange:d,children:[e.jsxs(Ve,{className:"w-48 rounded-none",children:[e.jsx(Ql,{className:"w-4 h-4 mr-2"}),e.jsx(Qe,{placeholder:"Sort By"})]}),e.jsxs(We,{className:"rounded-none",children:[e.jsx(re,{value:"newest",children:"Newest First"}),e.jsx(re,{value:"oldest",children:"Oldest First"}),e.jsx(re,{value:"title-asc",children:"Title A-Z"}),e.jsx(re,{value:"title-desc",children:"Title Z-A"})]})]})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:E.map($=>e.jsx(q8,{resource:$,buttonStyles:T},$.id))}),e.jsx(le,{className:"border-slate-200 shadow-sm rounded-none",children:e.jsx(ce,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"Items per page:"}),e.jsxs(Ke,{value:m.toString(),onValueChange:$=>{h(Number($)),c(1)},children:[e.jsx(Ve,{className:"w-20 rounded-none",children:e.jsx(Qe,{})}),e.jsxs(We,{className:"rounded-none",children:[e.jsx(re,{value:"12",children:"12"}),e.jsx(re,{value:"24",children:"24"}),e.jsx(re,{value:"48",children:"48"})]})]})]}),e.jsxs("div",{className:"text-sm text-slate-600",children:["Page ",o," of ",O]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>z(o-1),disabled:o===1,className:"agcas-pagination-button px-3 py-2",children:e.jsx(Wn,{className:"w-4 h-4"})}),R().map(($,L)=>e.jsx(Be.Fragment,{children:$==="..."?e.jsx("span",{className:"px-2 text-slate-400",children:"..."}):e.jsx("button",{onClick:()=>z($),className:`agcas-pagination-button px-3 py-2 min-w-[2.5rem] ${o===$?"active":""}`,children:$})},L)),e.jsx("button",{onClick:()=>z(o+1),disabled:o===O,className:"agcas-pagination-button px-3 py-2",children:e.jsx(js,{className:"w-4 h-4"})})]})]})})})]})})]})]})]})}function $8(){const[t,s]=b.useState("all"),[n,r]=b.useState([]),[a,i]=b.useState(""),[l,o]=b.useState(1),[c,u]=b.useState("newest"),[d,m]=b.useState(6),h=b.useMemo(()=>{const E=sessionStorage.getItem("agcas_member");if(!E)return!1;const R=JSON.parse(E);return!(R.sessionExpiry&&new Date(R.sessionExpiry)<new Date)},[]),{data:p=[],isLoading:g}=me({queryKey:["public-resources"],queryFn:async()=>(console.log("[PublicResources] Fetching at:",new Date().toISOString()),(await X.entities.Resource.list("-published_date")).filter(R=>R.status!=="draft")),initialData:[],refetchOnWindowFocus:!1}),{data:v=[],isLoading:y}=me({queryKey:["resourceCategories-public"],queryFn:async()=>(await X.entities.ResourceCategory.list()).filter(F=>F.is_active&&F.applies_to_content_types&&F.applies_to_content_types.includes("Resources")).sort((F,z)=>(F.display_order||0)-(z.display_order||0)),staleTime:0,refetchOnWindowFocus:!0}),{data:j=[]}=me({queryKey:["buttonStyles-resources"],queryFn:async()=>(await X.entities.ButtonStyle.list()).filter(R=>R.card_type==="resource"&&R.is_active),staleTime:0,refetchOnWindowFocus:!0}),w=b.useMemo(()=>p.filter(E=>{var z,V,U;const R=((z=E.title)==null?void 0:z.toLowerCase().includes(a.toLowerCase()))||((V=E.description)==null?void 0:V.toLowerCase().includes(a.toLowerCase()))||((U=E.tags)==null?void 0:U.some(B=>B.toLowerCase().includes(a.toLowerCase()))),F=n.length===0||E.subcategories&&E.subcategories.some(B=>n.includes(B));return R&&F}),[p,a,n]),N=b.useMemo(()=>{const E=[...w];switch(c){case"newest":E.sort((R,F)=>new Date(F.published_date||F.created_date)-new Date(R.published_date||R.created_date));break;case"oldest":E.sort((R,F)=>new Date(R.published_date||R.created_date)-new Date(F.published_date||R.created_date));break;case"title-asc":E.sort((R,F)=>R.title.localeCompare(F.title));break;case"title-desc":E.sort((R,F)=>F.title.localeCompare(R.title));break}return E},[w,c]),_=Math.ceil(N.length/d),T=(l-1)*d,A=T+d,P=N.slice(T,A),C=()=>{const E=[];if(_<=5)for(let F=1;F<=_;F++)E.push(F);else if(l<=3){for(let F=1;F<=4;F++)E.push(F);_>5&&E.push("..."),E.push(_)}else if(l>=_-2){E.push(1),_>5&&E.push("...");for(let F=_-3;F<=_;F++)E.push(F)}else{E.push(1),E.push("...");for(let F=l-1;F<=l+1;F++)E.push(F);E.push("..."),E.push(_)}return E};Be.useEffect(()=>{o(1)},[n,a,c,d]);const O=E=>{r(R=>R.includes(E)?R.filter(F=>F!==E):[...R,E])},M=E=>{o(E),window.scrollTo({top:0,behavior:"smooth"})},k=g||y;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[e.jsx("style",{jsx:!0,children:`
        .agcas-pagination-button {
          box-shadow: inset 0 0 0 2px black;
          background: transparent;
          border: none;
          border-radius: 0;
          transition: all 0.3s;
          display: inline-flex;
          align-items: center;
          justify-content: center;
          font-weight: 500;
          color: #334155; /* slate-700 */
        }
        .agcas-pagination-button:hover:not(:disabled) {
          background: linear-gradient(to right top, rgb(92, 0, 133), rgb(186, 0, 135), rgb(238, 0, 195), rgb(255, 66, 41), rgb(255, 176, 0));
          color: white;
          box-shadow: none !important;
        }
        .agcas-pagination-button.active {
          background: linear-gradient(to right top, rgb(92, 0, 133), rgb(186, 0, 135), rgb(238, 0, 195), rgb(255, 66, 41), rgb(255, 176, 0));
          color: white;
          box-shadow: none !important;
        }
        .agcas-pagination-button:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }
      `}),e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 text-white py-16",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Resources & Materials"}),e.jsx("p",{className:"text-lg md:text-xl text-blue-100 max-w-3xl",children:"Access our comprehensive library of resources, guides, and materials to support your work"})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-8 py-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("div",{className:"lg:w-64 flex-shrink-0",children:e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 sticky top-8",children:e.jsx(jS,{categories:v,selectedSubcategories:n,onSubcategoryToggle:O,searchQuery:a,onSearchChange:i,onClearSearch:()=>i(""),isLoading:y})})}),e.jsx("div",{className:"flex-1",children:k?e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Array(6).fill(0).map((E,R)=>e.jsxs(le,{className:"animate-pulse border-slate-200",children:[e.jsx("div",{className:"h-48 bg-slate-200"}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"h-6 bg-slate-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded w-full"})]})]},R))}):N.length===0?e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(Yl,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No resources found"}),e.jsx("p",{className:"text-slate-600",children:a||n.length>0?"Try adjusting your search or filters":"Check back later for new content"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 gap-3",children:[e.jsxs("div",{className:"text-sm text-slate-600",children:["Showing ",T+1,"-",Math.min(A,N.length)," of ",N.length," resources"]}),e.jsxs(Ke,{value:c,onValueChange:u,children:[e.jsxs(Ve,{className:"w-48 rounded-none",children:[e.jsx(Ql,{className:"w-4 h-4 mr-2"}),e.jsx(Qe,{placeholder:"Sort By"})]}),e.jsxs(We,{children:[e.jsx(re,{value:"newest",children:"Newest First"}),e.jsx(re,{value:"oldest",children:"Oldest First"}),e.jsx(re,{value:"title-asc",children:"Title A-Z"}),e.jsx(re,{value:"title-desc",children:"Title Z-A"})]})]})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:P.map(E=>e.jsx(q8,{resource:E,isLocked:!E.is_public&&!h,buttonStyles:j},E.id))}),N.length>0&&e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsx(ce,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"Items per page:"}),e.jsxs(Ke,{value:d.toString(),onValueChange:E=>{m(Number(E)),o(1)},children:[e.jsx(Ve,{className:"w-20 rounded-none",children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"6",children:"6"}),e.jsx(re,{value:"12",children:"12"}),e.jsx(re,{value:"24",children:"24"}),e.jsx(re,{value:"48",children:"48"})]})]})]}),e.jsxs("div",{className:"text-sm text-slate-600",children:["Page ",l," of ",_]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>M(l-1),disabled:l===1,className:"agcas-pagination-button px-3 py-2",children:e.jsx(Wn,{className:"w-4 h-4"})}),C().map((E,R)=>e.jsx(Be.Fragment,{children:E==="..."?e.jsx("span",{className:"px-2 text-slate-400",children:"..."}):e.jsx("button",{onClick:()=>M(E),className:`agcas-pagination-button px-3 py-2 min-w-[2.5rem] ${l===E?"active":""}`,children:E})},R)),e.jsx("button",{onClick:()=>M(l+1),disabled:l===_,className:"agcas-pagination-button px-3 py-2",children:e.jsx(js,{className:"w-4 h-4"})})]})]})})})]})})]})})]})}function U8({isAdmin:t}){const s=Yt(),{data:n,isLoading:r}=me({queryKey:["roles"],queryFn:()=>X.entities.Role.list(),initialData:[]}),{data:a,isLoading:i}=me({queryKey:["resource-author-settings"],queryFn:async()=>{const N=await X.entities.ResourceAuthorSettings.list();return N.length>0?N[0]:null}}),[l,o]=b.useState([]),[c,u]=b.useState(500),[d,m]=b.useState(!0),[h,p]=b.useState(["x","linkedin","email"]);Be.useEffect(()=>{a&&(o(a.author_role_ids||[]),u(a.description_character_limit||500),m(a.show_folders!==!1),p(a.enabled_social_icons||["x","linkedin","email"]))},[a]);const g=Le({mutationFn:async({roleIds:N,limit:_,showFolders:T,socialIcons:A})=>a?await X.entities.ResourceAuthorSettings.update(a.id,{author_role_ids:N,description_character_limit:_,show_folders:T,enabled_social_icons:A}):await X.entities.ResourceAuthorSettings.create({author_role_ids:N,description_character_limit:_,show_folders:T,enabled_social_icons:A}),onSuccess:()=>{s.invalidateQueries({queryKey:["resource-author-settings"]}),te.success("Settings saved successfully")},onError:N=>{te.error("Failed to save settings: "+N.message)}}),v=N=>{o(_=>_.includes(N)?_.filter(T=>T!==N):[..._,N])},y=N=>{p(_=>_.includes(N)?_.filter(T=>T!==N):[..._,N])},j=()=>{const N=parseInt(c);if(isNaN(N)||N<1){te.error("Description limit must be a positive number");return}g.mutate({roleIds:l,limit:N,showFolders:d,socialIcons:h})};if(!t)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"border-red-200",children:e.jsx(ce,{className:"p-8 text-center",children:e.jsx("p",{className:"text-red-600",children:"You need administrator privileges to access this page."})})})});const w=r||i;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Resource Settings"}),e.jsx("p",{className:"text-slate-600",children:"Configure resource management preferences"})]}),w?e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsx(ce,{className:"p-12 text-center",children:e.jsx("p",{className:"text-slate-600",children:"Loading settings..."})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsxs(Ue,{className:"flex items-center gap-2",children:[e.jsx(NK,{className:"w-5 h-5 text-blue-600"}),"Author Roles"]})}),e.jsxs(ce,{className:"p-6",children:[e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:e.jsx("p",{className:"text-sm text-blue-900",children:"Select the roles whose members can be assigned as authors when creating or editing resources. This includes both regular members and team members with the selected roles."})}),n.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-slate-600",children:"No roles available. Create roles first in Role Management."})}):e.jsx("div",{className:"space-y-2",children:n.map(N=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors cursor-pointer",onClick:()=>v(N.id),children:[e.jsx(ba,{id:`role-${N.id}`,checked:l.includes(N.id),onCheckedChange:()=>v(N.id),className:"data-[state=checked]:bg-blue-600 data-[state=checked]:border-blue-600"}),e.jsxs(ee,{htmlFor:`role-${N.id}`,className:"flex-1 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-slate-900",children:N.name}),N.is_admin&&e.jsx(ye,{className:"bg-amber-100 text-amber-700 text-xs",children:"Admin"})]}),N.description&&e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:N.description})]})]},N.id))})]}),l.length>0&&e.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg",children:[e.jsxs("p",{className:"text-sm font-medium text-slate-900 mb-2",children:["Selected: ",l.length," ",l.length===1?"role":"roles"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(N=>{const _=n.find(T=>T.id===N);return _?e.jsx(ye,{className:"bg-blue-100 text-blue-700",children:_.name},N):null})})]})]})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsxs(Ue,{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"w-5 h-5 text-blue-600"}),"Folder Management"]})}),e.jsx(ce,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-slate-50 rounded-lg",children:[e.jsx(ba,{id:"show-folders",checked:d,onCheckedChange:m,className:"data-[state=checked]:bg-blue-600 data-[state=checked]:border-blue-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ee,{htmlFor:"show-folders",className:"cursor-pointer font-medium",children:"Show Folder Management"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Enable folder organization in the Resource Management page"})]})]})})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsxs(Ue,{className:"flex items-center gap-2",children:[e.jsx(Tc,{className:"w-5 h-5 text-blue-600"}),"Social Sharing Icons"]})}),e.jsx(ce,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:e.jsx("p",{className:"text-sm text-blue-900",children:"Choose which social sharing icons to display on public resource cards. Users will be able to share resources on the selected platforms."})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors cursor-pointer",onClick:()=>y("x"),children:[e.jsx(ba,{id:"icon-x",checked:h.includes("x"),onCheckedChange:()=>y("x"),className:"data-[state=checked]:bg-blue-600 data-[state=checked]:border-blue-600"}),e.jsxs(ee,{htmlFor:"icon-x",className:"flex-1 cursor-pointer flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),e.jsx("span",{className:"font-medium text-slate-900",children:"X (Twitter)"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors cursor-pointer",onClick:()=>y("linkedin"),children:[e.jsx(ba,{id:"icon-linkedin",checked:h.includes("linkedin"),onCheckedChange:()=>y("linkedin"),className:"data-[state=checked]:bg-blue-600 data-[state=checked]:border-blue-600"}),e.jsxs(ee,{htmlFor:"icon-linkedin",className:"flex-1 cursor-pointer flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})}),e.jsx("span",{className:"font-medium text-slate-900",children:"LinkedIn"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors cursor-pointer",onClick:()=>y("email"),children:[e.jsx(ba,{id:"icon-email",checked:h.includes("email"),onCheckedChange:()=>y("email"),className:"data-[state=checked]:bg-blue-600 data-[state=checked]:border-blue-600"}),e.jsxs(ee,{htmlFor:"icon-email",className:"flex-1 cursor-pointer flex items-center gap-2",children:[e.jsx(Ms,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium text-slate-900",children:"Email"})]})]})]}),h.length>0&&e.jsx("div",{className:"p-4 bg-slate-50 rounded-lg",children:e.jsxs("p",{className:"text-sm font-medium text-slate-900 mb-2",children:["Selected: ",h.length," ",h.length===1?"platform":"platforms"]})})]})})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsxs(Ue,{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"w-5 h-5 text-blue-600"}),"Description Character Limit"]})}),e.jsx(ce,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:e.jsx("p",{className:"text-sm text-blue-900",children:"Set the maximum number of characters allowed for resource descriptions. This helps maintain consistent formatting and prevents overly long descriptions."})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"description-limit",children:"Maximum Characters"}),e.jsx(he,{id:"description-limit",type:"number",min:"1",value:c,onChange:N=>u(N.target.value),placeholder:"500",className:"max-w-xs"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Recommended: 500 characters (approximately 75-100 words)"})]}),c&&e.jsx("div",{className:"p-3 bg-slate-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-slate-700",children:["Current limit: ",e.jsx("span",{className:"font-semibold text-blue-600",children:c})," characters"]})})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(J,{onClick:j,disabled:g.isPending,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(un,{className:"w-4 h-4 mr-2"}),g.isPending?"Saving...":"Save All Settings"]})})]})]})})}function V8({isAdmin:t}){var so,Sp,Ad;const[s,n]=b.useState(null),[r,a]=b.useState(!1),[i,l]=b.useState(""),[o,c]=b.useState("all"),[u,d]=b.useState(""),[m,h]=b.useState(null),[p,g]=b.useState(""),[v,y]=b.useState(!1),[j,w]=b.useState(!1),[N,_]=b.useState(""),[T,A]=b.useState(!1),[P,C]=b.useState(null),[O,M]=b.useState(!1),[k,E]=b.useState(null),[R,F]=b.useState(!1),[z,V]=b.useState(!1),[U,B]=b.useState(null),[$,L]=b.useState([]),[I,W]=b.useState(!1),[q,Z]=b.useState({}),[Q,Y]=b.useState(null),[K,ae]=b.useState({}),[se,de]=b.useState([]),[ue,oe]=b.useState(null),[pe,je]=b.useState(null),[we,qe]=b.useState(1),[ze,Ee]=b.useState(9),Ce=Yt(),{data:Ge,isLoading:Ye}=me({queryKey:["admin-resources"],queryFn:()=>X.entities.Resource.list("-created_date"),initialData:[],refetchOnWindowFocus:!1}),{data:De}=me({queryKey:["resourceCategories"],queryFn:async()=>(await X.entities.ResourceCategory.list()).filter(Oe=>Oe.is_active).sort((Oe,He)=>(Oe.display_order||0)-(He.display_order||0)),initialData:[],refetchOnWindowFocus:!1}),{data:it}=me({queryKey:["file-repository"],queryFn:()=>X.entities.FileRepository.list("-created_date"),initialData:[],refetchOnWindowFocus:!1}),{data:Se}=me({queryKey:["file-repository-folders"],queryFn:()=>X.entities.FileRepositoryFolder.list("display_order"),initialData:[],refetchOnWindowFocus:!1}),{data:at}=me({queryKey:["roles"],queryFn:()=>X.entities.Role.list(),initialData:[],refetchOnWindowFocus:!1}),{data:_e}=me({queryKey:["resource-author-settings"],queryFn:async()=>{const ie=await X.entities.ResourceAuthorSettings.list();return ie.length>0?ie[0]:null},refetchOnWindowFocus:!1}),{data:$e}=me({queryKey:["members"],queryFn:()=>X.entities.Member.list(),initialData:[],refetchOnWindowFocus:!1}),{data:nt}=me({queryKey:["team-members"],queryFn:()=>X.entities.TeamMember.list(),initialData:[],refetchOnWindowFocus:!1}),{data:dt,isLoading:lt}=me({queryKey:["resource-folders"],queryFn:()=>X.entities.ResourceFolder.list("display_order"),initialData:[],refetchOnWindowFocus:!1}),Rt=b.useMemo(()=>{if(!_e||!_e.author_role_ids||_e.author_role_ids.length===0)return[];const ie=_e.author_role_ids,Oe=$e.filter(wt=>wt.role_id&&ie.includes(wt.role_id)).map(wt=>({id:wt.id,name:`${wt.first_name} ${wt.last_name}`,email:wt.email,type:"member"})),He=nt.filter(wt=>wt.role_id&&ie.includes(wt.role_id)).map(wt=>({id:wt.id,name:`${wt.first_name} ${wt.last_name}`,email:wt.email,type:"team_member"}));return[...Oe,...He].sort((wt,ks)=>wt.name.localeCompare(ks.name))},[_e,$e,nt]),es=b.useMemo(()=>{const ie=new Set;return Ge.forEach(Oe=>{Oe.tags&&Array.isArray(Oe.tags)&&Oe.tags.forEach(He=>ie.add(He))}),Array.from(ie).sort()},[Ge]),Bs=b.useMemo(()=>{if(!u.trim())return[];const ie=u.toLowerCase();return es.filter(Oe=>Oe.toLowerCase().includes(ie)&&!((s==null?void 0:s.tags)||[]).includes(Oe))},[u,es,s==null?void 0:s.tags]),Ss=b.useMemo(()=>{const ie=Oe=>dt.filter(He=>He.parent_folder_id===Oe).sort((He,wt)=>(He.display_order||0)-(wt.display_order||0)).map(He=>({...He,children:ie(He.id)}));return ie(null)},[dt]),on=b.useMemo(()=>{const ie=Oe=>Se.filter(He=>He.parent_folder_id===Oe).sort((He,wt)=>(He.display_order||0)-(wt.display_order||0)).map(He=>({...He,children:ie(He.id)}));return ie(null)},[Se]),Jt=ie=>{if(!ie)return[];const Oe=[];let He=ie;for(;He;){const wt=dt.find(ks=>ks.id===He);if(wt)Oe.unshift(wt),He=wt.parent_folder_id;else break}return Oe},fn=ie=>{if(!ie)return[];const Oe=[];let He=ie;for(;He;){const wt=Se.find(ks=>ks.id===He);if(wt)Oe.unshift(wt),He=wt.parent_folder_id;else break}return Oe},Ds=b.useMemo(()=>Jt(P),[P,dt]),jr=b.useMemo(()=>fn(Q),[Q,Se]),Hn=ie=>{const Oe=[ie];return dt.filter(wt=>wt.parent_folder_id===ie).forEach(wt=>{Oe.push(...Hn(wt.id))}),Oe},Je=b.useMemo(()=>{if(!p.trim())return De;const ie=p.toLowerCase();return De.map(Oe=>{if(!Oe.subcategories||Oe.subcategories.length===0)return null;const He=Oe.subcategories.filter(ks=>ks.toLowerCase().includes(ie)),wt=Oe.name.toLowerCase().includes(ie);return He.length===0&&!wt?null:{...Oe,subcategories:He.length>0?He:Oe.subcategories}}).filter(Boolean)},[De,p]),bt=b.useMemo(()=>Ge.filter(ie=>{var ks,Nr;const Oe=P===null?!ie.folder_id:ie.folder_id===P,He=o==="all"||ie.subcategories&&ie.subcategories.some(ei=>{const _n=De.find(yn=>yn.subcategories&&yn.subcategories.includes(ei));return(_n==null?void 0:_n.name)===o}),wt=!i||((ks=ie.title)==null?void 0:ks.toLowerCase().includes(i.toLowerCase()))||((Nr=ie.description)==null?void 0:Nr.toLowerCase().includes(i.toLowerCase()));return Oe&&He&&wt}),[Ge,P,o,i,De]),hs=b.useMemo(()=>it.filter(ie=>{const Oe=Q===null?!ie.folder_id:ie.folder_id===Q;return m==="image"?Oe&&ie.file_type==="image":Oe}),[it,Q,m]);b.useEffect(()=>{qe(1)},[i,o,P,ze]);const Ne=Math.ceil(bt.length/ze),ut=(we-1)*ze,Te=ut+ze,Ze=bt.slice(ut,Te),yt=()=>{const ie=[];if(Ne<=5)for(let He=1;He<=Ne;He++)ie.push(He);else if(we<=3){for(let He=1;He<=4;He++)ie.push(He);Ne>5&&ie.push("..."),ie.push(Ne)}else if(we>=Ne-2){ie.push(1),Ne>5&&ie.push("...");for(let He=Ne-3;He<=Ne;He++)ie.push(He)}else{ie.push(1),ie.push("...");for(let He=we-1;He<=we+1;He++)ie.push(He);ie.push(Ne)}return ie},as=ie=>Ge.filter(Oe=>Oe.folder_id===ie).length,ds=ie=>it.filter(He=>m==="image"?He.file_type==="image":!0).filter(He=>He.folder_id===ie).length,Qs=Le({mutationFn:ie=>X.entities.ResourceFolder.create(ie),onSuccess:()=>{Ce.invalidateQueries({queryKey:["resource-folders"]}),M(!1),E(null),te.success("Folder created successfully")},onError:ie=>{te.error("Failed to create folder: "+ie.message)}}),ms=Le({mutationFn:({id:ie,data:Oe})=>X.entities.ResourceFolder.update(ie,Oe),onSuccess:()=>{Ce.invalidateQueries({queryKey:["resource-folders"]}),M(!1),E(null),te.success("Folder updated successfully")},onError:ie=>{te.error("Failed to update folder: "+ie.message)}}),Ir=Le({mutationFn:async ie=>{const Oe=Hn(ie),He=Ge.filter(ks=>Oe.includes(ks.folder_id));for(const ks of He)await X.entities.Resource.update(ks.id,{folder_id:null});const wt=dt.filter(ks=>Oe.includes(ks.id)).sort((ks,Nr)=>Jt(Nr.id).length-Jt(ks.id).length);for(const ks of wt)await X.entities.ResourceFolder.delete(ks.id)},onSuccess:()=>{Ce.invalidateQueries({queryKey:["resource-folders"]}),Ce.invalidateQueries({queryKey:["admin-resources"]}),C(null),te.success("Folder and its subfolders deleted, resources moved to root")},onError:ie=>{te.error("Failed to delete folder: "+ie.message)}}),vn=Le({mutationFn:async({folderId:ie,newParentId:Oe})=>{if(Oe&&Hn(ie).includes(Oe))throw new Error("Cannot move a folder into its own subfolder");await X.entities.ResourceFolder.update(ie,{parent_folder_id:Oe})},onSuccess:()=>{Ce.invalidateQueries({queryKey:["resource-folders"]}),V(!1),B(null),te.success("Folder moved successfully")},onError:ie=>{te.error("Failed to move folder: "+ie.message)}}),tr=Le({mutationFn:ie=>X.entities.Resource.create(ie),onSuccess:async()=>{Ce.removeQueries({queryKey:["admin-resources"]}),Ce.removeQueries({queryKey:["public-resources"]}),Ce.removeQueries({queryKey:["resources"]}),await Ce.refetchQueries({queryKey:["admin-resources"],type:"active"}),await Ce.refetchQueries({queryKey:["public-resources"],type:"active"}),await Ce.refetchQueries({queryKey:["resources"],type:"active"}),console.log("[ResourceManagement] Cache cleared and refetched after create"),a(!1),n(null),te.success("Resource created successfully")},onError:ie=>{te.error("Failed to create resource: "+ie.message)}}),Br=Le({mutationFn:({id:ie,data:Oe})=>X.entities.Resource.update(ie,Oe),onSuccess:async()=>{Ce.removeQueries({queryKey:["admin-resources"]}),Ce.removeQueries({queryKey:["public-resources"]}),Ce.removeQueries({queryKey:["resources"]}),await Ce.refetchQueries({queryKey:["admin-resources"],type:"active"}),await Ce.refetchQueries({queryKey:["public-resources"],type:"active"}),await Ce.refetchQueries({queryKey:["resources"],type:"active"}),console.log("[ResourceManagement] Cache cleared and refetched after update"),a(!1),n(null),te.success("Resource updated successfully")},onError:ie=>{te.error("Failed to update resource: "+ie.message)}}),ua=Le({mutationFn:ie=>X.entities.Resource.delete(ie),onSuccess:async()=>{Ce.removeQueries({queryKey:["admin-resources"]}),Ce.removeQueries({queryKey:["public-resources"]}),Ce.removeQueries({queryKey:["resources"]}),await Ce.refetchQueries({queryKey:["admin-resources"],type:"active"}),await Ce.refetchQueries({queryKey:["public-resources"],type:"active"}),await Ce.refetchQueries({queryKey:["resources"],type:"active"}),console.log("[ResourceManagement] Cache cleared and refetched after delete"),te.success("Resource deleted successfully")},onError:ie=>{te.error("Failed to delete resource: "+ie.message)}}),ve=Le({mutationFn:async({resourceIds:ie,folderId:Oe})=>{for(const He of ie)await X.entities.Resource.update(He,{folder_id:Oe})},onSuccess:async()=>{Ce.removeQueries({queryKey:["admin-resources"]}),Ce.removeQueries({queryKey:["public-resources"]}),Ce.removeQueries({queryKey:["resources"]}),await Ce.refetchQueries({queryKey:["admin-resources"],type:"active"}),await Ce.refetchQueries({queryKey:["public-resources"],type:"active"}),await Ce.refetchQueries({queryKey:["resources"],type:"active"}),console.log("[ResourceManagement] Cache cleared and refetched after move"),F(!1),L([]),W(!1),te.success("Resources moved successfully")},onError:ie=>{te.error("Failed to move resources: "+ie.message)}}),ft=(ie,Oe)=>{if(I&&$.includes(Oe.id)){de($),ie.dataTransfer.effectAllowed="move",ie.dataTransfer.setData("text/plain",JSON.stringify($));const He=document.createElement("div");He.className="bg-blue-600 text-white px-4 py-2 rounded-lg shadow-lg font-medium",He.textContent=`Moving ${$.length} resource${$.length>1?"s":""}`,He.style.position="absolute",He.style.top="-1000px",document.body.appendChild(He),setTimeout(()=>document.body.removeChild(He),0)}else de([Oe.id]),ie.dataTransfer.effectAllowed="move",ie.dataTransfer.setData("text/plain",JSON.stringify([Oe.id]))},xt=()=>{de([]),oe(null),pe&&(clearTimeout(pe),je(null))},Tt=(ie,Oe)=>{if(ie.preventDefault(),ie.stopPropagation(),ie.dataTransfer.dropEffect="move",ue!==Oe&&(oe(Oe),pe&&clearTimeout(pe),Oe&&!q[Oe])){const He=setTimeout(()=>{Z(wt=>({...wt,[Oe]:!0}))},800);je(He)}},Cs=ie=>{ie.preventDefault();const Oe=ie.currentTarget.getBoundingClientRect(),He=ie.clientX,wt=ie.clientY;(He<Oe.left||He>=Oe.right||wt<Oe.top||wt>=Oe.bottom)&&(oe(null),pe&&(clearTimeout(pe),je(null)))},qr=async(ie,Oe)=>{ie.preventDefault(),ie.stopPropagation(),pe&&(clearTimeout(pe),je(null)),oe(null);try{const He=JSON.parse(ie.dataTransfer.getData("text/plain"));He&&He.length>0&&await ve.mutateAsync({resourceIds:He,folderId:Oe==="root"?null:Oe})}catch(He){console.error("Drop error:",He)}de([])},ki=()=>{$.length===bt.length?L([]):L(bt.map(ie=>ie.id))},Pn=()=>{E({name:"",description:"",parent_folder_id:P,display_order:dt.filter(ie=>ie.parent_folder_id===P).length}),M(!0)},_d=ie=>{E(ie),M(!0)},Sd=()=>{if(!k.name.trim()){te.error("Folder name is required");return}const ie={name:k.name,description:k.description||"",parent_folder_id:k.parent_folder_id||null,display_order:k.display_order||0};k.id?ms.mutate({id:k.id,data:ie}):Qs.mutate(ie)},Cd=ie=>{dt.find(ks=>ks.id===ie);const wt=dt.filter(ks=>ks.parent_folder_id===ie).length>0?"This folder contains subfolders. All subfolders and their resources will be moved to root. Continue?":"Are you sure you want to delete this folder? Resources will be moved to root.";confirm(wt)&&Ir.mutate(ie)},Dh=ie=>{B(ie),V(!0)},ic=ie=>{U&&vn.mutate({folderId:U.id,newParentId:ie==="root"?null:ie})},sn=ie=>{Z(Oe=>({...Oe,[ie]:!Oe[ie]}))},Oh=ie=>{L(Oe=>Oe.includes(ie)?Oe.filter(He=>He!==ie):[...Oe,ie])},to=()=>{if($.length===0){te.error("Please select resources to move");return}F(!0)},ul=ie=>{ve.mutate({resourceIds:$,folderId:ie==="root"?null:ie})},zr=(ie,Oe)=>{ve.mutate({resourceIds:[ie],folderId:Oe==="root"?null:Oe})},kd=()=>{n({title:"",description:"",subcategories:[],resource_type:"external_link",target_url:"",open_in_new_tab:!0,image_url:"",release_date:new Date().toISOString(),is_public:!0,allowed_role_ids:[],tags:[],author_id:"",author_name:"",folder_id:P,status:"active"}),y(!1),w(!1),_(""),a(!0)},Ed=ie=>{n({...ie,subcategories:ie.subcategories||[],allowed_role_ids:ie.allowed_role_ids||[],open_in_new_tab:ie.open_in_new_tab!==!1,author_id:ie.author_id||"",author_name:ie.author_name||"",status:ie.status||"active",release_date:ie.release_date||ie.published_date||new Date().toISOString()});const Oe=ie.image_url?it.some(He=>He.file_url===ie.image_url):!1;if(y(Oe),ie.resource_type==="download"&&ie.target_url){const He=it.find(wt=>wt.file_url===ie.target_url);He?(w(!0),_(He.file_name)):(w(!1),_(""))}else w(!1),_("");a(!0)},hl=()=>{if(!s.title.trim()){te.error("Title is required");return}if(!s.target_url.trim()){te.error(s.resource_type==="video"?"Embed code is required":"Target URL is required");return}if(!s.subcategories||s.subcategories.length===0){te.error("Please select at least one subcategory");return}const ie=(_e==null?void 0:_e.description_character_limit)||500;if(s.description&&s.description.length>ie){te.error(`Description must be ${ie} characters or less (currently ${s.description.length})`);return}const Oe={title:s.title,description:s.description,subcategories:s.subcategories||[],resource_type:s.resource_type,target_url:s.target_url,open_in_new_tab:s.open_in_new_tab,image_url:s.image_url,release_date:s.release_date,is_public:s.is_public,allowed_role_ids:s.allowed_role_ids||[],tags:s.tags||[],author_id:s.author_id||"",author_name:s.author_name||"",folder_id:s.folder_id||null,status:s.status||"active"};s.id?Br.mutate({id:s.id,data:Oe}):tr.mutate(Oe)},wr=(ie,Oe,He="")=>{Oe==="image"?(n({...s,image_url:ie}),y(!0)):Oe==="target"&&(n({...s,target_url:ie}),w(!0),_(He)),h(null),Y(null),ae({})},Pd=()=>{n({...s,image_url:""}),y(!1)},xe=()=>{n({...s,target_url:""}),w(!1),_("")},$t=ie=>{n({...s,image_url:ie.target.value}),y(!1)},et=ie=>{n({...s,target_url:ie.target.value}),w(!1),_("")},Us=()=>{if(u.trim()){if(s.tags.includes(u.trim())){te.error("Tag already exists");return}n({...s,tags:[...s.tags,u.trim()]}),d(""),A(!1)}},Ft=ie=>{if(s.tags.includes(ie)){te.error("Tag already exists");return}n({...s,tags:[...s.tags,ie]}),d(""),A(!1)},sr=ie=>{n({...s,tags:s.tags.filter(Oe=>Oe!==ie)})},$r=ie=>{const Oe=s.allowed_role_ids||[],He=Oe.includes(ie)?Oe.filter(wt=>wt!==ie):[...Oe,ie];n({...s,allowed_role_ids:He})},Ei=ie=>{const Oe=s.subcategories||[],He=Oe.includes(ie)?Oe.filter(wt=>wt!==ie):[...Oe,ie];n({...s,subcategories:He})},$v=ie=>{const Oe=Rt.find(He=>He.id===ie);n(Oe?{...s,author_id:Oe.id,author_name:Oe.name}:{...s,author_id:"",author_name:""})},Np=(ie,Oe=0)=>ie.map(He=>{const wt=q[He.id],ks=He.children&&He.children.length>0,Nr=P===He.id,ei=ue===He.id;return e.jsxs("div",{children:[e.jsx("div",{className:"relative group",onDragOver:_n=>Tt(_n,He.id),onDrop:_n=>qr(_n,He.id),children:e.jsxs("div",{className:`flex items-center gap-2 py-2 px-3 rounded cursor-pointer transition-all ${Nr?"bg-blue-100":"hover:bg-slate-100"} ${ei?"bg-blue-200 ring-2 ring-blue-400":""}`,style:{paddingLeft:`${Oe*20+12}px`},children:[ks?e.jsx("button",{onClick:_n=>{_n.stopPropagation(),sn(He.id)},className:"p-0.5 hover:bg-slate-200 rounded",children:e.jsx(js,{className:`w-4 h-4 transition-transform ${wt?"rotate-90":""}`})}):e.jsx("div",{className:"w-5 h-5 flex-shrink-0"}),e.jsx(Tl,{className:"w-4 h-4 text-slate-600 shrink-0"}),e.jsx("span",{onClick:()=>C(He.id),className:"flex-1 text-sm",children:He.name}),e.jsxs("span",{className:"text-xs text-slate-500",children:["(",as(He.id),")"]}),e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:_n=>{_n.stopPropagation(),_d(He)},className:"p-1 hover:bg-slate-200 rounded",title:"Edit folder",children:e.jsx(As,{className:"w-3 h-3 text-slate-600"})}),e.jsx("button",{onClick:_n=>{_n.stopPropagation(),Dh(He)},className:"p-1 hover:bg-blue-100 rounded",title:"Move folder",children:e.jsx(Bi,{className:"w-3 h-3 text-blue-600"})}),e.jsx("button",{onClick:_n=>{_n.stopPropagation(),Cd(He.id)},className:"p-1 hover:bg-red-100 rounded",title:"Delete folder",children:e.jsx(os,{className:"w-3 h-3 text-red-600"})})]})]})}),ks&&wt&&e.jsx("div",{children:Np(He.children,Oe+1)})]},He.id)}),lc=(ie,Oe=null,He=0)=>ie.map(wt=>(Oe?Hn(Oe):[]).includes(wt.id)?null:e.jsxs("div",{children:[e.jsxs(J,{variant:"outline",className:"w-full justify-start mb-1",onClick:()=>{z?ic(wt.id):ul(wt.id)},style:{paddingLeft:`${He*20+16}px`},children:[e.jsx(Tl,{className:"w-4 h-4 mr-2"}),wt.name]}),wt.children&&wt.children.length>0&&e.jsxs("div",{className:"ml-4",children:[" ",lc(wt.children,Oe,He+1)]})]},wt.id)),_p=ie=>{ae(Oe=>({...Oe,[ie]:!Oe[ie]}))},Td=(ie,Oe=0)=>ie.map(He=>{const wt=K[He.id],ks=He.children&&He.children.length>0,Nr=Q===He.id;return e.jsxs("div",{children:[e.jsxs("div",{className:`flex items-center gap-2 py-2 px-3 rounded cursor-pointer transition-all ${Nr?"bg-blue-100":"hover:bg-slate-100"}`,style:{paddingLeft:`${Oe*20+12}px`},children:[ks?e.jsx("button",{onClick:ei=>{ei.stopPropagation(),_p(He.id)},className:"p-0.5 hover:bg-slate-200 rounded",children:e.jsx(js,{className:`w-4 h-4 transition-transform ${wt?"rotate-90":""}`})}):e.jsx("div",{className:"w-5 h-5 flex-shrink-0"}),e.jsx(Tl,{className:"w-4 h-4 text-slate-600 shrink-0"}),e.jsx("span",{onClick:()=>Y(He.id),className:"flex-1 text-sm",children:He.name}),e.jsxs("span",{className:"text-xs text-slate-500",children:["(",ds(He.id),")"]})]}),ks&&wt&&e.jsx("div",{children:Td(He.children,Oe+1)})]},He.id)});return t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Manage Resources"}),e.jsx("p",{className:"text-slate-600",children:"Create and manage resource library content  Drag resources to folders"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(J,{onClick:Pn,variant:"outline",className:"border-blue-600 text-blue-600 hover:bg-blue-50",children:[e.jsx(I5,{className:"w-4 h-4 mr-2"}),P?"New Subfolder":"New Folder"]}),e.jsxs(J,{onClick:kd,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Add Resource"]})]})]}),(_e==null?void 0:_e.show_folders)!==!1&&I&&e.jsx(le,{className:"border-blue-500 bg-blue-50 shadow-md mb-6",children:e.jsx(ce,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-600 text-white rounded-full p-2",children:e.jsx(Bi,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900",children:"Bulk Move Mode Active"}),e.jsx("p",{className:"text-sm text-blue-700",children:$.length===0?"Select resources below or drag them to folders":`${$.length} resource${$.length>1?"s":""} selected  Drag to move`})]})]}),e.jsxs("div",{className:"flex gap-2",children:[bt.length>0&&e.jsx(J,{onClick:ki,size:"sm",variant:"outline",className:"bg-white",children:$.length===bt.length?"Deselect All":"Select All"}),$.length>0&&e.jsxs(J,{onClick:to,size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Bi,{className:"w-4 h-4 mr-2"}),"Move ",$.length," Selected"]}),e.jsx(J,{onClick:()=>{W(!1),L([])},size:"sm",variant:"ghost",children:"Cancel"})]})]})})}),(_e==null?void 0:_e.show_folders)!==!1&&e.jsx(le,{className:"border-slate-200 shadow-sm mb-6",children:e.jsxs(ce,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Tl,{className:"w-5 h-5 text-slate-600"}),e.jsx("h3",{className:"font-semibold text-slate-900",children:"Folders"}),e.jsx(ye,{variant:"outline",className:"ml-2 text-xs",children:"Drag & Drop Enabled"})]}),!I&&e.jsxs(J,{onClick:()=>W(!0),size:"sm",variant:"outline",children:[e.jsx(Bi,{className:"w-4 h-4 mr-2"}),"Bulk Move Mode"]})]}),(Ds.length>0||P===null)&&e.jsxs("div",{className:"flex items-center gap-2 mb-4 p-2 bg-slate-50 rounded-lg",children:[e.jsxs("button",{onClick:()=>C(null),className:"flex items-center gap-1 text-sm text-slate-600 hover:text-slate-900",children:[e.jsx(Zm,{className:"w-4 h-4"}),"Root"]}),Ds.map((ie,Oe)=>e.jsxs(Be.Fragment,{children:[e.jsx(js,{className:"w-4 h-4 text-slate-400"}),e.jsx("button",{onClick:()=>C(ie.id),className:`text-sm ${Oe===Ds.length-1?"text-blue-600 font-medium":"text-slate-600 hover:text-slate-900"}`,children:ie.name})]},ie.id))]}),e.jsxs("div",{className:"border border-slate-200 rounded-lg p-2 max-h-96 overflow-y-auto",onDragLeave:Cs,children:[e.jsxs("div",{className:`flex items-center gap-2 py-2 px-3 rounded cursor-pointer transition-all ${P===null?"bg-blue-100":"hover:bg-slate-100"} ${ue==="root"?"bg-blue-200 ring-2 ring-blue-400":""}`,onClick:()=>C(null),onDragOver:ie=>Tt(ie,"root"),onDrop:ie=>qr(ie,"root"),children:[e.jsx(Eo,{className:"w-4 h-4 text-slate-600"}),e.jsx("span",{className:"flex-1 text-sm font-medium",children:"Root"}),e.jsxs("span",{className:"text-xs text-slate-500",children:["(",Ge.filter(ie=>!ie.folder_id).length,")"]})]}),Np(Ss)]})]})}),e.jsx(le,{className:"border-slate-200 shadow-sm mb-6",children:e.jsx(ce,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx(he,{placeholder:"Search resources...",value:i,onChange:ie=>l(ie.target.value),className:"pl-10"})]}),e.jsxs(Ke,{value:o,onValueChange:c,children:[e.jsx(Ve,{className:"w-full md:w-48",children:e.jsx(Qe,{placeholder:"Filter by category"})}),e.jsxs(We,{children:[e.jsx(re,{value:"all",children:"All Categories"},"all"),De.map(ie=>e.jsx(re,{value:ie.name,children:ie.name},ie.id))]})]})]})})}),Ye?e.jsx("div",{className:"text-center py-12",children:"Loading resources..."}):bt.length===0?e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(ns,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No Resources Found"}),e.jsx("p",{className:"text-slate-600 mb-6",children:i||o!=="all"||P?"Try adjusting your filters":"Create your first resource to get started"}),!i&&o==="all"&&e.jsxs(J,{onClick:kd,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Add First Resource"]})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:Ze.map(ie=>{var _n;const Oe=((_n=ie.allowed_role_ids)==null?void 0:_n.length)||0,He=ie.is_public?"Public":Oe===0?"All Members":`${Oe} Role${Oe>1?"s":""}`,wt=$.includes(ie.id),ks=se.includes(ie.id),Nr=ie.release_date||ie.published_date,ei=Nr&&new Date(Nr)>new Date;return e.jsxs(le,{draggable:!0,onDragStart:yn=>ft(yn,ie),onDragEnd:xt,className:`border-slate-200 shadow-sm hover:shadow-md transition-all relative ${I?"cursor-pointer":"cursor-grab"} ${wt?"ring-4 ring-blue-500 bg-blue-50":""} ${ks?"opacity-50":""}`,onClick:()=>{I&&Oh(ie.id)},children:[e.jsx("div",{className:"absolute top-2 right-2 z-10 p-1 bg-slate-100 rounded hover:bg-slate-200 cursor-grab",children:e.jsx(pd,{className:"w-4 h-4 text-slate-400"})}),I&&e.jsx("div",{className:"absolute top-3 left-3 z-10",children:e.jsx("div",{className:`w-6 h-6 rounded border-2 flex items-center justify-center transition-all ${wt?"bg-blue-600 border-blue-600":"bg-white border-slate-300"}`,children:wt&&e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})}),ie.image_url&&e.jsx("div",{className:"h-40 overflow-hidden bg-slate-100",children:e.jsx("img",{src:ie.image_url,alt:ie.title,className:"w-full h-full object-cover"})}),e.jsxs(Fe,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[ie.subcategories&&ie.subcategories.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1",children:[ie.subcategories.slice(0,2).map((yn,Pi)=>e.jsx(ye,{className:"bg-blue-100 text-blue-700 text-xs",children:yn},Pi)),ie.subcategories.length>2&&e.jsxs(ye,{variant:"outline",className:"text-xs",children:["+",ie.subcategories.length-2]})]}),e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[e.jsxs(ye,{variant:"outline",children:[e.jsx(In,{className:"w-3 h-3 mr-1"}),He]}),ie.status==="draft"&&e.jsx(ye,{className:"bg-amber-100 text-amber-700",children:"Draft"}),ei&&e.jsxs(ye,{className:"bg-purple-100 text-purple-700",children:[e.jsx(tn,{className:"w-3 h-3 mr-1"}),"Scheduled"]})]})]}),e.jsx(Ue,{className:"text-lg line-clamp-2",children:ie.title}),ie.description&&e.jsx("p",{className:"text-sm text-slate-600 mt-2",children:ie.description}),ei&&e.jsxs("p",{className:"text-xs text-purple-600 mt-2 flex items-center gap-1",children:[e.jsx(Ns,{className:"w-3 h-3"}),"Releases: ",Mt(new Date(Nr),"MMM d, yyyy h:mm a")]})]}),e.jsx(ce,{className:"pt-0",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(J,{variant:"outline",size:"sm",onClick:yn=>{yn.stopPropagation(),Ed(ie)},className:"flex-1",children:[e.jsx(As,{className:"w-3 h-3 mr-1"}),"Edit"]}),!I&&e.jsxs(Ke,{value:ie.folder_id||"root",onValueChange:yn=>{zr(ie.id,yn)},children:[e.jsx(Ve,{className:"w-28",onClick:yn=>yn.stopPropagation(),children:e.jsx(Bi,{className:"w-3 h-3 mr-1"})}),e.jsxs(We,{children:[e.jsx(re,{value:"root",children:"Root"}),dt.map(yn=>e.jsx(re,{value:yn.id,children:yn.name},yn.id))]})]}),e.jsx(J,{variant:"outline",size:"sm",onClick:yn=>{yn.stopPropagation(),ua.mutate(ie.id)},className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(os,{className:"w-3 h-3"})})]})})]},ie.id)})}),Ne>1&&e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsx(ce,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"Items per page:"}),e.jsxs(Ke,{value:ze.toString(),onValueChange:ie=>{Ee(Number(ie)),qe(1)},children:[e.jsx(Ve,{className:"w-20",children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"9",children:"9"}),e.jsx(re,{value:"18",children:"18"}),e.jsx(re,{value:"36",children:"36"}),e.jsx(re,{value:"72",children:"72"})]})]})]}),e.jsxs("div",{className:"text-sm text-slate-600",children:["Showing ",ut+1,"-",Math.min(Te,bt.length)," of ",bt.length," resources"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(J,{variant:"outline",size:"sm",onClick:()=>qe(ie=>Math.max(1,ie-1)),disabled:we===1,children:e.jsx(Wn,{className:"w-4 h-4"})}),yt().map((ie,Oe)=>e.jsx(Be.Fragment,{children:ie==="..."?e.jsx("span",{className:"px-2 text-slate-400",children:"..."}):e.jsx(J,{variant:we===ie?"default":"outline",size:"sm",onClick:()=>qe(ie),className:we===ie?"bg-blue-600 hover:bg-blue-700":"",children:ie})},Oe)),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>qe(ie=>Math.min(Ne,ie+1)),disabled:we===Ne,children:e.jsx(js,{className:"w-4 h-4"})})]})]})})})]}),e.jsx(Ct,{open:O,onOpenChange:ie=>{M(ie),ie||E(null)},children:e.jsxs(Nt,{className:"max-w-md",children:[e.jsx(kt,{children:e.jsx(Et,{children:k!=null&&k.id?"Edit Folder":P?"Create New Subfolder":"Create New Folder"})}),k&&e.jsxs("div",{className:"space-y-4",children:[k.parent_folder_id&&e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("span",{className:"font-medium",children:"Parent Folder: "}),((so=dt.find(ie=>ie.id===k.parent_folder_id))==null?void 0:so.name)||"Root"]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"folder-name",children:"Folder Name *"}),e.jsx(he,{id:"folder-name",value:k.name,onChange:ie=>E({...k,name:ie.target.value}),placeholder:"e.g., Training Materials"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"folder-description",children:"Description (Optional)"}),e.jsx(Gt,{id:"folder-description",value:k.description||"",onChange:ie=>E({...k,description:ie.target.value}),placeholder:"Brief description of this folder...",rows:3})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>M(!1),children:"Cancel"}),e.jsx(J,{onClick:Sd,disabled:Qs.isPending||ms.isPending,className:"bg-blue-600 hover:bg-blue-700",children:k!=null&&k.id?"Update Folder":"Create Folder"})]})]})}),e.jsx(Ct,{open:R,onOpenChange:ie=>{F(ie)},children:e.jsxs(Nt,{className:"max-w-md max-h-[80vh] overflow-y-auto",children:[e.jsx(kt,{children:e.jsx(Et,{children:"Move Resources to Folder"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("p",{className:"text-sm text-slate-600",children:["Select a folder to move ",$.length," selected resource",$.length>1?"s":""," to:"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(J,{variant:"outline",className:"w-full justify-start",onClick:()=>ul("root"),children:[e.jsx(Eo,{className:"w-4 h-4 mr-2"}),"Root (No Folder)"]}),lc(Ss)]})]}),e.jsx(zt,{children:e.jsx(J,{variant:"outline",onClick:()=>F(!1),children:"Cancel"})})]})}),e.jsx(Ct,{open:z,onOpenChange:ie=>{V(ie),ie||B(null)},children:e.jsxs(Nt,{className:"max-w-md max-h-[80vh] overflow-y-auto",children:[e.jsx(kt,{children:e.jsx(Et,{children:"Move Folder"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("p",{className:"text-sm text-slate-600",children:["Select a destination for ",e.jsx("strong",{children:U==null?void 0:U.name}),":"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(J,{variant:"outline",className:"w-full justify-start",onClick:()=>ic("root"),children:[e.jsx(Eo,{className:"w-4 h-4 mr-2"}),"Root (Top Level)"]}),lc(Ss,U==null?void 0:U.id)]})]}),e.jsx(zt,{children:e.jsx(J,{variant:"outline",onClick:()=>{V(!1),B(null)},children:"Cancel"})})]})}),e.jsx(Ct,{open:r,onOpenChange:ie=>{a(ie),ie||(g(""),y(!1),w(!1),_(""),A(!1))},children:e.jsxs(Nt,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsx(kt,{children:e.jsx(Et,{children:s!=null&&s.id?"Edit Resource":"Create New Resource"})}),s&&e.jsxs("div",{className:"space-y-6",children:[s.folder_id&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 rounded-lg",children:[e.jsx(Tl,{className:"w-4 h-4 text-blue-600"}),e.jsxs("span",{className:"text-sm text-blue-900",children:["Folder: ",((Sp=dt.find(ie=>ie.id===s.folder_id))==null?void 0:Sp.name)||"Unknown Folder"]})]}),!s.folder_id&&P&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 rounded-lg",children:[e.jsx(Eo,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm text-blue-900",children:"Folder: Root"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"title",children:"Title *"}),e.jsx(he,{id:"title",value:s.title,onChange:ie=>n({...s,title:ie.target.value}),placeholder:"Resource title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"description",children:"Description"}),e.jsx(Gt,{id:"description",value:s.description||"",onChange:ie=>n({...s,description:ie.target.value}),placeholder:"Brief description...",rows:3,maxLength:(_e==null?void 0:_e.description_character_limit)||500}),e.jsxs("p",{className:"text-xs text-slate-500",children:[((Ad=s.description)==null?void 0:Ad.length)||0," / ",(_e==null?void 0:_e.description_character_limit)||500," characters"]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-slate-50 rounded-lg",children:[e.jsx(cs,{id:"status-toggle",checked:s.status==="active",onCheckedChange:ie=>n({...s,status:ie?"active":"draft"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ee,{htmlFor:"status-toggle",className:"cursor-pointer font-medium",children:s.status==="active"?"Active":"Draft"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:s.status==="active"?"This resource is visible to users":"This resource is hidden from users (draft mode)"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"resource-type",children:"Resource Type *"}),e.jsxs(Ke,{value:s.resource_type,onValueChange:ie=>{n({...s,resource_type:ie}),ie!=="download"&&(w(!1),_(""))},children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"download",children:"Download"}),e.jsx(re,{value:"video",children:"Video"}),e.jsx(re,{value:"external_link",children:"External Link"})]})]})]}),De.some(ie=>ie.subcategories&&ie.subcategories.length>0)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Categories & Subcategories *"}),e.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Select any categories and subcategories that apply to this resource"}),e.jsxs("div",{className:"relative mb-3",children:[e.jsx(Ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx(he,{placeholder:"Search categories and subcategories...",value:p,onChange:ie=>g(ie.target.value),className:"pl-10 pr-10"}),p&&e.jsx("button",{onClick:()=>g(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:e.jsx(_s,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"max-h-64 overflow-y-auto border border-slate-200 rounded-lg p-3 space-y-3",children:Je.length===0?e.jsx("div",{className:"text-center py-8 text-slate-500",children:e.jsx("p",{className:"text-sm",children:"No matching categories or subcategories found"})}):Je.map(ie=>!ie.subcategories||ie.subcategories.length===0?null:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-700 uppercase tracking-wider",children:ie.name}),e.jsx("div",{className:"space-y-1 pl-2",children:ie.subcategories.map(Oe=>e.jsxs("div",{className:"flex items-center gap-3 p-2 hover:bg-slate-50 rounded cursor-pointer",onClick:()=>Ei(Oe),children:[e.jsx(ba,{id:`sub-${ie.name}-${Oe}`,checked:(s.subcategories||[]).includes(Oe),onCheckedChange:()=>Ei(Oe),className:"data-[state=checked]:bg-blue-600 data-[state=checked]:border-blue-600"}),e.jsx(ee,{htmlFor:`sub-${ie.name}-${Oe}`,className:"flex-1 cursor-pointer text-sm",children:Oe})]},Oe))})]},ie.id))}),s.subcategories&&s.subcategories.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-2 p-3 bg-blue-50 rounded-lg",children:[e.jsxs("p",{className:"text-xs font-medium text-blue-900 w-full mb-1",children:["Selected: ",s.subcategories.length]}),s.subcategories.map((ie,Oe)=>e.jsxs(ye,{className:"bg-blue-100 text-blue-700 pr-1",children:[ie,e.jsx("button",{onClick:()=>Ei(ie),className:"ml-2 hover:bg-blue-200 rounded-full p-0.5",children:e.jsx(_s,{className:"w-3 h-3"})})]},Oe))]})]}),s.resource_type==="video"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"embed-code",children:"Video Embed Code *"}),e.jsx(Gt,{id:"embed-code",value:s.target_url,onChange:et,placeholder:"Paste your video embed code here (e.g., YouTube or Vimeo embed code)",rows:4,className:"font-mono text-sm"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Paste the complete embed code from your video platform"})]}):s.resource_type==="download"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"download-url",children:"Download File *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(he,{id:"download-url",value:j?"":s.target_url||"",onChange:et,placeholder:j?"File selected from repository":"https://... or select from repository",className:"flex-1"}),e.jsxs(J,{type:"button",variant:"outline",onClick:()=>h("target"),children:[e.jsx(ns,{className:"w-4 h-4 mr-2"}),"Select from Repository"]})]}),s.target_url&&e.jsxs("div",{className:"mt-2 p-3 border border-slate-200 rounded-lg bg-slate-50 relative",children:[e.jsxs("div",{className:"flex items-center gap-2 pr-10",children:[e.jsx(ns,{className:"w-4 h-4 text-slate-600 shrink-0"}),e.jsx("p",{className:"text-sm text-slate-700 flex-1 truncate",children:j?N:"External file URL"})]}),e.jsx("button",{onClick:xe,className:"absolute bottom-2 right-2 p-1.5 bg-red-600 hover:bg-red-700 text-white rounded-full shadow-lg transition-colors",title:"Remove file",children:e.jsx(os,{className:"w-3 h-3"})})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"external-url",children:"External Link URL *"}),e.jsx(he,{id:"external-url",value:s.target_url,onChange:et,placeholder:"https://example.com",className:"flex-1"}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-lg mt-2",children:[e.jsx(cs,{id:"open-new-tab",checked:s.open_in_new_tab,onCheckedChange:ie=>n({...s,open_in_new_tab:ie})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ee,{htmlFor:"open-new-tab",className:"cursor-pointer text-sm",children:"Open in new tab"}),e.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"When enabled, the link will open in a new browser tab"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"image-url",children:"Image URL"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(he,{id:"image-url",value:v?"":s.image_url||"",onChange:$t,placeholder:v?"Image selected from repository":"https://... or select from repository",className:"flex-1"}),e.jsxs(J,{type:"button",variant:"outline",onClick:()=>h("image"),children:[e.jsx(hi,{className:"w-4 h-4 mr-2"}),"Select from Repository"]})]}),s.image_url&&e.jsxs("div",{className:"mt-2 p-2 border border-slate-200 rounded-lg relative",children:[e.jsx("img",{src:s.image_url,alt:"Preview",className:"w-full h-32 object-cover rounded"}),e.jsx("button",{onClick:Pd,className:"absolute bottom-3 right-3 p-1.5 bg-red-600 hover:bg-red-700 text-white rounded-full shadow-lg transition-colors",title:"Remove image",children:e.jsx(os,{className:"w-3 h-3"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Tags"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(he,{placeholder:"Add tag",value:u,onChange:ie=>{d(ie.target.value),A(!0)},onKeyPress:ie=>{ie.key==="Enter"&&(ie.preventDefault(),Us())},onFocus:()=>A(!0),onBlur:()=>{setTimeout(()=>A(!1),200)}}),e.jsx(J,{onClick:Us,size:"sm",children:e.jsx(Pt,{className:"w-4 h-4"})})]}),T&&Bs.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:Bs.map((ie,Oe)=>e.jsx("button",{type:"button",onClick:()=>Ft(ie),className:"w-full text-left px-3 py-2 hover:bg-blue-50 transition-colors text-sm",children:ie},Oe))})]}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 p-3 bg-slate-50 rounded-lg",children:s.tags.map((ie,Oe)=>e.jsxs(ye,{className:"bg-slate-200 text-slate-700 pr-1",children:[ie,e.jsx("button",{onClick:()=>sr(ie),className:"ml-2 hover:bg-slate-300 rounded-full p-0.5",children:e.jsx(_s,{className:"w-3 h-3"})})]},Oe))})]}),Rt.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"author",children:"Author (Optional)"}),e.jsxs(Ke,{value:s.author_id||"none",onValueChange:ie=>$v(ie==="none"?"":ie),children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:"Select an author..."})}),e.jsxs(We,{children:[e.jsx(re,{value:"none",children:"No author"}),Rt.map(ie=>e.jsxs(re,{value:ie.id,children:[ie.name," (",ie.email,")"]},ie.id))]})]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Select from members and team members with designated author roles"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"release-date",children:"Release Date & Time"}),e.jsx(he,{id:"release-date",type:"datetime-local",value:s.release_date?new Date(s.release_date).toISOString().slice(0,16):"",onChange:ie=>{const Oe=ie.target.value?new Date(ie.target.value).toISOString():new Date().toISOString();n({...s,release_date:Oe})},className:"flex-1"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Set a future date to schedule the resource release. Past dates show when the resource was originally published."}),s.release_date&&new Date(s.release_date)>new Date&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx(tn,{className:"w-4 h-4 text-purple-600"}),e.jsxs("p",{className:"text-sm text-purple-900",children:["This resource is scheduled for release on ",Mt(new Date(s.release_date),"MMMM d, yyyy")," at ",Mt(new Date(s.release_date),"h:mm a")]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-slate-50 rounded-lg",children:[e.jsx(cs,{id:"is-public",checked:s.is_public,onCheckedChange:ie=>n({...s,is_public:ie})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ee,{htmlFor:"is-public",className:"cursor-pointer font-medium",children:"Public Resource"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Make this resource visible to non-members"})]})]}),!s.is_public&&e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(In,{className:"w-4 h-4 text-blue-600"}),e.jsx(ee,{className:"font-medium text-blue-900",children:"Role Access Control"})]}),e.jsx("p",{className:"text-xs text-blue-700",children:"Select which roles can access this resource. Leave all unchecked to allow all member roles."}),e.jsx("div",{className:"space-y-2",children:at.map(ie=>e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-white rounded hover:bg-blue-50 transition-colors cursor-pointer",onClick:()=>$r(ie.id),children:[e.jsx(ba,{id:`role-${ie.id}`,checked:(s.allowed_role_ids||[]).includes(ie.id),onCheckedChange:()=>$r(ie.id),className:"data-[state=checked]:bg-blue-600 data-[state=checked]:border-blue-600"}),e.jsxs(ee,{htmlFor:`role-${ie.id}`,className:"flex-1 cursor-pointer text-sm",children:[ie.name,ie.is_admin&&e.jsx(ye,{className:"ml-2 bg-amber-100 text-amber-700 text-xs",children:"Admin"})]})]},ie.id))})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>{a(!1),n(null),d(""),g(""),y(!1),w(!1),_(""),A(!1)},children:"Cancel"}),e.jsx(J,{onClick:hl,disabled:tr.isPending||Br.isPending,className:"bg-blue-600 hover:bg-blue-700",children:s!=null&&s.id?"Update Resource":"Create Resource"})]})]})}),e.jsx(Ct,{open:!!m,onOpenChange:()=>{h(null),Y(null),ae({})},children:e.jsxs(Nt,{className:"max-w-6xl max-h-[90vh] grid grid-rows-[auto_1fr_auto] gap-4",children:[e.jsx(kt,{children:e.jsxs(Et,{children:["Select ",m==="image"?"Image":"File"," from Repository"]})}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4 py-4",children:[e.jsxs("div",{className:"md:col-span-1 border-r border-slate-200 pr-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Folders"}),e.jsxs("div",{className:"mb-3 p-2 bg-slate-50 rounded-lg",children:[e.jsxs("button",{onClick:()=>Y(null),className:"flex items-center gap-1 text-xs text-slate-600 hover:text-slate-900",children:[e.jsx(Zm,{className:"w-3 h-3"}),"Root"]}),jr.map((ie,Oe)=>e.jsxs(Be.Fragment,{children:[e.jsx(js,{className:"w-3 h-3 text-slate-400 inline-block mx-1"}),e.jsx("button",{onClick:()=>Y(ie.id),className:`text-xs ${Oe===jr.length-1?"text-blue-600 font-medium":"text-slate-600 hover:text-slate-900"}`,children:ie.name})]},ie.id))]}),e.jsxs("div",{className:"border border-slate-200 rounded-lg p-2 max-h-96 overflow-y-auto",children:[e.jsxs("div",{className:`flex items-center gap-2 py-2 px-3 rounded cursor-pointer transition-all ${Q===null?"bg-blue-100":"hover:bg-slate-100"}`,onClick:()=>Y(null),children:[e.jsx(Eo,{className:"w-4 h-4 text-slate-600"}),e.jsx("span",{className:"flex-1 text-sm font-medium",children:"Root"}),e.jsxs("span",{className:"text-xs text-slate-500",children:["(",it.filter(ie=>!ie.folder_id&&(m==="image"?ie.file_type==="image":!0)).length,")"]})]}),Td(on)]})]}),e.jsx("div",{className:"md:col-span-3 overflow-y-auto",children:hs.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ns,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"No files in this folder"}),e.jsx("p",{className:"text-sm text-slate-500 mt-2",children:Q?"Try selecting a different folder":"Upload files in the File Repository page"})]}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:hs.map(ie=>e.jsxs("button",{onClick:()=>wr(ie.file_url,m,ie.file_name),className:"text-left border-2 border-slate-200 rounded-lg hover:border-blue-500 transition-colors p-2",children:[ie.file_type==="image"?e.jsx("img",{src:ie.file_url,alt:ie.file_name,className:"w-full h-32 object-cover rounded mb-2"}):e.jsx("div",{className:"w-full h-32 bg-slate-100 rounded flex items-center justify-center mb-2",children:e.jsx(ns,{className:"w-12 h-12 text-slate-400"})}),e.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:ie.file_name}),ie.description&&e.jsx("p",{className:"text-xs text-slate-500 truncate mt-1",children:ie.description})]},ie.id))})})]}),e.jsx(zt,{children:e.jsx(J,{variant:"outline",onClick:()=>{h(null),Y(null),ae({})},children:"Cancel"})})]})})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"border-red-200",children:e.jsx(ce,{className:"p-8 text-center",children:e.jsx("p",{className:"text-red-600",children:"You need administrator privileges to access this page."})})})})}function W8({isAdmin:t,memberInfo:s}){var ua;const[n,r]=b.useState(!1),[a,i]=b.useState(null),[l,o]=b.useState(!1),[c,u]=b.useState(""),[d,m]=b.useState("all"),[h,p]=b.useState(""),[g,v]=b.useState(null),[y,j]=b.useState(!1),[w,N]=b.useState(null),[_,T]=b.useState(!1),[A,P]=b.useState(!1),[C,O]=b.useState(null),[M,k]=b.useState([]),[E,R]=b.useState(!1),[F,z]=b.useState({}),[V,U]=b.useState([]),[B,$]=b.useState(null),[L,I]=b.useState(null),[W,q]=b.useState(1),[Z,Q]=b.useState(12),Y=Yt(),{data:K,isLoading:ae}=me({queryKey:["file-repository"],queryFn:()=>X.entities.FileRepository.list("-created_date"),initialData:[]}),{data:se,isLoading:de}=me({queryKey:["file-repository-folders"],queryFn:()=>X.entities.FileRepositoryFolder.list("display_order"),initialData:[]}),ue=b.useMemo(()=>{const ve=ft=>se.filter(xt=>xt.parent_folder_id===ft).sort((xt,Tt)=>(xt.display_order||0)-(Tt.display_order||0)).map(xt=>({...xt,children:ve(xt.id)}));return ve(null)},[se]),oe=ve=>{if(!ve)return[];const ft=[];let xt=ve;for(;xt;){const Tt=se.find(Cs=>Cs.id===xt);if(Tt)ft.unshift(Tt),xt=Tt.parent_folder_id;else break}return ft},pe=b.useMemo(()=>oe(g),[g,se]),je=ve=>{const ft=[ve];return se.filter(Tt=>Tt.parent_folder_id===ve).forEach(Tt=>{ft.push(...je(Tt.id))}),ft},we=ve=>K.filter(ft=>ft.folder_id===ve).length,qe=Le({mutationFn:ve=>X.entities.FileRepositoryFolder.create(ve),onSuccess:()=>{Y.invalidateQueries({queryKey:["file-repository-folders"]}),j(!1),N(null),te.success("Folder created successfully")},onError:ve=>{te.error("Failed to create folder: "+ve.message)}}),ze=Le({mutationFn:({id:ve,data:ft})=>X.entities.FileRepositoryFolder.update(ve,ft),onSuccess:()=>{Y.invalidateQueries({queryKey:["file-repository-folders"]}),j(!1),N(null),te.success("Folder updated successfully")},onError:ve=>{te.error("Failed to update folder: "+ve.message)}}),Ee=Le({mutationFn:async ve=>{const ft=je(ve),xt=K.filter(Cs=>ft.includes(Cs.folder_id));for(const Cs of xt)await X.entities.FileRepository.update(Cs.id,{folder_id:null});const Tt=se.filter(Cs=>ft.includes(Cs.id)).sort((Cs,qr)=>oe(qr.id).length-oe(Cs.id).length);for(const Cs of Tt)await X.entities.FileRepositoryFolder.delete(Cs.id)},onSuccess:()=>{Y.invalidateQueries({queryKey:["file-repository-folders"]}),Y.invalidateQueries({queryKey:["file-repository"]}),v(null),te.success("Folder and its subfolders deleted, files moved to root")},onError:ve=>{te.error("Failed to delete folder: "+ve.message)}}),Ce=Le({mutationFn:async({folderId:ve,newParentId:ft})=>{if(ft&&je(ve).includes(ft))throw new Error("Cannot move a folder into its own subfolder");await X.entities.FileRepositoryFolder.update(ve,{parent_folder_id:ft})},onSuccess:()=>{Y.invalidateQueries({queryKey:["file-repository-folders"]}),P(!1),O(null),te.success("Folder moved successfully")},onError:ve=>{te.error("Failed to move folder: "+ve.message)}}),Ge=Le({mutationFn:ve=>X.entities.FileRepository.delete(ve),onSuccess:()=>{Y.invalidateQueries({queryKey:["file-repository"]}),te.success("File deleted successfully")},onError:ve=>{te.error("Failed to delete file: "+ve.message)}}),Ye=Le({mutationFn:({id:ve,data:ft})=>X.entities.FileRepository.update(ve,ft),onSuccess:()=>{Y.invalidateQueries({queryKey:["file-repository"]}),o(!1),i(null),te.success("File updated successfully")},onError:ve=>{te.error("Failed to update file: "+ve.message)}}),De=Le({mutationFn:async({fileIds:ve,folderId:ft})=>{for(const xt of ve)await X.entities.FileRepository.update(xt,{folder_id:ft})},onSuccess:()=>{Y.invalidateQueries({queryKey:["file-repository"]}),T(!1),k([]),R(!1),te.success("Files moved successfully")},onError:ve=>{te.error("Failed to move files: "+ve.message)}}),it=b.useMemo(()=>K.filter(ve=>{var Cs,qr,ki;const ft=g===null?!ve.folder_id:ve.folder_id===g,xt=!c||((Cs=ve.file_name)==null?void 0:Cs.toLowerCase().includes(c.toLowerCase()))||((qr=ve.description)==null?void 0:qr.toLowerCase().includes(c.toLowerCase()))||((ki=ve.tags)==null?void 0:ki.some(Pn=>Pn.toLowerCase().includes(c.toLowerCase()))),Tt=d==="all"||ve.file_type===d;return ft&&xt&&Tt}),[K,g,c,d]);b.useEffect(()=>{q(1)},[c,d,g,Z]);const Se=Math.ceil(it.length/Z),at=(W-1)*Z,_e=at+Z,$e=it.slice(at,_e),nt=()=>{const ve=[];if(Se<=5)for(let xt=1;xt<=Se;xt++)ve.push(xt);else if(W<=3){for(let xt=1;xt<=4;xt++)ve.push(xt);Se>5&&ve.push("..."),ve.push(Se)}else if(W>=Se-2){ve.push(1),Se>5&&ve.push("...");for(let xt=Se-3;xt<=Se;xt++)ve.push(xt)}else{ve.push(1),ve.push("...");for(let xt=W-1;xt<=W+1;xt++)ve.push(xt);ve.push("..."),ve.push(Se)}return ve},dt=ve=>{q(ve),window.scrollTo({top:0,behavior:"smooth"})},lt=(ve,ft)=>{if(E&&M.includes(ft.id)){U(M),ve.dataTransfer.effectAllowed="move",ve.dataTransfer.setData("text/plain",JSON.stringify(M));const xt=document.createElement("div");xt.className="bg-blue-600 text-white px-4 py-2 rounded-lg shadow-lg font-medium",xt.textContent=`Moving ${M.length} file${M.length>1?"s":""}`,xt.style.position="absolute",xt.style.top="-1000px",document.body.appendChild(xt),ve.dataTransfer.setDragImage(xt,0,0),setTimeout(()=>document.body.removeChild(xt),0)}else U([ft.id]),ve.dataTransfer.effectAllowed="move",ve.dataTransfer.setData("text/plain",JSON.stringify([ft.id]))},Rt=()=>{U([]),$(null),L&&(clearTimeout(L),I(null))},es=(ve,ft)=>{if(ve.preventDefault(),ve.stopPropagation(),ve.dataTransfer.dropEffect="move",B!==ft&&($(ft),L&&clearTimeout(L),ft&&!F[ft])){const xt=setTimeout(()=>{z(Tt=>({...Tt,[ft]:!0}))},800);I(xt)}},Bs=ve=>{ve.preventDefault();const ft=ve.currentTarget.getBoundingClientRect(),xt=ve.clientX,Tt=ve.clientY;(xt<ft.left||xt>=ft.right||Tt<ft.top||Tt>=ft.bottom)&&($(null),L&&(clearTimeout(L),I(null)))},Ss=async(ve,ft)=>{ve.preventDefault(),ve.stopPropagation(),L&&(clearTimeout(L),I(null)),$(null);try{const xt=JSON.parse(ve.dataTransfer.getData("text/plain"));xt&&xt.length>0&&await De.mutateAsync({fileIds:xt,folderId:ft==="root"?null:ft})}catch(xt){console.error("Drop error:",xt)}U([])},on=async ve=>{var xt;const ft=(xt=ve.target.files)==null?void 0:xt[0];if(ft){r(!0);try{const{file_url:Tt}=await X.integrations.Core.UploadFile({file:ft});let Cs="other";ft.type.startsWith("image/")?Cs="image":ft.type.startsWith("video/")?Cs="video":(ft.type.includes("pdf")||ft.type.includes("document"))&&(Cs="document"),await X.entities.FileRepository.create({file_name:ft.name,file_url:Tt,file_type:Cs,mime_type:ft.type,file_size:ft.size,uploaded_by:(s==null?void 0:s.email)||"unknown",folder_id:g}),Y.invalidateQueries({queryKey:["file-repository"]}),te.success("File uploaded successfully"),ve.target.value=""}catch(Tt){te.error("Failed to upload file: "+Tt.message)}finally{r(!1)}}},Jt=ve=>{i({...ve}),o(!0)},fn=()=>{a&&Ye.mutate({id:a.id,data:{description:a.description||"",tags:a.tags||[]}})},Ds=()=>{var ve;if(!(!h.trim()||!a)){if((ve=a.tags)!=null&&ve.includes(h.trim())){te.error("Tag already exists");return}i({...a,tags:[...a.tags||[],h.trim()]}),p("")}},jr=ve=>{a&&i({...a,tags:(a.tags||[]).filter(ft=>ft!==ve)})},Hn=ve=>{navigator.clipboard.writeText(ve),te.success("URL copied to clipboard")},Je=()=>{N({name:"",description:"",parent_folder_id:g,display_order:se.filter(ve=>ve.parent_folder_id===g).length}),j(!0)},bt=ve=>{N(ve),j(!0)},hs=()=>{if(!w.name.trim()){te.error("Folder name is required");return}const ve={name:w.name,description:w.description||"",parent_folder_id:w.parent_folder_id||null,display_order:w.display_order||0};w.id?ze.mutate({id:w.id,data:ve}):qe.mutate(ve)},Ne=ve=>{se.find(Cs=>Cs.id===ve);const Tt=se.filter(Cs=>Cs.parent_folder_id===ve).length>0?"This folder contains subfolders. All subfolders and their files will be moved to root. Continue?":"Are you sure you want to delete this folder? Files will be moved to root.";confirm(Tt)&&Ee.mutate(ve)},ut=ve=>{O(ve),P(!0)},Te=ve=>{C&&Ce.mutate({folderId:C.id,newParentId:ve==="root"?null:ve})},Ze=ve=>{z(ft=>({...ft,[ve]:!ft[ve]}))},yt=ve=>{k(ft=>ft.includes(ve)?ft.filter(xt=>xt!==ve):[...ft,ve])},as=()=>{M.length===it.length?k([]):k(it.map(ve=>ve.id))},ds=()=>{if(M.length===0){te.error("Please select files to move");return}T(!0)},Qs=ve=>{De.mutate({fileIds:M,folderId:ve==="root"?null:ve})},ms=(ve,ft)=>{De.mutate({fileIds:[ve],folderId:ft==="root"?null:ft})},Ir=(ve,ft=0)=>ve.map(xt=>{const Tt=F[xt.id],Cs=xt.children&&xt.children.length>0,qr=g===xt.id,ki=B===xt.id;return e.jsxs("div",{children:[e.jsx("div",{className:"relative group",onDragOver:Pn=>es(Pn,xt.id),onDrop:Pn=>Ss(Pn,xt.id),children:e.jsxs("div",{className:`flex items-center gap-2 py-2 px-3 rounded cursor-pointer transition-all ${qr?"bg-blue-100":"hover:bg-slate-100"} ${ki?"bg-blue-200 ring-2 ring-blue-400":""}`,style:{paddingLeft:`${ft*20+12}px`},children:[Cs?e.jsx("button",{onClick:Pn=>{Pn.stopPropagation(),Ze(xt.id)},className:"p-0.5 hover:bg-slate-200 rounded",children:e.jsx(js,{className:`w-4 h-4 transition-transform ${Tt?"rotate-90":""}`})}):e.jsx("div",{className:"w-5 h-5 flex-shrink-0"}),e.jsx(Tl,{className:"w-4 h-4 text-slate-600 shrink-0"}),e.jsx("span",{onClick:()=>v(xt.id),className:"flex-1 text-sm",children:xt.name}),e.jsxs("span",{className:"text-xs text-slate-500",children:["(",we(xt.id),")"]}),e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:Pn=>{Pn.stopPropagation(),bt(xt)},className:"p-1 hover:bg-slate-200 rounded",title:"Edit folder",children:e.jsx(As,{className:"w-3 h-3 text-slate-600"})}),e.jsx("button",{onClick:Pn=>{Pn.stopPropagation(),ut(xt)},className:"p-1 hover:bg-blue-100 rounded",title:"Move folder",children:e.jsx(Bi,{className:"w-3 h-3 text-blue-600"})}),e.jsx("button",{onClick:Pn=>{Pn.stopPropagation(),Ne(xt.id)},className:"p-1 hover:bg-red-100 rounded",title:"Delete folder",children:e.jsx(os,{className:"w-3 h-3 text-red-600"})})]})]})}),Cs&&Tt&&e.jsx("div",{children:Ir(xt.children,ft+1)})]},xt.id)}),vn=(ve,ft=null,xt=0)=>ve.map(Tt=>(ft?je(ft):[]).includes(Tt.id)?null:e.jsxs("div",{children:[e.jsxs(J,{variant:"outline",className:"w-full justify-start mb-1",onClick:()=>{A?Te(Tt.id):Qs(Tt.id)},style:{paddingLeft:`${xt*20+16}px`},children:[e.jsx(Tl,{className:"w-4 h-4 mr-2"}),Tt.name]}),Tt.children&&Tt.children.length>0&&e.jsx("div",{className:"ml-4",children:vn(Tt.children,ft,xt+1)})]},Tt.id)),tr=ve=>{switch(ve){case"image":return e.jsx(hi,{className:"w-8 h-8 text-blue-600"});case"video":return e.jsx(jY,{className:"w-8 h-8 text-purple-600"});case"document":return e.jsx(ns,{className:"w-8 h-8 text-green-600"});default:return e.jsx(VK,{className:"w-8 h-8 text-slate-600"})}},Br=ve=>ve<1024?ve+" B":ve<1024*1024?(ve/1024).toFixed(1)+" KB":(ve/(1024*1024)).toFixed(1)+" MB";return t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"File Repository"}),e.jsx("p",{className:"text-slate-600",children:"Upload and manage files  Drag files to folders"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(J,{onClick:Je,variant:"outline",className:"border-blue-600 text-blue-600 hover:bg-blue-50",children:[e.jsx(I5,{className:"w-4 h-4 mr-2"}),g?"New Subfolder":"New Folder"]}),e.jsx("input",{type:"file",id:"file-upload",className:"hidden",onChange:on,disabled:n}),e.jsxs(J,{onClick:()=>{var ve;return(ve=document.getElementById("file-upload"))==null?void 0:ve.click()},disabled:n,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Gs,{className:"w-4 h-4 mr-2"}),n?"Uploading...":"Upload File"]})]})]}),E&&e.jsx(le,{className:"border-blue-500 bg-blue-50 shadow-md mb-6",children:e.jsx(ce,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-600 text-white rounded-full p-2",children:e.jsx(Bi,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900",children:"Bulk Move Mode Active"}),e.jsx("p",{className:"text-sm text-blue-700",children:M.length===0?"Select files below or drag them to folders":`${M.length} file${M.length>1?"s":""} selected  Drag to move`})]})]}),e.jsxs("div",{className:"flex gap-2",children:[it.length>0&&e.jsx(J,{onClick:as,size:"sm",variant:"outline",className:"bg-white",children:M.length===it.length?"Deselect All":"Select All"}),M.length>0&&e.jsxs(J,{onClick:ds,size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Bi,{className:"w-4 h-4 mr-2"}),"Move ",M.length," Selected"]}),e.jsx(J,{onClick:()=>{R(!1),k([])},size:"sm",variant:"ghost",children:"Cancel"})]})]})})}),e.jsx(le,{className:"border-slate-200 shadow-sm mb-6",children:e.jsxs(ce,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Tl,{className:"w-5 h-5 text-slate-600"}),e.jsx("h3",{className:"font-semibold text-slate-900",children:"Folders"}),e.jsx(ye,{variant:"outline",className:"ml-2 text-xs",children:"Drag & Drop Enabled"})]}),!E&&e.jsxs(J,{onClick:()=>R(!0),size:"sm",variant:"outline",children:[e.jsx(Bi,{className:"w-4 h-4 mr-2"}),"Bulk Move Mode"]})]}),(pe.length>0||g===null)&&e.jsxs("div",{className:"flex items-center gap-2 mb-4 p-2 bg-slate-50 rounded-lg",children:[e.jsxs("button",{onClick:()=>v(null),className:"flex items-center gap-1 text-sm text-slate-600 hover:text-slate-900",children:[e.jsx(Zm,{className:"w-4 h-4"}),"Root"]}),pe.map((ve,ft)=>e.jsxs(Be.Fragment,{children:[e.jsx(js,{className:"w-4 h-4 text-slate-400"}),e.jsx("button",{onClick:()=>v(ve.id),className:`text-sm ${ft===pe.length-1?"text-blue-600 font-medium":"text-slate-600 hover:text-slate-900"}`,children:ve.name})]},ve.id))]}),e.jsxs("div",{className:"border border-slate-200 rounded-lg p-2 max-h-96 overflow-y-auto",onDragLeave:Bs,children:[e.jsxs("div",{className:`flex items-center gap-2 py-2 px-3 rounded cursor-pointer transition-all ${g===null?"bg-blue-100":"hover:bg-slate-100"} ${B==="root"?"bg-blue-200 ring-2 ring-blue-400":""}`,onClick:()=>v(null),onDragOver:ve=>es(ve,"root"),onDrop:ve=>Ss(ve,"root"),children:[e.jsx(Eo,{className:"w-4 h-4 text-slate-600"}),e.jsx("span",{className:"flex-1 text-sm font-medium",children:"Root"}),e.jsxs("span",{className:"text-xs text-slate-500",children:["(",K.filter(ve=>!ve.folder_id).length,")"]})]}),Ir(ue)]})]})}),e.jsx(le,{className:"border-slate-200 shadow-sm mb-6",children:e.jsx(ce,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx(he,{placeholder:"Search files...",value:c,onChange:ve=>u(ve.target.value),className:"pl-10"})]}),e.jsx(ev,{value:d,onValueChange:m,className:"w-full md:w-auto",children:e.jsxs(sp,{children:[e.jsx(fr,{value:"all",children:"All"}),e.jsx(fr,{value:"image",children:"Images"}),e.jsx(fr,{value:"document",children:"Documents"}),e.jsx(fr,{value:"video",children:"Videos"}),e.jsx(fr,{value:"other",children:"Other"})]})})]})})}),ae?e.jsx("div",{className:"text-center py-12",children:"Loading files..."}):it.length===0?e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(Gs,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No Files Found"}),e.jsx("p",{className:"text-slate-600 mb-6",children:c||d!=="all"||g?"Try adjusting your filters":"Upload your first file to get started"}),!c&&d==="all"&&e.jsxs(J,{onClick:()=>{var ve;return(ve=document.getElementById("file-upload"))==null?void 0:ve.click()},className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Gs,{className:"w-4 h-4 mr-2"}),"Upload File"]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 text-sm text-slate-600",children:["Showing ",at+1,"-",Math.min(_e,it.length)," of ",it.length," files"]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:$e.map(ve=>{const ft=M.includes(ve.id),xt=V.includes(ve.id);return e.jsxs(le,{draggable:!0,onDragStart:Tt=>lt(Tt,ve),onDragEnd:Rt,className:`border-slate-200 shadow-sm hover:shadow-md transition-all relative ${E?"cursor-pointer":"cursor-grab"} ${ft?"ring-4 ring-blue-500 bg-blue-50":""} ${xt?"opacity-50":""}`,onClick:()=>{E&&yt(ve.id)},children:[e.jsx("div",{className:"absolute top-2 right-2 z-10 p-1 bg-slate-100 rounded hover:bg-slate-200 cursor-grab",children:e.jsx(pd,{className:"w-4 h-4 text-slate-400"})}),E&&e.jsx("div",{className:"absolute top-3 left-3 z-10",children:e.jsx("div",{className:`w-6 h-6 rounded border-2 flex items-center justify-center transition-all ${ft?"bg-blue-600 border-blue-600":"bg-white border-slate-300"}`,children:ft&&e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})}),e.jsxs(Fe,{className:"pb-3",children:[e.jsx("div",{className:"flex items-start justify-between gap-2",children:ve.file_type==="image"?e.jsx("div",{className:"w-full h-40 mb-3 rounded-lg overflow-hidden bg-slate-100",children:e.jsx("img",{src:ve.file_url,alt:ve.file_name,className:"w-full h-full object-cover"})}):e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[tr(ve.file_type),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(Ue,{className:"text-sm truncate",children:ve.file_name}),e.jsx("p",{className:"text-xs text-slate-500",children:Br(ve.file_size)})]})]})}),ve.description&&e.jsx("p",{className:"text-xs text-slate-600 line-clamp-2 mt-2",children:ve.description}),ve.tags&&ve.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:ve.tags.map((Tt,Cs)=>e.jsx(ye,{variant:"secondary",className:"text-xs",children:Tt},Cs))})]}),e.jsxs(ce,{className:"pt-0",children:[e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(J,{variant:"outline",size:"sm",onClick:Tt=>{Tt.stopPropagation(),Hn(ve.file_url)},className:"flex-1",children:[e.jsx(Va,{className:"w-3 h-3 mr-1"}),"Copy URL"]}),e.jsx(J,{variant:"outline",size:"sm",onClick:Tt=>{Tt.stopPropagation(),window.open(ve.file_url,"_blank")},children:e.jsx(Js,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(J,{variant:"outline",size:"sm",onClick:Tt=>{Tt.stopPropagation(),Jt(ve)},className:"flex-1",children:"Edit Info"}),!E&&e.jsxs(Ke,{value:ve.folder_id||"root",onValueChange:Tt=>{ms(ve.id,Tt)},children:[e.jsx(Ve,{className:"w-28",onClick:Tt=>Tt.stopPropagation(),children:e.jsx(Bi,{className:"w-3 h-3 mr-1"})}),e.jsxs(We,{children:[e.jsx(re,{value:"root",children:"Root"}),se.map(Tt=>e.jsx(re,{value:Tt.id,children:Tt.name},Tt.id))]})]}),e.jsx(J,{variant:"outline",size:"sm",onClick:Tt=>{Tt.stopPropagation(),Ge.mutate(ve.id)},className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(os,{className:"w-3 h-3"})})]}),e.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:["Uploaded ",Mt(new Date(ve.created_date),"MMM d, yyyy")]})]})]},ve.id)})}),it.length>0&&e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsx(ce,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"Items per page:"}),e.jsxs(Ke,{value:Z.toString(),onValueChange:ve=>{Q(Number(ve)),q(1)},children:[e.jsx(Ve,{className:"w-20",children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"12",children:"12"}),e.jsx(re,{value:"24",children:"24"}),e.jsx(re,{value:"48",children:"48"}),e.jsx(re,{value:"96",children:"96"})]})]})]}),e.jsxs("div",{className:"text-sm text-slate-600",children:["Page ",W," of ",Se]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(J,{variant:"outline",size:"sm",onClick:()=>dt(W-1),disabled:W===1,children:e.jsx(Wn,{className:"w-4 h-4"})}),nt().map((ve,ft)=>e.jsx(Be.Fragment,{children:ve==="..."?e.jsx("span",{className:"px-2 text-slate-400",children:"..."}):e.jsx(J,{variant:W===ve?"default":"outline",size:"sm",onClick:()=>dt(ve),className:W===ve?"bg-blue-600 hover:bg-blue-700":"",children:ve})},ft)),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>dt(W+1),disabled:W===Se,children:e.jsx(js,{className:"w-4 h-4"})})]})]})})})]}),e.jsx(Ct,{open:y,onOpenChange:ve=>{j(ve),ve||N(null)},children:e.jsxs(Nt,{className:"max-w-md",children:[e.jsx(kt,{children:e.jsx(Et,{children:w!=null&&w.id?"Edit Folder":g?"Create New Subfolder":"Create New Folder"})}),w&&e.jsxs("div",{className:"space-y-4",children:[w.parent_folder_id&&e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("span",{className:"font-medium",children:"Parent Folder: "}),((ua=se.find(ve=>ve.id===w.parent_folder_id))==null?void 0:ua.name)||"Root"]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"folder-name",children:"Folder Name *"}),e.jsx(he,{id:"folder-name",value:w.name,onChange:ve=>N({...w,name:ve.target.value}),placeholder:"e.g., Marketing Assets"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"folder-description",children:"Description (Optional)"}),e.jsx(Gt,{id:"folder-description",value:w.description||"",onChange:ve=>N({...w,description:ve.target.value}),placeholder:"Brief description of this folder...",rows:3})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),e.jsx(J,{onClick:hs,disabled:qe.isPending||ze.isPending,className:"bg-blue-600 hover:bg-blue-700",children:w!=null&&w.id?"Update Folder":"Create Folder"})]})]})}),e.jsx(Ct,{open:_,onOpenChange:ve=>{T(ve)},children:e.jsxs(Nt,{className:"max-w-md max-h-[80vh] overflow-y-auto",children:[e.jsx(kt,{children:e.jsx(Et,{children:"Move Files to Folder"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("p",{className:"text-sm text-slate-600",children:["Select a folder to move ",M.length," selected file",M.length>1?"s":""," to:"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(J,{variant:"outline",className:"w-full justify-start",onClick:()=>Qs("root"),children:[e.jsx(Eo,{className:"w-4 h-4 mr-2"}),"Root (No Folder)"]}),vn(ue)]})]}),e.jsx(zt,{children:e.jsx(J,{variant:"outline",onClick:()=>T(!1),children:"Cancel"})})]})}),e.jsx(Ct,{open:A,onOpenChange:ve=>{P(ve),ve||O(null)},children:e.jsxs(Nt,{className:"max-w-md max-h-[80vh] overflow-y-auto",children:[e.jsx(kt,{children:e.jsx(Et,{children:"Move Folder"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("p",{className:"text-sm text-slate-600",children:["Select a destination for ",e.jsx("strong",{children:C==null?void 0:C.name}),":"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(J,{variant:"outline",className:"w-full justify-start",onClick:()=>Te("root"),children:[e.jsx(Eo,{className:"w-4 h-4 mr-2"}),"Root (Top Level)"]}),vn(ue,C==null?void 0:C.id)]})]}),e.jsx(zt,{children:e.jsx(J,{variant:"outline",onClick:()=>{P(!1),O(null)},children:"Cancel"})})]})}),e.jsx(Ct,{open:l,onOpenChange:o,children:e.jsxs(Nt,{className:"max-w-2xl",children:[e.jsx(kt,{children:e.jsx(Et,{children:"Edit File Information"})}),a&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-slate-900",children:a.file_name}),e.jsx("p",{className:"text-xs text-slate-500",children:Br(a.file_size)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"file-description",children:"Description"}),e.jsx(Gt,{id:"file-description",value:a.description||"",onChange:ve=>i({...a,description:ve.target.value}),placeholder:"Add a description...",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Tags"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(he,{placeholder:"Add tag",value:h,onChange:ve=>p(ve.target.value),onKeyPress:ve=>ve.key==="Enter"&&(ve.preventDefault(),Ds())}),e.jsx(J,{onClick:Ds,size:"sm",children:e.jsx(Gs,{className:"w-4 h-4"})})]}),a.tags&&a.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 p-3 bg-slate-50 rounded-lg",children:a.tags.map((ve,ft)=>e.jsxs(ye,{className:"bg-slate-200 text-slate-700 pr-1",children:[ve,e.jsx("button",{onClick:()=>jr(ve),className:"ml-2 hover:bg-slate-300 rounded-full p-0.5",children:e.jsx(_s,{className:"w-3 h-3"})})]},ft))})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>{o(!1),i(null),p("")},children:"Cancel"}),e.jsx(J,{onClick:fn,disabled:Ye.isPending,className:"bg-blue-600 hover:bg-blue-700",children:"Save Changes"})]})]})})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"border-red-200",children:e.jsx(ce,{className:"p-8 text-center",children:e.jsx("p",{className:"text-red-600",children:"You need administrator privileges to access this page."})})})})}function H8({isAdmin:t}){const[s,n]=b.useState(""),[r,a]=b.useState(""),[i,l]=b.useState(!1),[o,c]=b.useState(null),u=Yt(),{data:d,isLoading:m}=me({queryKey:["admin-resources"],queryFn:()=>X.entities.Resource.list("-created_date"),initialData:[]}),h=b.useMemo(()=>{const w=new Map;return d.forEach(N=>{N.tags&&Array.isArray(N.tags)&&N.tags.forEach(_=>{w.has(_)?w.set(_,{count:w.get(_).count+1,resourceIds:[...w.get(_).resourceIds,N.id]}):w.set(_,{count:1,resourceIds:[N.id]})})}),Array.from(w.entries()).map(([N,_])=>({tag:N,..._})).sort((N,_)=>N.tag.localeCompare(_.tag))},[d]),p=b.useMemo(()=>{if(!r.trim())return h;const w=r.toLowerCase();return h.filter(N=>N.tag.toLowerCase().includes(w))},[h,r]),g=Le({mutationFn:async w=>{const N=d.filter(_=>_.tags&&_.tags.includes(w));await Promise.all(N.map(_=>X.entities.Resource.update(_.id,{..._,tags:_.tags.filter(T=>T!==w)})))},onSuccess:()=>{u.invalidateQueries({queryKey:["admin-resources"]}),l(!1),c(null),te.success("Tag removed from all resources")},onError:w=>{te.error("Failed to remove tag: "+w.message)}}),v=()=>{const w=s.trim();if(!w){te.error("Tag name cannot be empty");return}if(h.some(N=>N.tag===w)){te.error("Tag already exists");return}te.success(`Tag "${w}" is now available for use`),n("")},y=w=>{c(w),l(!0)},j=()=>{o&&g.mutate(o)};return t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Manage Tags"}),e.jsx("p",{className:"text-slate-600",children:"View, add, and remove tags used across resources"})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm mb-6",children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsx(Ue,{className:"text-lg",children:"Add New Tag"})}),e.jsxs(ce,{className:"pt-6",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(ee,{htmlFor:"new-tag",className:"sr-only",children:"New Tag Name"}),e.jsx(he,{id:"new-tag",placeholder:"Enter tag name...",value:s,onChange:w=>n(w.target.value),onKeyPress:w=>{w.key==="Enter"&&(w.preventDefault(),v())}})]}),e.jsxs(J,{onClick:v,disabled:!s.trim(),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Add Tag"]})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"New tags will be available for use when creating or editing resources"})]})]}),e.jsx(le,{className:"border-slate-200 shadow-sm mb-6",children:e.jsx(ce,{className:"p-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx(he,{placeholder:"Search tags...",value:r,onChange:w=>a(w.target.value),className:"pl-10 pr-10"}),r&&e.jsx("button",{onClick:()=>a(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:e.jsx(_s,{className:"w-4 h-4"})})]})})}),m?e.jsx("div",{className:"text-center py-12",children:"Loading tags..."}):h.length===0?e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(Wc,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No Tags Yet"}),e.jsx("p",{className:"text-slate-600",children:"Tags will appear here once they're used on resources"})]})}):p.length===0?e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(Wc,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No Tags Found"}),e.jsx("p",{className:"text-slate-600",children:"Try adjusting your search query"})]})}):e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Ue,{children:["All Tags (",p.length,")"]}),e.jsxs(ye,{variant:"outline",className:"text-slate-600",children:[h.length," total"]})]})}),e.jsx(ce,{className:"p-0",children:e.jsx("div",{className:"divide-y divide-slate-200",children:p.map(w=>e.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-slate-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx(Wc,{className:"w-4 h-4 text-blue-600 shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-slate-900 truncate",children:w.tag}),e.jsxs("p",{className:"text-sm text-slate-600",children:["Used in ",w.count," ",w.count===1?"resource":"resources"]})]})]}),e.jsxs(J,{variant:"outline",size:"sm",onClick:()=>y(w.tag),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[e.jsx(os,{className:"w-3 h-3 mr-1"}),"Remove"]})]},w.tag))})})]}),e.jsx(Ct,{open:i,onOpenChange:l,children:e.jsxs(Nt,{children:[e.jsx(kt,{children:e.jsx(Et,{children:"Remove Tag"})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-50 rounded-lg",children:[e.jsx(vs,{className:"w-5 h-5 text-red-600 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-red-900 font-medium",children:['Are you sure you want to remove the tag "',o,'"?']}),e.jsx("p",{className:"text-xs text-red-700 mt-2",children:"This will remove this tag from all resources that currently use it. This action cannot be undone."})]})]})}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>{l(!1),c(null)},children:"Cancel"}),e.jsx(J,{onClick:j,disabled:g.isPending,className:"bg-red-600 hover:bg-red-700",children:g.isPending?"Removing...":"Remove Tag"})]})]})})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"border-red-200",children:e.jsx(ce,{className:"p-8 text-center",children:e.jsx("p",{className:"text-red-600",children:"You need administrator privileges to access this page."})})})})}function K8(){const[t,s]=b.useState(""),[n,r]=b.useState(""),[a,i]=b.useState("all"),[l,o]=b.useState("all"),[c,u]=b.useState("posted-newest"),{data:d,isLoading:m}=me({queryKey:["public-jobs"],queryFn:async()=>{const y=await X.entities.JobPosting.filter({status:"active"}),j=new Date;return y.filter(w=>w.closing_date?new Date(w.closing_date)>j:!0)},initialData:[]}),{data:h}=me({queryKey:["job-type-settings"],queryFn:async()=>{const j=(await X.entities.SystemSettings.list()).find(w=>w.setting_key==="job_types");if(j)try{return JSON.parse(j.setting_value)}catch{return["Full-time","Part-time","Contract","Temporary","Internship"]}return["Full-time","Part-time","Contract","Temporary","Internship"]},initialData:[]}),{data:p}=me({queryKey:["hours-settings"],queryFn:async()=>{const j=(await X.entities.SystemSettings.list()).find(w=>w.setting_key==="job_hours");if(j)try{return JSON.parse(j.setting_value)}catch{return["Full-time","Part-time","Flexible"]}return["Full-time","Part-time","Flexible"]},initialData:[]}),g=b.useMemo(()=>{let y=d.filter(j=>{var A,P,C,O;const w=!t||((A=j.title)==null?void 0:A.toLowerCase().includes(t.toLowerCase()))||((P=j.company_name)==null?void 0:P.toLowerCase().includes(t.toLowerCase()))||((C=j.description)==null?void 0:C.toLowerCase().includes(t.toLowerCase())),N=!n||((O=j.location)==null?void 0:O.toLowerCase().includes(n.toLowerCase())),_=a==="all"||j.job_type===a,T=l==="all"||j.hours===l;return w&&N&&_&&T});return y.sort((j,w)=>{if(j.featured&&!w.featured)return-1;if(!j.featured&&w.featured)return 1;switch(c){case"posted-newest":return new Date(w.created_date)-new Date(j.created_date);case"posted-oldest":return new Date(j.created_date)-new Date(w.created_date);case"closing-soonest":return!j.closing_date&&!w.closing_date?0:j.closing_date?w.closing_date?new Date(j.closing_date)-new Date(w.closing_date):-1:1;case"closing-latest":return!j.closing_date&&!w.closing_date?0:j.closing_date?w.closing_date?new Date(w.closing_date)-new Date(j.closing_date):-1:1;default:return new Date(w.created_date)-new Date(j.created_date)}}),y},[d,t,n,a,l,c]),v=y=>{if(!y)return!1;const j=Vl(new Date(y),new Date);return j>=0&&j<=7};return e.jsxs("div",{className:"bg-white min-h-screen",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:"Career Opportunities"}),e.jsx("p",{className:"text-xl text-blue-100 max-w-3xl mb-8",children:"Find your next career opportunity in careers education, information, advice and guidance"}),e.jsxs(J,{onClick:()=>window.location.href=Pe("PostJob"),size:"lg",className:"bg-white text-blue-600 hover:bg-blue-50",children:[e.jsx(Pt,{className:"w-5 h-5 mr-2"}),"Post a Job"]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[e.jsx(le,{className:"border-slate-200 shadow-sm mb-8",children:e.jsx(ce,{className:"p-6",children:e.jsxs("div",{className:"grid md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx(he,{placeholder:"Search jobs or companies...",value:t,onChange:y=>s(y.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Rr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx(he,{placeholder:"City or Town...",value:n,onChange:y=>r(y.target.value),className:"pl-10"})]}),e.jsxs("select",{value:a,onChange:y=>i(y.target.value),className:"w-full h-10 px-3 rounded-md border border-slate-200 bg-white text-sm",children:[e.jsx("option",{value:"all",children:"All Job Types"}),h.map(y=>e.jsx("option",{value:y,children:y},y))]}),e.jsxs("select",{value:l,onChange:y=>o(y.target.value),className:"w-full h-10 px-3 rounded-md border border-slate-200 bg-white text-sm",children:[e.jsx("option",{value:"all",children:"All Hours"}),p.map(y=>e.jsx("option",{value:y,children:y},y))]}),e.jsxs("div",{className:"relative",children:[e.jsx(z1,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsxs("select",{value:c,onChange:y=>u(y.target.value),className:"w-full h-10 pl-10 pr-3 rounded-md border border-slate-200 bg-white text-sm",children:[e.jsx("option",{value:"posted-newest",children:"Posted: Newest First"}),e.jsx("option",{value:"posted-oldest",children:"Posted: Oldest First"}),e.jsx("option",{value:"closing-soonest",children:"Closing: Soonest First"}),e.jsx("option",{value:"closing-latest",children:"Closing: Latest First"})]})]})]})})}),e.jsx("div",{className:"mb-6",children:e.jsxs("p",{className:"text-slate-600 font-medium",children:[g.length," ",g.length===1?"job":"jobs"," found"]})}),m?e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Array(6).fill(0).map((y,j)=>e.jsx(le,{className:"animate-pulse border-slate-200",children:e.jsxs(ce,{className:"p-6",children:[e.jsx("div",{className:"h-6 bg-slate-200 rounded w-2/3 mb-4"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/3"})]})},j))}):g.length===0?e.jsx(le,{className:"border-slate-200",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(En,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No Jobs Found"}),e.jsx("p",{className:"text-slate-600",children:"Try adjusting your search filters"})]})}):e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:g.map(y=>{var N;const j=y.closing_date&&v(y.closing_date),w=y.closing_date?Vl(new Date(y.closing_date),new Date):null;return e.jsx(Ht,{to:Pe(`JobDetails?id=${y.id}`),children:e.jsx(le,{className:`border-slate-200 hover:shadow-xl transition-all cursor-pointer h-full group ${j?"border-l-4 border-l-amber-500 hover:border-amber-300":"hover:border-blue-300"}`,children:e.jsxs(ce,{className:"p-6",children:[j&&e.jsxs("div",{className:"mb-4 -mx-6 -mt-6 px-6 py-2 bg-gradient-to-r from-amber-50 to-orange-50 border-b border-amber-200 flex items-center gap-2",children:[e.jsx(vs,{className:"w-4 h-4 text-amber-600"}),e.jsxs("span",{className:"text-sm font-medium text-amber-900",children:["Closing ",w===0?"today":`in ${w} ${w===1?"day":"days"}`]})]}),e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[y.company_logo_url?e.jsx("div",{className:"w-16 h-16 flex-shrink-0 bg-slate-50 rounded-lg p-2 border border-slate-200 group-hover:border-blue-200 transition-colors",children:e.jsx("img",{src:y.company_logo_url,alt:y.company_name,className:"w-full h-full object-contain"})}):e.jsx("div",{className:"w-16 h-16 flex-shrink-0 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center",children:e.jsx(Na,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 line-clamp-2 group-hover:text-blue-600 transition-colors",children:y.title}),y.featured&&e.jsx(U1,{className:"w-5 h-5 text-amber-500 fill-amber-500 flex-shrink-0"})]}),e.jsx("p",{className:"text-sm font-medium text-slate-700 mt-1",children:y.company_name})]})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(Rr,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:y.location})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(tn,{className:"w-4 h-4 flex-shrink-0"}),e.jsxs("span",{children:["Posted ",Mt(new Date(y.created_date),"d MMM, yyyy")]})]}),y.closing_date&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(tn,{className:"w-4 h-4 flex-shrink-0 text-slate-600"}),e.jsxs("span",{className:j?"font-semibold text-amber-700":"text-slate-600",children:["Closes ",Mt(new Date(y.closing_date),"d MMM, yyyy")]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[y.job_type&&e.jsx(ye,{className:"bg-blue-100 text-blue-700 hover:bg-blue-200",children:y.job_type}),y.hours&&e.jsx(ye,{className:"bg-purple-100 text-purple-700 hover:bg-purple-200",children:y.hours}),y.salary_range&&e.jsx(ye,{variant:"outline",className:"border-slate-300",children:y.salary_range})]}),e.jsxs("p",{className:"text-sm text-slate-600 line-clamp-3 leading-relaxed",children:[(N=y.description)==null?void 0:N.substring(0,180),"..."]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-slate-200",children:e.jsxs("span",{className:"text-sm font-medium text-blue-600 group-hover:text-blue-700 inline-flex items-center gap-1",children:["View Details",e.jsx("svg",{className:"w-4 h-4 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})})},y.id)})})]})]})}function G8(){const s=new URLSearchParams(window.location.search).get("id");b.useEffect(()=>{window.scrollTo({top:0,behavior:"instant"})},[]);const{data:n,isLoading:r}=me({queryKey:["job",s],queryFn:async()=>(await X.entities.JobPosting.list()).find(m=>m.id===s),enabled:!!s});if(!s)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-8 flex items-center justify-center",children:e.jsx(le,{className:"border-slate-200",children:e.jsx(ce,{className:"p-8 text-center",children:e.jsx("p",{className:"text-slate-600",children:"Job not found"})})})});if(r)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx(le,{className:"animate-pulse border-slate-200",children:e.jsxs(ce,{className:"p-8",children:[e.jsx("div",{className:"h-8 bg-slate-200 rounded w-2/3 mb-4"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/3"})]})})})});if(!n||n.status!=="active")return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-8 flex items-center justify-center",children:e.jsx(le,{className:"border-slate-200",children:e.jsxs(ce,{className:"p-8 text-center",children:[e.jsx("p",{className:"text-slate-600",children:"This job posting is no longer available"}),e.jsx(J,{onClick:()=>window.location.href=Pe("JobBoard"),className:"mt-4",children:"Back to Job Board"})]})})});const a=()=>{n.application_method==="email"?window.location.href=`mailto:${n.application_value}?subject=Application for ${n.title}`:window.open(n.application_value,"_blank","noopener,noreferrer")},i=n.closing_date&&Vl(new Date(n.closing_date),new Date)<=7,l=n.closing_date?Vl(new Date(n.closing_date),new Date):null,o=typeof window<"u"?window.location.href:"";`${n.title}${n.company_name}${n.location}`;const c=()=>{const d=`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(o)}`;window.open(d,"_blank","noopener,noreferrer,width=600,height=600")},u=()=>{const d=encodeURIComponent(`Job Opportunity: ${n.title}`),m=encodeURIComponent(`I found this job opportunity that might interest you:

${n.title}
${n.company_name}
Location: ${n.location}

View details: ${o}`);window.location.href=`mailto:?subject=${d}&body=${m}`};return e.jsxs("div",{className:"bg-white min-h-screen",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-12",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[e.jsxs(J,{variant:"ghost",onClick:()=>window.location.href=Pe("JobBoard"),className:"text-white hover:bg-white/10 mb-6",children:[e.jsx(ll,{className:"w-4 h-4 mr-2"}),"Back to Job Board"]}),e.jsxs("div",{className:"flex items-start gap-6",children:[n.company_logo_url&&e.jsx("img",{src:n.company_logo_url,alt:n.company_name,className:"w-24 h-24 object-contain bg-white rounded-lg p-2"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:n.title}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Na,{className:"w-5 h-5"}),e.jsx("span",{children:n.company_name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Rr,{className:"w-5 h-5"}),e.jsx("span",{children:n.location})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(tn,{className:"w-5 h-5"}),e.jsxs("span",{children:["Posted ",Mt(new Date(n.created_date),"d MMM, yyyy")]})]})]})]})]})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-12",children:[i&&n.closing_date&&e.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-lg flex items-start gap-3",children:[e.jsx(vs,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-amber-900",children:["Applications closing ",l===0?"today":`in ${l} ${l===1?"day":"days"}`]}),e.jsxs("p",{className:"text-sm text-amber-700 mt-1",children:["Submit your application before ",Mt(new Date(n.closing_date),"d MMM, yyyy")]})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(le,{className:"border-slate-200",children:[e.jsx(Fe,{children:e.jsx(Ue,{children:"Job Description"})}),e.jsx(ce,{className:"prose prose-slate max-w-none",children:e.jsx("div",{className:"whitespace-pre-wrap",children:n.description})})]}),n.attachment_urls&&n.attachment_urls.length>0&&e.jsxs(le,{className:"border-slate-200",children:[e.jsx(Fe,{children:e.jsxs(Ue,{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"w-5 h-5"}),"Additional Documents"]})}),e.jsx(ce,{children:e.jsx("div",{className:"space-y-2",children:n.attachment_urls.map((d,m)=>e.jsxs("a",{href:d,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(ns,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 group-hover:text-blue-600 transition-colors",children:n.attachment_names&&n.attachment_names[m]?n.attachment_names[m]:`Document ${m+1}`}),e.jsx("p",{className:"text-xs text-slate-500",children:"Click to download"})]})]}),e.jsx(Zn,{className:"w-5 h-5 text-slate-400 group-hover:text-blue-600 transition-colors"})]},m))})})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsx(le,{className:"border-slate-200 sticky top-8",children:e.jsxs(ce,{className:"p-6 space-y-4",children:[e.jsx(J,{onClick:a,className:"w-full bg-blue-600 hover:bg-blue-700",size:"lg",children:n.application_method==="email"?e.jsxs(e.Fragment,{children:[e.jsx(Ms,{className:"w-5 h-5 mr-2"}),"Apply via Email"]}):e.jsxs(e.Fragment,{children:[e.jsx(Js,{className:"w-5 h-5 mr-2"}),"Apply Now"]})}),e.jsxs("div",{className:"space-y-3 pt-4 border-t border-slate-200",children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:"Job Details"}),n.job_type&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(En,{className:"w-5 h-5 text-slate-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Job Type"}),e.jsx("div",{className:"text-sm font-medium text-slate-900",children:n.job_type})]})]}),n.hours&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(tn,{className:"w-5 h-5 text-slate-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Hours"}),e.jsx("div",{className:"text-sm font-medium text-slate-900",children:n.hours})]})]}),n.salary_range&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(RG,{className:"w-5 h-5 text-slate-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Salary"}),e.jsx("div",{className:"text-sm font-medium text-slate-900",children:n.salary_range})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Rr,{className:"w-5 h-5 text-slate-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-slate-500",children:"City or Town"}),e.jsx("div",{className:"text-sm font-medium text-slate-900",children:n.location})]})]}),n.closing_date&&e.jsxs("div",{className:`flex items-start gap-3 -mx-1 -my-0.5 px-1 py-0.5 rounded-lg transition-colors ${i?"bg-amber-50 border-2 border-amber-200":""}`,children:[e.jsx(tn,{className:`w-5 h-5 mt-0.5 flex-shrink-0 ${i?"text-amber-600":"text-slate-500"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`text-xs ${i?"text-amber-700 font-medium":"text-slate-500"}`,children:"Application Deadline"}),e.jsx("div",{className:`text-sm font-medium ${i?"text-amber-900":"text-slate-900"}`,children:Mt(new Date(n.closing_date),"d MMM, yyyy")}),i&&l!==null&&e.jsx("div",{className:"text-xs text-amber-700 mt-1",children:l===0?"Closes today!":`${l} ${l===1?"day":"days"} remaining`})]})]}),n.attachment_urls&&n.attachment_urls.length>0&&e.jsx("div",{className:"pt-2 border-t border-slate-200",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(ns,{className:"w-4 h-4"}),e.jsxs("span",{children:[n.attachment_urls.length," ",n.attachment_urls.length===1?"document":"documents"," attached"]})]})})]}),n.featured&&e.jsx(ye,{className:"w-full justify-center bg-amber-100 text-amber-700",children:"Featured Position"}),e.jsxs("div",{className:"pt-4 border-t border-slate-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("h3",{className:"text-sm font-semibold text-slate-900 flex items-center gap-2",children:[e.jsx(Tc,{className:"w-4 h-4"}),"Share this job"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:c,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-[#0A66C2] hover:bg-[#004182] text-white rounded-lg transition-colors",title:"Share on LinkedIn",children:[e.jsx(qu,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"LinkedIn"})]}),e.jsxs("button",{onClick:u,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-slate-600 hover:bg-slate-700 text-white rounded-lg transition-colors",title:"Share via Email",children:[e.jsx(Ms,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Email"})]})]})]})]})})})]})]})]})}let Gw=null;function Tfe({clientSecret:t,onSuccess:s,onCancel:n,amount:r}){const a=jI(),i=yI(),[l,o]=b.useState(!1),[c,u]=b.useState(null),d=async m=>{if(m.preventDefault(),!(!a||!i)){o(!0),u(null);try{const{error:h}=await a.confirmPayment({elements:i,confirmParams:{return_url:`${window.location.origin}${Pe("JobPostSuccess")}`},redirect:"if_required"});h?(u(h.message),o(!1)):s()}catch(h){console.error("Stripe confirmPayment error:",h),u(h.message),o(!1)}}};return e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("strong",{children:"Amount to charge:"})," ",r.toFixed(2)]}),e.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"90-day job listing on the Graduate Futures Job Board"})]}),e.jsx("div",{children:e.jsx(wI,{options:{layout:"tabs"}})}),c&&e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx(vs,{className:"w-4 h-4 mr-0.5 mt-0.5 text-red-600 shrink-0"}),e.jsx("p",{className:"text-sm text-red-800",children:c})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(J,{type:"button",variant:"outline",onClick:n,disabled:l,className:"flex-1",children:"Cancel"}),e.jsx(J,{type:"submit",disabled:!a||l,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:l?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):`Pay ${r.toFixed(2)}`})]})]})}function Y8({memberInfo:t,organizationInfo:s}){const[n,r]=b.useState("email"),[a,i]=b.useState(""),[l,o]=b.useState(!1),[c,u]=b.useState(!1),[d,m]=b.useState(!1),[h,p]=b.useState(!1),[g,v]=b.useState(!1),[y,j]=b.useState(!1),[w,N]=b.useState(!1),[_,T]=b.useState(!1),[A,P]=b.useState(null),[C,O]=b.useState(null),[M,k]=b.useState(null),[E,R]=b.useState(50),[F,z]=b.useState({title:"",description:"",company_name:"",company_logo_url:"",location:"",salary_range:"",job_type:"",hours:"",closing_date:"",application_method:"email",application_value:"",contact_name:"",attachment_urls:[],attachment_names:[]});b.useEffect(()=>{(async()=>{try{const K=await X.functions.invoke("getStripePublishableKey");K.data.publishableKey?Gw=mI(K.data.publishableKey):console.warn("Stripe publishable key not found in response.")}catch(K){console.error("Failed to load Stripe publishable key:",K)}})()},[]);const{data:V}=me({queryKey:["job-type-settings"],queryFn:async()=>{const K=(await X.entities.SystemSettings.list()).find(ae=>ae.setting_key==="job_types");if(K)try{return JSON.parse(K.setting_value)}catch{return["Full-time","Part-time","Contract","Temporary","Internship"]}return["Full-time","Part-time","Contract","Temporary","Internship"]},initialData:[]}),{data:U}=me({queryKey:["hours-settings"],queryFn:async()=>{const K=(await X.entities.SystemSettings.list()).find(ae=>ae.setting_key==="job_hours");if(K)try{return JSON.parse(K.setting_value)}catch{return["Full-time","Part-time","Flexible"]}return["Full-time","Part-time","Flexible"]},initialData:[]}),{data:B}=me({queryKey:["job-posting-price"],queryFn:async()=>{const K=(await X.entities.SystemSettings.list()).find(ae=>ae.setting_key==="job_posting_price");if(K)try{return parseFloat(K.setting_value)}catch{return 50}return 50},initialData:50});b.useEffect(()=>{B&&R(B)},[B]),b.useEffect(()=>{if(t)m(!0),u(!0),i(t.email),r("form"),z(Y=>({...Y,company_name:(s==null?void 0:s.name)||"",contact_name:`${t.first_name} ${t.last_name}`,job_type:V[0]||"",hours:U[0]||""}));else{const Y=sessionStorage.getItem("agcas_member");if(Y){const K=JSON.parse(Y);m(!0),u(!0),i(K.email),r("form"),(async()=>{if(K.organization_id)try{const de=(await X.entities.Organization.list()).find(ue=>ue.id===K.organization_id);de&&z(ue=>({...ue,company_name:de.name,contact_name:`${K.first_name} ${K.last_name}`,job_type:V[0]||"",hours:U[0]||""}))}catch(se){console.error("Failed to fetch organization:",se)}})()}}},[t,s,V,U]);const $=async Y=>{Y.preventDefault(),o(!0);try{(await X.functions.invoke("checkMemberStatusByEmail",{email:a})).data.is_member?(u(!0),te.info("Please log in to post your job for free"),setTimeout(()=>{window.location.href=Pe("Home")+"?returnTo="+encodeURIComponent(window.location.pathname)},2e3)):(u(!1),z(ae=>({...ae,job_type:V[0]||"",hours:U[0]||""})),r("form"))}catch{te.error("Failed to verify email. Please try again.")}finally{o(!1)}},L=async Y=>{const K=Y.target.files[0];if(!K)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(K.type)){te.error("Only image files (JPEG, PNG, GIF, WebP) are allowed");return}if(K.size>5*1024*1024){te.error("Image must be smaller than 5MB");return}v(!0);try{const se=await X.integrations.Core.UploadFile({file:K});z(de=>({...de,company_logo_url:se.file_url})),te.success("Logo uploaded successfully")}catch{te.error("Failed to upload logo. Please try again.")}finally{v(!1)}},I=()=>{z(Y=>({...Y,company_logo_url:""}))},W=async Y=>{const K=Array.from(Y.target.files);if(K.length===0)return;const ae=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"];if(K.filter(ue=>!ae.includes(ue.type)).length>0){te.error("Only PDF, Word, and Excel documents are allowed");return}if(K.filter(ue=>ue.size>10*1024*1024).length>0){te.error("Files must be smaller than 10MB");return}p(!0);try{const ue=K.map(async pe=>({url:(await X.integrations.Core.UploadFile({file:pe})).file_url,name:pe.name})),oe=await Promise.all(ue);z(pe=>({...pe,attachment_urls:[...pe.attachment_urls,...oe.map(je=>je.url)],attachment_names:[...pe.attachment_names,...oe.map(je=>je.name)]})),te.success(`${K.length} ${K.length===1?"file":"files"} uploaded successfully`)}catch{te.error("Failed to upload files. Please try again.")}finally{p(!1)}},q=Y=>{z(K=>({...K,attachment_urls:K.attachment_urls.filter((ae,se)=>se!==Y),attachment_names:K.attachment_names.filter((ae,se)=>se!==Y)}))},Z=async Y=>{if(Y.preventDefault(),!F.closing_date){te.error("Please select a closing date");return}if(!y){te.error("Please agree to the Terms and Conditions");return}r("submitting");try{if(d){const K=await X.functions.invoke("createJobPostingMember",{...F,memberEmail:a});if(K.data.success)te.success("Job posting submitted successfully!"),setTimeout(()=>{window.location.href=Pe("MyJobPostings")},500);else throw new Error(K.data.error||"Failed to create job posting")}else{const K=await X.functions.invoke("createJobPostingNonMember",{...F,contact_email:a});if(K.data.success){P(K.data.job_id);const ae=await X.functions.invoke("createJobPostingPaymentIntent",{amount:E,currency:"gbp",metadata:{job_posting_id:K.data.job_id,contact_email:a,company_name:F.company_name,job_title:F.title}});if(ae.data.success)O(ae.data.clientSecret),k(ae.data.paymentIntentId),T(!0),r("form");else throw new Error("Failed to initialize payment: "+(ae.data.error||"Unknown error"))}else throw new Error(K.data.error||"Failed to create job posting")}}catch(K){te.error(K.message||"Failed to submit job posting"),r("form")}},Q=async()=>{T(!1),te.success("Payment successful! Your job posting has been submitted for approval."),setTimeout(()=>{window.location.href=Pe("JobPostSuccess")},1500)};return!d&&n==="email"?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsxs(le,{className:"max-w-md w-full border-slate-200 shadow-xl",children:[e.jsxs(Fe,{children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4",children:e.jsx(En,{className:"w-6 h-6 text-blue-600"})}),e.jsx(Ue,{children:"Post a Job"}),e.jsx(Es,{children:"Enter your email to get started. AGCAS members can post for free!"})]}),e.jsx(ce,{children:e.jsxs("form",{onSubmit:$,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"email",children:"Email Address"}),e.jsx(he,{id:"email",type:"email",placeholder:"your.email@example.com",value:a,onChange:Y=>i(Y.target.value),required:!0})]}),e.jsx(J,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700",disabled:l,children:l?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Checking..."]}):e.jsxs(e.Fragment,{children:["Continue",e.jsx(zN,{className:"w-4 h-4 ml-2"})]})})]})})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:[e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs(le,{className:"border-slate-200 shadow-xl",children:[e.jsxs(Fe,{children:[e.jsx(Ue,{children:d?"Post a Job (Free for Members)":"Post a Job"}),e.jsx(Es,{children:d?"Fill in the details below to post your job listing":"Complete the form below. Payment will be processed after submission."})]}),e.jsx(ce,{children:e.jsxs("form",{onSubmit:Z,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"title",children:"Job Title *"}),e.jsx(he,{id:"title",placeholder:"e.g., Senior Careers Adviser",value:F.title,onChange:Y=>z({...F,title:Y.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"company_name",children:"Company/Organization *"}),e.jsx(he,{id:"company_name",placeholder:"e.g., University of Example",value:F.company_name,onChange:Y=>z({...F,company_name:Y.target.value}),disabled:d&&s,className:d&&s?"bg-slate-100 cursor-not-allowed":"",required:!0}),d&&s&&e.jsx("p",{className:"text-xs text-slate-500",children:"Your organization details are automatically filled from your member profile"})]}),e.jsxs("div",{className:"space-y-4 p-4 bg-slate-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 mb-1",children:"Company Logo"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Upload your company logo (max 5MB, images only)"})]}),F.company_logo_url?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white rounded-lg border border-slate-200",children:[e.jsx("div",{className:"w-24 h-24 flex-shrink-0 bg-slate-50 rounded-lg p-2 border border-slate-200",children:e.jsx("img",{src:F.company_logo_url,alt:"Company logo",className:"w-full h-full object-contain"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:"text-sm font-medium text-slate-900",children:"Logo uploaded successfully"})}),e.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:I,className:"text-red-600 hover:text-red-700 hover:bg-red-50 flex-shrink-0",children:e.jsx(_s,{className:"w-4 h-4"})})]}),e.jsxs(ee,{htmlFor:"logo-change",className:"cursor-pointer",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 px-4 py-2 border-2 border-dashed border-slate-300 rounded-md hover:border-blue-400 hover:bg-blue-50 transition-colors",children:[e.jsx(Gs,{className:"w-4 h-4 text-slate-600"}),e.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Change Logo"})]}),e.jsx("input",{id:"logo-change",type:"file",accept:"image/*",onChange:L,className:"hidden",disabled:g})]})]}):e.jsxs(ee,{htmlFor:"logo-upload",className:"cursor-pointer",children:[e.jsx("div",{className:"flex flex-col items-center justify-center gap-3 p-8 border-2 border-dashed border-slate-300 rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-colors",children:g?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-8 h-8 text-blue-600 animate-spin"}),e.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Uploading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(hi,{className:"w-8 h-8 text-slate-400"}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-sm font-medium text-slate-900 block",children:"Upload Company Logo"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Click to browse or drag and drop"})]})]})}),e.jsx("input",{id:"logo-upload",type:"file",accept:"image/*",onChange:L,className:"hidden",disabled:g})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"location",children:"City or Town *"}),e.jsx(he,{id:"location",placeholder:"e.g., London, UK or Remote",value:F.location,onChange:Y=>z({...F,location:Y.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"salary_range",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Salary Range (Optional - please state currency)"}),e.jsx(he,{id:"salary_range",placeholder:"e.g., 30,000 - 40,000",value:F.salary_range,onChange:Y=>z({...F,salary_range:Y.target.value})})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"job_type",children:"Job Type"}),e.jsxs(Ke,{value:F.job_type,onValueChange:Y=>z({...F,job_type:Y}),children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:"Select job type"})}),e.jsx(We,{children:V.map(Y=>e.jsx(re,{value:Y,children:Y},Y))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"hours",children:"Hours"}),e.jsxs(Ke,{value:F.hours,onValueChange:Y=>z({...F,hours:Y}),children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:"Select hours"})}),e.jsx(We,{children:U.map(Y=>e.jsx(re,{value:Y,children:Y},Y))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"closing_date",children:"Application Closing Date *"}),e.jsx(he,{id:"closing_date",type:"date",value:F.closing_date?F.closing_date.split("T")[0]:"",onChange:Y=>z({...F,closing_date:Y.target.value+"T23:59:59Z"}),min:new Date().toISOString().split("T")[0],required:!0}),e.jsx("p",{className:"text-xs text-slate-500",children:"When should applications close for this position?"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"description",children:"Job Description *"}),e.jsx(Gt,{id:"description",placeholder:"Describe the role, responsibilities, requirements, etc.",rows:10,value:F.description,onChange:Y=>z({...F,description:Y.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-4 p-4 bg-slate-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:"Additional Documents"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Upload job packs, PDFs, or Word documents (max 10MB each)"})]}),e.jsxs(ee,{htmlFor:"file-upload",className:"cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx(Gs,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Upload"})]}),e.jsx("input",{id:"file-upload",type:"file",multiple:!0,accept:".pdf,.doc,.docx,.xls,.xlsx",onChange:W,className:"hidden",disabled:h})]})]}),h&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(vt,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Uploading files..."})]}),F.attachment_urls.length>0&&e.jsx("div",{className:"space-y-2",children:F.attachment_names.map((Y,K)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-slate-700",children:Y})]}),e.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>q(K),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(_s,{className:"w-4 h-4"})})]},K))})]}),e.jsxs("div",{className:"space-y-4 p-4 bg-slate-50 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:"Application Method"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"How should candidates apply? *"}),e.jsxs(Ke,{value:F.application_method,onValueChange:Y=>z({...F,application_method:Y}),children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"email",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ms,{className:"w-4 h-4 mr-2"}),"Email Application"]})}),e.jsx(re,{value:"url",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Js,{className:"w-4 h-4 mr-2"}),"External Application URL"]})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"application_value",children:F.application_method==="email"?"Application Email *":"Application URL *"}),e.jsx(he,{id:"application_value",type:F.application_method==="email"?"email":"url",placeholder:F.application_method==="email"?"jobs@example.com":"https://example.com/apply",value:F.application_value,onChange:Y=>z({...F,application_value:Y.target.value}),required:!0})]})]}),!d&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"contact_name",children:"Your Name *"}),e.jsx(he,{id:"contact_name",placeholder:"Your full name",value:F.contact_name,onChange:Y=>z({...F,contact_name:Y.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(BK,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"font-semibold text-blue-900",children:"Terms and Conditions"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ba,{id:"terms",checked:y,onCheckedChange:j,className:"mt-1"}),e.jsx("div",{className:"flex-1",children:e.jsxs(ee,{htmlFor:"terms",className:"text-sm text-slate-700 cursor-pointer",children:["I agree to the"," ",e.jsx("button",{type:"button",onClick:()=>N(!0),className:"text-blue-600 hover:text-blue-700 underline font-medium",children:"Graduate Futures Job Advertising Terms and Conditions"})," ","*"]})})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx(J,{type:"button",variant:"outline",onClick:()=>window.location.href=Pe("JobBoard"),className:"flex-1",children:"Cancel"}),e.jsx(J,{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700",disabled:n==="submitting"||h||g||!y,children:n==="submitting"?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):d?"Submit for Approval":"Continue to Payment"})]}),!d&&e.jsx("p",{className:"text-xs text-slate-500 text-center",children:"You'll enter payment details in a secure modal window"})]})})]})}),e.jsx(Ct,{open:_,onOpenChange:T,children:e.jsxs(Nt,{className:"sm:max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs(kt,{children:[e.jsxs(Et,{className:"flex items-center gap-2",children:[e.jsx(fd,{className:"w-5 h-5 text-blue-600"}),"Enter Payment Details"]}),e.jsx(ya,{children:"Complete your job posting by entering your card information below."})]}),C&&Gw&&e.jsx(iS,{stripe:Gw,options:{clientSecret:C},children:e.jsx(Tfe,{clientSecret:C,onSuccess:Q,onCancel:()=>{T(!1),O(null),k(null),r("form"),te.info("Payment cancelled. You can complete payment later from My Job Postings.")},amount:E})})]})}),e.jsx(Ct,{open:w,onOpenChange:N,children:e.jsxs(Nt,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsx(kt,{children:e.jsx(Et,{className:"text-2xl",children:"Graduate Futures Job Advertising Terms and Conditions"})}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"text-sm text-slate-600 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Effective date:"})," January 2026"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Last reviewed:"})," January 2026"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"1. Introduction"}),e.jsxs("div",{className:"text-slate-700 space-y-2",children:[e.jsx("p",{children:'These Terms apply to all job advertisements placed on the Graduate Futures website ("Job Board").'}),e.jsx("p",{children:"By submitting a vacancy, you agree to these Terms and the Privacy Policy."})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"2. Eligibility and Content"}),e.jsxs("ul",{className:"list-disc list-inside text-slate-700 space-y-2 ml-2",children:[e.jsx("li",{children:"Graduate Futures will only publish job vacancies directly relevant to the higher education careers and employability sector."}),e.jsx("li",{children:"Graduate Futures reserves the right to edit or decline any advert that does not meet these criteria."}),e.jsx("li",{children:"The Client is responsible for ensuring that all job descriptions and information are true, accurate, and non-discriminatory."}),e.jsx("li",{children:"The Client agrees that all job advertisements submitted to the Graduate Futures Job Board comply with applicable UK employment legislation, including but not limited to the Equality Act 2010."}),e.jsx("li",{children:"All data submitted by the client must comply with the UK GDPR and Graduate Futures Privacy Policy."})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"3. Submission and Publication"}),e.jsxs("ul",{className:"list-disc list-inside text-slate-700 space-y-2 ml-2",children:[e.jsx("li",{children:"Job adverts can be submitted online via the GRADUATE FUTURES Job Board."}),e.jsx("li",{children:"Publication is subject to GRADUATE FUTURES approval and full payment (where applicable)."}),e.jsx("li",{children:"GRADUATE FUTURES aims to publish approved adverts within 24 hours."})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"4. Fees and Payment"}),e.jsxs("ul",{className:"list-disc list-inside text-slate-700 space-y-2 ml-2",children:[e.jsx("li",{children:"Non-member adverts are subject to the published rate (currently 515 + VAT)."}),e.jsx("li",{children:"Members may post vacancies in accordance with their membership benefits."}),e.jsx("li",{children:"Payment must be made by credit/debit card."}),e.jsx("li",{children:"All fees are payable in pounds sterling and exclusive of VAT."})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"5. Duration and Removal"}),e.jsxs("ul",{className:"list-disc list-inside text-slate-700 space-y-2 ml-2",children:[e.jsx("li",{children:"Adverts will remain live on the website until the specified closing date, unless otherwise agreed."}),e.jsx("li",{children:"Graduate Futures reserves the right to remove adverts early if they breach these Terms or upon the Client's written request."}),e.jsx("li",{children:"Fees are non-refundable once an advert has gone live."})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"6. Refunds"}),e.jsxs("div",{className:"text-slate-700 space-y-2",children:[e.jsx("p",{children:"Refunds may only be issued where an advert cannot be published due to Graduate Futures error or technical failure."}),e.jsxs("p",{children:["Requests should be made in writing to ",e.jsx("a",{href:"mailto:info@graduatefutures.org.uk",className:"text-blue-600 hover:underline",children:"info@graduatefutures.org.uk"}),"."]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"7. Liability"}),e.jsx("p",{className:"text-slate-700 mb-2",children:"Graduate Futures accepts no responsibility for:"}),e.jsxs("ul",{className:"list-disc list-inside text-slate-700 space-y-2 ml-2",children:[e.jsx("li",{children:"Errors in content supplied by the Client;"}),e.jsx("li",{children:"Failure of an advert to attract candidates; or"}),e.jsx("li",{children:"Any indirect or consequential loss."})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"8. Contact"}),e.jsx("p",{className:"text-slate-700",children:e.jsx("a",{href:"mailto:info@graduatefutures.org.uk",className:"text-blue-600 hover:underline",children:"info@graduatefutures.org.uk"})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"9. Right to amend"}),e.jsx("p",{className:"text-slate-700",children:"Graduate Futures reserves the right to amend these Terms at any time."})]})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx(J,{onClick:()=>{j(!0),N(!1)},className:"bg-blue-600 hover:bg-blue-700",children:"I Agree to Terms"}),e.jsx(J,{variant:"outline",onClick:()=>N(!1),children:"Close"})]})]})})]})}function Q8(){return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"max-w-md w-full border-slate-200 shadow-xl",children:e.jsxs(ce,{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Vf,{className:"w-8 h-8 text-green-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Payment Successful!"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"Thank you for your payment. Your job posting has been submitted and is pending approval. You'll receive an email confirmation shortly, and another email once your posting is approved and live on the job board."}),e.jsx(J,{onClick:()=>window.location.href=Pe("JobBoard"),className:"bg-blue-600 hover:bg-blue-700",children:"View Job Board"})]})})})}function J8({isAdmin:t,memberRole:s,isFeatureExcluded:n}){const[r,a]=b.useState("50"),[i,l]=b.useState(["Full-time","Part-time","Contract","Temporary","Internship"]),[o,c]=b.useState(["Full-time","Part-time","Flexible"]),[u,d]=b.useState(""),[m,h]=b.useState(""),p=Yt(),g=b.useMemo(()=>t&&!n("page_JobBoardSettings"),[t,n]);b.useEffect(()=>{s!=null&&(g||(window.location.href=Pe("Events")))},[s,g]);const{data:v}=me({queryKey:["job-board-price-settings"],queryFn:async()=>(await X.entities.SystemSettings.list()).find(k=>k.setting_key==="job_posting_price")}),{data:y}=me({queryKey:["job-type-settings"],queryFn:async()=>(await X.entities.SystemSettings.list()).find(k=>k.setting_key==="job_types")}),{data:j}=me({queryKey:["hours-settings"],queryFn:async()=>(await X.entities.SystemSettings.list()).find(k=>k.setting_key==="job_hours")});b.useEffect(()=>{if(v!=null&&v.setting_value&&a(v.setting_value),y!=null&&y.setting_value)try{const M=JSON.parse(y.setting_value);l(M)}catch(M){console.error("Failed to parse job types:",M)}if(j!=null&&j.setting_value)try{const M=JSON.parse(j.setting_value);c(M)}catch(M){console.error("Failed to parse hours:",M)}},[v,y,j]);const w=Le({mutationFn:async M=>v?await X.entities.SystemSettings.update(v.id,{setting_value:M}):await X.entities.SystemSettings.create({setting_key:"job_posting_price",setting_value:M,description:"Price in GBP for non-member job postings"}),onSuccess:()=>{p.invalidateQueries({queryKey:["job-board-price-settings"]}),te.success("Job posting price updated successfully")},onError:M=>{te.error("Failed to update price: "+M.message)}}),N=Le({mutationFn:async M=>{const k=JSON.stringify(M);return y?await X.entities.SystemSettings.update(y.id,{setting_value:k}):await X.entities.SystemSettings.create({setting_key:"job_types",setting_value:k,description:"Available job type options for job postings"})},onSuccess:()=>{p.invalidateQueries({queryKey:["job-type-settings"]}),te.success("Job types updated successfully")},onError:M=>{te.error("Failed to update job types: "+M.message)}}),_=Le({mutationFn:async M=>{const k=JSON.stringify(M);return j?await X.entities.SystemSettings.update(j.id,{setting_value:k}):await X.entities.SystemSettings.create({setting_key:"job_hours",setting_value:k,description:"Available hours options for job postings"})},onSuccess:()=>{p.invalidateQueries({queryKey:["hours-settings"]}),te.success("Hours options updated successfully")},onError:M=>{te.error("Failed to update hours options: "+M.message)}}),T=()=>{const M=parseFloat(r);if(isNaN(M)||M<0){te.error("Please enter a valid price");return}w.mutate(r)},A=()=>{if(!u.trim())return;if(i.includes(u.trim())){te.error("This job type already exists");return}const M=[...i,u.trim()];l(M),d(""),N.mutate(M)},P=M=>{const k=i.filter(E=>E!==M);l(k),N.mutate(k)},C=()=>{if(!m.trim())return;if(o.includes(m.trim())){te.error("This hours option already exists");return}const M=[...o,m.trim()];c(M),h(""),_.mutate(M)},O=M=>{const k=o.filter(E=>E!==M);c(k),_.mutate(k)};return s==null?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-slate-600",children:"Loading..."})}):g?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Job Board Settings"}),e.jsx("p",{className:"text-slate-600",children:"Configure pricing and dropdown options for the job board"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsxs(Fe,{children:[e.jsx(Ue,{className:"flex items-center gap-2",children:"Non-Member Job Posting Price"}),e.jsx(Es,{children:"Set the price in GBP that non-members must pay to post a job listing"})]}),e.jsxs(ce,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"price",children:"Price (GBP)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-lg font-semibold text-slate-400",children:""}),e.jsx(he,{id:"price",type:"number",step:"0.01",min:"0",value:r,onChange:M=>a(M.target.value),className:"pl-10",placeholder:"50.00"})]}),e.jsx("p",{className:"text-sm text-slate-500",children:"AGCAS members can always post jobs for free"})]}),e.jsxs(J,{onClick:T,disabled:w.isPending,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(un,{className:"w-4 h-4 mr-2"}),w.isPending?"Saving...":"Save Price"]})]})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsxs(Fe,{children:[e.jsxs(Ue,{className:"flex items-center gap-2",children:[e.jsx(Qa,{className:"w-5 h-5"}),"Job Type Options"]}),e.jsx(Es,{children:'Configure the available options for the "Job Type" dropdown'})]}),e.jsxs(ce,{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(he,{placeholder:"Add new job type...",value:u,onChange:M=>d(M.target.value),onKeyPress:M=>M.key==="Enter"&&A()}),e.jsx(J,{onClick:A,className:"bg-blue-600 hover:bg-blue-700",children:e.jsx(Pt,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"space-y-2",children:i.map(M=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[e.jsx("span",{className:"font-medium text-slate-700",children:M}),e.jsx(J,{variant:"ghost",size:"sm",onClick:()=>P(M),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(_s,{className:"w-4 h-4"})})]},M))})]})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsxs(Fe,{children:[e.jsxs(Ue,{className:"flex items-center gap-2",children:[e.jsx(Qa,{className:"w-5 h-5"}),"Hours Options"]}),e.jsx(Es,{children:'Configure the available options for the "Hours" dropdown'})]}),e.jsxs(ce,{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(he,{placeholder:"Add new hours option...",value:m,onChange:M=>h(M.target.value),onKeyPress:M=>M.key==="Enter"&&C()}),e.jsx(J,{onClick:C,className:"bg-blue-600 hover:bg-blue-700",children:e.jsx(Pt,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"space-y-2",children:o.map(M=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[e.jsx("span",{className:"font-medium text-slate-700",children:M}),e.jsx(J,{variant:"ghost",size:"sm",onClick:()=>O(M),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(_s,{className:"w-4 h-4"})})]},M))})]})]})]})]})}):null}function X8({isAdmin:t,memberRole:s,isFeatureExcluded:n}){const[r,a]=b.useState(""),[i,l]=b.useState(null),[o,c]=b.useState(!1),[u,d]=b.useState(!1),[m,h]=b.useState(null),[p,g]=b.useState("pending"),[v,y]=b.useState(!1),[j,w]=b.useState("all"),[N,_]=b.useState(1),[T,A]=b.useState(6),P=Yt(),C=b.useMemo(()=>t&&!n("page_JobPostingManagement"),[t,n]);b.useEffect(()=>{s!=null&&(C||(window.location.href=Pe("Events")))},[s,C]);const{data:O,isLoading:M}=me({queryKey:["admin-job-postings"],queryFn:()=>X.entities.JobPosting.list("-created_date"),initialData:[]}),{data:k}=me({queryKey:["organizations"],queryFn:()=>X.entities.Organization.list(),initialData:[]}),{data:E}=me({queryKey:["job-type-settings"],queryFn:async()=>{const pe=(await X.entities.SystemSettings.list()).find(je=>je.setting_key==="job_types");if(pe)try{return JSON.parse(pe.setting_value)}catch{return["Full-time","Part-time","Contract","Temporary","Internship"]}return["Full-time","Part-time","Contract","Temporary","Internship"]},initialData:[]}),{data:R}=me({queryKey:["hours-settings"],queryFn:async()=>{const pe=(await X.entities.SystemSettings.list()).find(je=>je.setting_key==="job_hours");if(pe)try{return JSON.parse(pe.setting_value)}catch{return["Full-time","Part-time","Flexible"]}return["Full-time","Part-time","Flexible"]},initialData:[]}),F=Le({mutationFn:oe=>X.entities.JobPosting.update(oe,{status:"active"}),onSuccess:()=>{P.invalidateQueries({queryKey:["admin-job-postings"]}),te.success("Job posting approved and is now live"),c(!1)},onError:oe=>{te.error("Failed to approve job posting: "+oe.message)}}),z=Le({mutationFn:oe=>X.entities.JobPosting.update(oe,{status:"rejected"}),onSuccess:()=>{P.invalidateQueries({queryKey:["admin-job-postings"]}),te.success("Job posting rejected"),c(!1)},onError:oe=>{te.error("Failed to reject job posting: "+oe.message)}}),V=Le({mutationFn:({id:oe,data:pe})=>X.entities.JobPosting.update(oe,pe),onSuccess:()=>{P.invalidateQueries({queryKey:["admin-job-postings"]}),te.success("Job posting updated successfully"),d(!1),h(null)},onError:oe=>{te.error("Failed to update job posting: "+oe.message)}}),U=Le({mutationFn:oe=>X.entities.JobPosting.delete(oe),onSuccess:()=>{P.invalidateQueries({queryKey:["admin-job-postings"]}),te.success("Job posting deleted"),c(!1)},onError:oe=>{te.error("Failed to delete job posting: "+oe.message)}}),B=oe=>{const pe={pending_approval:"bg-yellow-100 text-yellow-700",active:"bg-green-100 text-green-700",expired:"bg-slate-100 text-slate-700",rejected:"bg-red-100 text-red-700",pending_payment:"bg-blue-100 text-blue-700"};return e.jsx(ye,{className:pe[oe],children:oe.replace(/_/g," ")})},$=b.useMemo(()=>O.filter(oe=>{var qe,ze;const pe=!r||((qe=oe.title)==null?void 0:qe.toLowerCase().includes(r.toLowerCase()))||((ze=oe.company_name)==null?void 0:ze.toLowerCase().includes(r.toLowerCase())),je=p==="pending"&&oe.status==="pending_approval"||p==="active"&&oe.status==="active"||p==="rejected"&&oe.status==="rejected"||p==="all",we=j==="all"||j==="non-member"&&!oe.is_member_post||oe.posted_by_organization_id===j;return pe&&je&&we}),[O,r,p,j]),L=Math.ceil($.length/T),I=(N-1)*T,W=I+T,q=$.slice(I,W),Z=()=>{const oe=[];if(L<=5)for(let je=1;je<=L;je++)oe.push(je);else if(N<=3){for(let je=1;je<=4;je++)oe.push(je);L>5&&oe.push("..."),oe.push(L)}else if(N>=L-2){oe.push(1),L>5&&oe.push("...");for(let je=L-3;je<=L;je++)oe.push(je)}else{oe.push(1),oe.push("...");for(let je=N-1;je<=N+1;je++)oe.push(je);oe.push("..."),oe.push(L)}return oe};b.useEffect(()=>{_(1)},[r,p,j,T]);const Q=oe=>{_(oe),window.scrollTo({top:0,behavior:"smooth"})},Y=oe=>{h({...oe,attachment_urls:oe.attachment_urls||[],attachment_names:oe.attachment_names||[]}),d(!0)},K=async oe=>{const pe=Array.from(oe.target.files);if(pe.length===0)return;const je=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"];if(pe.filter(ze=>!je.includes(ze.type)).length>0){te.error("Only PDF, Word, and Excel documents are allowed");return}if(pe.filter(ze=>ze.size>10*1024*1024).length>0){te.error("Files must be smaller than 10MB");return}y(!0);try{const ze=pe.map(async Ce=>({url:(await X.integrations.Core.UploadFile({file:Ce})).file_url,name:Ce.name})),Ee=await Promise.all(ze);h(Ce=>({...Ce,attachment_urls:[...Ce.attachment_urls||[],...Ee.map(Ge=>Ge.url)],attachment_names:[...Ce.attachment_names||[],...Ee.map(Ge=>Ge.name)]})),te.success(`${pe.length} ${pe.length===1?"file":"files"} uploaded successfully`)}catch{te.error("Failed to upload files. Please try again.")}finally{y(!1)}},ae=oe=>{h(pe=>({...pe,attachment_urls:pe.attachment_urls.filter((je,we)=>we!==oe),attachment_names:pe.attachment_names.filter((je,we)=>we!==oe)}))},se=()=>{if(!m.title||!m.company_name||!m.closing_date){te.error("Please fill in all required fields");return}V.mutate({id:m.id,data:m})},de=oe=>{if(!oe)return!1;const pe=Vl(new Date(oe),new Date);return pe>=0&&pe<=7},ue=b.useMemo(()=>{const oe=[...new Set(O.filter(pe=>pe.posted_by_organization_id).map(pe=>pe.posted_by_organization_id))];return k.filter(pe=>oe.includes(pe.id))},[O,k]);return s==null?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-slate-600",children:"Loading..."})}):C?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Job Posting Management"}),e.jsx("p",{className:"text-slate-600",children:"Review and manage job postings on the board"})]}),e.jsx(le,{className:"border-slate-200 shadow-sm mb-6",children:e.jsx(ce,{className:"p-4",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx(he,{placeholder:"Search by job title or company...",value:r,onChange:oe=>a(oe.target.value),className:"pl-10"})]}),e.jsxs(Ke,{value:j,onValueChange:w,children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:"Filter by organization"})}),e.jsxs(We,{children:[e.jsx(re,{value:"all",children:"All Organizations"}),e.jsx(re,{value:"non-member",children:"Non-Member Posts"}),ue.map(oe=>e.jsx(re,{value:oe.id,children:oe.name},oe.id))]})]})]})})}),e.jsxs(ev,{value:p,onValueChange:g,children:[e.jsxs(sp,{className:"mb-6",children:[e.jsxs(fr,{value:"pending",children:["Pending (",O.filter(oe=>oe.status==="pending_approval").length,")"]}),e.jsxs(fr,{value:"active",children:["Active (",O.filter(oe=>oe.status==="active").length,")"]}),e.jsxs(fr,{value:"rejected",children:["Rejected (",O.filter(oe=>oe.status==="rejected").length,")"]}),e.jsx(fr,{value:"all",children:"All"})]}),e.jsx(Io,{value:p,children:M?e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Array(6).fill(0).map((oe,pe)=>e.jsx(le,{className:"animate-pulse border-slate-200",children:e.jsxs(ce,{className:"p-6",children:[e.jsx("div",{className:"h-6 bg-slate-200 rounded w-2/3 mb-4"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/3"})]})},pe))}):$.length===0?e.jsx(le,{className:"border-slate-200",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(En,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No Jobs Found"}),e.jsx("p",{className:"text-slate-600",children:"No job postings match your current filters"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 text-sm text-slate-600",children:["Showing ",I+1,"-",Math.min(W,$.length)," of ",$.length," job postings"]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:q.map(oe=>{var qe;const pe=oe.closing_date&&de(oe.closing_date),je=oe.closing_date?Vl(new Date(oe.closing_date),new Date):null,we=oe.attachment_urls&&oe.attachment_urls.length>0;return e.jsx(le,{className:`border-slate-200 hover:shadow-xl transition-all h-full ${pe?"border-l-4 border-l-amber-500":""}`,children:e.jsxs(ce,{className:"p-6",children:[pe&&e.jsxs("div",{className:"mb-4 -mx-6 -mt-6 px-6 py-2 bg-gradient-to-r from-amber-50 to-orange-50 border-b border-amber-200 flex items-center gap-2",children:[e.jsx(vs,{className:"w-4 h-4 text-amber-600"}),e.jsxs("span",{className:"text-sm font-medium text-amber-900",children:["Closing ",je===0?"today":`in ${je} ${je===1?"day":"days"}`]})]}),e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[oe.company_logo_url?e.jsx("div",{className:"w-16 h-16 flex-shrink-0 bg-slate-50 rounded-lg p-2 border border-slate-200",children:e.jsx("img",{src:oe.company_logo_url,alt:oe.company_name,className:"w-full h-full object-contain"})}):e.jsx("div",{className:"w-16 h-16 flex-shrink-0 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center",children:e.jsx(Na,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 line-clamp-2 mb-2",children:oe.title}),e.jsx("p",{className:"text-sm font-medium text-slate-700",children:oe.company_name})]}),e.jsx("div",{className:"flex flex-col gap-2",children:oe.featured&&e.jsx(U1,{className:"w-5 h-5 text-amber-500 fill-amber-500"})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[B(oe.status),oe.is_member_post?e.jsxs(ye,{className:"bg-purple-100 text-purple-700",children:["Member: ",oe.contact_email]}):e.jsx(ye,{className:"bg-slate-100 text-slate-700",children:"Non-Member"}),oe.payment_status==="paid"&&e.jsx(ye,{className:"bg-green-100 text-green-700",children:"Paid"}),oe.job_type&&e.jsx(ye,{className:"bg-blue-100 text-blue-700",children:oe.job_type}),oe.hours&&e.jsx(ye,{className:"bg-purple-100 text-purple-700",children:oe.hours}),we&&e.jsxs(ye,{className:"bg-slate-100 text-slate-700 flex items-center gap-1",children:[e.jsx(ns,{className:"w-3 h-3"}),oe.attachment_urls.length]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(Rr,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:oe.location})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(tn,{className:"w-4 h-4 flex-shrink-0"}),e.jsxs("span",{children:["Posted ",Mt(new Date(oe.created_date),"MMM d, yyyy")]})]}),oe.closing_date&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(tn,{className:"w-4 h-4 flex-shrink-0 text-slate-600"}),e.jsxs("span",{className:pe?"font-semibold text-amber-700":"text-slate-600",children:["Closes ",Mt(new Date(oe.closing_date),"MMM d, yyyy")]})]}),oe.salary_range&&e.jsxs("div",{className:"text-sm text-slate-600",children:[" ",oe.salary_range]})]}),e.jsxs("div",{className:"text-xs text-slate-500 mb-4 p-3 bg-slate-50 rounded",children:["Posted by ",oe.contact_name||"Unknown"," (",oe.contact_email,")"]}),e.jsxs("p",{className:"text-sm text-slate-600 line-clamp-2 leading-relaxed mb-4",children:[(qe=oe.description)==null?void 0:qe.substring(0,150),"..."]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t border-slate-200",children:[e.jsx(J,{variant:"outline",size:"sm",onClick:()=>{l(oe),c(!0)},className:"flex-1",children:"View Details"}),oe.status==="active"&&e.jsx(J,{variant:"outline",size:"sm",onClick:()=>Y(oe),className:"text-blue-600 hover:text-blue-700",children:e.jsx(As,{className:"w-4 h-4"})})]})]})},oe.id)})}),$.length>0&&e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsx(ce,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"Items per page:"}),e.jsxs(Ke,{value:T.toString(),onValueChange:oe=>{A(Number(oe)),_(1)},children:[e.jsx(Ve,{className:"w-20",children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"6",children:"6"}),e.jsx(re,{value:"12",children:"12"}),e.jsx(re,{value:"24",children:"24"}),e.jsx(re,{value:"48",children:"48"})]})]})]}),e.jsxs("div",{className:"text-sm text-slate-600",children:["Page ",N," of ",L]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(J,{variant:"outline",size:"sm",onClick:()=>Q(N-1),disabled:N===1,children:e.jsx(Wn,{className:"w-4 h-4"})}),Z().map((oe,pe)=>e.jsx(Be.Fragment,{children:oe==="..."?e.jsx("span",{className:"px-2 text-slate-400",children:"..."}):e.jsx(J,{variant:N===oe?"default":"outline",size:"sm",onClick:()=>Q(oe),className:N===oe?"bg-blue-600 hover:bg-blue-700":"",children:oe})},pe)),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>Q(N+1),disabled:N===L,children:e.jsx(js,{className:"w-4 h-4"})})]})]})})})]})})]}),e.jsx(Ct,{open:o,onOpenChange:c,children:e.jsxs(Nt,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsx(kt,{children:e.jsx(Et,{children:"Review Job Posting"})}),i&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:i.title}),e.jsx("p",{className:"text-slate-600 mb-4",children:i.company_name}),e.jsxs("div",{className:"flex gap-2 mb-4 flex-wrap",children:[B(i.status),i.is_member_post?e.jsxs(ye,{className:"bg-purple-100 text-purple-700",children:["Member: ",i.contact_email]}):e.jsx(ye,{className:"bg-slate-100 text-slate-700",children:"Non-Member Post"}),i.payment_status==="paid"&&e.jsx(ye,{className:"bg-green-100 text-green-700",children:"Paid"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 p-4 bg-slate-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"City or Town"}),e.jsx("p",{className:"font-medium",children:i.location})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Job Type"}),e.jsx("p",{className:"font-medium",children:i.job_type||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Hours"}),e.jsx("p",{className:"font-medium",children:i.hours||"Not specified"})]}),i.salary_range&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Salary"}),e.jsx("p",{className:"font-medium",children:i.salary_range})]}),i.closing_date&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Closing Date"}),e.jsx("p",{className:"font-medium",children:Mt(new Date(i.closing_date),"MMM d, yyyy")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Application Method"}),e.jsx("p",{className:"font-medium",children:i.application_method})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Application Contact"}),e.jsx("p",{className:"font-medium break-all",children:i.application_value})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Posted By"}),e.jsxs("p",{className:"font-medium",children:[i.contact_name," (",i.contact_email,")"]})]}),i.posted_by_organization_name&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Member Organization"}),e.jsx("p",{className:"font-medium",children:i.posted_by_organization_name})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:"Job Description"}),e.jsx("div",{className:"prose prose-slate max-w-none bg-slate-50 p-4 rounded-lg",children:e.jsx("div",{className:"whitespace-pre-wrap",children:i.description})})]}),i.attachment_urls&&i.attachment_urls.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-slate-900 mb-2 flex items-center gap-2",children:[e.jsx(ns,{className:"w-4 h-4"}),"Attached Documents (",i.attachment_urls.length,")"]}),e.jsx("div",{className:"space-y-2",children:i.attachment_names.map((oe,pe)=>e.jsxs("a",{href:i.attachment_urls[pe],target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors",children:[e.jsx(ns,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-slate-900",children:oe})]},pe))})]})]}),e.jsxs(zt,{children:[(i==null?void 0:i.status)==="pending_approval"&&e.jsxs(e.Fragment,{children:[e.jsxs(J,{variant:"outline",onClick:()=>z.mutate(i.id),disabled:z.isPending,className:"text-red-600 hover:text-red-700",children:[e.jsx(SK,{className:"w-4 h-4 mr-2"}),"Reject"]}),e.jsxs(J,{onClick:()=>F.mutate(i.id),disabled:F.isPending,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Vf,{className:"w-4 h-4 mr-2"}),"Approve & Publish"]})]}),(i==null?void 0:i.status)==="active"&&e.jsxs(e.Fragment,{children:[e.jsxs(J,{variant:"outline",onClick:()=>Y(i),className:"text-blue-600 hover:text-blue-700",children:[e.jsx(As,{className:"w-4 h-4 mr-2"}),"Edit"]}),e.jsxs(J,{variant:"outline",onClick:()=>{confirm("Are you sure you want to delete this job posting?")&&U.mutate(i.id)},disabled:U.isPending,className:"text-red-600 hover:text-red-700",children:[e.jsx(os,{className:"w-4 h-4 mr-2"}),"Delete"]})]}),e.jsx(J,{variant:"outline",onClick:()=>c(!1),children:"Close"})]})]})}),e.jsx(Ct,{open:u,onOpenChange:d,children:e.jsxs(Nt,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsx(kt,{children:e.jsx(Et,{children:"Edit Job Posting"})}),m&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"title",children:"Job Title *"}),e.jsx(he,{id:"title",value:m.title,onChange:oe=>h({...m,title:oe.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"company_name",children:"Company Name *"}),e.jsx(he,{id:"company_name",value:m.company_name,onChange:oe=>h({...m,company_name:oe.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"location",children:"Location *"}),e.jsx(he,{id:"location",value:m.location,onChange:oe=>h({...m,location:oe.target.value})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"job_type",children:"Job Type"}),e.jsxs("select",{id:"job_type",value:m.job_type||"",onChange:oe=>h({...m,job_type:oe.target.value}),className:"w-full h-10 px-3 rounded-md border border-slate-200",children:[e.jsx("option",{value:"",children:"Select..."}),E.map(oe=>e.jsx("option",{value:oe,children:oe},oe))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"hours",children:"Hours"}),e.jsxs("select",{id:"hours",value:m.hours||"",onChange:oe=>h({...m,hours:oe.target.value}),className:"w-full h-10 px-3 rounded-md border border-slate-200",children:[e.jsx("option",{value:"",children:"Select..."}),R.map(oe=>e.jsx("option",{value:oe,children:oe},oe))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"salary_range",children:"Salary Range"}),e.jsx(he,{id:"salary_range",value:m.salary_range||"",onChange:oe=>h({...m,salary_range:oe.target.value}),placeholder:"e.g., 30,000 - 40,000"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"closing_date",children:"Closing Date *"}),e.jsx(he,{id:"closing_date",type:"date",value:m.closing_date?m.closing_date.split("T")[0]:"",onChange:oe=>h({...m,closing_date:oe.target.value+"T23:59:59Z"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"company_logo_url",children:"Company Logo URL"}),e.jsx(he,{id:"company_logo_url",value:m.company_logo_url||"",onChange:oe=>h({...m,company_logo_url:oe.target.value}),placeholder:"https://..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"description",children:"Job Description *"}),e.jsx(Gt,{id:"description",value:m.description,onChange:oe=>h({...m,description:oe.target.value}),rows:10})]}),e.jsxs("div",{className:"space-y-4 p-4 bg-slate-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:"Additional Documents"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Upload or remove job-related documents"})]}),e.jsxs(ee,{htmlFor:"edit-file-upload",className:"cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx(Gs,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Upload"})]}),e.jsx("input",{id:"edit-file-upload",type:"file",multiple:!0,accept:".pdf,.doc,.docx,.xls,.xlsx",onChange:K,className:"hidden",disabled:v})]})]}),v&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(vt,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Uploading files..."})]}),m.attachment_urls&&m.attachment_urls.length>0&&e.jsx("div",{className:"space-y-2",children:m.attachment_names.map((oe,pe)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-slate-700",children:oe})]}),e.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>ae(pe),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(_s,{className:"w-4 h-4"})})]},pe))}),(!m.attachment_urls||m.attachment_urls.length===0)&&!v&&e.jsx("p",{className:"text-sm text-slate-500 text-center py-4",children:"No documents attached"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"featured",checked:m.featured||!1,onChange:oe=>h({...m,featured:oe.target.checked}),className:"rounded border-slate-300"}),e.jsx(ee,{htmlFor:"featured",children:"Featured Position"})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>{d(!1),h(null)},children:"Cancel"}),e.jsx(J,{onClick:se,disabled:V.isPending||v,className:"bg-blue-600 hover:bg-blue-700",children:V.isPending?"Saving...":"Save Changes"})]})]})})]})}):null}function Z8({memberInfo:t}){const[s,n]=b.useState(!1),[r,a]=b.useState(null),[i,l]=b.useState(!1),[o,c]=b.useState("all"),u=Yt(),{data:d,isLoading:m}=me({queryKey:["my-job-postings",t==null?void 0:t.email],queryFn:async()=>t!=null&&t.email?(await X.entities.JobPosting.filter({contact_email:t.email})).sort((C,O)=>new Date(O.created_date)-new Date(C.created_date)):[],enabled:!!(t!=null&&t.email),initialData:[]}),{data:h}=me({queryKey:["job-type-settings"],queryFn:async()=>{const C=(await X.entities.SystemSettings.list()).find(O=>O.setting_key==="job_types");if(C)try{return JSON.parse(C.setting_value)}catch{return["Full-time","Part-time","Contract","Temporary","Internship"]}return["Full-time","Part-time","Contract","Temporary","Internship"]},initialData:[]}),{data:p}=me({queryKey:["hours-settings"],queryFn:async()=>{const C=(await X.entities.SystemSettings.list()).find(O=>O.setting_key==="job_hours");if(C)try{return JSON.parse(C.setting_value)}catch{return["Full-time","Part-time","Flexible"]}return["Full-time","Part-time","Flexible"]},initialData:[]}),g=Le({mutationFn:({id:P,data:C})=>X.entities.JobPosting.update(P,C),onSuccess:()=>{u.invalidateQueries({queryKey:["my-job-postings"]}),te.success("Job posting updated successfully"),n(!1),a(null)},onError:P=>{te.error("Failed to update job posting: "+P.message)}}),v=P=>{const C={pending_approval:"bg-yellow-100 text-yellow-700",active:"bg-green-100 text-green-700",expired:"bg-slate-100 text-slate-700",rejected:"bg-red-100 text-red-700",pending_payment:"bg-blue-100 text-blue-700"},O={pending_approval:"Pending Approval",active:"Active",expired:"Expired",rejected:"Rejected",pending_payment:"Pending Payment"};return e.jsx(ye,{className:C[P],children:O[P]})},y=P=>{a({...P,attachment_urls:P.attachment_urls||[],attachment_names:P.attachment_names||[]}),n(!0)},j=async P=>{const C=Array.from(P.target.files);if(C.length===0)return;const O=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"];if(C.filter(E=>!O.includes(E.type)).length>0){te.error("Only PDF, Word, and Excel documents are allowed");return}if(C.filter(E=>E.size>10*1024*1024).length>0){te.error("Files must be smaller than 10MB");return}l(!0);try{const E=C.map(async F=>({url:(await X.integrations.Core.UploadFile({file:F})).file_url,name:F.name})),R=await Promise.all(E);a(F=>({...F,attachment_urls:[...F.attachment_urls||[],...R.map(z=>z.url)],attachment_names:[...F.attachment_names||[],...R.map(z=>z.name)]})),te.success(`${C.length} ${C.length===1?"file":"files"} uploaded successfully`)}catch{te.error("Failed to upload files. Please try again.")}finally{l(!1)}},w=P=>{a(C=>({...C,attachment_urls:C.attachment_urls.filter((O,M)=>M!==P),attachment_names:C.attachment_names.filter((O,M)=>M!==P)}))},N=()=>{if(!r.title||!r.company_name||!r.closing_date){te.error("Please fill in all required fields");return}g.mutate({id:r.id,data:r})},_=P=>{if(!P)return!1;const C=Vl(new Date(P),new Date);return C>=0&&C<=7},T=b.useMemo(()=>({pending:d.filter(P=>P.status==="pending_approval"),active:d.filter(P=>P.status==="active"),rejected:d.filter(P=>P.status==="rejected"),expired:d.filter(P=>P.status==="expired")}),[d]),A=b.useMemo(()=>o==="all"?d:T[o]||[],[d,T,o]);return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900",children:"My Job Postings"}),e.jsxs(J,{onClick:()=>window.location.href=Pe("PostJob"),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-5 h-5 mr-2"}),"Post New Job"]})]}),e.jsx("p",{className:"text-slate-600",children:"Manage your organization's job postings"})]}),e.jsxs("div",{className:"grid md:grid-cols-5 gap-4 mb-8",children:[e.jsx(le,{className:`border-slate-200 cursor-pointer transition-all hover:shadow-lg ${o==="pending"?"ring-2 ring-yellow-500 bg-yellow-50":""}`,onClick:()=>c("pending"),children:e.jsx(ce,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:T.pending.length})]}),e.jsx(tn,{className:"w-8 h-8 text-yellow-600"})]})})}),e.jsx(le,{className:`border-slate-200 cursor-pointer transition-all hover:shadow-lg ${o==="active"?"ring-2 ring-green-500 bg-green-50":""}`,onClick:()=>c("active"),children:e.jsx(ce,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:T.active.length})]}),e.jsx(En,{className:"w-8 h-8 text-green-600"})]})})}),e.jsx(le,{className:`border-slate-200 cursor-pointer transition-all hover:shadow-lg ${o==="rejected"?"ring-2 ring-red-500 bg-red-50":""}`,onClick:()=>c("rejected"),children:e.jsx(ce,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Rejected"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:T.rejected.length})]}),e.jsx(vs,{className:"w-8 h-8 text-red-600"})]})})}),e.jsx(le,{className:`border-slate-200 cursor-pointer transition-all hover:shadow-lg ${o==="expired"?"ring-2 ring-slate-500 bg-slate-50":""}`,onClick:()=>c("expired"),children:e.jsx(ce,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Expired"}),e.jsx("p",{className:"text-2xl font-bold text-slate-600",children:T.expired.length})]}),e.jsx(tn,{className:"w-8 h-8 text-slate-600"})]})})}),e.jsx(le,{className:`border-slate-200 cursor-pointer transition-all hover:shadow-lg ${o==="all"?"ring-2 ring-blue-500 bg-blue-50":""}`,onClick:()=>c("all"),children:e.jsx(ce,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"All Jobs"}),e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:d.length})]}),e.jsx(En,{className:"w-8 h-8 text-slate-900"})]})})})]}),m?e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Array(4).fill(0).map((P,C)=>e.jsx(le,{className:"animate-pulse border-slate-200",children:e.jsxs(ce,{className:"p-6",children:[e.jsx("div",{className:"h-6 bg-slate-200 rounded w-2/3 mb-4"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/3"})]})},C))}):d.length===0?e.jsx(le,{className:"border-slate-200",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(En,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No Job Postings Yet"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"You haven't posted any jobs yet. Get started by posting your first job!"}),e.jsxs(J,{onClick:()=>window.location.href=Pe("PostJob"),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-5 h-5 mr-2"}),"Post Your First Job"]})]})}):A.length===0?e.jsx(le,{className:"border-slate-200",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(En,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsxs("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:["No ",o==="pending"?"pending approval":o," job postings"]}),e.jsxs("p",{className:"text-slate-600",children:["There are no job postings in the ",o==="pending"?"pending approval":o," category."]})]})}):e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:A.map(P=>{var E;const C=P.closing_date&&_(P.closing_date),O=P.closing_date?Vl(new Date(P.closing_date),new Date):null,M=P.attachment_urls&&P.attachment_urls.length>0,k=P.status==="pending_approval"||P.status==="active";return e.jsx(le,{className:`border-slate-200 hover:shadow-xl transition-all h-full ${C&&P.status==="active"?"border-l-4 border-l-amber-500":""}`,children:e.jsxs(ce,{className:"p-6",children:[C&&P.status==="active"&&e.jsxs("div",{className:"mb-4 -mx-6 -mt-6 px-6 py-2 bg-gradient-to-r from-amber-50 to-orange-50 border-b border-amber-200 flex items-center gap-2",children:[e.jsx(vs,{className:"w-4 h-4 text-amber-600"}),e.jsxs("span",{className:"text-sm font-medium text-amber-900",children:["Closing ",O===0?"today":`in ${O} ${O===1?"day":"days"}`]})]}),e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[P.company_logo_url?e.jsx("div",{className:"w-16 h-16 flex-shrink-0 bg-slate-50 rounded-lg p-2 border border-slate-200",children:e.jsx("img",{src:P.company_logo_url,alt:P.company_name,className:"w-full h-full object-contain"})}):e.jsx("div",{className:"w-16 h-16 flex-shrink-0 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center",children:e.jsx(Na,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 line-clamp-2 mb-2",children:P.title}),e.jsx("p",{className:"text-sm font-medium text-slate-700",children:P.company_name})]}),P.featured&&e.jsx(U1,{className:"w-5 h-5 text-amber-500 fill-amber-500 flex-shrink-0"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[v(P.status),P.job_type&&e.jsx(ye,{className:"bg-blue-100 text-blue-700",children:P.job_type}),P.hours&&e.jsx(ye,{className:"bg-purple-100 text-purple-700",children:P.hours}),M&&e.jsxs(ye,{className:"bg-slate-100 text-slate-700 flex items-center gap-1",children:[e.jsx(ns,{className:"w-3 h-3"}),P.attachment_urls.length]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(Rr,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:P.location})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(tn,{className:"w-4 h-4 flex-shrink-0"}),e.jsxs("span",{children:["Posted ",Mt(new Date(P.created_date),"MMM d, yyyy")]})]}),P.closing_date&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(tn,{className:"w-4 h-4 flex-shrink-0 text-slate-600"}),e.jsxs("span",{className:C&&P.status==="active"?"font-semibold text-amber-700":"text-slate-600",children:["Closes ",Mt(new Date(P.closing_date),"MMM d, yyyy")]})]})]}),e.jsxs("p",{className:"text-sm text-slate-600 line-clamp-2 leading-relaxed mb-4",children:[(E=P.description)==null?void 0:E.substring(0,150),"..."]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t border-slate-200",children:[P.status==="active"&&e.jsx(J,{variant:"outline",size:"sm",onClick:()=>window.open(Pe(`JobDetails?id=${P.id}`),"_blank"),className:"flex-1 text-blue-600 hover:text-blue-700",children:"View Live"}),k&&e.jsxs(J,{variant:"outline",size:"sm",onClick:()=>y(P),className:`${P.status==="active"?"":"flex-1"} text-slate-600 hover:text-slate-700`,children:[e.jsx(As,{className:"w-4 h-4 mr-2"}),"Edit"]})]})]})},P.id)})}),e.jsx(Ct,{open:s,onOpenChange:n,children:e.jsxs(Nt,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsx(kt,{children:e.jsx(Et,{children:"Edit Job Posting"})}),r&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"title",children:"Job Title *"}),e.jsx(he,{id:"title",value:r.title,onChange:P=>a({...r,title:P.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"company_name",children:"Company Name *"}),e.jsx(he,{id:"company_name",value:r.company_name,onChange:P=>a({...r,company_name:P.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"location",children:"City or Town *"}),e.jsx(he,{id:"location",value:r.location,onChange:P=>a({...r,location:P.target.value})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"job_type",children:"Job Type"}),e.jsxs("select",{id:"job_type",value:r.job_type||"",onChange:P=>a({...r,job_type:P.target.value}),className:"w-full h-10 px-3 rounded-md border border-slate-200",children:[e.jsx("option",{value:"",children:"Select..."}),h.map(P=>e.jsx("option",{value:P,children:P},P))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"hours",children:"Hours"}),e.jsxs("select",{id:"hours",value:r.hours||"",onChange:P=>a({...r,hours:P.target.value}),className:"w-full h-10 px-3 rounded-md border border-slate-200",children:[e.jsx("option",{value:"",children:"Select..."}),p.map(P=>e.jsx("option",{value:P,children:P},P))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"salary_range",children:"Salary Range"}),e.jsx(he,{id:"salary_range",value:r.salary_range||"",onChange:P=>a({...r,salary_range:P.target.value}),placeholder:"e.g., 30,000 - 40,000"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"closing_date",children:"Closing Date *"}),e.jsx(he,{id:"closing_date",type:"date",value:r.closing_date?r.closing_date.split("T")[0]:"",onChange:P=>a({...r,closing_date:P.target.value+"T23:59:59Z"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"company_logo_url",children:"Company Logo URL"}),e.jsx(he,{id:"company_logo_url",value:r.company_logo_url||"",onChange:P=>a({...r,company_logo_url:P.target.value}),placeholder:"https://..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"description",children:"Job Description *"}),e.jsx(Gt,{id:"description",value:r.description,onChange:P=>a({...r,description:P.target.value}),rows:10})]}),e.jsxs("div",{className:"space-y-4 p-4 bg-slate-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:"Additional Documents"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Upload or remove job-related documents"})]}),e.jsxs(ee,{htmlFor:"edit-file-upload",className:"cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx(Gs,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Upload"})]}),e.jsx("input",{id:"edit-file-upload",type:"file",multiple:!0,accept:".pdf,.doc,.docx,.xls,.xlsx",onChange:j,className:"hidden",disabled:i})]})]}),i&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(vt,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Uploading files..."})]}),r.attachment_urls&&r.attachment_urls.length>0&&e.jsx("div",{className:"space-y-2",children:r.attachment_names.map((P,C)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-slate-700",children:P})]}),e.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>w(C),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(_s,{className:"w-4 h-4"})})]},C))}),(!r.attachment_urls||r.attachment_urls.length===0)&&!i&&e.jsx("p",{className:"text-sm text-slate-500 text-center py-4",children:"No documents attached"})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>{n(!1),a(null)},children:"Cancel"}),e.jsx(J,{onClick:N,disabled:g.isPending||i,className:"bg-blue-600 hover:bg-blue-700",children:g.isPending?"Saving...":"Save Changes"})]})]})})]})})}const GM=[{value:"Home",label:"Home Page"},{value:"JobBoard",label:"Job Board"},{value:"JobDetails",label:"Job Details"},{value:"PostJob",label:"Post Job"},{value:"PublicEvents",label:"Public Events"},{value:"PublicAbout",label:"About Us"},{value:"PublicContact",label:"Contact Us"},{value:"PublicResources",label:"Public Resources"}];function e7({isAdmin:t,memberRole:s,isFeatureExcluded:n}){const[r,a]=b.useState(!1),[i,l]=b.useState(null),[o,c]=b.useState(!1),[u,d]=b.useState(!1),[m,h]=b.useState(null),[p,g]=b.useState(null),v=Yt(),y=b.useMemo(()=>t&&!n("page_PageBannerManagement"),[t,n]);b.useEffect(()=>{s!=null&&(y||(window.location.href=Pe("Events")))},[s,y]);const{data:j,isLoading:w}=me({queryKey:["page-banners"],queryFn:()=>X.entities.PageBanner.list("-display_order"),initialData:[]}),N=Le({mutationFn:E=>X.entities.PageBanner.create(E),onSuccess:()=>{v.invalidateQueries({queryKey:["page-banners"]}),a(!1),l(null),te.success("Banner created successfully")},onError:E=>{te.error("Failed to create banner: "+E.message)}}),_=Le({mutationFn:({id:E,bannerData:R})=>X.entities.PageBanner.update(E,R),onSuccess:()=>{v.invalidateQueries({queryKey:["page-banners"]}),a(!1),l(null),te.success("Banner updated successfully")},onError:E=>{te.error("Failed to update banner: "+E.message)}}),T=Le({mutationFn:E=>X.entities.PageBanner.delete(E),onSuccess:()=>{v.invalidateQueries({queryKey:["page-banners"]}),d(!1),h(null),te.success("Banner deleted successfully")},onError:E=>{te.error("Failed to delete banner: "+E.message)}}),A=()=>{l({name:"",image_url:"",alt_text:"",size:"full-width",height:"medium",position:"center",associated_pages:[],display_order:0,is_active:!0}),a(!0)},P=E=>{l({...E}),a(!0)},C=E=>{h(E),d(!0)},O=async E=>{const R=E.target.files[0];if(!R)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(R.type)){te.error("Only image files (JPEG, PNG, GIF, WebP) are allowed");return}if(R.size>5*1024*1024){te.error("Image must be smaller than 5MB");return}c(!0);try{const z=await X.integrations.Core.UploadFile({file:R});l(V=>({...V,image_url:z.file_url})),te.success("Image uploaded successfully")}catch(z){te.error("Failed to upload image: "+z.message)}finally{c(!1)}},M=()=>{if(!i.name.trim()){te.error("Banner name is required");return}if(!i.image_url){te.error("Please upload an image");return}if(i.associated_pages.length===0){te.error("Please select at least one page");return}i.id?_.mutate({id:i.id,bannerData:i}):N.mutate(i)},k=E=>{const R=i.associated_pages||[],F=R.includes(E)?R.filter(z=>z!==E):[...R,E];l({...i,associated_pages:F})};return s==null?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-slate-600",children:"Loading..."})}):y?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Page Banner Management"}),e.jsx("p",{className:"text-slate-600",children:"Create and manage hero banners for public pages"})]}),e.jsxs(J,{onClick:A,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Create Banner"]})]}),w?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(vt,{className:"w-8 h-8 animate-spin text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading banners..."})]}):j.length===0?e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(hi,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No Banners Yet"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"Create your first banner to enhance your public pages"}),e.jsxs(J,{onClick:A,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Create First Banner"]})]})}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(E=>e.jsxs(le,{className:"border-slate-200 shadow-sm hover:shadow-md transition-shadow",children:[e.jsx(Fe,{className:"p-0",children:e.jsxs("div",{className:"relative h-40 bg-slate-100 rounded-t-lg overflow-hidden",children:[e.jsx("img",{src:E.image_url,alt:E.alt_text||E.name,className:"w-full h-full object-cover"}),!E.is_active&&e.jsx("div",{className:"absolute inset-0 bg-slate-900/50 flex items-center justify-center",children:e.jsx(ye,{className:"bg-slate-700 text-white",children:"Inactive"})})]})}),e.jsxs(ce,{className:"pt-4",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"font-semibold text-slate-900 mb-1",children:E.name}),e.jsxs("div",{className:"flex gap-2 flex-wrap mt-2",children:[e.jsx(ye,{variant:"outline",className:"text-xs",children:E.size}),e.jsx(ye,{variant:"outline",className:"text-xs",children:E.height}),E.is_active&&e.jsx(ye,{className:"bg-green-100 text-green-700 text-xs",children:"Active"})]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsx("div",{className:"text-xs font-medium text-slate-500 uppercase",children:"Appears On"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[E.associated_pages&&E.associated_pages.length>0?E.associated_pages.slice(0,3).map(R=>{var F;return e.jsx(ye,{className:"bg-blue-100 text-blue-700 text-xs",children:((F=GM.find(z=>z.value===R))==null?void 0:F.label)||R},R)}):e.jsx("span",{className:"text-xs text-slate-500",children:"No pages selected"}),E.associated_pages&&E.associated_pages.length>3&&e.jsxs(ye,{className:"bg-slate-100 text-slate-700 text-xs",children:["+",E.associated_pages.length-3," more"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(J,{variant:"outline",size:"sm",onClick:()=>g(E),className:"flex-1",children:[e.jsx(gr,{className:"w-3 h-3 mr-1"}),"Preview"]}),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>P(E),children:e.jsx(As,{className:"w-3 h-3"})}),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>C(E),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(os,{className:"w-3 h-3"})})]})]})]},E.id))}),e.jsx(Ct,{open:r,onOpenChange:a,children:e.jsxs(Nt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(kt,{children:e.jsx(Et,{children:i!=null&&i.id?"Edit Banner":"Create New Banner"})}),i&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"banner-name",children:"Banner Name *"}),e.jsx(he,{id:"banner-name",value:i.name,onChange:E=>l({...i,name:E.target.value}),placeholder:"e.g., Homepage Hero Banner"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"alt-text",children:"Alternative Text"}),e.jsx(he,{id:"alt-text",value:i.alt_text||"",onChange:E=>l({...i,alt_text:E.target.value}),placeholder:"Describe the image for accessibility"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Used for screen readers and SEO"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Banner Image *"}),i.image_url?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"relative h-40 bg-slate-100 rounded-lg overflow-hidden border border-slate-200",children:e.jsx("img",{src:i.image_url,alt:"Preview",className:"w-full h-full object-cover"})}),e.jsxs(ee,{htmlFor:"change-image",className:"cursor-pointer",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 px-4 py-2 border-2 border-dashed border-slate-300 rounded-md hover:border-blue-400 hover:bg-blue-50 transition-colors",children:[e.jsx(Gs,{className:"w-4 h-4 text-slate-600"}),e.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Change Image"})]}),e.jsx("input",{id:"change-image",type:"file",accept:"image/*",onChange:O,className:"hidden",disabled:o})]})]}):e.jsxs(ee,{htmlFor:"image-upload",className:"cursor-pointer",children:[e.jsx("div",{className:"flex flex-col items-center justify-center gap-3 p-8 border-2 border-dashed border-slate-300 rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-colors",children:o?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-8 h-8 text-blue-600 animate-spin"}),e.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Uploading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(hi,{className:"w-8 h-8 text-slate-400"}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-sm font-medium text-slate-900 block",children:"Upload Banner Image"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Click to browse (max 5MB)"})]})]})}),e.jsx("input",{id:"image-upload",type:"file",accept:"image/*",onChange:O,className:"hidden",disabled:o})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"size",children:"Banner Width"}),e.jsxs(Ke,{value:i.size,onValueChange:E=>l({...i,size:E}),children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"full-width",children:"Full Width"}),e.jsx(re,{value:"contained",children:"Contained"}),e.jsx(re,{value:"wide",children:"Wide"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"height",children:"Banner Height"}),e.jsxs(Ke,{value:i.height,onValueChange:E=>l({...i,height:E}),children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"small",children:"Small"}),e.jsx(re,{value:"medium",children:"Medium"}),e.jsx(re,{value:"large",children:"Large"}),e.jsx(re,{value:"auto",children:"Auto"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"position",children:"Image Position"}),e.jsxs(Ke,{value:i.position,onValueChange:E=>l({...i,position:E}),children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"top",children:"Top"}),e.jsx(re,{value:"center",children:"Center"}),e.jsx(re,{value:"bottom",children:"Bottom"})]})]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Vertical positioning of the image within the banner container"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"display-order",children:"Display Order"}),e.jsx(he,{id:"display-order",type:"number",value:i.display_order,onChange:E=>l({...i,display_order:parseInt(E.target.value)||0})}),e.jsx("p",{className:"text-xs text-slate-500",children:"Lower numbers appear first if multiple banners on same page"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ee,{children:"Show Banner On (Select Pages) *"}),e.jsx("div",{className:"border border-slate-200 rounded-lg p-4 space-y-2 max-h-60 overflow-y-auto",children:GM.map(E=>e.jsxs("div",{className:"flex items-center gap-3 p-2 hover:bg-slate-50 rounded transition-colors",children:[e.jsx(cs,{id:`page-${E.value}`,checked:(i.associated_pages||[]).includes(E.value),onCheckedChange:()=>k(E.value)}),e.jsx(ee,{htmlFor:`page-${E.value}`,className:"flex-1 cursor-pointer",children:E.label})]},E.value))})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-slate-50 rounded-lg",children:[e.jsx(cs,{id:"is-active",checked:i.is_active,onCheckedChange:E=>l({...i,is_active:E})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ee,{htmlFor:"is-active",className:"cursor-pointer",children:"Active"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Inactive banners won't be displayed on any pages"})]})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>{a(!1),l(null)},children:"Cancel"}),e.jsx(J,{onClick:M,disabled:N.isPending||_.isPending||o,className:"bg-blue-600 hover:bg-blue-700",children:i!=null&&i.id?"Update Banner":"Create Banner"})]})]})}),e.jsx(Ct,{open:!!p,onOpenChange:()=>g(null),children:e.jsxs(Nt,{className:"max-w-5xl",children:[e.jsx(kt,{children:e.jsxs(Et,{children:["Banner Preview: ",p==null?void 0:p.name]})}),p&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:e.jsx("img",{src:p.image_url,alt:p.alt_text||p.name,className:"w-full h-auto"})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-slate-700",children:"Width:"}),e.jsx("span",{className:"ml-2 text-slate-600",children:p.size})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-slate-700",children:"Height:"}),e.jsx("span",{className:"ml-2 text-slate-600",children:p.height})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-slate-700",children:"Position:"}),e.jsx("span",{className:"ml-2 text-slate-600",children:p.position})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-slate-700",children:"Status:"}),e.jsx("span",{className:"ml-2 text-slate-600",children:p.is_active?"Active":"Inactive"})]})]})]})]})}),e.jsx(Ct,{open:u,onOpenChange:d,children:e.jsxs(Nt,{children:[e.jsx(kt,{children:e.jsx(Et,{children:"Delete Banner"})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-50 rounded-lg",children:[e.jsx(vs,{className:"w-5 h-5 text-red-600 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-red-900 font-medium",children:['Are you sure you want to delete "',m==null?void 0:m.name,'"?']}),e.jsx("p",{className:"text-xs text-red-700 mt-1",children:"This banner will be removed from all associated pages."})]})]})}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>{d(!1),h(null)},children:"Cancel"}),e.jsx(J,{onClick:()=>m&&T.mutate(m.id),disabled:T.isPending,className:"bg-red-600 hover:bg-red-700",children:"Delete Banner"})]})]})})]})}):null}function t7({isAdmin:t}){const[s,n]=b.useState(""),[r,a]=b.useState(!1),[i,l]=b.useState(!1),[o,c]=b.useState(null),[u,d]=b.useState({title:"",slug:"",description:"",layout_type:"public",status:"draft"}),m=M1(),h=Yt(),{data:p,isLoading:g}=me({queryKey:["iedit-pages"],queryFn:()=>X.entities.IEditPage.list("-updated_date"),initialData:[]}),v=Le({mutationFn:P=>X.entities.IEditPage.create(P),onSuccess:P=>{h.invalidateQueries({queryKey:["iedit-pages"]}),a(!1),d({title:"",slug:"",description:"",layout_type:"public",status:"draft"}),te.success("Page created successfully"),m(Pe("IEditPageEditor")+`?pageId=${P.id}`)},onError:P=>{te.error("Failed to create page: "+P.message)}}),y=Le({mutationFn:async P=>{const C=await X.entities.IEditPageElement.filter({page_id:P});for(const O of C)await X.entities.IEditPageElement.delete(O.id);await X.entities.IEditPage.delete(P)},onSuccess:()=>{h.invalidateQueries({queryKey:["iedit-pages"]}),l(!1),c(null),te.success("Page deleted successfully")},onError:P=>{te.error("Failed to delete page: "+P.message)}}),j=Le({mutationFn:async P=>{await X.integrations.Core.SendEmail({to:"developers@isaasi.co.uk",subject:`Top-Level URL Request: /${P.slug}`,body:`
A request has been made to convert the following page to a top-level URL:

Page Title: ${P.title}
Slug: ${P.slug}
Layout Type: ${P.layout_type}
Status: ${P.status}
Page ID: ${P.id}

Current URL: ${window.location.origin}${Pe("content")}?page=${P.slug}
Requested URL: ${window.location.origin}/${P.slug}

Please create a physical page file for this slug to enable top-level routing.
        `})},onSuccess:()=>{te.success("Request sent to developers")},onError:P=>{te.error("Failed to send request: "+P.message)}}),w=()=>{if(!u.title.trim()||!u.slug.trim()){te.error("Title and slug are required");return}if(!/^[a-z0-9-]+$/.test(u.slug)){te.error("Slug must be lowercase with hyphens only (no spaces or special characters)");return}v.mutate(u)},N=()=>{o&&y.mutate(o.id)},_=p.filter(P=>{var C,O,M;return((C=P.title)==null?void 0:C.toLowerCase().includes(s.toLowerCase()))||((O=P.slug)==null?void 0:O.toLowerCase().includes(s.toLowerCase()))||((M=P.description)==null?void 0:M.toLowerCase().includes(s.toLowerCase()))}),T=P=>{const C={draft:"bg-slate-100 text-slate-700",published:"bg-green-100 text-green-700",archived:"bg-amber-100 text-amber-700"};return C[P]||C.draft},A=P=>Pe("content")+`?page=${P}`;return t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Page Editor"}),e.jsx("p",{className:"text-slate-600",children:"Create and manage custom pages with drag-and-drop elements"})]}),e.jsxs(J,{onClick:()=>a(!0),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"New Page"]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 mb-8",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx(he,{placeholder:"Search pages by title, slug, or description...",value:s,onChange:P=>n(P.target.value),className:"pl-10"})]})}),g?e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array(6).fill(0).map((P,C)=>e.jsx(le,{className:"animate-pulse border-slate-200",children:e.jsxs(Fe,{children:[e.jsx("div",{className:"h-6 bg-slate-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded w-full"})]})},C))}):_.length===0?e.jsx(le,{className:"border-slate-200",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(Wf,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:s?"No Pages Found":"No Pages Yet"}),e.jsx("p",{className:"text-slate-600 mb-6",children:s?"Try adjusting your search query":"Create your first custom page to get started"}),!s&&e.jsxs(J,{onClick:()=>a(!0),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Create First Page"]})]})}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(P=>e.jsxs(le,{className:"border-slate-200 hover:shadow-lg transition-shadow",children:[e.jsxs(Fe,{children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx(Ue,{className:"text-lg",children:P.title}),e.jsx(ye,{className:T(P.status),children:P.status})]}),P.description&&e.jsx("p",{className:"text-sm text-slate-600 line-clamp-2",children:P.description})]}),e.jsxs(ce,{className:"space-y-4",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-slate-500",children:"Slug:"}),e.jsxs("span",{className:"ml-2 font-mono text-slate-700",children:["/",P.slug]})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-slate-500",children:"Layout:"}),e.jsx("span",{className:"ml-2 text-slate-700 capitalize",children:P.layout_type})]}),P.updated_date&&e.jsxs("div",{className:"text-xs text-slate-500",children:["Updated ",Mt(new Date(P.updated_date),"MMM d, yyyy")]}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t border-slate-200",children:[e.jsxs(J,{variant:"outline",size:"sm",onClick:()=>m(Pe("IEditPageEditor")+`?pageId=${P.id}`),className:"flex-1",children:[e.jsx(As,{className:"w-3 h-3 mr-1"}),"Edit"]}),P.status==="published"&&e.jsx(J,{variant:"outline",size:"sm",onClick:()=>window.open(A(P.slug),"_blank"),title:"View Published Page",children:e.jsx(Js,{className:"w-3 h-3"})}),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>{c(P),l(!0)},className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(os,{className:"w-3 h-3"})})]}),e.jsxs(J,{variant:"outline",size:"sm",onClick:()=>j.mutate(P),disabled:j.isPending,className:"w-full text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:[e.jsx(VN,{className:"w-3 h-3 mr-1"}),"Request Top-Level URL (/",P.slug,")"]})]})]},P.id))}),e.jsx(Ct,{open:r,onOpenChange:a,children:e.jsxs(Nt,{className:"max-w-md",children:[e.jsx(kt,{children:e.jsx(Et,{children:"Create New Page"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"title",children:"Page Title *"}),e.jsx(he,{id:"title",value:u.title,onChange:P=>{const C=P.target.value;d({...u,title:C,slug:u.slug===""?C.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,""):u.slug})},placeholder:"e.g., About Our Organization"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"slug",children:"URL Slug *"}),e.jsx(he,{id:"slug",value:u.slug,onChange:P=>d({...u,slug:P.target.value.toLowerCase()}),placeholder:"e.g., about-our-organization"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Lowercase letters, numbers, and hyphens only"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(Gt,{id:"description",value:u.description,onChange:P=>d({...u,description:P.target.value}),placeholder:"Brief description for admin reference...",rows:3})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"layout_type",children:"Layout Type"}),e.jsxs(Ke,{value:u.layout_type,onValueChange:P=>d({...u,layout_type:P}),children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"public",children:"Public (With header/footer)"}),e.jsx(re,{value:"member",children:"Member Portal (With sidebar)"})]})]})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e.jsx(J,{onClick:w,disabled:v.isPending,className:"bg-blue-600 hover:bg-blue-700",children:"Create & Edit"})]})]})}),e.jsx(Ct,{open:i,onOpenChange:l,children:e.jsxs(Nt,{className:"max-w-md",children:[e.jsx(kt,{children:e.jsx(Et,{children:"Delete Page"})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("p",{className:"text-slate-600",children:["Are you sure you want to delete ",e.jsx("strong",{children:o==null?void 0:o.title}),"? This will also delete all elements on this page. This action cannot be undone."]})}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(J,{onClick:N,disabled:y.isPending,className:"bg-red-600 hover:bg-red-700",children:"Delete Page"})]})]})})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"max-w-md",children:e.jsx(ce,{className:"p-12 text-center",children:e.jsx("p",{className:"text-slate-600",children:"You don't have permission to access this page."})})})})}function s7({isAdmin:t}){var N;const[s,n]=b.useState(!1),[r,a]=b.useState(null),[i,l]=b.useState(!1),[o,c]=b.useState(null),u=Yt(),{data:d,isLoading:m}=me({queryKey:["iedit-templates"],queryFn:()=>X.entities.IEditElementTemplate.list("display_order"),initialData:[]}),h=Le({mutationFn:_=>X.entities.IEditElementTemplate.create(_),onSuccess:()=>{u.invalidateQueries({queryKey:["iedit-templates"]}),n(!1),a(null),te.success("Template created successfully")},onError:_=>{te.error("Failed to create template: "+_.message)}}),p=Le({mutationFn:({id:_,templateData:T})=>X.entities.IEditElementTemplate.update(_,T),onSuccess:()=>{u.invalidateQueries({queryKey:["iedit-templates"]}),n(!1),a(null),te.success("Template updated successfully")},onError:_=>{te.error("Failed to update template: "+_.message)}}),g=Le({mutationFn:_=>X.entities.IEditElementTemplate.delete(_),onSuccess:()=>{u.invalidateQueries({queryKey:["iedit-templates"]}),l(!1),c(null),te.success("Template deleted successfully")},onError:_=>{te.error("Failed to delete template: "+_.message)}}),v=()=>{a({name:"",element_type:"",description:"",icon:"Square",category:"content",default_content:{},available_variants:["default"],content_schema:{},is_active:!0,display_order:d.length}),n(!0)},y=_=>{a({..._}),n(!0)},j=()=>{if(!r.name.trim()||!r.element_type.trim()){te.error("Name and element type are required");return}r.id?p.mutate({id:r.id,templateData:r}):h.mutate(r)},w=_=>{const T={layout:"bg-purple-100 text-purple-700",content:"bg-blue-100 text-blue-700",media:"bg-green-100 text-green-700",interactive:"bg-amber-100 text-amber-700"};return T[_]||T.content};return t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Element Templates"}),e.jsx("p",{className:"text-slate-600",children:"Manage reusable element templates for the page editor"})]}),e.jsxs(J,{onClick:v,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"New Template"]})]}),m?e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array(6).fill(0).map((_,T)=>e.jsx(le,{className:"animate-pulse border-slate-200",children:e.jsxs(Fe,{children:[e.jsx("div",{className:"h-6 bg-slate-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded w-full"})]})},T))}):d.length===0?e.jsx(le,{className:"border-slate-200",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(iG,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No Templates Yet"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"Create your first element template to start building custom pages"}),e.jsxs(J,{onClick:v,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Create First Template"]})]})}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(_=>{var T;return e.jsxs(le,{className:"border-slate-200 hover:shadow-lg transition-shadow",children:[e.jsxs(Fe,{children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx(Ue,{className:"text-lg",children:_.name}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ye,{className:w(_.category),children:_.category}),!_.is_active&&e.jsx(ye,{className:"bg-slate-100 text-slate-700",children:"Inactive"})]})]}),_.description&&e.jsx("p",{className:"text-sm text-slate-600 line-clamp-2",children:_.description})]}),e.jsxs(ce,{className:"space-y-4",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-slate-500",children:"Type:"}),e.jsx("span",{className:"ml-2 font-mono text-slate-700",children:_.element_type})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-slate-500",children:"Variants:"}),e.jsx("span",{className:"ml-2 text-slate-700",children:((T=_.available_variants)==null?void 0:T.join(", "))||"default"})]}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t border-slate-200",children:[e.jsxs(J,{variant:"outline",size:"sm",onClick:()=>y(_),className:"flex-1",children:[e.jsx(As,{className:"w-3 h-3 mr-1"}),"Edit"]}),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>{c(_),l(!0)},className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(os,{className:"w-3 h-3"})})]})]})]},_.id)})}),e.jsx(Ct,{open:s,onOpenChange:n,children:e.jsxs(Nt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(kt,{children:e.jsx(Et,{children:r!=null&&r.id?"Edit Template":"Create New Template"})}),r&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"name",children:"Template Name *"}),e.jsx(he,{id:"name",value:r.name,onChange:_=>a({...r,name:_.target.value}),placeholder:"e.g., Hero Banner"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"element_type",children:"Element Type *"}),e.jsx(he,{id:"element_type",value:r.element_type,onChange:_=>a({...r,element_type:_.target.value}),placeholder:"e.g., hero_banner (lowercase, underscores)"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Unique identifier for this element type"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"description",children:"Description"}),e.jsx(Gt,{id:"description",value:r.description||"",onChange:_=>a({...r,description:_.target.value}),placeholder:"What does this element do?",rows:2})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"icon",children:"Icon Name"}),e.jsx(he,{id:"icon",value:r.icon||"Square",onChange:_=>a({...r,icon:_.target.value}),placeholder:"Lucide icon name"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"category",children:"Category"}),e.jsxs(Ke,{value:r.category,onValueChange:_=>a({...r,category:_}),children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"layout",children:"Layout"}),e.jsx(re,{value:"content",children:"Content"}),e.jsx(re,{value:"media",children:"Media"}),e.jsx(re,{value:"interactive",children:"Interactive"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"variants",children:"Available Variants (comma-separated)"}),e.jsx(he,{id:"variants",value:((N=r.available_variants)==null?void 0:N.join(", "))||"default",onChange:_=>a({...r,available_variants:_.target.value.split(",").map(T=>T.trim()).filter(Boolean)}),placeholder:"default, dark, accent"})]}),e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-50 rounded-lg",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:r.is_active,onChange:_=>a({...r,is_active:_.target.checked}),className:"w-4 h-4"}),e.jsx(ee,{htmlFor:"is_active",className:"cursor-pointer",children:"Active (available in element palette)"})]}),e.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-amber-900",children:[e.jsx("strong",{children:"Note:"})," After creating a template, you'll need to implement the corresponding React component in ",e.jsx("code",{className:"bg-white px-1 rounded",children:"components/iedit/elements/"})," to render this element type."]})})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsxs(J,{onClick:j,disabled:h.isPending||p.isPending,className:"bg-blue-600 hover:bg-blue-700",children:[r!=null&&r.id?"Update":"Create"," Template"]})]})]})}),e.jsx(Ct,{open:i,onOpenChange:l,children:e.jsxs(Nt,{className:"max-w-md",children:[e.jsx(kt,{children:e.jsx(Et,{children:"Delete Template"})}),e.jsxs("p",{className:"text-slate-600",children:["Are you sure you want to delete ",e.jsx("strong",{children:o==null?void 0:o.name}),"? This action cannot be undone."]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(J,{onClick:()=>o&&g.mutate(o.id),disabled:g.isPending,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"max-w-md",children:e.jsx(ce,{className:"p-12 text-center",children:e.jsx("p",{className:"text-slate-600",children:"You don't have permission to access this page."})})})})}function Er(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Afe=typeof Symbol=="function"&&Symbol.observable||"@@observable",YM=Afe,QM=()=>Math.random().toString(36).substring(7).split("").join("."),Mfe={INIT:`@@redux/INIT${QM()}`,REPLACE:`@@redux/REPLACE${QM()}`},JM=Mfe;function Dfe(t){if(typeof t!="object"||t===null)return!1;let s=t;for(;Object.getPrototypeOf(s)!==null;)s=Object.getPrototypeOf(s);return Object.getPrototypeOf(t)===s||Object.getPrototypeOf(t)===null}function n7(t,s,n){if(typeof t!="function")throw new Error(Er(2));if(typeof s=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Er(0));if(typeof s=="function"&&typeof n>"u"&&(n=s,s=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Er(1));return n(n7)(t,s)}let r=t,a=s,i=new Map,l=i,o=0,c=!1;function u(){l===i&&(l=new Map,i.forEach((y,j)=>{l.set(j,y)}))}function d(){if(c)throw new Error(Er(3));return a}function m(y){if(typeof y!="function")throw new Error(Er(4));if(c)throw new Error(Er(5));let j=!0;u();const w=o++;return l.set(w,y),function(){if(j){if(c)throw new Error(Er(6));j=!1,u(),l.delete(w),i=null}}}function h(y){if(!Dfe(y))throw new Error(Er(7));if(typeof y.type>"u")throw new Error(Er(8));if(typeof y.type!="string")throw new Error(Er(17));if(c)throw new Error(Er(9));try{c=!0,a=r(a,y)}finally{c=!1}return(i=l).forEach(w=>{w()}),y}function p(y){if(typeof y!="function")throw new Error(Er(10));r=y,h({type:JM.REPLACE})}function g(){const y=m;return{subscribe(j){if(typeof j!="object"||j===null)throw new Error(Er(11));function w(){const _=j;_.next&&_.next(d())}return w(),{unsubscribe:y(w)}},[YM](){return this}}}return h({type:JM.INIT}),{dispatch:h,subscribe:m,getState:d,replaceReducer:p,[YM]:g}}function XM(t,s){return function(...n){return s(t.apply(this,n))}}function ZM(t,s){if(typeof t=="function")return XM(t,s);if(typeof t!="object"||t===null)throw new Error(Er(16));const n={};for(const r in t){const a=t[r];typeof a=="function"&&(n[r]=XM(a,s))}return n}function r7(...t){return t.length===0?s=>s:t.length===1?t[0]:t.reduce((s,n)=>(...r)=>s(n(...r)))}function Ofe(...t){return s=>(n,r)=>{const a=s(n,r);let i=()=>{throw new Error(Er(15))};const l={getState:a.getState,dispatch:(c,...u)=>i(c,...u)},o=t.map(c=>c(l));return i=r7(...o)(a.dispatch),{...a,dispatch:i}}}var Yw={exports:{}},Qw={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eD;function Rfe(){if(eD)return Qw;eD=1;var t=Of();function s(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var n=typeof Object.is=="function"?Object.is:s,r=t.useSyncExternalStore,a=t.useRef,i=t.useEffect,l=t.useMemo,o=t.useDebugValue;return Qw.useSyncExternalStoreWithSelector=function(c,u,d,m,h){var p=a(null);if(p.current===null){var g={hasValue:!1,value:null};p.current=g}else g=p.current;p=l(function(){function y(T){if(!j){if(j=!0,w=T,T=m(T),h!==void 0&&g.hasValue){var A=g.value;if(h(A,T))return N=A}return N=T}if(A=N,n(w,T))return A;var P=m(T);return h!==void 0&&h(A,P)?(w=T,A):(w=T,N=P)}var j=!1,w,N,_=d===void 0?null:d;return[function(){return y(u())},_===null?void 0:function(){return y(_())}]},[u,d,m,h]);var v=r(c,p[0],p[1]);return i(function(){g.hasValue=!0,g.value=v},[v]),o(v),v},Qw}var tD;function Ffe(){return tD||(tD=1,Yw.exports=Rfe()),Yw.exports}Ffe();var Lfe=b.version.startsWith("19"),Ife=Symbol.for(Lfe?"react.transitional.element":"react.element"),Bfe=Symbol.for("react.portal"),qfe=Symbol.for("react.fragment"),zfe=Symbol.for("react.strict_mode"),$fe=Symbol.for("react.profiler"),Ufe=Symbol.for("react.consumer"),Vfe=Symbol.for("react.context"),a7=Symbol.for("react.forward_ref"),Wfe=Symbol.for("react.suspense"),Hfe=Symbol.for("react.suspense_list"),PS=Symbol.for("react.memo"),Kfe=Symbol.for("react.lazy"),Gfe=a7,Yfe=PS;function Qfe(t){if(typeof t=="object"&&t!==null){const{$$typeof:s}=t;switch(s){case Ife:switch(t=t.type,t){case qfe:case $fe:case zfe:case Wfe:case Hfe:return t;default:switch(t=t&&t.$$typeof,t){case Vfe:case a7:case Kfe:case PS:return t;case Ufe:return t;default:return s}}case Bfe:return s}}}function Jfe(t){return Qfe(t)===PS}function Xfe(t,s,n,r,{areStatesEqual:a,areOwnPropsEqual:i,areStatePropsEqual:l}){let o=!1,c,u,d,m,h;function p(w,N){return c=w,u=N,d=t(c,u),m=s(r,u),h=n(d,m,u),o=!0,h}function g(){return d=t(c,u),s.dependsOnOwnProps&&(m=s(r,u)),h=n(d,m,u),h}function v(){return t.dependsOnOwnProps&&(d=t(c,u)),s.dependsOnOwnProps&&(m=s(r,u)),h=n(d,m,u),h}function y(){const w=t(c,u),N=!l(w,d);return d=w,N&&(h=n(d,m,u)),h}function j(w,N){const _=!i(N,u),T=!a(w,c,N,u);return c=w,u=N,_&&T?g():_?v():T?y():h}return function(N,_){return o?j(N,_):p(N,_)}}function Zfe(t,{initMapStateToProps:s,initMapDispatchToProps:n,initMergeProps:r,...a}){const i=s(t,a),l=n(t,a),o=r(t,a);return Xfe(i,l,o,t,a)}function epe(t,s){const n={};for(const r in t){const a=t[r];typeof a=="function"&&(n[r]=(...i)=>s(a(...i)))}return n}function Z_(t){return function(n){const r=t(n);function a(){return r}return a.dependsOnOwnProps=!1,a}}function sD(t){return t.dependsOnOwnProps?!!t.dependsOnOwnProps:t.length!==1}function i7(t,s){return function(r,{displayName:a}){const i=function(o,c){return i.dependsOnOwnProps?i.mapToProps(o,c):i.mapToProps(o,void 0)};return i.dependsOnOwnProps=!0,i.mapToProps=function(o,c){i.mapToProps=t,i.dependsOnOwnProps=sD(t);let u=i(o,c);return typeof u=="function"&&(i.mapToProps=u,i.dependsOnOwnProps=sD(u),u=i(o,c)),u},i}}function TS(t,s){return(n,r)=>{throw new Error(`Invalid value of type ${typeof t} for ${s} argument when connecting component ${r.wrappedComponentName}.`)}}function tpe(t){return t&&typeof t=="object"?Z_(s=>epe(t,s)):t?typeof t=="function"?i7(t):TS(t,"mapDispatchToProps"):Z_(s=>({dispatch:s}))}function spe(t){return t?typeof t=="function"?i7(t):TS(t,"mapStateToProps"):Z_(()=>({}))}function npe(t,s,n){return{...n,...t,...s}}function rpe(t){return function(n,{displayName:r,areMergedPropsEqual:a}){let i=!1,l;return function(c,u,d){const m=t(c,u,d);return i?a(m,l)||(l=m):(i=!0,l=m),l}}}function ape(t){return t?typeof t=="function"?rpe(t):TS(t,"mergeProps"):()=>npe}function ipe(t){t()}function lpe(){let t=null,s=null;return{clear(){t=null,s=null},notify(){ipe(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const a=s={callback:n,next:null,prev:s};return a.prev?a.prev.next=a:t=a,function(){!r||t===null||(r=!1,a.next?a.next.prev=a.prev:s=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}var nD={notify(){},get:()=>[]};function l7(t,s){let n,r=nD,a=0,i=!1;function l(v){d();const y=r.subscribe(v);let j=!1;return()=>{j||(j=!0,y(),m())}}function o(){r.notify()}function c(){g.onStateChange&&g.onStateChange()}function u(){return i}function d(){a++,n||(n=s?s.addNestedSub(c):t.subscribe(c),r=lpe())}function m(){a--,n&&a===0&&(n(),n=void 0,r.clear(),r=nD)}function h(){i||(i=!0,d())}function p(){i&&(i=!1,m())}const g={addNestedSub:l,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:p,getListeners:()=>r};return g}var ope=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",cpe=ope(),dpe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",upe=dpe(),hpe=()=>cpe||upe?b.useLayoutEffect:b.useEffect,e0=hpe();function rD(t,s){return t===s?t!==0||s!==0||1/t===1/s:t!==t&&s!==s}function Jw(t,s){if(rD(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;const n=Object.keys(t),r=Object.keys(s);if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++)if(!Object.prototype.hasOwnProperty.call(s,n[a])||!rD(t[n[a]],s[n[a]]))return!1;return!0}var mpe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},fpe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},ppe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o7={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},xpe={[Gfe]:ppe,[Yfe]:o7};function aD(t){return Jfe(t)?o7:xpe[t.$$typeof]||mpe}var gpe=Object.defineProperty,vpe=Object.getOwnPropertyNames,iD=Object.getOwnPropertySymbols,ype=Object.getOwnPropertyDescriptor,bpe=Object.getPrototypeOf,lD=Object.prototype;function e1(t,s){if(typeof s!="string"){if(lD){const i=bpe(s);i&&i!==lD&&e1(t,i)}let n=vpe(s);iD&&(n=n.concat(iD(s)));const r=aD(t),a=aD(s);for(let i=0;i<n.length;++i){const l=n[i];if(!fpe[l]&&!(a&&a[l])&&!(r&&r[l])){const o=ype(s,l);try{gpe(t,l,o)}catch{}}}}return t}var Xw=Symbol.for("react-redux-context"),Zw=typeof globalThis<"u"?globalThis:{};function jpe(){if(!b.createContext)return{};const t=Zw[Xw]??(Zw[Xw]=new Map);let s=t.get(b.createContext);return s||(s=b.createContext(null),t.set(b.createContext,s)),s}var c7=jpe(),wpe=[null,null];function Npe(t,s,n){e0(()=>t(...s),n)}function _pe(t,s,n,r,a,i){t.current=r,n.current=!1,a.current&&(a.current=null,i())}function Spe(t,s,n,r,a,i,l,o,c,u,d){if(!t)return()=>{};let m=!1,h=null;const p=()=>{if(m||!o.current)return;const v=s.getState();let y,j;try{y=r(v,a.current)}catch(w){j=w,h=w}j||(h=null),y===i.current?l.current||u():(i.current=y,c.current=y,l.current=!0,d())};return n.onStateChange=p,n.trySubscribe(),p(),()=>{if(m=!0,n.tryUnsubscribe(),n.onStateChange=null,h)throw h}}function Cpe(t,s){return t===s}function kpe(t,s,n,{pure:r,areStatesEqual:a=Cpe,areOwnPropsEqual:i=Jw,areStatePropsEqual:l=Jw,areMergedPropsEqual:o=Jw,forwardRef:c=!1,context:u=c7}={}){const d=u,m=spe(t),h=tpe(s),p=ape(n),g=!!t;return y=>{const j=y.displayName||y.name||"Component",w=`Connect(${j})`,N={shouldHandleStateChanges:g,displayName:w,wrappedComponentName:j,WrappedComponent:y,initMapStateToProps:m,initMapDispatchToProps:h,initMergeProps:p,areStatesEqual:a,areStatePropsEqual:l,areOwnPropsEqual:i,areMergedPropsEqual:o};function _(P){const[C,O,M]=b.useMemo(()=>{const{reactReduxForwardedRef:oe,...pe}=P;return[P.context,oe,pe]},[P]),k=b.useMemo(()=>{let oe=d;return C!=null&&C.Consumer,oe},[C,d]),E=b.useContext(k),R=!!P.store&&!!P.store.getState&&!!P.store.dispatch,F=!!E&&!!E.store,z=R?P.store:E.store,V=F?E.getServerState:z.getState,U=b.useMemo(()=>Zfe(z.dispatch,N),[z]),[B,$]=b.useMemo(()=>{if(!g)return wpe;const oe=l7(z,R?void 0:E.subscription),pe=oe.notifyNestedSubs.bind(oe);return[oe,pe]},[z,R,E]),L=b.useMemo(()=>R?E:{...E,subscription:B},[R,E,B]),I=b.useRef(void 0),W=b.useRef(M),q=b.useRef(void 0),Z=b.useRef(!1),Q=b.useRef(!1),Y=b.useRef(void 0);e0(()=>(Q.current=!0,()=>{Q.current=!1}),[]);const K=b.useMemo(()=>()=>q.current&&M===W.current?q.current:U(z.getState(),M),[z,M]),ae=b.useMemo(()=>pe=>B?Spe(g,z,B,U,W,I,Z,Q,q,$,pe):()=>{},[B]);Npe(_pe,[W,I,Z,M,q,$]);let se;try{se=b.useSyncExternalStore(ae,K,V?()=>U(V(),M):K)}catch(oe){throw Y.current&&(oe.message+=`
The error may be correlated with this previous error:
${Y.current.stack}

`),oe}e0(()=>{Y.current=void 0,q.current=void 0,I.current=se});const de=b.useMemo(()=>b.createElement(y,{...se,ref:O}),[O,y,se]);return b.useMemo(()=>g?b.createElement(k.Provider,{value:L},de):de,[k,de,L])}const A=b.memo(_);if(A.WrappedComponent=y,A.displayName=_.displayName=w,c){const C=b.forwardRef(function(M,k){return b.createElement(A,{...M,reactReduxForwardedRef:k})});return C.displayName=w,C.WrappedComponent=y,e1(C,y)}return e1(A,y)}}var d7=kpe;function Epe(t){const{children:s,context:n,serverState:r,store:a}=t,i=b.useMemo(()=>{const c=l7(a);return{store:a,subscription:c,getServerState:r?()=>r:void 0}},[a,r]),l=b.useMemo(()=>a.getState(),[a]);e0(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),l!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,l]);const o=n||c7;return b.createElement(o.Provider,{value:i},s)}var Ppe=Epe,Tpe="Invariant failed";function Ape(t,s){throw new Error(Tpe)}var fi=function(s){var n=s.top,r=s.right,a=s.bottom,i=s.left,l=r-i,o=a-n,c={top:n,right:r,bottom:a,left:i,width:l,height:o,x:i,y:n,center:{x:(r+i)/2,y:(a+n)/2}};return c},AS=function(s,n){return{top:s.top-n.top,left:s.left-n.left,bottom:s.bottom+n.bottom,right:s.right+n.right}},oD=function(s,n){return{top:s.top+n.top,left:s.left+n.left,bottom:s.bottom-n.bottom,right:s.right-n.right}},Mpe=function(s,n){return{top:s.top+n.y,left:s.left+n.x,bottom:s.bottom+n.y,right:s.right+n.x}},eN={top:0,right:0,bottom:0,left:0},MS=function(s){var n=s.borderBox,r=s.margin,a=r===void 0?eN:r,i=s.border,l=i===void 0?eN:i,o=s.padding,c=o===void 0?eN:o,u=fi(AS(n,a)),d=fi(oD(n,l)),m=fi(oD(d,c));return{marginBox:u,borderBox:fi(n),paddingBox:d,contentBox:m,margin:a,border:l,padding:c}},Fa=function(s){var n=s.slice(0,-2),r=s.slice(-2);if(r!=="px")return 0;var a=Number(n);return isNaN(a)&&Ape(),a},Dpe=function(){return{x:window.pageXOffset,y:window.pageYOffset}},t0=function(s,n){var r=s.borderBox,a=s.border,i=s.margin,l=s.padding,o=Mpe(r,n);return MS({borderBox:o,border:a,margin:i,padding:l})},s0=function(s,n){return n===void 0&&(n=Dpe()),t0(s,n)},u7=function(s,n){var r={top:Fa(n.marginTop),right:Fa(n.marginRight),bottom:Fa(n.marginBottom),left:Fa(n.marginLeft)},a={top:Fa(n.paddingTop),right:Fa(n.paddingRight),bottom:Fa(n.paddingBottom),left:Fa(n.paddingLeft)},i={top:Fa(n.borderTopWidth),right:Fa(n.borderRightWidth),bottom:Fa(n.borderBottomWidth),left:Fa(n.borderLeftWidth)};return MS({borderBox:s,margin:r,padding:a,border:i})},h7=function(s){var n=s.getBoundingClientRect(),r=window.getComputedStyle(s);return u7(n,r)},gf=function(s){var n=[],r=null,a=function(){for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];n=o,!r&&(r=requestAnimationFrame(function(){r=null,s.apply(void 0,n)}))};return a.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},a};function n0(){return n0=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},n0.apply(null,arguments)}function m7(t,s){}m7.bind(null,"warn");m7.bind(null,"error");function Uo(){}function Ope(t,s){return{...t,...s}}function Ha(t,s,n){const r=s.map(a=>{const i=Ope(n,a.options);return t.addEventListener(a.eventName,a.fn,i),function(){t.removeEventListener(a.eventName,a.fn,i)}});return function(){r.forEach(i=>{i()})}}const Rpe="Invariant failed";class r0 extends Error{}r0.prototype.toString=function(){return this.message};function gt(t,s){throw new r0(Rpe)}class Fpe extends Be.Component{constructor(...s){super(...s),this.callbacks=null,this.unbind=Uo,this.onWindowError=n=>{const r=this.getCallbacks();r.isDragging()&&r.tryAbort(),n.error instanceof r0&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=Ha(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(s){if(s instanceof r0){this.setState({});return}throw s}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const Lpe=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,a0=t=>t+1,Ipe=t=>`
  You have lifted an item in position ${a0(t.source.index)}
`,f7=(t,s)=>{const n=t.droppableId===s.droppableId,r=a0(t.index),a=a0(s.index);return n?`
      You have moved the item from position ${r}
      to position ${a}
    `:`
    You have moved the item from position ${r}
    in list ${t.droppableId}
    to list ${s.droppableId}
    in position ${a}
  `},p7=(t,s,n)=>s.droppableId===n.droppableId?`
      The item ${t}
      has been combined with ${n.draggableId}`:`
      The item ${t}
      in list ${s.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,Bpe=t=>{const s=t.destination;if(s)return f7(t.source,s);const n=t.combine;return n?p7(t.draggableId,t.source,n):"You are over an area that cannot be dropped on"},cD=t=>`
  The item has returned to its starting position
  of ${a0(t.index)}
`,qpe=t=>{if(t.reason==="CANCEL")return`
      Movement cancelled.
      ${cD(t.source)}
    `;const s=t.destination,n=t.combine;return s?`
      You have dropped the item.
      ${f7(t.source,s)}
    `:n?`
      You have dropped the item.
      ${p7(t.draggableId,t.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${cD(t.source)}
  `},_g={dragHandleUsageInstructions:Lpe,onDragStart:Ipe,onDragUpdate:Bpe,onDragEnd:qpe};function zpe(t,s){return!!(t===s||Number.isNaN(t)&&Number.isNaN(s))}function x7(t,s){if(t.length!==s.length)return!1;for(let n=0;n<t.length;n++)if(!zpe(t[n],s[n]))return!1;return!0}function Os(t,s){const n=b.useState(()=>({inputs:s,result:t()}))[0],r=b.useRef(!0),a=b.useRef(n),l=r.current||!!(s&&a.current.inputs&&x7(s,a.current.inputs))?a.current:{inputs:s,result:t()};return b.useEffect(()=>{r.current=!1,a.current=l},[l]),l.result}function Wt(t,s){return Os(()=>t,s)}const er={x:0,y:0},ir=(t,s)=>({x:t.x+s.x,y:t.y+s.y}),ja=(t,s)=>({x:t.x-s.x,y:t.y-s.y}),Vo=(t,s)=>t.x===s.x&&t.y===s.y,Sh=t=>({x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}),cd=(t,s,n=0)=>t==="x"?{x:s,y:n}:{x:n,y:s},vf=(t,s)=>Math.sqrt((s.x-t.x)**2+(s.y-t.y)**2),dD=(t,s)=>Math.min(...s.map(n=>vf(t,n))),g7=t=>s=>({x:t(s.x),y:t(s.y)});var $pe=(t,s)=>{const n=fi({top:Math.max(s.top,t.top),right:Math.min(s.right,t.right),bottom:Math.min(s.bottom,t.bottom),left:Math.max(s.left,t.left)});return n.width<=0||n.height<=0?null:n};const mp=(t,s)=>({top:t.top+s.y,left:t.left+s.x,bottom:t.bottom+s.y,right:t.right+s.x}),uD=t=>[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}],Upe={top:0,right:0,bottom:0,left:0},Vpe=(t,s)=>s?mp(t,s.scroll.diff.displacement):t,Wpe=(t,s,n)=>n&&n.increasedBy?{...t,[s.end]:t[s.end]+n.increasedBy[s.line]}:t,Hpe=(t,s)=>s&&s.shouldClipSubject?$pe(s.pageMarginBox,t):fi(t);var Xu=({page:t,withPlaceholder:s,axis:n,frame:r})=>{const a=Vpe(t.marginBox,r),i=Wpe(a,n,s),l=Hpe(i,r);return{page:t,withPlaceholder:s,active:l}},DS=(t,s)=>{t.frame||gt();const n=t.frame,r=ja(s,n.scroll.initial),a=Sh(r),i={...n,scroll:{initial:n.scroll.initial,current:s,diff:{value:r,displacement:a},max:n.scroll.max}},l=Xu({page:t.subject.page,withPlaceholder:t.subject.withPlaceholder,axis:t.axis,frame:i});return{...t,frame:i,subject:l}};function Xn(t,s=x7){let n=null;function r(...a){if(n&&n.lastThis===this&&s(a,n.lastArgs))return n.lastResult;const i=t.apply(this,a);return n={lastResult:i,lastArgs:a,lastThis:this},i}return r.clear=function(){n=null},r}const v7=Xn(t=>t.reduce((s,n)=>(s[n.descriptor.id]=n,s),{})),y7=Xn(t=>t.reduce((s,n)=>(s[n.descriptor.id]=n,s),{})),bv=Xn(t=>Object.values(t)),Kpe=Xn(t=>Object.values(t));var Ch=Xn((t,s)=>Kpe(s).filter(r=>t===r.descriptor.droppableId).sort((r,a)=>r.descriptor.index-a.descriptor.index));function OS(t){return t.at&&t.at.type==="REORDER"?t.at.destination:null}function jv(t){return t.at&&t.at.type==="COMBINE"?t.at.combine:null}var wv=Xn((t,s)=>s.filter(n=>n.descriptor.id!==t.descriptor.id)),Gpe=({isMovingForward:t,draggable:s,destination:n,insideDestination:r,previousImpact:a})=>{if(!n.isCombineEnabled||!OS(a))return null;function l(p){const g={type:"COMBINE",combine:{draggableId:p,droppableId:n.descriptor.id}};return{...a,at:g}}const o=a.displaced.all,c=o.length?o[0]:null;if(t)return c?l(c):null;const u=wv(s,r);if(!c){if(!u.length)return null;const p=u[u.length-1];return l(p.descriptor.id)}const d=u.findIndex(p=>p.descriptor.id===c);d===-1&&gt();const m=d-1;if(m<0)return null;const h=u[m];return l(h.descriptor.id)},kh=(t,s)=>t.descriptor.droppableId===s.descriptor.id;const b7={point:er,value:0},yf={invisible:{},visible:{},all:[]},Ype={displaced:yf,displacedBy:b7,at:null};var Ya=(t,s)=>n=>t<=n&&n<=s,j7=t=>{const s=Ya(t.top,t.bottom),n=Ya(t.left,t.right);return r=>{if(s(r.top)&&s(r.bottom)&&n(r.left)&&n(r.right))return!0;const i=s(r.top)||s(r.bottom),l=n(r.left)||n(r.right);if(i&&l)return!0;const c=r.top<t.top&&r.bottom>t.bottom,u=r.left<t.left&&r.right>t.right;return c&&u?!0:c&&l||u&&i}},Qpe=t=>{const s=Ya(t.top,t.bottom),n=Ya(t.left,t.right);return r=>s(r.top)&&s(r.bottom)&&n(r.left)&&n(r.right)};const RS={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},w7={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var Jpe=t=>s=>{const n=Ya(s.top,s.bottom),r=Ya(s.left,s.right);return a=>t===RS?n(a.top)&&n(a.bottom):r(a.left)&&r(a.right)};const Xpe=(t,s)=>{const n=s.frame?s.frame.scroll.diff.displacement:er;return mp(t,n)},Zpe=(t,s,n)=>s.subject.active?n(s.subject.active)(t):!1,exe=(t,s,n)=>n(s)(t),FS=({target:t,destination:s,viewport:n,withDroppableDisplacement:r,isVisibleThroughFrameFn:a})=>{const i=r?Xpe(t,s):t;return Zpe(i,s,a)&&exe(i,n,a)},txe=t=>FS({...t,isVisibleThroughFrameFn:j7}),N7=t=>FS({...t,isVisibleThroughFrameFn:Qpe}),sxe=t=>FS({...t,isVisibleThroughFrameFn:Jpe(t.destination.axis)}),nxe=(t,s,n)=>{if(typeof n=="boolean")return n;if(!s)return!0;const{invisible:r,visible:a}=s;if(r[t])return!1;const i=a[t];return i?i.shouldAnimate:!0};function rxe(t,s){const n=t.page.marginBox,r={top:s.point.y,right:0,bottom:0,left:s.point.x};return fi(AS(n,r))}function bf({afterDragging:t,destination:s,displacedBy:n,viewport:r,forceShouldAnimate:a,last:i}){return t.reduce(function(o,c){const u=rxe(c,n),d=c.descriptor.id;if(o.all.push(d),!txe({target:u,destination:s,viewport:r,withDroppableDisplacement:!0}))return o.invisible[c.descriptor.id]=!0,o;const h=nxe(d,i,a),p={draggableId:d,shouldAnimate:h};return o.visible[d]=p,o},{all:[],visible:{},invisible:{}})}function axe(t,s){if(!t.length)return 0;const n=t[t.length-1].descriptor.index;return s.inHomeList?n:n+1}function hD({insideDestination:t,inHomeList:s,displacedBy:n,destination:r}){const a=axe(t,{inHomeList:s});return{displaced:yf,displacedBy:n,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:a}}}}function i0({draggable:t,insideDestination:s,destination:n,viewport:r,displacedBy:a,last:i,index:l,forceShouldAnimate:o}){const c=kh(t,n);if(l==null)return hD({insideDestination:s,inHomeList:c,displacedBy:a,destination:n});const u=s.find(g=>g.descriptor.index===l);if(!u)return hD({insideDestination:s,inHomeList:c,displacedBy:a,destination:n});const d=wv(t,s),m=s.indexOf(u),h=d.slice(m);return{displaced:bf({afterDragging:h,destination:n,displacedBy:a,last:i,viewport:r.frame,forceShouldAnimate:o}),displacedBy:a,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:l}}}}function Jo(t,s){return!!s.effected[t]}var ixe=({isMovingForward:t,destination:s,draggables:n,combine:r,afterCritical:a})=>{if(!s.isCombineEnabled)return null;const i=r.draggableId,o=n[i].descriptor.index;return Jo(i,a)?t?o:o-1:t?o+1:o},lxe=({isMovingForward:t,isInHomeList:s,insideDestination:n,location:r})=>{if(!n.length)return null;const a=r.index,i=t?a+1:a-1,l=n[0].descriptor.index,o=n[n.length-1].descriptor.index,c=s?o:o+1;return i<l||i>c?null:i},oxe=({isMovingForward:t,isInHomeList:s,draggable:n,draggables:r,destination:a,insideDestination:i,previousImpact:l,viewport:o,afterCritical:c})=>{const u=l.at;if(u||gt(),u.type==="REORDER"){const m=lxe({isMovingForward:t,isInHomeList:s,location:u.destination,insideDestination:i});return m==null?null:i0({draggable:n,insideDestination:i,destination:a,viewport:o,last:l.displaced,displacedBy:l.displacedBy,index:m})}const d=ixe({isMovingForward:t,destination:a,displaced:l.displaced,draggables:r,combine:u.combine,afterCritical:c});return d==null?null:i0({draggable:n,insideDestination:i,destination:a,viewport:o,last:l.displaced,displacedBy:l.displacedBy,index:d})},cxe=({displaced:t,afterCritical:s,combineWith:n,displacedBy:r})=>{const a=!!(t.visible[n]||t.invisible[n]);return Jo(n,s)?a?er:Sh(r.point):a?r.point:er},dxe=({afterCritical:t,impact:s,draggables:n})=>{const r=jv(s);r||gt();const a=r.draggableId,i=n[a].page.borderBox.center,l=cxe({displaced:s.displaced,afterCritical:t,combineWith:a,displacedBy:s.displacedBy});return ir(i,l)};const _7=(t,s)=>s.margin[t.start]+s.borderBox[t.size]/2,uxe=(t,s)=>s.margin[t.end]+s.borderBox[t.size]/2,LS=(t,s,n)=>s[t.crossAxisStart]+n.margin[t.crossAxisStart]+n.borderBox[t.crossAxisSize]/2,mD=({axis:t,moveRelativeTo:s,isMoving:n})=>cd(t.line,s.marginBox[t.end]+_7(t,n),LS(t,s.marginBox,n)),fD=({axis:t,moveRelativeTo:s,isMoving:n})=>cd(t.line,s.marginBox[t.start]-uxe(t,n),LS(t,s.marginBox,n)),hxe=({axis:t,moveInto:s,isMoving:n})=>cd(t.line,s.contentBox[t.start]+_7(t,n),LS(t,s.contentBox,n));var mxe=({impact:t,draggable:s,draggables:n,droppable:r,afterCritical:a})=>{const i=Ch(r.descriptor.id,n),l=s.page,o=r.axis;if(!i.length)return hxe({axis:o,moveInto:r.page,isMoving:l});const{displaced:c,displacedBy:u}=t,d=c.all[0];if(d){const h=n[d];if(Jo(d,a))return fD({axis:o,moveRelativeTo:h.page,isMoving:l});const p=t0(h.page,u.point);return fD({axis:o,moveRelativeTo:p,isMoving:l})}const m=i[i.length-1];if(m.descriptor.id===s.descriptor.id)return l.borderBox.center;if(Jo(m.descriptor.id,a)){const h=t0(m.page,Sh(a.displacedBy.point));return mD({axis:o,moveRelativeTo:h,isMoving:l})}return mD({axis:o,moveRelativeTo:m.page,isMoving:l})},t1=(t,s)=>{const n=t.frame;return n?ir(s,n.scroll.diff.displacement):s};const fxe=({impact:t,draggable:s,droppable:n,draggables:r,afterCritical:a})=>{const i=s.page.borderBox.center,l=t.at;return!n||!l?i:l.type==="REORDER"?mxe({impact:t,draggable:s,draggables:r,droppable:n,afterCritical:a}):dxe({impact:t,draggables:r,afterCritical:a})};var Nv=t=>{const s=fxe(t),n=t.droppable;return n?t1(n,s):s},S7=(t,s)=>{const n=ja(s,t.scroll.initial),r=Sh(n);return{frame:fi({top:s.y,bottom:s.y+t.frame.height,left:s.x,right:s.x+t.frame.width}),scroll:{initial:t.scroll.initial,max:t.scroll.max,current:s,diff:{value:n,displacement:r}}}};function pD(t,s){return t.map(n=>s[n])}function pxe(t,s){for(let n=0;n<s.length;n++){const r=s[n].visible[t];if(r)return r}return null}var xxe=({impact:t,viewport:s,destination:n,draggables:r,maxScrollChange:a})=>{const i=S7(s,ir(s.scroll.current,a)),l=n.frame?DS(n,ir(n.frame.scroll.current,a)):n,o=t.displaced,c=bf({afterDragging:pD(o.all,r),destination:n,displacedBy:t.displacedBy,viewport:i.frame,last:o,forceShouldAnimate:!1}),u=bf({afterDragging:pD(o.all,r),destination:l,displacedBy:t.displacedBy,viewport:s.frame,last:o,forceShouldAnimate:!1}),d={},m={},h=[o,c,u];return o.all.forEach(g=>{const v=pxe(g,h);if(v){m[g]=v;return}d[g]=!0}),{...t,displaced:{all:o.all,invisible:d,visible:m}}},gxe=(t,s)=>ir(t.scroll.diff.displacement,s),IS=({pageBorderBoxCenter:t,draggable:s,viewport:n})=>{const r=gxe(n,t),a=ja(r,s.page.borderBox.center);return ir(s.client.borderBox.center,a)},C7=({draggable:t,destination:s,newPageBorderBoxCenter:n,viewport:r,withDroppableDisplacement:a,onlyOnMainAxis:i=!1})=>{const l=ja(n,t.page.borderBox.center),c={target:mp(t.page.borderBox,l),destination:s,withDroppableDisplacement:a,viewport:r};return i?sxe(c):N7(c)},vxe=({isMovingForward:t,draggable:s,destination:n,draggables:r,previousImpact:a,viewport:i,previousPageBorderBoxCenter:l,previousClientSelection:o,afterCritical:c})=>{if(!n.isEnabled)return null;const u=Ch(n.descriptor.id,r),d=kh(s,n),m=Gpe({isMovingForward:t,draggable:s,destination:n,insideDestination:u,previousImpact:a})||oxe({isMovingForward:t,isInHomeList:d,draggable:s,draggables:r,destination:n,insideDestination:u,previousImpact:a,viewport:i,afterCritical:c});if(!m)return null;const h=Nv({impact:m,draggable:s,droppable:n,draggables:r,afterCritical:c});if(C7({draggable:s,destination:n,newPageBorderBoxCenter:h,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:IS({pageBorderBoxCenter:h,draggable:s,viewport:i}),impact:m,scrollJumpRequest:null};const g=ja(h,l),v=xxe({impact:m,viewport:i,destination:n,draggables:r,maxScrollChange:g});return{clientSelection:o,impact:v,scrollJumpRequest:g}};const kr=t=>{const s=t.subject.active;return s||gt(),s};var yxe=({isMovingForward:t,pageBorderBoxCenter:s,source:n,droppables:r,viewport:a})=>{const i=n.subject.active;if(!i)return null;const l=n.axis,o=Ya(i[l.start],i[l.end]),c=bv(r).filter(d=>d!==n).filter(d=>d.isEnabled).filter(d=>!!d.subject.active).filter(d=>j7(a.frame)(kr(d))).filter(d=>{const m=kr(d);return t?i[l.crossAxisEnd]<m[l.crossAxisEnd]:m[l.crossAxisStart]<i[l.crossAxisStart]}).filter(d=>{const m=kr(d),h=Ya(m[l.start],m[l.end]);return o(m[l.start])||o(m[l.end])||h(i[l.start])||h(i[l.end])}).sort((d,m)=>{const h=kr(d)[l.crossAxisStart],p=kr(m)[l.crossAxisStart];return t?h-p:p-h}).filter((d,m,h)=>kr(d)[l.crossAxisStart]===kr(h[0])[l.crossAxisStart]);if(!c.length)return null;if(c.length===1)return c[0];const u=c.filter(d=>Ya(kr(d)[l.start],kr(d)[l.end])(s[l.line]));return u.length===1?u[0]:u.length>1?u.sort((d,m)=>kr(d)[l.start]-kr(m)[l.start])[0]:c.sort((d,m)=>{const h=dD(s,uD(kr(d))),p=dD(s,uD(kr(m)));return h!==p?h-p:kr(d)[l.start]-kr(m)[l.start]})[0]};const xD=(t,s)=>{const n=t.page.borderBox.center;return Jo(t.descriptor.id,s)?ja(n,s.displacedBy.point):n},bxe=(t,s)=>{const n=t.page.borderBox;return Jo(t.descriptor.id,s)?mp(n,Sh(s.displacedBy.point)):n};var jxe=({pageBorderBoxCenter:t,viewport:s,destination:n,insideDestination:r,afterCritical:a})=>r.filter(l=>N7({target:bxe(l,a),destination:n,viewport:s.frame,withDroppableDisplacement:!0})).sort((l,o)=>{const c=vf(t,t1(n,xD(l,a))),u=vf(t,t1(n,xD(o,a)));return c<u?-1:u<c?1:l.descriptor.index-o.descriptor.index})[0]||null,fp=Xn(function(s,n){const r=n[s.line];return{value:r,point:cd(s.line,r)}});const wxe=(t,s,n)=>{const r=t.axis;if(t.descriptor.mode==="virtual")return cd(r.line,s[r.line]);const a=t.subject.page.contentBox[r.size],c=Ch(t.descriptor.id,n).reduce((u,d)=>u+d.client.marginBox[r.size],0)+s[r.line]-a;return c<=0?null:cd(r.line,c)},k7=(t,s)=>({...t,scroll:{...t.scroll,max:s}}),E7=(t,s,n)=>{const r=t.frame;kh(s,t)&&gt(),t.subject.withPlaceholder&&gt();const a=fp(t.axis,s.displaceBy).point,i=wxe(t,a,n),l={placeholderSize:a,increasedBy:i,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!r){const d=Xu({page:t.subject.page,withPlaceholder:l,axis:t.axis,frame:t.frame});return{...t,subject:d}}const o=i?ir(r.scroll.max,i):r.scroll.max,c=k7(r,o),u=Xu({page:t.subject.page,withPlaceholder:l,axis:t.axis,frame:c});return{...t,subject:u,frame:c}},Nxe=t=>{const s=t.subject.withPlaceholder;s||gt();const n=t.frame;if(!n){const l=Xu({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return{...t,subject:l}}const r=s.oldFrameMaxScroll;r||gt();const a=k7(n,r),i=Xu({page:t.subject.page,axis:t.axis,frame:a,withPlaceholder:null});return{...t,subject:i,frame:a}};var _xe=({previousPageBorderBoxCenter:t,moveRelativeTo:s,insideDestination:n,draggable:r,draggables:a,destination:i,viewport:l,afterCritical:o})=>{if(!s){if(n.length)return null;const m={displaced:yf,displacedBy:b7,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},h=Nv({impact:m,draggable:r,droppable:i,draggables:a,afterCritical:o}),p=kh(r,i)?i:E7(i,r,a);return C7({draggable:r,destination:p,newPageBorderBoxCenter:h,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?m:null}const c=t[i.axis.line]<=s.page.borderBox.center[i.axis.line],u=(()=>{const m=s.descriptor.index;return s.descriptor.id===r.descriptor.id||c?m:m+1})(),d=fp(i.axis,r.displaceBy);return i0({draggable:r,insideDestination:n,destination:i,viewport:l,displacedBy:d,last:yf,index:u})},Sxe=({isMovingForward:t,previousPageBorderBoxCenter:s,draggable:n,isOver:r,draggables:a,droppables:i,viewport:l,afterCritical:o})=>{const c=yxe({isMovingForward:t,pageBorderBoxCenter:s,source:r,droppables:i,viewport:l});if(!c)return null;const u=Ch(c.descriptor.id,a),d=jxe({pageBorderBoxCenter:s,viewport:l,destination:c,insideDestination:u,afterCritical:o}),m=_xe({previousPageBorderBoxCenter:s,destination:c,draggable:n,draggables:a,moveRelativeTo:d,insideDestination:u,viewport:l,afterCritical:o});if(!m)return null;const h=Nv({impact:m,draggable:n,droppable:c,draggables:a,afterCritical:o});return{clientSelection:IS({pageBorderBoxCenter:h,draggable:n,viewport:l}),impact:m,scrollJumpRequest:null}},Ca=t=>{const s=t.at;return s?s.type==="REORDER"?s.destination.droppableId:s.combine.droppableId:null};const Cxe=(t,s)=>{const n=Ca(t);return n?s[n]:null};var kxe=({state:t,type:s})=>{const n=Cxe(t.impact,t.dimensions.droppables),r=!!n,a=t.dimensions.droppables[t.critical.droppable.id],i=n||a,l=i.axis.direction,o=l==="vertical"&&(s==="MOVE_UP"||s==="MOVE_DOWN")||l==="horizontal"&&(s==="MOVE_LEFT"||s==="MOVE_RIGHT");if(o&&!r)return null;const c=s==="MOVE_DOWN"||s==="MOVE_RIGHT",u=t.dimensions.draggables[t.critical.draggable.id],d=t.current.page.borderBoxCenter,{draggables:m,droppables:h}=t.dimensions;return o?vxe({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,destination:i,draggables:m,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):Sxe({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,isOver:i,draggables:m,droppables:h,viewport:t.viewport,afterCritical:t.afterCritical})};function Cc(t){return t.phase==="DRAGGING"||t.phase==="COLLECTING"}function P7(t){const s=Ya(t.top,t.bottom),n=Ya(t.left,t.right);return function(a){return s(a.y)&&n(a.x)}}function Exe(t,s){return t.left<s.right&&t.right>s.left&&t.top<s.bottom&&t.bottom>s.top}function Pxe({pageBorderBox:t,draggable:s,candidates:n}){const r=s.page.borderBox.center,a=n.map(i=>{const l=i.axis,o=cd(i.axis.line,t.center[l.line],i.page.borderBox.center[l.crossAxisLine]);return{id:i.descriptor.id,distance:vf(r,o)}}).sort((i,l)=>l.distance-i.distance);return a[0]?a[0].id:null}function Txe({pageBorderBox:t,draggable:s,droppables:n}){const r=bv(n).filter(a=>{if(!a.isEnabled)return!1;const i=a.subject.active;if(!i||!Exe(t,i))return!1;if(P7(i)(t.center))return!0;const l=a.axis,o=i.center[l.crossAxisLine],c=t[l.crossAxisStart],u=t[l.crossAxisEnd],d=Ya(i[l.crossAxisStart],i[l.crossAxisEnd]),m=d(c),h=d(u);return!m&&!h?!0:m?c<o:u>o});return r.length?r.length===1?r[0].descriptor.id:Pxe({pageBorderBox:t,draggable:s,candidates:r}):null}const T7=(t,s)=>fi(mp(t,s));var Axe=(t,s)=>{const n=t.frame;return n?T7(s,n.scroll.diff.value):s};function A7({displaced:t,id:s}){return!!(t.visible[s]||t.invisible[s])}function Mxe({draggable:t,closest:s,inHomeList:n}){return s?n&&s.descriptor.index>t.descriptor.index?s.descriptor.index-1:s.descriptor.index:null}var Dxe=({pageBorderBoxWithDroppableScroll:t,draggable:s,destination:n,insideDestination:r,last:a,viewport:i,afterCritical:l})=>{const o=n.axis,c=fp(n.axis,s.displaceBy),u=c.value,d=t[o.start],m=t[o.end],p=wv(s,r).find(v=>{const y=v.descriptor.id,j=v.page.borderBox.center[o.line],w=Jo(y,l),N=A7({displaced:a,id:y});return w?N?m<=j:d<j-u:N?m<=j+u:d<j})||null,g=Mxe({draggable:s,closest:p,inHomeList:kh(s,n)});return i0({draggable:s,insideDestination:r,destination:n,viewport:i,last:a,displacedBy:c,index:g})};const Oxe=4;var Rxe=({draggable:t,pageBorderBoxWithDroppableScroll:s,previousImpact:n,destination:r,insideDestination:a,afterCritical:i})=>{if(!r.isCombineEnabled)return null;const l=r.axis,o=fp(r.axis,t.displaceBy),c=o.value,u=s[l.start],d=s[l.end],h=wv(t,a).find(g=>{const v=g.descriptor.id,y=g.page.borderBox,w=y[l.size]/Oxe,N=Jo(v,i),_=A7({displaced:n.displaced,id:v});return N?_?d>y[l.start]+w&&d<y[l.end]-w:u>y[l.start]-c+w&&u<y[l.end]-c-w:_?d>y[l.start]+c+w&&d<y[l.end]+c-w:u>y[l.start]+w&&u<y[l.end]-w});return h?{displacedBy:o,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:h.descriptor.id,droppableId:r.descriptor.id}}}:null},M7=({pageOffset:t,draggable:s,draggables:n,droppables:r,previousImpact:a,viewport:i,afterCritical:l})=>{const o=T7(s.page.borderBox,t),c=Txe({pageBorderBox:o,draggable:s,droppables:r});if(!c)return Ype;const u=r[c],d=Ch(u.descriptor.id,n),m=Axe(u,o);return Rxe({pageBorderBoxWithDroppableScroll:m,draggable:s,previousImpact:a,destination:u,insideDestination:d,afterCritical:l})||Dxe({pageBorderBoxWithDroppableScroll:m,draggable:s,destination:u,insideDestination:d,last:a.displaced,viewport:i,afterCritical:l})},BS=(t,s)=>({...t,[s.descriptor.id]:s});const Fxe=({previousImpact:t,impact:s,droppables:n})=>{const r=Ca(t),a=Ca(s);if(!r||r===a)return n;const i=n[r];if(!i.subject.withPlaceholder)return n;const l=Nxe(i);return BS(n,l)};var Lxe=({draggable:t,draggables:s,droppables:n,previousImpact:r,impact:a})=>{const i=Fxe({previousImpact:r,impact:a,droppables:n}),l=Ca(a);if(!l)return i;const o=n[l];if(kh(t,o)||o.subject.withPlaceholder)return i;const c=E7(o,t,s);return BS(i,c)},Wm=({state:t,clientSelection:s,dimensions:n,viewport:r,impact:a,scrollJumpRequest:i})=>{const l=r||t.viewport,o=n||t.dimensions,c=s||t.current.client.selection,u=ja(c,t.initial.client.selection),d={offset:u,selection:c,borderBoxCenter:ir(t.initial.client.borderBoxCenter,u)},m={selection:ir(d.selection,l.scroll.current),borderBoxCenter:ir(d.borderBoxCenter,l.scroll.current),offset:ir(d.offset,l.scroll.diff.value)},h={client:d,page:m};if(t.phase==="COLLECTING")return{...t,dimensions:o,viewport:l,current:h};const p=o.draggables[t.critical.draggable.id],g=a||M7({pageOffset:m.offset,draggable:p,draggables:o.draggables,droppables:o.droppables,previousImpact:t.impact,viewport:l,afterCritical:t.afterCritical}),v=Lxe({draggable:p,impact:g,previousImpact:t.impact,draggables:o.draggables,droppables:o.droppables});return{...t,current:h,dimensions:{draggables:o.draggables,droppables:v},impact:g,viewport:l,scrollJumpRequest:i||null,forceShouldAnimate:i?!1:null}};function Ixe(t,s){return t.map(n=>s[n])}var D7=({impact:t,viewport:s,draggables:n,destination:r,forceShouldAnimate:a})=>{const i=t.displaced,l=Ixe(i.all,n),o=bf({afterDragging:l,destination:r,displacedBy:t.displacedBy,viewport:s.frame,forceShouldAnimate:a,last:i});return{...t,displaced:o}},O7=({impact:t,draggable:s,droppable:n,draggables:r,viewport:a,afterCritical:i})=>{const l=Nv({impact:t,draggable:s,draggables:r,droppable:n,afterCritical:i});return IS({pageBorderBoxCenter:l,draggable:s,viewport:a})},R7=({state:t,dimensions:s,viewport:n})=>{t.movementMode!=="SNAP"&&gt();const r=t.impact,a=n||t.viewport,i=s||t.dimensions,{draggables:l,droppables:o}=i,c=l[t.critical.draggable.id],u=Ca(r);u||gt();const d=o[u],m=D7({impact:r,viewport:a,destination:d,draggables:l}),h=O7({impact:m,draggable:c,droppable:d,draggables:l,viewport:a,afterCritical:t.afterCritical});return Wm({impact:m,clientSelection:h,state:t,dimensions:i,viewport:a})},Bxe=t=>({index:t.index,droppableId:t.droppableId}),F7=({draggable:t,home:s,draggables:n,viewport:r})=>{const a=fp(s.axis,t.displaceBy),i=Ch(s.descriptor.id,n),l=i.indexOf(t);l===-1&&gt();const o=i.slice(l+1),c=o.reduce((h,p)=>(h[p.descriptor.id]=!0,h),{}),u={inVirtualList:s.descriptor.mode==="virtual",displacedBy:a,effected:c};return{impact:{displaced:bf({afterDragging:o,destination:s,displacedBy:a,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:a,at:{type:"REORDER",destination:Bxe(t.descriptor)}},afterCritical:u}},qxe=(t,s)=>({draggables:t.draggables,droppables:BS(t.droppables,s)}),zxe=({draggable:t,offset:s,initialWindowScroll:n})=>{const r=t0(t.client,s),a=s0(r,n);return{...t,placeholder:{...t.placeholder,client:r},client:r,page:a}},$xe=t=>{const s=t.frame;return s||gt(),s},Uxe=({additions:t,updatedDroppables:s,viewport:n})=>{const r=n.scroll.diff.value;return t.map(a=>{const i=a.descriptor.droppableId,l=s[i],c=$xe(l).scroll.diff.value,u=ir(r,c);return zxe({draggable:a,offset:u,initialWindowScroll:n.scroll.initial})})},Vxe=({state:t,published:s})=>{const n=s.modified.map(j=>{const w=t.dimensions.droppables[j.droppableId];return DS(w,j.scroll)}),r={...t.dimensions.droppables,...v7(n)},a=y7(Uxe({additions:s.additions,updatedDroppables:r,viewport:t.viewport})),i={...t.dimensions.draggables,...a};s.removals.forEach(j=>{delete i[j]});const l={droppables:r,draggables:i},o=Ca(t.impact),c=o?l.droppables[o]:null,u=l.draggables[t.critical.draggable.id],d=l.droppables[t.critical.droppable.id],{impact:m,afterCritical:h}=F7({draggable:u,home:d,draggables:i,viewport:t.viewport}),p=c&&c.isCombineEnabled?t.impact:m,g=M7({pageOffset:t.current.page.offset,draggable:l.draggables[t.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:p,viewport:t.viewport,afterCritical:h}),v={...t,phase:"DRAGGING",impact:g,onLiftImpact:m,dimensions:l,afterCritical:h,forceShouldAnimate:!1};return t.phase==="COLLECTING"?v:{...v,phase:"DROP_PENDING",reason:t.reason,isWaiting:!1}};const s1=t=>t.movementMode==="SNAP",tN=(t,s,n)=>{const r=qxe(t.dimensions,s);return!s1(t)||n?Wm({state:t,dimensions:r}):R7({state:t,dimensions:r})};function sN(t){return t.isDragging&&t.movementMode==="SNAP"?{...t,scrollJumpRequest:null}:t}const gD={phase:"IDLE",completed:null,shouldFlush:!1};var Wxe=(t=gD,s)=>{if(s.type==="FLUSH")return{...gD,shouldFlush:!0};if(s.type==="INITIAL_PUBLISH"){t.phase!=="IDLE"&&gt();const{critical:n,clientSelection:r,viewport:a,dimensions:i,movementMode:l}=s.payload,o=i.draggables[n.draggable.id],c=i.droppables[n.droppable.id],u={selection:r,borderBoxCenter:o.client.borderBox.center,offset:er},d={client:u,page:{selection:ir(u.selection,a.scroll.initial),borderBoxCenter:ir(u.selection,a.scroll.initial),offset:ir(u.selection,a.scroll.diff.value)}},m=bv(i.droppables).every(v=>!v.isFixedOnPage),{impact:h,afterCritical:p}=F7({draggable:o,home:c,draggables:i.draggables,viewport:a});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:l,dimensions:i,initial:d,current:d,isWindowScrollAllowed:m,impact:h,afterCritical:p,onLiftImpact:h,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null}}if(s.type==="COLLECTION_STARTING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"?t:(t.phase!=="DRAGGING"&&gt(),{...t,phase:"COLLECTING"});if(s.type==="PUBLISH_WHILE_DRAGGING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"||gt(),Vxe({state:t,published:s.payload});if(s.type==="MOVE"){if(t.phase==="DROP_PENDING")return t;Cc(t)||gt();const{client:n}=s.payload;return Vo(n,t.current.client.selection)?t:Wm({state:t,clientSelection:n,impact:s1(t)?t.impact:null})}if(s.type==="UPDATE_DROPPABLE_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="COLLECTING")return sN(t);Cc(t)||gt();const{id:n,newScroll:r}=s.payload,a=t.dimensions.droppables[n];if(!a)return t;const i=DS(a,r);return tN(t,i,!1)}if(s.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(t.phase==="DROP_PENDING")return t;Cc(t)||gt();const{id:n,isEnabled:r}=s.payload,a=t.dimensions.droppables[n];a||gt(),a.isEnabled===r&&gt();const i={...a,isEnabled:r};return tN(t,i,!0)}if(s.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(t.phase==="DROP_PENDING")return t;Cc(t)||gt();const{id:n,isCombineEnabled:r}=s.payload,a=t.dimensions.droppables[n];a||gt(),a.isCombineEnabled===r&&gt();const i={...a,isCombineEnabled:r};return tN(t,i,!0)}if(s.type==="MOVE_BY_WINDOW_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="DROP_ANIMATING")return t;Cc(t)||gt(),t.isWindowScrollAllowed||gt();const n=s.payload.newScroll;if(Vo(t.viewport.scroll.current,n))return sN(t);const r=S7(t.viewport,n);return s1(t)?R7({state:t,viewport:r}):Wm({state:t,viewport:r})}if(s.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Cc(t))return t;const n=s.payload.maxScroll;if(Vo(n,t.viewport.scroll.max))return t;const r={...t.viewport,scroll:{...t.viewport.scroll,max:n}};return{...t,viewport:r}}if(s.type==="MOVE_UP"||s.type==="MOVE_DOWN"||s.type==="MOVE_LEFT"||s.type==="MOVE_RIGHT"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&gt();const n=kxe({state:t,type:s.type});return n?Wm({state:t,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):t}if(s.type==="DROP_PENDING"){const n=s.payload.reason;return t.phase!=="COLLECTING"&&gt(),{...t,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(s.type==="DROP_ANIMATE"){const{completed:n,dropDuration:r,newHomeClientOffset:a}=s.payload;return t.phase==="DRAGGING"||t.phase==="DROP_PENDING"||gt(),{phase:"DROP_ANIMATING",completed:n,dropDuration:r,newHomeClientOffset:a,dimensions:t.dimensions}}if(s.type==="DROP_COMPLETE"){const{completed:n}=s.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return t};function Ws(t,s){return t instanceof Object&&"type"in t&&t.type===s}const Hxe=t=>({type:"BEFORE_INITIAL_CAPTURE",payload:t}),Kxe=t=>({type:"LIFT",payload:t}),Gxe=t=>({type:"INITIAL_PUBLISH",payload:t}),Yxe=t=>({type:"PUBLISH_WHILE_DRAGGING",payload:t}),Qxe=()=>({type:"COLLECTION_STARTING",payload:null}),Jxe=t=>({type:"UPDATE_DROPPABLE_SCROLL",payload:t}),Xxe=t=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}),Zxe=t=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}),L7=t=>({type:"MOVE",payload:t}),ege=t=>({type:"MOVE_BY_WINDOW_SCROLL",payload:t}),tge=t=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}),sge=()=>({type:"MOVE_UP",payload:null}),nge=()=>({type:"MOVE_DOWN",payload:null}),rge=()=>({type:"MOVE_RIGHT",payload:null}),age=()=>({type:"MOVE_LEFT",payload:null}),qS=()=>({type:"FLUSH",payload:null}),ige=t=>({type:"DROP_ANIMATE",payload:t}),zS=t=>({type:"DROP_COMPLETE",payload:t}),I7=t=>({type:"DROP",payload:t}),lge=t=>({type:"DROP_PENDING",payload:t}),B7=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var oge=t=>({getState:s,dispatch:n})=>r=>a=>{if(!Ws(a,"LIFT")){r(a);return}const{id:i,clientSelection:l,movementMode:o}=a.payload,c=s();c.phase==="DROP_ANIMATING"&&n(zS({completed:c.completed})),s().phase!=="IDLE"&&gt(),n(qS()),n(Hxe({draggableId:i,movementMode:o}));const d={draggableId:i,scrollOptions:{shouldPublishImmediately:o==="SNAP"}},{critical:m,dimensions:h,viewport:p}=t.startPublishing(d);n(Gxe({critical:m,dimensions:h,clientSelection:l,movementMode:o,viewport:p}))},cge=t=>()=>s=>n=>{Ws(n,"INITIAL_PUBLISH")&&t.dragging(),Ws(n,"DROP_ANIMATE")&&t.dropping(n.payload.completed.result.reason),(Ws(n,"FLUSH")||Ws(n,"DROP_COMPLETE"))&&t.resting(),s(n)};const $S={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},jf={opacity:{drop:0,combining:.7},scale:{drop:.75}},q7={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},wc=`${q7.outOfTheWay}s ${$S.outOfTheWay}`,Hm={fluid:`opacity ${wc}`,snap:`transform ${wc}, opacity ${wc}`,drop:t=>{const s=`${t}s ${$S.drop}`;return`transform ${s}, opacity ${s}`},outOfTheWay:`transform ${wc}`,placeholder:`height ${wc}, width ${wc}, margin ${wc}`},vD=t=>Vo(t,er)?void 0:`translate(${t.x}px, ${t.y}px)`,n1={moveTo:vD,drop:(t,s)=>{const n=vD(t);if(n)return s?`${n} scale(${jf.scale.drop})`:n}},{minDropTime:r1,maxDropTime:z7}=q7,dge=z7-r1,yD=1500,uge=.6;var hge=({current:t,destination:s,reason:n})=>{const r=vf(t,s);if(r<=0)return r1;if(r>=yD)return z7;const a=r/yD,i=r1+dge*a,l=n==="CANCEL"?i*uge:i;return Number(l.toFixed(2))},mge=({impact:t,draggable:s,dimensions:n,viewport:r,afterCritical:a})=>{const{draggables:i,droppables:l}=n,o=Ca(t),c=o?l[o]:null,u=l[s.descriptor.droppableId],d=O7({impact:t,draggable:s,draggables:i,afterCritical:a,droppable:c||u,viewport:r});return ja(d,s.client.borderBox.center)},fge=({draggables:t,reason:s,lastImpact:n,home:r,viewport:a,onLiftImpact:i})=>!n.at||s!=="DROP"?{impact:D7({draggables:t,impact:i,destination:r,viewport:a,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:yf},didDropInsideDroppable:!0};const pge=({getState:t,dispatch:s})=>n=>r=>{if(!Ws(r,"DROP")){n(r);return}const a=t(),i=r.payload.reason;if(a.phase==="COLLECTING"){s(lge({reason:i}));return}if(a.phase==="IDLE")return;a.phase==="DROP_PENDING"&&a.isWaiting&&gt(),a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||gt();const o=a.critical,c=a.dimensions,u=c.draggables[a.critical.draggable.id],{impact:d,didDropInsideDroppable:m}=fge({reason:i,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),h=m?OS(d):null,p=m?jv(d):null,g={index:o.draggable.index,droppableId:o.droppable.id},v={draggableId:u.descriptor.id,type:u.descriptor.type,source:g,reason:i,mode:a.movementMode,destination:h,combine:p},y=mge({impact:d,draggable:u,dimensions:c,viewport:a.viewport,afterCritical:a.afterCritical}),j={critical:a.critical,afterCritical:a.afterCritical,result:v,impact:d};if(!(!Vo(a.current.client.offset,y)||!!v.combine)){s(zS({completed:j}));return}const N=hge({current:a.current.client.offset,destination:y,reason:i});s(ige({newHomeClientOffset:y,dropDuration:N,completed:j}))};var $7=()=>({x:window.pageXOffset,y:window.pageYOffset});function xge(t){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:s=>{s.target!==window&&s.target!==window.document||t()}}}function gge({onWindowScroll:t}){function s(){t($7())}const n=gf(s),r=xge(n);let a=Uo;function i(){return a!==Uo}function l(){i()&&gt(),a=Ha(window,[r])}function o(){i()||gt(),n.cancel(),a(),a=Uo}return{start:l,stop:o,isActive:i}}const vge=t=>Ws(t,"DROP_COMPLETE")||Ws(t,"DROP_ANIMATE")||Ws(t,"FLUSH"),yge=t=>{const s=gge({onWindowScroll:n=>{t.dispatch(ege({newScroll:n}))}});return n=>r=>{!s.isActive()&&Ws(r,"INITIAL_PUBLISH")&&s.start(),s.isActive()&&vge(r)&&s.stop(),n(r)}};var bge=t=>{let s=!1,n=!1;const r=setTimeout(()=>{n=!0}),a=i=>{s||n||(s=!0,t(i),clearTimeout(r))};return a.wasCalled=()=>s,a},jge=()=>{const t=[],s=a=>{const i=t.findIndex(o=>o.timerId===a);i===-1&&gt();const[l]=t.splice(i,1);l.callback()};return{add:a=>{const i=setTimeout(()=>s(i)),l={timerId:i,callback:a};t.push(l)},flush:()=>{if(!t.length)return;const a=[...t];t.length=0,a.forEach(i=>{clearTimeout(i.timerId),i.callback()})}}};const wge=(t,s)=>t==null&&s==null?!0:t==null||s==null?!1:t.droppableId===s.droppableId&&t.index===s.index,Nge=(t,s)=>t==null&&s==null?!0:t==null||s==null?!1:t.draggableId===s.draggableId&&t.droppableId===s.droppableId,_ge=(t,s)=>{if(t===s)return!0;const n=t.draggable.id===s.draggable.id&&t.draggable.droppableId===s.draggable.droppableId&&t.draggable.type===s.draggable.type&&t.draggable.index===s.draggable.index,r=t.droppable.id===s.droppable.id&&t.droppable.type===s.droppable.type;return n&&r},jm=(t,s)=>{s()},Yx=(t,s)=>({draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:s});function nN(t,s,n,r){if(!t){n(r(s));return}const a=bge(n);t(s,{announce:a}),a.wasCalled()||n(r(s))}var Sge=(t,s)=>{const n=jge();let r=null;const a=(m,h)=>{r&&gt(),jm("onBeforeCapture",()=>{const p=t().onBeforeCapture;p&&p({draggableId:m,mode:h})})},i=(m,h)=>{r&&gt(),jm("onBeforeDragStart",()=>{const p=t().onBeforeDragStart;p&&p(Yx(m,h))})},l=(m,h)=>{r&&gt();const p=Yx(m,h);r={mode:h,lastCritical:m,lastLocation:p.source,lastCombine:null},n.add(()=>{jm("onDragStart",()=>nN(t().onDragStart,p,s,_g.onDragStart))})},o=(m,h)=>{const p=OS(h),g=jv(h);r||gt();const v=!_ge(m,r.lastCritical);v&&(r.lastCritical=m);const y=!wge(r.lastLocation,p);y&&(r.lastLocation=p);const j=!Nge(r.lastCombine,g);if(j&&(r.lastCombine=g),!v&&!y&&!j)return;const w={...Yx(m,r.mode),combine:g,destination:p};n.add(()=>{jm("onDragUpdate",()=>nN(t().onDragUpdate,w,s,_g.onDragUpdate))})},c=()=>{r||gt(),n.flush()},u=m=>{r||gt(),r=null,jm("onDragEnd",()=>nN(t().onDragEnd,m,s,_g.onDragEnd))};return{beforeCapture:a,beforeStart:i,start:l,update:o,flush:c,drop:u,abort:()=>{if(!r)return;const m={...Yx(r.lastCritical,r.mode),combine:null,destination:null,reason:"CANCEL"};u(m)}}},Cge=(t,s)=>{const n=Sge(t,s);return r=>a=>i=>{if(Ws(i,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(Ws(i,"INITIAL_PUBLISH")){const o=i.payload.critical;n.beforeStart(o,i.payload.movementMode),a(i),n.start(o,i.payload.movementMode);return}if(Ws(i,"DROP_COMPLETE")){const o=i.payload.completed.result;n.flush(),a(i),n.drop(o);return}if(a(i),Ws(i,"FLUSH")){n.abort();return}const l=r.getState();l.phase==="DRAGGING"&&n.update(l.critical,l.impact)}};const kge=t=>s=>n=>{if(!Ws(n,"DROP_ANIMATION_FINISHED")){s(n);return}const r=t.getState();r.phase!=="DROP_ANIMATING"&&gt(),t.dispatch(zS({completed:r.completed}))},Ege=t=>{let s=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),s&&(s(),s=null)}return a=>i=>{if((Ws(i,"FLUSH")||Ws(i,"DROP_COMPLETE")||Ws(i,"DROP_ANIMATION_FINISHED"))&&r(),a(i),!Ws(i,"DROP_ANIMATE"))return;const l={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){t.getState().phase==="DROP_ANIMATING"&&t.dispatch(B7())}};n=requestAnimationFrame(()=>{n=null,s=Ha(window,[l])})}};var Pge=t=>()=>s=>n=>{(Ws(n,"DROP_COMPLETE")||Ws(n,"FLUSH")||Ws(n,"DROP_ANIMATE"))&&t.stopPublishing(),s(n)},Tge=t=>{let s=!1;return()=>n=>r=>{if(Ws(r,"INITIAL_PUBLISH")){s=!0,t.tryRecordFocus(r.payload.critical.draggable.id),n(r),t.tryRestoreFocusRecorded();return}if(n(r),!!s){if(Ws(r,"FLUSH")){s=!1,t.tryRestoreFocusRecorded();return}if(Ws(r,"DROP_COMPLETE")){s=!1;const a=r.payload.completed.result;a.combine&&t.tryShiftRecord(a.draggableId,a.combine.draggableId),t.tryRestoreFocusRecorded()}}}};const Age=t=>Ws(t,"DROP_COMPLETE")||Ws(t,"DROP_ANIMATE")||Ws(t,"FLUSH");var Mge=t=>s=>n=>r=>{if(Age(r)){t.stop(),n(r);return}if(Ws(r,"INITIAL_PUBLISH")){n(r);const a=s.getState();a.phase!=="DRAGGING"&&gt(),t.start(a);return}n(r),t.scroll(s.getState())};const Dge=t=>s=>n=>{if(s(n),!Ws(n,"PUBLISH_WHILE_DRAGGING"))return;const r=t.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||t.dispatch(I7({reason:r.reason})))},Oge=r7;var Rge=({dimensionMarshal:t,focusMarshal:s,styleMarshal:n,getResponders:r,announce:a,autoScroller:i})=>n7(Wxe,Oge(Ofe(cge(n),Pge(t),oge(t),pge,kge,Ege,Dge,Mge(i),yge,Tge(s),Cge(r,a))));const rN=()=>({additions:{},removals:{},modified:{}});function Fge({registry:t,callbacks:s}){let n=rN(),r=null;const a=()=>{r||(s.collectionStarting(),r=requestAnimationFrame(()=>{r=null;const{additions:c,removals:u,modified:d}=n,m=Object.keys(c).map(g=>t.draggable.getById(g).getDimension(er)).sort((g,v)=>g.descriptor.index-v.descriptor.index),h=Object.keys(d).map(g=>{const y=t.droppable.getById(g).callbacks.getScrollWhileDragging();return{droppableId:g,scroll:y}}),p={additions:m,removals:Object.keys(u),modified:h};n=rN(),s.publish(p)}))};return{add:c=>{const u=c.descriptor.id;n.additions[u]=c,n.modified[c.descriptor.droppableId]=!0,n.removals[u]&&delete n.removals[u],a()},remove:c=>{const u=c.descriptor;n.removals[u.id]=!0,n.modified[u.droppableId]=!0,n.additions[u.id]&&delete n.additions[u.id],a()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,n=rN())}}}var U7=({scrollHeight:t,scrollWidth:s,height:n,width:r})=>{const a=ja({x:s,y:t},{x:r,y:n});return{x:Math.max(0,a.x),y:Math.max(0,a.y)}},V7=()=>{const t=document.documentElement;return t||gt(),t},W7=()=>{const t=V7();return U7({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,width:t.clientWidth,height:t.clientHeight})},Lge=()=>{const t=$7(),s=W7(),n=t.y,r=t.x,a=V7(),i=a.clientWidth,l=a.clientHeight,o=r+i,c=n+l;return{frame:fi({top:n,left:r,right:o,bottom:c}),scroll:{initial:t,current:t,max:s,diff:{value:er,displacement:er}}}},Ige=({critical:t,scrollOptions:s,registry:n})=>{const r=Lge(),a=r.scroll.current,i=t.droppable,l=n.droppable.getAllByType(i.type).map(d=>d.callbacks.getDimensionAndWatchScroll(a,s)),o=n.draggable.getAllByType(t.draggable.type).map(d=>d.getDimension(a));return{dimensions:{draggables:y7(o),droppables:v7(l)},critical:t,viewport:r}};function bD(t,s,n){return!(n.descriptor.id===s.id||n.descriptor.type!==s.type||t.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var Bge=(t,s)=>{let n=null;const r=Fge({callbacks:{publish:s.publishWhileDragging,collectionStarting:s.collectionStarting},registry:t}),a=(h,p)=>{t.droppable.exists(h)||gt(),n&&s.updateDroppableIsEnabled({id:h,isEnabled:p})},i=(h,p)=>{n&&(t.droppable.exists(h)||gt(),s.updateDroppableIsCombineEnabled({id:h,isCombineEnabled:p}))},l=(h,p)=>{n&&(t.droppable.exists(h)||gt(),s.updateDroppableScroll({id:h,newScroll:p}))},o=(h,p)=>{n&&t.droppable.getById(h).callbacks.scroll(p)},c=()=>{if(!n)return;r.stop();const h=n.critical.droppable;t.droppable.getAllByType(h.type).forEach(p=>p.callbacks.dragStopped()),n.unsubscribe(),n=null},u=h=>{n||gt();const p=n.critical.draggable;h.type==="ADDITION"&&bD(t,p,h.value)&&r.add(h.value),h.type==="REMOVAL"&&bD(t,p,h.value)&&r.remove(h.value)};return{updateDroppableIsEnabled:a,updateDroppableIsCombineEnabled:i,scrollDroppable:o,updateDroppableScroll:l,startPublishing:h=>{n&&gt();const p=t.draggable.getById(h.draggableId),g=t.droppable.getById(p.descriptor.droppableId),v={draggable:p.descriptor,droppable:g.descriptor},y=t.subscribe(u);return n={critical:v,unsubscribe:y},Ige({critical:v,registry:t,scrollOptions:h.scrollOptions})},stopPublishing:c}},H7=(t,s)=>t.phase==="IDLE"?!0:t.phase!=="DROP_ANIMATING"||t.completed.result.draggableId===s?!1:t.completed.result.reason==="DROP",qge=t=>{window.scrollBy(t.x,t.y)};const zge=Xn(t=>bv(t).filter(s=>!(!s.isEnabled||!s.frame))),$ge=(t,s)=>zge(s).find(r=>(r.frame||gt(),P7(r.frame.pageMarginBox)(t)))||null;var Uge=({center:t,destination:s,droppables:n})=>{if(s){const a=n[s];return a.frame?a:null}return $ge(t,n)};const wf={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:t=>t**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var Vge=(t,s,n=()=>wf)=>{const r=n(),a=t[s.size]*r.startFromPercentage,i=t[s.size]*r.maxScrollAtPercentage;return{startScrollingFrom:a,maxScrollValueAt:i}},K7=({startOfRange:t,endOfRange:s,current:n})=>{const r=s-t;return r===0?0:(n-t)/r},US=1,Wge=(t,s,n=()=>wf)=>{const r=n();if(t>s.startScrollingFrom)return 0;if(t<=s.maxScrollValueAt)return r.maxPixelScroll;if(t===s.startScrollingFrom)return US;const i=1-K7({startOfRange:s.maxScrollValueAt,endOfRange:s.startScrollingFrom,current:t}),l=r.maxPixelScroll*r.ease(i);return Math.ceil(l)},Hge=(t,s,n)=>{const r=n(),a=r.durationDampening.accelerateAt,i=r.durationDampening.stopDampeningAt,l=s,o=i,u=Date.now()-l;if(u>=i)return t;if(u<a)return US;const d=K7({startOfRange:a,endOfRange:o,current:u}),m=t*r.ease(d);return Math.ceil(m)},jD=({distanceToEdge:t,thresholds:s,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:a})=>{const i=Wge(t,s,a);return i===0?0:r?Math.max(Hge(i,n,a),US):i},wD=({container:t,distanceToEdges:s,dragStartTime:n,axis:r,shouldUseTimeDampening:a,getAutoScrollerOptions:i})=>{const l=Vge(t,r,i);return s[r.end]<s[r.start]?jD({distanceToEdge:s[r.end],thresholds:l,dragStartTime:n,shouldUseTimeDampening:a,getAutoScrollerOptions:i}):-1*jD({distanceToEdge:s[r.start],thresholds:l,dragStartTime:n,shouldUseTimeDampening:a,getAutoScrollerOptions:i})},Kge=({container:t,subject:s,proposedScroll:n})=>{const r=s.height>t.height,a=s.width>t.width;return!a&&!r?n:a&&r?null:{x:a?0:n.x,y:r?0:n.y}};const Gge=g7(t=>t===0?0:t);var G7=({dragStartTime:t,container:s,subject:n,center:r,shouldUseTimeDampening:a,getAutoScrollerOptions:i})=>{const l={top:r.y-s.top,right:s.right-r.x,bottom:s.bottom-r.y,left:r.x-s.left},o=wD({container:s,distanceToEdges:l,dragStartTime:t,axis:RS,shouldUseTimeDampening:a,getAutoScrollerOptions:i}),c=wD({container:s,distanceToEdges:l,dragStartTime:t,axis:w7,shouldUseTimeDampening:a,getAutoScrollerOptions:i}),u=Gge({x:c,y:o});if(Vo(u,er))return null;const d=Kge({container:s,subject:n,proposedScroll:u});return d?Vo(d,er)?null:d:null};const Yge=g7(t=>t===0?0:t>0?1:-1),VS=(()=>{const t=(s,n)=>s<0?s:s>n?s-n:0;return({current:s,max:n,change:r})=>{const a=ir(s,r),i={x:t(a.x,n.x),y:t(a.y,n.y)};return Vo(i,er)?null:i}})(),Y7=({max:t,current:s,change:n})=>{const r={x:Math.max(s.x,t.x),y:Math.max(s.y,t.y)},a=Yge(n),i=VS({max:r,current:s,change:a});return!i||a.x!==0&&i.x===0||a.y!==0&&i.y===0},WS=(t,s)=>Y7({current:t.scroll.current,max:t.scroll.max,change:s}),Qge=(t,s)=>{if(!WS(t,s))return null;const n=t.scroll.max,r=t.scroll.current;return VS({current:r,max:n,change:s})},HS=(t,s)=>{const n=t.frame;return n?Y7({current:n.scroll.current,max:n.scroll.max,change:s}):!1},Jge=(t,s)=>{const n=t.frame;return!n||!HS(t,s)?null:VS({current:n.scroll.current,max:n.scroll.max,change:s})};var Xge=({viewport:t,subject:s,center:n,dragStartTime:r,shouldUseTimeDampening:a,getAutoScrollerOptions:i})=>{const l=G7({dragStartTime:r,container:t.frame,subject:s,center:n,shouldUseTimeDampening:a,getAutoScrollerOptions:i});return l&&WS(t,l)?l:null},Zge=({droppable:t,subject:s,center:n,dragStartTime:r,shouldUseTimeDampening:a,getAutoScrollerOptions:i})=>{const l=t.frame;if(!l)return null;const o=G7({dragStartTime:r,container:l.pageMarginBox,subject:s,center:n,shouldUseTimeDampening:a,getAutoScrollerOptions:i});return o&&HS(t,o)?o:null},ND=({state:t,dragStartTime:s,shouldUseTimeDampening:n,scrollWindow:r,scrollDroppable:a,getAutoScrollerOptions:i})=>{const l=t.current.page.borderBoxCenter,c=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){const m=t.viewport,h=Xge({dragStartTime:s,viewport:m,subject:c,center:l,shouldUseTimeDampening:n,getAutoScrollerOptions:i});if(h){r(h);return}}const u=Uge({center:l,destination:Ca(t.impact),droppables:t.dimensions.droppables});if(!u)return;const d=Zge({dragStartTime:s,droppable:u,subject:c,center:l,shouldUseTimeDampening:n,getAutoScrollerOptions:i});d&&a(u.descriptor.id,d)},e0e=({scrollWindow:t,scrollDroppable:s,getAutoScrollerOptions:n=()=>wf})=>{const r=gf(t),a=gf(s);let i=null;const l=u=>{i||gt();const{shouldUseTimeDampening:d,dragStartTime:m}=i;ND({state:u,scrollWindow:r,scrollDroppable:a,dragStartTime:m,shouldUseTimeDampening:d,getAutoScrollerOptions:n})};return{start:u=>{i&&gt();const d=Date.now();let m=!1;const h=()=>{m=!0};ND({state:u,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:h,scrollDroppable:h,getAutoScrollerOptions:n}),i={dragStartTime:d,shouldUseTimeDampening:m},m&&l(u)},stop:()=>{i&&(r.cancel(),a.cancel(),i=null)},scroll:l}},t0e=({move:t,scrollDroppable:s,scrollWindow:n})=>{const r=(o,c)=>{const u=ir(o.current.client.selection,c);t({client:u})},a=(o,c)=>{if(!HS(o,c))return c;const u=Jge(o,c);if(!u)return s(o.descriptor.id,c),null;const d=ja(c,u);return s(o.descriptor.id,d),ja(c,d)},i=(o,c,u)=>{if(!o||!WS(c,u))return u;const d=Qge(c,u);if(!d)return n(u),null;const m=ja(u,d);return n(m),ja(u,m)};return o=>{const c=o.scrollJumpRequest;if(!c)return;const u=Ca(o.impact);u||gt();const d=a(o.dimensions.droppables[u],c);if(!d)return;const m=o.viewport,h=i(o.isWindowScrollAllowed,m,d);h&&r(o,h)}},s0e=({scrollDroppable:t,scrollWindow:s,move:n,getAutoScrollerOptions:r})=>{const a=e0e({scrollWindow:s,scrollDroppable:t,getAutoScrollerOptions:r}),i=t0e({move:n,scrollWindow:s,scrollDroppable:t});return{scroll:c=>{if(!(r().disabled||c.phase!=="DRAGGING")){if(c.movementMode==="FLUID"){a.scroll(c);return}c.scrollJumpRequest&&i(c)}},start:a.start,stop:a.stop}};const Zu="data-rfd",eh=(()=>{const t=`${Zu}-drag-handle`;return{base:t,draggableId:`${t}-draggable-id`,contextId:`${t}-context-id`}})(),a1=(()=>{const t=`${Zu}-draggable`;return{base:t,contextId:`${t}-context-id`,id:`${t}-id`}})(),n0e=(()=>{const t=`${Zu}-droppable`;return{base:t,contextId:`${t}-context-id`,id:`${t}-id`}})(),_D={contextId:`${Zu}-scroll-container-context-id`},r0e=t=>s=>`[${s}="${t}"]`,wm=(t,s)=>t.map(n=>{const r=n.styles[s];return r?`${n.selector} { ${r} }`:""}).join(" "),a0e="pointer-events: none;";var i0e=t=>{const s=r0e(t),n=(()=>{const o=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:s(eh.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:o,dragging:a0e,dropAnimating:o}}})(),r=(()=>{const o=`
      transition: ${Hm.outOfTheWay};
    `;return{selector:s(a1.contextId),styles:{dragging:o,dropAnimating:o,userCancel:o}}})(),a={selector:s(n0e.contextId),styles:{always:"overflow-anchor: none;"}},l=[r,n,a,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:wm(l,"always"),resting:wm(l,"resting"),dragging:wm(l,"dragging"),dropAnimating:wm(l,"dropAnimating"),userCancel:wm(l,"userCancel")}};const ka=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?b.useLayoutEffect:b.useEffect,aN=()=>{const t=document.querySelector("head");return t||gt(),t},SD=t=>{const s=document.createElement("style");return t&&s.setAttribute("nonce",t),s.type="text/css",s};function l0e(t,s){const n=Os(()=>i0e(t),[t]),r=b.useRef(null),a=b.useRef(null),i=Wt(Xn(m=>{const h=a.current;h||gt(),h.textContent=m}),[]),l=Wt(m=>{const h=r.current;h||gt(),h.textContent=m},[]);ka(()=>{!r.current&&!a.current||gt();const m=SD(s),h=SD(s);return r.current=m,a.current=h,m.setAttribute(`${Zu}-always`,t),h.setAttribute(`${Zu}-dynamic`,t),aN().appendChild(m),aN().appendChild(h),l(n.always),i(n.resting),()=>{const p=g=>{const v=g.current;v||gt(),aN().removeChild(v),g.current=null};p(r),p(a)}},[s,l,i,n.always,n.resting,t]);const o=Wt(()=>i(n.dragging),[i,n.dragging]),c=Wt(m=>{if(m==="DROP"){i(n.dropAnimating);return}i(n.userCancel)},[i,n.dropAnimating,n.userCancel]),u=Wt(()=>{a.current&&i(n.resting)},[i,n.resting]);return Os(()=>({dragging:o,dropping:c,resting:u}),[o,c,u])}function Q7(t,s){return Array.from(t.querySelectorAll(s))}var J7=t=>t&&t.ownerDocument&&t.ownerDocument.defaultView?t.ownerDocument.defaultView:window;function _v(t){return t instanceof J7(t).HTMLElement}function o0e(t,s){const n=`[${eh.contextId}="${t}"]`,r=Q7(document,n);if(!r.length)return null;const a=r.find(i=>i.getAttribute(eh.draggableId)===s);return!a||!_v(a)?null:a}function c0e(t){const s=b.useRef({}),n=b.useRef(null),r=b.useRef(null),a=b.useRef(!1),i=Wt(function(h,p){const g={id:h,focus:p};return s.current[h]=g,function(){const y=s.current;y[h]!==g&&delete y[h]}},[]),l=Wt(function(h){const p=o0e(t,h);p&&p!==document.activeElement&&p.focus()},[t]),o=Wt(function(h,p){n.current===h&&(n.current=p)},[]),c=Wt(function(){r.current||a.current&&(r.current=requestAnimationFrame(()=>{r.current=null;const h=n.current;h&&l(h)}))},[l]),u=Wt(function(h){n.current=null;const p=document.activeElement;p&&p.getAttribute(eh.draggableId)===h&&(n.current=h)},[]);return ka(()=>(a.current=!0,function(){a.current=!1;const h=r.current;h&&cancelAnimationFrame(h)}),[]),Os(()=>({register:i,tryRecordFocus:u,tryRestoreFocusRecorded:c,tryShiftRecord:o}),[i,u,c,o])}function d0e(){const t={draggables:{},droppables:{}},s=[];function n(m){return s.push(m),function(){const p=s.indexOf(m);p!==-1&&s.splice(p,1)}}function r(m){s.length&&s.forEach(h=>h(m))}function a(m){return t.draggables[m]||null}function i(m){const h=a(m);return h||gt(),h}const l={register:m=>{t.draggables[m.descriptor.id]=m,r({type:"ADDITION",value:m})},update:(m,h)=>{const p=t.draggables[h.descriptor.id];p&&p.uniqueId===m.uniqueId&&(delete t.draggables[h.descriptor.id],t.draggables[m.descriptor.id]=m)},unregister:m=>{const h=m.descriptor.id,p=a(h);p&&m.uniqueId===p.uniqueId&&(delete t.draggables[h],t.droppables[m.descriptor.droppableId]&&r({type:"REMOVAL",value:m}))},getById:i,findById:a,exists:m=>!!a(m),getAllByType:m=>Object.values(t.draggables).filter(h=>h.descriptor.type===m)};function o(m){return t.droppables[m]||null}function c(m){const h=o(m);return h||gt(),h}const u={register:m=>{t.droppables[m.descriptor.id]=m},unregister:m=>{const h=o(m.descriptor.id);h&&m.uniqueId===h.uniqueId&&delete t.droppables[m.descriptor.id]},getById:c,findById:o,exists:m=>!!o(m),getAllByType:m=>Object.values(t.droppables).filter(h=>h.descriptor.type===m)};function d(){t.draggables={},t.droppables={},s.length=0}return{draggable:l,droppable:u,subscribe:n,clean:d}}function u0e(){const t=Os(d0e,[]);return b.useEffect(()=>function(){t.clean()},[t]),t}var KS=Be.createContext(null),l0=()=>{const t=document.body;return t||gt(),t};const h0e={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},m0e=t=>`rfd-announcement-${t}`;function f0e(t){const s=Os(()=>m0e(t),[t]),n=b.useRef(null);return b.useEffect(function(){const i=document.createElement("div");return n.current=i,i.id=s,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),n0(i.style,h0e),l0().appendChild(i),function(){setTimeout(function(){const c=l0();c.contains(i)&&c.removeChild(i),i===n.current&&(n.current=null)})}},[s]),Wt(a=>{const i=n.current;if(i){i.textContent=a;return}},[])}const p0e={separator:"::"};function GS(t,s=p0e){const n=Be.useId();return Os(()=>`${t}${s.separator}${n}`,[s.separator,t,n])}function x0e({contextId:t,uniqueId:s}){return`rfd-hidden-text-${t}-${s}`}function g0e({contextId:t,text:s}){const n=GS("hidden-text",{separator:"-"}),r=Os(()=>x0e({contextId:t,uniqueId:n}),[n,t]);return b.useEffect(function(){const i=document.createElement("div");return i.id=r,i.textContent=s,i.style.display="none",l0().appendChild(i),function(){const o=l0();o.contains(i)&&o.removeChild(i)}},[r,s]),r}var Sv=Be.createContext(null);function X7(t){const s=b.useRef(t);return b.useEffect(()=>{s.current=t}),s}function v0e(){let t=null;function s(){return!!t}function n(l){return l===t}function r(l){t&&gt();const o={abandon:l};return t=o,o}function a(){t||gt(),t=null}function i(){t&&(t.abandon(),a())}return{isClaimed:s,isActive:n,claim:r,release:a,tryAbandon:i}}function Nf(t){return t.phase==="IDLE"||t.phase==="DROP_ANIMATING"?!1:t.isDragging}const y0e=9,b0e=13,YS=27,Z7=32,j0e=33,w0e=34,N0e=35,_0e=36,S0e=37,C0e=38,k0e=39,E0e=40,P0e={[b0e]:!0,[y0e]:!0};var eq=t=>{P0e[t.keyCode]&&t.preventDefault()};const Cv=(()=>{const t="visibilitychange";return typeof document>"u"?t:[t,`ms${t}`,`webkit${t}`,`moz${t}`,`o${t}`].find(r=>`on${r}`in document)||t})(),tq=0,CD=5;function T0e(t,s){return Math.abs(s.x-t.x)>=CD||Math.abs(s.y-t.y)>=CD}const kD={type:"IDLE"};function A0e({cancel:t,completed:s,getPhase:n,setPhase:r}){return[{eventName:"mousemove",fn:a=>{const{button:i,clientX:l,clientY:o}=a;if(i!==tq)return;const c={x:l,y:o},u=n();if(u.type==="DRAGGING"){a.preventDefault(),u.actions.move(c);return}u.type!=="PENDING"&&gt();const d=u.point;if(!T0e(d,c))return;a.preventDefault();const m=u.actions.fluidLift(c);r({type:"DRAGGING",actions:m})}},{eventName:"mouseup",fn:a=>{const i=n();if(i.type!=="DRAGGING"){t();return}a.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),s()}},{eventName:"mousedown",fn:a=>{n().type==="DRAGGING"&&a.preventDefault(),t()}},{eventName:"keydown",fn:a=>{if(n().type==="PENDING"){t();return}if(a.keyCode===YS){a.preventDefault(),t();return}eq(a)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:a=>{const i=n();if(i.type==="IDLE"&&gt(),i.actions.shouldRespectForcePress()){t();return}a.preventDefault()}},{eventName:Cv,fn:t}]}function M0e(t){const s=b.useRef(kD),n=b.useRef(Uo),r=Os(()=>({eventName:"mousedown",fn:function(m){if(m.defaultPrevented||m.button!==tq||m.ctrlKey||m.metaKey||m.shiftKey||m.altKey)return;const h=t.findClosestDraggableId(m);if(!h)return;const p=t.tryGetLock(h,l,{sourceEvent:m});if(!p)return;m.preventDefault();const g={x:m.clientX,y:m.clientY};n.current(),u(p,g)}}),[t]),a=Os(()=>({eventName:"webkitmouseforcewillbegin",fn:d=>{if(d.defaultPrevented)return;const m=t.findClosestDraggableId(d);if(!m)return;const h=t.findOptionsForDraggable(m);h&&(h.shouldRespectForcePress||t.canGetLock(m)&&d.preventDefault())}}),[t]),i=Wt(function(){const m={passive:!1,capture:!0};n.current=Ha(window,[a,r],m)},[a,r]),l=Wt(()=>{s.current.type!=="IDLE"&&(s.current=kD,n.current(),i())},[i]),o=Wt(()=>{const d=s.current;l(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[l]),c=Wt(function(){const m={capture:!0,passive:!1},h=A0e({cancel:o,completed:l,getPhase:()=>s.current,setPhase:p=>{s.current=p}});n.current=Ha(window,h,m)},[o,l]),u=Wt(function(m,h){s.current.type!=="IDLE"&&gt(),s.current={type:"PENDING",point:h,actions:m},c()},[c]);ka(function(){return i(),function(){n.current()}},[i])}function D0e(){}const O0e={[w0e]:!0,[j0e]:!0,[_0e]:!0,[N0e]:!0};function R0e(t,s){function n(){s(),t.cancel()}function r(){s(),t.drop()}return[{eventName:"keydown",fn:a=>{if(a.keyCode===YS){a.preventDefault(),n();return}if(a.keyCode===Z7){a.preventDefault(),r();return}if(a.keyCode===E0e){a.preventDefault(),t.moveDown();return}if(a.keyCode===C0e){a.preventDefault(),t.moveUp();return}if(a.keyCode===k0e){a.preventDefault(),t.moveRight();return}if(a.keyCode===S0e){a.preventDefault(),t.moveLeft();return}if(O0e[a.keyCode]){a.preventDefault();return}eq(a)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:Cv,fn:n}]}function F0e(t){const s=b.useRef(D0e),n=Os(()=>({eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==Z7)return;const l=t.findClosestDraggableId(i);if(!l)return;const o=t.tryGetLock(l,d,{sourceEvent:i});if(!o)return;i.preventDefault();let c=!0;const u=o.snapLift();s.current();function d(){c||gt(),c=!1,s.current(),r()}s.current=Ha(window,R0e(u,d),{capture:!0,passive:!1})}}),[t]),r=Wt(function(){const i={passive:!1,capture:!0};s.current=Ha(window,[n],i)},[n]);ka(function(){return r(),function(){s.current()}},[r])}const iN={type:"IDLE"},L0e=120,I0e=.15;function B0e({cancel:t,getPhase:s}){return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(s().type!=="DRAGGING"){t();return}n.keyCode===YS&&n.preventDefault(),t()}},{eventName:Cv,fn:t}]}function q0e({cancel:t,completed:s,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:r=>{const a=n();if(a.type!=="DRAGGING"){t();return}a.hasMoved=!0;const{clientX:i,clientY:l}=r.touches[0],o={x:i,y:l};r.preventDefault(),a.actions.move(o)}},{eventName:"touchend",fn:r=>{const a=n();if(a.type!=="DRAGGING"){t();return}r.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),s()}},{eventName:"touchcancel",fn:r=>{if(n().type!=="DRAGGING"){t();return}r.preventDefault(),t()}},{eventName:"touchforcechange",fn:r=>{const a=n();a.type==="IDLE"&&gt();const i=r.touches[0];if(!i||!(i.force>=I0e))return;const o=a.actions.shouldRespectForcePress();if(a.type==="PENDING"){o&&t();return}if(o){if(a.hasMoved){r.preventDefault();return}t();return}r.preventDefault()}},{eventName:Cv,fn:t}]}function z0e(t){const s=b.useRef(iN),n=b.useRef(Uo),r=Wt(function(){return s.current},[]),a=Wt(function(p){s.current=p},[]),i=Os(()=>({eventName:"touchstart",fn:function(p){if(p.defaultPrevented)return;const g=t.findClosestDraggableId(p);if(!g)return;const v=t.tryGetLock(g,o,{sourceEvent:p});if(!v)return;const y=p.touches[0],{clientX:j,clientY:w}=y,N={x:j,y:w};n.current(),m(v,N)}}),[t]),l=Wt(function(){const p={capture:!0,passive:!1};n.current=Ha(window,[i],p)},[i]),o=Wt(()=>{const h=s.current;h.type!=="IDLE"&&(h.type==="PENDING"&&clearTimeout(h.longPressTimerId),a(iN),n.current(),l())},[l,a]),c=Wt(()=>{const h=s.current;o(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[o]),u=Wt(function(){const p={capture:!0,passive:!1},g={cancel:c,completed:o,getPhase:r},v=Ha(window,q0e(g),p),y=Ha(window,B0e(g),p);n.current=function(){v(),y()}},[c,r,o]),d=Wt(function(){const p=r();p.type!=="PENDING"&&gt();const g=p.actions.fluidLift(p.point);a({type:"DRAGGING",actions:g,hasMoved:!1})},[r,a]),m=Wt(function(p,g){r().type!=="IDLE"&&gt();const v=setTimeout(d,L0e);a({type:"PENDING",point:g,actions:p,longPressTimerId:v}),u()},[u,r,a,d]);ka(function(){return l(),function(){n.current();const g=r();g.type==="PENDING"&&(clearTimeout(g.longPressTimerId),a(iN))}},[r,l,a]),ka(function(){return Ha(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const $0e=["input","button","textarea","select","option","optgroup","video","audio"];function sq(t,s){if(s==null)return!1;if($0e.includes(s.tagName.toLowerCase()))return!0;const r=s.getAttribute("contenteditable");return r==="true"||r===""?!0:s===t?!1:sq(t,s.parentElement)}function U0e(t,s){const n=s.target;return _v(n)?sq(t,n):!1}var V0e=t=>fi(t.getBoundingClientRect()).center;function W0e(t){return t instanceof J7(t).Element}const H0e=(()=>{const t="matches";return typeof document>"u"?t:[t,"msMatchesSelector","webkitMatchesSelector"].find(r=>r in Element.prototype)||t})();function nq(t,s){return t==null?null:t[H0e](s)?t:nq(t.parentElement,s)}function K0e(t,s){return t.closest?t.closest(s):nq(t,s)}function G0e(t){return`[${eh.contextId}="${t}"]`}function Y0e(t,s){const n=s.target;if(!W0e(n))return null;const r=G0e(t),a=K0e(n,r);return!a||!_v(a)?null:a}function Q0e(t,s){const n=Y0e(t,s);return n?n.getAttribute(eh.draggableId):null}function J0e(t,s){const n=`[${a1.contextId}="${t}"]`,a=Q7(document,n).find(i=>i.getAttribute(a1.id)===s);return!a||!_v(a)?null:a}function X0e(t){t.preventDefault()}function Qx({expected:t,phase:s,isLockActive:n,shouldWarn:r}){return!(!n()||t!==s)}function rq({lockAPI:t,store:s,registry:n,draggableId:r}){if(t.isClaimed())return!1;const a=n.draggable.findById(r);return!(!a||!a.options.isEnabled||!H7(s.getState(),r))}function Z0e({lockAPI:t,contextId:s,store:n,registry:r,draggableId:a,forceSensorStop:i,sourceEvent:l}){if(!rq({lockAPI:t,store:n,registry:r,draggableId:a}))return null;const c=r.draggable.getById(a),u=J0e(s,c.descriptor.id);if(!u||l&&!c.options.canDragInteractiveElements&&U0e(u,l))return null;const d=t.claim(i||Uo);let m="PRE_DRAG";function h(){return c.options.shouldRespectForcePress}function p(){return t.isActive(d)}function g(T,A){Qx({expected:T,phase:m,isLockActive:p,shouldWarn:!0})&&n.dispatch(A())}const v=g.bind(null,"DRAGGING");function y(T){function A(){t.release(),m="COMPLETED"}m!=="PRE_DRAG"&&(A(),gt()),n.dispatch(Kxe(T.liftActionArgs)),m="DRAGGING";function P(C,O={shouldBlockNextClick:!1}){if(T.cleanup(),O.shouldBlockNextClick){const M=Ha(window,[{eventName:"click",fn:X0e,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(M)}A(),n.dispatch(I7({reason:C}))}return{isActive:()=>Qx({expected:"DRAGGING",phase:m,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:h,drop:C=>P("DROP",C),cancel:C=>P("CANCEL",C),...T.actions}}function j(T){const A=gf(C=>{v(()=>L7({client:C}))});return{...y({liftActionArgs:{id:a,clientSelection:T,movementMode:"FLUID"},cleanup:()=>A.cancel(),actions:{move:A}}),move:A}}function w(){const T={moveUp:()=>v(sge),moveRight:()=>v(rge),moveDown:()=>v(nge),moveLeft:()=>v(age)};return y({liftActionArgs:{id:a,clientSelection:V0e(u),movementMode:"SNAP"},cleanup:Uo,actions:T})}function N(){Qx({expected:"PRE_DRAG",phase:m,isLockActive:p,shouldWarn:!0})&&t.release()}return{isActive:()=>Qx({expected:"PRE_DRAG",phase:m,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:h,fluidLift:j,snapLift:w,abort:N}}const eve=[M0e,F0e,z0e];function tve({contextId:t,store:s,registry:n,customSensors:r,enableDefaultSensors:a}){const i=[...a?eve:[],...r||[]],l=b.useState(()=>v0e())[0],o=Wt(function(y,j){Nf(y)&&!Nf(j)&&l.tryAbandon()},[l]);ka(function(){let y=s.getState();return s.subscribe(()=>{const w=s.getState();o(y,w),y=w})},[l,s,o]),ka(()=>l.tryAbandon,[l.tryAbandon]);const c=Wt(v=>rq({lockAPI:l,registry:n,store:s,draggableId:v}),[l,n,s]),u=Wt((v,y,j)=>Z0e({lockAPI:l,registry:n,contextId:t,store:s,draggableId:v,forceSensorStop:y||null,sourceEvent:j&&j.sourceEvent?j.sourceEvent:null}),[t,l,n,s]),d=Wt(v=>Q0e(t,v),[t]),m=Wt(v=>{const y=n.draggable.findById(v);return y?y.options:null},[n.draggable]),h=Wt(function(){l.isClaimed()&&(l.tryAbandon(),s.getState().phase!=="IDLE"&&s.dispatch(qS()))},[l,s]),p=Wt(()=>l.isClaimed(),[l]),g=Os(()=>({canGetLock:c,tryGetLock:u,findClosestDraggableId:d,findOptionsForDraggable:m,tryReleaseLock:h,isLockClaimed:p}),[c,u,d,m,h,p]);for(let v=0;v<i.length;v++)i[v](g)}const sve=t=>({onBeforeCapture:s=>{const n=()=>{t.onBeforeCapture&&t.onBeforeCapture(s)};hd.flushSync(n)},onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}),nve=t=>({...wf,...t.autoScrollerOptions,durationDampening:{...wf.durationDampening,...t.autoScrollerOptions}});function Nm(t){return t.current||gt(),t.current}function rve(t){const{contextId:s,setCallbacks:n,sensors:r,nonce:a,dragHandleUsageInstructions:i}=t,l=b.useRef(null),o=X7(t),c=Wt(()=>sve(o.current),[o]),u=Wt(()=>nve(o.current),[o]),d=f0e(s),m=g0e({contextId:s,text:i}),h=l0e(s,a),p=Wt(M=>{Nm(l).dispatch(M)},[]),g=Os(()=>ZM({publishWhileDragging:Yxe,updateDroppableScroll:Jxe,updateDroppableIsEnabled:Xxe,updateDroppableIsCombineEnabled:Zxe,collectionStarting:Qxe},p),[p]),v=u0e(),y=Os(()=>Bge(v,g),[v,g]),j=Os(()=>s0e({scrollWindow:qge,scrollDroppable:y.scrollDroppable,getAutoScrollerOptions:u,...ZM({move:L7},p)}),[y.scrollDroppable,p,u]),w=c0e(s),N=Os(()=>Rge({announce:d,autoScroller:j,dimensionMarshal:y,focusMarshal:w,getResponders:c,styleMarshal:h}),[d,j,y,w,c,h]);l.current=N;const _=Wt(()=>{const M=Nm(l);M.getState().phase!=="IDLE"&&M.dispatch(qS())},[]),T=Wt(()=>{const M=Nm(l).getState();return M.phase==="DROP_ANIMATING"?!0:M.phase==="IDLE"?!1:M.isDragging},[]),A=Os(()=>({isDragging:T,tryAbort:_}),[T,_]);n(A);const P=Wt(M=>H7(Nm(l).getState(),M),[]),C=Wt(()=>Cc(Nm(l).getState()),[]),O=Os(()=>({marshal:y,focus:w,contextId:s,canLift:P,isMovementAllowed:C,dragHandleUsageInstructionsId:m,registry:v}),[s,y,m,w,P,C,v]);return tve({contextId:s,store:N,registry:v,customSensors:r||null,enableDefaultSensors:t.enableDefaultSensors!==!1}),b.useEffect(()=>_,[_]),Be.createElement(Sv.Provider,{value:O},Be.createElement(Ppe,{context:KS,store:N},t.children))}function ave(){return Be.useId()}function pp(t){const s=ave(),n=t.dragHandleUsageInstructions||_g.dragHandleUsageInstructions;return Be.createElement(Fpe,null,r=>Be.createElement(rve,{nonce:t.nonce,contextId:s,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd,autoScrollerOptions:t.autoScrollerOptions},t.children))}const ED={dragging:5e3,dropAnimating:4500},ive=(t,s)=>s?Hm.drop(s.duration):t?Hm.snap:Hm.fluid,lve=(t,s)=>{if(t)return s?jf.opacity.drop:jf.opacity.combining},ove=t=>t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP";function cve(t){const n=t.dimension.client,{offset:r,combineWith:a,dropping:i}=t,l=!!a,o=ove(t),c=!!i,u=c?n1.drop(r,l):n1.moveTo(r);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:ive(o,i),transform:u,opacity:lve(l,c),zIndex:c?ED.dropAnimating:ED.dragging,pointerEvents:"none"}}function dve(t){return{transform:n1.moveTo(t.offset),transition:t.shouldAnimateDisplacement?void 0:"none"}}function uve(t){return t.type==="DRAGGING"?cve(t):dve(t)}function hve(t,s,n=er){const r=window.getComputedStyle(s),a=s.getBoundingClientRect(),i=u7(a,r),l=s0(i,n),o={client:i,tagName:s.tagName.toLowerCase(),display:r.display},c={x:i.marginBox.width,y:i.marginBox.height};return{descriptor:t,placeholder:o,displaceBy:c,client:i,page:l}}function mve(t){const s=GS("draggable"),{descriptor:n,registry:r,getDraggableRef:a,canDragInteractiveElements:i,shouldRespectForcePress:l,isEnabled:o}=t,c=Os(()=>({canDragInteractiveElements:i,shouldRespectForcePress:l,isEnabled:o}),[i,o,l]),u=Wt(p=>{const g=a();return g||gt(),hve(n,g,p)},[n,a]),d=Os(()=>({uniqueId:s,descriptor:n,options:c,getDimension:u}),[n,u,c,s]),m=b.useRef(d),h=b.useRef(!0);ka(()=>(r.draggable.register(m.current),()=>r.draggable.unregister(m.current)),[r.draggable]),ka(()=>{if(h.current){h.current=!1;return}const p=m.current;m.current=d,r.draggable.update(d,p)},[d,r.draggable])}var QS=Be.createContext(null);function o0(t){const s=b.useContext(t);return s||gt(),s}function fve(t){t.preventDefault()}const pve=t=>{const s=b.useRef(null),n=Wt((A=null)=>{s.current=A},[]),r=Wt(()=>s.current,[]),{contextId:a,dragHandleUsageInstructionsId:i,registry:l}=o0(Sv),{type:o,droppableId:c}=o0(QS),u=Os(()=>({id:t.draggableId,index:t.index,type:o,droppableId:c}),[t.draggableId,t.index,o,c]),{children:d,draggableId:m,isEnabled:h,shouldRespectForcePress:p,canDragInteractiveElements:g,isClone:v,mapped:y,dropAnimationFinished:j}=t;if(!v){const A=Os(()=>({descriptor:u,registry:l,getDraggableRef:r,canDragInteractiveElements:g,shouldRespectForcePress:p,isEnabled:h}),[u,l,r,g,p,h]);mve(A)}const w=Os(()=>h?{tabIndex:0,role:"button","aria-describedby":i,"data-rfd-drag-handle-draggable-id":m,"data-rfd-drag-handle-context-id":a,draggable:!1,onDragStart:fve}:null,[a,i,m,h]),N=Wt(A=>{y.type==="DRAGGING"&&y.dropping&&A.propertyName==="transform"&&hd.flushSync(j)},[j,y]),_=Os(()=>{const A=uve(y),P=y.type==="DRAGGING"&&y.dropping?N:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":a,"data-rfd-draggable-id":m,style:A,onTransitionEnd:P},dragHandleProps:w}},[a,w,m,y,N,n]),T=Os(()=>({draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}),[u.droppableId,u.id,u.index,u.type]);return Be.createElement(Be.Fragment,null,d(_,y.snapshot,T))};var aq=(t,s)=>t===s,iq=t=>{const{combine:s,destination:n}=t;return n?n.droppableId:s?s.droppableId:null};const xve=t=>t.combine?t.combine.draggableId:null,gve=t=>t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null;function vve(){const t=Xn((a,i)=>({x:a,y:i})),s=Xn((a,i,l=null,o=null,c=null)=>({isDragging:!0,isClone:i,isDropAnimating:!!c,dropAnimation:c,mode:a,draggingOver:l,combineWith:o,combineTargetFor:null})),n=Xn((a,i,l,o,c=null,u=null,d=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:u,mode:i,offset:a,dimension:l,forceShouldAnimate:d,snapshot:s(i,o,c,u,null)}}));return(a,i)=>{if(Nf(a)){if(a.critical.draggable.id!==i.draggableId)return null;const l=a.current.client.offset,o=a.dimensions.draggables[i.draggableId],c=Ca(a.impact),u=gve(a.impact),d=a.forceShouldAnimate;return n(t(l.x,l.y),a.movementMode,o,i.isClone,c,u,d)}if(a.phase==="DROP_ANIMATING"){const l=a.completed;if(l.result.draggableId!==i.draggableId)return null;const o=i.isClone,c=a.dimensions.draggables[i.draggableId],u=l.result,d=u.mode,m=iq(u),h=xve(u),g={duration:a.dropDuration,curve:$S.drop,moveTo:a.newHomeClientOffset,opacity:h?jf.opacity.drop:null,scale:h?jf.scale.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:c,dropping:g,draggingOver:m,combineWith:h,mode:d,forceShouldAnimate:null,snapshot:s(d,o,m,h,g)}}}return null}}function lq(t=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:t,combineWith:null}}const yve={mapped:{type:"SECONDARY",offset:er,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:lq(null)}};function bve(){const t=Xn((l,o)=>({x:l,y:o})),s=Xn(lq),n=Xn((l,o=null,c)=>({mapped:{type:"SECONDARY",offset:l,combineTargetFor:o,shouldAnimateDisplacement:c,snapshot:s(o)}})),r=l=>l?n(er,l,!0):null,a=(l,o,c,u)=>{const d=c.displaced.visible[l],m=!!(u.inVirtualList&&u.effected[l]),h=jv(c),p=h&&h.draggableId===l?o:null;if(!d){if(!m)return r(p);if(c.displaced.invisible[l])return null;const y=Sh(u.displacedBy.point),j=t(y.x,y.y);return n(j,p,!0)}if(m)return r(p);const g=c.displacedBy.point,v=t(g.x,g.y);return n(v,p,d.shouldAnimate)};return(l,o)=>{if(Nf(l))return l.critical.draggable.id===o.draggableId?null:a(o.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){const c=l.completed;return c.result.draggableId===o.draggableId?null:a(o.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null}}const jve=()=>{const t=vve(),s=bve();return(r,a)=>t(r,a)||s(r,a)||yve},wve={dropAnimationFinished:B7},Nve=d7(jve,wve,null,{context:KS,areStatePropsEqual:aq})(pve);function oq(t){return o0(QS).isUsingCloneFor===t.draggableId&&!t.isClone?null:Be.createElement(Nve,t)}function Gc(t){const s=typeof t.isDragDisabled=="boolean"?!t.isDragDisabled:!0,n=!!t.disableInteractiveElementBlocking,r=!!t.shouldRespectForcePress;return Be.createElement(oq,n0({},t,{isClone:!1,isEnabled:s,canDragInteractiveElements:n,shouldRespectForcePress:r}))}const cq=t=>s=>t===s,_ve=cq("scroll"),Sve=cq("auto"),PD=(t,s)=>s(t.overflowX)||s(t.overflowY),Cve=t=>{const s=window.getComputedStyle(t),n={overflowX:s.overflowX,overflowY:s.overflowY};return PD(n,_ve)||PD(n,Sve)},kve=()=>!1,dq=t=>t==null?null:t===document.body?kve()?t:null:t===document.documentElement?null:Cve(t)?t:dq(t.parentElement);var i1=t=>({x:t.scrollLeft,y:t.scrollTop});const uq=t=>t?window.getComputedStyle(t).position==="fixed"?!0:uq(t.parentElement):!1;var Eve=t=>{const s=dq(t),n=uq(t);return{closestScrollable:s,isFixedOnPage:n}},Pve=({descriptor:t,isEnabled:s,isCombineEnabled:n,isFixedOnPage:r,direction:a,client:i,page:l,closest:o})=>{const c=(()=>{if(!o)return null;const{scrollSize:h,client:p}=o,g=U7({scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth,height:p.paddingBox.height,width:p.paddingBox.width});return{pageMarginBox:o.page.marginBox,frameClient:p,scrollSize:h,shouldClipSubject:o.shouldClipSubject,scroll:{initial:o.scroll,current:o.scroll,max:g,diff:{value:er,displacement:er}}}})(),u=a==="vertical"?RS:w7,d=Xu({page:l,withPlaceholder:null,axis:u,frame:c});return{descriptor:t,isCombineEnabled:n,isFixedOnPage:r,axis:u,isEnabled:s,client:i,page:l,frame:c,subject:d}};const Tve=(t,s)=>{const n=h7(t);if(!s||t!==s)return n;const r=n.paddingBox.top-s.scrollTop,a=n.paddingBox.left-s.scrollLeft,i=r+s.scrollHeight,l=a+s.scrollWidth,c=AS({top:r,right:l,bottom:i,left:a},n.border);return MS({borderBox:c,margin:n.margin,border:n.border,padding:n.padding})};var Ave=({ref:t,descriptor:s,env:n,windowScroll:r,direction:a,isDropDisabled:i,isCombineEnabled:l,shouldClipSubject:o})=>{const c=n.closestScrollable,u=Tve(t,c),d=s0(u,r),m=(()=>{if(!c)return null;const p=h7(c),g={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:p,page:s0(p,r),scroll:i1(c),scrollSize:g,shouldClipSubject:o}})();return Pve({descriptor:s,isEnabled:!i,isCombineEnabled:l,isFixedOnPage:n.isFixedOnPage,direction:a,client:u,page:d,closest:m})};const Mve={passive:!1},Dve={passive:!0};var TD=t=>t.shouldPublishImmediately?Mve:Dve;const Jx=t=>t&&t.env.closestScrollable||null;function Ove(t){const s=b.useRef(null),n=o0(Sv),r=GS("droppable"),{registry:a,marshal:i}=n,l=X7(t),o=Os(()=>({id:t.droppableId,type:t.type,mode:t.mode}),[t.droppableId,t.mode,t.type]),c=b.useRef(o),u=Os(()=>Xn((_,T)=>{s.current||gt();const A={x:_,y:T};i.updateDroppableScroll(o.id,A)}),[o.id,i]),d=Wt(()=>{const _=s.current;return!_||!_.env.closestScrollable?er:i1(_.env.closestScrollable)},[]),m=Wt(()=>{const _=d();u(_.x,_.y)},[d,u]),h=Os(()=>gf(m),[m]),p=Wt(()=>{const _=s.current,T=Jx(_);if(_&&T||gt(),_.scrollOptions.shouldPublishImmediately){m();return}h()},[h,m]),g=Wt((_,T)=>{s.current&&gt();const A=l.current,P=A.getDroppableRef();P||gt();const C=Eve(P),O={ref:P,descriptor:o,env:C,scrollOptions:T};s.current=O;const M=Ave({ref:P,descriptor:o,env:C,windowScroll:_,direction:A.direction,isDropDisabled:A.isDropDisabled,isCombineEnabled:A.isCombineEnabled,shouldClipSubject:!A.ignoreContainerClipping}),k=C.closestScrollable;return k&&(k.setAttribute(_D.contextId,n.contextId),k.addEventListener("scroll",p,TD(O.scrollOptions))),M},[n.contextId,o,p,l]),v=Wt(()=>{const _=s.current,T=Jx(_);return _&&T||gt(),i1(T)},[]),y=Wt(()=>{const _=s.current;_||gt();const T=Jx(_);s.current=null,T&&(h.cancel(),T.removeAttribute(_D.contextId),T.removeEventListener("scroll",p,TD(_.scrollOptions)))},[p,h]),j=Wt(_=>{const T=s.current;T||gt();const A=Jx(T);A||gt(),A.scrollTop+=_.y,A.scrollLeft+=_.x},[]),w=Os(()=>({getDimensionAndWatchScroll:g,getScrollWhileDragging:v,dragStopped:y,scroll:j}),[y,g,v,j]),N=Os(()=>({uniqueId:r,descriptor:o,callbacks:w}),[w,o,r]);ka(()=>(c.current=N.descriptor,a.droppable.register(N),()=>{s.current&&y(),a.droppable.unregister(N)}),[w,o,y,N,i,a.droppable]),ka(()=>{s.current&&i.updateDroppableIsEnabled(c.current.id,!t.isDropDisabled)},[t.isDropDisabled,i]),ka(()=>{s.current&&i.updateDroppableIsCombineEnabled(c.current.id,t.isCombineEnabled)},[t.isCombineEnabled,i])}function lN(){}const AD={width:0,height:0,margin:Upe},Rve=({isAnimatingOpenOnMount:t,placeholder:s,animate:n})=>t||n==="close"?AD:{height:s.client.borderBox.height,width:s.client.borderBox.width,margin:s.client.margin},Fve=({isAnimatingOpenOnMount:t,placeholder:s,animate:n})=>{const r=Rve({isAnimatingOpenOnMount:t,placeholder:s,animate:n});return{display:s.display,boxSizing:"border-box",width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?Hm.placeholder:null}},Lve=t=>{const s=b.useRef(null),n=Wt(()=>{s.current&&(clearTimeout(s.current),s.current=null)},[]),{animate:r,onTransitionEnd:a,onClose:i,contextId:l}=t,[o,c]=b.useState(t.animate==="open");b.useEffect(()=>o?r!=="open"?(n(),c(!1),lN):s.current?lN:(s.current=setTimeout(()=>{s.current=null,c(!1)}),n):lN,[r,o,n]);const u=Wt(m=>{m.propertyName==="height"&&(a(),r==="close"&&i())},[r,i,a]),d=Fve({isAnimatingOpenOnMount:o,animate:t.animate,placeholder:t.placeholder});return Be.createElement(t.placeholder.tagName,{style:d,"data-rfd-placeholder-context-id":l,onTransitionEnd:u,ref:t.innerRef})};var Ive=Be.memo(Lve);class Bve extends Be.PureComponent{constructor(...s){super(...s),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(s,n){return s.shouldAnimate?s.on?{isVisible:!0,data:s.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!s.on,data:s.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const s={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(s)}}const qve=t=>{const s=b.useContext(Sv);s||gt();const{contextId:n,isMovementAllowed:r}=s,a=b.useRef(null),i=b.useRef(null),{children:l,droppableId:o,type:c,mode:u,direction:d,ignoreContainerClipping:m,isDropDisabled:h,isCombineEnabled:p,snapshot:g,useClone:v,updateViewportMaxScroll:y,getContainerForClone:j}=t,w=Wt(()=>a.current,[]),N=Wt((k=null)=>{a.current=k},[]);Wt(()=>i.current,[]);const _=Wt((k=null)=>{i.current=k},[]),T=Wt(()=>{r()&&y({maxScroll:W7()})},[r,y]);Ove({droppableId:o,type:c,mode:u,direction:d,isDropDisabled:h,isCombineEnabled:p,ignoreContainerClipping:m,getDroppableRef:w});const A=Os(()=>Be.createElement(Bve,{on:t.placeholder,shouldAnimate:t.shouldAnimatePlaceholder},({onClose:k,data:E,animate:R})=>Be.createElement(Ive,{placeholder:E,onClose:k,innerRef:_,animate:R,contextId:n,onTransitionEnd:T})),[n,T,t.placeholder,t.shouldAnimatePlaceholder,_]),P=Os(()=>({innerRef:N,placeholder:A,droppableProps:{"data-rfd-droppable-id":o,"data-rfd-droppable-context-id":n}}),[n,o,A,N]),C=v?v.dragging.draggableId:null,O=Os(()=>({droppableId:o,type:c,isUsingCloneFor:C}),[o,C,c]);function M(){if(!v)return null;const{dragging:k,render:E}=v,R=Be.createElement(oq,{draggableId:k.draggableId,index:k.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(F,z)=>E(F,z,k));return o5.createPortal(R,j())}return Be.createElement(QS.Provider,{value:O},l(P,g),M())};function zve(){return document.body||gt(),document.body}const MD={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:zve},hq=t=>{let s={...t},n;for(n in MD)t[n]===void 0&&(s={...s,[n]:MD[n]});return s},oN=(t,s)=>t===s.droppable.type,DD=(t,s)=>s.draggables[t.draggable.id],$ve=()=>{const t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},s={...t,shouldAnimatePlaceholder:!1},n=Xn(i=>({draggableId:i.id,type:i.type,source:{index:i.index,droppableId:i.droppableId}})),r=Xn((i,l,o,c,u,d)=>{const m=u.descriptor.id;if(u.descriptor.droppableId===i){const g=d?{render:d,dragging:n(u.descriptor)}:null,v={isDraggingOver:o,draggingOverWith:o?m:null,draggingFromThisWith:m,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!1,snapshot:v,useClone:g}}if(!l)return s;if(!c)return t;const p={isDraggingOver:o,draggingOverWith:m,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}});return(i,l)=>{const o=hq(l),c=o.droppableId,u=o.type,d=!o.isDropDisabled,m=o.renderClone;if(Nf(i)){const h=i.critical;if(!oN(u,h))return s;const p=DD(h,i.dimensions),g=Ca(i.impact)===c;return r(c,d,g,g,p,m)}if(i.phase==="DROP_ANIMATING"){const h=i.completed;if(!oN(u,h.critical))return s;const p=DD(h.critical,i.dimensions);return r(c,d,iq(h.result)===c,Ca(h.impact)===c,p,m)}if(i.phase==="IDLE"&&i.completed&&!i.shouldFlush){const h=i.completed;if(!oN(u,h.critical))return s;const p=Ca(h.impact)===c,g=!!(h.impact.at&&h.impact.at.type==="COMBINE"),v=h.critical.droppable.id===c;return p?g?t:s:v?t:s}return s}},Uve={updateViewportMaxScroll:tge},Yc=d7($ve,Uve,(t,s,n)=>({...hq(n),...t,...s}),{context:KS,areStatePropsEqual:aq})(qve);function Vve({onClose:t,onSelectTemplate:s}){const[n,r]=b.useState(""),[a,i]=b.useState("all"),{data:l,isLoading:o}=me({queryKey:["iedit-templates"],queryFn:()=>X.entities.IEditElementTemplate.filter({is_active:!0},"display_order"),initialData:[]}),c=[{id:"all",label:"All",icon:Pb},{id:"layout",label:"Layout",icon:Pb},{id:"content",label:"Content",icon:Og},{id:"media",label:"Media",icon:hi},{id:"interactive",label:"Interactive",icon:VN}],u=l.filter(h=>{var v,y;const p=((v=h.name)==null?void 0:v.toLowerCase().includes(n.toLowerCase()))||((y=h.description)==null?void 0:y.toLowerCase().includes(n.toLowerCase())),g=a==="all"||h.category===a;return p&&g}),d={Type:Og,Image:hi,Layout:Pb,Zap:VN,Square:FE},m=h=>{const p=d[h]||FE;return e.jsx(p,{className:"w-8 h-8"})};return e.jsxs("div",{className:"fixed inset-y-0 right-0 w-96 bg-white border-l border-slate-200 shadow-xl z-50 flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Add Element"}),e.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:e.jsx(_s,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx(he,{placeholder:"Search elements...",value:n,onChange:h=>r(h.target.value),className:"pl-10"})]})]}),e.jsx("div",{className:"flex gap-1 p-4 border-b border-slate-200 overflow-x-auto",children:c.map(h=>{const p=h.icon;return e.jsxs("button",{onClick:()=>i(h.id),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm whitespace-nowrap transition-colors ${a===h.id?"bg-blue-100 text-blue-700 font-medium":"text-slate-600 hover:bg-slate-100"}`,children:[e.jsx(p,{className:"w-4 h-4"}),h.label]},h.id)})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:o?e.jsx("div",{className:"text-center py-8 text-slate-500",children:"Loading templates..."}):u.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-slate-600 mb-2",children:"No elements found"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Try adjusting your search or filters"})]}):e.jsx("div",{className:"space-y-2",children:u.map(h=>e.jsx(le,{className:"border-slate-200 hover:border-blue-300 hover:shadow-md transition-all cursor-pointer",onClick:()=>s(h),children:e.jsx(ce,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-slate-100 rounded-lg text-slate-600",children:m(h.icon)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-slate-900 mb-1",children:h.name}),h.description&&e.jsx("p",{className:"text-sm text-slate-600 line-clamp-2",children:h.description}),h.available_variants&&h.available_variants.length>1&&e.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:[h.available_variants.length," variants available"]})]})]})})},h.id))})})]})}function Wve({element:t,isDragging:s,onEdit:n,onDelete:r,onDuplicate:a}){var i,l,o;return e.jsx(le,{className:`border-slate-200 transition-shadow ${s?"shadow-2xl":"hover:shadow-md"}`,children:e.jsx(ce,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"cursor-grab active:cursor-grabbing text-slate-400 hover:text-slate-600",children:e.jsx(pd,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold text-slate-900 capitalize",children:t.element_type.replace(/_/g," ")}),t.style_variant&&t.style_variant!=="default"&&e.jsx("span",{className:"text-xs bg-slate-100 text-slate-600 px-2 py-0.5 rounded",children:t.style_variant})]}),e.jsx("div",{className:"text-sm text-slate-600 truncate",children:((i=t.content)==null?void 0:i.heading)||((l=t.content)==null?void 0:l.title)||((o=t.content)==null?void 0:o.text)||"No content"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(J,{variant:"ghost",size:"sm",onClick:n,className:"hover:bg-blue-50 hover:text-blue-700",children:e.jsx(As,{className:"w-4 h-4"})}),e.jsx(J,{variant:"ghost",size:"sm",onClick:a,className:"hover:bg-slate-100",children:e.jsx(Va,{className:"w-4 h-4"})}),e.jsx(J,{variant:"ghost",size:"sm",onClick:r,className:"hover:bg-red-50 hover:text-red-700",children:e.jsx(os,{className:"w-4 h-4"})})]})]})})})}function Hve({sectionId:t}){const[s,n]=b.useState(null),[r,a]=b.useState(null),{data:i,isLoading:l}=me({queryKey:["wall-of-fame-section",t],queryFn:async()=>(await X.entities.WallOfFameSection.list()).find(y=>y.id===t),enabled:!!t}),{data:o=[],isLoading:c}=me({queryKey:["wall-of-fame-categories",t],queryFn:async()=>(await X.entities.WallOfFameCategory.list()).filter(y=>y.section_id===t&&y.is_active).sort((y,j)=>(y.display_order||0)-(j.display_order||0)),enabled:!!t}),{data:u=[],isLoading:d}=me({queryKey:["wall-of-fame-people",s==null?void 0:s.id],queryFn:async()=>(await X.entities.WallOfFamePerson.list()).filter(y=>y.category_id===s.id&&y.is_active).sort((y,j)=>(y.display_order||0)-(j.display_order||0)),enabled:!!s}),{data:m}=me({queryKey:["wall-of-fame-photo-size"],queryFn:async()=>{const y=(await X.entities.SystemSettings.list()).find(j=>j.setting_key==="wall_of_fame_photo_size");return(y==null?void 0:y.setting_value)||"medium"},staleTime:300*1e3}),h=m||"medium",p={small:"w-24 h-24",medium:"w-32 h-32",large:"w-40 h-40"};return l||c?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(vt,{className:"w-8 h-8 animate-spin text-blue-600"})}):i?e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-4",children:i.name}),i.description&&e.jsx("p",{className:"text-lg text-slate-600 max-w-3xl mx-auto",children:i.description})]}),s?e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx(J,{variant:"outline",onClick:()=>{n(null),a(null)},className:"mb-4",children:" Back to Categories"}),e.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:s.name}),s.description&&e.jsx("p",{className:"text-slate-600",children:s.description})]}),d?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(vt,{className:"w-8 h-8 animate-spin text-blue-600"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:u.map(v=>e.jsx("div",{className:"perspective-1000",style:{perspective:"1000px"},children:e.jsxs("div",{className:`relative w-full h-96 transition-all duration-700 cursor-pointer transform-style-3d ${r===v.id?"rotate-y-180":""}`,style:{transformStyle:"preserve-3d",transform:r===v.id?"rotateY(180deg)":"rotateY(0deg)"},onClick:()=>a(r===v.id?null:v.id),children:[e.jsx("div",{className:"absolute w-full h-full backface-hidden",style:{backfaceVisibility:"hidden"},children:e.jsxs(le,{className:"w-full h-full p-6 flex flex-col items-center justify-center text-center border-2 border-slate-200 hover:border-blue-500 transition-colors bg-white",children:[e.jsx("div",{className:`${p[h]} rounded-full bg-slate-100 flex items-center justify-center overflow-hidden mb-4 flex-shrink-0 aspect-square`,style:{minWidth:h==="large"?"10rem":h==="medium"?"8rem":"6rem",minHeight:h==="large"?"10rem":h==="medium"?"8rem":"6rem"},children:v.profile_photo_url?e.jsx("img",{src:v.profile_photo_url,alt:`${v.first_name} ${v.last_name}`,className:"w-full h-full object-cover",style:{borderRadius:"50%"}}):e.jsx(Xs,{className:`${h==="large"?"w-20 h-20":h==="medium"?"w-16 h-16":"w-12 h-12"} text-slate-400`})}),e.jsxs("h4",{className:"text-lg font-bold text-slate-900 mb-1",children:[v.first_name," ",v.last_name]}),v.job_title&&e.jsx("p",{className:"text-sm text-slate-600",children:v.job_title}),(v.secondary_organisation||v.secondary_job_title)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-12 h-px bg-slate-300 mx-auto my-2"}),v.secondary_job_title&&e.jsx("p",{className:"text-xs text-slate-600",children:v.secondary_job_title}),v.secondary_organisation&&e.jsx("p",{className:"text-xs text-slate-500",children:v.secondary_organisation})]}),e.jsx("p",{className:"text-xs text-slate-400 mt-4",children:"Click to view details"})]})}),e.jsx("div",{className:"absolute w-full h-full backface-hidden",style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:e.jsx(le,{className:"w-full h-full p-6 overflow-y-auto border-2 border-blue-500 bg-gradient-to-br from-blue-50 to-white",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsxs("h4",{className:"text-lg font-bold text-slate-900 mb-1",children:[v.first_name," ",v.last_name]}),v.job_title&&e.jsx("p",{className:"text-sm text-blue-600 font-medium",children:v.job_title}),(v.secondary_organisation||v.secondary_job_title)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-px bg-slate-300 mx-auto my-2"}),v.secondary_job_title&&e.jsx("p",{className:"text-xs text-slate-700",children:v.secondary_job_title}),v.secondary_organisation&&e.jsx("p",{className:"text-xs text-slate-600",children:v.secondary_organisation})]})]}),v.biography&&e.jsx("div",{className:"flex-1 overflow-y-auto mb-4",children:e.jsx("p",{className:"text-sm text-slate-700 leading-relaxed",children:v.biography})}),e.jsxs("div",{className:"flex flex-col gap-2 mt-auto",children:[v.email&&e.jsxs("a",{href:`mailto:${v.email}`,className:"flex items-center justify-center gap-2 px-3 py-2 text-sm bg-white border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",onClick:y=>y.stopPropagation(),children:[e.jsx(Ms,{className:"w-4 h-4"}),"Email"]}),v.linkedin_url&&e.jsxs("a",{href:v.linkedin_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 px-3 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",onClick:y=>y.stopPropagation(),children:[e.jsx(qu,{className:"w-4 h-4"}),"LinkedIn"]})]}),e.jsx("p",{className:"text-xs text-slate-400 mt-4 text-center",children:"Click to flip back"})]})})})]})},v.id))})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(v=>e.jsx(le,{className:"p-8 cursor-pointer hover:shadow-xl transition-all duration-300 border-2 border-slate-200 hover:border-blue-500 bg-white",onClick:()=>n(v),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-blue-100 to-blue-200 flex items-center justify-center mx-auto mb-4",children:e.jsx(Xs,{className:"w-10 h-10 text-blue-600"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:v.name}),v.description&&e.jsx("p",{className:"text-sm text-slate-600",children:v.description})]})},v.id))})]})}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-slate-600",children:"Section not found"})})}function Kve({element:t,onChange:s}){var i;const{data:n=[]}=me({queryKey:["wall-of-fame-sections-selector"],queryFn:()=>X.entities.WallOfFameSection.list()}),r=n.filter(l=>l.is_active).sort((l,o)=>(l.display_order||0)-(o.display_order||0)),a=l=>{s({...t,content:{...t.content,section_id:l}})};return e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Wall of Fame Section"}),e.jsxs(Ke,{value:((i=t.content)==null?void 0:i.section_id)||"",onValueChange:a,children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:"Select a section to display"})}),e.jsx(We,{children:r.length===0?e.jsx("div",{className:"p-2 text-sm text-slate-500",children:"No sections available"}):r.map(l=>e.jsx(re,{value:l.id,children:l.name},l.id))})]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Choose which Wall of Fame section to display on this page"})]})})}function Gve({element:t,content:s}){var r;const n=((r=t.content)==null?void 0:r.section_id)||(s==null?void 0:s.section_id);return n?e.jsx(Hve,{sectionId:n}):e.jsx("div",{className:"bg-slate-100 border-2 border-dashed border-slate-300 rounded-lg p-12 text-center",children:e.jsx("p",{className:"text-slate-600",children:"Please select a Wall of Fame section to display"})})}function Yve({element:t,onChange:s}){const n=t.content||{},r=(i,l)=>{s({...t,content:{...n,[i]:l}})},a=async i=>{var o;const l=(o=i.target.files)==null?void 0:o[0];if(l)try{const{file_url:c}=await X.integrations.Core.UploadFile({file:l});r("backgroundImage",c)}catch(c){console.error("Failed to upload image:",c)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ee,{children:"Background Image"}),n.backgroundImage?e.jsxs("div",{className:"mt-2 relative",children:[e.jsx("img",{src:n.backgroundImage,alt:"Background",className:"w-full h-32 object-cover rounded-lg"}),e.jsx(J,{size:"sm",variant:"destructive",className:"absolute top-2 right-2",onClick:()=>r("backgroundImage",""),children:e.jsx(_s,{className:"w-4 h-4"})})]}):e.jsx("div",{className:"mt-2",children:e.jsxs("label",{className:"flex items-center justify-center w-full h-32 border-2 border-dashed border-slate-300 rounded-lg cursor-pointer hover:border-slate-400 transition-colors",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(Gs,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),e.jsx("span",{className:"text-sm text-slate-600",children:"Click to upload image"})]}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:a})]})})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"header",children:"Header"}),e.jsx(he,{id:"header",value:n.header||"",onChange:i=>r("header",i.target.value),placeholder:"Enter header text"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"text",children:"Text Content"}),e.jsx(Gt,{id:"text",value:n.text||"",onChange:i=>r("text",i.target.value),placeholder:"Enter text content",rows:4})]}),e.jsxs("div",{children:[e.jsx(ee,{children:"Text Position"}),e.jsxs(Ke,{value:n.textPosition||"left",onValueChange:i=>r("textPosition",i),children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"left",children:"Left"}),e.jsx(re,{value:"right",children:"Right"})]})]})]}),e.jsxs("div",{children:[e.jsx(ee,{children:"Border Style"}),e.jsxs(Ke,{value:n.borderStyle||"none",onValueChange:i=>r("borderStyle",i),children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"none",children:"None"}),e.jsx(re,{value:"solid",children:"Solid"}),e.jsx(re,{value:"dashed",children:"Dashed"}),e.jsx(re,{value:"dotted",children:"Dotted"})]})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"borderColor",children:"Border Color"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(he,{id:"borderColor",type:"color",value:n.borderColor||"#000000",onChange:i=>r("borderColor",i.target.value),className:"w-20 h-10"}),e.jsx(he,{type:"text",value:n.borderColor||"#000000",onChange:i=>r("borderColor",i.target.value),placeholder:"#000000"})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"backgroundColor",children:"Background Color"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(he,{id:"backgroundColor",type:"color",value:n.backgroundColor||"#ffffff",onChange:i=>r("backgroundColor",i.target.value),className:"w-20 h-10"}),e.jsx(he,{type:"text",value:n.backgroundColor||"#ffffff",onChange:i=>r("backgroundColor",i.target.value),placeholder:"#ffffff"})]})]}),e.jsxs("div",{children:[e.jsxs(ee,{htmlFor:"opacity",children:["Background Opacity (",Math.round((n.opacity!==void 0?n.opacity:1)*100),"%)"]}),e.jsx(he,{id:"opacity",type:"range",min:"0",max:"1",step:"0.1",value:n.opacity!==void 0?n.opacity:1,onChange:i=>r("opacity",parseFloat(i.target.value))})]})]})}function Qve({element:t}){const s=t.content||{},n=s.textPosition||"left",r=s.borderStyle||"none",a=s.borderColor||"#000000",i=s.backgroundColor||"#ffffff",l=s.opacity!==void 0?s.opacity:1,o={backgroundColor:i,opacity:l,border:r!=="none"?`2px ${r} ${a}`:"none"};return e.jsx("div",{className:"relative w-full min-h-[400px] flex items-center justify-center",style:{backgroundImage:s.backgroundImage?`url(${s.backgroundImage})`:"none",backgroundSize:"cover",backgroundPosition:"center",backgroundColor:s.backgroundImage?void 0:"#f1f5f9"},children:e.jsx("div",{className:"w-full max-w-7xl mx-auto px-4 py-12",children:e.jsx("div",{className:`max-w-xl ${n==="right"?"ml-auto":"mr-auto"}`,children:e.jsxs("div",{className:"p-8 rounded-lg",style:o,children:[s.header&&e.jsx("h2",{className:"text-3xl font-bold mb-4 text-slate-900",children:s.header}),s.text&&e.jsx("p",{className:"text-slate-700 leading-relaxed whitespace-pre-wrap",children:s.text})]})})})})}function Jve({element:t,onChange:s}){const n=t.content||{rows:2,cols:2,cells:{},cellTypes:{},columnWidths:{},tableWidth:"full",tableAlign:"center",header:"",description:"",backgroundImage:"",backgroundColor:"#ffffff",sectionWidth:"full"},[r,a]=b.useState({}),i=(N,_)=>{s({...t,content:{...n,[N]:_}})},l=(N,_,T)=>{var C;const A=`${N}-${_}`;if(((C=n.cells)==null?void 0:C[A])===T)return;const P={...n.cells};P[A]=T,i("cells",P)},o=(N,_,T)=>{const A={...n.cellTypes};A[`${N}-${_}`]=T,i("cellTypes",A)},c=(N,_)=>{const T={...n.columnWidths};T[N]=parseFloat(_)||0,i("columnWidths",T)},u=async(N,_,T)=>{if(!T)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/svg+xml"].includes(T.type)){te.error("Please upload a valid image file");return}if(T.size>10*1024*1024){te.error("Image must be smaller than 10MB");return}const P=`${N}-${_}`;a({...r,[P]:!0});try{const C=await X.integrations.Core.UploadFile({file:T});l(N,_,C.file_url),te.success("Image uploaded")}catch(C){te.error("Upload failed: "+C.message)}finally{a(C=>({...C,[P]:!1}))}},d=N=>{const _=Math.max(1,parseInt(N)||1);i("rows",_)},m=N=>{const _=Math.max(1,parseInt(N)||1);i("cols",_)},h=n.rows||2,p=n.cols||2,g=n.cells||{},v=n.cellTypes||{},y=n.columnWidths||{},j=n.tableWidth||"full",w=n.tableAlign||"center";return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"header",children:"Section Header"}),e.jsx(he,{id:"header",value:n.header||"",onChange:N=>i("header",N.target.value),placeholder:"Optional header text"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"description",children:"Section Description"}),e.jsx(Gt,{id:"description",value:n.description||"",onChange:N=>i("description",N.target.value),placeholder:"Optional description text",rows:3})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"sectionWidth",children:"Section Width"}),e.jsxs(Ke,{value:n.sectionWidth||"full",onValueChange:N=>i("sectionWidth",N),children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"full",children:"Full Width"}),e.jsx(re,{value:"contained",children:"Contained (max-w-7xl)"})]})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"backgroundImage",children:"Background Image URL"}),e.jsx(he,{id:"backgroundImage",value:n.backgroundImage||"",onChange:N=>i("backgroundImage",N.target.value),placeholder:"Optional background image URL"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"backgroundColor",children:"Background Color"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(he,{id:"backgroundColor",type:"color",value:n.backgroundColor||"#ffffff",onChange:N=>i("backgroundColor",N.target.value),className:"w-20 h-10"}),e.jsx(he,{type:"text",value:n.backgroundColor||"#ffffff",onChange:N=>i("backgroundColor",N.target.value),placeholder:"#ffffff"})]})]}),e.jsx("div",{className:"border-t pt-4",children:e.jsx("h3",{className:"font-semibold mb-4",children:"Table Settings"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"rows",children:"Rows"}),e.jsx(he,{id:"rows",type:"number",min:"1",max:"10",value:h,onChange:N=>d(N.target.value)})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"cols",children:"Columns"}),e.jsx(he,{id:"cols",type:"number",min:"1",max:"10",value:p,onChange:N=>m(N.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"tableWidth",children:"Table Width"}),e.jsxs(Ke,{value:j,onValueChange:N=>i("tableWidth",N),children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"full",children:"Full Width"}),e.jsx(re,{value:"half",children:"Half Width"})]})]})]}),j==="half"&&e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"tableAlign",children:"Table Alignment"}),e.jsxs(Ke,{value:w,onValueChange:N=>i("tableAlign",N),children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"left",children:"Left"}),e.jsx(re,{value:"center",children:"Center"}),e.jsx(re,{value:"right",children:"Right"})]})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"borderStyle",children:"Border Style"}),e.jsxs(Ke,{value:n.borderStyle||"solid",onValueChange:N=>i("borderStyle",N),children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"none",children:"None"}),e.jsx(re,{value:"solid",children:"Solid"}),e.jsx(re,{value:"dashed",children:"Dashed"}),e.jsx(re,{value:"dotted",children:"Dotted"})]})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"borderWidth",children:"Border Width (px)"}),e.jsx(he,{id:"borderWidth",type:"number",min:"0",max:"10",value:n.borderWidth||1,onChange:N=>i("borderWidth",parseInt(N.target.value)||0)})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"borderColor",children:"Border Color"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(he,{id:"borderColor",type:"color",value:n.borderColor||"#e2e8f0",onChange:N=>i("borderColor",N.target.value),className:"w-20 h-10"}),e.jsx(he,{type:"text",value:n.borderColor||"#e2e8f0",onChange:N=>i("borderColor",N.target.value),placeholder:"#e2e8f0"})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"headerBgColor",children:"Header Cell Background"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(he,{id:"headerBgColor",type:"color",value:n.headerBgColor||"#f8fafc",onChange:N=>i("headerBgColor",N.target.value),className:"w-20 h-10"}),e.jsx(he,{type:"text",value:n.headerBgColor||"#f8fafc",onChange:N=>i("headerBgColor",N.target.value),placeholder:"#f8fafc"})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx(ee,{children:"Column Widths (%)"}),e.jsx("div",{className:"mt-2 grid gap-2",style:{gridTemplateColumns:`repeat(${p}, 1fr)`},children:Array.from({length:p}).map((N,_)=>e.jsxs("div",{children:[e.jsxs(ee,{className:"text-xs",children:["Col ",_+1]}),e.jsx(he,{type:"number",min:"0",max:"100",value:y[_]||"",onChange:T=>c(_,T.target.value),placeholder:"Auto",className:"text-xs h-8"})]},_))}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Leave blank for auto width. Total should equal 100%."})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx(ee,{children:"Table Preview"}),e.jsx("div",{className:"mt-2 p-4 bg-slate-50 rounded-lg overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",style:{borderColor:n.borderColor||"#e2e8f0",borderStyle:n.borderStyle||"solid",borderWidth:`${n.borderWidth||1}px`},children:[e.jsx("colgroup",{children:Array.from({length:p}).map((N,_)=>e.jsx("col",{style:{width:y[_]?`${y[_]}%`:"auto"}},_))}),e.jsx("tbody",{children:Array.from({length:h}).map((N,_)=>e.jsx("tr",{children:Array.from({length:p}).map((T,A)=>{const P=`${_}-${A}`,C=v[P]||"text",O=C==="header",M=O?"th":"td",k=g[P]||"";return e.jsx(M,{className:"p-2 text-xs",style:{border:n.borderStyle==="none"?"none":void 0,borderColor:n.borderColor||"#e2e8f0",borderStyle:n.borderStyle||"solid",borderWidth:`${n.borderWidth||1}px`,backgroundColor:O?n.headerBgColor||"#f8fafc":"white",fontWeight:O?"600":"400",textAlign:"left"},children:C==="image"?k?e.jsx("img",{src:k,alt:"Preview",className:"w-full h-auto max-h-16 object-contain"}):e.jsx("span",{className:"text-slate-400",children:"No image"}):e.jsx("div",{className:"truncate",children:k||`${_+1},${A+1}`})},A)})},_))})]})})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx(ee,{children:"Cell Configuration"}),e.jsx("div",{className:"mt-2 space-y-4 max-h-96 overflow-y-auto",children:Array.from({length:h}).map((N,_)=>e.jsxs("div",{className:"border border-slate-200 rounded-lg p-3",children:[e.jsxs("div",{className:"text-xs font-medium text-slate-600 mb-2",children:["Row ",_+1]}),e.jsx("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${p}, 1fr)`},children:Array.from({length:p}).map((T,A)=>{const P=`${_}-${A}`,C=v[P]||"text";return e.jsxs("div",{className:"space-y-2 p-2 bg-slate-50 rounded",children:[e.jsxs(Ke,{value:C,onValueChange:O=>o(_,A,O),children:[e.jsx(Ve,{className:"h-8 text-xs",children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"text",children:"Text"}),e.jsx(re,{value:"header",children:"Header"}),e.jsx(re,{value:"image",children:"Image"})]})]}),C==="image"?e.jsxs("div",{className:"space-y-1",children:[e.jsxs(ee,{htmlFor:`upload-${P}`,className:"cursor-pointer w-full",children:[e.jsx("div",{className:`flex items-center justify-center h-8 rounded-md text-white transition-colors ${r[P]?"bg-slate-400":"bg-blue-600 hover:bg-blue-700"}`,children:r[P]?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-3 h-3 animate-spin mr-1"}),e.jsx("span",{className:"text-xs",children:"Uploading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Gs,{className:"w-3 h-3 mr-1"}),e.jsx("span",{className:"text-xs",children:"Upload Image"})]})}),e.jsx("input",{id:`upload-${P}`,type:"file",accept:"image/*",onChange:O=>{var k;const M=(k=O.target.files)==null?void 0:k[0];M&&u(_,A,M),O.target.value=""},className:"hidden",disabled:r[P]})]}),g[P]&&e.jsx("img",{src:g[P],alt:"Preview",className:"w-full h-12 object-contain rounded bg-slate-100"})]}):e.jsx("div",{className:"text-xs",children:e.jsx(dS,{value:g[P]||"",onChange:O=>l(_,A,O),placeholder:C==="header"?"Header text":"Content",theme:"snow",modules:{toolbar:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]]},className:"bg-white rounded"},P)},`quill-${P}`)]},A)})})]},_))})]})]})}function Xve({element:t}){const s=t.content||{rows:2,cols:2,cells:{},cellTypes:{},columnWidths:{},tableWidth:"full",tableAlign:"center"},n=s.rows||2,r=s.cols||2,a=s.cells||{},i=s.cellTypes||{},l=s.columnWidths||{},o=s.borderColor||"#e2e8f0",c=s.borderStyle||"solid",u=s.borderWidth||1,d=s.headerBgColor||"#f8fafc",m=s.tableWidth||"full",h=s.tableAlign||"center",p=s.header||"",g=s.description||"",v=s.backgroundImage||"",y=s.backgroundColor||"#ffffff",j=s.sectionWidth||"full",w={left:"mr-auto",center:"mx-auto",right:"ml-auto"}[h]||"mx-auto",N=m==="half"?"w-1/2":"w-full",_=j==="contained"?"max-w-7xl mx-auto px-4":"w-full px-4",T={backgroundColor:y,...v&&{backgroundImage:`url(${v})`,backgroundSize:"cover",backgroundPosition:"center"}},A=j==="full"?"w-screen relative left-1/2 right-1/2 -ml-[50vw] -mr-[50vw] py-8":"w-full py-8";return e.jsx("div",{className:A,style:T,children:e.jsxs("div",{className:_,children:[(p||g)&&e.jsxs("div",{className:"mb-8 text-center",children:[p&&e.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-3",children:p}),g&&e.jsx("p",{className:"text-lg text-slate-600 max-w-3xl mx-auto",children:g})]}),e.jsx("div",{className:`overflow-x-auto ${N} ${w}`,children:e.jsxs("table",{className:"w-full border-collapse",style:{borderColor:o,borderStyle:c,borderWidth:`${u}px`},children:[e.jsx("colgroup",{children:Array.from({length:r}).map((P,C)=>e.jsx("col",{style:{width:l[C]?`${l[C]}%`:"auto"}},C))}),e.jsx("tbody",{children:Array.from({length:n}).map((P,C)=>e.jsx("tr",{children:Array.from({length:r}).map((O,M)=>{const k=`${C}-${M}`,E=a[k]||"",R=i[k]||"text",F=R==="header",z=F?"th":"td";return e.jsx(z,{className:"p-4",style:{border:c==="none"?"none":void 0,borderColor:o,borderStyle:c,borderWidth:`${u}px`,backgroundColor:F?d:"white",fontWeight:F?"600":"400",textAlign:"left"},children:R==="image"?E?e.jsx("img",{src:E,alt:"Cell content",className:"w-full h-auto object-contain",style:{maxHeight:"150px"}}):e.jsx("div",{className:"text-slate-400 text-sm",children:"No image"}):e.jsx("div",{className:"text-slate-700 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:E}})},M)})},C))})]})})]})})}function Zve({element:t,onChange:s}){const n=t.content||{banners:[]},[r,a]=b.useState(null),i=(h,p)=>{s({...t,content:{...n,[h]:p}})},l=()=>{const h={id:`banner-${Date.now()}`,headerText:"",paragraphText:"",ctaText:"",ctaLink:"",backgroundImage:""};i("banners",[...n.banners||[],h])},o=h=>{const p=[...n.banners||[]];p.splice(h,1),i("banners",p)},c=h=>{const p=[...n.banners||[]],g={...p[h],id:`banner-${Date.now()}`};p.splice(h+1,0,g),i("banners",p),te.success("Banner duplicated")},u=(h,p,g)=>{const v=[...n.banners||[]];v[h]={...v[h],[p]:g},i("banners",v)},d=async(h,p)=>{if(!p)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/svg+xml"].includes(p.type)){te.error("Please upload a valid image file");return}if(p.size>10*1024*1024){te.error("Image must be smaller than 10MB");return}a(h);try{const v=await X.integrations.Core.UploadFile({file:p});u(h,"backgroundImage",v.file_url),te.success("Image uploaded")}catch(v){te.error("Upload failed: "+v.message)}finally{a(null)}},m=h=>{if(!h.destination)return;const p=Array.from(n.banners||[]),[g]=p.splice(h.source.index,1);p.splice(h.destination.index,0,g),i("banners",p)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ee,{children:["Banners (",(n.banners||[]).length,")"]}),e.jsxs(J,{onClick:l,size:"sm",type:"button",children:[e.jsx(Pt,{className:"w-4 h-4 mr-1"}),"Add Banner"]})]}),!n.banners||n.banners.length===0?e.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-lg p-8 text-center",children:[e.jsx("p",{className:"text-slate-500 text-sm mb-3",children:"No banners yet"}),e.jsxs(J,{onClick:l,size:"sm",type:"button",children:[e.jsx(Pt,{className:"w-4 h-4 mr-1"}),"Add First Banner"]})]}):e.jsx(pp,{onDragEnd:m,children:e.jsx(Yc,{droppableId:"banners",children:h=>e.jsxs("div",{...h.droppableProps,ref:h.innerRef,className:"space-y-3",children:[n.banners.map((p,g)=>e.jsx(Gc,{draggableId:p.id,index:g,children:v=>e.jsxs("div",{ref:v.innerRef,...v.draggableProps,className:"border border-slate-200 rounded-lg p-4 bg-slate-50 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{...v.dragHandleProps,children:e.jsx(pd,{className:"w-4 h-4 text-slate-400 cursor-grab"})}),e.jsxs("span",{className:"font-medium text-sm text-slate-700",children:["Banner ",g+1]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(J,{onClick:()=>c(g),size:"sm",variant:"ghost",className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",type:"button",children:e.jsx(Va,{className:"w-4 h-4"})}),e.jsx(J,{onClick:()=>o(g),size:"sm",variant:"ghost",className:"text-red-600 hover:text-red-700 hover:bg-red-50",type:"button",children:e.jsx(os,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:`header-${g}`,children:"Header Text"}),e.jsx(he,{id:`header-${g}`,value:p.headerText||"",onChange:y=>u(g,"headerText",y.target.value),placeholder:"Main heading"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:`paragraph-${g}`,children:"Paragraph Text"}),e.jsx(Gt,{id:`paragraph-${g}`,value:p.paragraphText||"",onChange:y=>u(g,"paragraphText",y.target.value),placeholder:"Description text",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:`cta-text-${g}`,children:"CTA Button Text"}),e.jsx(he,{id:`cta-text-${g}`,value:p.ctaText||"",onChange:y=>u(g,"ctaText",y.target.value),placeholder:"Learn More"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:`cta-link-${g}`,children:"CTA Button Link"}),e.jsx(he,{id:`cta-link-${g}`,value:p.ctaLink||"",onChange:y=>u(g,"ctaLink",y.target.value),placeholder:"/page-url"})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:`bg-image-${g}`,children:"Background Image"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(he,{id:`bg-image-${g}`,value:p.backgroundImage||"",onChange:y=>u(g,"backgroundImage",y.target.value),placeholder:"Image URL",className:"flex-1"}),e.jsxs(ee,{htmlFor:`upload-${g}`,className:"cursor-pointer",children:[e.jsx("div",{className:`flex items-center gap-2 px-4 py-2 rounded-md transition-colors ${r===g?"bg-slate-300 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:r===g?e.jsx(vt,{className:"w-4 h-4 animate-spin"}):e.jsx(Gs,{className:"w-4 h-4"})}),e.jsx("input",{id:`upload-${g}`,type:"file",accept:"image/*",onChange:y=>{var w;const j=(w=y.target.files)==null?void 0:w[0];j&&d(g,j),y.target.value=""},className:"hidden",disabled:r===g})]})]}),p.backgroundImage&&e.jsx("img",{src:p.backgroundImage,alt:"Preview",className:"mt-2 w-full h-32 object-cover rounded"})]})]})},p.id)),h.placeholder]})})}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"autoplay",children:"Autoplay Interval (seconds)"}),e.jsx(he,{id:"autoplay",type:"number",min:"0",value:n.autoplayInterval||5,onChange:h=>i("autoplayInterval",parseInt(h.target.value)||5),placeholder:"5"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Set to 0 to disable autoplay"})]})]})}function eye({element:t}){const s=t.content||{banners:[],autoplayInterval:5},[n,r]=b.useState(0),a=s.banners||[],i=s.autoplayInterval||5;b.useEffect(()=>{if(a.length===0||i===0)return;const d=setInterval(()=>{r(m=>(m+1)%a.length)},i*1e3);return()=>clearInterval(d)},[a.length,i]);const l=()=>{r(d=>(d+1)%a.length)},o=()=>{r(d=>(d-1+a.length)%a.length)},c=d=>{r(d)};if(!a||a.length===0)return e.jsx("div",{className:"bg-slate-100 py-24 text-center",children:e.jsx("p",{className:"text-slate-500",children:"No banners configured"})});const u=a[n];return e.jsxs("div",{className:"relative w-full overflow-hidden",children:[e.jsxs("div",{className:"relative h-[500px] md:h-[600px]",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-all duration-700",style:{backgroundImage:u.backgroundImage?`url(${u.backgroundImage})`:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:e.jsx("div",{className:"absolute inset-0 bg-black/40"})}),e.jsx("div",{className:"relative h-full flex items-center justify-center text-center px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-white",children:[u.headerText&&e.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6 animate-fade-in",children:u.headerText}),u.paragraphText&&e.jsx("p",{className:"text-lg md:text-xl mb-8 max-w-2xl mx-auto opacity-90 animate-fade-in",children:u.paragraphText}),u.ctaText&&u.ctaLink&&e.jsx("a",{href:u.ctaLink,className:"inline-block px-8 py-4 bg-white text-slate-900 font-semibold rounded-lg hover:bg-slate-100 transition-colors shadow-lg animate-fade-in",children:u.ctaText})]})}),a.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:o,className:"absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-white/20 hover:bg-white/30 backdrop-blur-sm flex items-center justify-center transition-colors","aria-label":"Previous banner",children:e.jsx(Wn,{className:"w-6 h-6 text-white"})}),e.jsx("button",{onClick:l,className:"absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-white/20 hover:bg-white/30 backdrop-blur-sm flex items-center justify-center transition-colors","aria-label":"Next banner",children:e.jsx(js,{className:"w-6 h-6 text-white"})})]}),a.length>1&&e.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 flex gap-2",children:a.map((d,m)=>e.jsx("button",{onClick:()=>c(m),className:`w-3 h-3 rounded-full transition-all ${m===n?"bg-white w-8":"bg-white/50 hover:bg-white/70"}`,"aria-label":`Go to banner ${m+1}`},m))})]}),e.jsx("style",{jsx:!0,children:`
        @keyframes fade-in {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        .animate-fade-in {
          animation: fade-in 0.6s ease-out;
        }
      `})]})}function tye({index:t,card:s,onUpdate:n}){const{data:r="Articles"}=me({queryKey:["article-display-name"],queryFn:async()=>{const o=(await X.entities.SystemSettings.list()).find(c=>c.setting_key==="article_display_name");return(o==null?void 0:o.setting_value)||"Articles"},staleTime:3e5}),{data:a=[]}=me({queryKey:["showcase-items",s.contentType],queryFn:async()=>{switch(s.contentType){case"news":return(await X.entities.NewsPost.list("-published_date")).filter(u=>u.status==="published");case"resources":return await X.entities.Resource.list("-created_date");case"articles":return(await X.entities.BlogPost.list("-published_date")).filter(u=>u.status==="published");case"jobs":return(await X.entities.JobPosting.list("-created_date")).filter(u=>u.status==="active");default:return[]}},staleTime:60*1e3}),i=l=>{switch(l){case"news":return"News";case"resources":return"Resource";case"articles":return(r==null?void 0:r.slice(0,-1))||"Article";case"jobs":return"Job";default:return""}};return e.jsxs("div",{className:"border border-slate-200 rounded-lg p-3 bg-slate-50",children:[e.jsxs("div",{className:"text-xs font-medium text-slate-600 mb-2",children:["Card ",t+1]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(Ke,{value:s.contentType,onValueChange:l=>n(t,"contentType",l),children:[e.jsx(Ve,{className:"h-9",children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"news",children:"News"}),e.jsx(re,{value:"resources",children:"Resources"}),e.jsx(re,{value:"articles",children:r}),e.jsx(re,{value:"jobs",children:"Jobs"})]})]}),e.jsxs(Ke,{value:s.itemId||"",onValueChange:l=>n(t,"itemId",l),children:[e.jsx(Ve,{className:"h-9",children:e.jsx(Qe,{placeholder:"Select item..."})}),e.jsx(We,{children:a.length===0?e.jsx("div",{className:"p-2 text-xs text-slate-500",children:"No items available"}):a.map(l=>e.jsx(re,{value:l.id,children:l.title||l.name},l.id))})]}),e.jsxs("div",{className:"pt-2 border-t border-slate-300 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:`showLabel-${t}`,checked:s.showLabel??!0,onChange:l=>n(t,"showLabel",l.target.checked),className:"w-4 h-4"}),e.jsx(ee,{htmlFor:`showLabel-${t}`,className:"cursor-pointer text-xs",children:"Show Label"})]}),s.showLabel!==!1&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:`labelText-${t}`,className:"text-xs",children:"Label Text"}),e.jsx(he,{id:`labelText-${t}`,value:s.labelText||i(s.contentType),onChange:l=>n(t,"labelText",l.target.value),placeholder:"Custom label...",className:"h-8 text-xs"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:`labelBg-${t}`,className:"text-xs",children:"Background"}),e.jsx("input",{id:`labelBg-${t}`,type:"color",value:s.labelBgColor||"#2563eb",onChange:l=>n(t,"labelBgColor",l.target.value),className:"w-full h-8 px-1 py-1 border border-slate-300 rounded-md cursor-pointer"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:`labelText-${t}`,className:"text-xs",children:"Text Color"}),e.jsx("input",{id:`labelTextColor-${t}`,type:"color",value:s.labelTextColor||"#ffffff",onChange:l=>n(t,"labelTextColor",l.target.value),className:"w-full h-8 px-1 py-1 border border-slate-300 rounded-md cursor-pointer"})]})]})]})]})]})]})}function sye({element:t,onChange:s}){var u;const[n,r]=Be.useState(!1),a=t.content||{headerText:"",descriptionText:"",heading_font_family:"Poppins",heading_font_size:48,heading_letter_spacing:0,heading_underline_enabled:!1,heading_underline_color:"#000000",heading_underline_width:100,heading_underline_weight:2,heading_underline_spacing:16,heading_underline_to_content_spacing:24,heading_underline_alignment:"center",subheading_font_family:"Poppins",subheading_font_size:20,subheading_line_height:1.5,text_align:"center",padding_left:16,padding_right:16,backgroundImage:"",backgroundColor:"#ffffff",cardCount:4,cardHeight:400,imageHeightPercent:50,cardBorderRadius:8,descriptionLineClamp:3,showPublishedDate:!1,showImageBorder:!1,imageBorderWeight:3,imageBorderColor:"#2563eb",showCTAButton:!0,ctaButtonSize:48,ctaButtonBgColor:"#2563eb",ctaButtonArrowColor:"#ffffff",ctaButtonMargin:16,card_text_align:"left",cards:[{contentType:"news",itemId:"",showLabel:!0,labelText:"",labelBgColor:"#2563eb",labelTextColor:"#ffffff"},{contentType:"resources",itemId:"",showLabel:!0,labelText:"",labelBgColor:"#2563eb",labelTextColor:"#ffffff"},{contentType:"articles",itemId:"",showLabel:!0,labelText:"",labelBgColor:"#2563eb",labelTextColor:"#ffffff"},{contentType:"jobs",itemId:"",showLabel:!0,labelText:"",labelBgColor:"#2563eb",labelTextColor:"#ffffff"}]},i=a.cardCount||4;if(!a.cards||a.cards.length!==i){const d=[],m=["news","resources","articles","jobs"];for(let h=0;h<i;h++)d.push(((u=a.cards)==null?void 0:u[h])||{contentType:m[h]||"news",itemId:""});a.cards=d}const l=(d,m)=>{const h={...a,[d]:m};s({...t,content:h})},o=(d,m,h)=>{const p=[...a.cards];p[d]={...p[d],[m]:h},m==="contentType"&&(p[d].itemId=""),l("cards",p)},c=async d=>{if(!d)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/svg+xml"].includes(d.type)){te.error("Please upload a valid image file");return}if(d.size>10*1024*1024){te.error("Image must be smaller than 10MB");return}r(!0);try{const h=await X.integrations.Core.UploadFile({file:d});l("backgroundImage",h.file_url),te.success("Image uploaded")}catch(h){te.error("Upload failed: "+h.message)}finally{r(!1)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"headerText",children:"Header Title"}),e.jsx(he,{id:"headerText",value:a.headerText||"",onChange:d=>l("headerText",d.target.value),placeholder:"Section title"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"descriptionText",children:"Description"}),e.jsx(Gt,{id:"descriptionText",value:a.descriptionText||"",onChange:d=>l("descriptionText",d.target.value),placeholder:"Section description",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"heading_font_family",children:"Heading Font"}),e.jsxs(Ke,{value:a.heading_font_family||"Poppins",onValueChange:d=>l("heading_font_family",d),children:[e.jsx(Ve,{className:"h-9",children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"Poppins",children:"Poppins"}),e.jsx(re,{value:"Degular Medium",children:"Degular Medium"})]})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"heading_font_size",children:"Heading Size (px)"}),e.jsx(he,{id:"heading_font_size",type:"number",value:a.heading_font_size||48,onChange:d=>l("heading_font_size",parseInt(d.target.value)||48),min:"12",max:"200"})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"heading_letter_spacing",children:"Heading Letter Spacing (px)"}),e.jsx(he,{id:"heading_letter_spacing",type:"number",step:"0.5",value:a.heading_letter_spacing||0,onChange:d=>l("heading_letter_spacing",parseFloat(d.target.value)||0),min:"-5",max:"20"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"heading_color",children:"Heading Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{id:"heading_color",type:"color",value:a.heading_color||"#0f172a",onChange:d=>l("heading_color",d.target.value),className:"w-16 h-10 px-1 py-1 border border-slate-300 rounded-md cursor-pointer"}),e.jsx(he,{value:a.heading_color||"#0f172a",onChange:d=>l("heading_color",d.target.value),placeholder:"#0f172a",className:"flex-1"})]})]}),e.jsxs("div",{className:"space-y-3 p-3 bg-slate-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"heading_underline_enabled",checked:a.heading_underline_enabled||!1,onChange:d=>l("heading_underline_enabled",d.target.checked),className:"w-4 h-4"}),e.jsx(ee,{htmlFor:"heading_underline_enabled",className:"cursor-pointer",children:"Show line below heading"})]}),a.heading_underline_enabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"heading_underline_color",children:"Line Color"}),e.jsx("input",{id:"heading_underline_color",type:"color",value:a.heading_underline_color||"#000000",onChange:d=>l("heading_underline_color",d.target.value),className:"w-full h-10 px-1 py-1 border border-slate-300 rounded-md cursor-pointer"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"heading_underline_width",children:"Line Width (px)"}),e.jsx(he,{id:"heading_underline_width",type:"number",value:a.heading_underline_width||100,onChange:d=>l("heading_underline_width",parseInt(d.target.value)||0),min:"10",max:"1000"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"heading_underline_weight",children:"Line Weight (px)"}),e.jsx(he,{id:"heading_underline_weight",type:"number",value:a.heading_underline_weight||2,onChange:d=>l("heading_underline_weight",parseInt(d.target.value)||1),min:"1",max:"20"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"heading_underline_spacing",children:"Spacing from Header (px)"}),e.jsx(he,{id:"heading_underline_spacing",type:"number",value:a.heading_underline_spacing||16,onChange:d=>l("heading_underline_spacing",parseInt(d.target.value)||0),min:"0",max:"100"})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"heading_underline_alignment",children:"Line Alignment"}),e.jsxs(Ke,{value:a.heading_underline_alignment||"center",onValueChange:d=>l("heading_underline_alignment",d),children:[e.jsx(Ve,{className:"h-9",children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"left",children:"Left"}),e.jsx(re,{value:"center",children:"Center"}),e.jsx(re,{value:"right",children:"Right"})]})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"heading_underline_to_content_spacing",children:"Spacing to Content (px)"}),e.jsx(he,{id:"heading_underline_to_content_spacing",type:"number",value:a.heading_underline_to_content_spacing||24,onChange:d=>l("heading_underline_to_content_spacing",parseInt(d.target.value)||0),min:"0",max:"100"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"subheading_font_family",children:"Description Font"}),e.jsxs(Ke,{value:a.subheading_font_family||"Poppins",onValueChange:d=>l("subheading_font_family",d),children:[e.jsx(Ve,{className:"h-9",children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"Poppins",children:"Poppins"}),e.jsx(re,{value:"Degular Medium",children:"Degular Medium"})]})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"subheading_font_size",children:"Size (px)"}),e.jsx(he,{id:"subheading_font_size",type:"number",value:a.subheading_font_size||20,onChange:d=>l("subheading_font_size",parseInt(d.target.value)||20),min:"12",max:"100"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"subheading_line_height",children:"Line Height"}),e.jsx(he,{id:"subheading_line_height",type:"number",step:"0.1",value:a.subheading_line_height||1.5,onChange:d=>l("subheading_line_height",parseFloat(d.target.value)||1.5),min:"1",max:"3"})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"description_color",children:"Description Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{id:"description_color",type:"color",value:a.description_color||"#475569",onChange:d=>l("description_color",d.target.value),className:"w-16 h-10 px-1 py-1 border border-slate-300 rounded-md cursor-pointer"}),e.jsx(he,{value:a.description_color||"#475569",onChange:d=>l("description_color",d.target.value),placeholder:"#475569",className:"flex-1"})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"text_align",children:"Header Text Alignment"}),e.jsxs(Ke,{value:a.text_align||"center",onValueChange:d=>l("text_align",d),children:[e.jsx(Ve,{className:"h-9",children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"left",children:"Left"}),e.jsx(re,{value:"center",children:"Center"}),e.jsx(re,{value:"right",children:"Right"})]})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"card_text_align",children:"Card Text Alignment"}),e.jsxs(Ke,{value:a.card_text_align||"left",onValueChange:d=>l("card_text_align",d),children:[e.jsx(Ve,{className:"h-9",children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"left",children:"Left"}),e.jsx(re,{value:"center",children:"Center"}),e.jsx(re,{value:"right",children:"Right"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"padding_left",children:"Left Padding (px)"}),e.jsx(he,{id:"padding_left",type:"number",value:a.padding_left||16,onChange:d=>l("padding_left",parseInt(d.target.value)||0),min:"0"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"padding_right",children:"Right Padding (px)"}),e.jsx(he,{id:"padding_right",type:"number",value:a.padding_right||16,onChange:d=>l("padding_right",parseInt(d.target.value)||0),min:"0"})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"cardCount",children:"Number of Cards"}),e.jsxs(Ke,{value:String(a.cardCount||4),onValueChange:d=>l("cardCount",parseInt(d)),children:[e.jsx(Ve,{className:"h-9",children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"1",children:"1 Card"}),e.jsx(re,{value:"2",children:"2 Cards"}),e.jsx(re,{value:"3",children:"3 Cards"}),e.jsx(re,{value:"4",children:"4 Cards"})]})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"backgroundColor",children:"Background Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{id:"backgroundColor",type:"color",value:a.backgroundColor||"#ffffff",onChange:d=>l("backgroundColor",d.target.value),className:"w-16 h-10 px-1 py-1 border border-slate-300 rounded-md cursor-pointer"}),e.jsx(he,{value:a.backgroundColor||"#ffffff",onChange:d=>l("backgroundColor",d.target.value),placeholder:"#ffffff",className:"flex-1"})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"cardHeight",children:"Card Height (px)"}),e.jsx(he,{id:"cardHeight",type:"number",value:a.cardHeight||400,onChange:d=>l("cardHeight",parseInt(d.target.value)||400),min:"200",max:"800"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"imageHeightPercent",children:"Image Height (% of card)"}),e.jsx(he,{id:"imageHeightPercent",type:"number",value:a.imageHeightPercent||50,onChange:d=>l("imageHeightPercent",parseInt(d.target.value)||50),min:"20",max:"80"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"cardBorderRadius",children:"Card Border Radius (px)"}),e.jsx(he,{id:"cardBorderRadius",type:"number",value:a.cardBorderRadius??8,onChange:d=>{const m=d.target.value===""?0:parseInt(d.target.value);l("cardBorderRadius",isNaN(m)?0:m)},min:"0",max:"50"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"descriptionLineClamp",children:"Description Lines"}),e.jsxs(Ke,{value:String(a.descriptionLineClamp??3),onValueChange:d=>l("descriptionLineClamp",d==="none"?"none":parseInt(d)),children:[e.jsx(Ve,{className:"h-9",children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"1",children:"1 Line"}),e.jsx(re,{value:"2",children:"2 Lines"}),e.jsx(re,{value:"3",children:"3 Lines"}),e.jsx(re,{value:"4",children:"4 Lines"}),e.jsx(re,{value:"5",children:"5 Lines"}),e.jsx(re,{value:"none",children:"No Limit"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"showPublishedDate",checked:a.showPublishedDate||!1,onChange:d=>l("showPublishedDate",d.target.checked),className:"w-4 h-4"}),e.jsx(ee,{htmlFor:"showPublishedDate",className:"cursor-pointer",children:"Show Published Date"})]}),e.jsxs("div",{className:"space-y-3 p-3 bg-slate-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"showImageBorder",checked:a.showImageBorder||!1,onChange:d=>l("showImageBorder",d.target.checked),className:"w-4 h-4"}),e.jsx(ee,{htmlFor:"showImageBorder",className:"cursor-pointer",children:"Show Line Below Image"})]}),a.showImageBorder&&e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"imageBorderWeight",children:"Line Weight (px)"}),e.jsx(he,{id:"imageBorderWeight",type:"number",value:a.imageBorderWeight||3,onChange:d=>l("imageBorderWeight",parseInt(d.target.value)||3),min:"1",max:"20"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"imageBorderColor",children:"Line Color"}),e.jsx("input",{id:"imageBorderColor",type:"color",value:a.imageBorderColor||"#2563eb",onChange:d=>l("imageBorderColor",d.target.value),className:"w-full h-10 px-1 py-1 border border-slate-300 rounded-md cursor-pointer"})]})]})]}),e.jsxs("div",{className:"space-y-3 p-3 bg-slate-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"showCTAButton",checked:a.showCTAButton??!0,onChange:d=>l("showCTAButton",d.target.checked),className:"w-4 h-4"}),e.jsx(ee,{htmlFor:"showCTAButton",className:"cursor-pointer",children:"Show CTA Button"})]}),a.showCTAButton!==!1&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"ctaButtonSize",children:"Button Size (px)"}),e.jsx(he,{id:"ctaButtonSize",type:"number",value:a.ctaButtonSize||48,onChange:d=>l("ctaButtonSize",parseInt(d.target.value)||48),min:"24",max:"80"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"ctaButtonMargin",children:"Margin (px)"}),e.jsx(he,{id:"ctaButtonMargin",type:"number",value:a.ctaButtonMargin??16,onChange:d=>l("ctaButtonMargin",parseInt(d.target.value)??0),min:"0",max:"50"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"ctaButtonBgColor",children:"Background"}),e.jsx("input",{id:"ctaButtonBgColor",type:"color",value:a.ctaButtonBgColor||"#2563eb",onChange:d=>l("ctaButtonBgColor",d.target.value),className:"w-full h-10 px-1 py-1 border border-slate-300 rounded-md cursor-pointer"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"ctaButtonArrowColor",children:"Arrow Color"}),e.jsx("input",{id:"ctaButtonArrowColor",type:"color",value:a.ctaButtonArrowColor||"#ffffff",onChange:d=>l("ctaButtonArrowColor",d.target.value),className:"w-full h-10 px-1 py-1 border border-slate-300 rounded-md cursor-pointer"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(ee,{children:"Card Slots"}),e.jsx("div",{className:"space-y-4 mt-2",children:a.cards.map((d,m)=>e.jsx(tye,{index:m,card:d,onUpdate:o},m))})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"backgroundImage",children:"Background Image"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(he,{id:"backgroundImage",value:a.backgroundImage||"",onChange:d=>l("backgroundImage",d.target.value),placeholder:"Background image URL",className:"flex-1"}),e.jsxs(ee,{htmlFor:"bg-upload",className:"cursor-pointer",children:[e.jsx("div",{className:`flex items-center gap-2 px-4 py-2 rounded-md transition-colors ${n?"bg-slate-300 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:n?e.jsx(vt,{className:"w-4 h-4 animate-spin"}):e.jsx(Gs,{className:"w-4 h-4"})}),e.jsx("input",{id:"bg-upload",type:"file",accept:"image/*",onChange:d=>{var h;const m=(h=d.target.files)==null?void 0:h[0];m&&c(m),d.target.value=""},className:"hidden",disabled:n})]}),a.backgroundImage&&e.jsx(J,{variant:"ghost",size:"sm",onClick:()=>l("backgroundImage",""),className:"text-red-600",type:"button",children:e.jsx(os,{className:"w-4 h-4"})})]}),a.backgroundImage&&e.jsx("img",{src:a.backgroundImage,alt:"Background preview",className:"mt-2 w-full h-32 object-cover rounded"})]})]})}function nye({element:t,settings:s}){var v,y,j,w;const n=t.content||{headerText:"",descriptionText:"",heading_font_family:"Poppins",heading_font_size:48,heading_letter_spacing:0,heading_color:"#0f172a",heading_underline_enabled:!1,heading_underline_color:"#000000",heading_underline_width:100,heading_underline_weight:2,heading_underline_spacing:16,heading_underline_to_content_spacing:24,heading_underline_alignment:"center",subheading_font_family:"Poppins",subheading_font_size:20,subheading_line_height:1.5,description_color:"#475569",text_align:"center",padding_left:16,padding_right:16,backgroundImage:"",backgroundColor:"#ffffff",cardCount:4,cardHeight:400,imageHeightPercent:50,cardBorderRadius:8,descriptionLineClamp:3,showPublishedDate:!1,showImageBorder:!1,imageBorderWeight:3,imageBorderColor:"#2563eb",showCTAButton:!0,ctaButtonSize:48,ctaButtonBgColor:"#2563eb",ctaButtonArrowColor:"#ffffff",ctaButtonMargin:16,card_text_align:"left",cards:[]},r=s==null?void 0:s.fullWidth,{data:a="Articles"}=me({queryKey:["article-display-name"],queryFn:async()=>{const _=(await X.entities.SystemSettings.list()).find(T=>T.setting_key==="article_display_name");return(_==null?void 0:_.setting_value)||"Articles"},staleTime:300*1e3}),{data:i=[]}=me({queryKey:["showcase-news"],queryFn:async()=>(await X.entities.NewsPost.list()).filter(_=>_.status==="published"),enabled:(v=n.cards)==null?void 0:v.some(N=>N.contentType==="news"&&N.itemId),staleTime:60*1e3}),{data:l=[]}=me({queryKey:["showcase-resources"],queryFn:()=>X.entities.Resource.list(),enabled:(y=n.cards)==null?void 0:y.some(N=>N.contentType==="resources"&&N.itemId),staleTime:60*1e3}),{data:o=[]}=me({queryKey:["showcase-articles"],queryFn:async()=>(await X.entities.BlogPost.list()).filter(_=>_.status==="published"),enabled:(j=n.cards)==null?void 0:j.some(N=>N.contentType==="articles"&&N.itemId),staleTime:60*1e3}),{data:c=[]}=me({queryKey:["showcase-jobs"],queryFn:async()=>(await X.entities.JobPosting.list()).filter(_=>_.status==="active"),enabled:(w=n.cards)==null?void 0:w.some(N=>N.contentType==="jobs"&&N.itemId),staleTime:60*1e3}),u=Be.useMemo(()=>n.cards?n.cards.map(N=>{if(!N.itemId)return null;let _;switch(N.contentType){case"news":_=i.find(T=>T.id===N.itemId);break;case"resources":_=l.find(T=>T.id===N.itemId);break;case"articles":_=o.find(T=>T.id===N.itemId);break;case"jobs":_=c.find(T=>T.id===N.itemId);break}return _?{..._,_contentType:N.contentType,_cardConfig:N}:null}).filter(Boolean):[],[n.cards,i,l,o,c]),d=N=>{switch(N._contentType){case"news":return Pe(`NewsView?id=${N.id}`);case"resources":return N.download_url||N.content_url||"#";case"articles":return Pe(`ArticleView?slug=${N.slug}`);case"jobs":return Pe(`JobDetails?id=${N.id}`);default:return"#"}},m=N=>{switch(N){case"news":return"News";case"resources":return"Resource";case"articles":return(a==null?void 0:a.slice(0,-1))||"Article";case"jobs":return"Job";default:return""}},h=n.backgroundImage?{backgroundImage:`url(${n.backgroundImage})`,backgroundSize:"cover",backgroundPosition:"center"}:{backgroundColor:n.backgroundColor||"#ffffff"},p=r?"w-screen relative left-1/2 right-1/2 -ml-[50vw] -mr-[50vw]":"w-full",g={paddingLeft:`${n.padding_left||16}px`,paddingRight:`${n.padding_right||16}px`,textAlign:n.text_align||"center"};return e.jsx("div",{className:`${p} py-16 relative`,style:h,children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 relative z-10",style:g,children:[(n.headerText||n.descriptionText)&&e.jsxs("div",{style:{marginBottom:"48px"},children:[n.headerText&&e.jsxs("div",{children:[e.jsx("h2",{style:{fontWeight:"bold",fontFamily:n.heading_font_family||"Poppins",fontSize:`${n.heading_font_size||48}px`,letterSpacing:`${n.heading_letter_spacing||0}px`,marginBottom:n.heading_underline_enabled?`${n.heading_underline_spacing||16}px`:"24px",color:n.heading_color||"#0f172a"},children:n.headerText}),n.heading_underline_enabled&&e.jsx("div",{style:{width:`${n.heading_underline_width||100}px`,height:`${n.heading_underline_weight||2}px`,backgroundColor:n.heading_underline_color||"#000000",marginLeft:(n.heading_underline_alignment||"center")==="center"||(n.heading_underline_alignment||"center")==="right"?"auto":"0",marginRight:(n.heading_underline_alignment||"center")==="center"?"auto":"0",marginBottom:`${n.heading_underline_to_content_spacing||24}px`,display:"block"}})]}),n.descriptionText&&e.jsx("p",{style:{fontFamily:n.subheading_font_family||"Poppins",fontSize:`${n.subheading_font_size||20}px`,lineHeight:n.subheading_line_height||1.5,maxWidth:"48rem",margin:"0 auto",color:n.description_color||"#475569"},children:n.descriptionText})]}),u.length===0?e.jsxs("div",{className:"text-center py-12 bg-white/90 rounded-lg",children:[e.jsx(ns,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-500",children:"No items selected"})]}):e.jsx("div",{className:`grid grid-cols-1 ${n.cardCount>=2?"md:grid-cols-2":""} ${n.cardCount>=4?"lg:grid-cols-4":n.cardCount===3?"lg:grid-cols-3":""} gap-6`,children:u.map(N=>{var M,k,E,R;const _=N._contentType==="resources"&&(N.download_url||N.content_url),T=d(N),A=Math.round((n.cardHeight||400)*((n.imageHeightPercent||50)/100)),P=n.ctaButtonSize||48,C=n.ctaButtonMargin??16,O=e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",style:{height:`${A}px`},children:[(N.image_url||N.feature_image_url)&&e.jsx("img",{src:N.image_url||N.feature_image_url,alt:N.title||N.name,className:"w-full h-full object-cover"}),((M=N._cardConfig)==null?void 0:M.showLabel)!==!1&&e.jsx(ye,{className:"absolute top-0 left-0 text-xs font-semibold rounded-none px-3 py-1",style:{backgroundColor:((k=N._cardConfig)==null?void 0:k.labelBgColor)||"#2563eb",color:((E=N._cardConfig)==null?void 0:E.labelTextColor)||"#ffffff"},children:((R=N._cardConfig)==null?void 0:R.labelText)||m(N._contentType)})]}),n.showImageBorder&&e.jsx("div",{style:{height:`${n.imageBorderWeight||3}px`,backgroundColor:n.imageBorderColor||"#2563eb"}}),e.jsxs("div",{className:"p-4 flex-1 overflow-hidden relative",style:{textAlign:n.card_text_align||"left"},children:[e.jsx("h3",{className:"font-semibold text-slate-900 mb-2 line-clamp-2",children:N.title||N.name}),(N.summary||N.description)&&e.jsx("p",{className:`text-sm text-slate-600 ${n.descriptionLineClamp==="none"?"":`line-clamp-${n.descriptionLineClamp??3}`}`,children:N.summary||N.description}),n.showPublishedDate&&N.published_date&&e.jsxs("div",{className:"flex items-center gap-1 mt-3 text-xs text-slate-500",style:{justifyContent:n.card_text_align==="center"?"center":n.card_text_align==="right"?"flex-end":"flex-start"},children:[e.jsx(Ns,{className:"w-3 h-3"}),new Date(N.published_date).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"})]}),n.showCTAButton!==!1&&e.jsx("div",{className:"absolute flex items-center justify-center transition-transform hover:scale-110",style:{width:`${P}px`,height:`${P}px`,backgroundColor:n.ctaButtonBgColor||"#2563eb",borderRadius:`${n.cardBorderRadius??8}px`,bottom:`${C}px`,right:`${C}px`},children:e.jsx(Mr,{style:{width:`${P*.5}px`,height:`${P*.5}px`,color:n.ctaButtonArrowColor||"#ffffff"}})})]})]});return _?e.jsx("a",{href:T,target:"_blank",rel:"noopener noreferrer",className:"bg-white shadow-xl overflow-hidden hover:shadow-2xl hover:scale-105 transition-all duration-300 block flex flex-col",style:{height:`${n.cardHeight||400}px`,borderRadius:`${n.cardBorderRadius??8}px`},children:O},N.id):e.jsx(Ht,{to:T,className:"bg-white shadow-xl overflow-hidden hover:shadow-2xl hover:scale-105 transition-all duration-300 block flex flex-col",style:{height:`${n.cardHeight||400}px`,borderRadius:`${n.cardBorderRadius??8}px`},children:O},N.id)})})]})})}function rye({element:t,onChange:s}){const[n,r]=Be.useState(!1),a={headerText:"",subheaderText:"",descriptionText:"",heading_font_family:"Poppins",heading_font_size:48,heading_letter_spacing:0,heading_color:"#0f172a",heading_underline_enabled:!1,heading_underline_color:"#000000",heading_underline_width:100,heading_underline_weight:2,heading_underline_spacing:16,heading_underline_to_content_spacing:24,heading_underline_alignment:"left",subheading_font_family:"Poppins",subheading_font_size:24,subheading_color:"#475569",description_font_family:"Poppins",description_font_size:16,description_color:"#64748b",description_line_height:1.6,button_text:"Learn More",button_link:"",button_style_id:"",button_custom_bg_color:"",button_custom_text_color:"",button_custom_border_color:"",button_size:"default",button_show_arrow:!0,backgroundImage:"",backgroundColor:"#ffffff",cardBorderRadius:8,first_column_right_padding:0,showResourceDescription:!0,resourceTitleFontSize:20,showCTAButton:!0,ctaButtonSize:48,ctaButtonBgColor:"#2563eb",ctaButtonIconColor:"#ffffff",ctaButtonMargin:16,resourceIds:["","","",""]},[i,l]=Be.useState({...a,...t.content||{}}),{data:o=[]}=me({queryKey:["resources-list"],queryFn:()=>X.entities.Resource.list("-created_date"),staleTime:60*1e3}),{data:c=[]}=me({queryKey:["button-styles"],queryFn:()=>X.entities.ButtonStyle.list(),staleTime:300*1e3}),u=(h,p)=>{const g={...i,[h]:p};l(g),s({...t,content:g})},d=(h,p)=>{const g=Array.isArray(i.resourceIds)?[...i.resourceIds]:["","","",""];g[h]=p,u("resourceIds",g)},m=async h=>{if(!h)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/svg+xml"].includes(h.type)){te.error("Please upload a valid image file");return}if(h.size>10*1024*1024){te.error("Image must be smaller than 10MB");return}r(!0);try{const g=await X.integrations.Core.UploadFile({file:h});u("backgroundImage",g.file_url),te.success("Image uploaded")}catch(g){te.error("Upload failed: "+g.message)}finally{r(!1)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"headerText",children:"Header Text"}),e.jsx(he,{id:"headerText",value:i.headerText||"",onChange:h=>u("headerText",h.target.value),placeholder:"Main heading"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"heading_font_family",children:"Heading Font"}),e.jsxs(Ke,{value:i.heading_font_family||"Poppins",onValueChange:h=>u("heading_font_family",h),children:[e.jsx(Ve,{className:"h-9",children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"Poppins",children:"Poppins"}),e.jsx(re,{value:"Degular Medium",children:"Degular Medium"})]})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"heading_font_size",children:"Heading Size (px)"}),e.jsx(he,{id:"heading_font_size",type:"number",value:i.heading_font_size||48,onChange:h=>u("heading_font_size",parseInt(h.target.value)||48),min:"12",max:"200"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"heading_letter_spacing",children:"Letter Spacing (px)"}),e.jsx(he,{id:"heading_letter_spacing",type:"number",step:"0.5",value:i.heading_letter_spacing||0,onChange:h=>u("heading_letter_spacing",parseFloat(h.target.value)||0),min:"-5",max:"20"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"heading_color",children:"Heading Color"}),e.jsx("input",{id:"heading_color",type:"color",value:i.heading_color||"#0f172a",onChange:h=>u("heading_color",h.target.value),className:"w-full h-10 px-1 py-1 border border-slate-300 rounded-md cursor-pointer"})]})]}),e.jsxs("div",{className:"space-y-3 p-3 bg-slate-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"heading_underline_enabled",checked:i.heading_underline_enabled||!1,onChange:h=>u("heading_underline_enabled",h.target.checked),className:"w-4 h-4"}),e.jsx(ee,{htmlFor:"heading_underline_enabled",className:"cursor-pointer",children:"Show line below heading"})]}),i.heading_underline_enabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"heading_underline_color",children:"Line Color"}),e.jsx("input",{id:"heading_underline_color",type:"color",value:i.heading_underline_color||"#000000",onChange:h=>u("heading_underline_color",h.target.value),className:"w-full h-10 px-1 py-1 border border-slate-300 rounded-md cursor-pointer"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"heading_underline_width",children:"Line Width (px)"}),e.jsx(he,{id:"heading_underline_width",type:"number",value:i.heading_underline_width||100,onChange:h=>u("heading_underline_width",parseInt(h.target.value)||0),min:"10",max:"1000"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"heading_underline_weight",children:"Weight (px)"}),e.jsx(he,{id:"heading_underline_weight",type:"number",value:i.heading_underline_weight||2,onChange:h=>u("heading_underline_weight",parseInt(h.target.value)||1),min:"1",max:"20"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"heading_underline_spacing",children:"Spacing (px)"}),e.jsx(he,{id:"heading_underline_spacing",type:"number",value:i.heading_underline_spacing||16,onChange:h=>u("heading_underline_spacing",parseInt(h.target.value)||0),min:"0",max:"100"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"heading_underline_to_content_spacing",children:"To Content (px)"}),e.jsx(he,{id:"heading_underline_to_content_spacing",type:"number",value:i.heading_underline_to_content_spacing||24,onChange:h=>u("heading_underline_to_content_spacing",parseInt(h.target.value)||0),min:"0",max:"100"})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"heading_underline_alignment",children:"Line Alignment"}),e.jsxs(Ke,{value:i.heading_underline_alignment||"left",onValueChange:h=>u("heading_underline_alignment",h),children:[e.jsx(Ve,{className:"h-9",children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"left",children:"Left"}),e.jsx(re,{value:"center",children:"Center"}),e.jsx(re,{value:"right",children:"Right"})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"subheaderText",children:"Subheader Text"}),e.jsx(he,{id:"subheaderText",value:i.subheaderText||"",onChange:h=>u("subheaderText",h.target.value),placeholder:"Subheading"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"subheading_font_family",children:"Subheader Font"}),e.jsxs(Ke,{value:i.subheading_font_family||"Poppins",onValueChange:h=>u("subheading_font_family",h),children:[e.jsx(Ve,{className:"h-9",children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"Poppins",children:"Poppins"}),e.jsx(re,{value:"Degular Medium",children:"Degular Medium"})]})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"subheading_font_size",children:"Size (px)"}),e.jsx(he,{id:"subheading_font_size",type:"number",value:i.subheading_font_size||24,onChange:h=>u("subheading_font_size",parseInt(h.target.value)||24),min:"12",max:"100"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"subheading_color",children:"Color"}),e.jsx("input",{id:"subheading_color",type:"color",value:i.subheading_color||"#475569",onChange:h=>u("subheading_color",h.target.value),className:"w-full h-10 px-1 py-1 border border-slate-300 rounded-md cursor-pointer"})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"descriptionText",children:"Description Text"}),e.jsx(Gt,{id:"descriptionText",value:i.descriptionText||"",onChange:h=>u("descriptionText",h.target.value),placeholder:"Description text",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"description_font_family",children:"Description Font"}),e.jsxs(Ke,{value:i.description_font_family||"Poppins",onValueChange:h=>u("description_font_family",h),children:[e.jsx(Ve,{className:"h-9",children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"Poppins",children:"Poppins"}),e.jsx(re,{value:"Degular Medium",children:"Degular Medium"})]})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"description_font_size",children:"Size (px)"}),e.jsx(he,{id:"description_font_size",type:"number",value:i.description_font_size||16,onChange:h=>u("description_font_size",parseInt(h.target.value)||16),min:"12",max:"100"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"description_line_height",children:"Line Height"}),e.jsx(he,{id:"description_line_height",type:"number",step:"0.1",value:i.description_line_height||1.6,onChange:h=>u("description_line_height",parseFloat(h.target.value)||1.6),min:"1",max:"3"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"description_color",children:"Color"}),e.jsx("input",{id:"description_color",type:"color",value:i.description_color||"#64748b",onChange:h=>u("description_color",h.target.value),className:"w-full h-10 px-1 py-1 border border-slate-300 rounded-md cursor-pointer"})]})]}),e.jsxs("div",{className:"space-y-3 p-3 bg-slate-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-sm",children:"CTA Button"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"button_text",children:"Button Text"}),e.jsx(he,{id:"button_text",value:i.button_text||"",onChange:h=>u("button_text",h.target.value),placeholder:"Button text"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"button_link",children:"Button Link"}),e.jsx(he,{id:"button_link",value:i.button_link||"",onChange:h=>u("button_link",h.target.value),placeholder:"URL or page name"})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"button_style_id",children:"Button Style"}),e.jsxs(Ke,{value:i.button_style_id||"",onValueChange:h=>u("button_style_id",h),children:[e.jsx(Ve,{className:"h-9",children:e.jsx(Qe,{placeholder:"Select a style..."})}),e.jsxs(We,{children:[e.jsx(re,{value:null,children:"No Style (Use Custom Colors)"}),c.map(h=>e.jsx(re,{value:h.id,children:h.name},h.id))]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"button_transparent_bg",checked:i.button_custom_bg_color==="transparent",onChange:h=>u("button_custom_bg_color",h.target.checked?"transparent":"#2563eb"),className:"w-4 h-4"}),e.jsx(ee,{htmlFor:"button_transparent_bg",className:"cursor-pointer",children:"Transparent Background"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"button_custom_bg_color",children:"Custom Background"}),e.jsx("input",{id:"button_custom_bg_color",type:"color",value:i.button_custom_bg_color==="transparent"?"#2563eb":i.button_custom_bg_color||"#2563eb",onChange:h=>u("button_custom_bg_color",h.target.value),className:"w-full h-10 px-1 py-1 border border-slate-300 rounded-md cursor-pointer",disabled:i.button_custom_bg_color==="transparent"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"button_custom_text_color",children:"Custom Text"}),e.jsx("input",{id:"button_custom_text_color",type:"color",value:i.button_custom_text_color||"#ffffff",onChange:h=>u("button_custom_text_color",h.target.value),className:"w-full h-10 px-1 py-1 border border-slate-300 rounded-md cursor-pointer"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"button_custom_border_color",children:"Custom Border"}),e.jsx("input",{id:"button_custom_border_color",type:"color",value:i.button_custom_border_color||"#2563eb",onChange:h=>u("button_custom_border_color",h.target.value),className:"w-full h-10 px-1 py-1 border border-slate-300 rounded-md cursor-pointer"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"button_size",children:"Button Size"}),e.jsxs(Ke,{value:i.button_size||"default",onValueChange:h=>u("button_size",h),children:[e.jsx(Ve,{className:"h-9",children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"sm",children:"Small"}),e.jsx(re,{value:"default",children:"Default"}),e.jsx(re,{value:"lg",children:"Large"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"button_show_arrow",checked:i.button_show_arrow??!0,onChange:h=>u("button_show_arrow",h.target.checked),className:"w-4 h-4"}),e.jsx(ee,{htmlFor:"button_show_arrow",className:"cursor-pointer",children:"Show Arrow"})]})})]})]}),e.jsxs("div",{children:[e.jsx(ee,{children:"Select Resources (up to 4)"}),e.jsx("div",{className:"space-y-2 mt-2",children:[0,1,2,3].map(h=>e.jsxs(Ke,{value:Array.isArray(i.resourceIds)&&i.resourceIds[h]||"",onValueChange:p=>d(h,p),children:[e.jsx(Ve,{className:"h-9",children:e.jsx(Qe,{placeholder:`Resource ${h+1} (optional)`})}),e.jsxs(We,{children:[e.jsx(re,{value:null,children:"None"}),o.map(p=>e.jsx(re,{value:p.id,children:p.title},p.id))]})]},h))})]}),e.jsxs("div",{className:"space-y-3 p-3 bg-slate-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"gradient_enabled",checked:i.gradient_enabled||!1,onChange:h=>u("gradient_enabled",h.target.checked),className:"w-4 h-4"}),e.jsx(ee,{htmlFor:"gradient_enabled",className:"cursor-pointer",children:"Use Gradient Background"})]}),i.gradient_enabled?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"gradient_start_color",children:"Start Color"}),e.jsx("input",{id:"gradient_start_color",type:"color",value:i.gradient_start_color||"#3b82f6",onChange:h=>u("gradient_start_color",h.target.value),className:"w-full h-10 px-1 py-1 border border-slate-300 rounded-md cursor-pointer"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"gradient_end_color",children:"End Color"}),e.jsx("input",{id:"gradient_end_color",type:"color",value:i.gradient_end_color||"#8b5cf6",onChange:h=>u("gradient_end_color",h.target.value),className:"w-full h-10 px-1 py-1 border border-slate-300 rounded-md cursor-pointer"})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"gradient_angle",children:"Angle (degrees)"}),e.jsx(he,{id:"gradient_angle",type:"number",value:i.gradient_angle||135,onChange:h=>u("gradient_angle",parseInt(h.target.value)||0),min:"0",max:"360"})]})]}):e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"backgroundColor",children:"Background Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{id:"backgroundColor",type:"color",value:i.backgroundColor||"#ffffff",onChange:h=>u("backgroundColor",h.target.value),className:"w-16 h-10 px-1 py-1 border border-slate-300 rounded-md cursor-pointer"}),e.jsx(he,{value:i.backgroundColor||"#ffffff",onChange:h=>u("backgroundColor",h.target.value),placeholder:"#ffffff",className:"flex-1"})]})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"cardBorderRadius",children:"Card Border Radius (px)"}),e.jsx(he,{id:"cardBorderRadius",type:"number",value:i.cardBorderRadius??8,onChange:h=>{const p=h.target.value===""?0:parseInt(h.target.value);u("cardBorderRadius",isNaN(p)?0:p)},min:"0",max:"50"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"first_column_right_padding",children:"First Column Right Padding (px)"}),e.jsx(he,{id:"first_column_right_padding",type:"number",value:i.first_column_right_padding??0,onChange:h=>u("first_column_right_padding",parseInt(h.target.value)||0),min:"0",max:"200"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"resourceTitleFontSize",children:"Resource Title Font Size (px)"}),e.jsx(he,{id:"resourceTitleFontSize",type:"number",value:i.resourceTitleFontSize??20,onChange:h=>u("resourceTitleFontSize",parseInt(h.target.value)||20),min:"12",max:"60"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"showResourceDescription",checked:i.showResourceDescription??!0,onChange:h=>u("showResourceDescription",h.target.checked),className:"w-4 h-4"}),e.jsx(ee,{htmlFor:"showResourceDescription",className:"cursor-pointer",children:"Show Resource Description"})]}),e.jsxs("div",{className:"space-y-3 p-3 bg-slate-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"showCTAButton",checked:i.showCTAButton??!0,onChange:h=>u("showCTAButton",h.target.checked),className:"w-4 h-4"}),e.jsx(ee,{htmlFor:"showCTAButton",className:"cursor-pointer",children:"Show CTA Button on Cards"})]}),i.showCTAButton!==!1&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"ctaButtonSize",children:"Button Size (px)"}),e.jsx(he,{id:"ctaButtonSize",type:"number",value:i.ctaButtonSize||48,onChange:h=>u("ctaButtonSize",parseInt(h.target.value)||48),min:"24",max:"80"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"ctaButtonMargin",children:"Margin (px)"}),e.jsx(he,{id:"ctaButtonMargin",type:"number",value:i.ctaButtonMargin??16,onChange:h=>u("ctaButtonMargin",parseInt(h.target.value)??0),min:"0",max:"50"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"ctaButtonBgColor",children:"Background"}),e.jsx("input",{id:"ctaButtonBgColor",type:"color",value:i.ctaButtonBgColor||"#2563eb",onChange:h=>u("ctaButtonBgColor",h.target.value),className:"w-full h-10 px-1 py-1 border border-slate-300 rounded-md cursor-pointer"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"ctaButtonIconColor",children:"Icon Color"}),e.jsx("input",{id:"ctaButtonIconColor",type:"color",value:i.ctaButtonIconColor||"#ffffff",onChange:h=>u("ctaButtonIconColor",h.target.value),className:"w-full h-10 px-1 py-1 border border-slate-300 rounded-md cursor-pointer"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"backgroundImage",children:"Background Image"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(he,{id:"backgroundImage",value:i.backgroundImage||"",onChange:h=>u("backgroundImage",h.target.value),placeholder:"Background image URL",className:"flex-1"}),e.jsxs(ee,{htmlFor:"bg-upload",className:"cursor-pointer",children:[e.jsx("div",{className:`flex items-center gap-2 px-4 py-2 rounded-md transition-colors ${n?"bg-slate-300 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:n?e.jsx(vt,{className:"w-4 h-4 animate-spin"}):e.jsx(Gs,{className:"w-4 h-4"})}),e.jsx("input",{id:"bg-upload",type:"file",accept:"image/*",onChange:h=>{var g;const p=(g=h.target.files)==null?void 0:g[0];p&&m(p),h.target.value=""},className:"hidden",disabled:n})]}),i.backgroundImage&&e.jsx(J,{variant:"ghost",size:"sm",onClick:()=>u("backgroundImage",""),className:"text-red-600",type:"button",children:e.jsx(os,{className:"w-4 h-4"})})]}),i.backgroundImage&&e.jsx("img",{src:i.backgroundImage,alt:"Background preview",className:"mt-2 w-full h-32 object-cover rounded"})]})]})}function aye({element:t,settings:s}){const r={...{headerText:"",subheaderText:"",descriptionText:"",heading_font_family:"Poppins",heading_font_size:48,heading_letter_spacing:0,heading_color:"#0f172a",heading_underline_enabled:!1,heading_underline_color:"#000000",heading_underline_width:100,heading_underline_weight:2,heading_underline_spacing:16,heading_underline_to_content_spacing:24,heading_underline_alignment:"left",subheading_font_family:"Poppins",subheading_font_size:24,subheading_color:"#475569",description_font_family:"Poppins",description_font_size:16,description_color:"#64748b",description_line_height:1.6,button_text:"Learn More",button_link:"",button_style_id:"",button_custom_bg_color:"",button_custom_text_color:"",button_custom_border_color:"",button_size:"default",button_show_arrow:!0,backgroundImage:"",backgroundColor:"#ffffff",gradient_enabled:!1,gradient_start_color:"#3b82f6",gradient_end_color:"#8b5cf6",gradient_angle:135,cardBorderRadius:8,first_column_right_padding:0,showResourceDescription:!0,resourceTitleFontSize:20,showCTAButton:!0,ctaButtonSize:48,ctaButtonBgColor:"#2563eb",ctaButtonIconColor:"#ffffff",ctaButtonMargin:16,resourceIds:["","","",""]},...t.content||{}},a=s==null?void 0:s.fullWidth,{data:i=[]}=me({queryKey:["resources-showcase"],queryFn:()=>X.entities.Resource.list(),enabled:Array.isArray(r.resourceIds)&&r.resourceIds.some(u=>u),staleTime:60*1e3}),l=Be.useMemo(()=>Array.isArray(r.resourceIds)?r.resourceIds.map(u=>u?i.find(d=>d.id===u):null).filter(Boolean):[],[r.resourceIds,i]),o=r.gradient_enabled?{background:`linear-gradient(${r.gradient_angle||135}deg, ${r.gradient_start_color||"#3b82f6"}, ${r.gradient_end_color||"#8b5cf6"})`,...r.backgroundImage&&{backgroundImage:`url(${r.backgroundImage})`,backgroundSize:"cover",backgroundPosition:"center"}}:{backgroundColor:r.backgroundColor||"#ffffff",...r.backgroundImage&&{backgroundImage:`url(${r.backgroundImage})`,backgroundSize:"cover",backgroundPosition:"center"}},c=a?"w-screen relative left-1/2 right-1/2 -ml-[50vw] -mr-[50vw]":"w-full";return e.jsx("div",{className:`${c} py-16 relative`,style:o,children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 relative z-10",children:e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1",style:{paddingRight:`${r.first_column_right_padding||0}px`},children:[r.headerText&&e.jsxs("div",{children:[e.jsx("h2",{style:{fontWeight:"bold",fontFamily:r.heading_font_family||"Poppins",fontSize:`${r.heading_font_size||48}px`,letterSpacing:`${r.heading_letter_spacing||0}px`,marginBottom:r.heading_underline_enabled?`${r.heading_underline_spacing||16}px`:"24px",color:r.heading_color||"#0f172a"},children:r.headerText}),r.heading_underline_enabled&&e.jsx("div",{style:{width:`${r.heading_underline_width||100}px`,height:`${r.heading_underline_weight||2}px`,backgroundColor:r.heading_underline_color||"#000000",marginLeft:(r.heading_underline_alignment||"left")==="center"||(r.heading_underline_alignment||"left")==="right"?"auto":"0",marginRight:(r.heading_underline_alignment||"left")==="center"?"auto":"0",marginBottom:`${r.heading_underline_to_content_spacing||24}px`,display:"block"}})]}),r.subheaderText&&e.jsx("h3",{style:{fontFamily:r.subheading_font_family||"Poppins",fontSize:`${r.subheading_font_size||24}px`,fontWeight:"600",color:r.subheading_color||"#475569",marginBottom:"16px"},children:r.subheaderText}),r.descriptionText&&e.jsx("p",{style:{fontFamily:r.description_font_family||"Poppins",fontSize:`${r.description_font_size||16}px`,lineHeight:r.description_line_height||1.6,color:r.description_color||"#64748b",marginBottom:"24px"},children:r.descriptionText}),r.button_text&&e.jsx(Is,{text:r.button_text,link:r.button_link,buttonStyleId:r.button_style_id,customBgColor:r.button_custom_bg_color,customTextColor:r.button_custom_text_color,customBorderColor:r.button_custom_border_color,size:r.button_size,showArrow:r.button_show_arrow})]}),e.jsx("div",{className:"lg:col-span-2",children:l.length===0?e.jsxs("div",{className:"text-center py-12 bg-white/90 rounded-lg",children:[e.jsx(ns,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-500",children:"No resources selected"})]}):e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:l.map(u=>e.jsxs("a",{href:u.target_url,target:u.open_in_new_tab?"_blank":"_self",rel:u.open_in_new_tab?"noopener noreferrer":void 0,className:"bg-white p-6 shadow-lg hover:shadow-xl transition-shadow group aspect-square flex flex-col justify-between relative",style:{borderRadius:`${r.cardBorderRadius??8}px`},children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 mb-3 group-hover:text-blue-600 transition-colors",style:{fontSize:`${r.resourceTitleFontSize||20}px`},children:u.title}),(r.showResourceDescription??!0)&&u.description&&e.jsx("p",{className:"text-sm text-slate-600 line-clamp-4",children:u.description})]}),r.showCTAButton!==!1&&e.jsx("div",{className:"absolute flex items-center justify-center transition-transform hover:scale-110",style:{width:`${r.ctaButtonSize||48}px`,height:`${r.ctaButtonSize||48}px`,backgroundColor:r.ctaButtonBgColor||"#2563eb",borderRadius:`${r.cardBorderRadius??8}px`,bottom:`${r.ctaButtonMargin??16}px`,right:`${r.ctaButtonMargin??16}px`},children:u.is_public?e.jsx(pG,{style:{width:`${(r.ctaButtonSize||48)*.5}px`,height:`${(r.ctaButtonSize||48)*.5}px`,color:r.ctaButtonIconColor||"#ffffff"}}):e.jsx($N,{style:{width:`${(r.ctaButtonSize||48)*.5}px`,height:`${(r.ctaButtonSize||48)*.5}px`,color:r.ctaButtonIconColor||"#ffffff"}})})]},u.id))})})]})})})}function iye({content:t,variant:s,settings:n}){const{header:r,header_alignment:a="center",background_color:i="#ffffff",header_font_family:l="Poppins",header_font_size:o="32",header_color:c="#000000",button_gap:u="16",buttons:d=[]}=t,m={left:"text-left",center:"text-center",right:"text-right"},h=m[a]||m.center,p=d.filter(g=>(g==null?void 0:g.text)&&(g==null?void 0:g.text.trim())!=="");return e.jsx("div",{className:"py-12 px-4",style:{backgroundColor:i},children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[r&&e.jsx("h2",{className:`${h} mb-8 font-bold`,style:{fontFamily:l,fontSize:`${o}px`,color:c},children:r}),e.jsx("div",{className:`flex flex-wrap ${a==="center"?"justify-center":a==="right"?"justify-end":"justify-start"}`,style:{gap:`${u}px`},children:p.map((g,v)=>e.jsx(Is,{text:g.text,link:g.link,buttonStyleId:g.button_style_id,customBgColor:g.custom_bg_color,customTextColor:g.custom_text_color,customBorderColor:g.custom_border_color,openInNewTab:g.open_in_new_tab,size:g.size||"medium",showArrow:g.show_arrow},v))})]})})}function lye({element:t,onChange:s}){const n={text:"",link:"",button_style_id:"",open_in_new_tab:!1,size:"medium",show_arrow:!1,custom_bg_color:"#000000",custom_text_color:"#ffffff",custom_border_color:""},r=t.content?{header:t.content.header??"",header_alignment:t.content.header_alignment??"center",background_color:t.content.background_color??"#ffffff",header_font_family:t.content.header_font_family??"Poppins",header_font_size:t.content.header_font_size??"32",header_color:t.content.header_color??"#000000",button_gap:t.content.button_gap??"16",buttons:(t.content.buttons||[n]).map(d=>({...n,...d}))}:{header:"",header_alignment:"center",background_color:"#ffffff",header_font_family:"Poppins",header_font_size:"32",header_color:"#000000",button_gap:"16",buttons:[n]},a=(d,m)=>{s({...t,content:{...r,[d]:m}})},i=(d,m,h)=>{const p=[...r.buttons||[]];p[d]={...p[d],[m]:h},a("buttons",p)},l=()=>{(r.buttons||[]).length<4&&a("buttons",[...r.buttons||[],{text:"",link:"",button_style_id:"",open_in_new_tab:!1,size:"medium",show_arrow:!1,custom_bg_color:"#000000",custom_text_color:"#ffffff",custom_border_color:""}])},o=d=>{const m=[...r.buttons||[]];m.splice(d,1),a("buttons",m)},[c,u]=Be.useState([]);return Be.useEffect(()=>{(async()=>{try{const{base44:m}=await ov(async()=>{const{base44:p}=await Promise.resolve().then(()=>N0);return{base44:p}},void 0),h=await m.entities.ButtonStyle.list();u(h.filter(p=>p.is_active))}catch(m){console.error("Failed to fetch button styles:",m)}})()},[]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4 p-4 bg-slate-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Header Settings"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Header Text"}),e.jsx("input",{type:"text",value:r.header||"",onChange:d=>a("header",d.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",placeholder:"Enter header text..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Alignment"}),e.jsxs("select",{value:r.header_alignment||"center",onChange:d=>a("header_alignment",d.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",children:[e.jsx("option",{value:"left",children:"Left"}),e.jsx("option",{value:"center",children:"Center"}),e.jsx("option",{value:"right",children:"Right"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Font"}),e.jsxs("select",{value:r.header_font_family||"Poppins",onChange:d=>a("header_font_family",d.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",children:[e.jsx("option",{value:"Poppins",children:"Poppins"}),e.jsx("option",{value:"Degular Medium",children:"Degular Medium"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Font Size (px)"}),e.jsx("input",{type:"number",value:r.header_font_size||32,onChange:d=>a("header_font_size",d.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",min:"12",max:"72"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Font Color"}),e.jsx("input",{type:"color",value:r.header_color||"#000000",onChange:d=>a("header_color",d.target.value),className:"w-full h-10 px-1 py-1 border border-slate-300 rounded-md cursor-pointer"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Background Color"}),e.jsx("input",{type:"color",value:r.background_color||"#ffffff",onChange:d=>a("background_color",d.target.value),className:"w-full h-10 px-1 py-1 border border-slate-300 rounded-md cursor-pointer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Button Gap (px)"}),e.jsx("input",{type:"number",value:r.button_gap||16,onChange:d=>a("button_gap",d.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",min:"0",max:"100"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"font-semibold text-sm",children:["Buttons (",(r.buttons||[]).length,"/4)"]}),(r.buttons||[]).length<4&&e.jsx("button",{onClick:l,className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700",children:"+ Add Button"})]}),(r.buttons||[]).map((d,m)=>e.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium",children:["Button ",m+1]}),e.jsx("button",{onClick:()=>o(m),className:"text-red-600 hover:text-red-700 text-sm",children:"Remove"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Button Text *"}),e.jsx("input",{type:"text",value:d.text||"",onChange:h=>i(m,"text",h.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",placeholder:"e.g., Learn More"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Link URL *"}),e.jsx("input",{type:"text",value:d.link||"",onChange:h=>i(m,"link",h.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",placeholder:"https://..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Button Style"}),e.jsxs("select",{value:d.button_style_id||"",onChange:h=>i(m,"button_style_id",h.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",children:[e.jsx("option",{value:"",children:"Default Style"}),c.map(h=>e.jsx("option",{value:h.id,children:h.name},h.id))]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Or use custom colors below"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Background"}),e.jsx("input",{type:"color",value:d.custom_bg_color||"#000000",onChange:h=>i(m,"custom_bg_color",h.target.value),className:"w-full h-10 px-1 py-1 border border-slate-300 rounded-md cursor-pointer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Text"}),e.jsx("input",{type:"color",value:d.custom_text_color||"#ffffff",onChange:h=>i(m,"custom_text_color",h.target.value),className:"w-full h-10 px-1 py-1 border border-slate-300 rounded-md cursor-pointer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Border (opt.)"}),e.jsx("input",{type:"color",value:d.custom_border_color||"",onChange:h=>i(m,"custom_border_color",h.target.value),className:"w-full h-10 px-1 py-1 border border-slate-300 rounded-md cursor-pointer"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Button Size"}),e.jsxs("select",{value:d.size||"medium",onChange:h=>i(m,"size",h.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",children:[e.jsx("option",{value:"small",children:"Small"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"large",children:"Large"}),e.jsx("option",{value:"xlarge",children:"Extra Large"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:`arrow-${m}`,checked:d.show_arrow||!1,onChange:h=>i(m,"show_arrow",h.target.checked),className:"w-4 h-4"}),e.jsx("label",{htmlFor:`arrow-${m}`,className:"text-sm cursor-pointer",children:"Show arrow icon "})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:`new-tab-${m}`,checked:d.open_in_new_tab||!1,onChange:h=>i(m,"open_in_new_tab",h.target.checked),className:"w-4 h-4"}),e.jsx("label",{htmlFor:`new-tab-${m}`,className:"text-sm cursor-pointer",children:"Open in new tab"})]})]},m)),(r.buttons||[]).length===0&&e.jsx("div",{className:"text-center py-8 text-slate-500 text-sm",children:'No buttons added yet. Click "Add Button" to get started.'})]})]})}function oye({content:t,variant:s,settings:n,isFirst:r}){const{image_url:a,header_text:i,header_position:l="left",header_font_family:o="Poppins",header_font_size:c="48",header_color:u="#ffffff",text_alignment:d="left",padding_vertical:m="80",padding_horizontal:h="16",line_spacing:p="1.2",text_padding_left:g="0",text_padding_right:v="0",text_padding_top:y="0",text_padding_bottom:j="0",height_type:w="auto",custom_height:N="400",image_fit:_="cover"}=t,T={left:"text-left",center:"text-center",right:"text-right"}[d]||"text-left",A=()=>_==="original"?{}:w==="full"?{height:"100vh"}:w==="custom"?{height:`${N}px`}:{minHeight:"400px"};return e.jsxs("div",{className:"relative w-full overflow-hidden",style:A(),children:[a&&e.jsx("img",{src:a,alt:i||"Hero image",className:_==="original"?"w-full h-auto block":"absolute inset-0 w-full h-full",style:_==="original"?{}:{objectFit:_}}),e.jsx("div",{className:`${_==="original"?"absolute inset-0 flex items-center":"relative h-full flex items-center"} max-w-7xl mx-auto`,style:{paddingLeft:`${h}px`,paddingRight:`${h}px`},children:e.jsx("div",{className:`max-w-2xl ${l==="right"?"ml-auto":"mr-auto"} ${T}`,style:{paddingLeft:`${g}px`,paddingRight:`${v}px`,paddingTop:`${y}px`,paddingBottom:`${j}px`},children:i&&e.jsx("h1",{className:"whitespace-pre-line",style:{fontFamily:o,fontSize:`${c}px`,color:u,lineHeight:p},children:i})})})]})}function cye({element:t,onChange:s}){const n=t.content||{image_url:"",header_text:"",header_position:"left",header_font_family:"Poppins",header_font_size:"48",header_color:"#ffffff",text_alignment:"left",padding_vertical:"80",padding_horizontal:"16",line_spacing:"1.2",text_padding_left:"0",text_padding_right:"0",text_padding_top:"0",text_padding_bottom:"0",height_type:"auto",custom_height:"400",image_fit:"cover"},[r,a]=Be.useState(!1),i=(o,c)=>{s({...t,content:{...n,[o]:c}})},l=async o=>{if(!o)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(o.type)){alert("Please upload a valid image file");return}if(o.size>10*1024*1024){alert("Image must be smaller than 10MB");return}a(!0);try{const{base44:u}=await ov(async()=>{const{base44:m}=await Promise.resolve().then(()=>N0);return{base44:m}},void 0),d=await u.integrations.Core.UploadFile({file:o});i("image_url",d.file_url)}catch(u){alert("Failed to upload image: "+u.message)}finally{a(!1)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Hero Image *"}),e.jsx("div",{className:"space-y-2",children:e.jsxs("label",{className:"inline-block",children:[e.jsx("div",{className:`px-4 py-2 rounded-md text-sm font-medium cursor-pointer ${r?"bg-slate-300 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:r?"Uploading...":" Upload Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:o=>{var u;const c=(u=o.target.files)==null?void 0:u[0];c&&l(c),o.target.value=""},className:"hidden",disabled:r})]})}),n.image_url&&e.jsxs("div",{className:"mt-2 relative",children:[e.jsx("img",{src:n.image_url,alt:"Preview",className:"w-full h-32 object-cover rounded",onError:o=>{o.target.style.display="none"}}),e.jsx("button",{onClick:()=>i("image_url",""),className:"absolute bottom-2 right-2 px-2 py-1 bg-red-600 hover:bg-red-700 text-white text-xs rounded",type:"button",children:"Remove"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Header Text *"}),e.jsx("textarea",{value:n.header_text||"",onChange:o=>i("header_text",o.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",placeholder:"Enter header text...",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Header Position"}),e.jsxs("select",{value:n.header_position||"left",onChange:o=>i("header_position",o.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",children:[e.jsx("option",{value:"left",children:"Left"}),e.jsx("option",{value:"right",children:"Right"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Image Display"}),e.jsxs("select",{value:n.image_fit||"cover",onChange:o=>i("image_fit",o.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",children:[e.jsx("option",{value:"cover",children:"Cover (Fill & Crop)"}),e.jsx("option",{value:"contain",children:"Contain (Fit Within)"}),e.jsx("option",{value:"original",children:"Original (Full Width, Natural Height)"})]})]}),n.image_fit!=="original"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Container Height"}),e.jsxs("select",{value:n.height_type||"auto",onChange:o=>i("height_type",o.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",children:[e.jsx("option",{value:"auto",children:"Auto (Min 400px)"}),e.jsx("option",{value:"full",children:"Full Viewport"}),e.jsx("option",{value:"custom",children:"Custom"})]})]}),n.height_type==="custom"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Custom Height (px)"}),e.jsx("input",{type:"number",value:n.custom_height||400,onChange:o=>i("custom_height",o.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",min:"100"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Font Family"}),e.jsxs("select",{value:n.header_font_family||"Poppins",onChange:o=>i("header_font_family",o.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",children:[e.jsx("option",{value:"Poppins",children:"Poppins"}),e.jsx("option",{value:"Degular Medium",children:"Degular Medium"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Font Size (px)"}),e.jsx("input",{type:"number",value:n.header_font_size||48,onChange:o=>i("header_font_size",o.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",min:"16",max:"96"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Font Color"}),e.jsx("input",{type:"color",value:n.header_color||"#ffffff",onChange:o=>i("header_color",o.target.value),className:"w-full h-10 px-1 py-1 border border-slate-300 rounded-md cursor-pointer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Text Alignment"}),e.jsxs("select",{value:n.text_alignment||"left",onChange:o=>i("text_alignment",o.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",children:[e.jsx("option",{value:"left",children:"Left"}),e.jsx("option",{value:"center",children:"Center"}),e.jsx("option",{value:"right",children:"Right"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Line Spacing"}),e.jsx("input",{type:"number",step:"0.1",min:"0.5",max:"3",value:n.line_spacing||1.2,onChange:o=>i("line_spacing",o.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-semibold",children:"Container Padding"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Vertical (px)"}),e.jsx("input",{type:"number",value:n.padding_vertical||80,onChange:o=>i("padding_vertical",o.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Horizontal (px)"}),e.jsx("input",{type:"number",value:n.padding_horizontal||16,onChange:o=>i("padding_horizontal",o.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",min:"0"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-semibold",children:"Text Position"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"From Left (px)"}),e.jsx("input",{type:"number",value:n.text_padding_left||0,onChange:o=>i("text_padding_left",o.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"From Right (px)"}),e.jsx("input",{type:"number",value:n.text_padding_right||0,onChange:o=>i("text_padding_right",o.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"From Top (px)"}),e.jsx("input",{type:"number",value:n.text_padding_top||0,onChange:o=>i("text_padding_top",o.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"From Bottom (px)"}),e.jsx("input",{type:"number",value:n.text_padding_bottom||0,onChange:o=>i("text_padding_bottom",o.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",min:"0"})]})]})]})]})}function dye({content:t,variant:s,settings:n}){const{heading_font_family:r="Poppins",heading_font_size:a=48,heading_letter_spacing:i=0,heading_underline_enabled:l=!1,heading_underline_color:o="#000000",heading_underline_width:c=100,heading_underline_weight:u=2,heading_underline_spacing:d=16,heading_underline_to_content_spacing:m=24,subheading_font_family:h="Poppins",subheading_font_size:p=20,subheading_line_height:g=1.5,text_align:v="center",background_color:y,padding_left:j=16,padding_right:w=16,button_top_margin:N=32,button:_}=t,T={default:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white",dark:"bg-slate-900 text-white",light:"bg-slate-50 text-slate-900"},A=T[s]||T.default,P=y?{backgroundColor:y}:{},C={paddingLeft:`${j}px`,paddingRight:`${w}px`,textAlign:v};return e.jsx("div",{className:y?"py-20":`${A} py-20`,style:P,children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4",style:C,children:[t.heading&&e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold",style:{fontFamily:r,fontSize:`${a}px`,letterSpacing:`${i}px`,marginBottom:l?`${d}px`:"24px"},children:t.heading}),l&&e.jsx("div",{style:{width:`${c}px`,height:`${u}px`,backgroundColor:o,margin:v==="center"?"0 auto":v==="right"?"0 0 0 auto":"0",marginBottom:`${m}px`}})]}),t.subheading&&e.jsx("p",{className:"mb-8 opacity-90",style:{fontFamily:h,fontSize:`${p}px`,lineHeight:g},children:t.subheading}),_&&_.text&&e.jsx("div",{style:{marginTop:`${N}px`},children:e.jsx(Is,{text:_.text,link:_.link,buttonStyleId:_.button_style_id,customBgColor:_.custom_bg_color,customTextColor:_.custom_text_color,customBorderColor:_.custom_border_color,openInNewTab:_.open_in_new_tab,size:_.size||"large",showArrow:_.show_arrow})})]})})}function uye({element:t,onChange:s}){const n={text:"",link:"",button_style_id:"",open_in_new_tab:!1,size:"large",show_arrow:!1,custom_bg_color:"#000000",custom_text_color:"#ffffff",custom_border_color:""},r=t.content||{heading:"",subheading:"",heading_font_family:"Poppins",heading_font_size:48,heading_letter_spacing:0,heading_underline_enabled:!1,heading_underline_color:"#000000",heading_underline_width:100,heading_underline_weight:2,heading_underline_spacing:16,heading_underline_to_content_spacing:24,subheading_font_family:"Poppins",subheading_font_size:20,subheading_line_height:1.5,text_align:"center",background_color:"",padding_left:16,padding_right:16,button_top_margin:32,button:n},a=(u,d)=>{s({...t,content:{...r,[u]:d}})},i=(u,d)=>{const m=r.button||n;a("button",{...m,[u]:d})},[l,o]=Be.useState([]);Be.useEffect(()=>{(async()=>{try{const{base44:d}=await ov(async()=>{const{base44:h}=await Promise.resolve().then(()=>N0);return{base44:h}},void 0),m=await d.entities.ButtonStyle.list();o(m.filter(h=>h.is_active))}catch(d){console.error("Failed to fetch button styles:",d)}})()},[]);const c=r.button||n;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Heading"}),e.jsx("input",{type:"text",value:r.heading||"",onChange:u=>a("heading",u.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",placeholder:"Enter heading..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Heading Font"}),e.jsxs("select",{value:r.heading_font_family||"Poppins",onChange:u=>a("heading_font_family",u.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",children:[e.jsx("option",{value:"Poppins",children:"Poppins"}),e.jsx("option",{value:"Degular Medium",children:"Degular Medium"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Heading Size (px)"}),e.jsx("input",{type:"number",value:r.heading_font_size||48,onChange:u=>a("heading_font_size",parseInt(u.target.value)||48),className:"w-full px-3 py-2 border border-slate-300 rounded-md",min:"12",max:"200"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Heading Letter Spacing (px)"}),e.jsx("input",{type:"number",step:"0.5",value:r.heading_letter_spacing||0,onChange:u=>a("heading_letter_spacing",parseFloat(u.target.value)||0),className:"w-full px-3 py-2 border border-slate-300 rounded-md",min:"-5",max:"20"})]}),e.jsxs("div",{className:"space-y-3 p-3 bg-slate-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"underline-enabled",checked:r.heading_underline_enabled||!1,onChange:u=>a("heading_underline_enabled",u.target.checked),className:"w-4 h-4"}),e.jsx("label",{htmlFor:"underline-enabled",className:"text-sm font-medium cursor-pointer",children:"Show line below heading"})]}),r.heading_underline_enabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Line Color"}),e.jsx("input",{type:"color",value:r.heading_underline_color||"#000000",onChange:u=>a("heading_underline_color",u.target.value),className:"w-full h-10 px-1 py-1 border border-slate-300 rounded-md cursor-pointer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Line Width (px)"}),e.jsx("input",{type:"number",value:r.heading_underline_width||100,onChange:u=>a("heading_underline_width",parseInt(u.target.value)||0),className:"w-full px-3 py-2 border border-slate-300 rounded-md",min:"10",max:"1000"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Line Weight (px)"}),e.jsx("input",{type:"number",value:r.heading_underline_weight||2,onChange:u=>a("heading_underline_weight",parseInt(u.target.value)||1),className:"w-full px-3 py-2 border border-slate-300 rounded-md",min:"1",max:"20"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Spacing from Header (px)"}),e.jsx("input",{type:"number",value:r.heading_underline_spacing||16,onChange:u=>a("heading_underline_spacing",parseInt(u.target.value)||0),className:"w-full px-3 py-2 border border-slate-300 rounded-md",min:"0",max:"100"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Spacing to Content (px)"}),e.jsx("input",{type:"number",value:r.heading_underline_to_content_spacing||24,onChange:u=>a("heading_underline_to_content_spacing",parseInt(u.target.value)||0),className:"w-full px-3 py-2 border border-slate-300 rounded-md",min:"0",max:"100"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Subheading"}),e.jsx("textarea",{value:r.subheading||"",onChange:u=>a("subheading",u.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",rows:"3",placeholder:"Enter subheading..."})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Subheading Font"}),e.jsxs("select",{value:r.subheading_font_family||"Poppins",onChange:u=>a("subheading_font_family",u.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",children:[e.jsx("option",{value:"Poppins",children:"Poppins"}),e.jsx("option",{value:"Degular Medium",children:"Degular Medium"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Size (px)"}),e.jsx("input",{type:"number",value:r.subheading_font_size||20,onChange:u=>a("subheading_font_size",parseInt(u.target.value)||20),className:"w-full px-3 py-2 border border-slate-300 rounded-md",min:"12",max:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Line Height"}),e.jsx("input",{type:"number",step:"0.1",value:r.subheading_line_height||1.5,onChange:u=>a("subheading_line_height",parseFloat(u.target.value)||1.5),className:"w-full px-3 py-2 border border-slate-300 rounded-md",min:"1",max:"3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Text Alignment"}),e.jsxs("select",{value:r.text_align||"center",onChange:u=>a("text_align",u.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",children:[e.jsx("option",{value:"left",children:"Left"}),e.jsx("option",{value:"center",children:"Center"}),e.jsx("option",{value:"right",children:"Right"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Background Color"}),e.jsx("input",{type:"color",value:r.background_color||"#3b82f6",onChange:u=>a("background_color",u.target.value),className:"w-full h-10 px-1 py-1 border border-slate-300 rounded-md cursor-pointer"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Leave empty to use variant style"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Left Padding (px)"}),e.jsx("input",{type:"number",value:r.padding_left||16,onChange:u=>a("padding_left",parseInt(u.target.value)||0),className:"w-full px-3 py-2 border border-slate-300 rounded-md",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Right Padding (px)"}),e.jsx("input",{type:"number",value:r.padding_right||16,onChange:u=>a("padding_right",parseInt(u.target.value)||0),className:"w-full px-3 py-2 border border-slate-300 rounded-md",min:"0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Button Top Margin (px)"}),e.jsx("input",{type:"number",value:r.button_top_margin||32,onChange:u=>a("button_top_margin",parseInt(u.target.value)||0),className:"w-full px-3 py-2 border border-slate-300 rounded-md",min:"0",max:"200"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Space between text and button"})]}),e.jsxs("div",{className:"pt-4 border-t border-slate-200",children:[e.jsx("h4",{className:"font-semibold text-sm mb-3",children:"Button Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Button Text"}),e.jsx("input",{type:"text",value:c.text||"",onChange:u=>i("text",u.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",placeholder:"e.g., Get Started"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Link URL"}),e.jsx("input",{type:"text",value:c.link||"",onChange:u=>i("link",u.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",placeholder:"https://..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Button Style"}),e.jsxs("select",{value:c.button_style_id||"",onChange:u=>i("button_style_id",u.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",children:[e.jsx("option",{value:"",children:"Default Style"}),l.map(u=>e.jsx("option",{value:u.id,children:u.name},u.id))]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Or use custom colors below"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Background"}),e.jsx("input",{type:"color",value:c.custom_bg_color||"#000000",onChange:u=>i("custom_bg_color",u.target.value),className:"w-full h-10 px-1 py-1 border border-slate-300 rounded-md cursor-pointer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Text"}),e.jsx("input",{type:"color",value:c.custom_text_color||"#ffffff",onChange:u=>i("custom_text_color",u.target.value),className:"w-full h-10 px-1 py-1 border border-slate-300 rounded-md cursor-pointer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Border"}),e.jsx("input",{type:"color",value:c.custom_border_color||"",onChange:u=>i("custom_border_color",u.target.value),className:"w-full h-10 px-1 py-1 border border-slate-300 rounded-md cursor-pointer"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Button Size"}),e.jsxs("select",{value:c.size||"large",onChange:u=>i("size",u.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-md",children:[e.jsx("option",{value:"small",children:"Small"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"large",children:"Large"}),e.jsx("option",{value:"xlarge",children:"Extra Large"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"arrow-hero",checked:c.show_arrow||!1,onChange:u=>i("show_arrow",u.target.checked),className:"w-4 h-4"}),e.jsx("label",{htmlFor:"arrow-hero",className:"text-sm cursor-pointer",children:"Show arrow icon "})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"new-tab-hero",checked:c.open_in_new_tab||!1,onChange:u=>i("open_in_new_tab",u.target.checked),className:"w-4 h-4"}),e.jsx("label",{htmlFor:"new-tab-hero",className:"text-sm cursor-pointer",children:"Open in new tab"})]})]})]})]})}function hye({element:t,onClose:s,onSave:n}){const[r,a]=b.useState(t.content||{}),[i,l]=b.useState(t.style_variant||"default"),[o,c]=b.useState(t.settings||{}),[u,d]=b.useState({}),[m,h]=b.useState(!1);b.useEffect(()=>{a(t.content||{}),l(t.style_variant||"default"),c(t.settings||{})},[t]);const{data:p}=me({queryKey:["iedit-template",t.element_type],queryFn:async()=>(await X.entities.IEditElementTemplate.list()).find(U=>U.element_type===t.element_type)}),g=()=>{n({content:r,style_variant:i,settings:o})},v=(V,U)=>{a({...r,[V]:U})},y=(V,U)=>{c({...o,[V]:U})},j=async(V,U)=>{if(!U)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/svg+xml"].includes(U.type)){te.error("Please upload a valid image file (JPEG, PNG, GIF, WebP, or SVG)");return}if(U.size>10*1024*1024){te.error("Image must be smaller than 10MB");return}d({...u,[V]:!0});try{const $=await X.integrations.Core.UploadFile({file:U});v(V,$.file_url),te.success("Image uploaded successfully")}catch($){te.error("Failed to upload image: "+$.message)}finally{d({...u,[V]:!1})}},w=V=>{v(V,"")},N=t.element_type==="image_hero",_=t.element_type==="wall_of_fame",T=t.element_type==="text_overlay_image",A=t.element_type==="table",P=t.element_type==="banner_carousel",C=t.element_type==="showcase",O=t.element_type==="resources_showcase",M=t.element_type==="button_block",k=t.element_type==="page_header_hero",E=t.element_type==="hero",R=t.element_type==="form",{data:F=[]}=me({queryKey:["forms-list"],queryFn:async()=>(await X.entities.Form.list()).filter(U=>U.is_active),enabled:R}),z=()=>{var U;if(!((U=p==null?void 0:p.content_schema)!=null&&U.properties))return e.jsx("div",{className:"space-y-4",children:Object.keys(r).map(B=>e.jsxs("div",{children:[e.jsx(ee,{htmlFor:B,className:"capitalize",children:B.replace(/_/g," ")}),typeof r[B]=="string"&&r[B].length>100?e.jsx(Gt,{id:B,value:r[B],onChange:$=>v(B,$.target.value),rows:4}):e.jsx(he,{id:B,value:r[B],onChange:$=>v(B,$.target.value)})]},B))});const V=p.content_schema.properties;return e.jsx("div",{className:"space-y-4",children:Object.entries(V).map(([B,$])=>{var q,Z;const L=R&&B==="form_slug",I=$.format==="uri"&&(B.toLowerCase().includes("image")||B.toLowerCase().includes("url")||((q=$.title)==null?void 0:q.toLowerCase().includes("image"))),W=u[B];return e.jsxs("div",{children:[e.jsxs(ee,{htmlFor:B,className:"capitalize",children:[$.title||B.replace(/_/g," "),((Z=p.content_schema.required)==null?void 0:Z.includes(B))&&" *"]}),$.description&&e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:$.description}),L?e.jsxs(Ke,{value:r[B]||"",onValueChange:Q=>v(B,Q),children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:"Select a form..."})}),e.jsx(We,{children:F.length===0?e.jsx("div",{className:"p-2 text-sm text-slate-500",children:"No active forms available"}):F.map(Q=>e.jsx(re,{value:Q.slug,children:Q.name},Q.id))})]}):I?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(he,{id:B,type:"text",value:r[B]||"",onChange:Q=>v(B,Q.target.value),placeholder:"Enter image URL or upload...",className:"flex-1"}),e.jsxs(ee,{htmlFor:`${B}-upload`,className:"cursor-pointer",children:[e.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-md transition-colors ${W?"bg-slate-300 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:[W?e.jsx(vt,{className:"w-4 h-4 animate-spin"}):e.jsx(Gs,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:W?"Uploading...":"Upload"})]}),e.jsx("input",{id:`${B}-upload`,type:"file",accept:"image/*",onChange:Q=>{var K;const Y=(K=Q.target.files)==null?void 0:K[0];Y&&j(B,Y),Q.target.value=""},className:"hidden",disabled:W})]})]}),r[B]&&e.jsxs("div",{className:"relative mt-2 p-2 border border-slate-200 rounded-lg bg-slate-50",children:[e.jsx("img",{src:r[B],alt:"Preview",className:"w-full h-32 object-cover rounded",onError:Q=>{Q.target.style.display="none"}}),e.jsx("button",{onClick:()=>w(B),className:"absolute bottom-3 right-3 p-1.5 bg-red-600 hover:bg-red-700 text-white rounded-full shadow-lg transition-colors",title:"Remove image",type:"button",children:e.jsx(os,{className:"w-3 h-3"})})]})]}):$.type==="string"&&$.format==="textarea"?e.jsx(Gt,{id:B,value:r[B]||"",onChange:Q=>v(B,Q.target.value),rows:4,placeholder:$.placeholder}):$.type==="string"&&$.enum?e.jsxs(Ke,{value:r[B]||"",onValueChange:Q=>v(B,Q),children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:"Select..."})}),e.jsx(We,{children:$.enum.map(Q=>e.jsx(re,{value:Q,children:Q},Q))})]}):$.type==="boolean"?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:B,checked:r[B]||!1,onChange:Q=>v(B,Q.target.checked),className:"w-4 h-4"}),e.jsx(ee,{htmlFor:B,className:"cursor-pointer",children:$.description||"Enable"})]}):$.type==="number"?e.jsx(he,{id:B,type:"number",value:r[B]||"",onChange:Q=>v(B,parseFloat(Q.target.value)||0),placeholder:$.placeholder,min:$.minimum,max:$.maximum}):e.jsx(he,{id:B,type:"text",value:r[B]||"",onChange:Q=>v(B,Q.target.value),placeholder:$.placeholder})]},B)})})};return e.jsxs("div",{className:`fixed inset-y-0 right-0 bg-white border-l border-slate-200 shadow-xl z-50 flex flex-col transition-all ${m?"w-[calc(100%-4rem)]":"w-96"}`,children:[e.jsxs("div",{className:"p-6 border-b border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Edit Element"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{variant:"outline",size:"sm",onClick:()=>h(!m),title:m?"Collapse":"Expand",children:m?"":""}),e.jsx(J,{variant:"ghost",size:"sm",onClick:s,children:e.jsx(_s,{className:"w-4 h-4"})})]})]}),e.jsx("p",{className:"text-sm text-slate-600 capitalize",children:t.element_type.replace(/_/g," ")})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[(p==null?void 0:p.available_variants)&&p.available_variants.length>1&&e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"variant",children:"Style Variant"}),e.jsxs(Ke,{value:i,onValueChange:l,children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsx(We,{children:p.available_variants.map(V=>e.jsx(re,{value:V,children:V},V))})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"Content"}),_?e.jsx(Kve,{element:{...t,content:r},onChange:V=>a(V.content||{})}):T?e.jsx(Yve,{element:{...t,content:r},onChange:V=>a(V.content||{})}):A?e.jsx(Jve,{element:{...t,content:r},onChange:V=>a(V.content||{})}):P?e.jsx(Zve,{element:{...t,content:r},onChange:V=>a(V.content||{})}):C?e.jsx(sye,{element:{...t,content:r},onChange:V=>a(V.content||{})}):O?e.jsx(rye,{element:{...t,content:r},onChange:V=>a(V.content||{})}):M?e.jsx(lye,{element:{...t,content:r},onChange:V=>a(V.content||{})}):k?e.jsx(cye,{element:{...t,content:r},onChange:V=>a(V.content||{})}):E?e.jsx(uye,{element:{...t,content:r},onChange:V=>a(V.content||{})}):z()]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"fullWidth",checked:o.fullWidth||!1,onChange:V=>y("fullWidth",V.target.checked),className:"w-4 h-4"}),e.jsx(ee,{htmlFor:"fullWidth",className:"cursor-pointer",children:"Full Width"})]}),N&&o.fullWidth&&e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-xs text-blue-700",children:[e.jsx("strong",{children:"Full Width Mode:"}),` Height is automatically determined by the background image's aspect ratio. The "Hero Height" setting is not used.`]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"paddingTop",children:"Padding Top (px)"}),e.jsx(he,{id:"paddingTop",type:"number",value:o.paddingTop??32,onChange:V=>y("paddingTop",parseInt(V.target.value)||0),min:"0",max:"200"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"paddingBottom",children:"Padding Bottom (px)"}),e.jsx(he,{id:"paddingBottom",type:"number",value:o.paddingBottom??32,onChange:V=>y("paddingBottom",parseInt(V.target.value)||0),min:"0",max:"200"})]})]})]})]})]}),e.jsx("div",{className:"p-6 border-t border-slate-200",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(J,{variant:"outline",onClick:s,className:"flex-1",children:"Cancel"}),e.jsxs(J,{onClick:g,className:"flex-1 bg-blue-600 hover:bg-blue-700",disabled:Object.values(u).some(V=>V),children:[e.jsx(un,{className:"w-4 h-4 mr-2"}),"Save"]})]})})]})}function mye({page:t,onClose:s,onSave:n}){const[r,a]=b.useState({...t}),i=()=>{n(r)};return e.jsx(Ct,{open:!0,onOpenChange:s,children:e.jsxs(Nt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(kt,{children:e.jsx(Et,{children:"Page Settings"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:"Basic Information"}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"title",children:"Page Title *"}),e.jsx(he,{id:"title",value:r.title,onChange:l=>a({...r,title:l.target.value})})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"slug",children:"URL Slug *"}),e.jsx(he,{id:"slug",value:r.slug,onChange:l=>a({...r,slug:l.target.value})}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Lowercase letters, numbers, and hyphens only"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"description",children:"Description"}),e.jsx(Gt,{id:"description",value:r.description||"",onChange:l=>a({...r,description:l.target.value}),rows:3})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:"Publication"}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"status",children:"Status"}),e.jsxs(Ke,{value:r.status,onValueChange:l=>a({...r,status:l,published_at:l==="published"&&!r.published_at?new Date().toISOString():r.published_at}),children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"draft",children:"Draft"}),e.jsx(re,{value:"published",children:"Published"}),e.jsx(re,{value:"archived",children:"Archived"})]})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"layout_type",children:"Layout Type"}),e.jsxs(Ke,{value:r.layout_type,onValueChange:l=>a({...r,layout_type:l}),children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"public",children:"Public (With header/footer)"}),e.jsx(re,{value:"member",children:"Member Portal (With sidebar)"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:"SEO (Optional)"}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"meta_title",children:"Meta Title"}),e.jsx(he,{id:"meta_title",value:r.meta_title||"",onChange:l=>a({...r,meta_title:l.target.value}),placeholder:"Leave empty to use page title"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"meta_description",children:"Meta Description"}),e.jsx(Gt,{id:"meta_description",value:r.meta_description||"",onChange:l=>a({...r,meta_description:l.target.value}),rows:3,placeholder:"Brief description for search engines"})]})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:s,children:"Cancel"}),e.jsxs(J,{onClick:i,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(un,{className:"w-4 h-4 mr-2"}),"Save Settings"]})]})]})})}function fye(t,s){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const pye=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,xye=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,gye={};function OD(t,s){return(gye.jsx?xye:pye).test(t)}const vye=/[ \t\n\f\r]/g;function yye(t){return typeof t=="object"?t.type==="text"?RD(t.value):!1:RD(t)}function RD(t){return t.replace(vye,"")===""}class xp{constructor(s,n,r){this.normal=n,this.property=s,r&&(this.space=r)}}xp.prototype.normal={};xp.prototype.property={};xp.prototype.space=void 0;function mq(t,s){const n={},r={};for(const a of t)Object.assign(n,a.property),Object.assign(r,a.normal);return new xp(n,r,s)}function l1(t){return t.toLowerCase()}class ca{constructor(s,n){this.attribute=n,this.property=s}}ca.prototype.attribute="";ca.prototype.booleanish=!1;ca.prototype.boolean=!1;ca.prototype.commaOrSpaceSeparated=!1;ca.prototype.commaSeparated=!1;ca.prototype.defined=!1;ca.prototype.mustUseProperty=!1;ca.prototype.number=!1;ca.prototype.overloadedBoolean=!1;ca.prototype.property="";ca.prototype.spaceSeparated=!1;ca.prototype.space=void 0;let bye=0;const fs=jd(),Rn=jd(),o1=jd(),mt=jd(),rn=jd(),wu=jd(),ga=jd();function jd(){return 2**++bye}const c1=Object.freeze(Object.defineProperty({__proto__:null,boolean:fs,booleanish:Rn,commaOrSpaceSeparated:ga,commaSeparated:wu,number:mt,overloadedBoolean:o1,spaceSeparated:rn},Symbol.toStringTag,{value:"Module"})),cN=Object.keys(c1);class JS extends ca{constructor(s,n,r,a){let i=-1;if(super(s,n),FD(this,"space",a),typeof r=="number")for(;++i<cN.length;){const l=cN[i];FD(this,cN[i],(r&c1[l])===c1[l])}}}JS.prototype.defined=!0;function FD(t,s,n){n&&(t[s]=n)}function Eh(t){const s={},n={};for(const[r,a]of Object.entries(t.properties)){const i=new JS(r,t.transform(t.attributes||{},r),a,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),s[r]=i,n[l1(r)]=r,n[l1(i.attribute)]=r}return new xp(s,n,t.space)}const fq=Eh({properties:{ariaActiveDescendant:null,ariaAtomic:Rn,ariaAutoComplete:null,ariaBusy:Rn,ariaChecked:Rn,ariaColCount:mt,ariaColIndex:mt,ariaColSpan:mt,ariaControls:rn,ariaCurrent:null,ariaDescribedBy:rn,ariaDetails:null,ariaDisabled:Rn,ariaDropEffect:rn,ariaErrorMessage:null,ariaExpanded:Rn,ariaFlowTo:rn,ariaGrabbed:Rn,ariaHasPopup:null,ariaHidden:Rn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:rn,ariaLevel:mt,ariaLive:null,ariaModal:Rn,ariaMultiLine:Rn,ariaMultiSelectable:Rn,ariaOrientation:null,ariaOwns:rn,ariaPlaceholder:null,ariaPosInSet:mt,ariaPressed:Rn,ariaReadOnly:Rn,ariaRelevant:null,ariaRequired:Rn,ariaRoleDescription:rn,ariaRowCount:mt,ariaRowIndex:mt,ariaRowSpan:mt,ariaSelected:Rn,ariaSetSize:mt,ariaSort:null,ariaValueMax:mt,ariaValueMin:mt,ariaValueNow:mt,ariaValueText:null,role:null},transform(t,s){return s==="role"?s:"aria-"+s.slice(4).toLowerCase()}});function pq(t,s){return s in t?t[s]:s}function xq(t,s){return pq(t,s.toLowerCase())}const jye=Eh({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:wu,acceptCharset:rn,accessKey:rn,action:null,allow:null,allowFullScreen:fs,allowPaymentRequest:fs,allowUserMedia:fs,alt:null,as:null,async:fs,autoCapitalize:null,autoComplete:rn,autoFocus:fs,autoPlay:fs,blocking:rn,capture:null,charSet:null,checked:fs,cite:null,className:rn,cols:mt,colSpan:null,content:null,contentEditable:Rn,controls:fs,controlsList:rn,coords:mt|wu,crossOrigin:null,data:null,dateTime:null,decoding:null,default:fs,defer:fs,dir:null,dirName:null,disabled:fs,download:o1,draggable:Rn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:fs,formTarget:null,headers:rn,height:mt,hidden:o1,high:mt,href:null,hrefLang:null,htmlFor:rn,httpEquiv:rn,id:null,imageSizes:null,imageSrcSet:null,inert:fs,inputMode:null,integrity:null,is:null,isMap:fs,itemId:null,itemProp:rn,itemRef:rn,itemScope:fs,itemType:rn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:fs,low:mt,manifest:null,max:null,maxLength:mt,media:null,method:null,min:null,minLength:mt,multiple:fs,muted:fs,name:null,nonce:null,noModule:fs,noValidate:fs,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:fs,optimum:mt,pattern:null,ping:rn,placeholder:null,playsInline:fs,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:fs,referrerPolicy:null,rel:rn,required:fs,reversed:fs,rows:mt,rowSpan:mt,sandbox:rn,scope:null,scoped:fs,seamless:fs,selected:fs,shadowRootClonable:fs,shadowRootDelegatesFocus:fs,shadowRootMode:null,shape:null,size:mt,sizes:null,slot:null,span:mt,spellCheck:Rn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:mt,step:null,style:null,tabIndex:mt,target:null,title:null,translate:null,type:null,typeMustMatch:fs,useMap:null,value:Rn,width:mt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:rn,axis:null,background:null,bgColor:null,border:mt,borderColor:null,bottomMargin:mt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:fs,declare:fs,event:null,face:null,frame:null,frameBorder:null,hSpace:mt,leftMargin:mt,link:null,longDesc:null,lowSrc:null,marginHeight:mt,marginWidth:mt,noResize:fs,noHref:fs,noShade:fs,noWrap:fs,object:null,profile:null,prompt:null,rev:null,rightMargin:mt,rules:null,scheme:null,scrolling:Rn,standby:null,summary:null,text:null,topMargin:mt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:mt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:fs,disableRemotePlayback:fs,prefix:null,property:null,results:mt,security:null,unselectable:null},space:"html",transform:xq}),wye=Eh({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:ga,accentHeight:mt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:mt,amplitude:mt,arabicForm:null,ascent:mt,attributeName:null,attributeType:null,azimuth:mt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:mt,by:null,calcMode:null,capHeight:mt,className:rn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:mt,diffuseConstant:mt,direction:null,display:null,dur:null,divisor:mt,dominantBaseline:null,download:fs,dx:null,dy:null,edgeMode:null,editable:null,elevation:mt,enableBackground:null,end:null,event:null,exponent:mt,externalResourcesRequired:null,fill:null,fillOpacity:mt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:wu,g2:wu,glyphName:wu,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:mt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:mt,horizOriginX:mt,horizOriginY:mt,id:null,ideographic:mt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:mt,k:mt,k1:mt,k2:mt,k3:mt,k4:mt,kernelMatrix:ga,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:mt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:mt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:mt,overlineThickness:mt,paintOrder:null,panose1:null,path:null,pathLength:mt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:rn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:mt,pointsAtY:mt,pointsAtZ:mt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ga,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ga,rev:ga,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ga,requiredFeatures:ga,requiredFonts:ga,requiredFormats:ga,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:mt,specularExponent:mt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:mt,strikethroughThickness:mt,string:null,stroke:null,strokeDashArray:ga,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:mt,strokeOpacity:mt,strokeWidth:null,style:null,surfaceScale:mt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ga,tabIndex:mt,tableValues:null,target:null,targetX:mt,targetY:mt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ga,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:mt,underlineThickness:mt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:mt,values:null,vAlphabetic:mt,vMathematical:mt,vectorEffect:null,vHanging:mt,vIdeographic:mt,version:null,vertAdvY:mt,vertOriginX:mt,vertOriginY:mt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:mt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:pq}),gq=Eh({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,s){return"xlink:"+s.slice(5).toLowerCase()}}),vq=Eh({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:xq}),yq=Eh({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,s){return"xml:"+s.slice(3).toLowerCase()}}),Nye={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},_ye=/[A-Z]/g,LD=/-[a-z]/g,Sye=/^data[-\w.:]+$/i;function Cye(t,s){const n=l1(s);let r=s,a=ca;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Sye.test(s)){if(s.charAt(4)==="-"){const i=s.slice(5).replace(LD,Eye);r="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=s.slice(4);if(!LD.test(i)){let l=i.replace(_ye,kye);l.charAt(0)!=="-"&&(l="-"+l),s="data"+l}}a=JS}return new a(r,s)}function kye(t){return"-"+t.toLowerCase()}function Eye(t){return t.charAt(1).toUpperCase()}const Pye=mq([fq,jye,gq,vq,yq],"html"),XS=mq([fq,wye,gq,vq,yq],"svg");function Tye(t){return t.join(" ").trim()}var iu={},dN,ID;function Aye(){if(ID)return dN;ID=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,s=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,a=/^:\s*/,i=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,o=/^\s+|\s+$/g,c=`
`,u="/",d="*",m="",h="comment",p="declaration";function g(y,j){if(typeof y!="string")throw new TypeError("First argument must be a string");if(!y)return[];j=j||{};var w=1,N=1;function _(F){var z=F.match(s);z&&(w+=z.length);var V=F.lastIndexOf(c);N=~V?F.length-V:N+F.length}function T(){var F={line:w,column:N};return function(z){return z.position=new A(F),O(),z}}function A(F){this.start=F,this.end={line:w,column:N},this.source=j.source}A.prototype.content=y;function P(F){var z=new Error(j.source+":"+w+":"+N+": "+F);if(z.reason=F,z.filename=j.source,z.line=w,z.column=N,z.source=y,!j.silent)throw z}function C(F){var z=F.exec(y);if(z){var V=z[0];return _(V),y=y.slice(V.length),z}}function O(){C(n)}function M(F){var z;for(F=F||[];z=k();)z!==!1&&F.push(z);return F}function k(){var F=T();if(!(u!=y.charAt(0)||d!=y.charAt(1))){for(var z=2;m!=y.charAt(z)&&(d!=y.charAt(z)||u!=y.charAt(z+1));)++z;if(z+=2,m===y.charAt(z-1))return P("End of comment missing");var V=y.slice(2,z-2);return N+=2,_(V),y=y.slice(z),N+=2,F({type:h,comment:V})}}function E(){var F=T(),z=C(r);if(z){if(k(),!C(a))return P("property missing ':'");var V=C(i),U=F({type:p,property:v(z[0].replace(t,m)),value:V?v(V[0].replace(t,m)):m});return C(l),U}}function R(){var F=[];M(F);for(var z;z=E();)z!==!1&&(F.push(z),M(F));return F}return O(),R()}function v(y){return y?y.replace(o,m):m}return dN=g,dN}var BD;function Mye(){if(BD)return iu;BD=1;var t=iu&&iu.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(iu,"__esModule",{value:!0}),iu.default=n;const s=t(Aye());function n(r,a){let i=null;if(!r||typeof r!="string")return i;const l=(0,s.default)(r),o=typeof a=="function";return l.forEach(c=>{if(c.type!=="declaration")return;const{property:u,value:d}=c;o?a(u,d,c):d&&(i=i||{},i[u]=d)}),i}return iu}var _m={},qD;function Dye(){if(qD)return _m;qD=1,Object.defineProperty(_m,"__esModule",{value:!0}),_m.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,s=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,a=/^-(ms)-/,i=function(u){return!u||n.test(u)||t.test(u)},l=function(u,d){return d.toUpperCase()},o=function(u,d){return"".concat(d,"-")},c=function(u,d){return d===void 0&&(d={}),i(u)?u:(u=u.toLowerCase(),d.reactCompat?u=u.replace(a,o):u=u.replace(r,o),u.replace(s,l))};return _m.camelCase=c,_m}var Sm,zD;function Oye(){if(zD)return Sm;zD=1;var t=Sm&&Sm.__importDefault||function(a){return a&&a.__esModule?a:{default:a}},s=t(Mye()),n=Dye();function r(a,i){var l={};return!a||typeof a!="string"||(0,s.default)(a,function(o,c){o&&c&&(l[(0,n.camelCase)(o,i)]=c)}),l}return r.default=r,Sm=r,Sm}var Rye=Oye();const Fye=ud(Rye),bq=jq("end"),ZS=jq("start");function jq(t){return s;function s(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Lye(t){const s=ZS(t),n=bq(t);if(s&&n)return{start:s,end:n}}function Km(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?$D(t.position):"start"in t||"end"in t?$D(t):"line"in t||"column"in t?d1(t):""}function d1(t){return UD(t&&t.line)+":"+UD(t&&t.column)}function $D(t){return d1(t&&t.start)+"-"+d1(t&&t.end)}function UD(t){return t&&typeof t=="number"?t:1}class br extends Error{constructor(s,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let a="",i={},l=!1;if(n&&("line"in n&&"column"in n?i={place:n}:"start"in n&&"end"in n?i={place:n}:"type"in n?i={ancestors:[n],place:n.position}:i={...n}),typeof s=="string"?a=s:!i.cause&&s&&(l=!0,a=s.message,i.cause=s),!i.ruleId&&!i.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?i.ruleId=r:(i.source=r.slice(0,c),i.ruleId=r.slice(c+1))}if(!i.place&&i.ancestors&&i.ancestors){const c=i.ancestors[i.ancestors.length-1];c&&(i.place=c.position)}const o=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file="",this.message=a,this.line=o?o.line:void 0,this.name=Km(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=l&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}br.prototype.file="";br.prototype.name="";br.prototype.reason="";br.prototype.message="";br.prototype.stack="";br.prototype.column=void 0;br.prototype.line=void 0;br.prototype.ancestors=void 0;br.prototype.cause=void 0;br.prototype.fatal=void 0;br.prototype.place=void 0;br.prototype.ruleId=void 0;br.prototype.source=void 0;const eC={}.hasOwnProperty,Iye=new Map,Bye=/[A-Z]/g,qye=new Set(["table","tbody","thead","tfoot","tr"]),zye=new Set(["td","th"]),wq="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function $ye(t,s){if(!s||s.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=s.filePath||void 0;let r;if(s.development){if(typeof s.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Qye(n,s.jsxDEV)}else{if(typeof s.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof s.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Yye(n,s.jsx,s.jsxs)}const a={Fragment:s.Fragment,ancestors:[],components:s.components||{},create:r,elementAttributeNameCase:s.elementAttributeNameCase||"react",evaluater:s.createEvaluater?s.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:s.ignoreInvalidStyle||!1,passKeys:s.passKeys!==!1,passNode:s.passNode||!1,schema:s.space==="svg"?XS:Pye,stylePropertyNameCase:s.stylePropertyNameCase||"dom",tableCellAlignToStyle:s.tableCellAlignToStyle!==!1},i=Nq(a,t,void 0);return i&&typeof i!="string"?i:a.create(t,a.Fragment,{children:i||void 0},void 0)}function Nq(t,s,n){if(s.type==="element")return Uye(t,s,n);if(s.type==="mdxFlowExpression"||s.type==="mdxTextExpression")return Vye(t,s);if(s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement")return Hye(t,s,n);if(s.type==="mdxjsEsm")return Wye(t,s);if(s.type==="root")return Kye(t,s,n);if(s.type==="text")return Gye(t,s)}function Uye(t,s,n){const r=t.schema;let a=r;s.tagName.toLowerCase()==="svg"&&r.space==="html"&&(a=XS,t.schema=a),t.ancestors.push(s);const i=Sq(t,s.tagName,!1),l=Jye(t,s);let o=sC(t,s);return qye.has(s.tagName)&&(o=o.filter(function(c){return typeof c=="string"?!yye(c):!0})),_q(t,l,i,s),tC(l,o),t.ancestors.pop(),t.schema=r,t.create(s,i,l,n)}function Vye(t,s){if(s.data&&s.data.estree&&t.evaluater){const r=s.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}_f(t,s.position)}function Wye(t,s){if(s.data&&s.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(s.data.estree);_f(t,s.position)}function Hye(t,s,n){const r=t.schema;let a=r;s.name==="svg"&&r.space==="html"&&(a=XS,t.schema=a),t.ancestors.push(s);const i=s.name===null?t.Fragment:Sq(t,s.name,!0),l=Xye(t,s),o=sC(t,s);return _q(t,l,i,s),tC(l,o),t.ancestors.pop(),t.schema=r,t.create(s,i,l,n)}function Kye(t,s,n){const r={};return tC(r,sC(t,s)),t.create(s,t.Fragment,r,n)}function Gye(t,s){return s.value}function _q(t,s,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(s.node=r)}function tC(t,s){if(s.length>0){const n=s.length>1?s:s[0];n&&(t.children=n)}}function Yye(t,s,n){return r;function r(a,i,l,o){const u=Array.isArray(l.children)?n:s;return o?u(i,l,o):u(i,l)}}function Qye(t,s){return n;function n(r,a,i,l){const o=Array.isArray(i.children),c=ZS(r);return s(a,i,l,o,{columnNumber:c?c.column-1:void 0,fileName:t,lineNumber:c?c.line:void 0},void 0)}}function Jye(t,s){const n={};let r,a;for(a in s.properties)if(a!=="children"&&eC.call(s.properties,a)){const i=Zye(t,a,s.properties[a]);if(i){const[l,o]=i;t.tableCellAlignToStyle&&l==="align"&&typeof o=="string"&&zye.has(s.tagName)?r=o:n[l]=o}}if(r){const i=n.style||(n.style={});i[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Xye(t,s){const n={};for(const r of s.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const i=r.data.estree.body[0];i.type;const l=i.expression;l.type;const o=l.properties[0];o.type,Object.assign(n,t.evaluater.evaluateExpression(o.argument))}else _f(t,s.position);else{const a=r.name;let i;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const o=r.value.data.estree.body[0];o.type,i=t.evaluater.evaluateExpression(o.expression)}else _f(t,s.position);else i=r.value===null?!0:r.value;n[a]=i}return n}function sC(t,s){const n=[];let r=-1;const a=t.passKeys?new Map:Iye;for(;++r<s.children.length;){const i=s.children[r];let l;if(t.passKeys){const c=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(c){const u=a.get(c)||0;l=c+"-"+u,a.set(c,u+1)}}const o=Nq(t,i,l);o!==void 0&&n.push(o)}return n}function Zye(t,s,n){const r=Cye(t.schema,s);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?fye(n):Tye(n)),r.property==="style"){let a=typeof n=="object"?n:ebe(t,String(n));return t.stylePropertyNameCase==="css"&&(a=tbe(a)),["style",a]}return[t.elementAttributeNameCase==="react"&&r.space?Nye[r.property]||r.property:r.attribute,n]}}function ebe(t,s){try{return Fye(s,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,a=new br("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw a.file=t.filePath||void 0,a.url=wq+"#cannot-parse-style-attribute",a}}function Sq(t,s,n){let r;if(!n)r={type:"Literal",value:s};else if(s.includes(".")){const a=s.split(".");let i=-1,l;for(;++i<a.length;){const o=OD(a[i])?{type:"Identifier",name:a[i]}:{type:"Literal",value:a[i]};l=l?{type:"MemberExpression",object:l,property:o,computed:!!(i&&o.type==="Literal"),optional:!1}:o}r=l}else r=OD(s)&&!/^[a-z]/.test(s)?{type:"Identifier",name:s}:{type:"Literal",value:s};if(r.type==="Literal"){const a=r.value;return eC.call(t.components,a)?t.components[a]:a}if(t.evaluater)return t.evaluater.evaluateExpression(r);_f(t)}function _f(t,s){const n=new br("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:s,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=wq+"#cannot-handle-mdx-estrees-without-createevaluater",n}function tbe(t){const s={};let n;for(n in t)eC.call(t,n)&&(s[sbe(n)]=t[n]);return s}function sbe(t){let s=t.replace(Bye,nbe);return s.slice(0,3)==="ms-"&&(s="-"+s),s}function nbe(t){return"-"+t.toLowerCase()}const uN={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},rbe={};function abe(t,s){const n=rbe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,a=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Cq(t,r,a)}function Cq(t,s,n){if(ibe(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(s&&"alt"in t&&t.alt)return t.alt;if("children"in t)return VD(t.children,s,n)}return Array.isArray(t)?VD(t,s,n):""}function VD(t,s,n){const r=[];let a=-1;for(;++a<t.length;)r[a]=Cq(t[a],s,n);return r.join("")}function ibe(t){return!!(t&&typeof t=="object")}const WD=document.createElement("i");function nC(t){const s="&"+t+";";WD.innerHTML=s;const n=WD.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===s?!1:n}function nl(t,s,n,r){const a=t.length;let i=0,l;if(s<0?s=-s>a?0:a+s:s=s>a?a:s,n=n>0?n:0,r.length<1e4)l=Array.from(r),l.unshift(s,n),t.splice(...l);else for(n&&t.splice(s,n);i<r.length;)l=r.slice(i,i+1e4),l.unshift(s,0),t.splice(...l),i+=1e4,s+=1e4}function $a(t,s){return t.length>0?(nl(t,t.length,0,s),t):s}const HD={}.hasOwnProperty;function lbe(t){const s={};let n=-1;for(;++n<t.length;)obe(s,t[n]);return s}function obe(t,s){let n;for(n in s){const a=(HD.call(t,n)?t[n]:void 0)||(t[n]={}),i=s[n];let l;if(i)for(l in i){HD.call(a,l)||(a[l]=[]);const o=i[l];cbe(a[l],Array.isArray(o)?o:o?[o]:[])}}}function cbe(t,s){let n=-1;const r=[];for(;++n<s.length;)(s[n].add==="after"?t:r).push(s[n]);nl(t,0,0,r)}function kq(t,s){const n=Number.parseInt(t,s);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Nu(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const zi=ac(/[A-Za-z]/),wa=ac(/[\dA-Za-z]/),dbe=ac(/[#-'*+\--9=?A-Z^-~]/);function u1(t){return t!==null&&(t<32||t===127)}const h1=ac(/\d/),ube=ac(/[\dA-Fa-f]/),hbe=ac(/[!-/:-@[-`{-~]/);function ls(t){return t!==null&&t<-2}function ra(t){return t!==null&&(t<0||t===32)}function Vs(t){return t===-2||t===-1||t===32}const mbe=ac(new RegExp("\\p{P}|\\p{S}","u")),fbe=ac(/\s/);function ac(t){return s;function s(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Ph(t){const s=[];let n=-1,r=0,a=0;for(;++n<t.length;){const i=t.charCodeAt(n);let l="";if(i===37&&wa(t.charCodeAt(n+1))&&wa(t.charCodeAt(n+2)))a=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(l=String.fromCharCode(i));else if(i>55295&&i<57344){const o=t.charCodeAt(n+1);i<56320&&o>56319&&o<57344?(l=String.fromCharCode(i,o),a=1):l=""}else l=String.fromCharCode(i);l&&(s.push(t.slice(r,n),encodeURIComponent(l)),r=n+a+1,l=""),a&&(n+=a,a=0)}return s.join("")+t.slice(r)}function an(t,s,n,r){const a=r?r-1:Number.POSITIVE_INFINITY;let i=0;return l;function l(c){return Vs(c)?(t.enter(n),o(c)):s(c)}function o(c){return Vs(c)&&i++<a?(t.consume(c),o):(t.exit(n),s(c))}}const pbe={tokenize:xbe};function xbe(t){const s=t.attempt(this.parser.constructs.contentInitial,r,a);let n;return s;function r(o){if(o===null){t.consume(o);return}return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),an(t,s,"linePrefix")}function a(o){return t.enter("paragraph"),i(o)}function i(o){const c=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,l(o)}function l(o){if(o===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(o);return}return ls(o)?(t.consume(o),t.exit("chunkText"),i):(t.consume(o),l)}}const gbe={tokenize:vbe},KD={tokenize:ybe};function vbe(t){const s=this,n=[];let r=0,a,i,l;return o;function o(N){if(r<n.length){const _=n[r];return s.containerState=_[1],t.attempt(_[0].continuation,c,u)(N)}return u(N)}function c(N){if(r++,s.containerState._closeFlow){s.containerState._closeFlow=void 0,a&&w();const _=s.events.length;let T=_,A;for(;T--;)if(s.events[T][0]==="exit"&&s.events[T][1].type==="chunkFlow"){A=s.events[T][1].end;break}j(r);let P=_;for(;P<s.events.length;)s.events[P][1].end={...A},P++;return nl(s.events,T+1,0,s.events.slice(_)),s.events.length=P,u(N)}return o(N)}function u(N){if(r===n.length){if(!a)return h(N);if(a.currentConstruct&&a.currentConstruct.concrete)return g(N);s.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return s.containerState={},t.check(KD,d,m)(N)}function d(N){return a&&w(),j(r),h(N)}function m(N){return s.parser.lazy[s.now().line]=r!==n.length,l=s.now().offset,g(N)}function h(N){return s.containerState={},t.attempt(KD,p,g)(N)}function p(N){return r++,n.push([s.currentConstruct,s.containerState]),h(N)}function g(N){if(N===null){a&&w(),j(0),t.consume(N);return}return a=a||s.parser.flow(s.now()),t.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:i}),v(N)}function v(N){if(N===null){y(t.exit("chunkFlow"),!0),j(0),t.consume(N);return}return ls(N)?(t.consume(N),y(t.exit("chunkFlow")),r=0,s.interrupt=void 0,o):(t.consume(N),v)}function y(N,_){const T=s.sliceStream(N);if(_&&T.push(null),N.previous=i,i&&(i.next=N),i=N,a.defineSkip(N.start),a.write(T),s.parser.lazy[N.start.line]){let A=a.events.length;for(;A--;)if(a.events[A][1].start.offset<l&&(!a.events[A][1].end||a.events[A][1].end.offset>l))return;const P=s.events.length;let C=P,O,M;for(;C--;)if(s.events[C][0]==="exit"&&s.events[C][1].type==="chunkFlow"){if(O){M=s.events[C][1].end;break}O=!0}for(j(r),A=P;A<s.events.length;)s.events[A][1].end={...M},A++;nl(s.events,C+1,0,s.events.slice(P)),s.events.length=A}}function j(N){let _=n.length;for(;_-- >N;){const T=n[_];s.containerState=T[1],T[0].exit.call(s,t)}n.length=N}function w(){a.write([null]),i=void 0,a=void 0,s.containerState._closeFlow=void 0}}function ybe(t,s,n){return an(t,t.attempt(this.parser.constructs.document,s,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function GD(t){if(t===null||ra(t)||fbe(t))return 1;if(mbe(t))return 2}function rC(t,s,n){const r=[];let a=-1;for(;++a<t.length;){const i=t[a].resolveAll;i&&!r.includes(i)&&(s=i(s,n),r.push(i))}return s}const m1={name:"attention",resolveAll:bbe,tokenize:jbe};function bbe(t,s){let n=-1,r,a,i,l,o,c,u,d;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&s.sliceSerialize(t[r][1]).charCodeAt(0)===s.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;c=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const m={...t[r][1].end},h={...t[n][1].start};YD(m,-c),YD(h,c),l={type:c>1?"strongSequence":"emphasisSequence",start:m,end:{...t[r][1].end}},o={type:c>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:h},i={type:c>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},a={type:c>1?"strong":"emphasis",start:{...l.start},end:{...o.end}},t[r][1].end={...l.start},t[n][1].start={...o.end},u=[],t[r][1].end.offset-t[r][1].start.offset&&(u=$a(u,[["enter",t[r][1],s],["exit",t[r][1],s]])),u=$a(u,[["enter",a,s],["enter",l,s],["exit",l,s],["enter",i,s]]),u=$a(u,rC(s.parser.constructs.insideSpan.null,t.slice(r+1,n),s)),u=$a(u,[["exit",i,s],["enter",o,s],["exit",o,s],["exit",a,s]]),t[n][1].end.offset-t[n][1].start.offset?(d=2,u=$a(u,[["enter",t[n][1],s],["exit",t[n][1],s]])):d=0,nl(t,r-1,n-r+3,u),n=r+u.length-d-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function jbe(t,s){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,a=GD(r);let i;return l;function l(c){return i=c,t.enter("attentionSequence"),o(c)}function o(c){if(c===i)return t.consume(c),o;const u=t.exit("attentionSequence"),d=GD(c),m=!d||d===2&&a||n.includes(c),h=!a||a===2&&d||n.includes(r);return u._open=!!(i===42?m:m&&(a||!h)),u._close=!!(i===42?h:h&&(d||!m)),s(c)}}function YD(t,s){t.column+=s,t.offset+=s,t._bufferIndex+=s}const wbe={name:"autolink",tokenize:Nbe};function Nbe(t,s,n){let r=0;return a;function a(p){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),i}function i(p){return zi(p)?(t.consume(p),l):p===64?n(p):u(p)}function l(p){return p===43||p===45||p===46||wa(p)?(r=1,o(p)):u(p)}function o(p){return p===58?(t.consume(p),r=0,c):(p===43||p===45||p===46||wa(p))&&r++<32?(t.consume(p),o):(r=0,u(p))}function c(p){return p===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.exit("autolink"),s):p===null||p===32||p===60||u1(p)?n(p):(t.consume(p),c)}function u(p){return p===64?(t.consume(p),d):dbe(p)?(t.consume(p),u):n(p)}function d(p){return wa(p)?m(p):n(p)}function m(p){return p===46?(t.consume(p),r=0,d):p===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.exit("autolink"),s):h(p)}function h(p){if((p===45||wa(p))&&r++<63){const g=p===45?h:m;return t.consume(p),g}return n(p)}}const kv={partial:!0,tokenize:_be};function _be(t,s,n){return r;function r(i){return Vs(i)?an(t,a,"linePrefix")(i):a(i)}function a(i){return i===null||ls(i)?s(i):n(i)}}const Eq={continuation:{tokenize:Cbe},exit:kbe,name:"blockQuote",tokenize:Sbe};function Sbe(t,s,n){const r=this;return a;function a(l){if(l===62){const o=r.containerState;return o.open||(t.enter("blockQuote",{_container:!0}),o.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(l),t.exit("blockQuoteMarker"),i}return n(l)}function i(l){return Vs(l)?(t.enter("blockQuotePrefixWhitespace"),t.consume(l),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),s):(t.exit("blockQuotePrefix"),s(l))}}function Cbe(t,s,n){const r=this;return a;function a(l){return Vs(l)?an(t,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):i(l)}function i(l){return t.attempt(Eq,s,n)(l)}}function kbe(t){t.exit("blockQuote")}const Pq={name:"characterEscape",tokenize:Ebe};function Ebe(t,s,n){return r;function r(i){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(i),t.exit("escapeMarker"),a}function a(i){return hbe(i)?(t.enter("characterEscapeValue"),t.consume(i),t.exit("characterEscapeValue"),t.exit("characterEscape"),s):n(i)}}const Tq={name:"characterReference",tokenize:Pbe};function Pbe(t,s,n){const r=this;let a=0,i,l;return o;function o(m){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(m),t.exit("characterReferenceMarker"),c}function c(m){return m===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(m),t.exit("characterReferenceMarkerNumeric"),u):(t.enter("characterReferenceValue"),i=31,l=wa,d(m))}function u(m){return m===88||m===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(m),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),i=6,l=ube,d):(t.enter("characterReferenceValue"),i=7,l=h1,d(m))}function d(m){if(m===59&&a){const h=t.exit("characterReferenceValue");return l===wa&&!nC(r.sliceSerialize(h))?n(m):(t.enter("characterReferenceMarker"),t.consume(m),t.exit("characterReferenceMarker"),t.exit("characterReference"),s)}return l(m)&&a++<i?(t.consume(m),d):n(m)}}const QD={partial:!0,tokenize:Abe},JD={concrete:!0,name:"codeFenced",tokenize:Tbe};function Tbe(t,s,n){const r=this,a={partial:!0,tokenize:T};let i=0,l=0,o;return c;function c(A){return u(A)}function u(A){const P=r.events[r.events.length-1];return i=P&&P[1].type==="linePrefix"?P[2].sliceSerialize(P[1],!0).length:0,o=A,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),d(A)}function d(A){return A===o?(l++,t.consume(A),d):l<3?n(A):(t.exit("codeFencedFenceSequence"),Vs(A)?an(t,m,"whitespace")(A):m(A))}function m(A){return A===null||ls(A)?(t.exit("codeFencedFence"),r.interrupt?s(A):t.check(QD,v,_)(A)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),h(A))}function h(A){return A===null||ls(A)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),m(A)):Vs(A)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),an(t,p,"whitespace")(A)):A===96&&A===o?n(A):(t.consume(A),h)}function p(A){return A===null||ls(A)?m(A):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),g(A))}function g(A){return A===null||ls(A)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),m(A)):A===96&&A===o?n(A):(t.consume(A),g)}function v(A){return t.attempt(a,_,y)(A)}function y(A){return t.enter("lineEnding"),t.consume(A),t.exit("lineEnding"),j}function j(A){return i>0&&Vs(A)?an(t,w,"linePrefix",i+1)(A):w(A)}function w(A){return A===null||ls(A)?t.check(QD,v,_)(A):(t.enter("codeFlowValue"),N(A))}function N(A){return A===null||ls(A)?(t.exit("codeFlowValue"),w(A)):(t.consume(A),N)}function _(A){return t.exit("codeFenced"),s(A)}function T(A,P,C){let O=0;return M;function M(z){return A.enter("lineEnding"),A.consume(z),A.exit("lineEnding"),k}function k(z){return A.enter("codeFencedFence"),Vs(z)?an(A,E,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(z):E(z)}function E(z){return z===o?(A.enter("codeFencedFenceSequence"),R(z)):C(z)}function R(z){return z===o?(O++,A.consume(z),R):O>=l?(A.exit("codeFencedFenceSequence"),Vs(z)?an(A,F,"whitespace")(z):F(z)):C(z)}function F(z){return z===null||ls(z)?(A.exit("codeFencedFence"),P(z)):C(z)}}}function Abe(t,s,n){const r=this;return a;function a(l){return l===null?n(l):(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),i)}function i(l){return r.parser.lazy[r.now().line]?n(l):s(l)}}const hN={name:"codeIndented",tokenize:Dbe},Mbe={partial:!0,tokenize:Obe};function Dbe(t,s,n){const r=this;return a;function a(u){return t.enter("codeIndented"),an(t,i,"linePrefix",5)(u)}function i(u){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?l(u):n(u)}function l(u){return u===null?c(u):ls(u)?t.attempt(Mbe,l,c)(u):(t.enter("codeFlowValue"),o(u))}function o(u){return u===null||ls(u)?(t.exit("codeFlowValue"),l(u)):(t.consume(u),o)}function c(u){return t.exit("codeIndented"),s(u)}}function Obe(t,s,n){const r=this;return a;function a(l){return r.parser.lazy[r.now().line]?n(l):ls(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a):an(t,i,"linePrefix",5)(l)}function i(l){const o=r.events[r.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?s(l):ls(l)?a(l):n(l)}}const Rbe={name:"codeText",previous:Lbe,resolve:Fbe,tokenize:Ibe};function Fbe(t){let s=t.length-4,n=3,r,a;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[s][1].type==="lineEnding"||t[s][1].type==="space")){for(r=n;++r<s;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[s][1].type="codeTextPadding",n+=2,s-=2;break}}for(r=n-1,s++;++r<=s;)a===void 0?r!==s&&t[r][1].type!=="lineEnding"&&(a=r):(r===s||t[r][1].type==="lineEnding")&&(t[a][1].type="codeTextData",r!==a+2&&(t[a][1].end=t[r-1][1].end,t.splice(a+2,r-a-2),s-=r-a-2,r=a+2),a=void 0);return t}function Lbe(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Ibe(t,s,n){let r=0,a,i;return l;function l(m){return t.enter("codeText"),t.enter("codeTextSequence"),o(m)}function o(m){return m===96?(t.consume(m),r++,o):(t.exit("codeTextSequence"),c(m))}function c(m){return m===null?n(m):m===32?(t.enter("space"),t.consume(m),t.exit("space"),c):m===96?(i=t.enter("codeTextSequence"),a=0,d(m)):ls(m)?(t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),c):(t.enter("codeTextData"),u(m))}function u(m){return m===null||m===32||m===96||ls(m)?(t.exit("codeTextData"),c(m)):(t.consume(m),u)}function d(m){return m===96?(t.consume(m),a++,d):a===r?(t.exit("codeTextSequence"),t.exit("codeText"),s(m)):(i.type="codeTextData",u(m))}}class Bbe{constructor(s){this.left=s?[...s]:[],this.right=[]}get(s){if(s<0||s>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+s+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return s<this.left.length?this.left[s]:this.right[this.right.length-s+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(s,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(s,r):s>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-s+this.left.length).reverse():this.left.slice(s).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(s,n,r){const a=n||0;this.setCursor(Math.trunc(s));const i=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return r&&Cm(this.left,r),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(s){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(s)}pushMany(s){this.setCursor(Number.POSITIVE_INFINITY),Cm(this.left,s)}unshift(s){this.setCursor(0),this.right.push(s)}unshiftMany(s){this.setCursor(0),Cm(this.right,s.reverse())}setCursor(s){if(!(s===this.left.length||s>this.left.length&&this.right.length===0||s<0&&this.left.length===0))if(s<this.left.length){const n=this.left.splice(s,Number.POSITIVE_INFINITY);Cm(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-s,Number.POSITIVE_INFINITY);Cm(this.left,n.reverse())}}}function Cm(t,s){let n=0;if(s.length<1e4)t.push(...s);else for(;n<s.length;)t.push(...s.slice(n,n+1e4)),n+=1e4}function Aq(t){const s={};let n=-1,r,a,i,l,o,c,u;const d=new Bbe(t);for(;++n<d.length;){for(;n in s;)n=s[n];if(r=d.get(n),n&&r[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,i=0,i<c.length&&c[i][1].type==="lineEndingBlank"&&(i+=2),i<c.length&&c[i][1].type==="content"))for(;++i<c.length&&c[i][1].type!=="content";)c[i][1].type==="chunkText"&&(c[i][1]._isInFirstContentOfListItem=!0,i++);if(r[0]==="enter")r[1].contentType&&(Object.assign(s,qbe(d,n)),n=s[n],u=!0);else if(r[1]._container){for(i=n,a=void 0;i--;)if(l=d.get(i),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(a&&(d.get(a)[1].type="lineEndingBlank"),l[1].type="lineEnding",a=i);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;a&&(r[1].end={...d.get(a)[1].start},o=d.slice(a,n),o.unshift(r),d.splice(a,n-a+1,o))}}return nl(t,0,Number.POSITIVE_INFINITY,d.slice(0)),!u}function qbe(t,s){const n=t.get(s)[1],r=t.get(s)[2];let a=s-1;const i=[];let l=n._tokenizer;l||(l=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const o=l.events,c=[],u={};let d,m,h=-1,p=n,g=0,v=0;const y=[v];for(;p;){for(;t.get(++a)[1]!==p;);i.push(a),p._tokenizer||(d=r.sliceStream(p),p.next||d.push(null),m&&l.defineSkip(p.start),p._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(d),p._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),m=p,p=p.next}for(p=n;++h<o.length;)o[h][0]==="exit"&&o[h-1][0]==="enter"&&o[h][1].type===o[h-1][1].type&&o[h][1].start.line!==o[h][1].end.line&&(v=h+1,y.push(v),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(l.events=[],p?(p._tokenizer=void 0,p.previous=void 0):y.pop(),h=y.length;h--;){const j=o.slice(y[h],y[h+1]),w=i.pop();c.push([w,w+j.length-1]),t.splice(w,2,j)}for(c.reverse(),h=-1;++h<c.length;)u[g+c[h][0]]=g+c[h][1],g+=c[h][1]-c[h][0]-1;return u}const zbe={resolve:Ube,tokenize:Vbe},$be={partial:!0,tokenize:Wbe};function Ube(t){return Aq(t),t}function Vbe(t,s){let n;return r;function r(o){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),a(o)}function a(o){return o===null?i(o):ls(o)?t.check($be,l,i)(o):(t.consume(o),a)}function i(o){return t.exit("chunkContent"),t.exit("content"),s(o)}function l(o){return t.consume(o),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,a}}function Wbe(t,s,n){const r=this;return a;function a(l){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),an(t,i,"linePrefix")}function i(l){if(l===null||ls(l))return n(l);const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?s(l):t.interrupt(r.parser.constructs.flow,n,s)(l)}}function Mq(t,s,n,r,a,i,l,o,c){const u=c||Number.POSITIVE_INFINITY;let d=0;return m;function m(j){return j===60?(t.enter(r),t.enter(a),t.enter(i),t.consume(j),t.exit(i),h):j===null||j===32||j===41||u1(j)?n(j):(t.enter(r),t.enter(l),t.enter(o),t.enter("chunkString",{contentType:"string"}),v(j))}function h(j){return j===62?(t.enter(i),t.consume(j),t.exit(i),t.exit(a),t.exit(r),s):(t.enter(o),t.enter("chunkString",{contentType:"string"}),p(j))}function p(j){return j===62?(t.exit("chunkString"),t.exit(o),h(j)):j===null||j===60||ls(j)?n(j):(t.consume(j),j===92?g:p)}function g(j){return j===60||j===62||j===92?(t.consume(j),p):p(j)}function v(j){return!d&&(j===null||j===41||ra(j))?(t.exit("chunkString"),t.exit(o),t.exit(l),t.exit(r),s(j)):d<u&&j===40?(t.consume(j),d++,v):j===41?(t.consume(j),d--,v):j===null||j===32||j===40||u1(j)?n(j):(t.consume(j),j===92?y:v)}function y(j){return j===40||j===41||j===92?(t.consume(j),v):v(j)}}function Dq(t,s,n,r,a,i){const l=this;let o=0,c;return u;function u(p){return t.enter(r),t.enter(a),t.consume(p),t.exit(a),t.enter(i),d}function d(p){return o>999||p===null||p===91||p===93&&!c||p===94&&!o&&"_hiddenFootnoteSupport"in l.parser.constructs?n(p):p===93?(t.exit(i),t.enter(a),t.consume(p),t.exit(a),t.exit(r),s):ls(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),d):(t.enter("chunkString",{contentType:"string"}),m(p))}function m(p){return p===null||p===91||p===93||ls(p)||o++>999?(t.exit("chunkString"),d(p)):(t.consume(p),c||(c=!Vs(p)),p===92?h:m)}function h(p){return p===91||p===92||p===93?(t.consume(p),o++,m):m(p)}}function Oq(t,s,n,r,a,i){let l;return o;function o(h){return h===34||h===39||h===40?(t.enter(r),t.enter(a),t.consume(h),t.exit(a),l=h===40?41:h,c):n(h)}function c(h){return h===l?(t.enter(a),t.consume(h),t.exit(a),t.exit(r),s):(t.enter(i),u(h))}function u(h){return h===l?(t.exit(i),c(l)):h===null?n(h):ls(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),an(t,u,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),d(h))}function d(h){return h===l||h===null||ls(h)?(t.exit("chunkString"),u(h)):(t.consume(h),h===92?m:d)}function m(h){return h===l||h===92?(t.consume(h),d):d(h)}}function Gm(t,s){let n;return r;function r(a){return ls(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),n=!0,r):Vs(a)?an(t,r,n?"linePrefix":"lineSuffix")(a):s(a)}}const Hbe={name:"definition",tokenize:Gbe},Kbe={partial:!0,tokenize:Ybe};function Gbe(t,s,n){const r=this;let a;return i;function i(p){return t.enter("definition"),l(p)}function l(p){return Dq.call(r,t,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function o(p){return a=Nu(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),p===58?(t.enter("definitionMarker"),t.consume(p),t.exit("definitionMarker"),c):n(p)}function c(p){return ra(p)?Gm(t,u)(p):u(p)}function u(p){return Mq(t,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function d(p){return t.attempt(Kbe,m,m)(p)}function m(p){return Vs(p)?an(t,h,"whitespace")(p):h(p)}function h(p){return p===null||ls(p)?(t.exit("definition"),r.parser.defined.push(a),s(p)):n(p)}}function Ybe(t,s,n){return r;function r(o){return ra(o)?Gm(t,a)(o):n(o)}function a(o){return Oq(t,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function i(o){return Vs(o)?an(t,l,"whitespace")(o):l(o)}function l(o){return o===null||ls(o)?s(o):n(o)}}const Qbe={name:"hardBreakEscape",tokenize:Jbe};function Jbe(t,s,n){return r;function r(i){return t.enter("hardBreakEscape"),t.consume(i),a}function a(i){return ls(i)?(t.exit("hardBreakEscape"),s(i)):n(i)}}const Xbe={name:"headingAtx",resolve:Zbe,tokenize:eje};function Zbe(t,s){let n=t.length-2,r=3,a,i;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(a={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},i={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},nl(t,r,n-r+1,[["enter",a,s],["enter",i,s],["exit",i,s],["exit",a,s]])),t}function eje(t,s,n){let r=0;return a;function a(d){return t.enter("atxHeading"),i(d)}function i(d){return t.enter("atxHeadingSequence"),l(d)}function l(d){return d===35&&r++<6?(t.consume(d),l):d===null||ra(d)?(t.exit("atxHeadingSequence"),o(d)):n(d)}function o(d){return d===35?(t.enter("atxHeadingSequence"),c(d)):d===null||ls(d)?(t.exit("atxHeading"),s(d)):Vs(d)?an(t,o,"whitespace")(d):(t.enter("atxHeadingText"),u(d))}function c(d){return d===35?(t.consume(d),c):(t.exit("atxHeadingSequence"),o(d))}function u(d){return d===null||d===35||ra(d)?(t.exit("atxHeadingText"),o(d)):(t.consume(d),u)}}const tje=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],XD=["pre","script","style","textarea"],sje={concrete:!0,name:"htmlFlow",resolveTo:aje,tokenize:ije},nje={partial:!0,tokenize:oje},rje={partial:!0,tokenize:lje};function aje(t){let s=t.length;for(;s--&&!(t[s][0]==="enter"&&t[s][1].type==="htmlFlow"););return s>1&&t[s-2][1].type==="linePrefix"&&(t[s][1].start=t[s-2][1].start,t[s+1][1].start=t[s-2][1].start,t.splice(s-2,2)),t}function ije(t,s,n){const r=this;let a,i,l,o,c;return u;function u(q){return d(q)}function d(q){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(q),m}function m(q){return q===33?(t.consume(q),h):q===47?(t.consume(q),i=!0,v):q===63?(t.consume(q),a=3,r.interrupt?s:L):zi(q)?(t.consume(q),l=String.fromCharCode(q),y):n(q)}function h(q){return q===45?(t.consume(q),a=2,p):q===91?(t.consume(q),a=5,o=0,g):zi(q)?(t.consume(q),a=4,r.interrupt?s:L):n(q)}function p(q){return q===45?(t.consume(q),r.interrupt?s:L):n(q)}function g(q){const Z="CDATA[";return q===Z.charCodeAt(o++)?(t.consume(q),o===Z.length?r.interrupt?s:E:g):n(q)}function v(q){return zi(q)?(t.consume(q),l=String.fromCharCode(q),y):n(q)}function y(q){if(q===null||q===47||q===62||ra(q)){const Z=q===47,Q=l.toLowerCase();return!Z&&!i&&XD.includes(Q)?(a=1,r.interrupt?s(q):E(q)):tje.includes(l.toLowerCase())?(a=6,Z?(t.consume(q),j):r.interrupt?s(q):E(q)):(a=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(q):i?w(q):N(q))}return q===45||wa(q)?(t.consume(q),l+=String.fromCharCode(q),y):n(q)}function j(q){return q===62?(t.consume(q),r.interrupt?s:E):n(q)}function w(q){return Vs(q)?(t.consume(q),w):M(q)}function N(q){return q===47?(t.consume(q),M):q===58||q===95||zi(q)?(t.consume(q),_):Vs(q)?(t.consume(q),N):M(q)}function _(q){return q===45||q===46||q===58||q===95||wa(q)?(t.consume(q),_):T(q)}function T(q){return q===61?(t.consume(q),A):Vs(q)?(t.consume(q),T):N(q)}function A(q){return q===null||q===60||q===61||q===62||q===96?n(q):q===34||q===39?(t.consume(q),c=q,P):Vs(q)?(t.consume(q),A):C(q)}function P(q){return q===c?(t.consume(q),c=null,O):q===null||ls(q)?n(q):(t.consume(q),P)}function C(q){return q===null||q===34||q===39||q===47||q===60||q===61||q===62||q===96||ra(q)?T(q):(t.consume(q),C)}function O(q){return q===47||q===62||Vs(q)?N(q):n(q)}function M(q){return q===62?(t.consume(q),k):n(q)}function k(q){return q===null||ls(q)?E(q):Vs(q)?(t.consume(q),k):n(q)}function E(q){return q===45&&a===2?(t.consume(q),V):q===60&&a===1?(t.consume(q),U):q===62&&a===4?(t.consume(q),I):q===63&&a===3?(t.consume(q),L):q===93&&a===5?(t.consume(q),$):ls(q)&&(a===6||a===7)?(t.exit("htmlFlowData"),t.check(nje,W,R)(q)):q===null||ls(q)?(t.exit("htmlFlowData"),R(q)):(t.consume(q),E)}function R(q){return t.check(rje,F,W)(q)}function F(q){return t.enter("lineEnding"),t.consume(q),t.exit("lineEnding"),z}function z(q){return q===null||ls(q)?R(q):(t.enter("htmlFlowData"),E(q))}function V(q){return q===45?(t.consume(q),L):E(q)}function U(q){return q===47?(t.consume(q),l="",B):E(q)}function B(q){if(q===62){const Z=l.toLowerCase();return XD.includes(Z)?(t.consume(q),I):E(q)}return zi(q)&&l.length<8?(t.consume(q),l+=String.fromCharCode(q),B):E(q)}function $(q){return q===93?(t.consume(q),L):E(q)}function L(q){return q===62?(t.consume(q),I):q===45&&a===2?(t.consume(q),L):E(q)}function I(q){return q===null||ls(q)?(t.exit("htmlFlowData"),W(q)):(t.consume(q),I)}function W(q){return t.exit("htmlFlow"),s(q)}}function lje(t,s,n){const r=this;return a;function a(l){return ls(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),i):n(l)}function i(l){return r.parser.lazy[r.now().line]?n(l):s(l)}}function oje(t,s,n){return r;function r(a){return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),t.attempt(kv,s,n)}}const cje={name:"htmlText",tokenize:dje};function dje(t,s,n){const r=this;let a,i,l;return o;function o(L){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(L),c}function c(L){return L===33?(t.consume(L),u):L===47?(t.consume(L),T):L===63?(t.consume(L),N):zi(L)?(t.consume(L),C):n(L)}function u(L){return L===45?(t.consume(L),d):L===91?(t.consume(L),i=0,g):zi(L)?(t.consume(L),w):n(L)}function d(L){return L===45?(t.consume(L),p):n(L)}function m(L){return L===null?n(L):L===45?(t.consume(L),h):ls(L)?(l=m,U(L)):(t.consume(L),m)}function h(L){return L===45?(t.consume(L),p):m(L)}function p(L){return L===62?V(L):L===45?h(L):m(L)}function g(L){const I="CDATA[";return L===I.charCodeAt(i++)?(t.consume(L),i===I.length?v:g):n(L)}function v(L){return L===null?n(L):L===93?(t.consume(L),y):ls(L)?(l=v,U(L)):(t.consume(L),v)}function y(L){return L===93?(t.consume(L),j):v(L)}function j(L){return L===62?V(L):L===93?(t.consume(L),j):v(L)}function w(L){return L===null||L===62?V(L):ls(L)?(l=w,U(L)):(t.consume(L),w)}function N(L){return L===null?n(L):L===63?(t.consume(L),_):ls(L)?(l=N,U(L)):(t.consume(L),N)}function _(L){return L===62?V(L):N(L)}function T(L){return zi(L)?(t.consume(L),A):n(L)}function A(L){return L===45||wa(L)?(t.consume(L),A):P(L)}function P(L){return ls(L)?(l=P,U(L)):Vs(L)?(t.consume(L),P):V(L)}function C(L){return L===45||wa(L)?(t.consume(L),C):L===47||L===62||ra(L)?O(L):n(L)}function O(L){return L===47?(t.consume(L),V):L===58||L===95||zi(L)?(t.consume(L),M):ls(L)?(l=O,U(L)):Vs(L)?(t.consume(L),O):V(L)}function M(L){return L===45||L===46||L===58||L===95||wa(L)?(t.consume(L),M):k(L)}function k(L){return L===61?(t.consume(L),E):ls(L)?(l=k,U(L)):Vs(L)?(t.consume(L),k):O(L)}function E(L){return L===null||L===60||L===61||L===62||L===96?n(L):L===34||L===39?(t.consume(L),a=L,R):ls(L)?(l=E,U(L)):Vs(L)?(t.consume(L),E):(t.consume(L),F)}function R(L){return L===a?(t.consume(L),a=void 0,z):L===null?n(L):ls(L)?(l=R,U(L)):(t.consume(L),R)}function F(L){return L===null||L===34||L===39||L===60||L===61||L===96?n(L):L===47||L===62||ra(L)?O(L):(t.consume(L),F)}function z(L){return L===47||L===62||ra(L)?O(L):n(L)}function V(L){return L===62?(t.consume(L),t.exit("htmlTextData"),t.exit("htmlText"),s):n(L)}function U(L){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(L),t.exit("lineEnding"),B}function B(L){return Vs(L)?an(t,$,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(L):$(L)}function $(L){return t.enter("htmlTextData"),l(L)}}const aC={name:"labelEnd",resolveAll:fje,resolveTo:pje,tokenize:xje},uje={tokenize:gje},hje={tokenize:vje},mje={tokenize:yje};function fje(t){let s=-1;const n=[];for(;++s<t.length;){const r=t[s][1];if(n.push(t[s]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const a=r.type==="labelImage"?4:2;r.type="data",s+=a}}return t.length!==n.length&&nl(t,0,t.length,n),t}function pje(t,s){let n=t.length,r=0,a,i,l,o;for(;n--;)if(a=t[n][1],i){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;t[n][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(l){if(t[n][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(i=n,a.type!=="labelLink")){r=2;break}}else a.type==="labelEnd"&&(l=n);const c={type:t[i][1].type==="labelLink"?"link":"image",start:{...t[i][1].start},end:{...t[t.length-1][1].end}},u={type:"label",start:{...t[i][1].start},end:{...t[l][1].end}},d={type:"labelText",start:{...t[i+r+2][1].end},end:{...t[l-2][1].start}};return o=[["enter",c,s],["enter",u,s]],o=$a(o,t.slice(i+1,i+r+3)),o=$a(o,[["enter",d,s]]),o=$a(o,rC(s.parser.constructs.insideSpan.null,t.slice(i+r+4,l-3),s)),o=$a(o,[["exit",d,s],t[l-2],t[l-1],["exit",u,s]]),o=$a(o,t.slice(l+1)),o=$a(o,[["exit",c,s]]),nl(t,i,t.length,o),t}function xje(t,s,n){const r=this;let a=r.events.length,i,l;for(;a--;)if((r.events[a][1].type==="labelImage"||r.events[a][1].type==="labelLink")&&!r.events[a][1]._balanced){i=r.events[a][1];break}return o;function o(h){return i?i._inactive?m(h):(l=r.parser.defined.includes(Nu(r.sliceSerialize({start:i.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(h),t.exit("labelMarker"),t.exit("labelEnd"),c):n(h)}function c(h){return h===40?t.attempt(uje,d,l?d:m)(h):h===91?t.attempt(hje,d,l?u:m)(h):l?d(h):m(h)}function u(h){return t.attempt(mje,d,m)(h)}function d(h){return s(h)}function m(h){return i._balanced=!0,n(h)}}function gje(t,s,n){return r;function r(m){return t.enter("resource"),t.enter("resourceMarker"),t.consume(m),t.exit("resourceMarker"),a}function a(m){return ra(m)?Gm(t,i)(m):i(m)}function i(m){return m===41?d(m):Mq(t,l,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(m)}function l(m){return ra(m)?Gm(t,c)(m):d(m)}function o(m){return n(m)}function c(m){return m===34||m===39||m===40?Oq(t,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(m):d(m)}function u(m){return ra(m)?Gm(t,d)(m):d(m)}function d(m){return m===41?(t.enter("resourceMarker"),t.consume(m),t.exit("resourceMarker"),t.exit("resource"),s):n(m)}}function vje(t,s,n){const r=this;return a;function a(o){return Dq.call(r,t,i,l,"reference","referenceMarker","referenceString")(o)}function i(o){return r.parser.defined.includes(Nu(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?s(o):n(o)}function l(o){return n(o)}}function yje(t,s,n){return r;function r(i){return t.enter("reference"),t.enter("referenceMarker"),t.consume(i),t.exit("referenceMarker"),a}function a(i){return i===93?(t.enter("referenceMarker"),t.consume(i),t.exit("referenceMarker"),t.exit("reference"),s):n(i)}}const bje={name:"labelStartImage",resolveAll:aC.resolveAll,tokenize:jje};function jje(t,s,n){const r=this;return a;function a(o){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(o),t.exit("labelImageMarker"),i}function i(o){return o===91?(t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelImage"),l):n(o)}function l(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):s(o)}}const wje={name:"labelStartLink",resolveAll:aC.resolveAll,tokenize:Nje};function Nje(t,s,n){const r=this;return a;function a(l){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelLink"),i}function i(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):s(l)}}const mN={name:"lineEnding",tokenize:_je};function _je(t,s){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),an(t,s,"linePrefix")}}const Sg={name:"thematicBreak",tokenize:Sje};function Sje(t,s,n){let r=0,a;return i;function i(u){return t.enter("thematicBreak"),l(u)}function l(u){return a=u,o(u)}function o(u){return u===a?(t.enter("thematicBreakSequence"),c(u)):r>=3&&(u===null||ls(u))?(t.exit("thematicBreak"),s(u)):n(u)}function c(u){return u===a?(t.consume(u),r++,c):(t.exit("thematicBreakSequence"),Vs(u)?an(t,o,"whitespace")(u):o(u))}}const Yr={continuation:{tokenize:Pje},exit:Aje,name:"list",tokenize:Eje},Cje={partial:!0,tokenize:Mje},kje={partial:!0,tokenize:Tje};function Eje(t,s,n){const r=this,a=r.events[r.events.length-1];let i=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,l=0;return o;function o(p){const g=r.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(g==="listUnordered"?!r.containerState.marker||p===r.containerState.marker:h1(p)){if(r.containerState.type||(r.containerState.type=g,t.enter(g,{_container:!0})),g==="listUnordered")return t.enter("listItemPrefix"),p===42||p===45?t.check(Sg,n,u)(p):u(p);if(!r.interrupt||p===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),c(p)}return n(p)}function c(p){return h1(p)&&++l<10?(t.consume(p),c):(!r.interrupt||l<2)&&(r.containerState.marker?p===r.containerState.marker:p===41||p===46)?(t.exit("listItemValue"),u(p)):n(p)}function u(p){return t.enter("listItemMarker"),t.consume(p),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||p,t.check(kv,r.interrupt?n:d,t.attempt(Cje,h,m))}function d(p){return r.containerState.initialBlankLine=!0,i++,h(p)}function m(p){return Vs(p)?(t.enter("listItemPrefixWhitespace"),t.consume(p),t.exit("listItemPrefixWhitespace"),h):n(p)}function h(p){return r.containerState.size=i+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,s(p)}}function Pje(t,s,n){const r=this;return r.containerState._closeFlow=void 0,t.check(kv,a,i);function a(o){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,an(t,s,"listItemIndent",r.containerState.size+1)(o)}function i(o){return r.containerState.furtherBlankLines||!Vs(o)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,l(o)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(kje,s,l)(o))}function l(o){return r.containerState._closeFlow=!0,r.interrupt=void 0,an(t,t.attempt(Yr,s,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function Tje(t,s,n){const r=this;return an(t,a,"listItemIndent",r.containerState.size+1);function a(i){const l=r.events[r.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===r.containerState.size?s(i):n(i)}}function Aje(t){t.exit(this.containerState.type)}function Mje(t,s,n){const r=this;return an(t,a,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(i){const l=r.events[r.events.length-1];return!Vs(i)&&l&&l[1].type==="listItemPrefixWhitespace"?s(i):n(i)}}const ZD={name:"setextUnderline",resolveTo:Dje,tokenize:Oje};function Dje(t,s){let n=t.length,r,a,i;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(a=n)}else t[n][1].type==="content"&&t.splice(n,1),!i&&t[n][1].type==="definition"&&(i=n);const l={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[a][1].type="setextHeadingText",i?(t.splice(a,0,["enter",l,s]),t.splice(i+1,0,["exit",t[r][1],s]),t[r][1].end={...t[i][1].end}):t[r][1]=l,t.push(["exit",l,s]),t}function Oje(t,s,n){const r=this;let a;return i;function i(u){let d=r.events.length,m;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){m=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||m)?(t.enter("setextHeadingLine"),a=u,l(u)):n(u)}function l(u){return t.enter("setextHeadingLineSequence"),o(u)}function o(u){return u===a?(t.consume(u),o):(t.exit("setextHeadingLineSequence"),Vs(u)?an(t,c,"lineSuffix")(u):c(u))}function c(u){return u===null||ls(u)?(t.exit("setextHeadingLine"),s(u)):n(u)}}const Rje={tokenize:Fje};function Fje(t){const s=this,n=t.attempt(kv,r,t.attempt(this.parser.constructs.flowInitial,a,an(t,t.attempt(this.parser.constructs.flow,a,t.attempt(zbe,a)),"linePrefix")));return n;function r(i){if(i===null){t.consume(i);return}return t.enter("lineEndingBlank"),t.consume(i),t.exit("lineEndingBlank"),s.currentConstruct=void 0,n}function a(i){if(i===null){t.consume(i);return}return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),s.currentConstruct=void 0,n}}const Lje={resolveAll:Fq()},Ije=Rq("string"),Bje=Rq("text");function Rq(t){return{resolveAll:Fq(t==="text"?qje:void 0),tokenize:s};function s(n){const r=this,a=this.parser.constructs[t],i=n.attempt(a,l,o);return l;function l(d){return u(d)?i(d):o(d)}function o(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),c}function c(d){return u(d)?(n.exit("data"),i(d)):(n.consume(d),c)}function u(d){if(d===null)return!0;const m=a[d];let h=-1;if(m)for(;++h<m.length;){const p=m[h];if(!p.previous||p.previous.call(r,r.previous))return!0}return!1}}}function Fq(t){return s;function s(n,r){let a=-1,i;for(;++a<=n.length;)i===void 0?n[a]&&n[a][1].type==="data"&&(i=a,a++):(!n[a]||n[a][1].type!=="data")&&(a!==i+2&&(n[i][1].end=n[a-1][1].end,n.splice(i+2,a-i-2),a=i+2),i=void 0);return t?t(n,r):n}}function qje(t,s){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],a=s.sliceStream(r);let i=a.length,l=-1,o=0,c;for(;i--;){const u=a[i];if(typeof u=="string"){for(l=u.length;u.charCodeAt(l-1)===32;)o++,l--;if(l)break;l=-1}else if(u===-2)c=!0,o++;else if(u!==-1){i++;break}}if(s._contentTypeTextTrailing&&n===t.length&&(o=0),o){const u={type:n===t.length||c||o<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?l:r.start._bufferIndex+l,_index:r.start._index+i,line:r.end.line,column:r.end.column-o,offset:r.end.offset-o},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(t.splice(n,0,["enter",u,s],["exit",u,s]),n+=2)}n++}return t}const zje={42:Yr,43:Yr,45:Yr,48:Yr,49:Yr,50:Yr,51:Yr,52:Yr,53:Yr,54:Yr,55:Yr,56:Yr,57:Yr,62:Eq},$je={91:Hbe},Uje={[-2]:hN,[-1]:hN,32:hN},Vje={35:Xbe,42:Sg,45:[ZD,Sg],60:sje,61:ZD,95:Sg,96:JD,126:JD},Wje={38:Tq,92:Pq},Hje={[-5]:mN,[-4]:mN,[-3]:mN,33:bje,38:Tq,42:m1,60:[wbe,cje],91:wje,92:[Qbe,Pq],93:aC,95:m1,96:Rbe},Kje={null:[m1,Lje]},Gje={null:[42,95]},Yje={null:[]},Qje=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Gje,contentInitial:$je,disable:Yje,document:zje,flow:Vje,flowInitial:Uje,insideSpan:Kje,string:Wje,text:Hje},Symbol.toStringTag,{value:"Module"}));function Jje(t,s,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const a={},i=[];let l=[],o=[];const c={attempt:P(T),check:P(A),consume:w,enter:N,exit:_,interrupt:P(A,{interrupt:!0})},u={code:null,containerState:{},defineSkip:v,events:[],now:g,parser:t,previous:null,sliceSerialize:h,sliceStream:p,write:m};let d=s.tokenize.call(u,c);return s.resolveAll&&i.push(s),u;function m(k){return l=$a(l,k),y(),l[l.length-1]!==null?[]:(C(s,0),u.events=rC(i,u.events,u),u.events)}function h(k,E){return Zje(p(k),E)}function p(k){return Xje(l,k)}function g(){const{_bufferIndex:k,_index:E,line:R,column:F,offset:z}=r;return{_bufferIndex:k,_index:E,line:R,column:F,offset:z}}function v(k){a[k.line]=k.column,M()}function y(){let k;for(;r._index<l.length;){const E=l[r._index];if(typeof E=="string")for(k=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===k&&r._bufferIndex<E.length;)j(E.charCodeAt(r._bufferIndex));else j(E)}}function j(k){d=d(k)}function w(k){ls(k)?(r.line++,r.column=1,r.offset+=k===-3?2:1,M()):k!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===l[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=k}function N(k,E){const R=E||{};return R.type=k,R.start=g(),u.events.push(["enter",R,u]),o.push(R),R}function _(k){const E=o.pop();return E.end=g(),u.events.push(["exit",E,u]),E}function T(k,E){C(k,E.from)}function A(k,E){E.restore()}function P(k,E){return R;function R(F,z,V){let U,B,$,L;return Array.isArray(F)?W(F):"tokenize"in F?W([F]):I(F);function I(Y){return K;function K(ae){const se=ae!==null&&Y[ae],de=ae!==null&&Y.null,ue=[...Array.isArray(se)?se:se?[se]:[],...Array.isArray(de)?de:de?[de]:[]];return W(ue)(ae)}}function W(Y){return U=Y,B=0,Y.length===0?V:q(Y[B])}function q(Y){return K;function K(ae){return L=O(),$=Y,Y.partial||(u.currentConstruct=Y),Y.name&&u.parser.constructs.disable.null.includes(Y.name)?Q():Y.tokenize.call(E?Object.assign(Object.create(u),E):u,c,Z,Q)(ae)}}function Z(Y){return k($,L),z}function Q(Y){return L.restore(),++B<U.length?q(U[B]):V}}}function C(k,E){k.resolveAll&&!i.includes(k)&&i.push(k),k.resolve&&nl(u.events,E,u.events.length-E,k.resolve(u.events.slice(E),u)),k.resolveTo&&(u.events=k.resolveTo(u.events,u))}function O(){const k=g(),E=u.previous,R=u.currentConstruct,F=u.events.length,z=Array.from(o);return{from:F,restore:V};function V(){r=k,u.previous=E,u.currentConstruct=R,u.events.length=F,o=z,M()}}function M(){r.line in a&&r.column<2&&(r.column=a[r.line],r.offset+=a[r.line]-1)}}function Xje(t,s){const n=s.start._index,r=s.start._bufferIndex,a=s.end._index,i=s.end._bufferIndex;let l;if(n===a)l=[t[n].slice(r,i)];else{if(l=t.slice(n,a),r>-1){const o=l[0];typeof o=="string"?l[0]=o.slice(r):l.shift()}i>0&&l.push(t[a].slice(0,i))}return l}function Zje(t,s){let n=-1;const r=[];let a;for(;++n<t.length;){const i=t[n];let l;if(typeof i=="string")l=i;else switch(i){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=s?" ":"	";break}case-1:{if(!s&&a)continue;l=" ";break}default:l=String.fromCharCode(i)}a=i===-2,r.push(l)}return r.join("")}function ewe(t){const r={constructs:lbe([Qje,...(t||{}).extensions||[]]),content:a(pbe),defined:[],document:a(gbe),flow:a(Rje),lazy:{},string:a(Ije),text:a(Bje)};return r;function a(i){return l;function l(o){return Jje(r,i,o)}}}function twe(t){for(;!Aq(t););return t}const e6=/[\0\t\n\r]/g;function swe(){let t=1,s="",n=!0,r;return a;function a(i,l,o){const c=[];let u,d,m,h,p;for(i=s+(typeof i=="string"?i.toString():new TextDecoder(l||void 0).decode(i)),m=0,s="",n&&(i.charCodeAt(0)===65279&&m++,n=void 0);m<i.length;){if(e6.lastIndex=m,u=e6.exec(i),h=u&&u.index!==void 0?u.index:i.length,p=i.charCodeAt(h),!u){s=i.slice(m);break}if(p===10&&m===h&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),m<h&&(c.push(i.slice(m,h)),t+=h-m),p){case 0:{c.push(65533),t++;break}case 9:{for(d=Math.ceil(t/4)*4,c.push(-2);t++<d;)c.push(-1);break}case 10:{c.push(-4),t=1;break}default:r=!0,t=1}m=h+1}return o&&(r&&c.push(-5),s&&c.push(s),c.push(null)),c}}const nwe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function rwe(t){return t.replace(nwe,awe)}function awe(t,s,n){if(s)return s;if(n.charCodeAt(0)===35){const a=n.charCodeAt(1),i=a===120||a===88;return kq(n.slice(i?2:1),i?16:10)}return nC(n)||t}const Lq={}.hasOwnProperty;function iwe(t,s,n){return typeof s!="string"&&(n=s,s=void 0),lwe(n)(twe(ewe(n).document().write(swe()(t,s,!0))))}function lwe(t){const s={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(Ce),autolinkProtocol:O,autolinkEmail:O,atxHeading:i(we),blockQuote:i(de),characterEscape:O,characterReference:O,codeFenced:i(ue),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:i(ue,l),codeText:i(oe,l),codeTextData:O,data:O,codeFlowValue:O,definition:i(pe),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:i(je),hardBreakEscape:i(qe),hardBreakTrailing:i(qe),htmlFlow:i(ze,l),htmlFlowData:O,htmlText:i(ze,l),htmlTextData:O,image:i(Ee),label:l,link:i(Ce),listItem:i(Ye),listItemValue:h,listOrdered:i(Ge,m),listUnordered:i(Ge),paragraph:i(De),reference:q,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:i(we),strong:i(it),thematicBreak:i(at)},exit:{atxHeading:c(),atxHeadingSequence:T,autolink:c(),autolinkEmail:se,autolinkProtocol:ae,blockQuote:c(),characterEscapeValue:M,characterReferenceMarkerHexadecimal:Q,characterReferenceMarkerNumeric:Q,characterReferenceValue:Y,characterReference:K,codeFenced:c(y),codeFencedFence:v,codeFencedFenceInfo:p,codeFencedFenceMeta:g,codeFlowValue:M,codeIndented:c(j),codeText:c(z),codeTextData:M,data:M,definition:c(),definitionDestinationString:_,definitionLabelString:w,definitionTitleString:N,emphasis:c(),hardBreakEscape:c(E),hardBreakTrailing:c(E),htmlFlow:c(R),htmlFlowData:M,htmlText:c(F),htmlTextData:M,image:c(U),label:$,labelText:B,lineEnding:k,link:c(V),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:Z,resourceDestinationString:L,resourceTitleString:I,resource:W,setextHeading:c(C),setextHeadingLineSequence:P,setextHeadingText:A,strong:c(),thematicBreak:c()}};Iq(s,(t||{}).mdastExtensions||[]);const n={};return r;function r(_e){let $e={type:"root",children:[]};const nt={stack:[$e],tokenStack:[],config:s,enter:o,exit:u,buffer:l,resume:d,data:n},dt=[];let lt=-1;for(;++lt<_e.length;)if(_e[lt][1].type==="listOrdered"||_e[lt][1].type==="listUnordered")if(_e[lt][0]==="enter")dt.push(lt);else{const Rt=dt.pop();lt=a(_e,Rt,lt)}for(lt=-1;++lt<_e.length;){const Rt=s[_e[lt][0]];Lq.call(Rt,_e[lt][1].type)&&Rt[_e[lt][1].type].call(Object.assign({sliceSerialize:_e[lt][2].sliceSerialize},nt),_e[lt][1])}if(nt.tokenStack.length>0){const Rt=nt.tokenStack[nt.tokenStack.length-1];(Rt[1]||t6).call(nt,void 0,Rt[0])}for($e.position={start:_o(_e.length>0?_e[0][1].start:{line:1,column:1,offset:0}),end:_o(_e.length>0?_e[_e.length-2][1].end:{line:1,column:1,offset:0})},lt=-1;++lt<s.transforms.length;)$e=s.transforms[lt]($e)||$e;return $e}function a(_e,$e,nt){let dt=$e-1,lt=-1,Rt=!1,es,Bs,Ss,on;for(;++dt<=nt;){const Jt=_e[dt];switch(Jt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Jt[0]==="enter"?lt++:lt--,on=void 0;break}case"lineEndingBlank":{Jt[0]==="enter"&&(es&&!on&&!lt&&!Ss&&(Ss=dt),on=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:on=void 0}if(!lt&&Jt[0]==="enter"&&Jt[1].type==="listItemPrefix"||lt===-1&&Jt[0]==="exit"&&(Jt[1].type==="listUnordered"||Jt[1].type==="listOrdered")){if(es){let fn=dt;for(Bs=void 0;fn--;){const Ds=_e[fn];if(Ds[1].type==="lineEnding"||Ds[1].type==="lineEndingBlank"){if(Ds[0]==="exit")continue;Bs&&(_e[Bs][1].type="lineEndingBlank",Rt=!0),Ds[1].type="lineEnding",Bs=fn}else if(!(Ds[1].type==="linePrefix"||Ds[1].type==="blockQuotePrefix"||Ds[1].type==="blockQuotePrefixWhitespace"||Ds[1].type==="blockQuoteMarker"||Ds[1].type==="listItemIndent"))break}Ss&&(!Bs||Ss<Bs)&&(es._spread=!0),es.end=Object.assign({},Bs?_e[Bs][1].start:Jt[1].end),_e.splice(Bs||dt,0,["exit",es,Jt[2]]),dt++,nt++}if(Jt[1].type==="listItemPrefix"){const fn={type:"listItem",_spread:!1,start:Object.assign({},Jt[1].start),end:void 0};es=fn,_e.splice(dt,0,["enter",fn,Jt[2]]),dt++,nt++,Ss=void 0,on=!0}}}return _e[$e][1]._spread=Rt,nt}function i(_e,$e){return nt;function nt(dt){o.call(this,_e(dt),dt),$e&&$e.call(this,dt)}}function l(){this.stack.push({type:"fragment",children:[]})}function o(_e,$e,nt){this.stack[this.stack.length-1].children.push(_e),this.stack.push(_e),this.tokenStack.push([$e,nt||void 0]),_e.position={start:_o($e.start),end:void 0}}function c(_e){return $e;function $e(nt){_e&&_e.call(this,nt),u.call(this,nt)}}function u(_e,$e){const nt=this.stack.pop(),dt=this.tokenStack.pop();if(dt)dt[0].type!==_e.type&&($e?$e.call(this,_e,dt[0]):(dt[1]||t6).call(this,_e,dt[0]));else throw new Error("Cannot close `"+_e.type+"` ("+Km({start:_e.start,end:_e.end})+"): its not open");nt.position.end=_o(_e.end)}function d(){return abe(this.stack.pop())}function m(){this.data.expectingFirstListItemValue=!0}function h(_e){if(this.data.expectingFirstListItemValue){const $e=this.stack[this.stack.length-2];$e.start=Number.parseInt(this.sliceSerialize(_e),10),this.data.expectingFirstListItemValue=void 0}}function p(){const _e=this.resume(),$e=this.stack[this.stack.length-1];$e.lang=_e}function g(){const _e=this.resume(),$e=this.stack[this.stack.length-1];$e.meta=_e}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function y(){const _e=this.resume(),$e=this.stack[this.stack.length-1];$e.value=_e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function j(){const _e=this.resume(),$e=this.stack[this.stack.length-1];$e.value=_e.replace(/(\r?\n|\r)$/g,"")}function w(_e){const $e=this.resume(),nt=this.stack[this.stack.length-1];nt.label=$e,nt.identifier=Nu(this.sliceSerialize(_e)).toLowerCase()}function N(){const _e=this.resume(),$e=this.stack[this.stack.length-1];$e.title=_e}function _(){const _e=this.resume(),$e=this.stack[this.stack.length-1];$e.url=_e}function T(_e){const $e=this.stack[this.stack.length-1];if(!$e.depth){const nt=this.sliceSerialize(_e).length;$e.depth=nt}}function A(){this.data.setextHeadingSlurpLineEnding=!0}function P(_e){const $e=this.stack[this.stack.length-1];$e.depth=this.sliceSerialize(_e).codePointAt(0)===61?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function O(_e){const nt=this.stack[this.stack.length-1].children;let dt=nt[nt.length-1];(!dt||dt.type!=="text")&&(dt=Se(),dt.position={start:_o(_e.start),end:void 0},nt.push(dt)),this.stack.push(dt)}function M(_e){const $e=this.stack.pop();$e.value+=this.sliceSerialize(_e),$e.position.end=_o(_e.end)}function k(_e){const $e=this.stack[this.stack.length-1];if(this.data.atHardBreak){const nt=$e.children[$e.children.length-1];nt.position.end=_o(_e.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&s.canContainEols.includes($e.type)&&(O.call(this,_e),M.call(this,_e))}function E(){this.data.atHardBreak=!0}function R(){const _e=this.resume(),$e=this.stack[this.stack.length-1];$e.value=_e}function F(){const _e=this.resume(),$e=this.stack[this.stack.length-1];$e.value=_e}function z(){const _e=this.resume(),$e=this.stack[this.stack.length-1];$e.value=_e}function V(){const _e=this.stack[this.stack.length-1];if(this.data.inReference){const $e=this.data.referenceType||"shortcut";_e.type+="Reference",_e.referenceType=$e,delete _e.url,delete _e.title}else delete _e.identifier,delete _e.label;this.data.referenceType=void 0}function U(){const _e=this.stack[this.stack.length-1];if(this.data.inReference){const $e=this.data.referenceType||"shortcut";_e.type+="Reference",_e.referenceType=$e,delete _e.url,delete _e.title}else delete _e.identifier,delete _e.label;this.data.referenceType=void 0}function B(_e){const $e=this.sliceSerialize(_e),nt=this.stack[this.stack.length-2];nt.label=rwe($e),nt.identifier=Nu($e).toLowerCase()}function $(){const _e=this.stack[this.stack.length-1],$e=this.resume(),nt=this.stack[this.stack.length-1];if(this.data.inReference=!0,nt.type==="link"){const dt=_e.children;nt.children=dt}else nt.alt=$e}function L(){const _e=this.resume(),$e=this.stack[this.stack.length-1];$e.url=_e}function I(){const _e=this.resume(),$e=this.stack[this.stack.length-1];$e.title=_e}function W(){this.data.inReference=void 0}function q(){this.data.referenceType="collapsed"}function Z(_e){const $e=this.resume(),nt=this.stack[this.stack.length-1];nt.label=$e,nt.identifier=Nu(this.sliceSerialize(_e)).toLowerCase(),this.data.referenceType="full"}function Q(_e){this.data.characterReferenceType=_e.type}function Y(_e){const $e=this.sliceSerialize(_e),nt=this.data.characterReferenceType;let dt;nt?(dt=kq($e,nt==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):dt=nC($e);const lt=this.stack[this.stack.length-1];lt.value+=dt}function K(_e){const $e=this.stack.pop();$e.position.end=_o(_e.end)}function ae(_e){M.call(this,_e);const $e=this.stack[this.stack.length-1];$e.url=this.sliceSerialize(_e)}function se(_e){M.call(this,_e);const $e=this.stack[this.stack.length-1];$e.url="mailto:"+this.sliceSerialize(_e)}function de(){return{type:"blockquote",children:[]}}function ue(){return{type:"code",lang:null,meta:null,value:""}}function oe(){return{type:"inlineCode",value:""}}function pe(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function je(){return{type:"emphasis",children:[]}}function we(){return{type:"heading",depth:0,children:[]}}function qe(){return{type:"break"}}function ze(){return{type:"html",value:""}}function Ee(){return{type:"image",title:null,url:"",alt:null}}function Ce(){return{type:"link",title:null,url:"",children:[]}}function Ge(_e){return{type:"list",ordered:_e.type==="listOrdered",start:null,spread:_e._spread,children:[]}}function Ye(_e){return{type:"listItem",spread:_e._spread,checked:null,children:[]}}function De(){return{type:"paragraph",children:[]}}function it(){return{type:"strong",children:[]}}function Se(){return{type:"text",value:""}}function at(){return{type:"thematicBreak"}}}function _o(t){return{line:t.line,column:t.column,offset:t.offset}}function Iq(t,s){let n=-1;for(;++n<s.length;){const r=s[n];Array.isArray(r)?Iq(t,r):owe(t,r)}}function owe(t,s){let n;for(n in s)if(Lq.call(s,n))switch(n){case"canContainEols":{const r=s[n];r&&t[n].push(...r);break}case"transforms":{const r=s[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=s[n];r&&Object.assign(t[n],r);break}}}function t6(t,s){throw t?new Error("Cannot close `"+t.type+"` ("+Km({start:t.start,end:t.end})+"): a different token (`"+s.type+"`, "+Km({start:s.start,end:s.end})+") is open"):new Error("Cannot close document, a token (`"+s.type+"`, "+Km({start:s.start,end:s.end})+") is still open")}function cwe(t){const s=this;s.parser=n;function n(r){return iwe(r,{...s.data("settings"),...t,extensions:s.data("micromarkExtensions")||[],mdastExtensions:s.data("fromMarkdownExtensions")||[]})}}function dwe(t,s){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(s),!0)};return t.patch(s,n),t.applyData(s,n)}function uwe(t,s){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(s,n),[t.applyData(s,n),{type:"text",value:`
`}]}function hwe(t,s){const n=s.value?s.value+`
`:"",r={},a=s.lang?s.lang.split(/\s+/):[];a.length>0&&(r.className=["language-"+a[0]]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return s.meta&&(i.data={meta:s.meta}),t.patch(s,i),i=t.applyData(s,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(s,i),i}function mwe(t,s){const n={type:"element",tagName:"del",properties:{},children:t.all(s)};return t.patch(s,n),t.applyData(s,n)}function fwe(t,s){const n={type:"element",tagName:"em",properties:{},children:t.all(s)};return t.patch(s,n),t.applyData(s,n)}function pwe(t,s){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(s.identifier).toUpperCase(),a=Ph(r.toLowerCase()),i=t.footnoteOrder.indexOf(r);let l,o=t.footnoteCounts.get(r);o===void 0?(o=0,t.footnoteOrder.push(r),l=t.footnoteOrder.length):l=i+1,o+=1,t.footnoteCounts.set(r,o);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+a,id:n+"fnref-"+a+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};t.patch(s,c);const u={type:"element",tagName:"sup",properties:{},children:[c]};return t.patch(s,u),t.applyData(s,u)}function xwe(t,s){const n={type:"element",tagName:"h"+s.depth,properties:{},children:t.all(s)};return t.patch(s,n),t.applyData(s,n)}function gwe(t,s){if(t.options.allowDangerousHtml){const n={type:"raw",value:s.value};return t.patch(s,n),t.applyData(s,n)}}function Bq(t,s){const n=s.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(s.label||s.identifier)+"]"),s.type==="imageReference")return[{type:"text",value:"!["+s.alt+r}];const a=t.all(s),i=a[0];i&&i.type==="text"?i.value="["+i.value:a.unshift({type:"text",value:"["});const l=a[a.length-1];return l&&l.type==="text"?l.value+=r:a.push({type:"text",value:r}),a}function vwe(t,s){const n=String(s.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return Bq(t,s);const a={src:Ph(r.url||""),alt:s.alt};r.title!==null&&r.title!==void 0&&(a.title=r.title);const i={type:"element",tagName:"img",properties:a,children:[]};return t.patch(s,i),t.applyData(s,i)}function ywe(t,s){const n={src:Ph(s.url)};s.alt!==null&&s.alt!==void 0&&(n.alt=s.alt),s.title!==null&&s.title!==void 0&&(n.title=s.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(s,r),t.applyData(s,r)}function bwe(t,s){const n={type:"text",value:s.value.replace(/\r?\n|\r/g," ")};t.patch(s,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(s,r),t.applyData(s,r)}function jwe(t,s){const n=String(s.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return Bq(t,s);const a={href:Ph(r.url||"")};r.title!==null&&r.title!==void 0&&(a.title=r.title);const i={type:"element",tagName:"a",properties:a,children:t.all(s)};return t.patch(s,i),t.applyData(s,i)}function wwe(t,s){const n={href:Ph(s.url)};s.title!==null&&s.title!==void 0&&(n.title=s.title);const r={type:"element",tagName:"a",properties:n,children:t.all(s)};return t.patch(s,r),t.applyData(s,r)}function Nwe(t,s,n){const r=t.all(s),a=n?_we(n):qq(s),i={},l=[];if(typeof s.checked=="boolean"){const d=r[0];let m;d&&d.type==="element"&&d.tagName==="p"?m=d:(m={type:"element",tagName:"p",properties:{},children:[]},r.unshift(m)),m.children.length>0&&m.children.unshift({type:"text",value:" "}),m.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:s.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let o=-1;for(;++o<r.length;){const d=r[o];(a||o!==0||d.type!=="element"||d.tagName!=="p")&&l.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!a?l.push(...d.children):l.push(d)}const c=r[r.length-1];c&&(a||c.type!=="element"||c.tagName!=="p")&&l.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:i,children:l};return t.patch(s,u),t.applyData(s,u)}function _we(t){let s=!1;if(t.type==="list"){s=t.spread||!1;const n=t.children;let r=-1;for(;!s&&++r<n.length;)s=qq(n[r])}return s}function qq(t){const s=t.spread;return s??t.children.length>1}function Swe(t,s){const n={},r=t.all(s);let a=-1;for(typeof s.start=="number"&&s.start!==1&&(n.start=s.start);++a<r.length;){const l=r[a];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:s.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(s,i),t.applyData(s,i)}function Cwe(t,s){const n={type:"element",tagName:"p",properties:{},children:t.all(s)};return t.patch(s,n),t.applyData(s,n)}function kwe(t,s){const n={type:"root",children:t.wrap(t.all(s))};return t.patch(s,n),t.applyData(s,n)}function Ewe(t,s){const n={type:"element",tagName:"strong",properties:{},children:t.all(s)};return t.patch(s,n),t.applyData(s,n)}function Pwe(t,s){const n=t.all(s),r=n.shift(),a=[];if(r){const l={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(s.children[0],l),a.push(l)}if(n.length>0){const l={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},o=ZS(s.children[1]),c=bq(s.children[s.children.length-1]);o&&c&&(l.position={start:o,end:c}),a.push(l)}const i={type:"element",tagName:"table",properties:{},children:t.wrap(a,!0)};return t.patch(s,i),t.applyData(s,i)}function Twe(t,s,n){const r=n?n.children:void 0,i=(r?r.indexOf(s):1)===0?"th":"td",l=n&&n.type==="table"?n.align:void 0,o=l?l.length:s.children.length;let c=-1;const u=[];for(;++c<o;){const m=s.children[c],h={},p=l?l[c]:void 0;p&&(h.align=p);let g={type:"element",tagName:i,properties:h,children:[]};m&&(g.children=t.all(m),t.patch(m,g),g=t.applyData(m,g)),u.push(g)}const d={type:"element",tagName:"tr",properties:{},children:t.wrap(u,!0)};return t.patch(s,d),t.applyData(s,d)}function Awe(t,s){const n={type:"element",tagName:"td",properties:{},children:t.all(s)};return t.patch(s,n),t.applyData(s,n)}const s6=9,n6=32;function Mwe(t){const s=String(t),n=/\r?\n|\r/g;let r=n.exec(s),a=0;const i=[];for(;r;)i.push(r6(s.slice(a,r.index),a>0,!0),r[0]),a=r.index+r[0].length,r=n.exec(s);return i.push(r6(s.slice(a),a>0,!1)),i.join("")}function r6(t,s,n){let r=0,a=t.length;if(s){let i=t.codePointAt(r);for(;i===s6||i===n6;)r++,i=t.codePointAt(r)}if(n){let i=t.codePointAt(a-1);for(;i===s6||i===n6;)a--,i=t.codePointAt(a-1)}return a>r?t.slice(r,a):""}function Dwe(t,s){const n={type:"text",value:Mwe(String(s.value))};return t.patch(s,n),t.applyData(s,n)}function Owe(t,s){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(s,n),t.applyData(s,n)}const Rwe={blockquote:dwe,break:uwe,code:hwe,delete:mwe,emphasis:fwe,footnoteReference:pwe,heading:xwe,html:gwe,imageReference:vwe,image:ywe,inlineCode:bwe,linkReference:jwe,link:wwe,listItem:Nwe,list:Swe,paragraph:Cwe,root:kwe,strong:Ewe,table:Pwe,tableCell:Awe,tableRow:Twe,text:Dwe,thematicBreak:Owe,toml:Xx,yaml:Xx,definition:Xx,footnoteDefinition:Xx};function Xx(){}const zq=-1,Ev=0,Ym=1,c0=2,iC=3,lC=4,oC=5,cC=6,$q=7,Uq=8,a6=typeof self=="object"?self:globalThis,Fwe=(t,s)=>{const n=(a,i)=>(t.set(i,a),a),r=a=>{if(t.has(a))return t.get(a);const[i,l]=s[a];switch(i){case Ev:case zq:return n(l,a);case Ym:{const o=n([],a);for(const c of l)o.push(r(c));return o}case c0:{const o=n({},a);for(const[c,u]of l)o[r(c)]=r(u);return o}case iC:return n(new Date(l),a);case lC:{const{source:o,flags:c}=l;return n(new RegExp(o,c),a)}case oC:{const o=n(new Map,a);for(const[c,u]of l)o.set(r(c),r(u));return o}case cC:{const o=n(new Set,a);for(const c of l)o.add(r(c));return o}case $q:{const{name:o,message:c}=l;return n(new a6[o](c),a)}case Uq:return n(BigInt(l),a);case"BigInt":return n(Object(BigInt(l)),a);case"ArrayBuffer":return n(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:o}=new Uint8Array(l);return n(new DataView(o),l)}}return n(new a6[i](l),a)};return r},i6=t=>Fwe(new Map,t)(0),lu="",{toString:Lwe}={},{keys:Iwe}=Object,km=t=>{const s=typeof t;if(s!=="object"||!t)return[Ev,s];const n=Lwe.call(t).slice(8,-1);switch(n){case"Array":return[Ym,lu];case"Object":return[c0,lu];case"Date":return[iC,lu];case"RegExp":return[lC,lu];case"Map":return[oC,lu];case"Set":return[cC,lu];case"DataView":return[Ym,n]}return n.includes("Array")?[Ym,n]:n.includes("Error")?[$q,n]:[c0,n]},Zx=([t,s])=>t===Ev&&(s==="function"||s==="symbol"),Bwe=(t,s,n,r)=>{const a=(l,o)=>{const c=r.push(l)-1;return n.set(o,c),c},i=l=>{if(n.has(l))return n.get(l);let[o,c]=km(l);switch(o){case Ev:{let d=l;switch(c){case"bigint":o=Uq,d=l.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+c);d=null;break;case"undefined":return a([zq],l)}return a([o,d],l)}case Ym:{if(c){let h=l;return c==="DataView"?h=new Uint8Array(l.buffer):c==="ArrayBuffer"&&(h=new Uint8Array(l)),a([c,[...h]],l)}const d=[],m=a([o,d],l);for(const h of l)d.push(i(h));return m}case c0:{if(c)switch(c){case"BigInt":return a([c,l.toString()],l);case"Boolean":case"Number":case"String":return a([c,l.valueOf()],l)}if(s&&"toJSON"in l)return i(l.toJSON());const d=[],m=a([o,d],l);for(const h of Iwe(l))(t||!Zx(km(l[h])))&&d.push([i(h),i(l[h])]);return m}case iC:return a([o,l.toISOString()],l);case lC:{const{source:d,flags:m}=l;return a([o,{source:d,flags:m}],l)}case oC:{const d=[],m=a([o,d],l);for(const[h,p]of l)(t||!(Zx(km(h))||Zx(km(p))))&&d.push([i(h),i(p)]);return m}case cC:{const d=[],m=a([o,d],l);for(const h of l)(t||!Zx(km(h)))&&d.push(i(h));return m}}const{message:u}=l;return a([o,{name:c,message:u}],l)};return i},l6=(t,{json:s,lossy:n}={})=>{const r=[];return Bwe(!(s||n),!!s,new Map,r)(t),r},d0=typeof structuredClone=="function"?(t,s)=>s&&("json"in s||"lossy"in s)?i6(l6(t,s)):structuredClone(t):(t,s)=>i6(l6(t,s));function qwe(t,s){const n=[{type:"text",value:""}];return s>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(s)}]}),n}function zwe(t,s){return"Back to reference "+(t+1)+(s>1?"-"+s:"")}function $we(t){const s=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||qwe,r=t.options.footnoteBackLabel||zwe,a=t.options.footnoteLabel||"Footnotes",i=t.options.footnoteLabelTagName||"h2",l=t.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let c=-1;for(;++c<t.footnoteOrder.length;){const u=t.footnoteById.get(t.footnoteOrder[c]);if(!u)continue;const d=t.all(u),m=String(u.identifier).toUpperCase(),h=Ph(m.toLowerCase());let p=0;const g=[],v=t.footnoteCounts.get(m);for(;v!==void 0&&++p<=v;){g.length>0&&g.push({type:"text",value:" "});let w=typeof n=="string"?n:n(c,p);typeof w=="string"&&(w={type:"text",value:w}),g.push({type:"element",tagName:"a",properties:{href:"#"+s+"fnref-"+h+(p>1?"-"+p:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,p),className:["data-footnote-backref"]},children:Array.isArray(w)?w:[w]})}const y=d[d.length-1];if(y&&y.type==="element"&&y.tagName==="p"){const w=y.children[y.children.length-1];w&&w.type==="text"?w.value+=" ":y.children.push({type:"text",value:" "}),y.children.push(...g)}else d.push(...g);const j={type:"element",tagName:"li",properties:{id:s+"fn-"+h},children:t.wrap(d,!0)};t.patch(u,j),o.push(j)}if(o.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...d0(l),id:"footnote-label"},children:[{type:"text",value:a}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(o,!0)},{type:"text",value:`
`}]}}const Vq=(function(t){if(t==null)return Hwe;if(typeof t=="function")return Pv(t);if(typeof t=="object")return Array.isArray(t)?Uwe(t):Vwe(t);if(typeof t=="string")return Wwe(t);throw new Error("Expected function, string, or object as test")});function Uwe(t){const s=[];let n=-1;for(;++n<t.length;)s[n]=Vq(t[n]);return Pv(r);function r(...a){let i=-1;for(;++i<s.length;)if(s[i].apply(this,a))return!0;return!1}}function Vwe(t){const s=t;return Pv(n);function n(r){const a=r;let i;for(i in t)if(a[i]!==s[i])return!1;return!0}}function Wwe(t){return Pv(s);function s(n){return n&&n.type===t}}function Pv(t){return s;function s(n,r,a){return!!(Kwe(n)&&t.call(this,n,typeof r=="number"?r:void 0,a||void 0))}}function Hwe(){return!0}function Kwe(t){return t!==null&&typeof t=="object"&&"type"in t}const Wq=[],Gwe=!0,o6=!1,Ywe="skip";function Qwe(t,s,n,r){let a;typeof s=="function"&&typeof n!="function"?(r=n,n=s):a=s;const i=Vq(a),l=r?-1:1;o(t,void 0,[])();function o(c,u,d){const m=c&&typeof c=="object"?c:{};if(typeof m.type=="string"){const p=typeof m.tagName=="string"?m.tagName:typeof m.name=="string"?m.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(c.type+(p?"<"+p+">":""))+")"})}return h;function h(){let p=Wq,g,v,y;if((!s||i(c,u,d[d.length-1]||void 0))&&(p=Jwe(n(c,d)),p[0]===o6))return p;if("children"in c&&c.children){const j=c;if(j.children&&p[0]!==Ywe)for(v=(r?j.children.length:-1)+l,y=d.concat(j);v>-1&&v<j.children.length;){const w=j.children[v];if(g=o(w,v,y)(),g[0]===o6)return g;v=typeof g[1]=="number"?g[1]:v+l}}return p}}}function Jwe(t){return Array.isArray(t)?t:typeof t=="number"?[Gwe,t]:t==null?Wq:[t]}function Hq(t,s,n,r){let a,i,l;typeof s=="function"&&typeof n!="function"?(i=void 0,l=s,a=n):(i=s,l=n,a=r),Qwe(t,i,o,a);function o(c,u){const d=u[u.length-1],m=d?d.children.indexOf(c):void 0;return l(c,m,d)}}const f1={}.hasOwnProperty,Xwe={};function Zwe(t,s){const n=s||Xwe,r=new Map,a=new Map,i=new Map,l={...Rwe,...n.handlers},o={all:u,applyData:tNe,definitionById:r,footnoteById:a,footnoteCounts:i,footnoteOrder:[],handlers:l,one:c,options:n,patch:eNe,wrap:nNe};return Hq(t,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const m=d.type==="definition"?r:a,h=String(d.identifier).toUpperCase();m.has(h)||m.set(h,d)}}),o;function c(d,m){const h=d.type,p=o.handlers[h];if(f1.call(o.handlers,h)&&p)return p(o,d,m);if(o.options.passThrough&&o.options.passThrough.includes(h)){if("children"in d){const{children:v,...y}=d,j=d0(y);return j.children=o.all(d),j}return d0(d)}return(o.options.unknownHandler||sNe)(o,d,m)}function u(d){const m=[];if("children"in d){const h=d.children;let p=-1;for(;++p<h.length;){const g=o.one(h[p],d);if(g){if(p&&h[p-1].type==="break"&&(!Array.isArray(g)&&g.type==="text"&&(g.value=c6(g.value)),!Array.isArray(g)&&g.type==="element")){const v=g.children[0];v&&v.type==="text"&&(v.value=c6(v.value))}Array.isArray(g)?m.push(...g):m.push(g)}}}return m}}function eNe(t,s){t.position&&(s.position=Lye(t))}function tNe(t,s){let n=s;if(t&&t.data){const r=t.data.hName,a=t.data.hChildren,i=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const l="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:l}}n.type==="element"&&i&&Object.assign(n.properties,d0(i)),"children"in n&&n.children&&a!==null&&a!==void 0&&(n.children=a)}return n}function sNe(t,s){const n=s.data||{},r="value"in s&&!(f1.call(n,"hProperties")||f1.call(n,"hChildren"))?{type:"text",value:s.value}:{type:"element",tagName:"div",properties:{},children:t.all(s)};return t.patch(s,r),t.applyData(s,r)}function nNe(t,s){const n=[];let r=-1;for(s&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return s&&t.length>0&&n.push({type:"text",value:`
`}),n}function c6(t){let s=0,n=t.charCodeAt(s);for(;n===9||n===32;)s++,n=t.charCodeAt(s);return t.slice(s)}function d6(t,s){const n=Zwe(t,s),r=n.one(t,void 0),a=$we(n),i=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return a&&i.children.push({type:"text",value:`
`},a),i}function rNe(t,s){return t&&"run"in t?async function(n,r){const a=d6(n,{file:r,...s});await t.run(a,r)}:function(n,r){return d6(n,{file:r,...t||s})}}function u6(t){if(t)throw t}var fN,h6;function aNe(){if(h6)return fN;h6=1;var t=Object.prototype.hasOwnProperty,s=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,a=function(u){return typeof Array.isArray=="function"?Array.isArray(u):s.call(u)==="[object Array]"},i=function(u){if(!u||s.call(u)!=="[object Object]")return!1;var d=t.call(u,"constructor"),m=u.constructor&&u.constructor.prototype&&t.call(u.constructor.prototype,"isPrototypeOf");if(u.constructor&&!d&&!m)return!1;var h;for(h in u);return typeof h>"u"||t.call(u,h)},l=function(u,d){n&&d.name==="__proto__"?n(u,d.name,{enumerable:!0,configurable:!0,value:d.newValue,writable:!0}):u[d.name]=d.newValue},o=function(u,d){if(d==="__proto__")if(t.call(u,d)){if(r)return r(u,d).value}else return;return u[d]};return fN=function c(){var u,d,m,h,p,g,v=arguments[0],y=1,j=arguments.length,w=!1;for(typeof v=="boolean"&&(w=v,v=arguments[1]||{},y=2),(v==null||typeof v!="object"&&typeof v!="function")&&(v={});y<j;++y)if(u=arguments[y],u!=null)for(d in u)m=o(v,d),h=o(u,d),v!==h&&(w&&h&&(i(h)||(p=a(h)))?(p?(p=!1,g=m&&a(m)?m:[]):g=m&&i(m)?m:{},l(v,{name:d,newValue:c(w,g,h)})):typeof h<"u"&&l(v,{name:d,newValue:h}));return v},fN}var iNe=aNe();const pN=ud(iNe);function p1(t){if(typeof t!="object"||t===null)return!1;const s=Object.getPrototypeOf(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function lNe(){const t=[],s={run:n,use:r};return s;function n(...a){let i=-1;const l=a.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);o(null,...a);function o(c,...u){const d=t[++i];let m=-1;if(c){l(c);return}for(;++m<a.length;)(u[m]===null||u[m]===void 0)&&(u[m]=a[m]);a=u,d?oNe(d,o)(...u):l(null,...u)}}function r(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return t.push(a),s}}function oNe(t,s){let n;return r;function r(...l){const o=t.length>l.length;let c;o&&l.push(a);try{c=t.apply(this,l)}catch(u){const d=u;if(o&&n)throw d;return a(d)}o||(c&&c.then&&typeof c.then=="function"?c.then(i,a):c instanceof Error?a(c):i(c))}function a(l,...o){n||(n=!0,s(l,...o))}function i(l){a(null,l)}}const Ri={basename:cNe,dirname:dNe,extname:uNe,join:hNe,sep:"/"};function cNe(t,s){if(s!==void 0&&typeof s!="string")throw new TypeError('"ext" argument must be a string');gp(t);let n=0,r=-1,a=t.length,i;if(s===void 0||s.length===0||s.length>t.length){for(;a--;)if(t.codePointAt(a)===47){if(i){n=a+1;break}}else r<0&&(i=!0,r=a+1);return r<0?"":t.slice(n,r)}if(s===t)return"";let l=-1,o=s.length-1;for(;a--;)if(t.codePointAt(a)===47){if(i){n=a+1;break}}else l<0&&(i=!0,l=a+1),o>-1&&(t.codePointAt(a)===s.codePointAt(o--)?o<0&&(r=a):(o=-1,r=l));return n===r?r=l:r<0&&(r=t.length),t.slice(n,r)}function dNe(t){if(gp(t),t.length===0)return".";let s=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){s=n;break}}else r||(r=!0);return s<0?t.codePointAt(0)===47?"/":".":s===1&&t.codePointAt(0)===47?"//":t.slice(0,s)}function uNe(t){gp(t);let s=t.length,n=-1,r=0,a=-1,i=0,l;for(;s--;){const o=t.codePointAt(s);if(o===47){if(l){r=s+1;break}continue}n<0&&(l=!0,n=s+1),o===46?a<0?a=s:i!==1&&(i=1):a>-1&&(i=-1)}return a<0||n<0||i===0||i===1&&a===n-1&&a===r+1?"":t.slice(a,n)}function hNe(...t){let s=-1,n;for(;++s<t.length;)gp(t[s]),t[s]&&(n=n===void 0?t[s]:n+"/"+t[s]);return n===void 0?".":mNe(n)}function mNe(t){gp(t);const s=t.codePointAt(0)===47;let n=fNe(t,!s);return n.length===0&&!s&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),s?"/"+n:n}function fNe(t,s){let n="",r=0,a=-1,i=0,l=-1,o,c;for(;++l<=t.length;){if(l<t.length)o=t.codePointAt(l);else{if(o===47)break;o=47}if(o===47){if(!(a===l-1||i===1))if(a!==l-1&&i===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),a=l,i=0;continue}}else if(n.length>0){n="",r=0,a=l,i=0;continue}}s&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(a+1,l):n=t.slice(a+1,l),r=l-a-1;a=l,i=0}else o===46&&i>-1?i++:i=-1}return n}function gp(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const pNe={cwd:xNe};function xNe(){return"/"}function x1(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function gNe(t){if(typeof t=="string")t=new URL(t);else if(!x1(t)){const s=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw s.code="ERR_INVALID_ARG_TYPE",s}if(t.protocol!=="file:"){const s=new TypeError("The URL must be of scheme file");throw s.code="ERR_INVALID_URL_SCHEME",s}return vNe(t)}function vNe(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const s=t.pathname;let n=-1;for(;++n<s.length;)if(s.codePointAt(n)===37&&s.codePointAt(n+1)===50){const r=s.codePointAt(n+2);if(r===70||r===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(s)}const xN=["history","path","basename","stem","extname","dirname"];class Kq{constructor(s){let n;s?x1(s)?n={path:s}:typeof s=="string"||yNe(s)?n={value:s}:n=s:n={},this.cwd="cwd"in n?"":pNe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<xN.length;){const i=xN[r];i in n&&n[i]!==void 0&&n[i]!==null&&(this[i]=i==="history"?[...n[i]]:n[i])}let a;for(a in n)xN.includes(a)||(this[a]=n[a])}get basename(){return typeof this.path=="string"?Ri.basename(this.path):void 0}set basename(s){vN(s,"basename"),gN(s,"basename"),this.path=Ri.join(this.dirname||"",s)}get dirname(){return typeof this.path=="string"?Ri.dirname(this.path):void 0}set dirname(s){m6(this.basename,"dirname"),this.path=Ri.join(s||"",this.basename)}get extname(){return typeof this.path=="string"?Ri.extname(this.path):void 0}set extname(s){if(gN(s,"extname"),m6(this.dirname,"extname"),s){if(s.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(s.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ri.join(this.dirname,this.stem+(s||""))}get path(){return this.history[this.history.length-1]}set path(s){x1(s)&&(s=gNe(s)),vN(s,"path"),this.path!==s&&this.history.push(s)}get stem(){return typeof this.path=="string"?Ri.basename(this.path,this.extname):void 0}set stem(s){vN(s,"stem"),gN(s,"stem"),this.path=Ri.join(this.dirname||"",s+(this.extname||""))}fail(s,n,r){const a=this.message(s,n,r);throw a.fatal=!0,a}info(s,n,r){const a=this.message(s,n,r);return a.fatal=void 0,a}message(s,n,r){const a=new br(s,n,r);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(s){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(s||void 0).decode(this.value)}}function gN(t,s){if(t&&t.includes(Ri.sep))throw new Error("`"+s+"` cannot be a path: did not expect `"+Ri.sep+"`")}function vN(t,s){if(!t)throw new Error("`"+s+"` cannot be empty")}function m6(t,s){if(!t)throw new Error("Setting `"+s+"` requires `path` to be set too")}function yNe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const bNe=(function(t){const r=this.constructor.prototype,a=r[t],i=function(){return a.apply(i,arguments)};return Object.setPrototypeOf(i,r),i}),jNe={}.hasOwnProperty;class dC extends bNe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=lNe()}copy(){const s=new dC;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];s.use(...r)}return s.data(pN(!0,{},this.namespace)),s}data(s,n){return typeof s=="string"?arguments.length===2?(jN("data",this.frozen),this.namespace[s]=n,this):jNe.call(this.namespace,s)&&this.namespace[s]||void 0:s?(jN("data",this.frozen),this.namespace=s,this):this.namespace}freeze(){if(this.frozen)return this;const s=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const a=n.call(s,...r);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(s){this.freeze();const n=eg(s),r=this.parser||this.Parser;return yN("parse",r),r(String(n),n)}process(s,n){const r=this;return this.freeze(),yN("process",this.parser||this.Parser),bN("process",this.compiler||this.Compiler),n?a(void 0,n):new Promise(a);function a(i,l){const o=eg(s),c=r.parse(o);r.run(c,o,function(d,m,h){if(d||!m||!h)return u(d);const p=m,g=r.stringify(p,h);_Ne(g)?h.value=g:h.result=g,u(d,h)});function u(d,m){d||!m?l(d):i?i(m):n(void 0,m)}}}processSync(s){let n=!1,r;return this.freeze(),yN("processSync",this.parser||this.Parser),bN("processSync",this.compiler||this.Compiler),this.process(s,a),p6("processSync","process",n),r;function a(i,l){n=!0,u6(i),r=l}}run(s,n,r){f6(s),this.freeze();const a=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?i(void 0,r):new Promise(i);function i(l,o){const c=eg(n);a.run(s,c,u);function u(d,m,h){const p=m||s;d?o(d):l?l(p):r(void 0,p,h)}}}runSync(s,n){let r=!1,a;return this.run(s,n,i),p6("runSync","run",r),a;function i(l,o){u6(l),a=o,r=!0}}stringify(s,n){this.freeze();const r=eg(n),a=this.compiler||this.Compiler;return bN("stringify",a),f6(s),a(s,r)}use(s,...n){const r=this.attachers,a=this.namespace;if(jN("use",this.frozen),s!=null)if(typeof s=="function")c(s,n);else if(typeof s=="object")Array.isArray(s)?o(s):l(s);else throw new TypeError("Expected usable value, not `"+s+"`");return this;function i(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[d,...m]=u;c(d,m)}else l(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function l(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(u.plugins),u.settings&&(a.settings=pN(!0,a.settings,u.settings))}function o(u){let d=-1;if(u!=null)if(Array.isArray(u))for(;++d<u.length;){const m=u[d];i(m)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,d){let m=-1,h=-1;for(;++m<r.length;)if(r[m][0]===u){h=m;break}if(h===-1)r.push([u,...d]);else if(d.length>0){let[p,...g]=d;const v=r[h][1];p1(v)&&p1(p)&&(p=pN(!0,v,p)),r[h]=[u,p,...g]}}}}const wNe=new dC().freeze();function yN(t,s){if(typeof s!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function bN(t,s){if(typeof s!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function jN(t,s){if(s)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function f6(t){if(!p1(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function p6(t,s,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+s+"` instead")}function eg(t){return NNe(t)?t:new Kq(t)}function NNe(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function _Ne(t){return typeof t=="string"||SNe(t)}function SNe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const CNe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",x6=[],g6={allowDangerousHtml:!0},kNe=/^(https?|ircs?|mailto|xmpp)$/i,ENe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function g1(t){const s=PNe(t),n=TNe(t);return ANe(s.runSync(s.parse(n),n),t)}function PNe(t){const s=t.rehypePlugins||x6,n=t.remarkPlugins||x6,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...g6}:g6;return wNe().use(cwe).use(n).use(rNe,r).use(s)}function TNe(t){const s=t.children||"",n=new Kq;return typeof s=="string"&&(n.value=s),n}function ANe(t,s){const n=s.allowedElements,r=s.allowElement,a=s.components,i=s.disallowedElements,l=s.skipHtml,o=s.unwrapDisallowed,c=s.urlTransform||MNe;for(const d of ENe)Object.hasOwn(s,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+CNe+d.id,void 0);return Hq(t,u),$ye(t,{Fragment:e.Fragment,components:a,ignoreInvalidStyle:!0,jsx:e.jsx,jsxs:e.jsxs,passKeys:!0,passNode:!0});function u(d,m,h){if(d.type==="raw"&&h&&typeof m=="number")return l?h.children.splice(m,1):h.children[m]={type:"text",value:d.value},m;if(d.type==="element"){let p;for(p in uN)if(Object.hasOwn(uN,p)&&Object.hasOwn(d.properties,p)){const g=d.properties[p],v=uN[p];(v===null||v.includes(d.tagName))&&(d.properties[p]=c(String(g||""),p,d))}}if(d.type==="element"){let p=n?!n.includes(d.tagName):i?i.includes(d.tagName):!1;if(!p&&r&&typeof m=="number"&&(p=!r(d,m,h)),p&&h&&typeof m=="number")return o&&d.children?h.children.splice(m,1,...d.children):h.children.splice(m,1),m}}}function MNe(t){const s=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),a=t.indexOf("/");return s===-1||a!==-1&&s>a||n!==-1&&s>n||r!==-1&&s>r||kNe.test(t.slice(0,s))?t:""}function DNe({content:t,variant:s,settings:n}){const r={default:"",centered:"text-center",large:"text-lg"},a=r[s]||r.default;return e.jsxs("div",{className:a,children:[t.heading&&e.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-6",children:t.heading}),t.text&&e.jsx("div",{className:"prose prose-lg max-w-none text-slate-600",children:e.jsx(g1,{children:t.text})})]})}function ONe({content:t,variant:s,settings:n}){const r={default:"rounded-lg",rounded:"rounded-2xl",circle:"rounded-full",none:""},a=r[s]||r.default;return t.imageUrl?e.jsxs("div",{className:"w-full",children:[e.jsx("img",{src:t.imageUrl,alt:t.altText||"",className:`w-full h-auto object-cover ${a}`}),t.caption&&e.jsx("p",{className:"text-sm text-slate-600 mt-2 text-center italic",children:t.caption})]}):e.jsx("div",{className:"bg-slate-100 aspect-video rounded-lg flex items-center justify-center",children:e.jsx("p",{className:"text-slate-400",children:"No image selected"})})}function RNe({content:t,variant:s,settings:n}){const r={default:"md:grid-cols-2","60-40":"md:grid-cols-[60%_40%]","40-60":"md:grid-cols-[40%_60%]"},a=r[s]||r.default;return e.jsxs("div",{className:`grid ${a} gap-8`,children:[e.jsxs("div",{children:[t.leftHeading&&e.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-4",children:t.leftHeading}),t.leftContent&&e.jsx("div",{className:"prose text-slate-600",children:e.jsx(g1,{children:t.leftContent})})]}),e.jsxs("div",{children:[t.rightHeading&&e.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-4",children:t.rightHeading}),t.rightContent&&e.jsx("div",{className:"prose text-slate-600",children:e.jsx(g1,{children:t.rightContent})})]})]})}function FNe({content:t,variant:s,settings:n}){const r={default:"bg-blue-600 hover:bg-blue-700",primary:"bg-indigo-600 hover:bg-indigo-700",secondary:"bg-slate-600 hover:bg-slate-700",success:"bg-green-600 hover:bg-green-700"},a={left:"justify-start",center:"justify-center",right:"justify-end"},i=r[s]||r.default,l=a[t.alignment]||a.center;return e.jsx("div",{className:`flex ${l}`,children:e.jsx(J,{size:"lg",className:`${i} text-white`,onClick:()=>{t.link&&(t.openInNewTab?window.open(t.link,"_blank"):window.location.href=t.link)},children:t.text||"Click Here"})})}function LNe({content:t={},settings:s={}}){const{backgroundImageUrl:n="",foregroundImageUrl:r="",height:a="medium",contentAlignment:i="center",overlayOpacity:l=0}=t,{fullWidth:o=!1}=s,c={small:"h-[300px]",medium:"h-[500px]",large:"h-[700px]","full-screen":"h-screen"},u=o?"w-full relative":`relative w-full ${c[a]||c.medium}`;return e.jsxs("div",{className:"w-full relative overflow-hidden",children:[e.jsxs("div",{className:u,children:[n&&e.jsxs("div",{className:o?"relative w-full":"absolute inset-0 w-full h-full",children:[e.jsx("img",{src:n,alt:"Hero background",className:`w-full ${o?"h-auto":"h-full"} ${o?"object-contain":"object-cover"}`}),l>0&&e.jsx("div",{className:"absolute inset-0 bg-black",style:{opacity:l/100}})]}),r&&e.jsx("div",{className:"absolute inset-0 w-full h-full flex items-center justify-center",children:e.jsx("img",{src:r,alt:"Hero foreground frame",className:`w-full h-full ${o?"object-contain":"object-cover"}`,style:{mixBlendMode:"normal"}})})]}),!n&&!r&&e.jsx("div",{className:`${c[a]||c.medium} bg-gradient-to-br from-slate-100 to-slate-200 flex items-center justify-center`,children:e.jsxs("div",{className:"text-center text-slate-500",children:[e.jsx("div",{className:"mb-3",children:e.jsx("svg",{className:"w-16 h-16 mx-auto text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsx("p",{className:"font-semibold text-lg mb-1",children:"Image Hero Element"}),e.jsx("p",{className:"text-sm",children:"Add background and foreground images to create your hero"}),o&&e.jsx("p",{className:"text-xs mt-2 text-blue-600",children:"Full-width mode: Images will maintain their aspect ratio"})]})})]})}function INe({element:t,memberInfo:s,organizationInfo:n}){var d;const r=(d=t.content)==null?void 0:d.form_slug,[a,i]=b.useState({}),[l,o]=b.useState(0),{data:c,isLoading:u}=me({queryKey:["form-embed",r],queryFn:async()=>r?(await X.entities.Form.list()).find(h=>h.slug===r&&h.is_active):null,enabled:!!r});if(u)return e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(vt,{className:"w-8 h-8 animate-spin text-blue-600"})});if(!c)return e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(vs,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-600",children:"Form not found or inactive"})]})});if(c.layout_type==="card_swipe"){const m=c.fields[l],h=l===c.fields.length-1,p=!(m!=null&&m.required)||a[m==null?void 0:m.id];return e.jsxs(le,{className:"border-slate-200 max-w-2xl mx-auto",children:[e.jsxs(Fe,{children:[e.jsx(Ue,{children:c.name}),c.description&&e.jsx(Es,{className:"whitespace-pre-line",children:c.description}),e.jsx("div",{className:"flex gap-1 mt-4",children:c.fields.map((g,v)=>e.jsx("div",{className:`h-1 flex-1 rounded ${v<=l?"bg-blue-600":"bg-slate-200"}`},v))})]}),e.jsx(ce,{className:"min-h-[300px]",children:m&&e.jsx(Vu,{field:m,value:a[m.id],onChange:g=>i({...a,[m.id]:g}),memberInfo:s,organizationInfo:n})}),e.jsxs("div",{className:"p-6 pt-0 flex justify-between",children:[e.jsxs(J,{variant:"outline",onClick:()=>o(l-1),disabled:l===0,children:[e.jsx(Wn,{className:"w-4 h-4 mr-2"}),"Previous"]}),h?e.jsx(J,{className:"bg-blue-600 hover:bg-blue-700",disabled:!0,children:c.submit_button_text||"Submit"}):e.jsxs(J,{onClick:()=>o(l+1),disabled:!p,children:["Next",e.jsx(js,{className:"w-4 h-4 ml-2"})]})]})]})}return e.jsxs(le,{className:"border-slate-200",children:[e.jsxs(Fe,{children:[e.jsx(Ue,{children:c.name}),c.description&&e.jsx(Es,{className:"whitespace-pre-line",children:c.description})]}),e.jsxs(ce,{className:"space-y-6",children:[c.fields&&c.fields.map(m=>e.jsx(Vu,{field:m,value:a[m.id],onChange:h=>i({...a,[m.id]:h}),memberInfo:s,organizationInfo:n},m.id)),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(J,{className:"bg-blue-600 hover:bg-blue-700",disabled:!0,children:c.submit_button_text||"Submit"})})]})]})}function wd({element:t,memberInfo:s,organizationInfo:n,isFirst:r}){var m,h,p;const i={hero:dye,text_block:DNe,image:ONe,two_column:RNe,cta_button:FNe,image_hero:LNe,wall_of_fame:Gve,form:g=>e.jsx(INe,{...g,memberInfo:s,organizationInfo:n}),text_overlay_image:Qve,table:Xve,banner_carousel:eye,showcase:nye,resources_showcase:aye,button_block:iye,page_header_hero:oye}[t.element_type];if(!i)return e.jsx("div",{className:"bg-amber-50 border border-amber-200 p-4 my-4",children:e.jsxs("p",{className:"text-sm text-amber-900",children:["Unknown element type: ",e.jsx("code",{children:t.element_type})]})});const l=((m=t.settings)==null?void 0:m.paddingTop)??32,o=((h=t.settings)==null?void 0:h.paddingBottom)??32,u={paddingTop:`${r?0:l}px`,paddingBottom:`${o}px`};return((p=t.settings)==null?void 0:p.fullWidth)?e.jsx("div",{className:"w-full",children:e.jsx(i,{element:t,content:t.content,variant:t.style_variant,settings:t.settings,isFirst:r})}):e.jsx("div",{style:u,children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsx(i,{element:t,content:t.content,variant:t.style_variant,settings:t.settings,isFirst:r})})})}function Gq({isAdmin:t}){const[s,n]=b.useState(null),[r,a]=b.useState([]),[i,l]=b.useState(!1),[o,c]=b.useState(null),[u,d]=b.useState(!1),[m,h]=b.useState(!1),p=M1(),g=Yt();b.useEffect(()=>{const F=new URLSearchParams(window.location.search).get("pageId");F?n(F):(te.error("No page ID provided"),p(Pe("IEditPageManagement")))},[]);const{data:v,isLoading:y}=me({queryKey:["iedit-page",s],queryFn:async()=>(await X.entities.IEditPage.list()).find(F=>F.id===s),enabled:!!s}),{data:j,isLoading:w}=me({queryKey:["iedit-page-elements",s],queryFn:()=>X.entities.IEditPageElement.filter({page_id:s},"display_order"),initialData:[],enabled:!!s});b.useEffect(()=>{j&&a(j)},[j]);const N=Le({mutationFn:({id:R,data:F})=>X.entities.IEditPage.update(R,F),onSuccess:()=>{g.invalidateQueries({queryKey:["iedit-page",s]}),te.success("Page updated successfully")}}),_=Le({mutationFn:R=>X.entities.IEditPageElement.create(R),onSuccess:()=>{g.invalidateQueries({queryKey:["iedit-page-elements",s]}),l(!1),te.success("Element added")}}),T=Le({mutationFn:({id:R,data:F})=>X.entities.IEditPageElement.update(R,F),onSuccess:()=>{g.invalidateQueries({queryKey:["iedit-page-elements",s]}),te.success("Element updated")}}),A=Le({mutationFn:R=>X.entities.IEditPageElement.delete(R),onSuccess:()=>{g.invalidateQueries({queryKey:["iedit-page-elements",s]}),te.success("Element deleted")}}),P=async R=>{if(!R.destination)return;const F=Array.from(r),[z]=F.splice(R.source.index,1);F.splice(R.destination.index,0,z),a(F);const V=F.map((U,B)=>({id:U.id,display_order:B}));try{for(const U of V)await X.entities.IEditPageElement.update(U.id,{display_order:U.display_order});g.invalidateQueries({queryKey:["iedit-page-elements",s]})}catch{te.error("Failed to reorder elements"),a(j)}},C=async R=>{const F={page_id:s,element_type:R.element_type,display_order:r.length,content:R.default_content||{},style_variant:R.available_variants&&R.available_variants.length>0?R.available_variants[0]:"default",settings:{}};_.mutate(F)},O=async(R,F)=>{T.mutate({id:R,data:F}),c(null)},M=async R=>{confirm("Are you sure you want to delete this element?")&&A.mutate(R)},k=async R=>{const F={page_id:s,element_type:R.element_type,display_order:R.display_order+1,content:{...R.content},style_variant:R.style_variant,settings:{...R.settings}};_.mutate(F)},E=R=>{N.mutate({id:s,data:R}),d(!1)};return t?y||!v?e.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:e.jsx("div",{className:"text-slate-600",children:"Loading page editor..."})}):e.jsxs("div",{className:"min-h-screen bg-white flex flex-col",children:[e.jsxs("div",{className:"bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(J,{variant:"ghost",size:"sm",onClick:()=>p(Pe("IEditPageManagement")),children:[e.jsx(ll,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-slate-900",children:v.title}),e.jsxs("p",{className:"text-sm text-slate-500",children:["/",v.slug]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(J,{variant:"outline",size:"sm",onClick:()=>d(!0),children:[e.jsx(Qa,{className:"w-4 h-4 mr-2"}),"Settings"]}),e.jsx(J,{variant:m?"default":"outline",size:"sm",onClick:()=>h(!m),className:m?"bg-blue-600 hover:bg-blue-700":"",children:m?e.jsxs(e.Fragment,{children:[e.jsx($1,{className:"w-4 h-4 mr-2"}),"Edit Mode"]}):e.jsxs(e.Fragment,{children:[e.jsx(gr,{className:"w-4 h-4 mr-2"}),"Preview"]})})]})]}),e.jsx("div",{className:"flex-1 flex",children:e.jsx("div",{className:"flex-1 overflow-y-auto",children:m?e.jsxs("div",{className:"bg-white min-h-full",children:[e.jsx("style",{children:`
                  @font-face {
                    font-family: 'Degular Medium';
                    src: url('https://teeone.pythonanywhere.com/font-assets/Degular-Medium.woff') format('woff');
                    font-weight: 500;
                    font-style: normal;
                    font-display: swap;
                  }
                `}),r.length===0?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx(gr,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600 mb-2",children:"Preview Empty"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Add elements to see the preview"}),e.jsx(J,{onClick:()=>h(!1),className:"mt-4 bg-blue-600 hover:bg-blue-700",children:"Exit Preview"})]})}):r.map(R=>e.jsx(wd,{element:R,memberInfo:null,organizationInfo:null},R.id))]}):e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(J,{onClick:()=>l(!0),className:"w-full bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Add Element"]})}),r.length===0?e.jsx(le,{className:"border-2 border-dashed border-slate-300",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx("p",{className:"text-slate-600 mb-4",children:"No elements yet. Start building your page!"}),e.jsxs(J,{onClick:()=>l(!0),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Add First Element"]})]})}):e.jsx(pp,{onDragEnd:P,children:e.jsx(Yc,{droppableId:"elements",children:R=>e.jsxs("div",{...R.droppableProps,ref:R.innerRef,className:"space-y-4",children:[r.map((F,z)=>e.jsx(Gc,{draggableId:F.id,index:z,children:(V,U)=>e.jsx("div",{ref:V.innerRef,...V.draggableProps,...V.dragHandleProps,children:e.jsx(Wve,{element:F,isDragging:U.isDragging,onEdit:()=>c(F),onDelete:()=>M(F.id),onDuplicate:()=>k(F)})})},F.id)),R.placeholder]})})})]})})})}),i&&!m&&e.jsx(Vve,{onClose:()=>l(!1),onSelectTemplate:C}),o&&!m&&e.jsx(hye,{element:o,onClose:()=>c(null),onSave:R=>O(o.id,R)}),u&&v&&e.jsx(mye,{page:v,onClose:()=>d(!1),onSave:E})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"max-w-md",children:e.jsx(ce,{className:"p-12 text-center",children:e.jsx("p",{className:"text-slate-600",children:"You don't have permission to access this page."})})})})}function BNe(){const t="testpage",{data:s,isLoading:n}=me({queryKey:["iedit-public-page",t],queryFn:async()=>(await X.entities.IEditPage.filter({slug:t,status:"published"}))[0]}),{data:r,isLoading:a}=me({queryKey:["iedit-public-elements",s==null?void 0:s.id],queryFn:()=>X.entities.IEditPageElement.filter({page_id:s.id},"display_order"),initialData:[],enabled:!!(s!=null&&s.id)});if(b.useEffect(()=>{if(s&&(document.title=s.meta_title||s.title||"AGCAS",s.meta_description)){let l=document.querySelector('meta[name="description"]');l||(l=document.createElement("meta"),l.name="description",document.head.appendChild(l)),l.content=s.meta_description}},[s]),n||a)return e.jsx(Sa,{currentPageName:"testpage",children:e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"text-slate-600",children:"Loading page..."})})});if(!s)return e.jsx(Sa,{currentPageName:"testpage",children:e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-slate-900 mb-4",children:"Page Not Found"}),e.jsx("p",{className:"text-slate-600",children:"This page hasn't been published yet or doesn't exist."})]})})});const i=s.layout_type==="member"?({children:l})=>e.jsx("div",{className:"min-h-screen",children:l}):Sa;return e.jsx(i,{currentPageName:"testpage",children:e.jsxs("div",{className:"w-full",children:[r.map(l=>e.jsx(wd,{element:l},l.id)),r.length===0&&e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-slate-600",children:"This page has no content yet."})})})]})})}const qNe=[{name:"LinkedIn",key:"linkedin",placeholder:"https://www.linkedin.com/company/..."},{name:"Twitter/X",key:"twitter",placeholder:"https://twitter.com/..."},{name:"Facebook",key:"facebook",placeholder:"https://www.facebook.com/..."},{name:"Instagram",key:"instagram",placeholder:"https://www.instagram.com/..."},{name:"YouTube",key:"youtube",placeholder:"https://www.youtube.com/..."}];function zNe(){const[t,s]=b.useState({linkedin:{enabled:!1,url:""},twitter:{enabled:!1,url:""},facebook:{enabled:!1,url:""},instagram:{enabled:!1,url:""},youtube:{enabled:!1,url:""}}),n=Yt(),{data:r,isLoading:a}=me({queryKey:["social-icons-config"],queryFn:async()=>{const d=(await X.entities.SystemSettings.list()).find(m=>m.setting_key==="social_icons_config");if(d!=null&&d.setting_value)try{return{id:d.id,...JSON.parse(d.setting_value)}}catch(m){return console.error("Failed to parse social icons config:",m),null}return null},staleTime:0,refetchOnMount:!0});b.useEffect(()=>{if(r){const{id:u,...d}=r;s(d)}},[r]);const i=Le({mutationFn:async u=>{const d=JSON.stringify(u);return r!=null&&r.id?await X.entities.SystemSettings.update(r.id,{setting_value:d}):await X.entities.SystemSettings.create({setting_key:"social_icons_config",setting_value:d,description:"Social media icon URLs and visibility for public header"})},onSuccess:()=>{n.invalidateQueries({queryKey:["social-icons-config"]}),te.success("Social icons configuration saved")},onError:u=>{console.error("Failed to save social icons config:",u),te.error("Failed to save configuration")}}),l=u=>{s(d=>({...d,[u]:{...d[u],enabled:!d[u].enabled}}))},o=(u,d)=>{s(m=>({...m,[u]:{...m[u],url:d}}))},c=()=>{i.mutate(t)};return a?e.jsx(le,{className:"border-slate-200 mb-6",children:e.jsx(ce,{className:"p-12 text-center",children:e.jsx(vt,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto"})})}):e.jsxs(le,{className:"border-slate-200 mb-6",children:[e.jsxs(Fe,{children:[e.jsxs(Ue,{className:"flex items-center gap-2",children:[e.jsx(Tc,{className:"w-5 h-5 text-blue-600"}),"Social Media Icons"]}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Configure which social media icons appear in the top navigation and their URLs"})]}),e.jsxs(ce,{className:"space-y-4",children:[qNe.map(({name:u,key:d,placeholder:m})=>{var h,p,g;return e.jsxs("div",{className:"flex items-start gap-4 p-4 bg-slate-50 rounded-lg border border-slate-200",children:[e.jsx("div",{className:"flex items-center pt-2",children:e.jsx(cs,{id:`social-${d}`,checked:((h=t[d])==null?void 0:h.enabled)||!1,onCheckedChange:()=>l(d)})}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(ee,{htmlFor:`url-${d}`,className:"font-medium",children:u}),e.jsx(he,{id:`url-${d}`,value:((p=t[d])==null?void 0:p.url)||"",onChange:v=>o(d,v.target.value),placeholder:m,disabled:!((g=t[d])!=null&&g.enabled)})]})]},d)}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-slate-200",children:e.jsx(J,{onClick:c,disabled:i.isPending,className:"bg-blue-600 hover:bg-blue-700",children:i.isPending?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(un,{className:"w-4 h-4 mr-2"}),"Save Configuration"]})})})]})]})}const wN=[{name:"Calendar",component:Ns},{name:"Building",component:Zo},{name:"Briefcase",component:En},{name:"FileText",component:ns},{name:"Users",component:ws},{name:"Sparkles",component:aa},{name:"Home",component:Zm},{name:"Mail",component:Ms},{name:"Phone",component:k0},{name:"Menu",component:zl},{name:"Navigation",component:UN}],$Ne=[{name:"Home",label:"Home"},{name:"PublicEvents",label:"Public Events"},{name:"PublicAbout",label:"About Us"},{name:"PublicContact",label:"Contact"},{name:"PublicResources",label:"Resources"},{name:"PublicArticles",label:"Articles"},{name:"PublicNews",label:"News"},{name:"JobBoard",label:"Job Board"},{name:"PostJob",label:"Post a Job"},{name:"OrganisationDirectory",label:"Organisation Directory"}];function Yq({isAdmin:t}){var R;const[s,n]=b.useState(null),[r,a]=b.useState(!1),[i,l]=b.useState("all"),[o,c]=b.useState(!1),[u,d]=b.useState({}),m=Yt(),{data:h,isLoading:p}=me({queryKey:["navigation-items"],queryFn:()=>X.entities.NavigationItem.list("display_order"),initialData:[],staleTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0}),{data:g}=me({queryKey:["iedit-pages-published"],queryFn:async()=>(await X.entities.IEditPage.filter({status:"published"})).map(z=>({name:z.slug,label:z.title})),initialData:[]}),v=b.useMemo(()=>[...$Ne,...g].sort((F,z)=>F.label.localeCompare(z.label)),[g]),y=Le({mutationFn:F=>X.entities.NavigationItem.create(F),onSuccess:()=>{m.invalidateQueries({queryKey:["navigation-items"]}),a(!1),n(null),te.success("Navigation item created")},onError:F=>{te.error("Failed to create item: "+F.message)}}),j=Le({mutationFn:({id:F,data:z})=>X.entities.NavigationItem.update(F,z),onSuccess:()=>{m.invalidateQueries({queryKey:["navigation-items"]}),a(!1),n(null),te.success("Navigation item updated")},onError:F=>{te.error("Failed to update item: "+F.message)}}),w=Le({mutationFn:async F=>{const z=async V=>{const U=h.filter(B=>B.parent_id===V);for(const B of U)await z(B.id);await X.entities.NavigationItem.delete(V)};await z(F)},onSuccess:()=>{m.invalidateQueries({queryKey:["navigation-items"]}),te.success("Navigation item deleted")},onError:F=>{te.error("Failed to delete item: "+F.message)}}),N=b.useMemo(()=>{const F=z=>h.filter(V=>V.parent_id===z&&V.is_active).sort((V,U)=>(V.display_order||0)-(U.display_order||0)).map(V=>({...V,children:F(V.id)}));return F(null)},[h]),_=b.useMemo(()=>i==="all"?N:N.filter(F=>F.location===i),[N,i]),T=(F="main_nav",z=null)=>{n({title:"",url:"",link_type:"internal",location:F,parent_id:z,display_order:h.filter(V=>V.location===F&&V.parent_id===z).length,is_active:!0,open_in_new_tab:!1,icon:"",description:"",highlight_style:"none"}),a(!0)},A=F=>{n({...F}),a(!0)},P=()=>{if(!s.title||!s.url){te.error("Title and URL are required");return}if(s.id){const{id:F,created_date:z,updated_date:V,created_by:U,...B}=s;j.mutate({id:F,data:B})}else y.mutate(s)},C=F=>{const z=B=>{const $=h.filter(L=>L.parent_id===B);return $.length+$.reduce((L,I)=>L+z(I.id),0)},V=z(F.id),U=V>0?`Delete "${F.title}" and its ${V} sub-item(s)?`:`Delete "${F.title}"?`;confirm(U)&&w.mutate(F.id)},O=F=>{n({...s,icon:F}),c(!1)},M=async(F,z)=>{const V=h.find(W=>W.id===F);if(!V)return;const U=h.filter(W=>W.location===V.location&&W.parent_id===V.parent_id).sort((W,q)=>W.display_order===q.display_order?new Date(W.created_date)-new Date(q.created_date):W.display_order-q.display_order),B=U.findIndex(W=>W.id===F),$=z==="up"?B-1:B+1;if($<0||$>=U.length)return;const L=[...U],[I]=L.splice(B,1);L.splice($,0,I);for(let W=0;W<L.length;W++)await X.entities.NavigationItem.update(L[W].id,{display_order:W});await m.invalidateQueries({queryKey:["navigation-items"]}),te.success("Navigation order updated")},k=F=>{d(z=>({...z,[F]:!z[F]}))},E=(F,z=0)=>F.map(V=>{var I;const U=(I=wN.find(W=>W.name===V.icon))==null?void 0:I.component,B=V.children&&V.children.length>0,$=u[V.id],L=z>0?`ml-${Math.min(z*8,16)}`:"";return e.jsxs("div",{className:L,children:[e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-white border border-slate-200 rounded-lg hover:border-blue-400 transition-colors mb-2",children:[B&&e.jsx("button",{onClick:()=>k(V.id),className:"p-1 hover:bg-slate-100 rounded",children:$?e.jsx(Or,{className:"w-4 h-4"}):e.jsx(js,{className:"w-4 h-4"})}),!B&&e.jsx("div",{className:"w-6"}),U&&e.jsx(U,{className:"w-4 h-4 text-slate-600"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-slate-900",children:V.title}),e.jsx(ye,{className:"text-xs",variant:V.location==="top_nav"?"default":"secondary",children:V.location==="top_nav"?"Top Bar":"Main Nav"}),V.highlight_style==="gradient_button"&&e.jsx(ye,{className:"text-xs bg-gradient-to-r from-purple-500 to-pink-500 text-white",children:"Featured"}),B&&e.jsxs(ye,{variant:"outline",className:"text-xs",children:[V.children.length," sub-item",V.children.length>1?"s":""]})]}),e.jsxs("div",{className:"text-sm text-slate-500 truncate",children:[V.link_type==="external"?" ":" ",V.url]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(J,{variant:"ghost",size:"sm",onClick:()=>T(V.location,V.id),className:"h-8 px-2",title:"Add submenu item",children:e.jsx(Pt,{className:"w-4 h-4"})}),e.jsx(J,{variant:"ghost",size:"sm",onClick:()=>M(V.id,"up"),className:"h-8 w-8 p-0",children:""}),e.jsx(J,{variant:"ghost",size:"sm",onClick:()=>M(V.id,"down"),className:"h-8 w-8 p-0",children:""}),e.jsx(J,{variant:"ghost",size:"sm",onClick:()=>A(V),className:"h-8 w-8 p-0",children:e.jsx(As,{className:"w-4 h-4"})}),e.jsx(J,{variant:"ghost",size:"sm",onClick:()=>C(V),className:"h-8 w-8 p-0 text-red-600",children:e.jsx(os,{className:"w-4 h-4"})})]})]}),B&&$&&e.jsx("div",{className:"ml-8 space-y-2 mb-2",children:E(V.children,z+1)})]},V.id)});return t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Navigation Management"}),e.jsx("p",{className:"text-slate-600",children:"Manage public header navigation items and create mega-menus"})]})}),e.jsx(le,{className:"border-blue-200 bg-blue-50 mb-6",children:e.jsx(ce,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(aa,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-1",children:"Dynamic Navigation"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Create custom navigation items for the public header. Static items (Login/Logout, Member Area, Join Us button) are managed separately and will always appear in their designated positions."})]})]})})}),e.jsx(zNe,{}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsxs(Ke,{value:i,onValueChange:l,children:[e.jsx(Ve,{className:"w-48",children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"all",children:"All Locations"}),e.jsx(re,{value:"top_nav",children:"Top Navigation Bar"}),e.jsx(re,{value:"main_nav",children:"Main Navigation Bar"})]})]}),e.jsxs("div",{className:"flex gap-2 ml-auto",children:[e.jsxs(J,{onClick:()=>T("top_nav"),variant:"outline",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Add Top Nav Item"]}),e.jsxs(J,{onClick:()=>T("main_nav"),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Add Main Nav Item"]})]})]}),p?e.jsx(le,{children:e.jsx(ce,{className:"p-12 text-center",children:e.jsx("p",{className:"text-slate-600",children:"Loading navigation items..."})})}):_.length===0?e.jsx(le,{children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(UN,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No Navigation Items"}),e.jsx("p",{className:"text-slate-600 mb-6",children:i==="all"?"Create your first navigation item to get started":`No items in ${i==="top_nav"?"Top Navigation":"Main Navigation"}`}),e.jsxs(J,{onClick:()=>T("main_nav"),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Create First Item"]})]})}):e.jsx(le,{children:e.jsx(ce,{className:"p-6",children:e.jsx("div",{className:"space-y-3",children:E(_)})})}),e.jsx(Ct,{open:r,onOpenChange:a,children:e.jsxs(Nt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(kt,{children:e.jsx(Et,{children:s!=null&&s.id?"Edit Navigation Item":"Create Navigation Item"})}),s&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"title",children:"Title *"}),e.jsx(he,{id:"title",value:s.title,onChange:F=>n({...s,title:F.target.value}),placeholder:"e.g., About Us"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"link_type",children:"Link Type"}),e.jsxs(Ke,{value:s.link_type,onValueChange:F=>n({...s,link_type:F}),children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"internal",children:"Internal Page"}),e.jsx(re,{value:"external",children:"External URL"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"location",children:"Navigation Bar"}),e.jsxs(Ke,{value:s.location,onValueChange:F=>n({...s,location:F}),children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"top_nav",children:"Top Navigation Bar"}),e.jsx(re,{value:"main_nav",children:"Main Navigation Bar"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"url",children:s.link_type==="internal"?"Page *":"URL *"}),s.link_type==="internal"?e.jsxs(Ke,{value:s.url,onValueChange:F=>n({...s,url:F}),children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:"Select a page..."})}),e.jsx(We,{children:v.map(F=>e.jsx(re,{value:F.name,children:F.label},F.name))})]}):e.jsx(he,{id:"url",value:s.url,onChange:F=>n({...s,url:F.target.value}),placeholder:"e.g., https://example.com"}),e.jsx("p",{className:"text-xs text-slate-500",children:s.link_type==="internal"?"Select from available public pages":"Enter the full URL including https://"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"parent",children:"Parent Item (for sub-menu)"}),e.jsxs(Ke,{value:s.parent_id||"none",onValueChange:F=>n({...s,parent_id:F==="none"?null:F}),children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"none",children:"None (Top Level)"}),h.filter(F=>{if(F.id===s.id)return!1;const z=(V,U)=>V===U?!0:h.filter($=>$.parent_id===V).some($=>z($.id,U));return s.id&&z(s.id,F.id)?!1:F.location===s.location}).sort((F,z)=>{const V=h.filter(B=>B.parent_id===F.id).length>0?0:1,U=h.filter(B=>B.parent_id===z.id).length>0?0:1;return V!==U?V-U:F.title.localeCompare(z.title)}).map(F=>{const z=V=>{var B;const U=(B=h.find($=>$.id===V))==null?void 0:B.parent_id;return U?(h.find($=>$.id===U),z(U)+" "):""};return e.jsxs(re,{value:F.id,children:[z(F.parent_id),F.title]},F.id)})]})]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Create nested sub-menus by selecting a parent item (supports multiple levels)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(Gt,{id:"description",value:s.description||"",onChange:F=>n({...s,description:F.target.value}),placeholder:"Optional description shown in mega-menu",rows:2})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Icon (Optional)"}),e.jsx(J,{type:"button",variant:"outline",className:"w-full justify-start",onClick:()=>c(!0),children:s.icon?e.jsxs(e.Fragment,{children:[Be.createElement(((R=wN.find(F=>F.name===s.icon))==null?void 0:R.component)||UN,{className:"w-4 h-4 mr-2"}),s.icon]}):"Select an icon..."}),s.icon&&e.jsxs(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>n({...s,icon:""}),className:"w-full text-slate-600",children:[e.jsx(_s,{className:"w-3 h-3 mr-1"}),"Clear Icon"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"highlight",children:"Highlight Style"}),e.jsxs(Ke,{value:s.highlight_style,onValueChange:F=>n({...s,highlight_style:F}),children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"none",children:"None"}),e.jsx(re,{value:"gradient_button",children:"Gradient Button"})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(cs,{id:"is_active",checked:s.is_active,onCheckedChange:F=>n({...s,is_active:F})}),e.jsx(ee,{htmlFor:"is_active",className:"cursor-pointer",children:"Active (Visible on site)"})]}),s.link_type==="external"&&e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(cs,{id:"new_tab",checked:s.open_in_new_tab,onCheckedChange:F=>n({...s,open_in_new_tab:F})}),e.jsx(ee,{htmlFor:"new_tab",className:"cursor-pointer",children:"Open in new tab"})]})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e.jsx(J,{onClick:P,disabled:y.isPending||j.isPending,className:"bg-blue-600 hover:bg-blue-700",children:s!=null&&s.id?"Update Item":"Create Item"})]})]})}),e.jsx(Ct,{open:o,onOpenChange:c,children:e.jsxs(Nt,{className:"max-w-2xl",children:[e.jsx(kt,{children:e.jsx(Et,{children:"Select an Icon"})}),e.jsx("div",{className:"grid grid-cols-4 gap-4 py-4",children:wN.map(({name:F,component:z})=>e.jsxs("button",{onClick:()=>O(F),className:`flex flex-col items-center gap-2 p-4 rounded-lg border-2 transition-all hover:border-blue-500 hover:bg-blue-50 ${(s==null?void 0:s.icon)===F?"border-blue-600 bg-blue-50":"border-slate-200"}`,children:[e.jsx(z,{className:"w-8 h-8 text-slate-700"}),e.jsx("span",{className:"text-xs text-slate-600 text-center",children:F})]},F))}),e.jsx(zt,{children:e.jsx(J,{variant:"outline",onClick:()=>c(!1),children:"Cancel"})})]})})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"border-red-200",children:e.jsx(ce,{className:"p-8 text-center",children:e.jsx("p",{className:"text-red-600",children:"You need administrator privileges to access this page."})})})})}function Qq({memberInfo:t,organizationInfo:s,reloadMemberInfo:n,isFeatureExcluded:r}){const[a,i]=b.useState([]),[l,o]=b.useState(""),[c,u]=b.useState(!1),[d,m]=b.useState(!1),[h,p]=b.useState({}),[g,v]=b.useState(""),[y,j]=b.useState(""),[w,N]=b.useState(""),[_,T]=b.useState(""),[A,P]=b.useState(""),[C,O]=b.useState(""),[M,k]=b.useState(!1),[E,R]=b.useState(!1),[F,z]=b.useState(!1),[V,U]=b.useState(!0),[B,$]=b.useState(""),[L,I]=b.useState(!1),[W,q]=b.useState(!1),Z=Yt(),{data:Q,isLoading:Y}=me({queryKey:["currentUser"],queryFn:async()=>await X.auth.me(),staleTime:30*1e3}),{data:K,isLoading:ae}=me({queryKey:["memberRecord",t==null?void 0:t.email],queryFn:async()=>(await X.entities.Member.list()).find(bt=>bt.email===(t==null?void 0:t.email)),enabled:!!(t!=null&&t.email),staleTime:30*1e3}),{data:se,isLoading:de}=me({queryKey:["engagementStats",K==null?void 0:K.id],queryFn:async()=>{if(!(K!=null&&K.id))return{eventsAttended:0,articlesWritten:0,jobsPosted:0};const[Je,bt,hs]=await Promise.all([X.entities.Booking.list(),X.entities.BlogPost.list(),X.entities.JobPosting.list()]),Ne=Je.filter(Ze=>Ze.member_id===K.id&&Ze.status==="confirmed").length,ut=bt.filter(Ze=>Ze.author_id===K.id&&Ze.status==="published").length,Te=hs.filter(Ze=>Ze.posted_by_member_id===K.id).length;return{eventsAttended:Ne,articlesWritten:ut,jobsPosted:Te}},enabled:!!(K!=null&&K.id),staleTime:60*1e3}),{data:ue=[],isLoading:oe}=me({queryKey:["awards"],queryFn:async()=>(await X.entities.Award.list()).filter(bt=>bt.is_active).sort((bt,hs)=>(bt.level||0)-(hs.level||0)),staleTime:300*1e3}),{data:pe=[],isLoading:je}=me({queryKey:["myOfflineAwardAssignments",K==null?void 0:K.id],queryFn:async()=>K!=null&&K.id?(await X.entities.OfflineAwardAssignment.list()).filter(bt=>bt.member_id===K.id):[],enabled:!!(K!=null&&K.id),staleTime:60*1e3}),{data:we=[]}=me({queryKey:["awardSublevels"],queryFn:async()=>await X.entities.AwardSublevel.list(),staleTime:300*1e3}),{data:qe=[],isLoading:ze}=me({queryKey:["myGroupAssignments",K==null?void 0:K.id],queryFn:async()=>K!=null&&K.id?(await X.entities.MemberGroupAssignment.list()).filter(bt=>bt.member_id===K.id):[],enabled:!!(K!=null&&K.id),staleTime:60*1e3}),{data:Ee=[],isLoading:Ce}=me({queryKey:["memberGroups"],queryFn:async()=>(await X.entities.MemberGroup.list()).filter(bt=>bt.is_active),enabled:qe.length>0,staleTime:60*1e3}),{data:Ge=[],isLoading:Ye}=me({queryKey:["offlineAwards"],queryFn:async()=>(await X.entities.OfflineAward.list()).filter(bt=>bt.is_active),staleTime:300*1e3}),{data:De=[]}=me({queryKey:["awardClassifications"],queryFn:async()=>await X.entities.AwardClassification.list(),staleTime:300*1e3}),{data:it=[],isLoading:Se}=me({queryKey:["resourceCategories"],queryFn:async()=>(await X.entities.ResourceCategory.list()).filter(bt=>bt.is_active).sort((bt,hs)=>(bt.display_order||0)-(hs.display_order||0)),staleTime:300*1e3,refetchOnWindowFocus:!1}),at=b.useMemo(()=>!se||!ue||ue.length===0?[]:ue.filter(Je=>(Je.award_type==="events_attended"?se.eventsAttended:Je.award_type==="articles_published"?se.articlesWritten:Je.award_type==="jobs_posted"?se.jobsPosted:0)>=Je.threshold),[se,ue]),_e=b.useMemo(()=>!pe||pe.length===0||!Ge?[]:pe.map(Je=>{const bt=Ge.find(Ne=>Ne.id===Je.offline_award_id);if(!bt)return null;const hs=Je.sublevel_id?we.find(Ne=>Ne.id===Je.sublevel_id):null;return{...bt,sublevel:hs}}).filter(Boolean).sort((Je,bt)=>(Je.level||0)-(bt.level||0)),[pe,Ge,we]);b.useEffect(()=>{K&&(v(K.first_name||""),j(K.last_name||""),N(K.job_title||""),T(K.biography||""),P(K.profile_photo_url||""),O(K.linkedin_url||""),U(K.show_in_directory!==!1))},[K]),b.useEffect(()=>{s&&$(s.logo_url||"")},[s]),b.useEffect(()=>{if(Q!=null&&Q.preferences){const Je=Q.preferences;Je.selectedSubcategories&&i(Je.selectedSubcategories),Je.expandedCategories&&p(Je.expandedCategories)}},[Q]);const $e=Le({mutationFn:async Je=>await X.auth.updateMe({preferences:Je}),onSuccess:()=>{Z.invalidateQueries({queryKey:["currentUser"]}),te.success("Preferences saved successfully"),u(!1),m(!1)},onError:Je=>{te.error("Failed to save preferences"),m(!1)}}),nt=Le({mutationFn:async Je=>await X.entities.Member.update(K.id,Je),onSuccess:()=>{Z.invalidateQueries({queryKey:["memberRecord"]}),Z.invalidateQueries({queryKey:["all-members-directory"]}),te.success("Profile updated successfully"),R(!1),z(!1),n&&n()},onError:Je=>{te.error("Failed to update profile"),z(!1)}}),dt=Le({mutationFn:async Je=>await X.entities.Organization.update(s.id,{logo_url:Je}),onSuccess:()=>{Z.invalidateQueries({queryKey:["organizations"]}),te.success("Organization logo updated successfully"),q(!1)},onError:Je=>{te.error("Failed to update organization logo")}}),lt=async Je=>{var hs;const bt=(hs=Je.target.files)==null?void 0:hs[0];if(bt){if(!bt.type.startsWith("image/")){te.error("Please select an image file");return}if(bt.size>5*1024*1024){te.error("Image must be less than 5MB");return}k(!0);try{const Ne=await X.integrations.Core.UploadFile({file:bt});P(Ne.file_url),R(!0),te.success("Photo uploaded successfully")}catch{te.error("Failed to upload photo")}finally{k(!1)}}},Rt=async Je=>{var hs;const bt=(hs=Je.target.files)==null?void 0:hs[0];if(bt){if(!bt.type.startsWith("image/")){te.error("Please select an image file");return}if(bt.size>5*1024*1024){te.error("Image must be less than 5MB");return}I(!0);try{const Ne=await X.integrations.Core.UploadFile({file:bt});$(Ne.file_url),q(!0),te.success("Logo uploaded successfully")}catch{te.error("Failed to upload logo")}finally{I(!1)}}},es=async()=>{dt.mutate(B)},Bs=async()=>{m(!0);const Je={selectedSubcategories:a,expandedCategories:h};$e.mutate(Je)},Ss=async()=>{if(_.trim().split(/\s+/).filter(hs=>hs.length>0).length>500){te.error("Biography must be 500 words or less");return}z(!0);const bt={first_name:g,last_name:y,job_title:w,biography:_,profile_photo_url:A,linkedin_url:C,show_in_directory:V};nt.mutate(bt)},on=()=>{i([]),p({}),o(""),u(!0)},Jt=Je=>{i(bt=>{const hs=bt.includes(Je)?bt.filter(Ne=>Ne!==Je):[...bt,Je];return u(!0),hs})};b.useEffect(()=>{if(K){const Je=g!==(K.first_name||"")||y!==(K.last_name||"")||w!==(K.job_title||"")||_!==(K.biography||"")||A!==(K.profile_photo_url||"")||C!==(K.linkedin_url||"")||V!==(K.show_in_directory!==!1);R(Je)}},[g,y,w,_,A,C,V,K]),b.useEffect(()=>{if(s){const Je=B!==(s.logo_url||"");q(Je)}},[B,s]);const fn=it.filter(Je=>{if(!l)return!0;const bt=l.toLowerCase();return Je.name.toLowerCase().includes(bt)||Je.subcategories&&Je.subcategories.some(hs=>hs.toLowerCase().includes(bt))}),Ds=()=>_.trim().split(/\s+/).filter(Je=>Je.length>0).length,jr=Y||Se||ae||je||Ye||ze,Hn=!r||!r("edit_professional_biography");return jr?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(vt,{className:"w-8 h-8 animate-spin text-blue-600"})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Preferences"}),e.jsx("p",{className:"text-slate-600",children:"Manage your profile and content preferences"})]}),s&&!(t!=null&&t.is_team_member)&&e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsxs(Fe,{children:[e.jsx(Ue,{children:"Organization Logo"}),e.jsx(Es,{children:"Upload your organization's logo for the directory"})]}),e.jsxs(ce,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Logo"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-24 h-24 rounded-lg bg-slate-100 flex items-center justify-center overflow-hidden border-2 border-slate-200",children:B?e.jsx("img",{src:B,alt:"Organization Logo",className:"w-full h-full object-contain"}):e.jsx(Na,{className:"w-12 h-12 text-slate-400"})}),e.jsxs("div",{children:[e.jsx("input",{type:"file",id:"org-logo-upload",accept:"image/*",onChange:Rt,className:"hidden"}),e.jsx(J,{type:"button",variant:"outline",disabled:L,onClick:()=>document.getElementById("org-logo-upload").click(),children:L?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Gs,{className:"w-4 h-4 mr-2"}),"Upload Logo"]})}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"JPG, PNG or GIF. Max 5MB."})]})]})]}),W&&e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(J,{onClick:es,disabled:dt.isPending,className:"bg-blue-600 hover:bg-blue-700",children:dt.isPending?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(un,{className:"w-4 h-4 mr-2"}),"Save Logo"]})})})]})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsxs(Fe,{children:[e.jsx(Ue,{children:"Profile Information"}),e.jsx(Es,{children:"Update your personal details"})]}),e.jsxs(ce,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Profile Photo"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-slate-100 flex items-center justify-center overflow-hidden border-2 border-slate-200",children:A?e.jsx("img",{src:A,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx(Xs,{className:"w-12 h-12 text-slate-400"})}),e.jsxs("div",{children:[e.jsx("input",{type:"file",id:"photo-upload",accept:"image/*",onChange:lt,className:"hidden"}),e.jsx(J,{type:"button",variant:"outline",disabled:M,onClick:()=>document.getElementById("photo-upload").click(),children:M?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Gs,{className:"w-4 h-4 mr-2"}),"Upload Photo"]})}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"JPG, PNG or GIF. Max 5MB."})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"firstName",children:"First Name"}),e.jsx(he,{id:"firstName",value:g,onChange:Je=>v(Je.target.value),placeholder:"Enter your first name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"lastName",children:"Last Name"}),e.jsx(he,{id:"lastName",value:y,onChange:Je=>j(Je.target.value),placeholder:"Enter your last name"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"jobTitle",children:"Job Title"}),e.jsx(he,{id:"jobTitle",value:w,onChange:Je=>N(Je.target.value),placeholder:"e.g., Careers Adviser"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"linkedinUrl",children:"LinkedIn Profile URL"}),e.jsx(he,{id:"linkedinUrl",type:"url",value:C,onChange:Je=>O(Je.target.value),placeholder:"https://www.linkedin.com/in/your-profile"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg border border-slate-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(ee,{htmlFor:"show-in-directory",className:"cursor-pointer",children:"Show in Member Directory"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Allow other members to see your profile in the member directory"})]}),e.jsx(cs,{id:"show-in-directory",checked:V,onCheckedChange:U})]}),(K==null?void 0:K.created_date)&&e.jsxs("div",{className:"flex items-center gap-2 p-4 bg-slate-50 rounded-lg border border-slate-200",children:[e.jsx(iK,{className:"w-5 h-5 text-slate-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600",children:"Member since"}),e.jsx("p",{className:"text-sm font-semibold text-slate-900",children:Mt(new Date(K.created_date),"dd MMMM yyyy")})]})]}),E&&e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(J,{onClick:Ss,disabled:F,className:"bg-blue-600 hover:bg-blue-700",children:F?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(un,{className:"w-4 h-4 mr-2"}),"Save Profile"]})})})]})]}),Hn&&e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsxs(Fe,{children:[e.jsx(Ue,{children:"Engagement"}),e.jsx(Es,{children:"Your activity and contributions to the community"})]}),e.jsxs(ce,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4 border border-blue-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center",children:e.jsx(Ns,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:de?"-":(se==null?void 0:se.eventsAttended)||0}),e.jsx("p",{className:"text-xs text-blue-700",children:"Events Attended"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4 border border-purple-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-600 flex items-center justify-center",children:e.jsx(ns,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:de?"-":(se==null?void 0:se.articlesWritten)||0}),e.jsx("p",{className:"text-xs text-purple-700",children:"Articles Published"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4 border border-green-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-green-600 flex items-center justify-center",children:e.jsx(En,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-green-900",children:de?"-":(se==null?void 0:se.jobsPosted)||0}),e.jsx("p",{className:"text-xs text-green-700",children:"Jobs Posted"})]})]})})]}),qe.length>0&&e.jsxs("div",{className:"pt-4 border-t border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ws,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Your Groups"}),e.jsx(ye,{variant:"secondary",children:qe.length})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:qe.map(Je=>{const bt=Ee.find(hs=>hs.id===Je.group_id);return bt?e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg border border-blue-200",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center flex-shrink-0",children:e.jsx(ws,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900 truncate",children:bt.name}),e.jsx("p",{className:"text-xs text-blue-700 font-medium",children:Je.group_role}),bt.description&&e.jsx("p",{className:"text-xs text-slate-600 mt-1 line-clamp-2",children:bt.description})]})]},Je.id):null})})]}),(at.length>0||_e.length>0)&&e.jsxs("div",{className:"pt-4 border-t border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ln,{className:"w-5 h-5 text-amber-600"}),e.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Your Awards"}),e.jsx(ye,{variant:"secondary",children:at.length+_e.length})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:[at.map(Je=>{const bt=Je.classification_id?De.find(hs=>hs.id===Je.classification_id):null;return e.jsxs("div",{className:"flex flex-col items-center p-3 bg-gradient-to-br from-amber-50 to-amber-100 rounded-lg border border-amber-200 hover:shadow-md transition-shadow relative",children:[bt&&e.jsx(ye,{variant:"secondary",className:"absolute top-1 right-1 text-[10px] px-1.5 py-0.5",children:bt.name}),Je.image_url?e.jsx("img",{src:Je.image_url,alt:Je.name,className:"w-12 h-12 object-contain mb-2"}):e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-400 to-amber-600 rounded-full flex items-center justify-center mb-2",children:e.jsx(Ln,{className:"w-6 h-6 text-white"})}),e.jsx("p",{className:"text-xs font-semibold text-center text-slate-900 line-clamp-2",children:Je.name}),Je.description&&e.jsx("p",{className:"text-xs text-slate-600 text-center mt-1 line-clamp-2",children:Je.description})]},`online-${Je.id}`)}),_e.map((Je,bt)=>{var Ne;const hs=Je.classification_id?De.find(ut=>ut.id===Je.classification_id):null;return e.jsxs("div",{className:"flex flex-col items-center p-3 bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg border border-purple-200 hover:shadow-md transition-shadow relative",children:[hs&&e.jsx(ye,{variant:"secondary",className:"absolute top-1 right-1 text-[10px] px-1.5 py-0.5",children:hs.name}),(Ne=Je.sublevel)!=null&&Ne.image_url?e.jsx("img",{src:Je.sublevel.image_url,alt:Je.sublevel.name,className:"w-12 h-12 object-contain mb-2"}):Je.image_url?e.jsx("img",{src:Je.image_url,alt:Je.name,className:"w-12 h-12 object-contain mb-2"}):e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-400 to-purple-600 rounded-full flex items-center justify-center mb-2",children:e.jsx(Ln,{className:"w-6 h-6 text-white"})}),e.jsx("p",{className:"text-xs font-semibold text-center text-slate-900 line-clamp-2",children:Je.name}),Je.sublevel&&e.jsx(ye,{className:"mt-1 bg-purple-600 text-white text-[10px]",children:Je.sublevel.name}),Je.period_text&&e.jsx("p",{className:"text-xs text-purple-700 text-center mt-1 font-medium",children:Je.period_text}),Je.description&&e.jsx("p",{className:"text-xs text-slate-600 text-center mt-1 line-clamp-2",children:Je.description})]},`offline-${Je.id}-${bt}`)})]})]}),e.jsxs("div",{className:"space-y-2 pt-4 border-t border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ee,{htmlFor:"biography",children:"Professional Biography"}),e.jsxs("span",{className:`text-xs ${Ds()>500?"text-red-600 font-semibold":"text-slate-500"}`,children:[Ds()," / 500 words"]})]}),e.jsx(Gt,{id:"biography",value:_,onChange:Je=>T(Je.target.value),placeholder:"Share your professional background, expertise, and experience (max 500 words)",className:"min-h-[200px]"}),e.jsx("p",{className:"text-xs text-slate-500",children:"This biography will be displayed on your published articles"})]}),E&&e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(J,{onClick:Ss,disabled:F||Ds()>500,className:"bg-blue-600 hover:bg-blue-700",children:F?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(un,{className:"w-4 h-4 mr-2"}),"Save Biography"]})})})]})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsxs(Fe,{children:[e.jsx(Ue,{children:"Resource Interests"}),e.jsx(Es,{children:"Select topics you're interested in to personalize your experience"})]}),e.jsxs(ce,{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-4",children:"Browse Topics"}),e.jsx("div",{className:"border border-slate-200 rounded-lg bg-slate-50 p-4 max-h-[600px] overflow-y-auto",children:e.jsx(jS,{categories:fn,selectedSubcategories:a,onSubcategoryToggle:Jt,searchQuery:l,onSearchChange:o,onClearSearch:()=>o("")})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Your Interests"}),a.length>0&&e.jsx(J,{variant:"ghost",size:"sm",onClick:on,className:"text-blue-600 hover:text-blue-700",children:"Clear All"})]}),a.length===0?e.jsx("div",{className:"border border-dashed border-slate-300 rounded-lg p-8 text-center",children:e.jsx("p",{className:"text-slate-500 text-sm",children:"No interests selected yet. Browse topics on the left to get started."})}):e.jsx("div",{className:"border border-slate-200 rounded-lg bg-white p-4 space-y-2 max-h-[600px] overflow-y-auto",children:a.map(Je=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:[e.jsx("span",{className:"text-sm text-slate-900",children:Je}),e.jsx("button",{onClick:()=>Jt(Je),className:"text-slate-500 hover:text-slate-700",children:e.jsx(_s,{className:"w-4 h-4"})})]},Je))})]})]}),c&&e.jsx("div",{className:"flex justify-end pt-4 border-t border-slate-200",children:e.jsx(J,{onClick:Bs,disabled:d,className:"bg-blue-600 hover:bg-blue-700",children:d?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(un,{className:"w-4 h-4 mr-2"}),"Save Preferences"]})})})]})]})]})})}function Jq({memberInfo:t}){const[s,n]=b.useState(""),[r,a]=b.useState("all"),[i,l]=b.useState([]),[o,c]=b.useState("newest"),{data:u,isLoading:d}=me({queryKey:["article-display-name-setting"],queryFn:async()=>{const k=(await X.entities.SystemSettings.list()).find(E=>E.setting_key==="article_display_name");return(k==null?void 0:k.setting_value)||"Articles"},staleTime:0}),m=typeof u=="string"&&u||"Articles",h=m.endsWith("s")?m.slice(0,-1):m,{data:p=[],isLoading:g}=me({queryKey:["my-articles",t==null?void 0:t.email],queryFn:async()=>{const M=await X.entities.BlogPost.list("-created_date"),E=(await X.entities.Member.list()).find(R=>R.email===(t==null?void 0:t.email));return M.filter(R=>R.author_id===(E==null?void 0:E.id))},enabled:!!t,staleTime:300*1e3,refetchOnWindowFocus:!1}),{data:v=[],isLoading:y}=me({queryKey:["resourceCategories-articles"],queryFn:async()=>(await X.entities.ResourceCategory.list()).filter(E=>E.is_active&&E.applies_to_content_types&&E.applies_to_content_types.includes("Articles")).sort((E,R)=>(E.display_order||0)-(R.display_order||0)),staleTime:300*1e3,refetchOnWindowFocus:!1}),{data:j=[]}=me({queryKey:["article-button-styles"],queryFn:async()=>(await X.entities.ButtonStyle.list()).filter(k=>k.is_active&&k.card_type==="article"),staleTime:300*1e3,refetchOnWindowFocus:!1}),{data:w=[]}=me({queryKey:["all-article-views"],queryFn:async()=>await X.entities.ArticleView.list(),staleTime:300*1e3,refetchOnWindowFocus:!1}),{data:N=[]}=me({queryKey:["all-article-reactions"],queryFn:async()=>await X.entities.ArticleReaction.list(),staleTime:300*1e3,refetchOnWindowFocus:!1}),_=b.useMemo(()=>{const M={};return p.forEach(k=>{M[k.id]={viewCount:w.filter(E=>E.article_id===k.id).length,likeCount:N.filter(E=>E.article_id===k.id&&E.reaction_type==="up").length}}),M},[p,w,N]),T=b.useMemo(()=>p.filter(M=>{var F,z,V;const k=((F=M.title)==null?void 0:F.toLowerCase().includes(s.toLowerCase()))||((z=M.summary)==null?void 0:z.toLowerCase().includes(s.toLowerCase()))||((V=M.tags)==null?void 0:V.some(U=>U.toLowerCase().includes(s.toLowerCase()))),E=r==="all"||M.status===r,R=i.length===0||M.subcategories&&M.subcategories.some(U=>i.includes(U));return k&&E&&R}),[p,s,r,i]),A=b.useMemo(()=>{const M=[...T];switch(o){case"newest":M.sort((k,E)=>new Date(E.created_date)-new Date(k.created_date));break;case"oldest":M.sort((k,E)=>new Date(k.created_date)-new Date(E.created_date));break;case"title-asc":M.sort((k,E)=>k.title.localeCompare(E.title));break;case"title-desc":M.sort((k,E)=>E.title.localeCompare(k.title));break;case"most-viewed":M.sort((k,E)=>{var R,F;return(((R=_[E.id])==null?void 0:R.viewCount)||0)-(((F=_[k.id])==null?void 0:F.viewCount)||0)});break;case"most-liked":M.sort((k,E)=>{var R,F;return(((R=_[E.id])==null?void 0:R.likeCount)||0)-(((F=_[k.id])==null?void 0:F.likeCount)||0)});break}return M},[T,o,_]),P=M=>{l(k=>k.includes(M)?k.filter(E=>E!==M):[...k,M])},C=M=>{switch(M){case"published":return"bg-green-100 text-green-700 border-green-200";case"draft":return"bg-amber-100 text-amber-700 border-amber-200";case"archived":return"bg-slate-100 text-slate-700 border-slate-200";default:return"bg-slate-100 text-slate-700 border-slate-200"}};return!t||(g||y||d)?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-slate-600",children:"Loading..."})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:["My ",m]}),e.jsx("p",{className:"text-slate-600",children:"Create and manage your content"})]}),e.jsx(Ht,{to:Pe("ArticleEditor"),children:e.jsxs(J,{className:"bg-blue-600 hover:bg-blue-700 gap-2",children:[e.jsx(Pt,{className:"w-4 h-4"}),"New ",h]})})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("div",{className:"lg:w-64 flex-shrink-0",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 sticky top-8",children:[e.jsx(gd,{categories:v,selectedSubcategories:i,onSubcategoryToggle:P,searchQuery:s,onSearchChange:n,onClearSearch:()=>n(""),isLoading:!1,displayName:m}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Status"}),e.jsx("div",{className:"flex flex-col gap-2",children:["all","draft","published","archived"].map(M=>e.jsx(J,{variant:r===M?"default":"outline",size:"sm",onClick:()=>a(M),className:"capitalize justify-start",children:M},M))})]})]})}),e.jsx("div",{className:"flex-1",children:A.length===0?e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(Yl,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:s||r!=="all"||i.length>0?`No ${m.toLowerCase()} found`:`No ${m.toLowerCase()} yet`}),e.jsx("p",{className:"text-slate-600 mb-6",children:s||r!=="all"||i.length>0?"Try adjusting your search or filters":`Start creating your first ${h.toLowerCase()}`}),!s&&r==="all"&&i.length===0&&e.jsx(Ht,{to:Pe("ArticleEditor"),children:e.jsxs(J,{className:"bg-blue-600 hover:bg-blue-700 gap-2",children:[e.jsx(Pt,{className:"w-4 h-4"}),"Create First ",h]})})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 gap-3",children:[e.jsxs("div",{className:"text-sm text-slate-600",children:["Showing ",A.length," ",A.length===1?h.toLowerCase():m.toLowerCase()]}),e.jsxs(Ke,{value:o,onValueChange:c,children:[e.jsxs(Ve,{className:"w-48",children:[e.jsx(Ql,{className:"w-4 h-4 mr-2"}),e.jsx(Qe,{placeholder:"Sort By"})]}),e.jsxs(We,{children:[e.jsx(re,{value:"newest",children:"Newest First"}),e.jsx(re,{value:"oldest",children:"Oldest First"}),e.jsx(re,{value:"most-viewed",children:"Most Viewed"}),e.jsx(re,{value:"most-liked",children:"Most Liked"}),e.jsx(re,{value:"title-asc",children:"Title A-Z"}),e.jsx(re,{value:"title-desc",children:"Title Z-A"})]})]})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:A.map(M=>{const k=M.published_date&&new Date(M.published_date)>new Date;return e.jsxs("div",{children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute top-2 right-2 z-10 flex gap-1",children:[e.jsx(ye,{className:C(M.status),children:M.status}),k&&e.jsx(ye,{className:"bg-purple-100 text-purple-700",children:"Scheduled"})]}),e.jsx(vd,{article:M,buttonStyles:j,showActions:!1,displayName:m})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx(Ht,{to:`${Pe("ArticleEditor")}?id=${M.id}`,className:"flex-1",children:e.jsxs(J,{variant:"outline",size:"sm",className:"w-full gap-2",children:[e.jsx(gi,{className:"w-3 h-3"}),"Edit"]})}),M.status==="published"&&e.jsx(Ht,{to:`${Pe("ArticleView")}?slug=${M.slug}`,className:"flex-1",children:e.jsxs(J,{variant:"outline",size:"sm",className:"w-full gap-2",children:[e.jsx(gr,{className:"w-3 h-3"}),"View"]})})]})]},M.id)})})]})})]})]})})}function Xq(){const[t,s]=b.useState(""),[n,r]=b.useState([]),[a,i]=b.useState(1),[l,o]=b.useState("newest"),[c,u]=b.useState(6),{data:d=[],isLoading:m}=me({queryKey:["public-articles"],queryFn:async()=>(await X.entities.BlogPost.list("-published_date")).filter(R=>R.status==="published"),staleTime:300*1e3,refetchOnWindowFocus:!1}),{data:h=[],isLoading:p}=me({queryKey:["resourceCategories-articles"],queryFn:async()=>(await X.entities.ResourceCategory.list()).filter(F=>F.is_active&&F.applies_to_content_types&&F.applies_to_content_types.includes("Articles")).sort((F,z)=>(F.display_order||0)-(z.display_order||0)),staleTime:0,refetchOnMount:!0}),{data:g=[]}=me({queryKey:["all-article-views"],queryFn:async()=>await X.entities.ArticleView.list(),staleTime:30*1e3}),{data:v=[]}=me({queryKey:["all-article-reactions"],queryFn:async()=>await X.entities.ArticleReaction.list(),staleTime:30*1e3}),{data:y="Articles"}=me({queryKey:["article-display-name"],queryFn:async()=>{const R=(await X.entities.SystemSettings.list()).find(F=>F.setting_key==="article_display_name");return(R==null?void 0:R.setting_value)||"Articles"},staleTime:300*1e3,refetchOnWindowFocus:!1}),j=b.useMemo(()=>{const E={};return d.forEach(R=>{E[R.id]={viewCount:g.filter(F=>F.article_id===R.id).length,likeCount:v.filter(F=>F.article_id===R.id&&F.reaction_type==="up").length}}),E},[d,g,v]),w=b.useMemo(()=>d.filter(E=>{var z,V,U;const R=((z=E.title)==null?void 0:z.toLowerCase().includes(t.toLowerCase()))||((V=E.summary)==null?void 0:V.toLowerCase().includes(t.toLowerCase()))||((U=E.tags)==null?void 0:U.some(B=>B.toLowerCase().includes(t.toLowerCase()))),F=n.length===0||E.subcategories&&E.subcategories.some(B=>n.includes(B));return R&&F}),[d,t,n]),N=b.useMemo(()=>{const E=[...w];switch(l){case"newest":E.sort((R,F)=>new Date(F.published_date||F.created_date)-new Date(R.published_date||R.created_date));break;case"oldest":E.sort((R,F)=>new Date(R.published_date||R.created_date)-new Date(F.published_date||F.created_date));break;case"title-asc":E.sort((R,F)=>R.title.localeCompare(F.title));break;case"title-desc":E.sort((R,F)=>F.title.localeCompare(R.title));break;case"most-viewed":E.sort((R,F)=>{var z,V;return(((z=j[F.id])==null?void 0:z.viewCount)||0)-(((V=j[R.id])==null?void 0:V.viewCount)||0)});break;case"most-liked":E.sort((R,F)=>{var z,V;return(((z=j[F.id])==null?void 0:z.likeCount)||0)-(((V=j[R.id])==null?void 0:V.likeCount)||0)});break}return E},[w,l,j]),_=Math.ceil(N.length/c),T=(a-1)*c,A=T+c,P=N.slice(T,A),C=()=>{const E=[];if(_<=5)for(let F=1;F<=_;F++)E.push(F);else if(a<=3){for(let F=1;F<=4;F++)E.push(F);_>5&&E.push("..."),E.push(_)}else if(a>=_-2){E.push(1),_>5&&E.push("...");for(let F=_-3;F<=_;F++)E.push(F)}else{E.push(1),E.push("...");for(let F=a-1;F<=a+1;F++)E.push(F);E.push("..."),E.push(_)}return E};Be.useEffect(()=>{i(1)},[n,t,l,c]);const O=E=>{r(R=>R.includes(E)?R.filter(F=>F!==E):[...R,E])},M=E=>{i(E),window.scrollTo({top:0,behavior:"smooth"})},k=m||p;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-12 text-center",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-slate-900 mb-4",children:y}),e.jsxs("p",{className:"text-xl text-slate-600 max-w-2xl mx-auto",children:["Explore ",y.toLowerCase()," from the careers education community"]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("div",{className:"lg:w-64 flex-shrink-0",children:e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 sticky top-8",children:e.jsx(gd,{categories:h,selectedSubcategories:n,onSubcategoryToggle:O,searchQuery:t,onSearchChange:s,onClearSearch:()=>s(""),isLoading:!1,displayName:y})})}),e.jsx("div",{className:"flex-1",children:k?e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Array(6).fill(0).map((E,R)=>e.jsxs(le,{className:"animate-pulse border-slate-200",children:[e.jsx("div",{className:"h-48 bg-slate-200"}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"h-6 bg-slate-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded w-full"})]})]},R))}):N.length===0?e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(Yl,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsxs("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:["No ",y.toLowerCase()," found"]}),e.jsx("p",{className:"text-slate-600",children:t||n.length>0?"Try adjusting your search or filters":"Check back later for new content"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 gap-3",children:[e.jsxs("div",{className:"text-sm text-slate-600",children:["Showing ",T+1,"-",Math.min(A,N.length)," of ",N.length," ",y.toLowerCase()]}),e.jsxs(Ke,{value:l,onValueChange:o,children:[e.jsxs(Ve,{className:"w-48",children:[e.jsx(Ql,{className:"w-4 h-4 mr-2"}),e.jsx(Qe,{placeholder:"Sort By"})]}),e.jsxs(We,{children:[e.jsx(re,{value:"newest",children:"Newest First"}),e.jsx(re,{value:"oldest",children:"Oldest First"}),e.jsx(re,{value:"most-viewed",children:"Most Viewed"}),e.jsx(re,{value:"most-liked",children:"Most Liked"}),e.jsx(re,{value:"title-asc",children:"Title A-Z"}),e.jsx(re,{value:"title-desc",children:"Title Z-A"})]})]})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:P.map(E=>e.jsx(vd,{article:E,displayName:y},E.id))}),N.length>0&&e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsx(ce,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"Items per page:"}),e.jsxs(Ke,{value:c.toString(),onValueChange:E=>{u(Number(E)),i(1)},children:[e.jsx(Ve,{className:"w-20",children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"6",children:"6"}),e.jsx(re,{value:"12",children:"12"}),e.jsx(re,{value:"24",children:"24"}),e.jsx(re,{value:"48",children:"48"})]})]})]}),e.jsxs("div",{className:"text-sm text-slate-600",children:["Page ",a," of ",_]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(J,{variant:"outline",size:"sm",onClick:()=>M(a-1),disabled:a===1,children:e.jsx(Wn,{className:"w-4 h-4"})}),C().map((E,R)=>e.jsx(Be.Fragment,{children:E==="..."?e.jsx("span",{className:"px-2 text-slate-400",children:"..."}):e.jsx(J,{variant:a===E?"default":"outline",size:"sm",onClick:()=>M(E),className:a===E?"bg-blue-600 hover:bg-blue-700":"",children:E})},R)),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>M(a+1),disabled:a===_,children:e.jsx(js,{className:"w-4 h-4"})})]})]})})})]})})]})]})})}function Zq({isAdmin:t,memberInfo:s}){const[n,r]=b.useState(null),{data:a=[],isLoading:i,refetch:l}=me({queryKey:["members-without-handles"],queryFn:async()=>(await X.entities.Member.list()).filter(d=>!d.handle)}),o=Le({mutationFn:async()=>await X.functions.invoke("generateMemberHandles",{generate_all:!0,member_email:s==null?void 0:s.email}),onSuccess:u=>{r(u.data),l();const{successful:d,failed:m}=u.data.summary;d>0&&te.success(`Successfully generated ${d} handle(s)`),m>0&&te.error(`Failed to generate ${m} handle(s)`)},onError:u=>{console.error("Generation error:",u),te.error("Failed to generate handles: "+u.message)}}),c=()=>{if(!(s!=null&&s.email)){te.error("Member information not available");return}window.confirm(`This will generate handles for ${a.length} member(s). Continue?`)&&o.mutate()};return t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx($f,{className:"w-8 h-8 text-blue-600"}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900",children:"Member Handle Management"})]}),e.jsx("p",{className:"text-slate-600",children:"Generate unique handles for members who don't have one yet"})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm mb-6",children:[e.jsx(Fe,{children:e.jsxs(Ue,{className:"flex items-center gap-2",children:[e.jsx(ws,{className:"w-5 h-5 text-blue-600"}),"Handle Generation Status"]})}),e.jsx(ce,{children:i?e.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[e.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Loading members..."]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:a.length}),e.jsxs("p",{className:"text-sm text-slate-600",children:["Member",a.length!==1?"s":""," without handle"]})]}),e.jsx(J,{onClick:c,disabled:a.length===0||o.isPending||!(s!=null&&s.email),className:"bg-blue-600 hover:bg-blue-700",children:o.isPending?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ih,{className:"w-4 h-4 mr-2"}),"Generate All Handles"]})})]}),a.length===0&&e.jsxs("div",{className:"flex items-center gap-2 p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsx(Jn,{className:"w-5 h-5 text-green-600 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-green-700",children:"All members have handles assigned!"})]})]})})]}),a.length>0&&e.jsxs(le,{className:"border-slate-200 shadow-sm mb-6",children:[e.jsxs(Fe,{children:[e.jsx(Ue,{className:"text-lg",children:"Members Needing Handles"}),e.jsx(Es,{children:"The following members will have handles generated automatically"})]}),e.jsx(ce,{children:e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:a.map(u=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-slate-900",children:[u.first_name," ",u.last_name]}),e.jsx("p",{className:"text-sm text-slate-600",children:u.email})]}),e.jsx(ye,{variant:"outline",className:"bg-amber-50 text-amber-700 border-amber-200",children:"No Handle"})]},u.id))})})]}),n&&e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsxs(Fe,{children:[e.jsx(Ue,{className:"text-lg",children:"Generation Results"}),e.jsx(Es,{children:"Summary of the last handle generation run"})]}),e.jsxs(ce,{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("p",{className:"text-2xl font-bold text-green-700",children:n.summary.successful}),e.jsx("p",{className:"text-sm text-green-600",children:"Successful"})]}),e.jsxs("div",{className:"p-4 bg-red-50 rounded-lg border border-red-200",children:[e.jsx("p",{className:"text-2xl font-bold text-red-700",children:n.summary.failed}),e.jsx("p",{className:"text-sm text-red-600",children:"Failed"})]}),e.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-200",children:[e.jsx("p",{className:"text-2xl font-bold text-slate-700",children:n.summary.skipped}),e.jsx("p",{className:"text-sm text-slate-600",children:"Skipped"})]})]}),n.results.success.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-slate-900 mb-3 flex items-center gap-2",children:[e.jsx(Jn,{className:"w-5 h-5 text-green-600"}),"Successfully Generated (",n.results.success.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:n.results.success.map(u=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:u.name}),e.jsx("p",{className:"text-sm text-slate-600",children:u.email})]}),e.jsxs(ye,{className:"bg-green-100 text-green-700 border-green-300",children:["@",u.handle]})]},u.member_id))})]}),n.results.failed.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-slate-900 mb-3 flex items-center gap-2",children:[e.jsx(vs,{className:"w-5 h-5 text-red-600"}),"Failed (",n.results.failed.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:n.results.failed.map(u=>e.jsxs("div",{className:"p-3 bg-red-50 rounded-lg border border-red-200",children:[e.jsx("p",{className:"font-medium text-slate-900",children:u.email}),e.jsx("p",{className:"text-sm text-red-600",children:u.error})]},u.member_id))})]}),n.results.skipped.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-slate-900 mb-3 flex items-center gap-2",children:["Skipped (",n.results.skipped.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:n.results.skipped.map(u=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:u.email}),e.jsx("p",{className:"text-sm text-slate-600",children:u.reason})]}),e.jsxs(ye,{variant:"outline",children:["@",u.existing_handle]})]},u.member_id))})]})]})]}),e.jsx(le,{className:"border-blue-200 bg-blue-50 shadow-sm mt-6",children:e.jsx(ce,{className:"p-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx(vs,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"space-y-2 text-sm text-blue-900",children:[e.jsx("p",{className:"font-semibold",children:"How Handle Generation Works:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-blue-800",children:[e.jsx("li",{children:'Handles are generated from first and last names (e.g., "john-doe")'}),e.jsx("li",{children:'If a handle already exists, a number is appended (e.g., "john-doe-1")'}),e.jsx("li",{children:"Handles must be 3-30 characters, lowercase, and URL-friendly"}),e.jsx("li",{children:"Once set, handles cannot be changed by the member"}),e.jsx("li",{children:"Members who already have handles will be skipped"})]})]})]})})})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx(le,{className:"border-red-200 shadow-sm",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(vs,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-slate-600",children:"This page is only accessible to administrators."})]})})})})}const NN={ArrowUpRight:Mr,Download:Zn,ExternalLink:Js,PlayCircle:ih,Eye:gr,FileText:ns,Mail:Ms,Plus:Pt};function e9({isAdmin:t}){const s=b.useMemo(()=>new URLSearchParams(window.location.search),[]),n=s.get("mode"),r=s.get("id"),a=Yt(),[i,l]=b.useState(0),[o]=b.useState(n==="create"||n==="edit"),[c,u]=b.useState(null),[d,m]=b.useState(null),[h,p]=b.useState(null),[g,v]=b.useState("ArrowUpRight"),[y,j]=b.useState(""),[w,N]=b.useState(""),[_,T]=b.useState(""),{data:A}=me({queryKey:["buttonStyle",r],queryFn:async()=>(await X.entities.ButtonStyle.list()).find(F=>F.id===r),enabled:!!r&&n==="edit",staleTime:300*1e3,refetchOnWindowFocus:!1});b.useEffect(()=>{A&&(u(A.card_type),m(A.resource_type||null),p(A.button_type),v(A.icon_name||"ArrowUpRight"),j(A.button_text||""),N(A.name||""),T(A.description||""))},[A]);const P=Le({mutationFn:async()=>{if(!w.trim())throw new Error("Please enter a style name");if(!c)throw new Error("Please select a card type");if(c==="resource"&&!d)throw new Error("Please select a resource type");if(!h)throw new Error("Please select a button style");const R={name:w,card_type:c,resource_type:c==="resource"?d:void 0,button_type:h,button_text:y||C(c,d),icon_name:h==="rectangular_agcas"?g:"none",description:_,is_active:!0};return r&&n==="edit"?await X.entities.ButtonStyle.update(r,R):await X.entities.ButtonStyle.create(R)},onSuccess:()=>{a.invalidateQueries({queryKey:["buttonStyles"]}),te.success(r?"Button style updated successfully!":"Button style created successfully!"),window.location.href=Pe("ButtonStyleManagement")},onError:R=>{te.error(R.message||"Failed to save button style")}}),C=(R,F,z)=>{if(R==="article")return"Read Article";if(R==="resource"){if(F==="download")return"Download";if(F==="video")return"Watch Video";if(F==="external_link")return"Visit Site"}return"Click Here"},O=(R,F=null)=>{p(R),F&&v(F)},M=()=>{window.location.href=Pe("ButtonStyleManagement")},k=()=>{l(R=>R+1),te.success("Button clicked!")},E=(R,F,z)=>{const V=F||C(c,d),U=NN[z];return R==="square_agcas"?e.jsx(Ba,{onClick:()=>{}}):R==="rectangular_agcas"?e.jsx(Is,{onClick:()=>{},icon:z!=="none"?U:void 0,children:V}):e.jsxs(J,{className:"bg-blue-600 hover:bg-blue-700",children:[U&&z!=="none"&&e.jsx(U,{className:"w-4 h-4 mr-2"}),V]})};if(o&&t){const R=c&&(c==="article"||c==="resource"&&d);return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(J,{variant:"ghost",onClick:M,className:"mb-4 gap-2",children:[e.jsx(ll,{className:"w-4 h-4"}),"Back to Button Styles"]}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:r?"Edit Button Style":"Create Button Style"}),e.jsx("p",{className:"text-slate-600",children:"Select card type, then choose a button style to set as default"})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-1 space-y-6",children:e.jsxs(le,{className:"border-slate-200 shadow-sm sticky top-8",children:[e.jsx(Fe,{children:e.jsx(Ue,{className:"text-base",children:"Style Configuration"})}),e.jsxs(ce,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"style-name",children:"Style Name *"}),e.jsx(he,{id:"style-name",placeholder:"e.g., Download Button Style",value:w,onChange:F=>N(F.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"card-type",children:"Card Type *"}),e.jsxs(Ke,{value:c||"",onValueChange:u,children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:"Select card type"})}),e.jsxs(We,{children:[e.jsx(re,{value:"article",children:"Article Cards"}),e.jsx(re,{value:"resource",children:"Resource Cards"})]})]})]}),c==="resource"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"resource-type",children:"Resource Type *"}),e.jsxs(Ke,{value:d||"",onValueChange:m,children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:"Select resource type"})}),e.jsxs(We,{children:[e.jsx(re,{value:"download",children:"Download Resources"}),e.jsx(re,{value:"video",children:"Video Resources"}),e.jsx(re,{value:"external_link",children:"External Link Resources"})]})]}),e.jsx("p",{className:"text-xs text-slate-500",children:"This style will apply to all resource cards of this type"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"custom-text",children:"Button Text (Optional)"}),e.jsx(he,{id:"custom-text",placeholder:`Default: ${C(c,d)}`,value:y,onChange:F=>j(F.target.value)}),e.jsx("p",{className:"text-xs text-slate-500",children:"Leave empty to use default text"})]}),h==="rectangular_agcas"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"icon",children:"Icon"}),e.jsxs(Ke,{value:g,onValueChange:v,children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"ArrowUpRight",children:"Arrow Up Right"}),e.jsx(re,{value:"Download",children:"Download"}),e.jsx(re,{value:"ExternalLink",children:"External Link"}),e.jsx(re,{value:"PlayCircle",children:"Play Circle"}),e.jsx(re,{value:"Eye",children:"Eye"}),e.jsx(re,{value:"FileText",children:"File Text"}),e.jsx(re,{value:"Mail",children:"Mail"}),e.jsx(re,{value:"Plus",children:"Plus"}),e.jsx(re,{value:"none",children:"No Icon"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(Gt,{id:"description",placeholder:"Describe this button style...",value:_,onChange:F=>T(F.target.value),rows:3})]}),R&&h&&e.jsxs("div",{className:"pt-4 border-t border-slate-200",children:[e.jsx(ee,{className:"text-sm mb-3 block",children:"Preview:"}),E(h,y,g)]}),e.jsxs("div",{className:"pt-4 space-y-2",children:[e.jsxs(J,{onClick:()=>P.mutate(),disabled:P.isPending||!R||!h||!w,className:"w-full bg-blue-600 hover:bg-blue-700",children:[e.jsx(un,{className:"w-4 h-4 mr-2"}),r?"Update Style":"Create Style"]}),e.jsx(J,{variant:"outline",onClick:M,className:"w-full",children:"Cancel"})]})]})]})}),e.jsx("div",{className:"lg:col-span-2 space-y-6",children:R?e.jsxs(e.Fragment,{children:[e.jsxs(le,{className:`border-2 ${h==="rectangular_agcas"?"border-blue-500 bg-blue-50":"border-slate-200"} shadow-sm transition-all`,children:[e.jsx(Fe,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(Ue,{children:"AGCAS Rectangular Button"}),e.jsx(Es,{children:"Transparent background with 2px border and gradient hover - Click any button below to select it"})]}),h==="rectangular_agcas"&&e.jsx(ye,{className:"bg-blue-600",children:"Selected"})]})}),e.jsx(ce,{children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[Object.entries(NN).map(([F,z])=>e.jsx(Is,{onClick:V=>{V.stopPropagation(),O("rectangular_agcas",F)},icon:z,children:y||C(c,d)},F)),e.jsx(Is,{onClick:F=>{F.stopPropagation(),O("rectangular_agcas","none")},children:y||C(c,d)})]})})]}),e.jsxs(le,{className:`border-2 ${h==="square_agcas"?"border-blue-500 bg-blue-50":"border-slate-200"} shadow-sm cursor-pointer transition-all hover:border-blue-300`,onClick:()=>O("square_agcas"),children:[e.jsx(Fe,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(Ue,{children:"AGCAS Square Button"}),e.jsx(Es,{children:"Square button with arrow up icon - Click to select"})]}),h==="square_agcas"&&e.jsx(ye,{className:"bg-blue-600",children:"Selected"})]})}),e.jsx(ce,{children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx(Ba,{onClick:F=>{F.stopPropagation(),O("square_agcas")}}),e.jsx(Ba,{onClick:F=>{F.stopPropagation(),O("square_agcas")},className:"w-20 h-20"})]})})]}),e.jsxs(le,{className:`border-2 ${h==="standard"?"border-blue-500 bg-blue-50":"border-slate-200"} shadow-sm transition-all`,children:[e.jsx(Fe,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(Ue,{children:"Standard Button"}),e.jsx(Es,{children:"Standard shadcn/ui button with solid background - Click any button below to select it"})]}),h==="standard"&&e.jsx(ye,{className:"bg-blue-600",children:"Selected"})]})}),e.jsx(ce,{children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[Object.entries(NN).map(([F,z])=>e.jsxs(J,{onClick:V=>{V.stopPropagation(),O("standard",F)},className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),y||C(c,d)]},F)),e.jsx(J,{onClick:F=>{F.stopPropagation(),O("standard","none")},className:"bg-blue-600 hover:bg-blue-700",children:y||C(c,d)})]})})]})]}):e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:c?"Select a Resource Type":"Select a Card Type"}),e.jsx("p",{className:"text-slate-600",children:c?"Choose resource type from the sidebar to continue":"Choose card type from the sidebar to continue"})]})})})]})]})})}return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"AGCAS Button Elements"}),e.jsx("p",{className:"text-slate-600",children:"Reusable button components with consistent styling across the portal"})]}),e.jsxs("div",{className:"grid gap-8",children:[e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsxs(Fe,{children:[e.jsx(Ue,{children:"Basic AGCAS Button"}),e.jsx(Es,{children:"Rectangular button with 2px black border, transparent background, and gradient hover effect"})]}),e.jsx(ce,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-3",children:"Default Button:"}),e.jsx(Is,{onClick:k,children:"Click Me"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-3",children:"With Icon (Arrow Up Right):"}),e.jsx(Is,{onClick:k,icon:Mr,children:"Join Us"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-3",children:"Disabled State:"}),e.jsx(Is,{disabled:!0,children:"Disabled Button"})]}),e.jsx("div",{className:"pt-4 border-t border-slate-200",children:e.jsxs("p",{className:"text-sm text-slate-500 italic",children:["Click count: ",i]})})]})})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsxs(Fe,{children:[e.jsx(Ue,{children:"AGCAS Square Button"}),e.jsx(Es,{children:"Square button with arrow up icon filling 80% of the space, same styling as rectangular button"})]}),e.jsx(ce,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-3",children:"Default Square Button:"}),e.jsx(Ba,{onClick:k})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-3",children:"Disabled State:"}),e.jsx(Ba,{disabled:!0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-3",children:"Custom Sizes:"}),e.jsxs("div",{className:"flex items-end gap-4",children:[e.jsx(Ba,{onClick:k,className:"w-12 h-12"}),e.jsx(Ba,{onClick:k}),e.jsx(Ba,{onClick:k,className:"w-20 h-20"}),e.jsx(Ba,{onClick:k,className:"w-24 h-24"})]})]})]})})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsxs(Fe,{children:[e.jsx(Ue,{children:"Button Variations with Icons"}),e.jsx(Es,{children:"Different use cases with various Lucide icons"})]}),e.jsx(ce,{children:e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(Is,{onClick:k,icon:Zn,children:"Download"}),e.jsx(Is,{onClick:k,icon:Js,children:"Visit Site"}),e.jsx(Is,{onClick:k,icon:Ms,children:"Contact"}),e.jsx(Is,{onClick:k,icon:Pt,children:"Add New"}),e.jsx(Is,{onClick:k,icon:un,children:"Save Changes"}),e.jsx(Is,{onClick:k,icon:gi,children:"Edit"}),e.jsx(Is,{onClick:k,icon:os,children:"Delete"}),e.jsx(Is,{onClick:k,icon:gr,children:"Preview"}),e.jsx(Is,{onClick:k,icon:Uf,children:"Confirm"})]})})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsxs(Fe,{children:[e.jsx(Ue,{children:"Text-Only Buttons"}),e.jsx(Es,{children:"Buttons without icons for simple actions"})]}),e.jsx(ce,{children:e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(Is,{onClick:k,children:"Submit"}),e.jsx(Is,{onClick:k,children:"Cancel"}),e.jsx(Is,{onClick:k,children:"Learn More"}),e.jsx(Is,{onClick:k,children:"Get Started"})]})})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsxs(Fe,{children:[e.jsx(Ue,{children:"Size Variations"}),e.jsx(Es,{children:"Custom sizing using className prop"})]}),e.jsx(ce,{children:e.jsxs("div",{className:"flex flex-wrap items-end gap-4",children:[e.jsx(Is,{onClick:k,className:"px-3 py-1.5 text-xs",children:"Small Button"}),e.jsx(Is,{onClick:k,children:"Default Button"}),e.jsx(Is,{onClick:k,className:"px-8 py-4 text-base",children:"Large Button"}),e.jsx(Is,{onClick:k,className:"px-12 py-5 text-lg",children:"Extra Large"})]})})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsxs(Fe,{children:[e.jsx(Ue,{children:"Full Width Buttons"}),e.jsx(Es,{children:"Buttons that span the full width of their container"})]}),e.jsxs(ce,{className:"space-y-3",children:[e.jsx(Is,{onClick:k,className:"w-full",icon:Mr,children:"Full Width Button"}),e.jsx(Is,{onClick:k,className:"w-full",icon:Zn,children:"Download Resource"}),e.jsx(Is,{onClick:k,className:"w-full",children:"Continue"})]})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsxs(Fe,{children:[e.jsx(Ue,{children:"Usage Example"}),e.jsx(Es,{children:"How to import and use the AGCAS Button components"})]}),e.jsx(ce,{children:e.jsx("div",{className:"bg-slate-900 text-slate-100 rounded-lg p-4 overflow-x-auto",children:e.jsx("pre",{className:"text-sm",children:`import AGCASButton from "@/components/ui/AGCASButton";
import AGCASSquareButton from "@/components/ui/AGCASSquareButton";
import { ArrowUpRight } from "lucide-react";

// Basic rectangular button
<AGCASButton onClick={handleClick}>
  Click Me
</AGCASButton>

// Rectangular button with icon
<AGCASButton onClick={handleClick} icon={ArrowUpRight}>
  Join Us
</AGCASButton>

// Square button with arrow up icon
<AGCASSquareButton onClick={handleClick} />

// Square button with custom size
<AGCASSquareButton 
  onClick={handleClick} 
  className="w-20 h-20"
/>

// With custom styling
<AGCASButton 
  onClick={handleClick} 
  className="w-full px-8 py-4"
  icon={Download}
>
  Download Now
</AGCASButton>

// Disabled state
<AGCASButton disabled>
  Disabled Button
</AGCASButton>`})})})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsxs(Fe,{children:[e.jsx(Ue,{children:"Comparison"}),e.jsx(Es,{children:"AGCAS Button vs Standard shadcn/ui Button"})]}),e.jsx(ce,{children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"AGCAS Button:"}),e.jsx(Is,{onClick:k,icon:Mr,children:"AGCAS Style"}),e.jsxs("ul",{className:"text-sm text-slate-600 space-y-1 ml-4",children:[e.jsx("li",{children:" 2px black border"}),e.jsx("li",{children:" Transparent background"}),e.jsx("li",{children:" Gradient hover effect"}),e.jsx("li",{children:" No border radius"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"Standard Button:"}),e.jsxs(J,{onClick:k,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Mr,{className:"w-4 h-4 mr-2"}),"Standard Style"]}),e.jsxs("ul",{className:"text-sm text-slate-600 space-y-1 ml-4",children:[e.jsx("li",{children:" Solid background"}),e.jsx("li",{children:" Rounded corners"}),e.jsx("li",{children:" Simple hover effect"})]})]})]})})]})]})]})})}const UNe={ArrowUpRight:Mr,Download:Zn,ExternalLink:Js,PlayCircle:ih,Eye:gr,FileText:ns,Mail:Ms,Plus:Pt};function t9({isAdmin:t,isFeatureExcluded:s}){const n=Yt(),{data:r=[],isLoading:a}=me({queryKey:["buttonStyles"],queryFn:()=>X.entities.ButtonStyle.list("-created_date")}),i=Le({mutationFn:v=>X.entities.ButtonStyle.delete(v),onSuccess:()=>{n.invalidateQueries({queryKey:["buttonStyles"]}),te.success("Button style deleted successfully")},onError:v=>{te.error("Failed to delete button style: "+v.message)}});if(!t||s("page_ButtonStyleManagement"))return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-slate-600",children:"You don't have permission to access this page."})]})})});const l=()=>{window.location.href=Pe("ButtonElements")+"?mode=create"},o=v=>{window.location.href=Pe("ButtonElements")+`?mode=edit&id=${v.id}`},c=v=>{window.confirm("Are you sure you want to delete this button style? This action cannot be undone.")&&i.mutate(v)},u=v=>{const y=UNe[v.icon_name];return v.button_type==="square_agcas"?e.jsx(Ba,{onClick:()=>{}}):v.button_type==="rectangular_agcas"?e.jsx(Is,{onClick:()=>{},icon:v.icon_name!=="none"?y:void 0,children:v.button_text||"Sample Text"}):e.jsxs(J,{className:"bg-blue-600 hover:bg-blue-700",children:[y&&v.icon_name!=="none"&&e.jsx(y,{className:"w-4 h-4 mr-2"}),v.button_text||"Sample Text"]})},d=r.filter(v=>v.card_type==="article"),m=r.filter(v=>v.card_type==="resource"&&v.resource_type==="download"),h=r.filter(v=>v.card_type==="resource"&&v.resource_type==="video"),p=r.filter(v=>v.card_type==="resource"&&v.resource_type==="external_link"),g=(v,y,j)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:v}),y.length===0&&e.jsxs(J,{onClick:l,variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(Pt,{className:"w-4 h-4"}),"Add Style"]})]}),y.length===0?e.jsx(le,{className:"border-slate-200 shadow-sm border-dashed",children:e.jsx(ce,{className:"p-8 text-center",children:e.jsx("p",{className:"text-slate-600",children:j})})}):e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:y.map(w=>e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsx(Fe,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(Ue,{className:"text-lg mb-1",children:w.name}),w.description&&e.jsx("p",{className:"text-sm text-slate-600",children:w.description})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(J,{variant:"ghost",size:"icon",onClick:()=>o(w),children:e.jsx(gi,{className:"w-4 h-4"})}),e.jsx(J,{variant:"ghost",size:"icon",onClick:()=>c(w.id),className:"text-red-600 hover:text-red-700",children:e.jsx(os,{className:"w-4 h-4"})})]})]})}),e.jsxs(ce,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-wider",children:"Preview"}),e.jsx("div",{className:"flex items-center gap-3",children:u(w)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-slate-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Type"}),e.jsx("div",{className:"text-sm font-medium capitalize",children:w.button_type.replace(/_/g," ")})]}),w.button_type==="rectangular_agcas"&&w.icon_name!=="none"&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Icon"}),e.jsx("div",{className:"text-sm font-medium",children:w.icon_name})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Status"}),e.jsx("div",{className:"flex items-center gap-2",children:w.is_active?e.jsxs(e.Fragment,{children:[e.jsx(Uf,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm text-green-600 font-medium",children:"Active"})]}):e.jsxs(e.Fragment,{children:[e.jsx(_s,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{className:"text-sm text-slate-400 font-medium",children:"Inactive"})]})})]})]})]})]},w.id))})]});return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Button Style Management"}),e.jsx("p",{className:"text-slate-600",children:"Define default button styles for different card types"})]}),e.jsxs(J,{onClick:l,className:"bg-blue-600 hover:bg-blue-700 gap-2",children:[e.jsx(Pt,{className:"w-4 h-4"}),"Create Button Style"]})]}),a?e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Array(4).fill(0).map((v,y)=>e.jsxs(le,{className:"animate-pulse border-slate-200",children:[e.jsxs(Fe,{children:[e.jsx("div",{className:"h-6 bg-slate-200 rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4"})]}),e.jsx(ce,{children:e.jsx("div",{className:"h-10 bg-slate-200 rounded"})})]},y))}):r.length===0?e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No button styles yet"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"Create button styles to define how buttons appear on Article and Resource cards"}),e.jsxs(J,{onClick:l,className:"bg-blue-600 hover:bg-blue-700 gap-2",children:[e.jsx(Pt,{className:"w-4 h-4"}),"Create First Style"]})]})}):e.jsxs("div",{className:"space-y-8",children:[g("Article Cards",d,"No button style defined for Article cards yet"),g("Download Resources",m,"No button style defined for Download resources yet"),g("Video Resources",h,"No button style defined for Video resources yet"),g("External Link Resources",p,"No button style defined for External Link resources yet")]})]})})}function s9({isAdmin:t,isFeatureExcluded:s}){const n=Yt(),[r,a]=b.useState(""),{data:i,isLoading:l}=me({queryKey:["borderRadiusSettings"],queryFn:async()=>(await X.entities.SystemSettings.list()).find(d=>d.setting_key==="global_border_radius"),onSuccess:c=>{a(c?c.setting_value:"8px")}}),o=Le({mutationFn:async()=>i?await X.entities.SystemSettings.update(i.id,{setting_value:r}):await X.entities.SystemSettings.create({setting_key:"global_border_radius",setting_value:r,description:"Global border radius for cards, buttons, and inputs"}),onSuccess:()=>{n.invalidateQueries({queryKey:["borderRadiusSettings"]}),te.success("Border radius settings saved. Refresh the page to see changes.")},onError:c=>{te.error("Failed to save settings: "+c.message)}});return!t||s("page_BorderRadiusSettings")?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-slate-600",children:"You don't have permission to access this page."})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Border Radius Settings"}),e.jsx("p",{className:"text-slate-600",children:"Configure the global border radius for cards, buttons, inputs, and other UI elements"})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsx(Fe,{children:e.jsx(Ue,{children:"Global Border Radius"})}),e.jsxs(ce,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"border-radius",children:"Border Radius Value"}),e.jsx(he,{id:"border-radius",value:r,onChange:c=>a(c.target.value),placeholder:"e.g., 0px, 4px, 8px, 12px, 0.5rem"}),e.jsx("p",{className:"text-sm text-slate-500",children:'Enter a CSS border-radius value. Use "0px" or "0" for square corners, or values like "8px", "12px", "1rem" for rounded corners.'})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ee,{children:"Preview"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-6 bg-white border border-slate-200 shadow-sm",style:{borderRadius:r},children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 mb-2",children:"Sample Card"}),e.jsx("p",{className:"text-sm text-slate-600",children:"This is how cards will look with the selected border radius."})]}),e.jsx(J,{variant:"outline",style:{borderRadius:r},onClick:()=>{},children:"Sample Button"}),e.jsx(he,{placeholder:"Sample Input",style:{borderRadius:r}})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs(J,{onClick:()=>o.mutate(),disabled:o.isPending||l,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(un,{className:"w-4 h-4 mr-2"}),o.isPending?"Saving...":"Save Settings"]}),e.jsx(J,{variant:"outline",onClick:()=>a("0px"),children:"Square (0px)"}),e.jsx(J,{variant:"outline",onClick:()=>a("8px"),children:"Default (8px)"})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 p-4 mt-6",children:e.jsxs("p",{className:"text-sm text-amber-800",children:[e.jsx("strong",{children:"Note:"})," After saving, you'll need to refresh the page for changes to take effect throughout the application."]})})]})]})]})})}function n9({isAdmin:t,isFeatureExcluded:s,memberInfo:n}){var wr,Pd;const[r,a]=b.useState("online"),[i,l]=b.useState(!1),[o,c]=b.useState(!1),[u,d]=b.useState(!1),[m,h]=b.useState(!1),[p,g]=b.useState(!1),[v,y]=b.useState(!1),[j,w]=b.useState(!1),[N,_]=b.useState(!1),[T,A]=b.useState(!1),[P,C]=b.useState(!1),[O,M]=b.useState(null),[k,E]=b.useState(null),[R,F]=b.useState(null),[z,V]=b.useState(null),[U,B]=b.useState(null),[$,L]=b.useState(null),[I,W]=b.useState(null),[q,Z]=b.useState(null),[Q,Y]=b.useState(null),[K,ae]=b.useState(null),[se,de]=b.useState(!1),[ue,oe]=b.useState(""),[pe,je]=b.useState(""),[we,qe]=b.useState(""),[ze,Ee]=b.useState(""),[Ce,Ge]=b.useState(""),[Ye,De]=b.useState({name:"",description:"",classification_id:"",award_type:"events_attended",threshold:"",level:"",image_url:"",is_active:!0}),[it,Se]=b.useState({name:"",description:"",classification_id:"",period_text:"",level:"",image_url:"",is_active:!0}),[at,_e]=b.useState({name:"",description:"",award_category:"online",display_order:"",is_active:!0}),[$e,nt]=b.useState({name:"",threshold:"",display_order:"",image_url:"",is_active:!0}),dt=Yt(),{data:lt=[],isLoading:Rt}=me({queryKey:["awards"],queryFn:async()=>(await X.entities.Award.list()).sort(($t,et)=>$t.award_type!==et.award_type?$t.award_type.localeCompare(et.award_type):($t.level||0)-(et.level||0)),staleTime:30*1e3}),{data:es=[],isLoading:Bs}=me({queryKey:["offlineAwards"],queryFn:async()=>(await X.entities.OfflineAward.list()).sort(($t,et)=>($t.level||0)-(et.level||0)),staleTime:30*1e3}),{data:Ss=[]}=me({queryKey:["members"],queryFn:async()=>await X.entities.Member.list(),staleTime:60*1e3}),{data:on=[]}=me({queryKey:["offlineAwardAssignments"],queryFn:async()=>await X.entities.OfflineAwardAssignment.list(),staleTime:30*1e3}),{data:Jt=[],isLoading:fn}=me({queryKey:["awardClassifications"],queryFn:async()=>(await X.entities.AwardClassification.list()).sort(($t,et)=>($t.display_order||0)-(et.display_order||0)),staleTime:30*1e3}),{data:Ds=[],isLoading:jr}=me({queryKey:["awardSublevels"],queryFn:async()=>(await X.entities.AwardSublevel.list()).sort(($t,et)=>($t.display_order||0)-(et.display_order||0)),staleTime:30*1e3}),Hn=Le({mutationFn:async xe=>await X.entities.Award.create(xe),onSuccess:()=>{dt.invalidateQueries({queryKey:["awards"]}),te.success("Online award created successfully"),tr()},onError:xe=>{te.error("Failed to create online award")}}),Je=Le({mutationFn:async xe=>await X.entities.OfflineAward.create(xe),onSuccess:()=>{dt.invalidateQueries({queryKey:["offlineAwards"]}),te.success("Offline award created successfully"),tr()},onError:xe=>{te.error("Failed to create offline award")}}),bt=Le({mutationFn:async({id:xe,awardData:$t})=>await X.entities.Award.update(xe,$t),onSuccess:()=>{dt.invalidateQueries({queryKey:["awards"]}),te.success("Online award updated successfully"),tr()},onError:xe=>{te.error("Failed to update online award")}}),hs=Le({mutationFn:async({id:xe,awardData:$t})=>await X.entities.OfflineAward.update(xe,$t),onSuccess:()=>{dt.invalidateQueries({queryKey:["offlineAwards"]}),te.success("Offline award updated successfully"),tr()},onError:xe=>{te.error("Failed to update offline award")}}),Ne=Le({mutationFn:async xe=>await X.entities.Award.delete(xe),onSuccess:()=>{dt.invalidateQueries({queryKey:["awards"]}),te.success("Online award deleted successfully"),w(!1),W(null)},onError:xe=>{te.error("Failed to delete online award")}}),ut=Le({mutationFn:async xe=>await X.entities.OfflineAward.delete(xe),onSuccess:()=>{dt.invalidateQueries({queryKey:["offlineAwards"]}),te.success("Offline award deleted successfully"),w(!1),W(null)},onError:xe=>{te.error("Failed to delete offline award")}}),Te=Le({mutationFn:async xe=>{if(on.find(et=>et.member_id===xe.member_id&&et.offline_award_id===xe.offline_award_id&&(et.sublevel_id||null)===(xe.sublevel_id||null))){const et=Ds.find(Ft=>Ft.id===xe.sublevel_id),Us=et?` (${et.name})`:"";throw new Error(`This member already has this award${Us} assigned`)}return await X.entities.OfflineAwardAssignment.create(xe)},onSuccess:()=>{dt.invalidateQueries({queryKey:["offlineAwardAssignments"]}),te.success("Award assigned successfully"),xt()},onError:xe=>{te.error(xe.message||"Failed to assign award")}}),Ze=Le({mutationFn:async xe=>await X.entities.OfflineAwardAssignment.delete(xe),onSuccess:()=>{dt.invalidateQueries({queryKey:["offlineAwardAssignments"]}),te.success("Award removed from member"),C(!1),ae(null)},onError:xe=>{te.error("Failed to remove award")}}),yt=Le({mutationFn:async xe=>await X.entities.AwardClassification.create(xe),onSuccess:()=>{dt.invalidateQueries({queryKey:["awardClassifications"]}),te.success("Classification created successfully"),c(!1),E(null)},onError:xe=>{te.error("Failed to create classification")}}),as=Le({mutationFn:async({id:xe,data:$t})=>await X.entities.AwardClassification.update(xe,$t),onSuccess:()=>{dt.invalidateQueries({queryKey:["awardClassifications"]}),te.success("Classification updated successfully"),c(!1),E(null)},onError:xe=>{te.error("Failed to update classification")}}),ds=Le({mutationFn:async xe=>await X.entities.AwardClassification.delete(xe),onSuccess:()=>{dt.invalidateQueries({queryKey:["awardClassifications"]}),te.success("Classification deleted successfully"),_(!1),Z(null)},onError:xe=>{te.error("Failed to delete classification")}}),Qs=Le({mutationFn:async xe=>await X.entities.AwardSublevel.create(xe),onSuccess:()=>{dt.invalidateQueries({queryKey:["awardSublevels"]}),te.success("Sublevel created successfully"),h(!1),F(null)},onError:xe=>{te.error("Failed to create sublevel")}}),ms=Le({mutationFn:async({id:xe,data:$t})=>await X.entities.AwardSublevel.update(xe,$t),onSuccess:()=>{dt.invalidateQueries({queryKey:["awardSublevels"]}),te.success("Sublevel updated successfully"),h(!1),F(null)},onError:xe=>{te.error("Failed to update sublevel")}}),Ir=Le({mutationFn:async xe=>await X.entities.AwardSublevel.delete(xe),onSuccess:()=>{dt.invalidateQueries({queryKey:["awardSublevels"]}),te.success("Sublevel deleted successfully"),A(!1),Y(null)},onError:xe=>{te.error("Failed to delete sublevel")}});if(!t||s("page_AwardManagement"))return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"max-w-md",children:e.jsx(ce,{className:"p-6 text-center",children:e.jsx("p",{className:"text-slate-600",children:"Access denied. Administrator privileges required."})})})});const vn=(xe=null,$t="online")=>{xe?(M({...xe,type:$t}),$t==="online"?De({name:xe.name||"",description:xe.description||"",classification_id:xe.classification_id||"",award_type:xe.award_type||"events_attended",threshold:xe.threshold||"",level:xe.level||"",image_url:xe.image_url||"",is_active:xe.is_active??!0}):Se({name:xe.name||"",description:xe.description||"",classification_id:xe.classification_id||"",period_text:xe.period_text||"",level:xe.level||"",image_url:xe.image_url||"",is_active:xe.is_active??!0})):(M(null),$t==="online"?De({name:"",description:"",classification_id:"",award_type:"events_attended",threshold:"",level:"",image_url:"",is_active:!0}):Se({name:"",description:"",classification_id:"",period_text:"",level:"",image_url:"",is_active:!0})),l(!0)},tr=()=>{l(!1),M(null),De({name:"",description:"",classification_id:"",award_type:"events_attended",threshold:"",level:"",image_url:"",is_active:!0}),Se({name:"",description:"",classification_id:"",period_text:"",level:"",image_url:"",is_active:!0})},Br=(xe=null)=>{xe?(E(xe),_e({name:xe.name||"",description:xe.description||"",award_category:xe.award_category||"online",display_order:xe.display_order||"",is_active:xe.is_active??!0})):(E(null),_e({name:"",description:"",award_category:r,display_order:"",is_active:!0})),c(!0)},ua=xe=>{V(xe),d(!0)},ve=(xe=null)=>{xe?(F(xe),nt({name:xe.name||"",threshold:xe.threshold||"",display_order:xe.display_order||"",image_url:xe.image_url||"",is_active:xe.is_active??!0})):(F(null),nt({name:"",threshold:"",display_order:"",image_url:"",is_active:!0})),h(!0)},ft=xe=>{B(xe),oe(""),je(""),qe(""),Ee(""),g(!0)},xt=()=>{g(!1),B(null),oe(""),je(""),qe(""),Ee("")},Tt=xe=>{L(xe),Ge(""),y(!0)},Cs=()=>{y(!1),L(null),Ge("")},qr=()=>{if(!ue){te.error("Please select a member");return}const xe={offline_award_id:U.id,member_id:ue,sublevel_id:pe||null,assigned_by:(n==null?void 0:n.email)||"",notes:we};Te.mutate(xe)},ki=()=>{K&&Ze.mutate(K.id)},Pn=async(xe,$t)=>{var Us;const et=(Us=xe.target.files)==null?void 0:Us[0];if(et){if(!et.type.startsWith("image/")){te.error("Please select an image file");return}de(!0);try{const Ft=await X.integrations.Core.UploadFile({file:et});$t==="online"?De(sr=>({...sr,image_url:Ft.file_url})):Se(sr=>({...sr,image_url:Ft.file_url})),te.success("Image uploaded successfully")}catch{te.error("Failed to upload image")}finally{de(!1)}}},_d=xe=>{if(xe==="online"){if(!Ye.name||!Ye.level){te.error("Please fill in all required fields");return}const $t={name:Ye.name,description:Ye.description,classification_id:Ye.classification_id||null,award_type:Ye.award_type,threshold:Ye.threshold?Number(Ye.threshold):null,level:Number(Ye.level),image_url:Ye.image_url,is_active:Ye.is_active};O&&O.type==="online"?bt.mutate({id:O.id,awardData:$t}):Hn.mutate($t)}else{if(!it.name||!it.level){te.error("Please fill in all required fields");return}const $t={name:it.name,description:it.description,classification_id:it.classification_id||null,period_text:it.period_text,level:Number(it.level),image_url:it.image_url,is_active:it.is_active};O&&O.type==="offline"?hs.mutate({id:O.id,awardData:$t}):Je.mutate($t)}},Sd=()=>{if(!at.name){te.error("Please fill in all required fields");return}const xe={name:at.name,description:at.description,award_category:at.award_category,display_order:at.display_order?Number(at.display_order):0,is_active:at.is_active};k?as.mutate({id:k.id,data:xe}):yt.mutate(xe)},Cd=()=>{if(!$e.name){te.error("Please fill in all required fields");return}const xe={name:$e.name,threshold:$e.threshold?Number($e.threshold):null,display_order:$e.display_order?Number($e.display_order):0,image_url:$e.image_url,is_active:$e.is_active};z.type==="online"?xe.award_id=z.id:xe.offline_award_id=z.id,R?ms.mutate({id:R.id,data:xe}):Qs.mutate(xe)},Dh=()=>{I&&(I.type==="online"?Ne.mutate(I.id):ut.mutate(I.id))},ic=xe=>{switch(xe){case"events_attended":return"Events Attended";case"articles_published":return"Articles Published";case"jobs_posted":return"Jobs Posted";default:return xe}},sn=xe=>on.filter($t=>$t.offline_award_id===xe).length,Oh=xe=>on.filter(et=>et.offline_award_id===xe).map(et=>{const Us=Ss.find(Ft=>Ft.id===et.member_id);return{...et,member:Us}}).filter(et=>et.member),to=Ss.filter(xe=>{var et,Us,Ft;if(!ze)return!0;const $t=ze.toLowerCase();return((et=xe.first_name)==null?void 0:et.toLowerCase().includes($t))||((Us=xe.last_name)==null?void 0:Us.toLowerCase().includes($t))||((Ft=xe.email)==null?void 0:Ft.toLowerCase().includes($t))}),ul=Oh($==null?void 0:$.id).filter(xe=>{var et,Us,Ft;if(!Ce)return!0;const $t=Ce.toLowerCase();return((et=xe.member.first_name)==null?void 0:et.toLowerCase().includes($t))||((Us=xe.member.last_name)==null?void 0:Us.toLowerCase().includes($t))||((Ft=xe.member.email)==null?void 0:Ft.toLowerCase().includes($t))}),zr=(xe,$t=!1)=>$t?Ds.filter(et=>et.offline_award_id===xe):Ds.filter(et=>et.award_id===xe),kd=()=>{const xe=Jt.filter(et=>et.award_category==="online"&&et.is_active),$t=lt.filter(et=>!et.classification_id);return e.jsxs("div",{className:"space-y-8",children:[xe.map(et=>{const Us=lt.filter(Ft=>Ft.classification_id===et.id);return Us.length===0?null:e.jsxs("div",{className:"border-2 border-slate-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:et.name}),et.description&&e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:et.description})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(J,{variant:"outline",size:"sm",onClick:()=>Br(et),children:[e.jsx(As,{className:"w-3 h-3 mr-1"}),"Edit"]}),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>{Z(et),_(!0)},children:e.jsx(os,{className:"w-3 h-3"})})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Us.map(Ft=>{const sr=zr(Ft.id,!1);return e.jsxs(le,{className:"border-slate-200 hover:shadow-md transition-shadow",children:[e.jsx(Fe,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(Ue,{className:"text-base",children:Ft.name}),Ft.description&&e.jsx("p",{className:"text-xs text-slate-600 mt-1",children:Ft.description})]}),Ft.image_url&&e.jsx("img",{src:Ft.image_url,alt:Ft.name,className:"w-12 h-12 object-contain ml-2"})]})}),e.jsxs(ce,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Type:"}),e.jsx(ye,{variant:"secondary",children:ic(Ft.award_type)})]}),Ft.threshold&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Base Threshold:"}),e.jsx(ye,{variant:"secondary",children:Ft.threshold})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Sublevels:"}),e.jsx(J,{variant:"ghost",size:"sm",onClick:()=>ua({...Ft,type:"online"}),className:"h-6 px-2",children:e.jsx(ye,{variant:"secondary",children:sr.length})})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Status:"}),e.jsx(ye,{variant:Ft.is_active?"default":"secondary",children:Ft.is_active?"Active":"Inactive"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(J,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>vn(Ft,"online"),children:[e.jsx(As,{className:"w-3 h-3 mr-1"}),"Edit"]}),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>{W({...Ft,type:"online"}),w(!0)},children:e.jsx(os,{className:"w-3 h-3"})})]})]})]},Ft.id)})})]},et.id)}),$t.length>0&&e.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-700 mb-4",children:"Unclassified Awards"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:$t.map(et=>{const Us=zr(et.id,!1);return e.jsxs(le,{className:"border-slate-200 hover:shadow-md transition-shadow",children:[e.jsx(Fe,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(Ue,{className:"text-base",children:et.name}),et.description&&e.jsx("p",{className:"text-xs text-slate-600 mt-1",children:et.description})]}),et.image_url&&e.jsx("img",{src:et.image_url,alt:et.name,className:"w-12 h-12 object-contain ml-2"})]})}),e.jsxs(ce,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Type:"}),e.jsx(ye,{variant:"secondary",children:ic(et.award_type)})]}),et.threshold&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Base Threshold:"}),e.jsx(ye,{variant:"secondary",children:et.threshold})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Sublevels:"}),e.jsx(J,{variant:"ghost",size:"sm",onClick:()=>ua({...et,type:"online"}),className:"h-6 px-2",children:e.jsx(ye,{variant:"secondary",children:Us.length})})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Status:"}),e.jsx(ye,{variant:et.is_active?"default":"secondary",children:et.is_active?"Active":"Inactive"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(J,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>vn(et,"online"),children:[e.jsx(As,{className:"w-3 h-3 mr-1"}),"Edit"]}),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>{W({...et,type:"online"}),w(!0)},children:e.jsx(os,{className:"w-3 h-3"})})]})]})]},et.id)})})]})]})},Ed=()=>{const xe=Jt.filter(et=>et.award_category==="offline"&&et.is_active),$t=es.filter(et=>!et.classification_id);return e.jsxs("div",{className:"space-y-8",children:[xe.map(et=>{const Us=es.filter(Ft=>Ft.classification_id===et.id);return Us.length===0?null:e.jsxs("div",{className:"border-2 border-slate-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:et.name}),et.description&&e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:et.description})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(J,{variant:"outline",size:"sm",onClick:()=>Br(et),children:[e.jsx(As,{className:"w-3 h-3 mr-1"}),"Edit"]}),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>{Z(et),_(!0)},children:e.jsx(os,{className:"w-3 h-3"})})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Us.map(Ft=>{const sr=zr(Ft.id,!0);return e.jsxs(le,{className:"border-slate-200 hover:shadow-md transition-shadow",children:[e.jsx(Fe,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(Ue,{className:"text-base",children:Ft.name}),Ft.description&&e.jsx("p",{className:"text-xs text-slate-600 mt-1",children:Ft.description})]}),Ft.image_url&&e.jsx("img",{src:Ft.image_url,alt:Ft.name,className:"w-12 h-12 object-contain ml-2"})]})}),e.jsxs(ce,{className:"space-y-2",children:[Ft.period_text&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Period:"}),e.jsx(ye,{variant:"secondary",children:Ft.period_text})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Sublevels:"}),e.jsx(J,{variant:"ghost",size:"sm",onClick:()=>ua({...Ft,type:"offline"}),className:"h-6 px-2",children:e.jsx(ye,{variant:"secondary",children:sr.length})})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Assigned:"}),e.jsx("button",{onClick:()=>Tt(Ft),className:"hover:opacity-80 transition-opacity",children:e.jsxs(ye,{variant:"secondary",className:"cursor-pointer",children:[e.jsx(ws,{className:"w-3 h-3 mr-1"}),sn(Ft.id)]})})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Status:"}),e.jsx(ye,{variant:Ft.is_active?"default":"secondary",children:Ft.is_active?"Active":"Inactive"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(J,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>ft(Ft),children:[e.jsx(Zc,{className:"w-3 h-3 mr-1"}),"Assign"]}),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>vn(Ft,"offline"),children:e.jsx(As,{className:"w-3 h-3"})}),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>{W({...Ft,type:"offline"}),w(!0)},children:e.jsx(os,{className:"w-3 h-3"})})]})]})]},Ft.id)})})]},et.id)}),$t.length>0&&e.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-700 mb-4",children:"Unclassified Awards"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:$t.map(et=>{const Us=zr(et.id,!0);return e.jsxs(le,{className:"border-slate-200 hover:shadow-md transition-shadow",children:[e.jsx(Fe,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(Ue,{className:"text-base",children:et.name}),et.description&&e.jsx("p",{className:"text-xs text-slate-600 mt-1",children:et.description})]}),et.image_url&&e.jsx("img",{src:et.image_url,alt:et.name,className:"w-12 h-12 object-contain ml-2"})]})}),e.jsxs(ce,{className:"space-y-2",children:[et.period_text&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Period:"}),e.jsx(ye,{variant:"secondary",children:et.period_text})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Sublevels:"}),e.jsx(J,{variant:"ghost",size:"sm",onClick:()=>ua({...et,type:"offline"}),className:"h-6 px-2",children:e.jsx(ye,{variant:"secondary",children:Us.length})})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Assigned:"}),e.jsx("button",{onClick:()=>Tt(et),className:"hover:opacity-80 transition-opacity",children:e.jsxs(ye,{variant:"secondary",className:"cursor-pointer",children:[e.jsx(ws,{className:"w-3 h-3 mr-1"}),sn(et.id)]})})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Status:"}),e.jsx(ye,{variant:et.is_active?"default":"secondary",children:et.is_active?"Active":"Inactive"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(J,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>ft(et),children:[e.jsx(Zc,{className:"w-3 h-3 mr-1"}),"Assign"]}),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>vn(et,"offline"),children:e.jsx(As,{className:"w-3 h-3"})}),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>{W({...et,type:"offline"}),w(!0)},children:e.jsx(os,{className:"w-3 h-3"})})]})]})]},et.id)})})]})]})},hl=Rt||Bs;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Award Management"}),e.jsx("p",{className:"text-slate-600",children:"Create and manage online and offline awards"})]})}),e.jsxs(ev,{value:r,onValueChange:a,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs(sp,{children:[e.jsx(fr,{value:"online",children:"Online Awards"}),e.jsx(fr,{value:"offline",children:"Offline Awards"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(J,{variant:"outline",onClick:()=>Br(),className:"bg-white",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Add Classification"]}),e.jsxs(J,{onClick:()=>vn(null,r),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Add ",r==="online"?"Online":"Offline"," Award"]})]})]}),e.jsx(Io,{value:"online",children:hl?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(vt,{className:"w-8 h-8 animate-spin text-blue-600"})}):lt.length===0?e.jsx(le,{className:"border-slate-200",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(Ln,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No online awards yet"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"Create your first online award to get started"}),e.jsxs(J,{onClick:()=>vn(null,"online"),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Add Online Award"]})]})}):kd()}),e.jsx(Io,{value:"offline",children:hl?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(vt,{className:"w-8 h-8 animate-spin text-blue-600"})}):es.length===0?e.jsx(le,{className:"border-slate-200",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(Ln,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No offline awards yet"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"Create your first offline award to get started"}),e.jsxs(J,{onClick:()=>vn(null,"offline"),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Add Offline Award"]})]})}):Ed()})]}),e.jsx(Ct,{open:i,onOpenChange:l,children:e.jsxs(Nt,{className:"max-w-2xl",children:[e.jsxs(kt,{children:[e.jsxs(Et,{children:[O?"Edit":"Create"," ",(O==null?void 0:O.type)==="offline"||!O&&r==="offline"?"Offline":"Online"," Award"]}),e.jsx(ya,{children:(O==null?void 0:O.type)==="offline"||!O&&r==="offline"?"Create manually assigned awards for specific periods or achievements":"Awards are automatically earned when members reach the specified threshold"})]}),(O==null?void 0:O.type)==="offline"||!O&&r==="offline"?e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"name",children:"Award Name *"}),e.jsx(he,{id:"name",value:it.name,onChange:xe=>Se({...it,name:xe.target.value}),placeholder:"e.g., Outstanding Contribution Award"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"description",children:"Description"}),e.jsx(Gt,{id:"description",value:it.description,onChange:xe=>Se({...it,description:xe.target.value}),placeholder:"What does this award represent?",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"classification",children:"Classification"}),e.jsxs(Ke,{value:it.classification_id,onValueChange:xe=>Se({...it,classification_id:xe}),children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:"Select classification (optional)"})}),e.jsxs(We,{children:[e.jsx(re,{value:null,children:"No Classification"}),Jt.filter(xe=>xe.award_category==="offline").map(xe=>e.jsx(re,{value:xe.id,children:xe.name},xe.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"period_text",children:"Period / Achievement *"}),e.jsx(he,{id:"period_text",value:it.period_text,onChange:xe=>Se({...it,period_text:xe.target.value}),placeholder:"e.g., 1st quarter, 2026, Summer 25"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Free text for the period or achievement"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"level",children:"Level *"}),e.jsx(he,{id:"level",type:"number",value:it.level,onChange:xe=>Se({...it,level:xe.target.value}),placeholder:"e.g., 1"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Used for ordering awards (1 = first, 2 = second, etc.)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"image",children:"Award Image"}),e.jsxs("div",{className:"flex items-center gap-4",children:[it.image_url&&e.jsx("img",{src:it.image_url,alt:"Award",className:"w-16 h-16 object-contain border border-slate-200 rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"file",id:"image-upload-offline",accept:"image/*",onChange:xe=>Pn(xe,"offline"),className:"hidden"}),e.jsx(J,{type:"button",variant:"outline",disabled:se,onClick:()=>document.getElementById("image-upload-offline").click(),children:se?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Gs,{className:"w-4 h-4 mr-2"}),"Upload Image"]})})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ee,{htmlFor:"is_active",children:"Active"}),e.jsx(cs,{id:"is_active",checked:it.is_active,onCheckedChange:xe=>Se({...it,is_active:xe})})]})]}):e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"name",children:"Award Name *"}),e.jsx(he,{id:"name",value:Ye.name,onChange:xe=>De({...Ye,name:xe.target.value}),placeholder:"e.g., Event Champion I"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"description",children:"Description"}),e.jsx(Gt,{id:"description",value:Ye.description,onChange:xe=>De({...Ye,description:xe.target.value}),placeholder:"What does this award represent?",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"classification",children:"Classification"}),e.jsxs(Ke,{value:Ye.classification_id,onValueChange:xe=>De({...Ye,classification_id:xe}),children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:"Select classification (optional)"})}),e.jsxs(We,{children:[e.jsx(re,{value:null,children:"No Classification"}),Jt.filter(xe=>xe.award_category==="online").map(xe=>e.jsx(re,{value:xe.id,children:xe.name},xe.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"award_type",children:"Award Type *"}),e.jsxs(Ke,{value:Ye.award_type,onValueChange:xe=>De({...Ye,award_type:xe}),children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"events_attended",children:"Events Attended"}),e.jsx(re,{value:"articles_published",children:"Articles Published"}),e.jsx(re,{value:"jobs_posted",children:"Jobs Posted"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"threshold",children:"Base Threshold"}),e.jsx(he,{id:"threshold",type:"number",value:Ye.threshold,onChange:xe=>De({...Ye,threshold:xe.target.value}),placeholder:"e.g., 5 (optional)"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Leave empty to use sublevel thresholds only"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"level",children:"Level *"}),e.jsx(he,{id:"level",type:"number",value:Ye.level,onChange:xe=>De({...Ye,level:xe.target.value}),placeholder:"e.g., 1"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Used for ordering awards (1 = first, 2 = second, etc.)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"image",children:"Award Image"}),e.jsxs("div",{className:"flex items-center gap-4",children:[Ye.image_url&&e.jsx("img",{src:Ye.image_url,alt:"Award",className:"w-16 h-16 object-contain border border-slate-200 rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"file",id:"image-upload-online",accept:"image/*",onChange:xe=>Pn(xe,"online"),className:"hidden"}),e.jsx(J,{type:"button",variant:"outline",disabled:se,onClick:()=>document.getElementById("image-upload-online").click(),children:se?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Gs,{className:"w-4 h-4 mr-2"}),"Upload Image"]})})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ee,{htmlFor:"is_active",children:"Active"}),e.jsx(cs,{id:"is_active",checked:Ye.is_active,onCheckedChange:xe=>De({...Ye,is_active:xe})})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:tr,children:"Cancel"}),e.jsxs(J,{onClick:()=>_d((O==null?void 0:O.type)||r),className:"bg-blue-600 hover:bg-blue-700",children:[O?"Update":"Create"," Award"]})]})]})}),e.jsx(Ct,{open:p,onOpenChange:g,children:e.jsxs(Nt,{className:"max-w-2xl max-h-[80vh] flex flex-col",children:[e.jsxs(kt,{children:[e.jsxs(Et,{children:["Assign Award: ",U==null?void 0:U.name]}),e.jsx(ya,{children:"Select a member to receive this award"})]}),e.jsxs("div",{className:"space-y-4 py-4 flex-1 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"member-search",children:"Search Members"}),e.jsx(he,{id:"member-search",value:ze,onChange:xe=>Ee(xe.target.value),placeholder:"Search by name or email..."})]}),e.jsxs("div",{className:"space-y-2 flex-1 overflow-hidden flex flex-col",children:[e.jsx(ee,{children:"Select Member *"}),e.jsx("div",{className:"border border-slate-200 rounded-lg overflow-y-auto flex-1",children:to.length===0?e.jsx("div",{className:"p-8 text-center text-slate-500",children:"No members found"}):e.jsx("div",{className:"divide-y divide-slate-200",children:to.map(xe=>e.jsx("button",{onClick:()=>oe(xe.id),className:`w-full p-3 text-left hover:bg-slate-50 transition-colors ${ue===xe.id?"bg-blue-50 hover:bg-blue-100":""}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-slate-900",children:[xe.first_name," ",xe.last_name]}),e.jsx("div",{className:"text-sm text-slate-600",children:xe.email})]}),ue===xe.id&&e.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-600 flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]})},xe.id))})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"sublevel",children:"Award Level"}),e.jsxs(Ke,{value:pe,onValueChange:je,children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:"Select level (optional)"})}),e.jsxs(We,{children:[e.jsx(re,{value:null,children:"No specific level"}),zr(U==null?void 0:U.id,!0).map(xe=>e.jsx(re,{value:xe.id,children:xe.name},xe.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"notes",children:"Notes (Optional)"}),e.jsx(Gt,{id:"notes",value:we,onChange:xe=>qe(xe.target.value),placeholder:"Add notes about this assignment...",rows:3})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:xt,children:"Cancel"}),e.jsx(J,{onClick:qr,className:"bg-blue-600 hover:bg-blue-700",disabled:!ue,children:"Assign Award"})]})]})}),e.jsx(Ct,{open:v,onOpenChange:y,children:e.jsxs(Nt,{className:"max-w-2xl max-h-[80vh] flex flex-col",children:[e.jsxs(kt,{children:[e.jsxs(Et,{children:["Assigned Members: ",$==null?void 0:$.name]}),e.jsx(ya,{children:"View and manage members who have received this award"})]}),e.jsxs("div",{className:"space-y-4 py-4 flex-1 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"assigned-search",children:"Search Assigned Members"}),e.jsx(he,{id:"assigned-search",value:Ce,onChange:xe=>Ge(xe.target.value),placeholder:"Search by name or email..."})]}),e.jsxs("div",{className:"space-y-2 flex-1 overflow-hidden flex flex-col",children:[e.jsxs(ee,{children:["Assigned Members (",ul.length,")"]}),e.jsx("div",{className:"border border-slate-200 rounded-lg overflow-y-auto flex-1",children:ul.length===0?e.jsx("div",{className:"p-8 text-center text-slate-500",children:Ce?"No matching members found":"No members assigned to this award yet"}):e.jsx("div",{className:"divide-y divide-slate-200",children:ul.map(({id:xe,member:$t,notes:et,created_date:Us,assigned_by:Ft,sublevel_id:sr})=>{const $r=sr?Ds.find(Ei=>Ei.id===sr):null;return e.jsx("div",{className:"p-3 hover:bg-slate-50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"font-medium text-slate-900",children:[$t.first_name," ",$t.last_name]}),$r&&e.jsxs(ye,{variant:"secondary",className:"flex items-center gap-1",children:[$r.image_url&&e.jsx("img",{src:$r.image_url,alt:$r.name,className:"w-3 h-3"}),$r.name]})]}),e.jsx("div",{className:"text-sm text-slate-600",children:$t.email}),et&&e.jsxs("div",{className:"text-xs text-slate-500 mt-1 italic",children:["Note: ",et]}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Assigned ",new Date(Us).toLocaleDateString(),Ft&&` by ${Ft}`]})]}),e.jsx(J,{variant:"ghost",size:"sm",onClick:()=>{ae({id:xe,member:$t}),C(!0)},className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(xY,{className:"w-4 h-4"})})]})},xe)})})})]})]}),e.jsx(zt,{children:e.jsx(J,{variant:"outline",onClick:Cs,children:"Close"})})]})}),e.jsx(Ml,{open:P,onOpenChange:C,children:e.jsxs(Vi,{children:[e.jsxs(Wi,{children:[e.jsx(Ki,{children:"Remove Award Assignment?"}),e.jsxs(Gi,{children:["Are you sure you want to remove this award from"," ",e.jsxs("strong",{children:[(wr=K==null?void 0:K.member)==null?void 0:wr.first_name," ",(Pd=K==null?void 0:K.member)==null?void 0:Pd.last_name]}),"? This action cannot be undone."]})]}),e.jsxs(Hi,{children:[e.jsx(Qi,{children:"Cancel"}),e.jsx(Yi,{onClick:ki,className:"bg-red-600 hover:bg-red-700",children:"Remove Award"})]})]})}),e.jsx(Ml,{open:j,onOpenChange:w,children:e.jsxs(Vi,{children:[e.jsxs(Wi,{children:[e.jsx(Ki,{children:"Are you sure?"}),e.jsxs(Gi,{children:['This will permanently delete the award "',I==null?void 0:I.name,'". This action cannot be undone.']})]}),e.jsxs(Hi,{children:[e.jsx(Qi,{children:"Cancel"}),e.jsx(Yi,{onClick:Dh,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),e.jsx(Ct,{open:o,onOpenChange:c,children:e.jsxs(Nt,{children:[e.jsxs(kt,{children:[e.jsxs(Et,{children:[k?"Edit":"Create"," Classification"]}),e.jsx(ya,{children:"Organize awards into categories like Writing Awards, Attendance Awards, etc."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"class-name",children:"Name *"}),e.jsx(he,{id:"class-name",value:at.name,onChange:xe=>_e({...at,name:xe.target.value}),placeholder:"e.g., Writing Awards"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"class-description",children:"Description"}),e.jsx(Gt,{id:"class-description",value:at.description,onChange:xe=>_e({...at,description:xe.target.value}),placeholder:"Describe this classification",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"class-category",children:"Category *"}),e.jsxs(Ke,{value:at.award_category,onValueChange:xe=>_e({...at,award_category:xe}),disabled:!!k,children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"online",children:"Online Awards"}),e.jsx(re,{value:"offline",children:"Offline Awards"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"class-order",children:"Display Order"}),e.jsx(he,{id:"class-order",type:"number",value:at.display_order,onChange:xe=>_e({...at,display_order:xe.target.value}),placeholder:"0"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ee,{htmlFor:"class-active",children:"Active"}),e.jsx(cs,{id:"class-active",checked:at.is_active,onCheckedChange:xe=>_e({...at,is_active:xe})})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsx(J,{onClick:Sd,className:"bg-blue-600 hover:bg-blue-700",children:k?"Update":"Create"})]})]})}),e.jsx(Ml,{open:N,onOpenChange:_,children:e.jsxs(Vi,{children:[e.jsxs(Wi,{children:[e.jsx(Ki,{children:"Delete Classification?"}),e.jsxs(Gi,{children:['This will permanently delete "',q==null?void 0:q.name,'". Awards in this classification will become unclassified.']})]}),e.jsxs(Hi,{children:[e.jsx(Qi,{children:"Cancel"}),e.jsx(Yi,{onClick:()=>ds.mutate(q.id),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),e.jsx(Ct,{open:u,onOpenChange:d,children:e.jsxs(Nt,{className:"max-w-3xl max-h-[80vh] flex flex-col",children:[e.jsxs(kt,{children:[e.jsxs(Et,{children:["Manage Sublevels: ",z==null?void 0:z.name]}),e.jsx(ya,{children:"Add Bronze, Silver, Gold or custom sublevels for this award"})]}),e.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[e.jsx("div",{className:"mb-4",children:e.jsxs(J,{onClick:()=>ve(null),size:"sm",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Add Sublevel"]})}),e.jsx("div",{className:"flex-1 overflow-y-auto border border-slate-200 rounded-lg",children:zr(z==null?void 0:z.id,(z==null?void 0:z.type)==="offline").length===0?e.jsx("div",{className:"p-8 text-center text-slate-500",children:"No sublevels yet. Add Bronze, Silver, Gold levels."}):e.jsx("div",{className:"divide-y divide-slate-200",children:zr(z==null?void 0:z.id,(z==null?void 0:z.type)==="offline").map(xe=>e.jsx("div",{className:"p-4 hover:bg-slate-50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-3",children:[xe.image_url&&e.jsx("img",{src:xe.image_url,alt:xe.name,className:"w-10 h-10 object-contain"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900",children:xe.name}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[xe.threshold&&e.jsxs(ye,{variant:"secondary",children:["Threshold: ",xe.threshold]}),e.jsxs(ye,{variant:"secondary",children:["Order: ",xe.display_order]}),e.jsx(ye,{variant:xe.is_active?"default":"secondary",children:xe.is_active?"Active":"Inactive"})]})]})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(J,{variant:"ghost",size:"sm",onClick:()=>ve(xe),children:e.jsx(As,{className:"w-4 h-4"})}),e.jsx(J,{variant:"ghost",size:"sm",onClick:()=>{Y(xe),A(!0)},className:"text-red-600 hover:text-red-700",children:e.jsx(os,{className:"w-4 h-4"})})]})]})},xe.id))})})]}),e.jsx(zt,{children:e.jsx(J,{variant:"outline",onClick:()=>{d(!1),V(null)},children:"Close"})})]})}),e.jsx(Ct,{open:m,onOpenChange:h,children:e.jsxs(Nt,{children:[e.jsxs(kt,{children:[e.jsxs(Et,{children:[R?"Edit":"Add"," Sublevel"]}),e.jsx(ya,{children:"Define a sublevel like Bronze, Silver, or Gold"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"sublevel-name",children:"Name *"}),e.jsx(he,{id:"sublevel-name",value:$e.name,onChange:xe=>nt({...$e,name:xe.target.value}),placeholder:"e.g., Bronze, Silver, Gold"})]}),(z==null?void 0:z.type)==="online"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"sublevel-threshold",children:"Threshold"}),e.jsx(he,{id:"sublevel-threshold",type:"number",value:$e.threshold,onChange:xe=>nt({...$e,threshold:xe.target.value}),placeholder:"e.g., 5"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Override the award's base threshold for this sublevel"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"sublevel-order",children:"Display Order *"}),e.jsx(he,{id:"sublevel-order",type:"number",value:$e.display_order,onChange:xe=>nt({...$e,display_order:xe.target.value}),placeholder:"0"}),e.jsx("p",{className:"text-xs text-slate-500",children:"0 = Bronze, 1 = Silver, 2 = Gold, etc."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"sublevel-image",children:"Image"}),e.jsxs("div",{className:"flex items-center gap-4",children:[$e.image_url&&e.jsx("img",{src:$e.image_url,alt:"Sublevel",className:"w-16 h-16 object-contain border border-slate-200 rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"file",id:"sublevel-image-upload",accept:"image/*",onChange:xe=>{var et;const $t=(et=xe.target.files)==null?void 0:et[0];$t&&(de(!0),X.integrations.Core.UploadFile({file:$t}).then(Us=>{nt(Ft=>({...Ft,image_url:Us.file_url})),te.success("Image uploaded")}).catch(()=>{te.error("Failed to upload image")}).finally(()=>{de(!1)}))},className:"hidden"}),e.jsx(J,{type:"button",variant:"outline",disabled:se,onClick:()=>document.getElementById("sublevel-image-upload").click(),children:se?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Gs,{className:"w-4 h-4 mr-2"}),"Upload Image"]})})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ee,{htmlFor:"sublevel-active",children:"Active"}),e.jsx(cs,{id:"sublevel-active",checked:$e.is_active,onCheckedChange:xe=>nt({...$e,is_active:xe})})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>{h(!1),F(null)},children:"Cancel"}),e.jsx(J,{onClick:Cd,className:"bg-blue-600 hover:bg-blue-700",children:R?"Update":"Create"})]})]})}),e.jsx(Ml,{open:T,onOpenChange:A,children:e.jsxs(Vi,{children:[e.jsxs(Wi,{children:[e.jsx(Ki,{children:"Delete Sublevel?"}),e.jsxs(Gi,{children:['This will permanently delete the "',Q==null?void 0:Q.name,'" sublevel.']})]}),e.jsxs(Hi,{children:[e.jsx(Qi,{children:"Cancel"}),e.jsx(Yi,{onClick:()=>Ir.mutate(Q.id),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})})}const r9=t=>()=>{throw new Error(`Base44 function "${t}" is not implemented. Migrate this feature to Supabase/Vercel.`)},VNe=r9("renameResourceSubcategory"),WNe=r9("sendTeamMemberInvite");function a9({memberInfo:t,organizationInfo:s,isAdmin:n}){const[r,a]=b.useState(""),[i,l]=b.useState(!1),[o,c]=b.useState(1),[u]=b.useState(9),[d,m]=b.useState(null),[h,p]=b.useState(!1),[g,v]=b.useState(""),[y,j]=b.useState({first_name:"",last_name:"",job_title:"",email:"",profile_photo_url:"",linkedin_url:""}),w=Yt(),{data:N=[],isLoading:_}=me({queryKey:["team-members",t==null?void 0:t.organization_id],queryFn:async()=>t!=null&&t.organization_id?(await X.entities.Member.list()).filter(ae=>ae.organization_id===t.organization_id):[],enabled:!!(t!=null&&t.organization_id),staleTime:60*1e3}),{data:T=[]}=me({queryKey:["all-articles"],queryFn:async()=>await X.entities.BlogPost.list(),staleTime:60*1e3}),{data:A=[]}=me({queryKey:["roles"],queryFn:async()=>await X.entities.Role.list(),staleTime:300*1e3}),{data:P=[]}=me({queryKey:["awards"],queryFn:async()=>(await X.entities.Award.list()).filter(ae=>ae.is_active),staleTime:300*1e3}),{data:C=[]}=me({queryKey:["offline-assignments"],queryFn:async()=>await X.entities.OfflineAwardAssignment.list(),staleTime:60*1e3}),{data:O=[]}=me({queryKey:["award-sublevels"],queryFn:async()=>await X.entities.AwardSublevel.list(),staleTime:300*1e3}),{data:M=[]}=me({queryKey:["award-classifications"],queryFn:async()=>await X.entities.AwardClassification.list(),staleTime:300*1e3}),{data:k=[]}=me({queryKey:["offline-awards"],queryFn:async()=>(await X.entities.OfflineAward.list()).filter(ae=>ae.is_active),staleTime:300*1e3}),{data:E=[]}=me({queryKey:["all-bookings"],queryFn:async()=>await X.entities.Booking.list(),staleTime:60*1e3}),R=Le({mutationFn:async({memberId:K,newValue:ae})=>await X.entities.Member.update(K,{login_enabled:ae}),onSuccess:()=>{w.invalidateQueries({queryKey:["team-members"]}),te.success("Login access updated successfully")},onError:K=>{te.error("Failed to update login access")}}),F=Le({mutationFn:async({memberId:K,data:ae})=>await X.entities.Member.update(K,ae),onSuccess:()=>{w.invalidateQueries({queryKey:["team-members"]}),te.success("Member updated successfully"),m(null)},onError:K=>{te.error("Failed to update member")}}),z=Le({mutationFn:async K=>(await WNe({email:K,inviterName:`${t.first_name} ${t.last_name}`})).data,onSuccess:()=>{te.success("Invitation sent successfully"),p(!1),v("")},onError:K=>{var ae,se;te.error(((se=(ae=K.response)==null?void 0:ae.data)==null?void 0:se.error)||"Failed to send invitation")}}),V=b.useMemo(()=>{const K={};return N.forEach(ae=>{const se=T.filter(je=>je.author_id===ae.id&&je.status==="published").length,de=E.filter(je=>je.member_id===ae.id&&je.status==="confirmed").length,ue=P.filter(je=>(je.award_type==="events_attended"?de:je.award_type==="articles_published"?se:0)>=je.threshold),pe=C.filter(je=>je.member_id===ae.id).map(je=>{const we=k.find(ze=>ze.id===je.offline_award_id);if(!we)return null;const qe=je.sublevel_id?O.find(ze=>ze.id===je.sublevel_id):null;return{...we,sublevel:qe}}).filter(Boolean);K[ae.id]={publishedArticles:se,eventsAttended:de,onlineAwards:ue,offlineAwards:pe,totalAwards:ue.length+pe.length}}),K},[N,T,E,P,C,k,O]),U=b.useMemo(()=>{let K=N;if(i||(K=K.filter(ae=>ae.login_enabled!==!1)),r){const ae=r.toLowerCase();K=K.filter(se=>{var de,ue,oe,pe;return((de=se.first_name)==null?void 0:de.toLowerCase().includes(ae))||((ue=se.last_name)==null?void 0:ue.toLowerCase().includes(ae))||((oe=se.email)==null?void 0:oe.toLowerCase().includes(ae))||((pe=se.job_title)==null?void 0:pe.toLowerCase().includes(ae))})}return K},[N,r,i]),B=Math.ceil(U.length/u),$=b.useMemo(()=>{const K=(o-1)*u;return U.slice(K,K+u)},[U,o,u]);b.useEffect(()=>{c(1)},[r,i]);const L=(K,ae)=>{R.mutate({memberId:K.id,newValue:ae})},I=K=>{m(K),j({first_name:K.first_name||"",last_name:K.last_name||"",job_title:K.job_title||"",email:K.email||"",profile_photo_url:K.profile_photo_url||"",linkedin_url:K.linkedin_url||""})},W=()=>{j({...y,profile_photo_url:""})},q=()=>{if(N.some(ae=>ae.id!==d.id&&ae.email.toLowerCase()===y.email.toLowerCase())){te.error("This email is already in use by another member");return}if(!y.first_name||!y.last_name||!y.email){te.error("First name, last name, and email are required");return}F.mutate({memberId:d.id,data:{first_name:y.first_name,last_name:y.last_name,job_title:y.job_title,email:y.email,profile_photo_url:y.profile_photo_url,linkedin_url:y.linkedin_url}})},Z=()=>{if(!g){te.error("Please enter an email address");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g)){te.error("Please enter a valid email address");return}const ae=t.email.split("@")[1].toLowerCase(),se=g.split("@")[1].toLowerCase();if(ae!==se){te.error(`Email domain must match yours: @${ae}`);return}if(N.find(ue=>ue.email.toLowerCase()===g.toLowerCase())){te.error("A team member with this email already exists");return}z.mutate(g)};if(_)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(vt,{className:"w-8 h-8 animate-spin text-blue-600"})});const Y=t!=null&&t.email?t.email.split("@")[1]:"";return e.jsxs(a2,{delayDuration:100,children:[e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ws,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900",children:"Team Directory"}),e.jsxs("p",{className:"text-slate-600",children:[(s==null?void 0:s.name)&&`${s.name} - `,U.length," ",U.length===1?"member":"members"]})]})]}),n&&e.jsxs(J,{onClick:()=>p(!0),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Zc,{className:"w-4 h-4 mr-2"}),"Invite Member"]})]})}),e.jsx(le,{className:"mb-6 border-slate-200",children:e.jsx(ce,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[e.jsxs("div",{className:"flex-1 relative w-full",children:[e.jsx(Ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx(he,{placeholder:"Search by name, email, or job title...",value:r,onChange:K=>a(K.target.value),className:"pl-10"})]}),n&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ee,{htmlFor:"show-disabled",className:"text-sm text-slate-700 whitespace-nowrap cursor-pointer",children:"Show inactive accounts"}),e.jsx(cs,{id:"show-disabled",checked:i,onCheckedChange:l})]})]})})}),$.length===0?e.jsx(le,{className:"border-slate-200",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(ws,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No members found"}),e.jsx("p",{className:"text-slate-600",children:r||i?"Try adjusting your search criteria or filters":"No team members available"})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:$.map(K=>{const ae=V[K.id]||{},se=A.find(ue=>ue.id===K.role_id),de=K.login_enabled??!0;return e.jsxs(le,{className:"border-slate-200 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>I(K),children:[e.jsx(Fe,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:K.profile_photo_url?e.jsx("img",{src:K.profile_photo_url,alt:`${K.first_name} ${K.last_name}`,className:"w-16 h-16 rounded-full object-cover border-2 border-slate-200"}):e.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-200 flex items-center justify-center",children:e.jsx(Xs,{className:"w-8 h-8 text-slate-400"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs(Ue,{className:"text-base mb-1",children:[K.first_name," ",K.last_name]}),se&&e.jsx("div",{className:"flex items-center gap-1 mb-1",children:e.jsxs(ye,{variant:"secondary",className:se.is_admin?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700",children:[se.is_admin&&e.jsx(In,{className:"w-3 h-3 mr-1"}),se.name]})}),K.job_title&&e.jsx("p",{className:"text-xs text-slate-600 line-clamp-1",children:K.job_title})]}),e.jsx(gi,{className:"w-4 h-4 text-slate-400"})]})}),e.jsxs(ce,{className:"space-y-3",onClick:ue=>ue.stopPropagation(),children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ms,{className:"w-4 h-4 text-slate-400 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-slate-700 break-all",children:K.email})]}),K.last_activity&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(tn,{className:"w-4 h-4 text-slate-400 flex-shrink-0"}),e.jsxs("span",{className:"text-xs text-slate-600",children:["Last active ",jF(new Date(K.last_activity),{addSuffix:!0})]})]}),n&&e.jsxs("div",{className:"flex items-center justify-between pt-2 pb-2 border-y border-slate-200",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Login Access"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs ${de?"text-green-600":"text-slate-500"}`,children:de?"Active":"Inactive"}),e.jsx(cs,{checked:de,onCheckedChange:ue=>L(K,ue),disabled:R.isPending})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ns,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm text-slate-600",children:"Events"})]}),e.jsx(ye,{variant:"secondary",children:ae.eventsAttended||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-sm text-slate-600",children:"Articles"})]}),e.jsx(ye,{variant:"secondary",children:ae.publishedArticles||0})]}),ae.totalAwards>0&&e.jsxs("div",{className:"pt-3 border-t border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Ln,{className:"w-4 h-4 text-amber-600"}),e.jsxs("span",{className:"text-xs font-semibold text-slate-700",children:["Awards (",ae.totalAwards,")"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[ae.onlineAwards.slice(0,4).map(ue=>{const oe=ue.classification_id?M.find(pe=>pe.id===ue.classification_id):null;return e.jsxs(rf,{children:[e.jsx(af,{asChild:!0,children:e.jsxs("div",{className:"flex flex-col items-center p-2 bg-gradient-to-br from-amber-50 to-amber-100 rounded-lg border border-amber-200 cursor-help relative",children:[oe&&e.jsx(ye,{variant:"secondary",className:"absolute -top-1 -right-1 text-[8px] px-1 py-0 scale-75",children:oe.name}),ue.image_url?e.jsx("img",{src:ue.image_url,alt:ue.name,className:"w-8 h-8 object-contain mb-1"}):e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-amber-400 to-amber-600 rounded-full flex items-center justify-center mb-1",children:e.jsx(Ln,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"text-[10px] font-medium text-slate-900 text-center line-clamp-1",children:ue.name})]})}),e.jsxs(Uu,{children:[e.jsx("p",{className:"font-semibold",children:ue.name}),ue.description&&e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:ue.description})]})]},`online-${ue.id}`)}),ae.offlineAwards.slice(0,Math.max(0,4-ae.onlineAwards.length)).map((ue,oe)=>{var je;const pe=ue.classification_id?M.find(we=>we.id===ue.classification_id):null;return e.jsxs(rf,{children:[e.jsx(af,{asChild:!0,children:e.jsxs("div",{className:"flex flex-col items-center p-2 bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg border border-purple-200 cursor-help relative",children:[pe&&e.jsx(ye,{variant:"secondary",className:"absolute -top-1 -right-1 text-[8px] px-1 py-0 scale-75",children:pe.name}),(je=ue.sublevel)!=null&&je.image_url?e.jsx("img",{src:ue.sublevel.image_url,alt:ue.sublevel.name,className:"w-8 h-8 object-contain mb-1"}):ue.image_url?e.jsx("img",{src:ue.image_url,alt:ue.name,className:"w-8 h-8 object-contain mb-1"}):e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-400 to-purple-600 rounded-full flex items-center justify-center mb-1",children:e.jsx(Ln,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"text-[10px] font-medium text-slate-900 text-center line-clamp-1",children:ue.name}),ue.sublevel&&e.jsx(ye,{className:"mt-0.5 bg-purple-600 text-white text-[8px] px-1 py-0",children:ue.sublevel.name})]})}),e.jsxs(Uu,{children:[e.jsx("p",{className:"font-semibold",children:ue.name}),ue.sublevel&&e.jsxs("p",{className:"text-xs text-purple-400 mt-1",children:["Level: ",ue.sublevel.name]}),ue.period_text&&e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:ue.period_text}),ue.description&&e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:ue.description})]})]},`offline-${ue.id}-${oe}`)}),ae.totalAwards>4&&e.jsx("div",{className:"flex items-center justify-center p-2 bg-slate-100 rounded-lg border border-slate-200",children:e.jsxs("span",{className:"text-xs font-medium text-slate-600",children:["+",ae.totalAwards-4," more"]})})]})]})]})]},K.id)})}),B>1&&e.jsxs("div",{className:"mt-6 flex justify-center items-center gap-2",children:[e.jsx(J,{variant:"outline",size:"sm",onClick:()=>c(K=>Math.max(1,K-1)),disabled:o===1,children:e.jsx(Wn,{className:"w-4 h-4"})}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:B},(K,ae)=>ae+1).map(K=>e.jsx(J,{variant:o===K?"default":"outline",size:"sm",onClick:()=>c(K),className:"w-9",children:K},K))}),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>c(K=>Math.min(B,K+1)),disabled:o===B,children:e.jsx(js,{className:"w-4 h-4"})})]})]})]})}),e.jsx(Ct,{open:!!d,onOpenChange:K=>!K&&m(null),children:e.jsxs(Nt,{children:[e.jsxs(kt,{children:[e.jsx(Et,{children:"Edit Member"}),e.jsx(ya,{children:"Update member information. Email must be unique."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Profile Photo"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 flex items-center justify-center overflow-hidden border-2 border-slate-200",children:y.profile_photo_url?e.jsx("img",{src:y.profile_photo_url,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx(Xs,{className:"w-8 h-8 text-slate-400"})}),y.profile_photo_url&&e.jsxs(J,{type:"button",variant:"outline",size:"sm",onClick:W,children:[e.jsx(_s,{className:"w-4 h-4 mr-2"}),"Remove Photo"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"first_name",children:"First Name *"}),e.jsx(he,{id:"first_name",value:y.first_name,onChange:K=>j({...y,first_name:K.target.value}),placeholder:"First name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"last_name",children:"Last Name *"}),e.jsx(he,{id:"last_name",value:y.last_name,onChange:K=>j({...y,last_name:K.target.value}),placeholder:"Last name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"job_title",children:"Job Title"}),e.jsx(he,{id:"job_title",value:y.job_title,onChange:K=>j({...y,job_title:K.target.value}),placeholder:"Job title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"email",children:"Email *"}),e.jsx(he,{id:"email",type:"email",value:y.email,onChange:K=>j({...y,email:K.target.value}),placeholder:"email@example.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"linkedin_url",children:"LinkedIn URL"}),e.jsx(he,{id:"linkedin_url",type:"url",value:y.linkedin_url,onChange:K=>j({...y,linkedin_url:K.target.value}),placeholder:"https://www.linkedin.com/in/username"})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>m(null),children:"Cancel"}),e.jsx(J,{onClick:q,disabled:F.isPending,children:F.isPending?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})}),e.jsx(Ct,{open:h,onOpenChange:p,children:e.jsxs(Nt,{children:[e.jsxs(kt,{children:[e.jsx(Et,{children:"Invite Team Member"}),e.jsx(ya,{children:"Send an invitation to a new team member with a matching email domain."})]}),e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"invite_email",children:"Email Address *"}),e.jsx(he,{id:"invite_email",type:"email",value:g,onChange:K=>v(K.target.value),placeholder:`user@${Y}`}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Email domain must match: @",Y]})]})}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),e.jsx(J,{onClick:Z,disabled:z.isPending,className:"bg-blue-600 hover:bg-blue-700",children:z.isPending?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ms,{className:"w-4 h-4 mr-2"}),"Send Invitation"]})})]})]})})]})}function i9({memberInfo:t}){var V,U,B;const[s,n]=b.useState(""),[r,a]=b.useState(!1),[i,l]=b.useState(1),[o,c]=b.useState(9),[u,d]=b.useState(null),[m,h]=b.useState(!1),[p,g]=b.useState("name-asc"),{data:v=[],isLoading:y}=me({queryKey:["all-members-directory"],queryFn:async()=>await X.entities.Member.list(),staleTime:60*1e3}),{data:j=[]}=me({queryKey:["all-articles"],queryFn:async()=>await X.entities.BlogPost.list(),staleTime:60*1e3}),{data:w=[]}=me({queryKey:["roles"],queryFn:async()=>await X.entities.Role.list(),staleTime:300*1e3}),{data:N=[]}=me({queryKey:["organizations"],queryFn:async()=>await X.entities.Organization.list(),staleTime:300*1e3}),{data:_=[]}=me({queryKey:["awards"],queryFn:async()=>(await X.entities.Award.list()).filter(L=>L.is_active),staleTime:300*1e3}),{data:T=[]}=me({queryKey:["offline-assignments"],queryFn:async()=>await X.entities.OfflineAwardAssignment.list(),staleTime:60*1e3}),{data:A=[]}=me({queryKey:["offline-awards"],queryFn:async()=>(await X.entities.OfflineAward.list()).filter(L=>L.is_active),staleTime:300*1e3}),{data:P=[]}=me({queryKey:["all-bookings"],queryFn:async()=>await X.entities.Booking.list(),staleTime:60*1e3}),{data:C}=me({queryKey:["memberDirectoryDisplay"],queryFn:async()=>{const L=(await X.entities.SystemSettings.list()).find(I=>I.setting_key==="member_directory_display");if(L!=null&&L.setting_value)try{return JSON.parse(L.setting_value)}catch(I){return console.error("Failed to parse member directory settings:",I),{show_profile_photo:!0,show_events:!0,show_articles:!0,show_organization:!0,show_job_title:!0,show_linkedin:!0,show_awards:!0,show_bio_in_popup:!0}}return{show_profile_photo:!0,show_events:!0,show_articles:!0,show_organization:!0,show_job_title:!0,show_linkedin:!0,show_awards:!0,show_bio_in_popup:!0}},staleTime:0,refetchOnMount:!0}),O=b.useMemo(()=>{const $={};return v.forEach(L=>{const I=j.filter(Y=>Y.author_id===L.id&&Y.status==="published").length,W=P.filter(Y=>Y.member_id===L.id&&Y.status==="confirmed").length,q=_.filter(Y=>(Y.award_type==="events_attended"?W:Y.award_type==="articles_published"?I:0)>=Y.threshold),Q=T.filter(Y=>Y.member_id===L.id).map(Y=>A.find(K=>K.id===Y.offline_award_id)).filter(Boolean);$[L.id]={publishedArticles:I,eventsAttended:W,onlineAwards:q,offlineAwards:Q,totalAwards:q.length+Q.length}}),$},[v,j,P,_,T,A]),M=b.useMemo(()=>{let $=v;if($=$.filter(I=>I.show_in_directory!==!1),r||($=$.filter(I=>I.login_enabled!==!1)),s){const I=s.toLowerCase();$=$.filter(W=>{var Z,Q,Y,K,ae;const q=N.find(se=>se.id===W.organization_id||se.zoho_account_id===W.organization_id);return((Z=W.first_name)==null?void 0:Z.toLowerCase().includes(I))||((Q=W.last_name)==null?void 0:Q.toLowerCase().includes(I))||((Y=W.email)==null?void 0:Y.toLowerCase().includes(I))||(C==null?void 0:C.show_job_title)&&((K=W.job_title)==null?void 0:K.toLowerCase().includes(I))||(C==null?void 0:C.show_organization)&&((ae=q==null?void 0:q.name)==null?void 0:ae.toLowerCase().includes(I))})}return[...$].sort((I,W)=>{var q,Z,Q,Y,K,ae,se,de;switch(p){case"name-asc":return`${I.first_name} ${I.last_name}`.localeCompare(`${W.first_name} ${W.last_name}`);case"name-desc":return`${W.first_name} ${W.last_name}`.localeCompare(`${I.first_name} ${I.last_name}`);case"org-asc":{const ue=C!=null&&C.show_organization&&((q=N.find(pe=>pe.id===I.organization_id||pe.zoho_account_id===I.organization_id))==null?void 0:q.name)||"",oe=C!=null&&C.show_organization&&((Z=N.find(pe=>pe.id===W.organization_id||pe.zoho_account_id===W.organization_id))==null?void 0:Z.name)||"";return ue.localeCompare(oe)}case"org-desc":{const ue=C!=null&&C.show_organization&&((Q=N.find(pe=>pe.id===I.organization_id||pe.zoho_account_id===I.organization_id))==null?void 0:Q.name)||"";return(C!=null&&C.show_organization&&((Y=N.find(pe=>pe.id===W.organization_id||pe.zoho_account_id===W.organization_id))==null?void 0:Y.name)||"").localeCompare(ue)}case"events-desc":{const ue=C!=null&&C.show_events&&((K=O[I.id])==null?void 0:K.eventsAttended)||0;return(C!=null&&C.show_events&&((ae=O[W.id])==null?void 0:ae.eventsAttended)||0)-ue}case"articles-desc":{const ue=C!=null&&C.show_articles&&((se=O[I.id])==null?void 0:se.publishedArticles)||0;return(C!=null&&C.show_articles&&((de=O[W.id])==null?void 0:de.publishedArticles)||0)-ue}default:return 0}})},[v,s,r,p,N,O,C]),k=Math.ceil(M.length/o),E=b.useMemo(()=>{const $=(i-1)*o;return M.slice($,$+o)},[M,i,o]);b.useEffect(()=>{l(1)},[s,r,p,o]);const R=$=>{d($),h(!1)},F=$=>{window.location.href=`mailto:${$}`};return y?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(vt,{className:"w-8 h-8 animate-spin text-blue-600"})}):e.jsxs(a2,{delayDuration:100,children:[e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(ws,{className:"w-8 h-8 text-blue-600"}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900",children:"Member Directory"})]}),e.jsxs("p",{className:"text-slate-600",children:[M.length," ",M.length===1?"member":"members"," across all organizations"]})]}),e.jsx(le,{className:"mb-6 border-slate-200",children:e.jsx(ce,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx(he,{placeholder:"Search by name, email, job title, or organization...",value:s,onChange:$=>n($.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ee,{htmlFor:"show-disabled",className:"text-sm text-slate-700 whitespace-nowrap cursor-pointer",children:"Show disabled accounts"}),e.jsx(cs,{id:"show-disabled",checked:r,onCheckedChange:a})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z1,{className:"w-4 h-4 text-slate-500"}),e.jsx(ee,{className:"text-sm text-slate-700",children:"Sort by:"}),e.jsxs(Ke,{value:p,onValueChange:g,children:[e.jsx(Ve,{className:"w-[200px]",children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"name-asc",children:"Name (A-Z)"}),e.jsx(re,{value:"name-desc",children:"Name (Z-A)"}),(C==null?void 0:C.show_organization)&&e.jsx(re,{value:"org-asc",children:"Organization (A-Z)"}),(C==null?void 0:C.show_organization)&&e.jsx(re,{value:"org-desc",children:"Organization (Z-A)"}),(C==null?void 0:C.show_events)&&e.jsx(re,{value:"events-desc",children:"Most Events"}),(C==null?void 0:C.show_articles)&&e.jsx(re,{value:"articles-desc",children:"Most Articles"})]})]})]})]})})}),E.length===0?e.jsx(le,{className:"border-slate-200",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(ws,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No members found"}),e.jsx("p",{className:"text-slate-600",children:s?"Try adjusting your search criteria":"No members available"})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:E.map($=>{const L=O[$.id]||{},I=w.find(q=>q.id===$.role_id),W=N.find(q=>q.id===$.organization_id||q.zoho_account_id===$.organization_id);return e.jsxs(le,{className:"border-slate-200 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>R($),children:[e.jsx(Fe,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:C!=null&&C.show_profile_photo&&$.profile_photo_url?e.jsx("img",{src:$.profile_photo_url,alt:`${$.first_name} ${$.last_name}`,className:"w-16 h-16 rounded-full object-cover border-2 border-slate-200"}):e.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-200 flex items-center justify-center",children:e.jsx(Xs,{className:"w-8 h-8 text-slate-400"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs(Ue,{className:"text-base mb-1",children:[$.first_name," ",$.last_name]}),I&&e.jsx("div",{className:"flex items-center gap-1 mb-1",children:e.jsxs(ye,{variant:"secondary",className:I.is_admin?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700",children:[I.is_admin&&e.jsx(In,{className:"w-3 h-3 mr-1"}),I.name]})}),(C==null?void 0:C.show_job_title)&&$.job_title&&e.jsx("p",{className:"text-xs text-slate-600 line-clamp-1",children:$.job_title})]})]})}),e.jsxs(ce,{className:"space-y-3",children:[(C==null?void 0:C.show_organization)&&W&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Na,{className:"w-4 h-4 text-slate-400 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-slate-700",children:W.name})]}),(C==null?void 0:C.show_linkedin)&&$.linkedin_url&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("a",{href:$.linkedin_url,target:"_blank",rel:"noopener noreferrer",onClick:q=>q.stopPropagation(),className:"flex items-center gap-2 text-sm text-blue-600 hover:text-blue-700 hover:underline",children:[e.jsx(qu,{className:"w-4 h-4"}),e.jsx("span",{children:"LinkedIn Profile"})]})}),(C==null?void 0:C.show_events)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ns,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm text-slate-600",children:"Events"})]}),e.jsx(ye,{variant:"secondary",children:L.eventsAttended||0})]}),(C==null?void 0:C.show_articles)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-sm text-slate-600",children:"Articles"})]}),e.jsx(ye,{variant:"secondary",children:L.publishedArticles||0})]}),(C==null?void 0:C.show_awards)&&L.totalAwards>0&&e.jsxs("div",{className:"pt-3 border-t border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ln,{className:"w-4 h-4 text-amber-600"}),e.jsxs("span",{className:"text-xs font-semibold text-slate-700",children:["Awards (",L.totalAwards,")"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[L.onlineAwards.slice(0,2).map(q=>e.jsxs(rf,{children:[e.jsx(af,{asChild:!0,children:e.jsx("div",{className:"px-2 py-1 bg-gradient-to-br from-amber-50 to-amber-100 rounded border border-amber-200 cursor-help",children:q.image_url?e.jsx("img",{src:q.image_url,alt:q.name,className:"w-4 h-4 object-contain"}):e.jsx("span",{className:"text-xs font-medium text-slate-900",children:q.name})})}),e.jsxs(Uu,{children:[e.jsx("p",{className:"font-semibold",children:q.name}),q.description&&e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:q.description})]})]},q.id)),L.offlineAwards.slice(0,2).map(q=>e.jsxs(rf,{children:[e.jsx(af,{asChild:!0,children:e.jsx("div",{className:"px-2 py-1 bg-gradient-to-br from-purple-50 to-purple-100 rounded border border-purple-200 cursor-help",children:q.image_url?e.jsx("img",{src:q.image_url,alt:q.name,className:"w-4 h-4 object-contain"}):e.jsx("span",{className:"text-xs font-medium text-slate-900",children:q.name})})}),e.jsxs(Uu,{children:[e.jsx("p",{className:"font-semibold",children:q.name}),q.period_text&&e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:q.period_text}),q.description&&e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:q.description})]})]},q.id)),L.totalAwards>2&&e.jsx("div",{className:"px-2 py-1 bg-slate-100 rounded border border-slate-200",children:e.jsxs("span",{className:"text-xs font-medium text-slate-600",children:["+",L.totalAwards-2]})})]})]})]})]},$.id)})}),k>1&&e.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"text-sm text-slate-700",children:"Show:"}),e.jsxs(Ke,{value:o.toString(),onValueChange:$=>c(parseInt($)),children:[e.jsx(Ve,{className:"w-[100px]",children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"6",children:"6"}),e.jsx(re,{value:"9",children:"9"}),e.jsx(re,{value:"12",children:"12"}),e.jsx(re,{value:"24",children:"24"}),e.jsx(re,{value:"48",children:"48"})]})]}),e.jsx("span",{className:"text-sm text-slate-600",children:"per page"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{variant:"outline",size:"sm",onClick:()=>l($=>Math.max(1,$-1)),disabled:i===1,children:e.jsx(Wn,{className:"w-4 h-4"})}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(k,5)},($,L)=>{let I;return k<=5||i<=3?I=L+1:i>=k-2?I=k-4+L:I=i-2+L,e.jsx(J,{variant:i===I?"default":"outline",size:"sm",onClick:()=>l(I),className:"w-9",children:I},I)})}),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>l($=>Math.min(k,$+1)),disabled:i===k,children:e.jsx(js,{className:"w-4 h-4"})})]})]})]})]})}),e.jsx(Ct,{open:!!u,onOpenChange:$=>!$&&d(null),children:e.jsxs(Nt,{className:"max-w-2xl",children:[e.jsx(kt,{children:e.jsx(Et,{className:"sr-only",children:"Member Information"})}),u&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:C!=null&&C.show_profile_photo&&u.profile_photo_url?e.jsx("img",{src:u.profile_photo_url,alt:`${u.first_name} ${u.last_name}`,className:"w-24 h-24 rounded-full object-cover border-4 border-slate-200"}):e.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-blue-100 to-blue-200 flex items-center justify-center border-4 border-slate-200",children:e.jsx(Xs,{className:"w-12 h-12 text-blue-600"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:[u.first_name," ",u.last_name]}),(C==null?void 0:C.show_job_title)&&u.job_title&&e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 mb-3",children:[e.jsx(En,{className:"w-4 h-4"}),e.jsx("span",{children:u.job_title})]}),(()=>{const $=w.find(L=>L.id===u.role_id);return $?e.jsxs(ye,{variant:"secondary",className:$.is_admin?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700",children:[$.is_admin&&e.jsx(In,{className:"w-3 h-3 mr-1"}),$.name]}):null})()]})]}),(C==null?void 0:C.show_organization)&&(()=>{const $=N.find(L=>L.id===u.organization_id||L.zoho_account_id===u.organization_id);return $?e.jsx("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:e.jsxs("div",{className:"flex items-center gap-2 text-slate-700",children:[e.jsx(Na,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"font-semibold",children:$.name})]})}):null})(),(C==null?void 0:C.show_bio_in_popup)&&u.biography&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900 uppercase tracking-wide",children:"About"}),e.jsx("p",{className:`text-slate-700 leading-relaxed ${m?"":"line-clamp-4"}`,children:u.biography}),u.biography.length>300&&e.jsx(J,{variant:"ghost",size:"sm",onClick:()=>h(!m),className:"text-blue-600 hover:text-blue-700 p-0 h-auto font-medium",children:m?e.jsxs(e.Fragment,{children:[e.jsx(S0,{className:"w-4 h-4 mr-1"}),"Show less"]}):e.jsxs(e.Fragment,{children:[e.jsx(Or,{className:"w-4 h-4 mr-1"}),"Read more"]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[(C==null?void 0:C.show_events)&&e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Ns,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-900",children:"Events Attended"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-700",children:((V=O[u.id])==null?void 0:V.eventsAttended)||0})]}),(C==null?void 0:C.show_articles)&&e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4 border border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ns,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Articles Published"})]}),e.jsx("p",{className:"text-2xl font-bold text-purple-700",children:((U=O[u.id])==null?void 0:U.publishedArticles)||0})]})]}),(C==null?void 0:C.show_awards)&&((B=O[u.id])==null?void 0:B.totalAwards)>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-slate-900 uppercase tracking-wide flex items-center gap-2",children:[e.jsx(Ln,{className:"w-4 h-4 text-amber-600"}),"Awards & Recognition (",O[u.id].totalAwards,")"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[O[u.id].onlineAwards.map($=>e.jsx("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-lg p-3 border border-amber-200",children:e.jsxs("div",{className:"flex items-center gap-2",children:[$.image_url&&e.jsx("img",{src:$.image_url,alt:$.name,className:"w-8 h-8 object-contain"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-amber-900 line-clamp-1",children:$.name}),$.description&&e.jsx("p",{className:"text-xs text-amber-700 line-clamp-1",children:$.description})]})]})},$.id)),O[u.id].offlineAwards.map($=>e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-3 border border-purple-200",children:e.jsxs("div",{className:"flex items-center gap-2",children:[$.image_url&&e.jsx("img",{src:$.image_url,alt:$.name,className:"w-8 h-8 object-contain"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-purple-900 line-clamp-1",children:$.name}),$.period_text&&e.jsx("p",{className:"text-xs text-purple-700",children:$.period_text})]})]})},$.id))]})]}),e.jsxs("div",{className:"pt-4 border-t border-slate-200 space-y-3",children:[e.jsxs(J,{onClick:()=>F(u.email),className:"w-full bg-blue-600 hover:bg-blue-700",size:"lg",children:[e.jsx(Ms,{className:"w-5 h-5 mr-2"}),"Send Email to ",u.first_name]}),(C==null?void 0:C.show_linkedin)&&u.linkedin_url&&e.jsxs(J,{onClick:()=>window.open(u.linkedin_url,"_blank"),variant:"outline",className:"w-full",size:"lg",children:[e.jsx(qu,{className:"w-5 h-5 mr-2"}),"View LinkedIn Profile"]})]})]})]})})]})}function l9({isAdmin:t,isFeatureExcluded:s}){const[n,r]=b.useState("sections"),[a,i]=b.useState(null),[l,o]=b.useState(null),[c,u]=b.useState(null),[d,m]=b.useState(!1),[h,p]=b.useState(!1),[g,v]=b.useState(!1),[y,j]=b.useState(null),[w,N]=b.useState(null),[_,T]=b.useState(!1),[A,P]=b.useState({}),[C,O]=b.useState("medium"),M=Yt(),{data:k=[],isLoading:E}=me({queryKey:["wall-of-fame-sections"],queryFn:()=>X.entities.WallOfFameSection.list()}),{data:R=[],isLoading:F}=me({queryKey:["wall-of-fame-categories"],queryFn:()=>X.entities.WallOfFameCategory.list()}),{data:z=[],isLoading:V}=me({queryKey:["wall-of-fame-people"],queryFn:()=>X.entities.WallOfFamePerson.list()}),{data:U=[]}=me({queryKey:["members-for-selection"],queryFn:()=>X.entities.Member.list()}),{data:B}=me({queryKey:["wall-of-fame-photo-size"],queryFn:async()=>{const de=(await X.entities.SystemSettings.list()).find(ue=>ue.setting_key==="wall_of_fame_photo_size");return de?{id:de.id,value:de.setting_value}:null},staleTime:0,refetchOnMount:!0});Be.useEffect(()=>{B!=null&&B.value&&O(B.value)},[B]);const $=Le({mutationFn:({id:se,data:de})=>se?X.entities.WallOfFameSection.update(se,de):X.entities.WallOfFameSection.create(de),onSuccess:()=>{M.invalidateQueries({queryKey:["wall-of-fame-sections"]}),m(!1),i(null),te.success("Section saved successfully")}}),L=Le({mutationFn:({id:se,data:de})=>se?X.entities.WallOfFameCategory.update(se,de):X.entities.WallOfFameCategory.create(de),onSuccess:()=>{M.invalidateQueries({queryKey:["wall-of-fame-categories"]}),p(!1),o(null),te.success("Category saved successfully")}}),I=Le({mutationFn:({id:se,data:de})=>se?X.entities.WallOfFamePerson.update(se,de):X.entities.WallOfFamePerson.create(de),onSuccess:()=>{M.invalidateQueries({queryKey:["wall-of-fame-people"]}),v(!1),u(null),te.success("Person saved successfully")}}),W=Le({mutationFn:se=>X.entities.WallOfFameSection.delete(se),onSuccess:()=>{M.invalidateQueries({queryKey:["wall-of-fame-sections"]}),te.success("Section deleted")}}),q=Le({mutationFn:se=>X.entities.WallOfFameCategory.delete(se),onSuccess:()=>{M.invalidateQueries({queryKey:["wall-of-fame-categories"]}),te.success("Category deleted")}}),Z=Le({mutationFn:se=>X.entities.WallOfFamePerson.delete(se),onSuccess:()=>{M.invalidateQueries({queryKey:["wall-of-fame-people"]}),te.success("Person deleted")}}),Q=Le({mutationFn:async se=>B!=null&&B.id?await X.entities.SystemSettings.update(B.id,{setting_value:se}):await X.entities.SystemSettings.create({setting_key:"wall_of_fame_photo_size",setting_value:se,description:"Profile photo size for Wall of Fame display (small, medium, large)"}),onSuccess:()=>{M.invalidateQueries({queryKey:["wall-of-fame-photo-size"]}),te.success("Photo size setting saved")}});if(!t||s!=null&&s("page_WallOfFameManagement"))return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"border-slate-200",children:e.jsxs(ce,{className:"p-8 text-center",children:[e.jsx(Ln,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-slate-600",children:"You don't have permission to access this page."})]})})});const Y=async se=>{var ue;const de=(ue=se.target.files)==null?void 0:ue[0];if(de){if(!de.type.startsWith("image/")){te.error("Please select an image file");return}T(!0);try{const oe=await X.integrations.Core.UploadFile({file:de});u({...c,profile_photo_url:oe.file_url}),te.success("Photo uploaded")}catch{te.error("Failed to upload photo")}finally{T(!1)}}},K=se=>{const de=U.find(ue=>ue.id===se);de&&u({...c,member_id:se,first_name:de.first_name||"",last_name:de.last_name||"",job_title:de.job_title||"",biography:de.biography||"",profile_photo_url:de.profile_photo_url||"",linkedin_url:de.linkedin_url||"",email:de.email||""})},ae=[...k].sort((se,de)=>(se.display_order||0)-(de.display_order||0));return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Wall of Fame Management"}),e.jsx("p",{className:"text-slate-600",children:"Manage sections, categories, and people for public display"})]})}),e.jsxs(ev,{value:n,onValueChange:r,children:[e.jsxs(sp,{className:"mb-6",children:[e.jsx(fr,{value:"sections",children:"Sections"}),e.jsx(fr,{value:"categories",children:"Categories"}),e.jsx(fr,{value:"people",children:"People"}),e.jsx(fr,{value:"settings",children:"Settings"})]}),e.jsxs(Io,{value:"sections",children:[e.jsx("div",{className:"mb-4",children:e.jsxs(J,{onClick:()=>{i({name:"",description:"",display_order:0,is_active:!0}),m(!0)},className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Add Section"]})}),E?e.jsx("div",{className:"text-center py-12",children:e.jsx(vt,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto"})}):ae.length===0?e.jsx(le,{className:"border-slate-200",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(Tl,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No Sections Yet"}),e.jsx("p",{className:"text-slate-600",children:"Create your first section to get started"})]})}):e.jsx("div",{className:"grid gap-4",children:ae.map(se=>e.jsx(le,{className:"border-slate-200",children:e.jsx(Fe,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs(Ue,{className:"flex items-center gap-2",children:[e.jsx(Ln,{className:"w-5 h-5 text-blue-600"}),se.name]}),se.description&&e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:se.description}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(ye,{variant:se.is_active?"default":"secondary",children:se.is_active?"Active":"Inactive"}),e.jsxs(ye,{variant:"outline",children:["Order: ",se.display_order]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(J,{variant:"outline",size:"sm",onClick:()=>{i(se),m(!0)},children:e.jsx(As,{className:"w-3 h-3"})}),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>W.mutate(se.id),className:"text-red-600",children:e.jsx(os,{className:"w-3 h-3"})})]})]})})},se.id))})]}),e.jsxs(Io,{value:"categories",children:[e.jsx("div",{className:"mb-4",children:e.jsxs(J,{onClick:()=>{o({section_id:"",name:"",description:"",display_order:0,is_active:!0}),p(!0)},className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Add Category"]})}),F?e.jsx("div",{className:"text-center py-12",children:e.jsx(vt,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto"})}):e.jsx("div",{className:"space-y-6",children:ae.map(se=>{const de=R.filter(ue=>ue.section_id===se.id).sort((ue,oe)=>(ue.display_order||0)-(oe.display_order||0));return e.jsxs(le,{className:"border-slate-200",children:[e.jsx(Fe,{children:e.jsx(Ue,{className:"text-lg",children:se.name})}),e.jsx(ce,{children:de.length===0?e.jsx("p",{className:"text-slate-500 text-sm",children:"No categories yet"}):e.jsx("div",{className:"space-y-2",children:de.map(ue=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ws,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"font-medium",children:ue.name}),e.jsx(ye,{variant:ue.is_active?"default":"secondary",className:"text-xs",children:ue.is_active?"Active":"Inactive"})]}),ue.description&&e.jsx("p",{className:"text-xs text-slate-600 mt-1 ml-6",children:ue.description})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(J,{variant:"ghost",size:"sm",onClick:()=>{o(ue),p(!0)},children:e.jsx(As,{className:"w-3 h-3"})}),e.jsx(J,{variant:"ghost",size:"sm",onClick:()=>q.mutate(ue.id),className:"text-red-600",children:e.jsx(os,{className:"w-3 h-3"})})]})]},ue.id))})})]},se.id)})})]}),e.jsxs(Io,{value:"people",children:[e.jsx("div",{className:"mb-4",children:e.jsxs(J,{onClick:()=>{u({category_id:"",first_name:"",last_name:"",job_title:"",biography:"",profile_photo_url:"",linkedin_url:"",email:"",display_order:0,is_active:!0}),v(!0)},className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Add Person"]})}),V?e.jsx("div",{className:"text-center py-12",children:e.jsx(vt,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto"})}):e.jsx("div",{className:"space-y-6",children:ae.map(se=>{const de=R.filter(ue=>ue.section_id===se.id).sort((ue,oe)=>(ue.display_order||0)-(oe.display_order||0));return de.length===0?null:e.jsxs(le,{className:"border-slate-200",children:[e.jsx(Fe,{children:e.jsx(Ue,{className:"text-lg",children:se.name})}),e.jsx(ce,{className:"space-y-4",children:de.map(ue=>{const oe=z.filter(je=>je.category_id===ue.id).sort((je,we)=>(je.display_order||0)-(we.display_order||0)),pe=A[ue.id];return e.jsxs("div",{className:"border border-slate-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 cursor-pointer",onClick:()=>P({...A,[ue.id]:!pe}),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ws,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"font-medium",children:ue.name}),e.jsx(ye,{variant:"secondary",children:oe.length})]}),pe?e.jsx(S0,{className:"w-4 h-4"}):e.jsx(Or,{className:"w-4 h-4"})]}),pe&&e.jsx("div",{className:"p-3 space-y-2",children:oe.length===0?e.jsx("p",{className:"text-slate-500 text-sm",children:"No people yet"}):oe.map(je=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white rounded border border-slate-200",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-100 flex items-center justify-center overflow-hidden flex-shrink-0",children:je.profile_photo_url?e.jsx("img",{src:je.profile_photo_url,alt:`${je.first_name} ${je.last_name}`,className:"w-full h-full object-cover"}):e.jsx(Xs,{className:"w-6 h-6 text-slate-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"font-medium",children:[je.first_name," ",je.last_name]}),je.job_title&&e.jsx("div",{className:"text-sm text-slate-600",children:je.job_title}),je.member_id&&e.jsx(ye,{variant:"outline",className:"text-xs mt-1",children:"Linked Member"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(J,{variant:"ghost",size:"sm",onClick:()=>{u(je),v(!0)},children:e.jsx(As,{className:"w-3 h-3"})}),e.jsx(J,{variant:"ghost",size:"sm",onClick:()=>Z.mutate(je.id),className:"text-red-600",children:e.jsx(os,{className:"w-3 h-3"})})]})]},je.id))})]},ue.id)})})]},se.id)})})]}),e.jsx(Io,{value:"settings",children:e.jsxs(le,{className:"border-slate-200",children:[e.jsx(Fe,{children:e.jsx(Ue,{children:"Display Settings"})}),e.jsx(ce,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(ee,{className:"text-base font-semibold",children:"Profile Photo Size"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Choose the size of profile photos displayed on the public Wall of Fame"}),e.jsxs(Ke,{value:C,onValueChange:se=>{O(se),Q.mutate(se)},children:[e.jsx(Ve,{className:"w-64",children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"small",children:"Small"}),e.jsx(re,{value:"medium",children:"Medium (Default)"}),e.jsx(re,{value:"large",children:"Large"})]})]})]})})]})})]}),e.jsx(Ct,{open:d,onOpenChange:m,children:e.jsxs(Nt,{children:[e.jsx(kt,{children:e.jsx(Et,{children:a!=null&&a.id?"Edit Section":"Create Section"})}),a&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Name *"}),e.jsx(he,{value:a.name,onChange:se=>i({...a,name:se.target.value}),placeholder:"e.g., Our Team"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Description"}),e.jsx(Gt,{value:a.description||"",onChange:se=>i({...a,description:se.target.value}),placeholder:"Optional description",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Display Order"}),e.jsx(he,{type:"number",value:a.display_order,onChange:se=>i({...a,display_order:parseInt(se.target.value)})})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(J,{onClick:()=>$.mutate({id:a==null?void 0:a.id,data:a}),disabled:$.isPending,children:"Save"})]})]})}),e.jsx(Ct,{open:h,onOpenChange:p,children:e.jsxs(Nt,{children:[e.jsx(kt,{children:e.jsx(Et,{children:l!=null&&l.id?"Edit Category":"Create Category"})}),l&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Section *"}),e.jsxs(Ke,{value:l.section_id,onValueChange:se=>o({...l,section_id:se}),children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:"Select section"})}),e.jsx(We,{children:k.map(se=>e.jsx(re,{value:se.id,children:se.name},se.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Name *"}),e.jsx(he,{value:l.name,onChange:se=>o({...l,name:se.target.value}),placeholder:"e.g., Staff, Board"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Description"}),e.jsx(Gt,{value:l.description||"",onChange:se=>o({...l,description:se.target.value}),placeholder:"Optional description",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Display Order"}),e.jsx(he,{type:"number",value:l.display_order,onChange:se=>o({...l,display_order:parseInt(se.target.value)})})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),e.jsx(J,{onClick:()=>L.mutate({id:l==null?void 0:l.id,data:l}),disabled:L.isPending,children:"Save"})]})]})}),e.jsx(Ct,{open:g,onOpenChange:v,children:e.jsxs(Nt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(kt,{children:e.jsx(Et,{children:c!=null&&c.id?"Edit Person":"Add Person"})}),c&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Category *"}),e.jsxs(Ke,{value:c.category_id,onValueChange:se=>u({...c,category_id:se}),children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:"Select category"})}),e.jsx(We,{children:R.map(se=>{var de;return e.jsxs(re,{value:se.id,children:[se.name," (",(de=k.find(ue=>ue.id===se.section_id))==null?void 0:de.name,")"]},se.id)})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Link to Existing Member (Optional)"}),e.jsxs(Ke,{value:c.member_id||"",onValueChange:K,children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:"Select a member or create ad-hoc entry"})}),e.jsxs(We,{children:[e.jsx(re,{value:null,children:"Create ad-hoc entry"}),U.map(se=>e.jsxs(re,{value:se.id,children:[se.first_name," ",se.last_name," (",se.email,")"]},se.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"First Name *"}),e.jsx(he,{value:c.first_name||"",onChange:se=>u({...c,first_name:se.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Last Name *"}),e.jsx(he,{value:c.last_name||"",onChange:se=>u({...c,last_name:se.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Job Title"}),e.jsx(he,{value:c.job_title||"",onChange:se=>u({...c,job_title:se.target.value}),placeholder:"e.g., Chief Executive Officer"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Secondary Organisation"}),e.jsx(he,{value:c.secondary_organisation||"",onChange:se=>u({...c,secondary_organisation:se.target.value}),placeholder:"Optional secondary organisation"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Secondary Job Title"}),e.jsx(he,{value:c.secondary_job_title||"",onChange:se=>u({...c,secondary_job_title:se.target.value}),placeholder:"Optional secondary job title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Biography"}),e.jsx(Gt,{value:c.biography||"",onChange:se=>u({...c,biography:se.target.value}),placeholder:"Full biography",rows:5})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Profile Photo"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 flex items-center justify-center overflow-hidden",children:c.profile_photo_url?e.jsx("img",{src:c.profile_photo_url,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx(Xs,{className:"w-8 h-8 text-slate-400"})}),e.jsx("input",{type:"file",id:"photo-upload",accept:"image/*",onChange:Y,className:"hidden"}),e.jsx(J,{type:"button",variant:"outline",disabled:_,onClick:()=>document.getElementById("photo-upload").click(),children:_?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Gs,{className:"w-4 h-4 mr-2"}),"Upload Photo"]})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"LinkedIn URL"}),e.jsx(he,{type:"url",value:c.linkedin_url||"",onChange:se=>u({...c,linkedin_url:se.target.value}),placeholder:"https://linkedin.com/in/..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Email"}),e.jsx(he,{type:"email",value:c.email||"",onChange:se=>u({...c,email:se.target.value}),placeholder:"email@example.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Display Order"}),e.jsx(he,{type:"number",value:c.display_order,onChange:se=>u({...c,display_order:parseInt(se.target.value)})})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>v(!1),children:"Cancel"}),e.jsx(J,{onClick:()=>I.mutate({id:c==null?void 0:c.id,data:c}),disabled:I.isPending,children:"Save"})]})]})})]})})}function o9(){const[t,s]=b.useState(null);b.useEffect(()=>{const c=window.location.pathname,u=c.startsWith("/")?c.substring(1):c;s(u)},[]);const{data:n,isLoading:r,error:a}=me({queryKey:["iedit-public-page",t],queryFn:async()=>(await X.entities.IEditPage.filter({slug:t,status:"published"}))[0],enabled:!!t}),{data:i,isLoading:l}=me({queryKey:["iedit-public-elements",n==null?void 0:n.id],queryFn:()=>X.entities.IEditPageElement.filter({page_id:n.id},"display_order"),initialData:[],enabled:!!(n!=null&&n.id)});if(b.useEffect(()=>{if(n&&(document.title=n.meta_title||n.title||"AGCAS",n.meta_description)){let c=document.querySelector('meta[name="description"]');c||(c=document.createElement("meta"),c.name="description",document.head.appendChild(c)),c.content=n.meta_description}},[n]),r||l)return e.jsx(Sa,{currentPageName:"DynamicPage",children:e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"text-slate-600",children:"Loading page..."})})});if(a||!n)return e.jsx(Sa,{currentPageName:"DynamicPage",children:e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-slate-900 mb-4",children:"Page Not Found"}),e.jsx("p",{className:"text-slate-600 mb-2",children:"The page you're looking for doesn't exist or hasn't been published yet."}),e.jsxs("p",{className:"text-sm text-slate-500",children:['(Looking for: "/',t,'")']})]})})});const o=n.layout_type==="member"?({children:c})=>e.jsx("div",{className:"min-h-screen",children:c}):Sa;return e.jsx(o,{currentPageName:"DynamicPage",children:e.jsxs("div",{className:"w-full",children:[i.map(c=>e.jsx(wd,{element:c},c.id)),i.length===0&&e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-slate-600",children:"This page has no content yet."})})})]})})}function HNe(){const{data:t,isLoading:s}=me({queryKey:["iedit-page-sharon"],queryFn:async()=>(await X.entities.IEditPage.filter({slug:"sharon",status:"published"}))[0]}),{data:n=[],isLoading:r}=me({queryKey:["iedit-elements-sharon",t==null?void 0:t.id],queryFn:()=>X.entities.IEditPageElement.filter({page_id:t.id},"display_order"),enabled:!!(t!=null&&t.id)});return b.useEffect(()=>{if(t&&(document.title=t.meta_title||t.title||"AGCAS",t.meta_description)){let a=document.querySelector('meta[name="description"]');a||(a=document.createElement("meta"),a.name="description",document.head.appendChild(a)),a.content=t.meta_description}},[t]),s||r?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"text-slate-600",children:"Loading..."})}):t?e.jsxs("div",{className:"w-full",children:[n.map(a=>e.jsx(wd,{element:a},a.id)),n.length===0&&e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("p",{className:"text-slate-600",children:"This page has no content yet."})})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-slate-900 mb-4",children:"Page Not Found"}),e.jsx("p",{className:"text-slate-600",children:"The sharon page hasn't been published yet."})]})})}function KNe(){const s=new URLSearchParams(window.location.search).get("page"),n=window.location.hash.replace("#",""),r=s||n,{data:a,isLoading:i,error:l}=me({queryKey:["iedit-public-page",r],queryFn:async()=>(await X.entities.IEditPage.filter({slug:r,status:"published"}))[0],enabled:!!r}),{data:o,isLoading:c}=me({queryKey:["iedit-public-elements",a==null?void 0:a.id],queryFn:()=>X.entities.IEditPageElement.filter({page_id:a.id},"display_order"),initialData:[],enabled:!!(a!=null&&a.id)});return b.useEffect(()=>{if(a&&(document.title=a.meta_title||a.title||"AGCAS",a.meta_description)){let u=document.querySelector('meta[name="description"]');u||(u=document.createElement("meta"),u.name="description",document.head.appendChild(u)),u.content=a.meta_description}},[a]),b.useEffect(()=>{console.log("[Content Page] Checking font loading..."),"fonts"in document&&document.fonts.ready.then(()=>{const u=document.fonts.check('500 16px "Degular Medium"');console.log("[Content Page] Degular Medium loaded:",u);const d=Array.from(document.fonts.values());console.log("[Content Page] All loaded fonts:",d.map(m=>m.family))}),console.log("[Content Page] Elements:",o),o.forEach((u,d)=>{console.log(`[Content Page] Element ${d}:`,{type:u.element_type,content:u.content,variant:u.variant})})},[o]),r?i||c?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"text-slate-600",children:"Loading page..."})}):l||!a?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-slate-900 mb-4",children:"Page Not Found"}),e.jsx("p",{className:"text-slate-600 mb-2",children:"The page you're looking for doesn't exist or hasn't been published yet."}),e.jsxs("p",{className:"text-sm text-slate-500",children:['(Looking for page: "',r,'")']})]})}):e.jsxs("div",{className:"w-full",children:[o.map((u,d)=>e.jsx(wd,{element:u,isFirst:d===0},u.id)),o.length===0&&e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-slate-600",children:"This page has no content yet."})})})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-slate-900 mb-4",children:"No Page Specified"}),e.jsx("p",{className:"text-slate-600",children:"Please provide a page slug in the URL"}),e.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Format: /content#your-page-slug"})]})})}function GNe(){const s=new URLSearchParams(window.location.search).get("page"),{data:n,isLoading:r}=me({queryKey:["iedit-page-by-slug",s],queryFn:async()=>(await X.entities.IEditPage.list()).find(c=>c.slug===s&&c.status==="published"),enabled:!!s}),{data:a,isLoading:i}=me({queryKey:["iedit-page-elements",n==null?void 0:n.id],queryFn:async()=>(await X.entities.IEditPageElement.list()).filter(c=>c.page_id===n.id).sort((c,u)=>(c.display_order||0)-(u.display_order||0)),enabled:!!(n!=null&&n.id)});if(b.useEffect(()=>{if(n&&(document.title=n.meta_title||n.title||"AGCAS",n.meta_description)){let o=document.querySelector('meta[name="description"]');o||(o=document.createElement("meta"),o.name="description",document.head.appendChild(o)),o.content=n.meta_description}},[n]),r||i)return e.jsx(Sa,{currentPageName:"icontent",children:e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-slate-600",children:"Loading page..."})})});if(!n)return e.jsx(Sa,{currentPageName:"icontent",children:e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Page not found"}),e.jsx("p",{className:"text-slate-600",children:s?`The page "${s}" doesn't exist or hasn't been published yet.`:"No page specified"})]})})});const l=n.layout_type==="member"?({children:o})=>e.jsx("div",{className:"min-h-screen",children:o}):Sa;return e.jsx(l,{currentPageName:"icontent",children:e.jsx("div",{className:"w-full",children:a&&a.length>0?a.map(o=>e.jsx(wd,{element:o},o.id)):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-slate-600",children:"This page has no content yet."})})})})})}function c9(){const s=new URLSearchParams(window.location.search).get("slug"),{data:n,isLoading:r}=me({queryKey:["iedit-page-by-slug",s],queryFn:async()=>(await X.entities.IEditPage.list()).find(c=>c.slug===s&&c.status==="published"),enabled:!!s}),{data:a,isLoading:i}=me({queryKey:["iedit-page-elements",n==null?void 0:n.id],queryFn:async()=>(await X.entities.IEditPageElement.list()).filter(c=>c.page_id===n.id).sort((c,u)=>(c.display_order||0)-(u.display_order||0)),enabled:!!(n!=null&&n.id)});if(b.useEffect(()=>{if(n&&(document.title=n.meta_title||n.title||"AGCAS",n.meta_description)){let o=document.querySelector('meta[name="description"]');o||(o=document.createElement("meta"),o.name="description",document.head.appendChild(o)),o.content=n.meta_description}},[n]),r||i)return e.jsx(Sa,{currentPageName:"ViewPage",children:e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-slate-600",children:"Loading page..."})})});if(!n)return e.jsx(Sa,{currentPageName:"ViewPage",children:e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Page not found"}),e.jsx("p",{className:"text-slate-600",children:s?`The page "${s}" doesn't exist or hasn't been published yet.`:"No page specified"})]})})});const l=n.layout_type==="member"?({children:o})=>e.jsx("div",{className:"min-h-screen",children:o}):Sa;return e.jsx(l,{currentPageName:"ViewPage",children:e.jsx("div",{className:"w-full",children:a&&a.length>0?a.map(o=>e.jsx(wd,{element:o,memberInfo:null,organizationInfo:null},o.id)):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-slate-600",children:"This page has no content yet."})})})})})}function d9(){const s=new URLSearchParams(window.location.search).get("slug");return e.jsx("div",{className:"min-h-screen p-8 bg-slate-50",children:e.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-lg shadow p-6 space-y-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"URL Parameter Test"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"p-3 bg-slate-100 rounded",children:[e.jsx("p",{className:"text-sm text-slate-600",children:"Full URL:"}),e.jsx("p",{className:"font-mono text-sm",children:window.location.href})]}),e.jsxs("div",{className:"p-3 bg-slate-100 rounded",children:[e.jsx("p",{className:"text-sm text-slate-600",children:"Search String:"}),e.jsx("p",{className:"font-mono text-sm",children:window.location.search||"(empty)"})]}),e.jsxs("div",{className:"p-3 bg-slate-100 rounded",children:[e.jsx("p",{className:"text-sm text-slate-600",children:"Hash:"}),e.jsx("p",{className:"font-mono text-sm",children:window.location.hash||"(empty)"})]}),e.jsxs("div",{className:"p-3 bg-slate-100 rounded",children:[e.jsx("p",{className:"text-sm text-slate-600",children:"Pathname:"}),e.jsx("p",{className:"font-mono text-sm",children:window.location.pathname})]}),e.jsxs("div",{className:"p-3 bg-blue-50 rounded border-2 border-blue-200",children:[e.jsx("p",{className:"text-sm text-slate-600",children:"Slug Parameter Value:"}),e.jsx("p",{className:"font-mono text-lg font-bold",children:s||"(not found)"})]})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsxs("p",{className:"text-sm text-slate-600",children:["Test this page by visiting: ",e.jsx("code",{className:"bg-slate-100 px-2 py-1 rounded",children:"/ParamTest?slug=test-value"})]})})]})})}function u9({isAdmin:t,isFeatureExcluded:s}){const[n,r]=b.useState(""),[a,i]=b.useState(!1),l=Yt(),{data:o,isLoading:c}=me({queryKey:["teamInviteSettings"],queryFn:async()=>(await X.entities.SystemSettings.list()).find(m=>m.setting_key==="team_invite_webhook_url")});Be.useEffect(()=>{o&&!a&&(r(o.setting_value||""),i(!0))},[o,a]);const u=Le({mutationFn:async()=>{o!=null&&o.id?await X.entities.SystemSettings.update(o.id,{setting_value:n}):await X.entities.SystemSettings.create({setting_key:"team_invite_webhook_url",setting_value:n,description:"Webhook URL for sending team member invitations"})},onSuccess:()=>{l.invalidateQueries({queryKey:["teamInviteSettings"]}),te.success("Webhook settings saved")},onError:d=>{te.error("Failed to save settings: "+d.message)}});return!t||s("page_TeamInviteSettings")?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"max-w-md",children:e.jsx(ce,{className:"p-6 text-center",children:e.jsx("p",{className:"text-slate-600",children:"Access denied. Administrator privileges required."})})})}):c?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx("div",{className:"text-slate-600",children:"Loading..."})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Team Invite Settings"}),e.jsx("p",{className:"text-slate-600",children:"Configure webhook for team member invitations"})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsxs(Fe,{children:[e.jsxs(Ue,{className:"flex items-center gap-2",children:[e.jsx(Ms,{className:"w-5 h-5 text-blue-600"}),"Invitation Webhook"]}),e.jsx(Es,{children:"When a team member invitation is sent, this webhook will be called with the invite details"})]}),e.jsxs(ce,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"webhookUrl",children:"Webhook URL *"}),e.jsx(he,{id:"webhookUrl",type:"url",value:n,onChange:d=>r(d.target.value),placeholder:"https://your-webhook-service.com/team-invite",className:"font-mono text-sm"}),e.jsx("p",{className:"text-xs text-slate-500",children:"The webhook will receive a POST request with the following JSON payload"})]}),e.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:[e.jsx(ee,{className:"text-xs text-slate-600 mb-2 block",children:"Example Webhook Payload"}),e.jsx("pre",{className:"text-xs text-slate-700 overflow-x-auto",children:`{
  "email": "newmember@organization.com",
  "inviterName": "John Doe",
  "inviterEmail": "john@organization.com",
  "timestamp": "2025-01-17T10:30:00.000Z"
}`})]}),e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 flex gap-3",children:[e.jsx(vs,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-amber-900",children:[e.jsx("p",{className:"font-medium mb-1",children:"Important Notes:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-amber-800",children:[e.jsx("li",{children:"The webhook must accept POST requests with JSON body"}),e.jsx("li",{children:"Invitations can only be sent to email addresses matching the organization's domain"}),e.jsx("li",{children:"The webhook is responsible for sending the actual invitation email"})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-slate-200",children:e.jsx(J,{onClick:()=>u.mutate(),disabled:!n||u.isPending,className:"bg-blue-600 hover:bg-blue-700",children:u.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(un,{className:"w-4 h-4 mr-2"}),"Save Settings"]})})})]})]})]})})}function h9(){const[t,s]=b.useState(""),[n,r]=b.useState(1),[a]=b.useState(12),{data:i=[],isLoading:l}=me({queryKey:["organizations"],queryFn:async()=>await X.entities.Organization.list("name"),staleTime:0,refetchOnMount:!0}),{data:o}=me({queryKey:["organisation-directory-settings"],queryFn:async()=>{const p=await X.entities.SystemSettings.list(),g=p.find(N=>N.setting_key==="org_directory_show_logo"),v=p.find(N=>N.setting_key==="org_directory_show_domains"),y=p.find(N=>N.setting_key==="org_directory_show_member_count"),j=p.find(N=>N.setting_key==="org_directory_excluded_orgs");let w=[];if(j)try{w=JSON.parse(j.setting_value)}catch{w=[]}return{showLogo:(g==null?void 0:g.setting_value)!=="false",showDomains:(v==null?void 0:v.setting_value)!=="false",showMemberCount:(y==null?void 0:y.setting_value)!=="false",excludedOrgIds:w}},initialData:{showLogo:!0,showDomains:!0,showMemberCount:!0,excludedOrgIds:[]},staleTime:0,refetchOnMount:!0}),{data:c=[]}=me({queryKey:["all-members"],queryFn:async()=>await X.entities.Member.list(),staleTime:300*1e3}),u=b.useMemo(()=>{const p={};return c.forEach(g=>{g.organization_id&&(p[g.organization_id]=(p[g.organization_id]||0)+1)}),p},[c]),d=b.useMemo(()=>{let p=i.filter(g=>!o.excludedOrgIds.includes(g.id));if(t){const g=t.toLowerCase();p=p.filter(v=>{var y,j;return((y=v.name)==null?void 0:y.toLowerCase().includes(g))||((j=v.domain)==null?void 0:j.toLowerCase().includes(g))})}return p},[i,t,o.excludedOrgIds]),m=Math.ceil(d.length/a),h=b.useMemo(()=>{const p=(n-1)*a;return d.slice(p,p+a)},[d,n,a]);return b.useEffect(()=>{r(1)},[t]),l?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(vt,{className:"w-8 h-8 animate-spin text-blue-600"})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Na,{className:"w-8 h-8 text-blue-600"}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900",children:"University Directory"})]}),e.jsxs("p",{className:"text-slate-600",children:[d.length," ",d.length===1?"organisation":"organisations"]})]}),e.jsx(le,{className:"mb-6 border-slate-200",children:e.jsx(ce,{className:"p-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx(he,{placeholder:"Search organisations by name or domain...",value:t,onChange:p=>s(p.target.value),className:"pl-10"})]})})}),d.length===0?e.jsx(le,{className:"border-slate-200",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(Na,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No organisations found"}),e.jsx("p",{className:"text-slate-600",children:t?"Try adjusting your search criteria":"No organisations available"})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(p=>{const g=u[p.id]||0,v=[p.domain,...p.additional_verified_domains||[]].filter(Boolean);return e.jsxs(le,{className:"border-slate-200 hover:shadow-lg transition-shadow",children:[e.jsx(Fe,{children:e.jsxs(Ue,{className:"flex items-start gap-3",children:[o.showLogo&&e.jsx("div",{className:"w-10 h-10 flex-shrink-0 rounded-lg overflow-hidden bg-slate-100 flex items-center justify-center",children:p.logo_url?e.jsx("img",{src:p.logo_url,alt:p.name,className:"w-full h-full object-cover"}):e.jsx(Na,{className:"w-5 h-5 text-slate-400"})}),e.jsx("span",{className:"text-base line-clamp-2",children:p.name})]})}),e.jsxs(ce,{className:"space-y-3",children:[o.showDomains&&v.length>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B5,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{className:"text-sm font-medium text-slate-700",children:v.length>1?"Domains":"Domain"})]}),e.jsx("div",{className:"flex flex-wrap gap-1 ml-6",children:v.map((y,j)=>e.jsxs("span",{className:"text-xs bg-slate-100 text-slate-700 px-2 py-1 rounded",children:["@",y]},j))})]}),o.showMemberCount&&e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ws,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{className:"text-sm text-slate-600",children:"Members"})]}),e.jsx("span",{className:"text-sm font-semibold text-slate-900",children:g})]})]})]},p.id)})}),m>1&&e.jsxs("div",{className:"mt-6 flex justify-center items-center gap-2",children:[e.jsx(J,{variant:"outline",size:"sm",onClick:()=>r(p=>Math.max(1,p-1)),disabled:n===1,children:e.jsx(Wn,{className:"w-4 h-4"})}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:m},(p,g)=>g+1).map(p=>e.jsx(J,{variant:n===p?"default":"outline",size:"sm",onClick:()=>r(p),className:"w-9",children:p},p))}),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>r(p=>Math.min(m,p+1)),disabled:n===m,children:e.jsx(js,{className:"w-4 h-4"})})]})]})]})})}function m9({isAdmin:t,isFeatureExcluded:s}){const[n,r]=b.useState(!1),[a,i]=b.useState(!1),[l,o]=b.useState(null),[c,u]=b.useState(null),[d,m]=b.useState(!1),[h,p]=b.useState({name:"",description:"",image_url:"",action_type:"webhook",webhook_url:"",redirect_url:"",form_slug:"",window_target:"new_tab",popup_width:800,popup_height:600,display_location:"both",position:"bottom-right",offset_x:20,offset_y:20,width:80,height:80,show_background:!0,is_active:!0,display_order:0}),g=Yt(),{data:v=[],isLoading:y}=me({queryKey:["floaters"],queryFn:async()=>(await X.entities.Floater.list()).sort((E,R)=>(E.display_order||0)-(R.display_order||0)),staleTime:30*1e3}),{data:j=[]}=me({queryKey:["forms"],queryFn:async()=>await X.entities.Form.list(),staleTime:60*1e3}),w=Le({mutationFn:async k=>await X.entities.Floater.create(k),onSuccess:()=>{g.invalidateQueries({queryKey:["floaters"]}),te.success("Floater created successfully"),A()},onError:k=>{te.error("Failed to create floater")}}),N=Le({mutationFn:async({id:k,floaterData:E})=>await X.entities.Floater.update(k,E),onSuccess:()=>{g.invalidateQueries({queryKey:["floaters"]}),te.success("Floater updated successfully"),A()},onError:k=>{te.error("Failed to update floater")}}),_=Le({mutationFn:async k=>await X.entities.Floater.delete(k),onSuccess:()=>{g.invalidateQueries({queryKey:["floaters"]}),te.success("Floater deleted successfully"),i(!1),u(null)},onError:k=>{te.error("Failed to delete floater")}});if(!t||s("page_FloaterManagement"))return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"max-w-md",children:e.jsx(ce,{className:"p-6 text-center",children:e.jsx("p",{className:"text-slate-600",children:"Access denied. Administrator privileges required."})})})});const T=(k=null)=>{k?(o(k),p({name:k.name||"",description:k.description||"",image_url:k.image_url||"",action_type:k.action_type||"webhook",webhook_url:k.webhook_url||"",redirect_url:k.redirect_url||"",form_slug:k.form_slug||"",window_target:k.window_target||"new_tab",popup_width:k.popup_width||800,popup_height:k.popup_height||600,display_location:k.display_location||"both",position:k.position||"bottom-right",offset_x:k.offset_x??20,offset_y:k.offset_y??20,width:k.width||80,height:k.height||80,show_background:k.show_background??!0,is_active:k.is_active??!0,display_order:k.display_order||0})):(o(null),p({name:"",description:"",image_url:"",action_type:"webhook",webhook_url:"",redirect_url:"",form_slug:"",window_target:"new_tab",popup_width:800,popup_height:600,display_location:"both",position:"bottom-right",offset_x:20,offset_y:20,width:80,height:80,show_background:!0,is_active:!0,display_order:0})),r(!0)},A=()=>{r(!1),o(null),p({name:"",description:"",image_url:"",action_type:"webhook",webhook_url:"",redirect_url:"",form_slug:"",window_target:"new_tab",popup_width:800,popup_height:600,display_location:"both",position:"bottom-right",offset_x:20,offset_y:20,width:80,height:80,show_background:!0,is_active:!0,display_order:0})},P=async k=>{var R;const E=(R=k.target.files)==null?void 0:R[0];if(E){if(!E.type.startsWith("image/")){te.error("Please select an image file");return}m(!0);try{const F=await X.integrations.Core.UploadFile({file:E});p(z=>({...z,image_url:F.file_url})),te.success("Image uploaded successfully")}catch{te.error("Failed to upload image")}finally{m(!1)}}},C=()=>{if(!h.name||!h.image_url){te.error("Please fill in name and image");return}if(h.action_type==="webhook"&&!h.webhook_url){te.error("Please provide a webhook URL");return}if(h.action_type==="url"&&!h.redirect_url){te.error("Please provide a redirect URL");return}if(h.action_type==="form"&&!h.form_slug){te.error("Please select a form");return}const k={name:h.name,description:h.description,image_url:h.image_url,action_type:h.action_type,webhook_url:h.webhook_url,redirect_url:h.redirect_url,form_slug:h.form_slug,window_target:h.window_target,popup_width:Number(h.popup_width),popup_height:Number(h.popup_height),display_location:h.display_location,position:h.position,offset_x:Number(h.offset_x),offset_y:Number(h.offset_y),width:Number(h.width),height:Number(h.height),show_background:h.show_background,is_active:h.is_active,display_order:Number(h.display_order)};l?N.mutate({id:l.id,floaterData:k}):w.mutate(k)},O=()=>{c&&_.mutate(c.id)},M=k=>{switch(k){case"portal":return{text:"Portal Only",className:"bg-blue-100 text-blue-700"};case"public":return{text:"Public Only",className:"bg-green-100 text-green-700"};case"both":return{text:"Portal & Public",className:"bg-purple-100 text-purple-700"};default:return{text:k,className:"bg-slate-100 text-slate-700"}}};return y?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(vt,{className:"w-8 h-8 animate-spin text-blue-600"})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Floater Management"}),e.jsx("p",{className:"text-slate-600",children:"Create and manage floating widget elements"})]}),e.jsxs(J,{onClick:()=>T(),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Create Floater"]})]}),v.length===0?e.jsx(le,{className:"border-slate-200",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(Hf,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No floaters yet"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"Create your first floating widget to get started"}),e.jsxs(J,{onClick:()=>T(),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Create Floater"]})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(k=>{const E=M(k.display_location);return e.jsxs(le,{className:"border-slate-200 hover:shadow-lg transition-shadow",children:[e.jsx(Fe,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(Ue,{className:"text-base mb-2",children:k.name}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs(ye,{className:E.className,children:[E.text," "]}),e.jsx(ye,{variant:"outline",className:"gap-1",children:k.action_type==="webhook"?e.jsxs(e.Fragment,{children:[e.jsx(_Y,{className:"w-3 h-3"}),"Webhook"]}):k.action_type==="url"?e.jsxs(e.Fragment,{children:[e.jsx(TE,{className:"w-3 h-3"}),k.window_target==="popup"?"Popup":k.window_target==="parent"?"Parent":k.window_target==="current"?"Current":"New Tab"]}):e.jsxs(e.Fragment,{children:[e.jsx(TE,{className:"w-3 h-3"})," ","Form"]})}),e.jsx(ye,{variant:k.is_active?"default":"secondary",children:k.is_active?e.jsxs(e.Fragment,{children:[e.jsx(gr,{className:"w-3 h-3 mr-1"}),"Active"]}):e.jsxs(e.Fragment,{children:[e.jsx($1,{className:"w-3 h-3 mr-1"}),"Inactive"]})})]})]}),k.image_url&&e.jsx("img",{src:k.image_url,alt:k.name,className:"w-16 h-16 object-contain border border-slate-200 rounded ml-2"})]})}),e.jsxs(ce,{className:"space-y-2",children:[k.description&&e.jsx("p",{className:"text-xs text-slate-600 line-clamp-2",children:k.description}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Action:"}),e.jsx("span",{className:"text-xs text-slate-900 truncate max-w-[180px]",title:k.action_type==="webhook"?k.webhook_url:k.action_type==="url"?k.redirect_url:k.action_type==="form"?k.form_slug:"",children:k.action_type==="webhook"?k.webhook_url:k.action_type==="url"?k.redirect_url:k.action_type==="form"?`Form: ${k.form_slug}`:"N/A"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Position:"}),e.jsx(ye,{variant:"secondary",children:k.position})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Size:"}),e.jsxs(ye,{variant:"secondary",children:[k.width,"x",k.height,"px"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Background:"}),e.jsx(ye,{variant:"secondary",children:k.show_background??!0?"Yes":"No"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Clicks:"}),e.jsx(ye,{variant:"secondary",children:k.click_count||0})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(J,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>T(k),children:[e.jsx(As,{className:"w-3 h-3 mr-1"}),"Edit"]}),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>{u(k),i(!0)},children:e.jsx(os,{className:"w-3 h-3"})})]})]})]},k.id)})})]}),e.jsx(Ct,{open:n,onOpenChange:r,children:e.jsxs(Nt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(kt,{children:[e.jsxs(Et,{children:[l?"Edit":"Create"," Floater"]}),e.jsx(ya,{children:"Configure a floating widget that can trigger a webhook, navigate to a URL, or open a form."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"name",children:"Name *"}),e.jsx(he,{id:"name",value:h.name,onChange:k=>p({...h,name:k.target.value}),placeholder:"e.g., Help Widget, Contact Button"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"description",children:"Description"}),e.jsx(Gt,{id:"description",value:h.description,onChange:k=>p({...h,description:k.target.value}),placeholder:"What does this floater do?",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"image",children:"Image *"}),e.jsxs("div",{className:"flex items-center gap-4",children:[h.image_url&&e.jsx("img",{src:h.image_url,alt:"Floater",className:"w-20 h-20 object-contain border border-slate-200 rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"file",id:"image-upload",accept:"image/*",onChange:P,className:"hidden"}),e.jsx(J,{type:"button",variant:"outline",disabled:d,onClick:()=>document.getElementById("image-upload").click(),children:d?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Gs,{className:"w-4 h-4 mr-2"}),"Upload Image"]})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"action-type",children:"Click Action *"}),e.jsxs(Ke,{value:h.action_type,onValueChange:k=>p({...h,action_type:k}),children:[e.jsx(Ve,{id:"action-type",children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"webhook",children:"Call Webhook"}),e.jsx(re,{value:"url",children:"Navigate to URL"}),e.jsx(re,{value:"form",children:"Open Form"})," "]})]})]}),h.action_type==="webhook"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"webhook-url",children:"Webhook URL *"}),e.jsx(he,{id:"webhook-url",type:"url",value:h.webhook_url,onChange:k=>p({...h,webhook_url:k.target.value}),placeholder:"https://example.com/webhook"}),e.jsx("p",{className:"text-xs text-slate-500",children:"URL to call when the floater is clicked"})]}),h.action_type==="url"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"redirect-url",children:"Redirect URL *"}),e.jsx(he,{id:"redirect-url",type:"url",value:h.redirect_url,onChange:k=>p({...h,redirect_url:k.target.value}),placeholder:"https://example.com/page"}),e.jsx("p",{className:"text-xs text-slate-500",children:"URL to navigate to when clicked"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"window-target",children:"Window Target *"}),e.jsxs(Ke,{value:h.window_target,onValueChange:k=>p({...h,window_target:k}),children:[e.jsx(Ve,{id:"window-target",children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"current",children:"Current Window"}),e.jsx(re,{value:"new_tab",children:"New Tab"}),e.jsx(re,{value:"parent",children:"Parent Window"}),e.jsx(re,{value:"popup",children:"Popup Window"})]})]})]}),h.window_target==="popup"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 pl-4 border-l-2 border-blue-200 bg-blue-50 p-3 rounded",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"popup-width",children:"Popup Width (px)"}),e.jsx(he,{id:"popup-width",type:"number",value:h.popup_width,onChange:k=>p({...h,popup_width:parseInt(k.target.value,10)}),min:200})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"popup-height",children:"Popup Height (px)"}),e.jsx(he,{id:"popup-height",type:"number",value:h.popup_height,onChange:k=>p({...h,popup_height:parseInt(k.target.value,10)}),min:200})]})]})]}),h.action_type==="form"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"form-slug",children:"Form *"}),e.jsxs(Ke,{value:h.form_slug,onValueChange:k=>p({...h,form_slug:k}),children:[e.jsx(Ve,{id:"form-slug",children:e.jsx(Qe,{placeholder:"Select a form"})}),e.jsx(We,{children:j.map(k=>e.jsx(re,{value:k.slug,children:k.name},k.id))})]}),j.length===0&&e.jsx("p",{className:"text-xs text-amber-600",children:"No forms available. Create a form first."}),e.jsx("p",{className:"text-xs text-slate-500",children:"The form to open when the floater is clicked"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"display_location",children:"Display Location *"}),e.jsxs(Ke,{value:h.display_location,onValueChange:k=>p({...h,display_location:k}),children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"portal",children:"Portal Only"}),e.jsx(re,{value:"public",children:"Public Only"}),e.jsx(re,{value:"both",children:"Both"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"position",children:"Position *"}),e.jsxs(Ke,{value:h.position,onValueChange:k=>p({...h,position:k}),children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"bottom-right",children:"Bottom Right"}),e.jsx(re,{value:"bottom-left",children:"Bottom Left"}),e.jsx(re,{value:"top-right",children:"Top Right"}),e.jsx(re,{value:"top-left",children:"Top Left"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"offset_x",children:"Offset X (px)"}),e.jsx(he,{id:"offset_x",type:"number",value:h.offset_x,onChange:k=>p({...h,offset_x:parseInt(k.target.value,10)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"offset_y",children:"Offset Y (px)"}),e.jsx(he,{id:"offset_y",type:"number",value:h.offset_y,onChange:k=>p({...h,offset_y:parseInt(k.target.value,10)})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"width",children:"Width (px)"}),e.jsx(he,{id:"width",type:"number",value:h.width,onChange:k=>p({...h,width:parseInt(k.target.value,10)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"height",children:"Height (px)"}),e.jsx(he,{id:"height",type:"number",value:h.height,onChange:k=>p({...h,height:parseInt(k.target.value,10)})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"display_order",children:"Display Order"}),e.jsx(he,{id:"display_order",type:"number",value:h.display_order,onChange:k=>p({...h,display_order:parseInt(k.target.value,10)})}),e.jsx("p",{className:"text-xs text-slate-500",children:"Lower numbers appear first"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ee,{htmlFor:"show_background",children:"Show Background"}),e.jsx(cs,{id:"show_background",checked:h.show_background,onCheckedChange:k=>p({...h,show_background:k})})]}),e.jsx("p",{className:"text-xs text-slate-500 -mt-2",children:"Display rounded background and shadow"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ee,{htmlFor:"is_active",children:"Active"}),e.jsx(cs,{id:"is_active",checked:h.is_active,onCheckedChange:k=>p({...h,is_active:k})})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:A,children:"Cancel"}),e.jsxs(J,{onClick:C,className:"bg-blue-600 hover:bg-blue-700",children:[l?"Update":"Create"," Floater"]})]})]})}),e.jsx(Ml,{open:a,onOpenChange:i,children:e.jsxs(Vi,{children:[e.jsxs(Wi,{children:[e.jsx(Ki,{children:"Are you sure?"}),e.jsxs(Gi,{children:['This will permanently delete the floater "',c==null?void 0:c.name,'". This action cannot be undone.']})]}),e.jsxs(Hi,{children:[e.jsx(Qi,{children:"Cancel"}),e.jsx(Yi,{onClick:O,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})}function f9({isAdmin:t,isFeatureExcluded:s}){const[n,r]=b.useState(!1),[a,i]=b.useState(null),l=Yt(),{data:o=[],isLoading:c}=me({queryKey:["forms"],queryFn:async()=>await X.entities.Form.list(),staleTime:30*1e3}),u=Le({mutationFn:async p=>await X.entities.Form.delete(p),onSuccess:()=>{l.invalidateQueries({queryKey:["forms"]}),te.success("Form deleted successfully"),r(!1),i(null)},onError:p=>{te.error("Failed to delete form")}}),d=Le({mutationFn:async p=>{const{id:g,created_date:v,updated_date:y,created_by:j,submission_count:w,...N}=p,_={...N,name:`Copy of ${p.name}`,slug:`${p.slug}-copy-${Date.now()}`,submission_count:0};return await X.entities.Form.create(_)},onSuccess:()=>{l.invalidateQueries({queryKey:["forms"]}),te.success("Form duplicated successfully")},onError:p=>{te.error("Failed to duplicate form")}});if(!t||s("page_FormManagement"))return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"max-w-md",children:e.jsx(ce,{className:"p-6 text-center",children:e.jsx("p",{className:"text-slate-600",children:"Access denied. Administrator privileges required."})})})});const m=()=>{a&&u.mutate(a.id)},h=p=>{d.mutate(p)};return c?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(vt,{className:"w-8 h-8 animate-spin text-blue-600"})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Form Management"}),e.jsx("p",{className:"text-slate-600",children:"Create and manage custom forms"})]}),e.jsx(Ht,{to:Pe("FormBuilder"),children:e.jsxs(J,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Create Form"]})})]}),o.length===0?e.jsx(le,{className:"border-slate-200",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(ns,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No forms yet"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"Create your first form to get started"}),e.jsx(Ht,{to:Pe("FormBuilder"),children:e.jsxs(J,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Create Form"]})})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(p=>{var g;return e.jsxs(le,{className:"border-slate-200 hover:shadow-lg transition-shadow",children:[e.jsx(Fe,{className:"pb-3",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx(Ue,{className:"text-base mb-2",children:p.name}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(ye,{variant:"outline",children:p.layout_type==="card_swipe"?"Card Swipe":"Standard"}),e.jsx(ye,{variant:p.is_active?"default":"secondary",children:p.is_active?e.jsxs(e.Fragment,{children:[e.jsx(gr,{className:"w-3 h-3 mr-1"}),"Active"]}):e.jsxs(e.Fragment,{children:[e.jsx($1,{className:"w-3 h-3 mr-1"}),"Inactive"]})}),p.require_authentication&&e.jsx(ye,{variant:"secondary",children:"Auth Required"})]})]})})}),e.jsxs(ce,{className:"space-y-3",children:[p.description&&e.jsx("p",{className:"text-xs text-slate-600 line-clamp-2",children:p.description}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Fields:"}),e.jsx(ye,{variant:"secondary",children:((g=p.fields)==null?void 0:g.length)||0})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Submissions:"}),e.jsxs(ye,{variant:"secondary",className:"gap-1",children:[e.jsx(ah,{className:"w-3 h-3"}),p.submission_count||0]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Slug:"}),e.jsx("code",{className:"text-xs bg-slate-100 px-2 py-1 rounded",children:p.slug})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(Ht,{to:`${Pe("FormBuilder")}?formId=${p.id}`,className:"flex-1",children:e.jsxs(J,{variant:"outline",size:"sm",className:"w-full",children:[e.jsx(As,{className:"w-3 h-3 mr-1"}),"Edit"]})}),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>h(p),disabled:d.isPending,title:"Duplicate form",children:e.jsx(Va,{className:"w-3 h-3"})}),e.jsx(Ht,{to:`${Pe("FormView")}?slug=${p.slug}`,children:e.jsx(J,{variant:"outline",size:"sm",children:e.jsx(gr,{className:"w-3 h-3"})})}),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>{i(p),r(!0)},children:e.jsx(os,{className:"w-3 h-3"})})]})]})]},p.id)})})]}),e.jsx(Ml,{open:n,onOpenChange:r,children:e.jsxs(Vi,{children:[e.jsxs(Wi,{children:[e.jsx(Ki,{children:"Are you sure?"}),e.jsxs(Gi,{children:['This will permanently delete the form "',a==null?void 0:a.name,'" and all its submissions. This action cannot be undone.']})]}),e.jsxs(Hi,{children:[e.jsx(Qi,{children:"Cancel"}),e.jsx(Yi,{onClick:m,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})}const YNe=[{value:"text",label:"Text Input"},{value:"email",label:"Email"},{value:"number",label:"Number"},{value:"tel",label:"Phone"},{value:"textarea",label:"Text Area"},{value:"select",label:"Dropdown"},{value:"radio",label:"Radio Buttons"},{value:"checkbox",label:"Checkboxes"},{value:"date",label:"Date"},{value:"time",label:"Time"},{value:"file",label:"File Upload"},{value:"user_name",label:"User Name (Auto)"},{value:"user_email",label:"User Email (Auto)"},{value:"user_organization",label:"User Organization (Auto)"},{value:"user_job_title",label:"User Job Title (Auto)"}];function p9({isAdmin:t,isFeatureExcluded:s}){const[n,r]=b.useState({name:"",description:"",slug:"",layout_type:"standard",fields:[],submit_button_text:"Submit",success_message:"Thank you for your submission!",redirect_url:"",require_authentication:!1,is_active:!0}),a=Yt(),l=new URLSearchParams(window.location.search).get("formId"),{data:o,isLoading:c}=me({queryKey:["form",l],queryFn:async()=>l?(await X.entities.Form.list()).find(j=>j.id===l):null,enabled:!!l,staleTime:30*1e3});b.useEffect(()=>{o&&r({name:o.name||"",description:o.description||"",slug:o.slug||"",layout_type:o.layout_type||"standard",fields:o.fields?o.fields.map(y=>({...y,allow_other:y.allow_other??!1})):[],submit_button_text:o.submit_button_text||"Submit",success_message:o.success_message||"Thank you for your submission!",redirect_url:o.redirect_url||"",require_authentication:o.require_authentication||!1,is_active:o.is_active??!0})},[o]);const u=Le({mutationFn:async y=>await X.entities.Form.create(y),onSuccess:()=>{a.invalidateQueries({queryKey:["forms"]}),te.success("Form created successfully"),window.location.href=Pe("FormManagement")},onError:y=>{te.error("Failed to create form")}}),d=Le({mutationFn:async({id:y,data:j})=>await X.entities.Form.update(y,j),onSuccess:()=>{a.invalidateQueries({queryKey:["forms"]}),te.success("Form updated successfully")},onError:y=>{te.error("Failed to update form")}});if(!t||s("page_FormBuilder"))return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"max-w-md",children:e.jsx(ce,{className:"p-6 text-center",children:e.jsx("p",{className:"text-slate-600",children:"Access denied. Administrator privileges required."})})})});const m=()=>{const y={id:`field_${Date.now()}`,type:"text",label:"New Field",placeholder:"",required:!1,options:[],allow_other:!1};r({...n,fields:[...n.fields,y]})},h=(y,j)=>{const w=[...n.fields];w[y]={...w[y],...j},r({...n,fields:w})},p=y=>{const j=n.fields.filter((w,N)=>N!==y);r({...n,fields:j})},g=y=>{if(!y.destination)return;const j=Array.from(n.fields),[w]=j.splice(y.source.index,1);j.splice(y.destination.index,0,w),r({...n,fields:j})},v=()=>{if(!n.name||!n.slug){te.error("Please fill in name and slug");return}if(n.fields.length===0){te.error("Please add at least one field");return}l?d.mutate({id:l,data:n}):u.mutate(n)};return c?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(vt,{className:"w-8 h-8 animate-spin text-blue-600"})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx(Ht,{to:Pe("FormManagement"),children:e.jsxs(J,{variant:"ghost",size:"sm",className:"mb-2",children:[e.jsx(ll,{className:"w-4 h-4 mr-2"}),"Back to Forms"]})}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:l?"Edit Form":"Create Form"})]}),e.jsx(J,{onClick:v,disabled:u.isPending||d.isPending,className:"bg-blue-600 hover:bg-blue-700",children:u.isPending||d.isPending?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(un,{className:"w-4 h-4 mr-2"}),"Save Form"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(le,{className:"border-slate-200 sticky top-4",children:[e.jsx(Fe,{children:e.jsx(Ue,{className:"text-lg",children:"Form Settings"})}),e.jsxs(ce,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"name",children:"Form Name *"}),e.jsx(he,{id:"name",value:n.name,onChange:y=>r({...n,name:y.target.value}),placeholder:"Contact Form"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"slug",children:"Slug *"}),e.jsx(he,{id:"slug",value:n.slug,onChange:y=>r({...n,slug:y.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"-")}),placeholder:"contact-form"}),e.jsxs("p",{className:"text-xs text-slate-500",children:["URL: /FormView?slug=",n.slug||"your-slug"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"description",children:"Description"}),e.jsx(Gt,{id:"description",value:n.description,onChange:y=>r({...n,description:y.target.value}),placeholder:"Form description...",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"layout_type",children:"Layout Type *"}),e.jsxs(Ke,{value:n.layout_type,onValueChange:y=>r({...n,layout_type:y}),children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"standard",children:"Standard (All Fields)"}),e.jsx(re,{value:"card_swipe",children:"Card Swipe (One at a Time)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"submit_button_text",children:"Submit Button Text"}),e.jsx(he,{id:"submit_button_text",value:n.submit_button_text,onChange:y=>r({...n,submit_button_text:y.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"success_message",children:"Success Message"}),e.jsx(Gt,{id:"success_message",value:n.success_message,onChange:y=>r({...n,success_message:y.target.value}),rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"redirect_url",children:"Redirect URL (Optional)"}),e.jsx(he,{id:"redirect_url",type:"url",value:n.redirect_url,onChange:y=>r({...n,redirect_url:y.target.value}),placeholder:"https://example.com/thanks"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ee,{htmlFor:"require_authentication",children:"Require Login"}),e.jsx(cs,{id:"require_authentication",checked:n.require_authentication,onCheckedChange:y=>r({...n,require_authentication:y})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ee,{htmlFor:"is_active",children:"Active"}),e.jsx(cs,{id:"is_active",checked:n.is_active,onCheckedChange:y=>r({...n,is_active:y})})]})]})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(le,{className:"border-slate-200",children:[e.jsx(Fe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ue,{className:"text-lg",children:"Form Fields"}),e.jsxs(J,{onClick:m,size:"sm",variant:"outline",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Add Field"]})]})}),e.jsx(ce,{children:n.fields.length===0?e.jsxs("div",{className:"text-center py-12 text-slate-500",children:[e.jsx("p",{className:"mb-4",children:"No fields added yet"}),e.jsxs(J,{onClick:m,variant:"outline",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Add Your First Field"]})]}):e.jsx(pp,{onDragEnd:g,children:e.jsx(Yc,{droppableId:"fields",children:y=>e.jsxs("div",{...y.droppableProps,ref:y.innerRef,className:"space-y-4",children:[n.fields.map((j,w)=>e.jsx(Gc,{draggableId:j.id,index:w,children:N=>e.jsx("div",{ref:N.innerRef,...N.draggableProps,className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{...N.dragHandleProps,className:"mt-2 cursor-move",children:e.jsx(pd,{className:"w-5 h-5 text-slate-400"})}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(ee,{className:"text-xs",children:"Field Type"}),e.jsxs(Ke,{value:j.type,onValueChange:_=>h(w,{type:_}),children:[e.jsx(Ve,{className:"h-9",children:e.jsx(Qe,{})}),e.jsx(We,{children:YNe.map(_=>e.jsx(re,{value:_.value,children:_.label},_.value))})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(ee,{className:"text-xs",children:"Label"}),e.jsx(he,{value:j.label,onChange:_=>h(w,{label:_.target.value}),className:"h-9"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(ee,{className:"text-xs",children:"Placeholder"}),e.jsx(he,{value:j.placeholder,onChange:_=>h(w,{placeholder:_.target.value}),className:"h-9"})]}),["select","radio","checkbox"].includes(j.type)&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(ee,{className:"text-xs",children:"Options (one per line)"}),e.jsx(Gt,{value:(j.options||[]).join(`
`),onChange:_=>h(w,{options:_.target.value.split(`
`).filter(T=>T.trim())}),className:"h-20 text-sm",placeholder:`Option 1
Option 2
Option 3`})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(cs,{id:`required-${j.id}`,checked:j.required,onCheckedChange:_=>h(w,{required:_})}),e.jsx(ee,{htmlFor:`required-${j.id}`,className:"text-xs",children:"Required"})]}),j.type==="select"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(cs,{id:`allow-other-${j.id}`,checked:j.allow_other||!1,onCheckedChange:_=>h(w,{allow_other:_})}),e.jsx(ee,{htmlFor:`allow-other-${j.id}`,className:"text-xs",children:'Allow "Other"'})]})]}),e.jsx(J,{variant:"ghost",size:"sm",onClick:()=>p(w),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(os,{className:"w-4 h-4"})})]})]})]})})},j.id)),y.placeholder]})})})})]})})]})]})})}function x9({memberInfo:t,organizationInfo:s}){const[n,r]=b.useState(0),[a,i]=b.useState({}),[l,o]=b.useState(!1),c=Yt(),d=new URLSearchParams(window.location.search).get("slug"),{data:m}=me({queryKey:["member-record",t==null?void 0:t.email],queryFn:async()=>(await X.entities.Member.list()).find(w=>w.email===(t==null?void 0:t.email)),enabled:!!(t!=null&&t.email),staleTime:30*1e3}),{data:h,isLoading:p}=me({queryKey:["form-by-slug",d],queryFn:async()=>(await X.entities.Form.list()).find(w=>w.slug===d&&w.is_active),enabled:!!d,staleTime:30*1e3}),g=Le({mutationFn:async j=>await X.entities.FormSubmission.create(j),onSuccess:async()=>{h&&await X.entities.Form.update(h.id,{submission_count:(h.submission_count||0)+1}),c.invalidateQueries({queryKey:["form-by-slug"]}),o(!0),h!=null&&h.redirect_url&&setTimeout(()=>{window.location.href=h.redirect_url},2e3)},onError:j=>{te.error("Failed to submit form")}});if(p)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(vt,{className:"w-8 h-8 animate-spin text-blue-600"})});if(!h)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"max-w-md",children:e.jsx(ce,{className:"p-6 text-center",children:e.jsx("p",{className:"text-slate-600",children:"Form not found or is not active."})})})});if(h.require_authentication&&!t)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"max-w-md",children:e.jsx(ce,{className:"p-6 text-center",children:e.jsx("p",{className:"text-slate-600",children:"Please log in to access this form."})})})});const v=async()=>{const j=h.fields.filter(N=>N.required&&(!a[N.id]||a[N.id].length===0));if(j.length>0){te.error(`Please fill in all required fields: ${j.map(N=>N.label).join(", ")}`);return}const w={form_id:h.id,form_name:h.name,submitted_by_email:(t==null?void 0:t.email)||null,submitted_by_name:t?`${t.first_name} ${t.last_name}`:null,submission_data:a};g.mutate(w)};if(l)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"max-w-md border-green-200",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Jn,{className:"w-8 h-8 text-green-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Success!"}),e.jsx("p",{className:"text-slate-600",children:h.success_message}),h.redirect_url&&e.jsx("p",{className:"text-sm text-slate-500 mt-4",children:"Redirecting..."})]})})});const y=m||t;if(h.layout_type==="card_swipe"){const j=h.fields[n],w=n===h.fields.length-1,N=!(j!=null&&j.required)||a[j==null?void 0:j.id];return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsxs(le,{className:"max-w-2xl w-full border-slate-200",children:[e.jsxs(Fe,{children:[e.jsx(Ue,{children:h.name}),h.description&&e.jsx(Es,{className:"whitespace-pre-line",children:h.description}),e.jsx("div",{className:"flex gap-1 mt-4",children:h.fields.map((_,T)=>e.jsx("div",{className:`h-1 flex-1 rounded ${T<=n?"bg-blue-600":"bg-slate-200"}`},T))})]}),e.jsx(ce,{className:"min-h-[300px]",children:j&&e.jsx(Vu,{field:j,value:a[j.id],onChange:_=>i({...a,[j.id]:_}),memberInfo:y,organizationInfo:s})}),e.jsxs("div",{className:"p-6 pt-0 flex justify-between",children:[e.jsxs(J,{variant:"outline",onClick:()=>r(n-1),disabled:n===0,children:[e.jsx(Wn,{className:"w-4 h-4 mr-2"}),"Previous"]}),w?e.jsx(J,{onClick:v,disabled:!N||g.isPending,className:"bg-blue-600 hover:bg-blue-700",children:g.isPending?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Submitting..."]}):h.submit_button_text}):e.jsxs(J,{onClick:()=>r(n+1),disabled:!N,children:["Next",e.jsx(js,{className:"w-4 h-4 ml-2"})]})]})]})})}return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs(le,{className:"border-slate-200",children:[e.jsxs(Fe,{children:[e.jsx(Ue,{children:h.name}),h.description&&e.jsx(Es,{className:"whitespace-pre-line",children:h.description})]}),e.jsxs(ce,{className:"space-y-6",children:[h.fields.map(j=>e.jsx(Vu,{field:j,value:a[j.id],onChange:w=>i({...a,[j.id]:w}),memberInfo:y,organizationInfo:s},j.id)),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(J,{onClick:v,disabled:g.isPending,className:"bg-blue-600 hover:bg-blue-700",children:g.isPending?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Submitting..."]}):h.submit_button_text})})]})]})})})}function g9({isAdmin:t,isFeatureExcluded:s}){const[n,r]=b.useState({show_profile_photo:!0,show_events:!0,show_articles:!0,show_organization:!0,show_job_title:!0,show_linkedin:!0,show_awards:!0,show_bio_in_popup:!0}),a=Yt(),{data:i,isLoading:l}=me({queryKey:["memberDirectoryDisplay"],queryFn:async()=>{const m=(await X.entities.SystemSettings.list()).find(h=>h.setting_key==="member_directory_display");if(m!=null&&m.setting_value)try{const h=JSON.parse(m.setting_value);return{id:m.id,...h}}catch(h){return console.error("Failed to parse member directory settings:",h),{id:m.id,show_profile_photo:!0,show_events:!0,show_articles:!0,show_organization:!0,show_job_title:!0,show_linkedin:!0,show_awards:!0,show_bio_in_popup:!0}}return{show_profile_photo:!0,show_events:!0,show_articles:!0,show_organization:!0,show_job_title:!0,show_linkedin:!0,show_awards:!0,show_bio_in_popup:!0}},staleTime:0,refetchOnMount:!0});b.useEffect(()=>{i&&r(i)},[i]);const o=Le({mutationFn:async d=>{const{id:m,...h}=d,p=JSON.stringify(h);return m?await X.entities.SystemSettings.update(m,{setting_value:p}):await X.entities.SystemSettings.create({setting_key:"member_directory_display",setting_value:p,description:"Controls which fields are displayed on Member Directory cards"})},onSuccess:()=>{a.invalidateQueries({queryKey:["memberDirectoryDisplay"]}),te.success("Settings saved successfully")},onError:d=>{console.error("Failed to save settings:",d),te.error("Failed to save settings")}}),c=d=>{r(m=>({...m,[d]:!m[d]}))},u=()=>{o.mutate(n)};return!t||s("page_MemberDirectorySettings")?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"max-w-md",children:e.jsx(ce,{className:"p-6 text-center",children:e.jsx("p",{className:"text-slate-600",children:"Access denied. Administrator privileges required."})})})}):l?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(vt,{className:"w-8 h-8 animate-spin text-blue-600"})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(ws,{className:"w-8 h-8 text-blue-600"}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900",children:"Member Directory Settings"})]}),e.jsx("p",{className:"text-slate-600",children:"Configure what information displays on member directory cards"})]}),e.jsxs(le,{className:"border-slate-200",children:[e.jsxs(Fe,{children:[e.jsx(Ue,{children:"Display Options"}),e.jsx(Es,{children:"Toggle which fields appear on member cards in the directory"})]}),e.jsxs(ce,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg border border-slate-200",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"show-profile-photo",className:"cursor-pointer font-medium",children:"Profile Photos"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Display member profile photos on cards"})]}),e.jsx(cs,{id:"show-profile-photo",checked:n.show_profile_photo,onCheckedChange:()=>c("show_profile_photo")})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg border border-slate-200",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"show-organization",className:"cursor-pointer font-medium",children:"Organization"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Display the member's organization name"})]}),e.jsx(cs,{id:"show-organization",checked:n.show_organization,onCheckedChange:()=>c("show_organization")})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg border border-slate-200",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"show-job-title",className:"cursor-pointer font-medium",children:"Job Title"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Display the member's job title"})]}),e.jsx(cs,{id:"show-job-title",checked:n.show_job_title,onCheckedChange:()=>c("show_job_title")})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg border border-slate-200",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"show-linkedin",className:"cursor-pointer font-medium",children:"LinkedIn Profile"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Display LinkedIn profile link if available"})]}),e.jsx(cs,{id:"show-linkedin",checked:n.show_linkedin,onCheckedChange:()=>c("show_linkedin")})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg border border-slate-200",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"show-events",className:"cursor-pointer font-medium",children:"Events Attended"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Display count of events attended"})]}),e.jsx(cs,{id:"show-events",checked:n.show_events,onCheckedChange:()=>c("show_events")})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg border border-slate-200",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"show-articles",className:"cursor-pointer font-medium",children:"Articles Published"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Display count of published articles"})]}),e.jsx(cs,{id:"show-articles",checked:n.show_articles,onCheckedChange:()=>c("show_articles")})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg border border-slate-200",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"show-awards",className:"cursor-pointer font-medium",children:"Awards"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Display member's earned awards"})]}),e.jsx(cs,{id:"show-awards",checked:n.show_awards,onCheckedChange:()=>c("show_awards")})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg border border-slate-200",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"show-bio-in-popup",className:"cursor-pointer font-medium",children:"Biography in Detail View"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Display member biography in the popup detail view"})]}),e.jsx(cs,{id:"show-bio-in-popup",checked:n.show_bio_in_popup,onCheckedChange:()=>c("show_bio_in_popup")})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-slate-200",children:e.jsx(J,{onClick:u,disabled:o.isPending,className:"bg-blue-600 hover:bg-blue-700",children:o.isPending?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(un,{className:"w-4 h-4 mr-2"}),"Save Settings"]})})})]})]})]})})}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var v9;function _t(){return v9.apply(null,arguments)}function QNe(t){v9=t}function wi(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function Qc(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function zs(t,s){return Object.prototype.hasOwnProperty.call(t,s)}function uC(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var s;for(s in t)if(zs(t,s))return!1;return!0}function Qr(t){return t===void 0}function Kl(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function vp(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function y9(t,s){var n=[],r,a=t.length;for(r=0;r<a;++r)n.push(s(t[r],r));return n}function Bo(t,s){for(var n in s)zs(s,n)&&(t[n]=s[n]);return zs(s,"toString")&&(t.toString=s.toString),zs(s,"valueOf")&&(t.valueOf=s.valueOf),t}function cl(t,s,n,r){return $9(t,s,n,r,!0).utc()}function JNe(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function ps(t){return t._pf==null&&(t._pf=JNe()),t._pf}var v1;Array.prototype.some?v1=Array.prototype.some:v1=function(t){var s=Object(this),n=s.length>>>0,r;for(r=0;r<n;r++)if(r in s&&t.call(this,s[r],r,s))return!0;return!1};function hC(t){var s=null,n=!1,r=t._d&&!isNaN(t._d.getTime());if(r&&(s=ps(t),n=v1.call(s.parsedDateParts,function(a){return a!=null}),r=s.overflow<0&&!s.empty&&!s.invalidEra&&!s.invalidMonth&&!s.invalidWeekday&&!s.weekdayMismatch&&!s.nullInput&&!s.invalidFormat&&!s.userInvalidated&&(!s.meridiem||s.meridiem&&n),t._strict&&(r=r&&s.charsLeftOver===0&&s.unusedTokens.length===0&&s.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=r;else return r;return t._isValid}function Tv(t){var s=cl(NaN);return t!=null?Bo(ps(s),t):ps(s).userInvalidated=!0,s}var v6=_t.momentProperties=[],_N=!1;function mC(t,s){var n,r,a,i=v6.length;if(Qr(s._isAMomentObject)||(t._isAMomentObject=s._isAMomentObject),Qr(s._i)||(t._i=s._i),Qr(s._f)||(t._f=s._f),Qr(s._l)||(t._l=s._l),Qr(s._strict)||(t._strict=s._strict),Qr(s._tzm)||(t._tzm=s._tzm),Qr(s._isUTC)||(t._isUTC=s._isUTC),Qr(s._offset)||(t._offset=s._offset),Qr(s._pf)||(t._pf=ps(s)),Qr(s._locale)||(t._locale=s._locale),i>0)for(n=0;n<i;n++)r=v6[n],a=s[r],Qr(a)||(t[r]=a);return t}function yp(t){mC(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),_N===!1&&(_N=!0,_t.updateOffset(this),_N=!1)}function Ni(t){return t instanceof yp||t!=null&&t._isAMomentObject!=null}function b9(t){_t.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function Xa(t,s){var n=!0;return Bo(function(){if(_t.deprecationHandler!=null&&_t.deprecationHandler(null,t),n){var r=[],a,i,l,o=arguments.length;for(i=0;i<o;i++){if(a="",typeof arguments[i]=="object"){a+=`
[`+i+"] ";for(l in arguments[0])zs(arguments[0],l)&&(a+=l+": "+arguments[0][l]+", ");a=a.slice(0,-2)}else a=arguments[i];r.push(a)}b9(t+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+new Error().stack),n=!1}return s.apply(this,arguments)},s)}var y6={};function j9(t,s){_t.deprecationHandler!=null&&_t.deprecationHandler(t,s),y6[t]||(b9(s),y6[t]=!0)}_t.suppressDeprecationWarnings=!1;_t.deprecationHandler=null;function dl(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function XNe(t){var s,n;for(n in t)zs(t,n)&&(s=t[n],dl(s)?this[n]=s:this["_"+n]=s);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function y1(t,s){var n=Bo({},t),r;for(r in s)zs(s,r)&&(Qc(t[r])&&Qc(s[r])?(n[r]={},Bo(n[r],t[r]),Bo(n[r],s[r])):s[r]!=null?n[r]=s[r]:delete n[r]);for(r in t)zs(t,r)&&!zs(s,r)&&Qc(t[r])&&(n[r]=Bo({},n[r]));return n}function fC(t){t!=null&&this.set(t)}var b1;Object.keys?b1=Object.keys:b1=function(t){var s,n=[];for(s in t)zs(t,s)&&n.push(s);return n};var ZNe={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function e_e(t,s,n){var r=this._calendar[t]||this._calendar.sameElse;return dl(r)?r.call(s,n):r}function rl(t,s,n){var r=""+Math.abs(t),a=s-r.length,i=t>=0;return(i?n?"+":"":"-")+Math.pow(10,Math.max(0,a)).toString().substr(1)+r}var pC=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,tg=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,SN={},_u={};function Qt(t,s,n,r){var a=r;typeof r=="string"&&(a=function(){return this[r]()}),t&&(_u[t]=a),s&&(_u[s[0]]=function(){return rl(a.apply(this,arguments),s[1],s[2])}),n&&(_u[n]=function(){return this.localeData().ordinal(a.apply(this,arguments),t)})}function t_e(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function s_e(t){var s=t.match(pC),n,r;for(n=0,r=s.length;n<r;n++)_u[s[n]]?s[n]=_u[s[n]]:s[n]=t_e(s[n]);return function(a){var i="",l;for(l=0;l<r;l++)i+=dl(s[l])?s[l].call(a,t):s[l];return i}}function Cg(t,s){return t.isValid()?(s=w9(s,t.localeData()),SN[s]=SN[s]||s_e(s),SN[s](t)):t.localeData().invalidDate()}function w9(t,s){var n=5;function r(a){return s.longDateFormat(a)||a}for(tg.lastIndex=0;n>=0&&tg.test(t);)t=t.replace(tg,r),tg.lastIndex=0,n-=1;return t}var n_e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function r_e(t){var s=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return s||!n?s:(this._longDateFormat[t]=n.match(pC).map(function(r){return r==="MMMM"||r==="MM"||r==="DD"||r==="dddd"?r.slice(1):r}).join(""),this._longDateFormat[t])}var a_e="Invalid date";function i_e(){return this._invalidDate}var l_e="%d",o_e=/\d{1,2}/;function c_e(t){return this._ordinal.replace("%d",t)}var d_e={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function u_e(t,s,n,r){var a=this._relativeTime[n];return dl(a)?a(t,s,n,r):a.replace(/%d/i,t)}function h_e(t,s){var n=this._relativeTime[t>0?"future":"past"];return dl(n)?n(s):n.replace(/%s/i,s)}var b6={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Za(t){return typeof t=="string"?b6[t]||b6[t.toLowerCase()]:void 0}function xC(t){var s={},n,r;for(r in t)zs(t,r)&&(n=Za(r),n&&(s[n]=t[r]));return s}var m_e={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function f_e(t){var s=[],n;for(n in t)zs(t,n)&&s.push({unit:n,priority:m_e[n]});return s.sort(function(r,a){return r.priority-a.priority}),s}var N9=/\d/,Ea=/\d\d/,_9=/\d{3}/,gC=/\d{4}/,Av=/[+-]?\d{6}/,mn=/\d\d?/,S9=/\d\d\d\d?/,C9=/\d\d\d\d\d\d?/,Mv=/\d{1,3}/,vC=/\d{1,4}/,Dv=/[+-]?\d{1,6}/,Th=/\d+/,Ov=/[+-]?\d+/,p_e=/Z|[+-]\d\d:?\d\d/gi,Rv=/Z|[+-]\d\d(?::?\d\d)?/gi,x_e=/[+-]?\d+(\.\d{1,3})?/,bp=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Ah=/^[1-9]\d?/,yC=/^([1-9]\d|\d)/,u0;u0={};function Dt(t,s,n){u0[t]=dl(s)?s:function(r,a){return r&&n?n:s}}function g_e(t,s){return zs(u0,t)?u0[t](s._strict,s._locale):new RegExp(v_e(t))}function v_e(t){return Ll(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(s,n,r,a,i){return n||r||a||i}))}function Ll(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Ua(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function Ps(t){var s=+t,n=0;return s!==0&&isFinite(s)&&(n=Ua(s)),n}var j1={};function Zs(t,s){var n,r=s,a;for(typeof t=="string"&&(t=[t]),Kl(s)&&(r=function(i,l){l[s]=Ps(i)}),a=t.length,n=0;n<a;n++)j1[t[n]]=r}function jp(t,s){Zs(t,function(n,r,a,i){a._w=a._w||{},s(n,a._w,a,i)})}function y_e(t,s,n){s!=null&&zs(j1,t)&&j1[t](s,n._a,n,t)}function Fv(t){return t%4===0&&t%100!==0||t%400===0}var xr=0,Dl=1,$i=2,Un=3,pi=4,Ol=5,Oc=6,b_e=7,j_e=8;Qt("Y",0,0,function(){var t=this.year();return t<=9999?rl(t,4):"+"+t});Qt(0,["YY",2],0,function(){return this.year()%100});Qt(0,["YYYY",4],0,"year");Qt(0,["YYYYY",5],0,"year");Qt(0,["YYYYYY",6,!0],0,"year");Dt("Y",Ov);Dt("YY",mn,Ea);Dt("YYYY",vC,gC);Dt("YYYYY",Dv,Av);Dt("YYYYYY",Dv,Av);Zs(["YYYYY","YYYYYY"],xr);Zs("YYYY",function(t,s){s[xr]=t.length===2?_t.parseTwoDigitYear(t):Ps(t)});Zs("YY",function(t,s){s[xr]=_t.parseTwoDigitYear(t)});Zs("Y",function(t,s){s[xr]=parseInt(t,10)});function Qm(t){return Fv(t)?366:365}_t.parseTwoDigitYear=function(t){return Ps(t)+(Ps(t)>68?1900:2e3)};var k9=Mh("FullYear",!0);function w_e(){return Fv(this.year())}function Mh(t,s){return function(n){return n!=null?(E9(this,t,n),_t.updateOffset(this,s),this):Sf(this,t)}}function Sf(t,s){if(!t.isValid())return NaN;var n=t._d,r=t._isUTC;switch(s){case"Milliseconds":return r?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return r?n.getUTCSeconds():n.getSeconds();case"Minutes":return r?n.getUTCMinutes():n.getMinutes();case"Hours":return r?n.getUTCHours():n.getHours();case"Date":return r?n.getUTCDate():n.getDate();case"Day":return r?n.getUTCDay():n.getDay();case"Month":return r?n.getUTCMonth():n.getMonth();case"FullYear":return r?n.getUTCFullYear():n.getFullYear();default:return NaN}}function E9(t,s,n){var r,a,i,l,o;if(!(!t.isValid()||isNaN(n))){switch(r=t._d,a=t._isUTC,s){case"Milliseconds":return void(a?r.setUTCMilliseconds(n):r.setMilliseconds(n));case"Seconds":return void(a?r.setUTCSeconds(n):r.setSeconds(n));case"Minutes":return void(a?r.setUTCMinutes(n):r.setMinutes(n));case"Hours":return void(a?r.setUTCHours(n):r.setHours(n));case"Date":return void(a?r.setUTCDate(n):r.setDate(n));case"FullYear":break;default:return}i=n,l=t.month(),o=t.date(),o=o===29&&l===1&&!Fv(i)?28:o,a?r.setUTCFullYear(i,l,o):r.setFullYear(i,l,o)}}function N_e(t){return t=Za(t),dl(this[t])?this[t]():this}function __e(t,s){if(typeof t=="object"){t=xC(t);var n=f_e(t),r,a=n.length;for(r=0;r<a;r++)this[n[r].unit](t[n[r].unit])}else if(t=Za(t),dl(this[t]))return this[t](s);return this}function S_e(t,s){return(t%s+s)%s}var Mn;Array.prototype.indexOf?Mn=Array.prototype.indexOf:Mn=function(t){var s;for(s=0;s<this.length;++s)if(this[s]===t)return s;return-1};function bC(t,s){if(isNaN(t)||isNaN(s))return NaN;var n=S_e(s,12);return t+=(s-n)/12,n===1?Fv(t)?29:28:31-n%7%2}Qt("M",["MM",2],"Mo",function(){return this.month()+1});Qt("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});Qt("MMMM",0,0,function(t){return this.localeData().months(this,t)});Dt("M",mn,Ah);Dt("MM",mn,Ea);Dt("MMM",function(t,s){return s.monthsShortRegex(t)});Dt("MMMM",function(t,s){return s.monthsRegex(t)});Zs(["M","MM"],function(t,s){s[Dl]=Ps(t)-1});Zs(["MMM","MMMM"],function(t,s,n,r){var a=n._locale.monthsParse(t,r,n._strict);a!=null?s[Dl]=a:ps(n).invalidMonth=t});var C_e="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),P9="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),T9=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,k_e=bp,E_e=bp;function P_e(t,s){return t?wi(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||T9).test(s)?"format":"standalone"][t.month()]:wi(this._months)?this._months:this._months.standalone}function T_e(t,s){return t?wi(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[T9.test(s)?"format":"standalone"][t.month()]:wi(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function A_e(t,s,n){var r,a,i,l=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)i=cl([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(i,"").toLocaleLowerCase();return n?s==="MMM"?(a=Mn.call(this._shortMonthsParse,l),a!==-1?a:null):(a=Mn.call(this._longMonthsParse,l),a!==-1?a:null):s==="MMM"?(a=Mn.call(this._shortMonthsParse,l),a!==-1?a:(a=Mn.call(this._longMonthsParse,l),a!==-1?a:null)):(a=Mn.call(this._longMonthsParse,l),a!==-1?a:(a=Mn.call(this._shortMonthsParse,l),a!==-1?a:null))}function M_e(t,s,n){var r,a,i;if(this._monthsParseExact)return A_e.call(this,t,s,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(a=cl([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),!n&&!this._monthsParse[r]&&(i="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[r]=new RegExp(i.replace(".",""),"i")),n&&s==="MMMM"&&this._longMonthsParse[r].test(t))return r;if(n&&s==="MMM"&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}}function A9(t,s){if(!t.isValid())return t;if(typeof s=="string"){if(/^\d+$/.test(s))s=Ps(s);else if(s=t.localeData().monthsParse(s),!Kl(s))return t}var n=s,r=t.date();return r=r<29?r:Math.min(r,bC(t.year(),n)),t._isUTC?t._d.setUTCMonth(n,r):t._d.setMonth(n,r),t}function M9(t){return t!=null?(A9(this,t),_t.updateOffset(this,!0),this):Sf(this,"Month")}function D_e(){return bC(this.year(),this.month())}function O_e(t){return this._monthsParseExact?(zs(this,"_monthsRegex")||D9.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(zs(this,"_monthsShortRegex")||(this._monthsShortRegex=k_e),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function R_e(t){return this._monthsParseExact?(zs(this,"_monthsRegex")||D9.call(this),t?this._monthsStrictRegex:this._monthsRegex):(zs(this,"_monthsRegex")||(this._monthsRegex=E_e),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function D9(){function t(c,u){return u.length-c.length}var s=[],n=[],r=[],a,i,l,o;for(a=0;a<12;a++)i=cl([2e3,a]),l=Ll(this.monthsShort(i,"")),o=Ll(this.months(i,"")),s.push(l),n.push(o),r.push(o),r.push(l);s.sort(t),n.sort(t),r.sort(t),this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+s.join("|")+")","i")}function F_e(t,s,n,r,a,i,l){var o;return t<100&&t>=0?(o=new Date(t+400,s,n,r,a,i,l),isFinite(o.getFullYear())&&o.setFullYear(t)):o=new Date(t,s,n,r,a,i,l),o}function Cf(t){var s,n;return t<100&&t>=0?(n=Array.prototype.slice.call(arguments),n[0]=t+400,s=new Date(Date.UTC.apply(null,n)),isFinite(s.getUTCFullYear())&&s.setUTCFullYear(t)):s=new Date(Date.UTC.apply(null,arguments)),s}function h0(t,s,n){var r=7+s-n,a=(7+Cf(t,0,r).getUTCDay()-s)%7;return-a+r-1}function O9(t,s,n,r,a){var i=(7+n-r)%7,l=h0(t,r,a),o=1+7*(s-1)+i+l,c,u;return o<=0?(c=t-1,u=Qm(c)+o):o>Qm(t)?(c=t+1,u=o-Qm(t)):(c=t,u=o),{year:c,dayOfYear:u}}function kf(t,s,n){var r=h0(t.year(),s,n),a=Math.floor((t.dayOfYear()-r-1)/7)+1,i,l;return a<1?(l=t.year()-1,i=a+Il(l,s,n)):a>Il(t.year(),s,n)?(i=a-Il(t.year(),s,n),l=t.year()+1):(l=t.year(),i=a),{week:i,year:l}}function Il(t,s,n){var r=h0(t,s,n),a=h0(t+1,s,n);return(Qm(t)-r+a)/7}Qt("w",["ww",2],"wo","week");Qt("W",["WW",2],"Wo","isoWeek");Dt("w",mn,Ah);Dt("ww",mn,Ea);Dt("W",mn,Ah);Dt("WW",mn,Ea);jp(["w","ww","W","WW"],function(t,s,n,r){s[r.substr(0,1)]=Ps(t)});function L_e(t){return kf(t,this._week.dow,this._week.doy).week}var I_e={dow:0,doy:6};function B_e(){return this._week.dow}function q_e(){return this._week.doy}function z_e(t){var s=this.localeData().week(this);return t==null?s:this.add((t-s)*7,"d")}function $_e(t){var s=kf(this,1,4).week;return t==null?s:this.add((t-s)*7,"d")}Qt("d",0,"do","day");Qt("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});Qt("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});Qt("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});Qt("e",0,0,"weekday");Qt("E",0,0,"isoWeekday");Dt("d",mn);Dt("e",mn);Dt("E",mn);Dt("dd",function(t,s){return s.weekdaysMinRegex(t)});Dt("ddd",function(t,s){return s.weekdaysShortRegex(t)});Dt("dddd",function(t,s){return s.weekdaysRegex(t)});jp(["dd","ddd","dddd"],function(t,s,n,r){var a=n._locale.weekdaysParse(t,r,n._strict);a!=null?s.d=a:ps(n).invalidWeekday=t});jp(["d","e","E"],function(t,s,n,r){s[r]=Ps(t)});function U_e(t,s){return typeof t!="string"?t:isNaN(t)?(t=s.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function V_e(t,s){return typeof t=="string"?s.weekdaysParse(t)%7||7:isNaN(t)?null:t}function jC(t,s){return t.slice(s,7).concat(t.slice(0,s))}var W_e="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),R9="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),H_e="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),K_e=bp,G_e=bp,Y_e=bp;function Q_e(t,s){var n=wi(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(s)?"format":"standalone"];return t===!0?jC(n,this._week.dow):t?n[t.day()]:n}function J_e(t){return t===!0?jC(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function X_e(t){return t===!0?jC(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Z_e(t,s,n){var r,a,i,l=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)i=cl([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(i,"").toLocaleLowerCase();return n?s==="dddd"?(a=Mn.call(this._weekdaysParse,l),a!==-1?a:null):s==="ddd"?(a=Mn.call(this._shortWeekdaysParse,l),a!==-1?a:null):(a=Mn.call(this._minWeekdaysParse,l),a!==-1?a:null):s==="dddd"?(a=Mn.call(this._weekdaysParse,l),a!==-1||(a=Mn.call(this._shortWeekdaysParse,l),a!==-1)?a:(a=Mn.call(this._minWeekdaysParse,l),a!==-1?a:null)):s==="ddd"?(a=Mn.call(this._shortWeekdaysParse,l),a!==-1||(a=Mn.call(this._weekdaysParse,l),a!==-1)?a:(a=Mn.call(this._minWeekdaysParse,l),a!==-1?a:null)):(a=Mn.call(this._minWeekdaysParse,l),a!==-1||(a=Mn.call(this._weekdaysParse,l),a!==-1)?a:(a=Mn.call(this._shortWeekdaysParse,l),a!==-1?a:null))}function e1e(t,s,n){var r,a,i;if(this._weekdaysParseExact)return Z_e.call(this,t,s,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(a=cl([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(a,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(a,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(a,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(i="^"+this.weekdays(a,"")+"|^"+this.weekdaysShort(a,"")+"|^"+this.weekdaysMin(a,""),this._weekdaysParse[r]=new RegExp(i.replace(".",""),"i")),n&&s==="dddd"&&this._fullWeekdaysParse[r].test(t))return r;if(n&&s==="ddd"&&this._shortWeekdaysParse[r].test(t))return r;if(n&&s==="dd"&&this._minWeekdaysParse[r].test(t))return r;if(!n&&this._weekdaysParse[r].test(t))return r}}function t1e(t){if(!this.isValid())return t!=null?this:NaN;var s=Sf(this,"Day");return t!=null?(t=U_e(t,this.localeData()),this.add(t-s,"d")):s}function s1e(t){if(!this.isValid())return t!=null?this:NaN;var s=(this.day()+7-this.localeData()._week.dow)%7;return t==null?s:this.add(t-s,"d")}function n1e(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var s=V_e(t,this.localeData());return this.day(this.day()%7?s:s-7)}else return this.day()||7}function r1e(t){return this._weekdaysParseExact?(zs(this,"_weekdaysRegex")||wC.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(zs(this,"_weekdaysRegex")||(this._weekdaysRegex=K_e),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function a1e(t){return this._weekdaysParseExact?(zs(this,"_weekdaysRegex")||wC.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(zs(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=G_e),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function i1e(t){return this._weekdaysParseExact?(zs(this,"_weekdaysRegex")||wC.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(zs(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Y_e),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function wC(){function t(d,m){return m.length-d.length}var s=[],n=[],r=[],a=[],i,l,o,c,u;for(i=0;i<7;i++)l=cl([2e3,1]).day(i),o=Ll(this.weekdaysMin(l,"")),c=Ll(this.weekdaysShort(l,"")),u=Ll(this.weekdays(l,"")),s.push(o),n.push(c),r.push(u),a.push(o),a.push(c),a.push(u);s.sort(t),n.sort(t),r.sort(t),a.sort(t),this._weekdaysRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function NC(){return this.hours()%12||12}function l1e(){return this.hours()||24}Qt("H",["HH",2],0,"hour");Qt("h",["hh",2],0,NC);Qt("k",["kk",2],0,l1e);Qt("hmm",0,0,function(){return""+NC.apply(this)+rl(this.minutes(),2)});Qt("hmmss",0,0,function(){return""+NC.apply(this)+rl(this.minutes(),2)+rl(this.seconds(),2)});Qt("Hmm",0,0,function(){return""+this.hours()+rl(this.minutes(),2)});Qt("Hmmss",0,0,function(){return""+this.hours()+rl(this.minutes(),2)+rl(this.seconds(),2)});function F9(t,s){Qt(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),s)})}F9("a",!0);F9("A",!1);function L9(t,s){return s._meridiemParse}Dt("a",L9);Dt("A",L9);Dt("H",mn,yC);Dt("h",mn,Ah);Dt("k",mn,Ah);Dt("HH",mn,Ea);Dt("hh",mn,Ea);Dt("kk",mn,Ea);Dt("hmm",S9);Dt("hmmss",C9);Dt("Hmm",S9);Dt("Hmmss",C9);Zs(["H","HH"],Un);Zs(["k","kk"],function(t,s,n){var r=Ps(t);s[Un]=r===24?0:r});Zs(["a","A"],function(t,s,n){n._isPm=n._locale.isPM(t),n._meridiem=t});Zs(["h","hh"],function(t,s,n){s[Un]=Ps(t),ps(n).bigHour=!0});Zs("hmm",function(t,s,n){var r=t.length-2;s[Un]=Ps(t.substr(0,r)),s[pi]=Ps(t.substr(r)),ps(n).bigHour=!0});Zs("hmmss",function(t,s,n){var r=t.length-4,a=t.length-2;s[Un]=Ps(t.substr(0,r)),s[pi]=Ps(t.substr(r,2)),s[Ol]=Ps(t.substr(a)),ps(n).bigHour=!0});Zs("Hmm",function(t,s,n){var r=t.length-2;s[Un]=Ps(t.substr(0,r)),s[pi]=Ps(t.substr(r))});Zs("Hmmss",function(t,s,n){var r=t.length-4,a=t.length-2;s[Un]=Ps(t.substr(0,r)),s[pi]=Ps(t.substr(r,2)),s[Ol]=Ps(t.substr(a))});function o1e(t){return(t+"").toLowerCase().charAt(0)==="p"}var c1e=/[ap]\.?m?\.?/i,d1e=Mh("Hours",!0);function u1e(t,s,n){return t>11?n?"pm":"PM":n?"am":"AM"}var I9={calendar:ZNe,longDateFormat:n_e,invalidDate:a_e,ordinal:l_e,dayOfMonthOrdinalParse:o_e,relativeTime:d_e,months:C_e,monthsShort:P9,week:I_e,weekdays:W_e,weekdaysMin:H_e,weekdaysShort:R9,meridiemParse:c1e},xn={},Em={},Ef;function h1e(t,s){var n,r=Math.min(t.length,s.length);for(n=0;n<r;n+=1)if(t[n]!==s[n])return n;return r}function j6(t){return t&&t.toLowerCase().replace("_","-")}function m1e(t){for(var s=0,n,r,a,i;s<t.length;){for(i=j6(t[s]).split("-"),n=i.length,r=j6(t[s+1]),r=r?r.split("-"):null;n>0;){if(a=Lv(i.slice(0,n).join("-")),a)return a;if(r&&r.length>=n&&h1e(i,r)>=n-1)break;n--}s++}return Ef}function f1e(t){return!!(t&&t.match("^[^/\\\\]*$"))}function Lv(t){var s=null,n;if(xn[t]===void 0&&typeof Ag<"u"&&Ag&&Ag.exports&&f1e(t))try{s=Ef._abbr,n=require,n("./locale/"+t),Wo(s)}catch{xn[t]=null}return xn[t]}function Wo(t,s){var n;return t&&(Qr(s)?n=Zl(t):n=_C(t,s),n?Ef=n:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Ef._abbr}function _C(t,s){if(s!==null){var n,r=I9;if(s.abbr=t,xn[t]!=null)j9("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=xn[t]._config;else if(s.parentLocale!=null)if(xn[s.parentLocale]!=null)r=xn[s.parentLocale]._config;else if(n=Lv(s.parentLocale),n!=null)r=n._config;else return Em[s.parentLocale]||(Em[s.parentLocale]=[]),Em[s.parentLocale].push({name:t,config:s}),null;return xn[t]=new fC(y1(r,s)),Em[t]&&Em[t].forEach(function(a){_C(a.name,a.config)}),Wo(t),xn[t]}else return delete xn[t],null}function p1e(t,s){if(s!=null){var n,r,a=I9;xn[t]!=null&&xn[t].parentLocale!=null?xn[t].set(y1(xn[t]._config,s)):(r=Lv(t),r!=null&&(a=r._config),s=y1(a,s),r==null&&(s.abbr=t),n=new fC(s),n.parentLocale=xn[t],xn[t]=n),Wo(t)}else xn[t]!=null&&(xn[t].parentLocale!=null?(xn[t]=xn[t].parentLocale,t===Wo()&&Wo(t)):xn[t]!=null&&delete xn[t]);return xn[t]}function Zl(t){var s;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Ef;if(!wi(t)){if(s=Lv(t),s)return s;t=[t]}return m1e(t)}function x1e(){return b1(xn)}function SC(t){var s,n=t._a;return n&&ps(t).overflow===-2&&(s=n[Dl]<0||n[Dl]>11?Dl:n[$i]<1||n[$i]>bC(n[xr],n[Dl])?$i:n[Un]<0||n[Un]>24||n[Un]===24&&(n[pi]!==0||n[Ol]!==0||n[Oc]!==0)?Un:n[pi]<0||n[pi]>59?pi:n[Ol]<0||n[Ol]>59?Ol:n[Oc]<0||n[Oc]>999?Oc:-1,ps(t)._overflowDayOfYear&&(s<xr||s>$i)&&(s=$i),ps(t)._overflowWeeks&&s===-1&&(s=b_e),ps(t)._overflowWeekday&&s===-1&&(s=j_e),ps(t).overflow=s),t}var g1e=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,v1e=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,y1e=/Z|[+-]\d\d(?::?\d\d)?/,sg=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],CN=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],b1e=/^\/?Date\((-?\d+)/i,j1e=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,w1e={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function B9(t){var s,n,r=t._i,a=g1e.exec(r)||v1e.exec(r),i,l,o,c,u=sg.length,d=CN.length;if(a){for(ps(t).iso=!0,s=0,n=u;s<n;s++)if(sg[s][1].exec(a[1])){l=sg[s][0],i=sg[s][2]!==!1;break}if(l==null){t._isValid=!1;return}if(a[3]){for(s=0,n=d;s<n;s++)if(CN[s][1].exec(a[3])){o=(a[2]||" ")+CN[s][0];break}if(o==null){t._isValid=!1;return}}if(!i&&o!=null){t._isValid=!1;return}if(a[4])if(y1e.exec(a[4]))c="Z";else{t._isValid=!1;return}t._f=l+(o||"")+(c||""),kC(t)}else t._isValid=!1}function N1e(t,s,n,r,a,i){var l=[_1e(t),P9.indexOf(s),parseInt(n,10),parseInt(r,10),parseInt(a,10)];return i&&l.push(parseInt(i,10)),l}function _1e(t){var s=parseInt(t,10);return s<=49?2e3+s:s<=999?1900+s:s}function S1e(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function C1e(t,s,n){if(t){var r=R9.indexOf(t),a=new Date(s[0],s[1],s[2]).getDay();if(r!==a)return ps(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function k1e(t,s,n){if(t)return w1e[t];if(s)return 0;var r=parseInt(n,10),a=r%100,i=(r-a)/100;return i*60+a}function q9(t){var s=j1e.exec(S1e(t._i)),n;if(s){if(n=N1e(s[4],s[3],s[2],s[5],s[6],s[7]),!C1e(s[1],n,t))return;t._a=n,t._tzm=k1e(s[8],s[9],s[10]),t._d=Cf.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),ps(t).rfc2822=!0}else t._isValid=!1}function E1e(t){var s=b1e.exec(t._i);if(s!==null){t._d=new Date(+s[1]);return}if(B9(t),t._isValid===!1)delete t._isValid;else return;if(q9(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:_t.createFromInputFallback(t)}_t.createFromInputFallback=Xa("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function cu(t,s,n){return t??s??n}function P1e(t){var s=new Date(_t.now());return t._useUTC?[s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()]:[s.getFullYear(),s.getMonth(),s.getDate()]}function CC(t){var s,n,r=[],a,i,l;if(!t._d){for(a=P1e(t),t._w&&t._a[$i]==null&&t._a[Dl]==null&&T1e(t),t._dayOfYear!=null&&(l=cu(t._a[xr],a[xr]),(t._dayOfYear>Qm(l)||t._dayOfYear===0)&&(ps(t)._overflowDayOfYear=!0),n=Cf(l,0,t._dayOfYear),t._a[Dl]=n.getUTCMonth(),t._a[$i]=n.getUTCDate()),s=0;s<3&&t._a[s]==null;++s)t._a[s]=r[s]=a[s];for(;s<7;s++)t._a[s]=r[s]=t._a[s]==null?s===2?1:0:t._a[s];t._a[Un]===24&&t._a[pi]===0&&t._a[Ol]===0&&t._a[Oc]===0&&(t._nextDay=!0,t._a[Un]=0),t._d=(t._useUTC?Cf:F_e).apply(null,r),i=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Un]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==i&&(ps(t).weekdayMismatch=!0)}}function T1e(t){var s,n,r,a,i,l,o,c,u;s=t._w,s.GG!=null||s.W!=null||s.E!=null?(i=1,l=4,n=cu(s.GG,t._a[xr],kf(hn(),1,4).year),r=cu(s.W,1),a=cu(s.E,1),(a<1||a>7)&&(c=!0)):(i=t._locale._week.dow,l=t._locale._week.doy,u=kf(hn(),i,l),n=cu(s.gg,t._a[xr],u.year),r=cu(s.w,u.week),s.d!=null?(a=s.d,(a<0||a>6)&&(c=!0)):s.e!=null?(a=s.e+i,(s.e<0||s.e>6)&&(c=!0)):a=i),r<1||r>Il(n,i,l)?ps(t)._overflowWeeks=!0:c!=null?ps(t)._overflowWeekday=!0:(o=O9(n,r,a,i,l),t._a[xr]=o.year,t._dayOfYear=o.dayOfYear)}_t.ISO_8601=function(){};_t.RFC_2822=function(){};function kC(t){if(t._f===_t.ISO_8601){B9(t);return}if(t._f===_t.RFC_2822){q9(t);return}t._a=[],ps(t).empty=!0;var s=""+t._i,n,r,a,i,l,o=s.length,c=0,u,d;for(a=w9(t._f,t._locale).match(pC)||[],d=a.length,n=0;n<d;n++)i=a[n],r=(s.match(g_e(i,t))||[])[0],r&&(l=s.substr(0,s.indexOf(r)),l.length>0&&ps(t).unusedInput.push(l),s=s.slice(s.indexOf(r)+r.length),c+=r.length),_u[i]?(r?ps(t).empty=!1:ps(t).unusedTokens.push(i),y_e(i,r,t)):t._strict&&!r&&ps(t).unusedTokens.push(i);ps(t).charsLeftOver=o-c,s.length>0&&ps(t).unusedInput.push(s),t._a[Un]<=12&&ps(t).bigHour===!0&&t._a[Un]>0&&(ps(t).bigHour=void 0),ps(t).parsedDateParts=t._a.slice(0),ps(t).meridiem=t._meridiem,t._a[Un]=A1e(t._locale,t._a[Un],t._meridiem),u=ps(t).era,u!==null&&(t._a[xr]=t._locale.erasConvertYear(u,t._a[xr])),CC(t),SC(t)}function A1e(t,s,n){var r;return n==null?s:t.meridiemHour!=null?t.meridiemHour(s,n):(t.isPM!=null&&(r=t.isPM(n),r&&s<12&&(s+=12),!r&&s===12&&(s=0)),s)}function M1e(t){var s,n,r,a,i,l,o=!1,c=t._f.length;if(c===0){ps(t).invalidFormat=!0,t._d=new Date(NaN);return}for(a=0;a<c;a++)i=0,l=!1,s=mC({},t),t._useUTC!=null&&(s._useUTC=t._useUTC),s._f=t._f[a],kC(s),hC(s)&&(l=!0),i+=ps(s).charsLeftOver,i+=ps(s).unusedTokens.length*10,ps(s).score=i,o?i<r&&(r=i,n=s):(r==null||i<r||l)&&(r=i,n=s,l&&(o=!0));Bo(t,n||s)}function D1e(t){if(!t._d){var s=xC(t._i),n=s.day===void 0?s.date:s.day;t._a=y9([s.year,s.month,n,s.hour,s.minute,s.second,s.millisecond],function(r){return r&&parseInt(r,10)}),CC(t)}}function O1e(t){var s=new yp(SC(z9(t)));return s._nextDay&&(s.add(1,"d"),s._nextDay=void 0),s}function z9(t){var s=t._i,n=t._f;return t._locale=t._locale||Zl(t._l),s===null||n===void 0&&s===""?Tv({nullInput:!0}):(typeof s=="string"&&(t._i=s=t._locale.preparse(s)),Ni(s)?new yp(SC(s)):(vp(s)?t._d=s:wi(n)?M1e(t):n?kC(t):R1e(t),hC(t)||(t._d=null),t))}function R1e(t){var s=t._i;Qr(s)?t._d=new Date(_t.now()):vp(s)?t._d=new Date(s.valueOf()):typeof s=="string"?E1e(t):wi(s)?(t._a=y9(s.slice(0),function(n){return parseInt(n,10)}),CC(t)):Qc(s)?D1e(t):Kl(s)?t._d=new Date(s):_t.createFromInputFallback(t)}function $9(t,s,n,r,a){var i={};return(s===!0||s===!1)&&(r=s,s=void 0),(n===!0||n===!1)&&(r=n,n=void 0),(Qc(t)&&uC(t)||wi(t)&&t.length===0)&&(t=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=a,i._l=n,i._i=t,i._f=s,i._strict=r,O1e(i)}function hn(t,s,n,r){return $9(t,s,n,r,!1)}var F1e=Xa("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=hn.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:Tv()}),L1e=Xa("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=hn.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:Tv()});function U9(t,s){var n,r;if(s.length===1&&wi(s[0])&&(s=s[0]),!s.length)return hn();for(n=s[0],r=1;r<s.length;++r)(!s[r].isValid()||s[r][t](n))&&(n=s[r]);return n}function I1e(){var t=[].slice.call(arguments,0);return U9("isBefore",t)}function B1e(){var t=[].slice.call(arguments,0);return U9("isAfter",t)}var q1e=function(){return Date.now?Date.now():+new Date},Pm=["year","quarter","month","week","day","hour","minute","second","millisecond"];function z1e(t){var s,n=!1,r,a=Pm.length;for(s in t)if(zs(t,s)&&!(Mn.call(Pm,s)!==-1&&(t[s]==null||!isNaN(t[s]))))return!1;for(r=0;r<a;++r)if(t[Pm[r]]){if(n)return!1;parseFloat(t[Pm[r]])!==Ps(t[Pm[r]])&&(n=!0)}return!0}function $1e(){return this._isValid}function U1e(){return Ci(NaN)}function Iv(t){var s=xC(t),n=s.year||0,r=s.quarter||0,a=s.month||0,i=s.week||s.isoWeek||0,l=s.day||0,o=s.hour||0,c=s.minute||0,u=s.second||0,d=s.millisecond||0;this._isValid=z1e(s),this._milliseconds=+d+u*1e3+c*6e4+o*1e3*60*60,this._days=+l+i*7,this._months=+a+r*3+n*12,this._data={},this._locale=Zl(),this._bubble()}function kg(t){return t instanceof Iv}function w1(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function V1e(t,s,n){var r=Math.min(t.length,s.length),a=Math.abs(t.length-s.length),i=0,l;for(l=0;l<r;l++)Ps(t[l])!==Ps(s[l])&&i++;return i+a}function V9(t,s){Qt(t,0,0,function(){var n=this.utcOffset(),r="+";return n<0&&(n=-n,r="-"),r+rl(~~(n/60),2)+s+rl(~~n%60,2)})}V9("Z",":");V9("ZZ","");Dt("Z",Rv);Dt("ZZ",Rv);Zs(["Z","ZZ"],function(t,s,n){n._useUTC=!0,n._tzm=EC(Rv,t)});var W1e=/([\+\-]|\d\d)/gi;function EC(t,s){var n=(s||"").match(t),r,a,i;return n===null?null:(r=n[n.length-1]||[],a=(r+"").match(W1e)||["-",0,0],i=+(a[1]*60)+Ps(a[2]),i===0?0:a[0]==="+"?i:-i)}function PC(t,s){var n,r;return s._isUTC?(n=s.clone(),r=(Ni(t)||vp(t)?t.valueOf():hn(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),_t.updateOffset(n,!1),n):hn(t).local()}function N1(t){return-Math.round(t._d.getTimezoneOffset())}_t.updateOffset=function(){};function H1e(t,s,n){var r=this._offset||0,a;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=EC(Rv,t),t===null)return this}else Math.abs(t)<16&&!n&&(t=t*60);return!this._isUTC&&s&&(a=N1(this)),this._offset=t,this._isUTC=!0,a!=null&&this.add(a,"m"),r!==t&&(!s||this._changeInProgress?K9(this,Ci(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,_t.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?r:N1(this)}function K1e(t,s){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,s),this):-this.utcOffset()}function G1e(t){return this.utcOffset(0,t)}function Y1e(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(N1(this),"m")),this}function Q1e(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=EC(p_e,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function J1e(t){return this.isValid()?(t=t?hn(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function X1e(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Z1e(){if(!Qr(this._isDSTShifted))return this._isDSTShifted;var t={},s;return mC(t,this),t=z9(t),t._a?(s=t._isUTC?cl(t._a):hn(t._a),this._isDSTShifted=this.isValid()&&V1e(t._a,s.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function e2e(){return this.isValid()?!this._isUTC:!1}function t2e(){return this.isValid()?this._isUTC:!1}function W9(){return this.isValid()?this._isUTC&&this._offset===0:!1}var s2e=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,n2e=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ci(t,s){var n=t,r=null,a,i,l;return kg(t)?n={ms:t._milliseconds,d:t._days,M:t._months}:Kl(t)||!isNaN(+t)?(n={},s?n[s]=+t:n.milliseconds=+t):(r=s2e.exec(t))?(a=r[1]==="-"?-1:1,n={y:0,d:Ps(r[$i])*a,h:Ps(r[Un])*a,m:Ps(r[pi])*a,s:Ps(r[Ol])*a,ms:Ps(w1(r[Oc]*1e3))*a}):(r=n2e.exec(t))?(a=r[1]==="-"?-1:1,n={y:Nc(r[2],a),M:Nc(r[3],a),w:Nc(r[4],a),d:Nc(r[5],a),h:Nc(r[6],a),m:Nc(r[7],a),s:Nc(r[8],a)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(l=r2e(hn(n.from),hn(n.to)),n={},n.ms=l.milliseconds,n.M=l.months),i=new Iv(n),kg(t)&&zs(t,"_locale")&&(i._locale=t._locale),kg(t)&&zs(t,"_isValid")&&(i._isValid=t._isValid),i}Ci.fn=Iv.prototype;Ci.invalid=U1e;function Nc(t,s){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*s}function w6(t,s){var n={};return n.months=s.month()-t.month()+(s.year()-t.year())*12,t.clone().add(n.months,"M").isAfter(s)&&--n.months,n.milliseconds=+s-+t.clone().add(n.months,"M"),n}function r2e(t,s){var n;return t.isValid()&&s.isValid()?(s=PC(s,t),t.isBefore(s)?n=w6(t,s):(n=w6(s,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function H9(t,s){return function(n,r){var a,i;return r!==null&&!isNaN(+r)&&(j9(s,"moment()."+s+"(period, number) is deprecated. Please use moment()."+s+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),a=Ci(n,r),K9(this,a,t),this}}function K9(t,s,n,r){var a=s._milliseconds,i=w1(s._days),l=w1(s._months);t.isValid()&&(r=r??!0,l&&A9(t,Sf(t,"Month")+l*n),i&&E9(t,"Date",Sf(t,"Date")+i*n),a&&t._d.setTime(t._d.valueOf()+a*n),r&&_t.updateOffset(t,i||l))}var a2e=H9(1,"add"),i2e=H9(-1,"subtract");function G9(t){return typeof t=="string"||t instanceof String}function l2e(t){return Ni(t)||vp(t)||G9(t)||Kl(t)||c2e(t)||o2e(t)||t===null||t===void 0}function o2e(t){var s=Qc(t)&&!uC(t),n=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],a,i,l=r.length;for(a=0;a<l;a+=1)i=r[a],n=n||zs(t,i);return s&&n}function c2e(t){var s=wi(t),n=!1;return s&&(n=t.filter(function(r){return!Kl(r)&&G9(t)}).length===0),s&&n}function d2e(t){var s=Qc(t)&&!uC(t),n=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],a,i;for(a=0;a<r.length;a+=1)i=r[a],n=n||zs(t,i);return s&&n}function u2e(t,s){var n=t.diff(s,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function h2e(t,s){arguments.length===1&&(arguments[0]?l2e(arguments[0])?(t=arguments[0],s=void 0):d2e(arguments[0])&&(s=arguments[0],t=void 0):(t=void 0,s=void 0));var n=t||hn(),r=PC(n,this).startOf("day"),a=_t.calendarFormat(this,r)||"sameElse",i=s&&(dl(s[a])?s[a].call(this,n):s[a]);return this.format(i||this.localeData().calendar(a,this,hn(n)))}function m2e(){return new yp(this)}function f2e(t,s){var n=Ni(t)?t:hn(t);return this.isValid()&&n.isValid()?(s=Za(s)||"millisecond",s==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(s).valueOf()):!1}function p2e(t,s){var n=Ni(t)?t:hn(t);return this.isValid()&&n.isValid()?(s=Za(s)||"millisecond",s==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(s).valueOf()<n.valueOf()):!1}function x2e(t,s,n,r){var a=Ni(t)?t:hn(t),i=Ni(s)?s:hn(s);return this.isValid()&&a.isValid()&&i.isValid()?(r=r||"()",(r[0]==="("?this.isAfter(a,n):!this.isBefore(a,n))&&(r[1]===")"?this.isBefore(i,n):!this.isAfter(i,n))):!1}function g2e(t,s){var n=Ni(t)?t:hn(t),r;return this.isValid()&&n.isValid()?(s=Za(s)||"millisecond",s==="millisecond"?this.valueOf()===n.valueOf():(r=n.valueOf(),this.clone().startOf(s).valueOf()<=r&&r<=this.clone().endOf(s).valueOf())):!1}function v2e(t,s){return this.isSame(t,s)||this.isAfter(t,s)}function y2e(t,s){return this.isSame(t,s)||this.isBefore(t,s)}function b2e(t,s,n){var r,a,i;if(!this.isValid())return NaN;if(r=PC(t,this),!r.isValid())return NaN;switch(a=(r.utcOffset()-this.utcOffset())*6e4,s=Za(s),s){case"year":i=Eg(this,r)/12;break;case"month":i=Eg(this,r);break;case"quarter":i=Eg(this,r)/3;break;case"second":i=(this-r)/1e3;break;case"minute":i=(this-r)/6e4;break;case"hour":i=(this-r)/36e5;break;case"day":i=(this-r-a)/864e5;break;case"week":i=(this-r-a)/6048e5;break;default:i=this-r}return n?i:Ua(i)}function Eg(t,s){if(t.date()<s.date())return-Eg(s,t);var n=(s.year()-t.year())*12+(s.month()-t.month()),r=t.clone().add(n,"months"),a,i;return s-r<0?(a=t.clone().add(n-1,"months"),i=(s-r)/(r-a)):(a=t.clone().add(n+1,"months"),i=(s-r)/(a-r)),-(n+i)||0}_t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";_t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function j2e(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function w2e(t){if(!this.isValid())return null;var s=t!==!0,n=s?this.clone().utc():this;return n.year()<0||n.year()>9999?Cg(n,s?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):dl(Date.prototype.toISOString)?s?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Cg(n,"Z")):Cg(n,s?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function N2e(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",s="",n,r,a,i;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",s="Z"),n="["+t+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",a="-MM-DD[T]HH:mm:ss.SSS",i=s+'[")]',this.format(n+r+a+i)}function _2e(t){t||(t=this.isUtc()?_t.defaultFormatUtc:_t.defaultFormat);var s=Cg(this,t);return this.localeData().postformat(s)}function S2e(t,s){return this.isValid()&&(Ni(t)&&t.isValid()||hn(t).isValid())?Ci({to:this,from:t}).locale(this.locale()).humanize(!s):this.localeData().invalidDate()}function C2e(t){return this.from(hn(),t)}function k2e(t,s){return this.isValid()&&(Ni(t)&&t.isValid()||hn(t).isValid())?Ci({from:this,to:t}).locale(this.locale()).humanize(!s):this.localeData().invalidDate()}function E2e(t){return this.to(hn(),t)}function Y9(t){var s;return t===void 0?this._locale._abbr:(s=Zl(t),s!=null&&(this._locale=s),this)}var Q9=Xa("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function J9(){return this._locale}var m0=1e3,Su=60*m0,f0=60*Su,X9=(365*400+97)*24*f0;function Cu(t,s){return(t%s+s)%s}function Z9(t,s,n){return t<100&&t>=0?new Date(t+400,s,n)-X9:new Date(t,s,n).valueOf()}function ez(t,s,n){return t<100&&t>=0?Date.UTC(t+400,s,n)-X9:Date.UTC(t,s,n)}function P2e(t){var s,n;if(t=Za(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?ez:Z9,t){case"year":s=n(this.year(),0,1);break;case"quarter":s=n(this.year(),this.month()-this.month()%3,1);break;case"month":s=n(this.year(),this.month(),1);break;case"week":s=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":s=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":s=n(this.year(),this.month(),this.date());break;case"hour":s=this._d.valueOf(),s-=Cu(s+(this._isUTC?0:this.utcOffset()*Su),f0);break;case"minute":s=this._d.valueOf(),s-=Cu(s,Su);break;case"second":s=this._d.valueOf(),s-=Cu(s,m0);break}return this._d.setTime(s),_t.updateOffset(this,!0),this}function T2e(t){var s,n;if(t=Za(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?ez:Z9,t){case"year":s=n(this.year()+1,0,1)-1;break;case"quarter":s=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":s=n(this.year(),this.month()+1,1)-1;break;case"week":s=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":s=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":s=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":s=this._d.valueOf(),s+=f0-Cu(s+(this._isUTC?0:this.utcOffset()*Su),f0)-1;break;case"minute":s=this._d.valueOf(),s+=Su-Cu(s,Su)-1;break;case"second":s=this._d.valueOf(),s+=m0-Cu(s,m0)-1;break}return this._d.setTime(s),_t.updateOffset(this,!0),this}function A2e(){return this._d.valueOf()-(this._offset||0)*6e4}function M2e(){return Math.floor(this.valueOf()/1e3)}function D2e(){return new Date(this.valueOf())}function O2e(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function R2e(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function F2e(){return this.isValid()?this.toISOString():null}function L2e(){return hC(this)}function I2e(){return Bo({},ps(this))}function B2e(){return ps(this).overflow}function q2e(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Qt("N",0,0,"eraAbbr");Qt("NN",0,0,"eraAbbr");Qt("NNN",0,0,"eraAbbr");Qt("NNNN",0,0,"eraName");Qt("NNNNN",0,0,"eraNarrow");Qt("y",["y",1],"yo","eraYear");Qt("y",["yy",2],0,"eraYear");Qt("y",["yyy",3],0,"eraYear");Qt("y",["yyyy",4],0,"eraYear");Dt("N",TC);Dt("NN",TC);Dt("NNN",TC);Dt("NNNN",J2e);Dt("NNNNN",X2e);Zs(["N","NN","NNN","NNNN","NNNNN"],function(t,s,n,r){var a=n._locale.erasParse(t,r,n._strict);a?ps(n).era=a:ps(n).invalidEra=t});Dt("y",Th);Dt("yy",Th);Dt("yyy",Th);Dt("yyyy",Th);Dt("yo",Z2e);Zs(["y","yy","yyy","yyyy"],xr);Zs(["yo"],function(t,s,n,r){var a;n._locale._eraYearOrdinalRegex&&(a=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?s[xr]=n._locale.eraYearOrdinalParse(t,a):s[xr]=parseInt(t,10)});function z2e(t,s){var n,r,a,i=this._eras||Zl("en")._eras;for(n=0,r=i.length;n<r;++n){switch(typeof i[n].since){case"string":a=_t(i[n].since).startOf("day"),i[n].since=a.valueOf();break}switch(typeof i[n].until){case"undefined":i[n].until=1/0;break;case"string":a=_t(i[n].until).startOf("day").valueOf(),i[n].until=a.valueOf();break}}return i}function $2e(t,s,n){var r,a,i=this.eras(),l,o,c;for(t=t.toUpperCase(),r=0,a=i.length;r<a;++r)if(l=i[r].name.toUpperCase(),o=i[r].abbr.toUpperCase(),c=i[r].narrow.toUpperCase(),n)switch(s){case"N":case"NN":case"NNN":if(o===t)return i[r];break;case"NNNN":if(l===t)return i[r];break;case"NNNNN":if(c===t)return i[r];break}else if([l,o,c].indexOf(t)>=0)return i[r]}function U2e(t,s){var n=t.since<=t.until?1:-1;return s===void 0?_t(t.since).year():_t(t.since).year()+(s-t.offset)*n}function V2e(){var t,s,n,r=this.localeData().eras();for(t=0,s=r.length;t<s;++t)if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until||r[t].until<=n&&n<=r[t].since)return r[t].name;return""}function W2e(){var t,s,n,r=this.localeData().eras();for(t=0,s=r.length;t<s;++t)if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until||r[t].until<=n&&n<=r[t].since)return r[t].narrow;return""}function H2e(){var t,s,n,r=this.localeData().eras();for(t=0,s=r.length;t<s;++t)if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until||r[t].until<=n&&n<=r[t].since)return r[t].abbr;return""}function K2e(){var t,s,n,r,a=this.localeData().eras();for(t=0,s=a.length;t<s;++t)if(n=a[t].since<=a[t].until?1:-1,r=this.clone().startOf("day").valueOf(),a[t].since<=r&&r<=a[t].until||a[t].until<=r&&r<=a[t].since)return(this.year()-_t(a[t].since).year())*n+a[t].offset;return this.year()}function G2e(t){return zs(this,"_erasNameRegex")||AC.call(this),t?this._erasNameRegex:this._erasRegex}function Y2e(t){return zs(this,"_erasAbbrRegex")||AC.call(this),t?this._erasAbbrRegex:this._erasRegex}function Q2e(t){return zs(this,"_erasNarrowRegex")||AC.call(this),t?this._erasNarrowRegex:this._erasRegex}function TC(t,s){return s.erasAbbrRegex(t)}function J2e(t,s){return s.erasNameRegex(t)}function X2e(t,s){return s.erasNarrowRegex(t)}function Z2e(t,s){return s._eraYearOrdinalRegex||Th}function AC(){var t=[],s=[],n=[],r=[],a,i,l,o,c,u=this.eras();for(a=0,i=u.length;a<i;++a)l=Ll(u[a].name),o=Ll(u[a].abbr),c=Ll(u[a].narrow),s.push(l),t.push(o),n.push(c),r.push(l),r.push(o),r.push(c);this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+s.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}Qt(0,["gg",2],0,function(){return this.weekYear()%100});Qt(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Bv(t,s){Qt(0,[t,t.length],0,s)}Bv("gggg","weekYear");Bv("ggggg","weekYear");Bv("GGGG","isoWeekYear");Bv("GGGGG","isoWeekYear");Dt("G",Ov);Dt("g",Ov);Dt("GG",mn,Ea);Dt("gg",mn,Ea);Dt("GGGG",vC,gC);Dt("gggg",vC,gC);Dt("GGGGG",Dv,Av);Dt("ggggg",Dv,Av);jp(["gggg","ggggg","GGGG","GGGGG"],function(t,s,n,r){s[r.substr(0,2)]=Ps(t)});jp(["gg","GG"],function(t,s,n,r){s[r]=_t.parseTwoDigitYear(t)});function eSe(t){return tz.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function tSe(t){return tz.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function sSe(){return Il(this.year(),1,4)}function nSe(){return Il(this.isoWeekYear(),1,4)}function rSe(){var t=this.localeData()._week;return Il(this.year(),t.dow,t.doy)}function aSe(){var t=this.localeData()._week;return Il(this.weekYear(),t.dow,t.doy)}function tz(t,s,n,r,a){var i;return t==null?kf(this,r,a).year:(i=Il(t,r,a),s>i&&(s=i),iSe.call(this,t,s,n,r,a))}function iSe(t,s,n,r,a){var i=O9(t,s,n,r,a),l=Cf(i.year,0,i.dayOfYear);return this.year(l.getUTCFullYear()),this.month(l.getUTCMonth()),this.date(l.getUTCDate()),this}Qt("Q",0,"Qo","quarter");Dt("Q",N9);Zs("Q",function(t,s){s[Dl]=(Ps(t)-1)*3});function lSe(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}Qt("D",["DD",2],"Do","date");Dt("D",mn,Ah);Dt("DD",mn,Ea);Dt("Do",function(t,s){return t?s._dayOfMonthOrdinalParse||s._ordinalParse:s._dayOfMonthOrdinalParseLenient});Zs(["D","DD"],$i);Zs("Do",function(t,s){s[$i]=Ps(t.match(mn)[0])});var sz=Mh("Date",!0);Qt("DDD",["DDDD",3],"DDDo","dayOfYear");Dt("DDD",Mv);Dt("DDDD",_9);Zs(["DDD","DDDD"],function(t,s,n){n._dayOfYear=Ps(t)});function oSe(t){var s=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?s:this.add(t-s,"d")}Qt("m",["mm",2],0,"minute");Dt("m",mn,yC);Dt("mm",mn,Ea);Zs(["m","mm"],pi);var cSe=Mh("Minutes",!1);Qt("s",["ss",2],0,"second");Dt("s",mn,yC);Dt("ss",mn,Ea);Zs(["s","ss"],Ol);var dSe=Mh("Seconds",!1);Qt("S",0,0,function(){return~~(this.millisecond()/100)});Qt(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Qt(0,["SSS",3],0,"millisecond");Qt(0,["SSSS",4],0,function(){return this.millisecond()*10});Qt(0,["SSSSS",5],0,function(){return this.millisecond()*100});Qt(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});Qt(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});Qt(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});Qt(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Dt("S",Mv,N9);Dt("SS",Mv,Ea);Dt("SSS",Mv,_9);var qo,nz;for(qo="SSSS";qo.length<=9;qo+="S")Dt(qo,Th);function uSe(t,s){s[Oc]=Ps(("0."+t)*1e3)}for(qo="S";qo.length<=9;qo+="S")Zs(qo,uSe);nz=Mh("Milliseconds",!1);Qt("z",0,0,"zoneAbbr");Qt("zz",0,0,"zoneName");function hSe(){return this._isUTC?"UTC":""}function mSe(){return this._isUTC?"Coordinated Universal Time":""}var ht=yp.prototype;ht.add=a2e;ht.calendar=h2e;ht.clone=m2e;ht.diff=b2e;ht.endOf=T2e;ht.format=_2e;ht.from=S2e;ht.fromNow=C2e;ht.to=k2e;ht.toNow=E2e;ht.get=N_e;ht.invalidAt=B2e;ht.isAfter=f2e;ht.isBefore=p2e;ht.isBetween=x2e;ht.isSame=g2e;ht.isSameOrAfter=v2e;ht.isSameOrBefore=y2e;ht.isValid=L2e;ht.lang=Q9;ht.locale=Y9;ht.localeData=J9;ht.max=L1e;ht.min=F1e;ht.parsingFlags=I2e;ht.set=__e;ht.startOf=P2e;ht.subtract=i2e;ht.toArray=O2e;ht.toObject=R2e;ht.toDate=D2e;ht.toISOString=w2e;ht.inspect=N2e;typeof Symbol<"u"&&Symbol.for!=null&&(ht[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});ht.toJSON=F2e;ht.toString=j2e;ht.unix=M2e;ht.valueOf=A2e;ht.creationData=q2e;ht.eraName=V2e;ht.eraNarrow=W2e;ht.eraAbbr=H2e;ht.eraYear=K2e;ht.year=k9;ht.isLeapYear=w_e;ht.weekYear=eSe;ht.isoWeekYear=tSe;ht.quarter=ht.quarters=lSe;ht.month=M9;ht.daysInMonth=D_e;ht.week=ht.weeks=z_e;ht.isoWeek=ht.isoWeeks=$_e;ht.weeksInYear=rSe;ht.weeksInWeekYear=aSe;ht.isoWeeksInYear=sSe;ht.isoWeeksInISOWeekYear=nSe;ht.date=sz;ht.day=ht.days=t1e;ht.weekday=s1e;ht.isoWeekday=n1e;ht.dayOfYear=oSe;ht.hour=ht.hours=d1e;ht.minute=ht.minutes=cSe;ht.second=ht.seconds=dSe;ht.millisecond=ht.milliseconds=nz;ht.utcOffset=H1e;ht.utc=G1e;ht.local=Y1e;ht.parseZone=Q1e;ht.hasAlignedHourOffset=J1e;ht.isDST=X1e;ht.isLocal=e2e;ht.isUtcOffset=t2e;ht.isUtc=W9;ht.isUTC=W9;ht.zoneAbbr=hSe;ht.zoneName=mSe;ht.dates=Xa("dates accessor is deprecated. Use date instead.",sz);ht.months=Xa("months accessor is deprecated. Use month instead",M9);ht.years=Xa("years accessor is deprecated. Use year instead",k9);ht.zone=Xa("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",K1e);ht.isDSTShifted=Xa("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Z1e);function fSe(t){return hn(t*1e3)}function pSe(){return hn.apply(null,arguments).parseZone()}function rz(t){return t}var $s=fC.prototype;$s.calendar=e_e;$s.longDateFormat=r_e;$s.invalidDate=i_e;$s.ordinal=c_e;$s.preparse=rz;$s.postformat=rz;$s.relativeTime=u_e;$s.pastFuture=h_e;$s.set=XNe;$s.eras=z2e;$s.erasParse=$2e;$s.erasConvertYear=U2e;$s.erasAbbrRegex=Y2e;$s.erasNameRegex=G2e;$s.erasNarrowRegex=Q2e;$s.months=P_e;$s.monthsShort=T_e;$s.monthsParse=M_e;$s.monthsRegex=R_e;$s.monthsShortRegex=O_e;$s.week=L_e;$s.firstDayOfYear=q_e;$s.firstDayOfWeek=B_e;$s.weekdays=Q_e;$s.weekdaysMin=X_e;$s.weekdaysShort=J_e;$s.weekdaysParse=e1e;$s.weekdaysRegex=r1e;$s.weekdaysShortRegex=a1e;$s.weekdaysMinRegex=i1e;$s.isPM=o1e;$s.meridiem=u1e;function p0(t,s,n,r){var a=Zl(),i=cl().set(r,s);return a[n](i,t)}function az(t,s,n){if(Kl(t)&&(s=t,t=void 0),t=t||"",s!=null)return p0(t,s,n,"month");var r,a=[];for(r=0;r<12;r++)a[r]=p0(t,r,n,"month");return a}function MC(t,s,n,r){typeof t=="boolean"?(Kl(s)&&(n=s,s=void 0),s=s||""):(s=t,n=s,t=!1,Kl(s)&&(n=s,s=void 0),s=s||"");var a=Zl(),i=t?a._week.dow:0,l,o=[];if(n!=null)return p0(s,(n+i)%7,r,"day");for(l=0;l<7;l++)o[l]=p0(s,(l+i)%7,r,"day");return o}function xSe(t,s){return az(t,s,"months")}function gSe(t,s){return az(t,s,"monthsShort")}function vSe(t,s,n){return MC(t,s,n,"weekdays")}function ySe(t,s,n){return MC(t,s,n,"weekdaysShort")}function bSe(t,s,n){return MC(t,s,n,"weekdaysMin")}Wo("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var s=t%10,n=Ps(t%100/10)===1?"th":s===1?"st":s===2?"nd":s===3?"rd":"th";return t+n}});_t.lang=Xa("moment.lang is deprecated. Use moment.locale instead.",Wo);_t.langData=Xa("moment.langData is deprecated. Use moment.localeData instead.",Zl);var Nl=Math.abs;function jSe(){var t=this._data;return this._milliseconds=Nl(this._milliseconds),this._days=Nl(this._days),this._months=Nl(this._months),t.milliseconds=Nl(t.milliseconds),t.seconds=Nl(t.seconds),t.minutes=Nl(t.minutes),t.hours=Nl(t.hours),t.months=Nl(t.months),t.years=Nl(t.years),this}function iz(t,s,n,r){var a=Ci(s,n);return t._milliseconds+=r*a._milliseconds,t._days+=r*a._days,t._months+=r*a._months,t._bubble()}function wSe(t,s){return iz(this,t,s,1)}function NSe(t,s){return iz(this,t,s,-1)}function N6(t){return t<0?Math.floor(t):Math.ceil(t)}function _Se(){var t=this._milliseconds,s=this._days,n=this._months,r=this._data,a,i,l,o,c;return t>=0&&s>=0&&n>=0||t<=0&&s<=0&&n<=0||(t+=N6(_1(n)+s)*864e5,s=0,n=0),r.milliseconds=t%1e3,a=Ua(t/1e3),r.seconds=a%60,i=Ua(a/60),r.minutes=i%60,l=Ua(i/60),r.hours=l%24,s+=Ua(l/24),c=Ua(lz(s)),n+=c,s-=N6(_1(c)),o=Ua(n/12),n%=12,r.days=s,r.months=n,r.years=o,this}function lz(t){return t*4800/146097}function _1(t){return t*146097/4800}function SSe(t){if(!this.isValid())return NaN;var s,n,r=this._milliseconds;if(t=Za(t),t==="month"||t==="quarter"||t==="year")switch(s=this._days+r/864e5,n=this._months+lz(s),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(s=this._days+Math.round(_1(this._months)),t){case"week":return s/7+r/6048e5;case"day":return s+r/864e5;case"hour":return s*24+r/36e5;case"minute":return s*1440+r/6e4;case"second":return s*86400+r/1e3;case"millisecond":return Math.floor(s*864e5)+r;default:throw new Error("Unknown unit "+t)}}function eo(t){return function(){return this.as(t)}}var oz=eo("ms"),CSe=eo("s"),kSe=eo("m"),ESe=eo("h"),PSe=eo("d"),TSe=eo("w"),ASe=eo("M"),MSe=eo("Q"),DSe=eo("y"),OSe=oz;function RSe(){return Ci(this)}function FSe(t){return t=Za(t),this.isValid()?this[t+"s"]():NaN}function Nd(t){return function(){return this.isValid()?this._data[t]:NaN}}var LSe=Nd("milliseconds"),ISe=Nd("seconds"),BSe=Nd("minutes"),qSe=Nd("hours"),zSe=Nd("days"),$Se=Nd("months"),USe=Nd("years");function VSe(){return Ua(this.days()/7)}var Sl=Math.round,gu={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function WSe(t,s,n,r,a){return a.relativeTime(s||1,!!n,t,r)}function HSe(t,s,n,r){var a=Ci(t).abs(),i=Sl(a.as("s")),l=Sl(a.as("m")),o=Sl(a.as("h")),c=Sl(a.as("d")),u=Sl(a.as("M")),d=Sl(a.as("w")),m=Sl(a.as("y")),h=i<=n.ss&&["s",i]||i<n.s&&["ss",i]||l<=1&&["m"]||l<n.m&&["mm",l]||o<=1&&["h"]||o<n.h&&["hh",o]||c<=1&&["d"]||c<n.d&&["dd",c];return n.w!=null&&(h=h||d<=1&&["w"]||d<n.w&&["ww",d]),h=h||u<=1&&["M"]||u<n.M&&["MM",u]||m<=1&&["y"]||["yy",m],h[2]=s,h[3]=+t>0,h[4]=r,WSe.apply(null,h)}function KSe(t){return t===void 0?Sl:typeof t=="function"?(Sl=t,!0):!1}function GSe(t,s){return gu[t]===void 0?!1:s===void 0?gu[t]:(gu[t]=s,t==="s"&&(gu.ss=s-1),!0)}function YSe(t,s){if(!this.isValid())return this.localeData().invalidDate();var n=!1,r=gu,a,i;return typeof t=="object"&&(s=t,t=!1),typeof t=="boolean"&&(n=t),typeof s=="object"&&(r=Object.assign({},gu,s),s.s!=null&&s.ss==null&&(r.ss=s.s-1)),a=this.localeData(),i=HSe(this,!n,r,a),n&&(i=a.pastFuture(+this,i)),a.postformat(i)}var kN=Math.abs;function ou(t){return(t>0)-(t<0)||+t}function qv(){if(!this.isValid())return this.localeData().invalidDate();var t=kN(this._milliseconds)/1e3,s=kN(this._days),n=kN(this._months),r,a,i,l,o=this.asSeconds(),c,u,d,m;return o?(r=Ua(t/60),a=Ua(r/60),t%=60,r%=60,i=Ua(n/12),n%=12,l=t?t.toFixed(3).replace(/\.?0+$/,""):"",c=o<0?"-":"",u=ou(this._months)!==ou(o)?"-":"",d=ou(this._days)!==ou(o)?"-":"",m=ou(this._milliseconds)!==ou(o)?"-":"",c+"P"+(i?u+i+"Y":"")+(n?u+n+"M":"")+(s?d+s+"D":"")+(a||r||t?"T":"")+(a?m+a+"H":"")+(r?m+r+"M":"")+(t?m+l+"S":"")):"P0D"}var Fs=Iv.prototype;Fs.isValid=$1e;Fs.abs=jSe;Fs.add=wSe;Fs.subtract=NSe;Fs.as=SSe;Fs.asMilliseconds=oz;Fs.asSeconds=CSe;Fs.asMinutes=kSe;Fs.asHours=ESe;Fs.asDays=PSe;Fs.asWeeks=TSe;Fs.asMonths=ASe;Fs.asQuarters=MSe;Fs.asYears=DSe;Fs.valueOf=OSe;Fs._bubble=_Se;Fs.clone=RSe;Fs.get=FSe;Fs.milliseconds=LSe;Fs.seconds=ISe;Fs.minutes=BSe;Fs.hours=qSe;Fs.days=zSe;Fs.weeks=VSe;Fs.months=$Se;Fs.years=USe;Fs.humanize=YSe;Fs.toISOString=qv;Fs.toString=qv;Fs.toJSON=qv;Fs.locale=Y9;Fs.localeData=J9;Fs.toIsoString=Xa("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",qv);Fs.lang=Q9;Qt("X",0,0,"unix");Qt("x",0,0,"valueOf");Dt("x",Ov);Dt("X",x_e);Zs("X",function(t,s,n){n._d=new Date(parseFloat(t)*1e3)});Zs("x",function(t,s,n){n._d=new Date(Ps(t))});//! moment.js
_t.version="2.30.1";QNe(hn);_t.fn=ht;_t.min=I1e;_t.max=B1e;_t.now=q1e;_t.utc=cl;_t.unix=fSe;_t.months=xSe;_t.isDate=vp;_t.locale=Wo;_t.invalid=Tv;_t.duration=Ci;_t.isMoment=Ni;_t.weekdays=vSe;_t.parseZone=pSe;_t.localeData=Zl;_t.isDuration=kg;_t.monthsShort=gSe;_t.weekdaysMin=bSe;_t.defineLocale=_C;_t.updateLocale=p1e;_t.locales=x1e;_t.weekdaysShort=ySe;_t.normalizeUnits=Za;_t.relativeTimeRounding=KSe;_t.relativeTimeThreshold=GSe;_t.calendarFormat=u2e;_t.prototype=ht;_t.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function cz({isAdmin:t,isFeatureExcluded:s,memberInfo:n}){const[r,a]=b.useState(""),[i,l]=b.useState("all"),[o,c]=b.useState("all"),[u,d]=b.useState(1),[m,h]=b.useState(20),[p,g]=b.useState(null),v=Yt(),{data:y=[],isLoading:j}=me({queryKey:["form-submissions"],queryFn:async()=>(await X.entities.FormSubmission.list()).sort((E,R)=>new Date(R.created_date)-new Date(E.created_date)),staleTime:30*1e3}),{data:w=[]}=me({queryKey:["forms"],queryFn:async()=>await X.entities.Form.list(),staleTime:60*1e3}),{data:N}=me({queryKey:["form-detail",p==null?void 0:p.form_id],queryFn:async()=>p!=null&&p.form_id?w.find(k=>k.id===p.form_id):null,enabled:!!(p!=null&&p.form_id)}),_=Le({mutationFn:async({id:k,status:E})=>await X.entities.FormSubmission.update(k,{status:E,status_updated_by:n==null?void 0:n.email,status_updated_at:new Date().toISOString()}),onSuccess:k=>{v.invalidateQueries({queryKey:["form-submissions"]}),g(k),te.success("Status updated")},onError:()=>{te.error("Failed to update status")}}),T=b.useMemo(()=>{let k=y;if(i!=="all"&&(k=k.filter(E=>E.form_id===i)),o!=="all"&&(k=k.filter(E=>(E.status||"new")===o)),r){const E=r.toLowerCase();k=k.filter(R=>{var F,z,V;return((F=R.form_name)==null?void 0:F.toLowerCase().includes(E))||((z=R.submitted_by_email)==null?void 0:z.toLowerCase().includes(E))||((V=R.submitted_by_name)==null?void 0:V.toLowerCase().includes(E))||JSON.stringify(R.submission_data).toLowerCase().includes(E)})}return k},[y,i,o,r]),A=Math.ceil(T.length/m),P=b.useMemo(()=>{const k=(u-1)*m;return T.slice(k,k+m)},[T,u,m]),C=k=>{const E=k||"new";switch(E){case"new":return e.jsx(ye,{className:"bg-blue-100 text-blue-700",children:"New"});case"junk":return e.jsx(ye,{className:"bg-slate-100 text-slate-700",children:"Junk"});case"actioned":return e.jsx(ye,{className:"bg-green-100 text-green-700",children:"Actioned"});default:return e.jsx(ye,{variant:"secondary",children:E})}},O=(k,E)=>{_.mutate({id:k,status:E})},M=k=>{if(!(N!=null&&N.fields))return k;const E=N.fields.find(R=>R.id===k);return(E==null?void 0:E.label)||k};return!t||s("page_FormSubmissions")?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"max-w-md",children:e.jsx(ce,{className:"p-6 text-center",children:e.jsx("p",{className:"text-slate-600",children:"Access denied. Administrator privileges required."})})})}):j?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(vt,{className:"w-8 h-8 animate-spin text-blue-600"})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(ns,{className:"w-8 h-8 text-blue-600"}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900",children:"Form Submissions"})]}),e.jsxs("p",{className:"text-slate-600",children:[T.length," ",T.length===1?"submission":"submissions"]})]}),e.jsx(le,{className:"mb-6 border-slate-200",children:e.jsx(ce,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx(he,{placeholder:"Search submissions...",value:r,onChange:k=>{a(k.target.value),d(1)},className:"pl-10"})]}),e.jsxs(Ke,{value:i,onValueChange:k=>{l(k),d(1)},children:[e.jsx(Ve,{className:"w-full md:w-[200px]",children:e.jsx(Qe,{placeholder:"All Forms"})}),e.jsxs(We,{children:[e.jsx(re,{value:"all",children:"All Forms"}),w.map(k=>e.jsx(re,{value:k.id,children:k.name},k.id))]})]}),e.jsxs(Ke,{value:o,onValueChange:k=>{c(k),d(1)},children:[e.jsx(Ve,{className:"w-full md:w-[150px]",children:e.jsx(Qe,{placeholder:"All Status"})}),e.jsxs(We,{children:[e.jsx(re,{value:"all",children:"All Status"}),e.jsx(re,{value:"new",children:"New"}),e.jsx(re,{value:"junk",children:"Junk"}),e.jsx(re,{value:"actioned",children:"Actioned"})]})]})]})})}),P.length===0?e.jsx(le,{className:"border-slate-200",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(ns,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No submissions found"}),e.jsx("p",{className:"text-slate-600",children:r||i!=="all"||o!=="all"?"Try adjusting your filters":"No form submissions yet"})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4",children:P.map(k=>e.jsx(le,{className:"border-slate-200 hover:shadow-lg transition-shadow",children:e.jsx(Fe,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(Ue,{className:"text-base mb-2",children:k.form_name}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[C(k.status),k.submitted_by_name&&e.jsx(ye,{variant:"secondary",children:k.submitted_by_name}),k.submitted_by_email&&e.jsx(ye,{variant:"outline",children:k.submitted_by_email}),e.jsx(ye,{variant:"outline",className:"text-slate-600",children:_t(k.created_date).format("MMM D, YYYY h:mm A")})]})]}),e.jsxs(J,{variant:"outline",size:"sm",onClick:()=>g(k),children:[e.jsx(gr,{className:"w-4 h-4 mr-1"}),"View"]})]})})},k.id))}),A>1&&e.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"text-sm text-slate-700",children:"Show:"}),e.jsxs(Ke,{value:m.toString(),onValueChange:k=>{h(parseInt(k)),d(1)},children:[e.jsx(Ve,{className:"w-[100px]",children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"10",children:"10"}),e.jsx(re,{value:"20",children:"20"}),e.jsx(re,{value:"50",children:"50"}),e.jsx(re,{value:"100",children:"100"})]})]}),e.jsx("span",{className:"text-sm text-slate-600",children:"per page"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{variant:"outline",size:"sm",onClick:()=>d(k=>Math.max(1,k-1)),disabled:u===1,children:e.jsx(Wn,{className:"w-4 h-4"})}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(A,5)},(k,E)=>{let R;return A<=5||u<=3?R=E+1:u>=A-2?R=A-4+E:R=u-2+E,e.jsx(J,{variant:u===R?"default":"outline",size:"sm",onClick:()=>d(R),className:"w-9",children:R},R)})}),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>d(k=>Math.min(A,k+1)),disabled:u===A,children:e.jsx(js,{className:"w-4 h-4"})})]})]})]})]}),e.jsx(Ct,{open:!!p,onOpenChange:k=>!k&&g(null),children:e.jsxs(Nt,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsx(kt,{children:e.jsx(Et,{children:"Submission Details"})}),p&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx(ee,{className:"text-slate-600",children:"Form"}),e.jsx("p",{className:"font-medium text-slate-900",children:p.form_name})]}),e.jsxs("div",{children:[e.jsx(ee,{className:"text-slate-600",children:"Submitted"}),e.jsx("p",{className:"font-medium text-slate-900",children:_t(p.created_date).format("MMM D, YYYY h:mm A")})]}),p.submitted_by_name&&e.jsxs("div",{children:[e.jsx(ee,{className:"text-slate-600",children:"Name"}),e.jsx("p",{className:"font-medium text-slate-900",children:p.submitted_by_name})]}),p.submitted_by_email&&e.jsxs("div",{children:[e.jsx(ee,{className:"text-slate-600",children:"Email"}),e.jsx("p",{className:"font-medium text-slate-900",children:p.submitted_by_email})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200",children:[e.jsx(ee,{className:"text-slate-600 mb-2 block",children:"Status"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Ke,{value:p.status||"new",onValueChange:k=>O(p.id,k),children:[e.jsx(Ve,{className:"w-[180px]",children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"new",children:"New"}),e.jsx(re,{value:"junk",children:"Junk"}),e.jsx(re,{value:"actioned",children:"Actioned"})]})]}),C(p.status)]}),p.status_updated_by&&e.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:["Updated by ",p.status_updated_by," on"," ",_t(p.status_updated_at).format("MMM D, YYYY h:mm A")]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 mb-3",children:"Submission Data"}),e.jsx("div",{className:"space-y-3",children:Object.entries(p.submission_data||{}).map(([k,E])=>e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-200",children:[e.jsx(ee,{className:"text-slate-600 text-xs uppercase tracking-wide mb-1 block",children:M(k)}),e.jsx("p",{className:"text-slate-900 whitespace-pre-wrap",children:Array.isArray(E)?E.join(", "):String(E)})]},k))})]})]})]})})]})}function dz({memberInfo:t,isAdmin:s}){const r=new URLSearchParams(window.location.search).get("id"),a=!!r,i=Yt(),l=b.useRef(null),[o,c]=b.useState(""),[u,d]=b.useState(""),[m,h]=b.useState(""),[p,g]=b.useState(""),[v,y]=b.useState(""),[j,w]=b.useState([]),[N,_]=b.useState([]),[T,A]=b.useState("draft"),[P,C]=b.useState(""),[O,M]=b.useState(""),[k,E]=b.useState(new Date().toISOString()),[R,F]=b.useState(!1),[z,V]=b.useState(!1),[U,B]=b.useState(null),{data:$}=me({queryKey:["current-member",t==null?void 0:t.email],queryFn:async()=>(await X.entities.Member.list()).find(de=>de.email===(t==null?void 0:t.email)),enabled:!!t,staleTime:300*1e3}),{data:L=[]}=me({queryKey:["resourceCategories"],queryFn:async()=>(await X.entities.ResourceCategory.list()).filter(de=>{var ue;return de.is_active&&((ue=de.applies_to_content_types)==null?void 0:ue.includes("News"))}).sort((de,ue)=>(de.display_order||0)-(ue.display_order||0)),staleTime:300*1e3,refetchOnWindowFocus:!1}),{data:I,isLoading:W}=me({queryKey:["news",r],queryFn:async()=>(await X.entities.NewsPost.list()).find(de=>de.id===r),enabled:a});b.useEffect(()=>{I&&(c(I.title||""),d(I.slug||""),h(I.summary||""),g(I.content||""),y(I.feature_image_url||""),w(I.subcategories||[]),_(I.tags||[]),A(I.status||"draft"),E(I.published_date||new Date().toISOString()),C(I.seo_title||""),M(I.seo_description||""))},[I]),b.useEffect(()=>{if(o&&!a){const se=o.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");d(se)}},[o,a]),b.useEffect(()=>{if(!t||!o||!$)return;const se=setTimeout(async()=>{if(a){V(!0);try{await X.entities.NewsPost.update(r,{title:o,slug:u,summary:m,content:p,feature_image_url:v,subcategories:j,tags:N,status:T,published_date:k,seo_title:P,seo_description:O}),B(new Date)}catch(de){console.error("Auto-save failed:",de)}finally{V(!1)}}},3e3);return()=>clearTimeout(se)},[o,u,m,p,v,j,N,T,k,P,O,a,r,t,$]);const q=Le({mutationFn:async({publishNow:se})=>{if(!t||!$)throw new Error("Member information not available");const de={title:o,slug:u,author_id:$.id,author_name:`${t.first_name} ${t.last_name}`,summary:m,content:p,feature_image_url:v,subcategories:j,tags:N,status:se?"published":T,published_date:k,seo_title:P,seo_description:O};return a?await X.entities.NewsPost.update(r,de):await X.entities.NewsPost.create(de)},onSuccess:(se,de)=>{i.invalidateQueries({queryKey:["news"]}),te.success(de.publishNow?"News published successfully!":"News saved successfully!"),B(new Date),a||(window.location.href=`${Pe("NewsEditor")}?id=${se.id}`)},onError:se=>{te.error(se.message||"Failed to save news")}}),Z=Le({mutationFn:()=>X.entities.NewsPost.delete(r),onSuccess:()=>{i.invalidateQueries({queryKey:["news"]}),te.success("News deleted successfully"),window.location.href=Pe("MyNews")},onError:()=>{te.error("Failed to delete news")}}),Q=async se=>{var ue;const de=(ue=se.target.files)==null?void 0:ue[0];if(de){F(!0);try{const{file_url:oe}=await X.integrations.Core.UploadFile({file:de});y(oe),te.success("Image uploaded successfully")}catch{te.error("Failed to upload image")}finally{F(!1)}}},Y=()=>{const se=document.createElement("input");se.type="file",se.accept="image/*",se.onchange=async de=>{var oe,pe;const ue=(oe=de.target.files)==null?void 0:oe[0];if(ue)try{const{file_url:je}=await X.integrations.Core.UploadFile({file:ue}),we=(pe=l.current)==null?void 0:pe.getEditor();if(we){const qe=we.getSelection(!0);we.insertEmbed(qe.index,"image",je)}te.success("Image inserted")}catch{te.error("Failed to upload image")}},se.click()},K=b.useMemo(()=>({toolbar:{container:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],["blockquote","code-block"],["link","image"],["clean"]],handlers:{image:Y}}}),[]),ae=()=>{window.confirm("Are you sure you want to delete this news article? This action cannot be undone.")&&Z.mutate()};return s?t?a&&(W||!$)?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-slate-600",children:"Loading news..."})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs(Ht,{to:Pe("MyNews"),className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900",children:[e.jsx(ll,{className:"w-4 h-4"}),"Back to News"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[z&&e.jsxs("span",{className:"text-sm text-slate-500 flex items-center gap-2",children:[e.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}),U&&!z&&e.jsxs("span",{className:"text-sm text-slate-500 flex items-center gap-2",children:[e.jsx(Jn,{className:"w-4 h-4 text-green-600"}),"Saved ",Mt(U,"h:mm a")]}),e.jsxs(J,{variant:"outline",onClick:()=>q.mutate({publishNow:!1}),disabled:q.isPending||!o,className:"gap-2",children:[e.jsx(un,{className:"w-4 h-4"}),"Save Draft"]}),e.jsx(J,{onClick:()=>q.mutate({publishNow:!0}),disabled:q.isPending||!o||!u,className:"bg-blue-600 hover:bg-blue-700 gap-2",children:T==="published"?"Update":"Publish"})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsxs(ce,{className:"pt-6 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"title",className:"text-base font-semibold",children:"News Title"}),e.jsx(he,{id:"title",placeholder:"Enter news title...",value:o,onChange:se=>c(se.target.value),className:"text-2xl font-bold border-0 px-0 focus-visible:ring-0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"slug",className:"text-sm",children:"URL Slug"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-slate-500",children:"/news/"}),e.jsx(he,{id:"slug",placeholder:"news-url-slug",value:u,onChange:se=>d(se.target.value),className:"flex-1"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"summary",children:"Summary / Excerpt"}),e.jsx(Gt,{id:"summary",placeholder:"Brief description (shown in listings)...",value:m,onChange:se=>h(se.target.value),rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Content"}),e.jsx("div",{style:{height:"500px"},children:e.jsx(dS,{ref:l,theme:"snow",value:p,onChange:g,modules:K,placeholder:"Start writing your news content here...",style:{height:"450px"}})})]})]})})}),e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsx(Fe,{children:e.jsx(Ue,{className:"text-base",children:"Feature Image"})}),e.jsx(ce,{className:"space-y-4",children:v?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:v,alt:"Feature",className:"w-full h-48 object-cover rounded-lg"}),e.jsx(J,{variant:"destructive",size:"icon",className:"absolute top-2 right-2",onClick:()=>y(""),children:e.jsx(_s,{className:"w-4 h-4"})})]}):e.jsxs("label",{className:"block",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:Q,className:"hidden",disabled:R}),e.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-lg p-8 text-center cursor-pointer hover:border-slate-400 transition-colors",children:[R?e.jsx(vt,{className:"w-8 h-8 text-slate-400 mx-auto mb-2 animate-spin"}):e.jsx(Gs,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-slate-600",children:R?"Uploading...":"Click to upload"})]})]})})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsx(Fe,{children:e.jsx(Ue,{className:"text-base",children:"Organization"})}),e.jsxs(ce,{className:"space-y-4",children:[e.jsx(zI,{categories:L,selectedSubcategories:j,onChange:w}),e.jsx(qI,{tags:N,onChange:_})]})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsx(Fe,{children:e.jsx(Ue,{className:"text-base",children:"Publishing"})}),e.jsxs(ce,{className:"space-y-4",children:[e.jsx($I,{value:T,onChange:A}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"published-date",children:"Published Date & Time"}),e.jsx(he,{id:"published-date",type:"datetime-local",value:k?new Date(k).toISOString().slice(0,16):"",onChange:se=>{const de=se.target.value?new Date(se.target.value).toISOString():new Date().toISOString();E(de)}}),k&&new Date(k)>new Date&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx(tn,{className:"w-4 h-4 text-purple-600"}),e.jsxs("p",{className:"text-sm text-purple-900",children:["Scheduled for ",Mt(new Date(k),"MMM d, yyyy h:mm a")]})]})]})]})]}),e.jsx(UI,{seoTitle:P,seoDescription:O,onSeoTitleChange:C,onSeoDescriptionChange:M}),a&&e.jsxs(J,{variant:"destructive",onClick:ae,disabled:Z.isPending,className:"w-full gap-2",children:[e.jsx(os,{className:"w-4 h-4"}),"Delete News"]})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-slate-600",children:"Loading..."})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"border-red-200",children:e.jsx(ce,{className:"p-8 text-center",children:e.jsx("p",{className:"text-red-600",children:"Administrator access required"})})})})}function uz({memberInfo:t,isAdmin:s}){const[n,r]=b.useState(""),[a,i]=b.useState("all"),[l,o]=b.useState([]),[c,u]=b.useState("newest"),{data:d=[],isLoading:m}=me({queryKey:["my-news"],queryFn:async()=>await X.entities.NewsPost.list("-created_date"),enabled:s,staleTime:300*1e3,refetchOnWindowFocus:!1}),{data:h=[],isLoading:p}=me({queryKey:["resourceCategories"],queryFn:async()=>(await X.entities.ResourceCategory.list()).filter(T=>{var A;return T.is_active&&((A=T.applies_to_content_types)==null?void 0:A.includes("News"))}).sort((T,A)=>(T.display_order||0)-(A.display_order||0)),staleTime:300*1e3,refetchOnWindowFocus:!1}),{data:g=[]}=me({queryKey:["article-button-styles"],queryFn:async()=>(await X.entities.ButtonStyle.list()).filter(T=>T.is_active&&T.card_type==="article"),staleTime:300*1e3,refetchOnWindowFocus:!1}),v=b.useMemo(()=>d.filter(_=>{var C,O,M;const T=((C=_.title)==null?void 0:C.toLowerCase().includes(n.toLowerCase()))||((O=_.summary)==null?void 0:O.toLowerCase().includes(n.toLowerCase()))||((M=_.tags)==null?void 0:M.some(k=>k.toLowerCase().includes(n.toLowerCase()))),A=a==="all"||_.status===a,P=l.length===0||_.subcategories&&_.subcategories.some(k=>l.includes(k));return T&&A&&P}),[d,n,a,l]),y=b.useMemo(()=>{const _=[...v];switch(c){case"newest":_.sort((T,A)=>new Date(A.created_date)-new Date(T.created_date));break;case"oldest":_.sort((T,A)=>new Date(T.created_date)-new Date(A.created_date));break;case"title-asc":_.sort((T,A)=>T.title.localeCompare(A.title));break;case"title-desc":_.sort((T,A)=>A.title.localeCompare(T.title));break}return _},[v,c]),j=_=>{o(T=>T.includes(_)?T.filter(A=>A!==_):[...T,_])},w=_=>{switch(_){case"published":return"bg-green-100 text-green-700 border-green-200";case"draft":return"bg-amber-100 text-amber-700 border-amber-200";case"archived":return"bg-slate-100 text-slate-700 border-slate-200";default:return"bg-slate-100 text-slate-700 border-slate-200"}},N=m||p;return s?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"News Management"}),e.jsx("p",{className:"text-slate-600",children:"Create and manage news content"})]}),e.jsx(Ht,{to:Pe("NewsEditor"),children:e.jsxs(J,{className:"bg-blue-600 hover:bg-blue-700 gap-2",children:[e.jsx(Pt,{className:"w-4 h-4"}),"New News Article"]})})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("div",{className:"lg:w-64 flex-shrink-0",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 sticky top-8",children:[e.jsx(gd,{categories:h,selectedSubcategories:l,onSubcategoryToggle:j,searchQuery:n,onSearchChange:r,onClearSearch:()=>r("")}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Status"}),e.jsx("div",{className:"flex flex-col gap-2",children:["all","draft","published","archived"].map(_=>e.jsx(J,{variant:a===_?"default":"outline",size:"sm",onClick:()=>i(_),className:"capitalize justify-start",children:_},_))})]})]})}),e.jsx("div",{className:"flex-1",children:N?e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Array(6).fill(0).map((_,T)=>e.jsxs(le,{className:"animate-pulse border-slate-200",children:[e.jsx("div",{className:"h-48 bg-slate-200"}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"h-6 bg-slate-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded w-full"})]})]},T))}):y.length===0?e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(Yl,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:n||a!=="all"||l.length>0?"No news found":"No news yet"}),e.jsx("p",{className:"text-slate-600 mb-6",children:n||a!=="all"||l.length>0?"Try adjusting your search or filters":"Start creating your first news article"}),!n&&a==="all"&&l.length===0&&e.jsx(Ht,{to:Pe("NewsEditor"),children:e.jsxs(J,{className:"bg-blue-600 hover:bg-blue-700 gap-2",children:[e.jsx(Pt,{className:"w-4 h-4"}),"Create First News"]})})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 gap-3",children:[e.jsxs("div",{className:"text-sm text-slate-600",children:["Showing ",y.length," ",y.length===1?"article":"articles"]}),e.jsxs(Ke,{value:c,onValueChange:u,children:[e.jsxs(Ve,{className:"w-48",children:[e.jsx(Ql,{className:"w-4 h-4 mr-2"}),e.jsx(Qe,{placeholder:"Sort By"})]}),e.jsxs(We,{children:[e.jsx(re,{value:"newest",children:"Newest First"}),e.jsx(re,{value:"oldest",children:"Oldest First"}),e.jsx(re,{value:"title-asc",children:"Title A-Z"}),e.jsx(re,{value:"title-desc",children:"Title Z-A"})]})]})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:y.map(_=>{const T=_.published_date&&new Date(_.published_date)>new Date;return e.jsxs("div",{children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute top-2 right-2 z-10 flex gap-1",children:[e.jsx(ye,{className:w(_.status),children:_.status}),T&&e.jsx(ye,{className:"bg-purple-100 text-purple-700",children:"Scheduled"})]}),e.jsx(vd,{article:_,buttonStyles:g,showActions:!1})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx(Ht,{to:`${Pe("NewsEditor")}?id=${_.id}`,className:"flex-1",children:e.jsxs(J,{variant:"outline",size:"sm",className:"w-full gap-2",children:[e.jsx(gi,{className:"w-3 h-3"}),"Edit"]})}),_.status==="published"&&e.jsx(Ht,{to:`${Pe("NewsView")}?slug=${_.slug}`,className:"flex-1",children:e.jsxs(J,{variant:"outline",size:"sm",className:"w-full gap-2",children:[e.jsx(gr,{className:"w-3 h-3"}),"View"]})})]})]},_.id)})})]})})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"border-red-200",children:e.jsx(ce,{className:"p-8 text-center",children:e.jsx("p",{className:"text-red-600",children:"Administrator access required"})})})})}function hz({memberInfo:t,isAdmin:s}){const r=new URLSearchParams(window.location.search).get("slug"),a=!!sessionStorage.getItem("agcas_member"),{data:i,isLoading:l}=me({queryKey:["news-by-slug",r],queryFn:async()=>(await X.entities.NewsPost.list()).find(d=>d.slug===r),enabled:!!r}),o=()=>{const d=`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(window.location.href)}`;window.open(d,"_blank","width=600,height=600")},c=()=>{const u=encodeURIComponent((i==null?void 0:i.title)||"Check out this news"),d=encodeURIComponent(`I thought you might find this news article interesting:

${(i==null?void 0:i.title)||""}

${(i==null?void 0:i.summary)||""}

${window.location.href}`);window.location.href=`mailto:?subject=${u}&body=${d}`};return l?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-slate-600",children:"Loading news..."})}):i?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs(Ht,{to:Pe(a?"MyNews":"PublicNews"),className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900",children:[e.jsx(ll,{className:"w-4 h-4"}),"Back to News"]}),s&&e.jsx(Ht,{to:`${Pe("NewsEditor")}?id=${i.id}`,children:e.jsxs(J,{variant:"outline",className:"gap-2",children:[e.jsx(gi,{className:"w-4 h-4"}),"Edit"]})})]}),e.jsxs(le,{className:"border-slate-200 shadow-lg mb-8",children:[i.feature_image_url&&e.jsx("div",{className:"h-96 overflow-hidden rounded-t-lg",children:e.jsx("img",{src:i.feature_image_url,alt:i.title,className:"w-full h-full object-cover"})}),e.jsxs(ce,{className:"pt-8 pb-12 px-8 md:px-12",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-slate-600 mb-6",children:[i.subcategories&&i.subcategories.length>0&&e.jsxs(e.Fragment,{children:[i.subcategories.slice(0,3).map((u,d)=>e.jsx(ye,{variant:"secondary",className:"bg-blue-100 text-blue-700",children:u},d)),i.subcategories.length>3&&e.jsxs(ye,{variant:"secondary",className:"bg-slate-100 text-slate-700",children:["+",i.subcategories.length-3," more"]})]}),i.published_date&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ns,{className:"w-4 h-4"}),e.jsx("span",{children:Mt(new Date(i.published_date),"MMMM d, yyyy")})]})]}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-slate-900 mb-6",children:i.title}),i.summary&&e.jsx("p",{className:"text-xl text-slate-600 mb-8 leading-relaxed",children:i.summary}),e.jsx("div",{className:"prose prose-lg prose-slate max-w-none",dangerouslySetInnerHTML:{__html:i.content}}),i.tags&&i.tags.length>0&&e.jsx("div",{className:"mt-12 pt-8 border-t border-slate-200",children:e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(Wc,{className:"w-4 h-4 text-slate-400"}),i.tags.map(u=>e.jsx(ye,{variant:"outline",className:"text-sm",children:u},u))]})}),e.jsx("div",{className:"mt-12 pt-8 border-t border-slate-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsx("p",{className:"text-sm text-slate-600",children:"Share this news:"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(J,{variant:"outline",size:"lg",onClick:o,className:"gap-2 hover:bg-[#0077B5] hover:text-white hover:border-[#0077B5] transition-all",children:[e.jsx(qu,{className:"w-5 h-5"}),e.jsx("span",{children:"LinkedIn"})]}),e.jsxs(J,{variant:"outline",size:"lg",onClick:c,className:"gap-2 hover:bg-slate-700 hover:text-white hover:border-slate-700 transition-all",children:[e.jsx(Ms,{className:"w-5 h-5"}),e.jsx("span",{children:"Email"})]})]})]})})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center py-16",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"News not found"}),e.jsx(Ht,{to:Pe(a?"MyNews":"PublicNews"),children:e.jsx(J,{children:"Back to News"})})]})})}function mz({memberInfo:t}){const[s,n]=b.useState(""),[r,a]=b.useState([]),[i,l]=b.useState("newest"),[o,c]=b.useState(1),[u,d]=b.useState(12),[m,h]=b.useState(!1),p=Yt(),{data:g}=me({queryKey:["current-member",t==null?void 0:t.email],queryFn:async()=>(await X.entities.Member.list()).find(U=>U.email===(t==null?void 0:t.email)),enabled:!!t,staleTime:300*1e3}),{data:v=[],isLoading:y}=me({queryKey:["published-news"],queryFn:async()=>{const V=await X.entities.NewsPost.list("-published_date"),U=new Date;return V.filter(B=>B.status==="published"&&(!B.published_date||new Date(B.published_date)<=U))},staleTime:0,refetchOnWindowFocus:!0}),{data:j=[],isLoading:w}=me({queryKey:["resourceCategories"],queryFn:async()=>(await X.entities.ResourceCategory.list()).filter(U=>{var B;return U.is_active&&((B=U.applies_to_content_types)==null?void 0:B.includes("News"))}).sort((U,B)=>(U.display_order||0)-(B.display_order||0)),staleTime:0,refetchOnWindowFocus:!0}),{data:N=[]}=me({queryKey:["article-button-styles"],queryFn:async()=>(await X.entities.ButtonStyle.list()).filter(U=>U.is_active&&U.card_type==="article"),staleTime:0,refetchOnWindowFocus:!0});b.useEffect(()=>{if(g!=null&&g.news_filter_preferences&&!m){const V=g.news_filter_preferences;V.selectedSubcategories&&a(V.selectedSubcategories),V.sortBy&&l(V.sortBy),V.itemsPerPage&&d(V.itemsPerPage),h(!0)}},[g,m]);const _=Le({mutationFn:async()=>{if(!g)return;const V={selectedSubcategories:r,sortBy:i,itemsPerPage:u};await X.entities.Member.update(g.id,{news_filter_preferences:V})},onSuccess:()=>{p.invalidateQueries({queryKey:["current-member"]})}}),T=b.useMemo(()=>v.filter(V=>{var $,L,I;const U=(($=V.title)==null?void 0:$.toLowerCase().includes(s.toLowerCase()))||((L=V.summary)==null?void 0:L.toLowerCase().includes(s.toLowerCase()))||((I=V.tags)==null?void 0:I.some(W=>W.toLowerCase().includes(s.toLowerCase()))),B=r.length===0||V.subcategories&&V.subcategories.some(W=>r.includes(W));return U&&B}),[v,s,r]),A=b.useMemo(()=>{const V=[...T];switch(i){case"newest":V.sort((U,B)=>new Date(B.published_date||B.created_date)-new Date(U.published_date||U.created_date));break;case"oldest":V.sort((U,B)=>new Date(U.published_date||U.created_date)-new Date(B.published_date||B.created_date));break;case"title-asc":V.sort((U,B)=>U.title.localeCompare(B.title));break;case"title-desc":V.sort((U,B)=>B.title.localeCompare(U.title));break}return V},[T,i]),P=Math.ceil(A.length/u),C=(o-1)*u,O=C+u,M=A.slice(C,O),k=()=>{const V=[];if(P<=7)for(let B=1;B<=P;B++)V.push(B);else if(o<=4){for(let B=1;B<=5;B++)V.push(B);V.push("..."),V.push(P)}else if(o>=P-3){V.push(1),V.push("...");for(let B=P-4;B<=P;B++)V.push(B)}else{V.push(1),V.push("...");for(let B=o-1;B<=o+1;B++)V.push(B);V.push("..."),V.push(P)}return V},E=V=>{a(U=>U.includes(V)?U.filter(B=>B!==V):[...U,V])},R=()=>{_.mutate()},F=y||w;b.useEffect(()=>{c(1)},[s,r,i,u]);const z=b.useMemo(()=>{if(!(g!=null&&g.news_filter_preferences))return!1;const V=g.news_filter_preferences;return JSON.stringify({selectedSubcategories:r,sortBy:i,itemsPerPage:u})!==JSON.stringify({selectedSubcategories:V.selectedSubcategories||[],sortBy:V.sortBy||"newest",itemsPerPage:V.itemsPerPage||12})},[g,r,i,u]);return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"News"}),e.jsx("p",{className:"text-slate-600",children:"Stay updated with our latest news"})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("div",{className:"lg:w-64 flex-shrink-0",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 sticky top-8",children:[e.jsx(gd,{categories:j,selectedSubcategories:r,onSubcategoryToggle:E,searchQuery:s,onSearchChange:n,onClearSearch:()=>n("")}),z&&e.jsx(J,{onClick:R,disabled:_.isPending,className:"w-full mt-4 bg-blue-600 hover:bg-blue-700",size:"sm",children:_.isPending?"Saving...":"Save as Default"})]})}),e.jsx("div",{className:"flex-1",children:F?e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array(6).fill(0).map((V,U)=>e.jsxs(le,{className:"animate-pulse border-slate-200",children:[e.jsx("div",{className:"h-48 bg-slate-200"}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"h-6 bg-slate-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded w-full"})]})]},U))}):M.length===0?e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(Yl,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:s||r.length>0?"No news found":"No news available"}),e.jsx("p",{className:"text-slate-600",children:s||r.length>0?"Try adjusting your search or filters":"Check back soon for updates"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 gap-3",children:[e.jsxs("div",{className:"text-sm text-slate-600",children:["Showing ",C+1,"-",Math.min(O,A.length)," of ",A.length," ",A.length===1?"article":"articles"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ke,{value:String(u),onValueChange:V=>d(Number(V)),children:[e.jsx(Ve,{className:"w-32",children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"6",children:"6 per page"}),e.jsx(re,{value:"12",children:"12 per page"}),e.jsx(re,{value:"24",children:"24 per page"}),e.jsx(re,{value:"48",children:"48 per page"})]})]}),e.jsxs(Ke,{value:i,onValueChange:l,children:[e.jsxs(Ve,{className:"w-48",children:[e.jsx(Ql,{className:"w-4 h-4 mr-2"}),e.jsx(Qe,{placeholder:"Sort By"})]}),e.jsxs(We,{children:[e.jsx(re,{value:"newest",children:"Newest First"}),e.jsx(re,{value:"oldest",children:"Oldest First"}),e.jsx(re,{value:"title-asc",children:"Title A-Z"}),e.jsx(re,{value:"title-desc",children:"Title Z-A"})]})]})]})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:M.map(V=>e.jsx(vd,{article:V,buttonStyles:N,viewPageUrl:"NewsView"},V.id))}),P>1&&e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{variant:"outline",size:"sm",onClick:()=>c(V=>Math.max(1,V-1)),disabled:o===1,children:e.jsx(Wn,{className:"w-4 h-4"})}),k().map((V,U)=>V==="..."?e.jsx("span",{className:"px-2 text-slate-400",children:"..."},`ellipsis-${U}`):e.jsx(J,{variant:o===V?"default":"outline",size:"sm",onClick:()=>c(V),className:"min-w-[40px]",children:V},V)),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>c(V=>Math.min(P,V+1)),disabled:o===P,children:e.jsx(js,{className:"w-4 h-4"})})]})})]})})]})]})})}function fz(){const[t,s]=b.useState(""),[n,r]=b.useState([]),[a,i]=b.useState("newest"),[l,o]=b.useState(1),[c,u]=b.useState(12),{data:d=[],isLoading:m}=me({queryKey:["public-news"],queryFn:async()=>{const C=await X.entities.NewsPost.list("-published_date"),O=new Date;return C.filter(M=>M.status==="published"&&(!M.published_date||new Date(M.published_date)<=O))},staleTime:0,refetchOnWindowFocus:!0}),{data:h=[],isLoading:p}=me({queryKey:["resourceCategories"],queryFn:async()=>(await X.entities.ResourceCategory.list()).filter(O=>{var M;return O.is_active&&((M=O.applies_to_content_types)==null?void 0:M.includes("News"))}).sort((O,M)=>(O.display_order||0)-(M.display_order||0)),staleTime:0,refetchOnWindowFocus:!0}),{data:g=[]}=me({queryKey:["article-button-styles"],queryFn:async()=>(await X.entities.ButtonStyle.list()).filter(O=>O.is_active&&O.card_type==="article"),staleTime:0,refetchOnWindowFocus:!0}),v=b.useMemo(()=>d.filter(C=>{var k,E,R;const O=((k=C.title)==null?void 0:k.toLowerCase().includes(t.toLowerCase()))||((E=C.summary)==null?void 0:E.toLowerCase().includes(t.toLowerCase()))||((R=C.tags)==null?void 0:R.some(F=>F.toLowerCase().includes(t.toLowerCase()))),M=n.length===0||C.subcategories&&C.subcategories.some(F=>n.includes(F));return O&&M}),[d,t,n]),y=b.useMemo(()=>{const C=[...v];switch(a){case"newest":C.sort((O,M)=>new Date(M.published_date||M.created_date)-new Date(O.published_date||O.created_date));break;case"oldest":C.sort((O,M)=>new Date(O.published_date||O.created_date)-new Date(M.published_date||M.created_date));break;case"title-asc":C.sort((O,M)=>O.title.localeCompare(M.title));break;case"title-desc":C.sort((O,M)=>M.title.localeCompare(O.title));break}return C},[v,a]),j=Math.ceil(y.length/c),w=(l-1)*c,N=w+c,_=y.slice(w,N),T=()=>{const C=[];if(j<=7)for(let M=1;M<=j;M++)C.push(M);else if(l<=4){for(let M=1;M<=5;M++)C.push(M);C.push("..."),C.push(j)}else if(l>=j-3){C.push(1),C.push("...");for(let M=j-4;M<=j;M++)C.push(M)}else{C.push(1),C.push("...");for(let M=l-1;M<=l+1;M++)C.push(M);C.push("..."),C.push(j)}return C},A=C=>{r(O=>O.includes(C)?O.filter(M=>M!==C):[...O,C]),o(1)},P=m||p;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"News"}),e.jsx("p",{className:"text-slate-600",children:"Stay updated with our latest news"})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("div",{className:"lg:w-64 flex-shrink-0",children:e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 sticky top-8",children:e.jsx(gd,{categories:h,selectedSubcategories:n,onSubcategoryToggle:A,searchQuery:t,onSearchChange:s,onClearSearch:()=>s("")})})}),e.jsx("div",{className:"flex-1",children:P?e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array(6).fill(0).map((C,O)=>e.jsxs(le,{className:"animate-pulse border-slate-200",children:[e.jsx("div",{className:"h-48 bg-slate-200"}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"h-6 bg-slate-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded w-full"})]})]},O))}):_.length===0?e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(Yl,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:t||n.length>0?"No news found":"No news available"}),e.jsx("p",{className:"text-slate-600",children:t||n.length>0?"Try adjusting your search or filters":"Check back soon for updates"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 gap-3",children:[e.jsxs("div",{className:"text-sm text-slate-600",children:["Showing ",w+1,"-",Math.min(N,y.length)," of ",y.length," ",y.length===1?"article":"articles"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ke,{value:String(c),onValueChange:C=>u(Number(C)),children:[e.jsx(Ve,{className:"w-32",children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"6",children:"6 per page"}),e.jsx(re,{value:"12",children:"12 per page"}),e.jsx(re,{value:"24",children:"24 per page"}),e.jsx(re,{value:"48",children:"48 per page"})]})]}),e.jsxs(Ke,{value:a,onValueChange:i,children:[e.jsxs(Ve,{className:"w-48",children:[e.jsx(Ql,{className:"w-4 h-4 mr-2"}),e.jsx(Qe,{placeholder:"Sort By"})]}),e.jsxs(We,{children:[e.jsx(re,{value:"newest",children:"Newest First"}),e.jsx(re,{value:"oldest",children:"Oldest First"}),e.jsx(re,{value:"title-asc",children:"Title A-Z"}),e.jsx(re,{value:"title-desc",children:"Title Z-A"})]})]})]})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(C=>e.jsx(vd,{article:C,buttonStyles:g,viewPageUrl:"NewsView"},C.id))}),j>1&&e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{variant:"outline",size:"sm",onClick:()=>o(C=>Math.max(1,C-1)),disabled:l===1,children:e.jsx(Wn,{className:"w-4 h-4"})}),T().map((C,O)=>C==="..."?e.jsx("span",{className:"px-2 text-slate-400",children:"..."},`ellipsis-${O}`):e.jsx(J,{variant:l===C?"default":"outline",size:"sm",onClick:()=>o(C),className:"min-w-[40px]",children:C},C)),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>o(C=>Math.min(j,C+1)),disabled:l===j,children:e.jsx(js,{className:"w-4 h-4"})})]})})]})})]})]})})}function pz({isAdmin:t}){const[s,n]=b.useState(3),[r,a]=b.useState(5),[i,l]=b.useState(!0),[o,c]=b.useState(!0),u=Yt(),{data:d=[],isLoading:m}=me({queryKey:["news-ticker-settings"],queryFn:async()=>(await X.entities.SystemSettings.list()).filter(v=>v.setting_key==="news_ticker_count"||v.setting_key==="news_ticker_cycle_seconds"||v.setting_key==="news_ticker_enabled"||v.setting_key==="news_show_author"),enabled:t,staleTime:300*1e3});b.useEffect(()=>{if(d.length>0){const g=d.find(w=>w.setting_key==="news_ticker_count"),v=d.find(w=>w.setting_key==="news_ticker_cycle_seconds"),y=d.find(w=>w.setting_key==="news_ticker_enabled"),j=d.find(w=>w.setting_key==="news_show_author");g&&n(parseInt(g.setting_value)||3),v&&a(parseInt(v.setting_value)||5),y&&l(y.setting_value==="true"),j&&c(j.setting_value==="true")}},[d]);const h=Le({mutationFn:async()=>{const g=d.find(N=>N.setting_key==="news_ticker_count"),v=d.find(N=>N.setting_key==="news_ticker_cycle_seconds"),y=d.find(N=>N.setting_key==="news_ticker_enabled"),j=d.find(N=>N.setting_key==="news_show_author"),w=[];g?w.push(X.entities.SystemSettings.update(g.id,{setting_value:s.toString()})):w.push(X.entities.SystemSettings.create({setting_key:"news_ticker_count",setting_value:s.toString(),description:"Number of news articles to display in ticker"})),v?w.push(X.entities.SystemSettings.update(v.id,{setting_value:r.toString()})):w.push(X.entities.SystemSettings.create({setting_key:"news_ticker_cycle_seconds",setting_value:r.toString(),description:"Seconds between news ticker transitions"})),y?w.push(X.entities.SystemSettings.update(y.id,{setting_value:i.toString()})):w.push(X.entities.SystemSettings.create({setting_key:"news_ticker_enabled",setting_value:i.toString(),description:"Whether the news ticker is enabled"})),j?w.push(X.entities.SystemSettings.update(j.id,{setting_value:o.toString()})):w.push(X.entities.SystemSettings.create({setting_key:"news_show_author",setting_value:o.toString(),description:"Whether to show author on news cards and articles"})),await Promise.all(w)},onSuccess:()=>{u.invalidateQueries({queryKey:["news-ticker-settings"]}),te.success("News ticker settings saved successfully")},onError:()=>{te.error("Failed to save settings")}}),p=()=>{if(s<1){te.error("Number of articles must be at least 1");return}if(r<2){te.error("Cycle time must be at least 2 seconds");return}h.mutate()};return t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"News Ticker Settings"}),e.jsx("p",{className:"text-slate-600",children:"Configure the news ticker displayed at the top of the member portal"})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsxs(Ue,{className:"flex items-center gap-2",children:[e.jsx(Qa,{className:"w-5 h-5"}),"Ticker Configuration"]})}),e.jsx(ce,{className:"pt-6 space-y-6",children:m?e.jsx("div",{className:"text-center py-8 text-slate-600",children:"Loading settings..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-slate-50 rounded-lg mb-6",children:[e.jsx(cs,{id:"ticker-enabled",checked:i,onCheckedChange:l}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ee,{htmlFor:"ticker-enabled",className:"cursor-pointer font-medium",children:"Enable News Ticker"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Show or hide the news ticker bar at the top of the member portal"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"ticker-count",children:"Number of Articles to Display"}),e.jsx(he,{id:"ticker-count",type:"number",min:"1",max:"10",value:s,onChange:g=>n(parseInt(g.target.value)||1)}),e.jsx("p",{className:"text-xs text-slate-500",children:"The latest published news articles to cycle through in the ticker"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"cycle-seconds",children:"Cycle Time (seconds)"}),e.jsx(he,{id:"cycle-seconds",type:"number",min:"2",max:"60",value:r,onChange:g=>a(parseInt(g.target.value)||2)}),e.jsx("p",{className:"text-xs text-slate-500",children:"Time in seconds before switching to the next article (minimum 2 seconds)"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-slate-50 rounded-lg",children:[e.jsx(cs,{id:"show-author",checked:o,onCheckedChange:c}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ee,{htmlFor:"show-author",className:"cursor-pointer font-medium",children:"Show Author"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Display author information on news cards and articles"})]})]}),e.jsx("div",{className:"pt-4 flex justify-end",children:e.jsxs(J,{onClick:p,disabled:h.isPending,className:"bg-blue-600 hover:bg-blue-700 gap-2",children:[e.jsx(un,{className:"w-4 h-4"}),"Save Settings"]})})]})})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"border-red-200",children:e.jsx(ce,{className:"p-8 text-center",children:e.jsx("p",{className:"text-red-600",children:"Administrator access required"})})})})}function xz({isAdmin:t,memberInfo:s}){const[n,r]=b.useState(!1),[a,i]=b.useState(null),[l,o]=b.useState(null),[c,u]=b.useState(null),d=async()=>{var h,p;if(!(s!=null&&s.email)){te.error("Member information not available");return}r(!0),i(null),o(null);try{const g=await X.functions.invoke("exportAllData",{memberEmail:s.email});if(console.log("Export result:",g),g!=null&&g.success||(h=g==null?void 0:g.data)!=null&&h.success){const v=(g==null?void 0:g.data)||g;i(v.download_url),o(v.file_name),u(v.expires_in),te.success("Data export completed successfully!")}else{const v=(g==null?void 0:g.error)||((p=g==null?void 0:g.data)==null?void 0:p.error)||"Unknown error";te.error("Export failed: "+v)}}catch(g){console.error("Export error:",g),te.error("Failed to export data: "+g.message)}finally{r(!1)}},m=()=>{a&&window.open(a,"_blank")};return t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Data Export & Backup"}),e.jsx("p",{className:"text-slate-600",children:"Export all application data to CSV files in a downloadable ZIP archive"})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm mb-6",children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsxs(Ue,{className:"flex items-center gap-2",children:[e.jsx(AK,{className:"w-5 h-5 text-blue-600"}),"Export All Data"]})}),e.jsxs(ce,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:"What will be exported:"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"All member and organization data"}),e.jsx("li",{children:"Events, bookings, and program tickets"}),e.jsx("li",{children:"Resources, articles, and news posts"}),e.jsx("li",{children:"Roles, permissions, and settings"}),e.jsx("li",{children:"Forms, submissions, and all other entities"})]})]}),e.jsx("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(vs,{className:"w-5 h-5 text-amber-600 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-amber-900 mb-1",children:"Important Notes:"}),e.jsxs("ul",{className:"text-sm text-amber-700 space-y-1",children:[e.jsx("li",{children:" Export may take several minutes depending on data volume"}),e.jsx("li",{children:" Download link expires after 1 hour"}),e.jsx("li",{children:" Sensitive data like tokens are included - store securely"}),e.jsx("li",{children:" Each entity is exported as a separate CSV file"})]})]})]})}),!a&&!n&&e.jsxs(J,{onClick:d,disabled:n,className:"w-full bg-blue-600 hover:bg-blue-700 h-12 text-base",children:[e.jsx(Zn,{className:"w-5 h-5 mr-2"}),"Start Data Export"]}),n&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 space-y-4",children:[e.jsx(vt,{className:"w-12 h-12 text-blue-600 animate-spin"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-medium text-slate-900",children:"Exporting data..."}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"This may take a few minutes. Please don't close this page."})]})]}),a&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsx(Vf,{className:"w-6 h-6 text-green-600 shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-green-900",children:"Export Complete!"}),e.jsx("p",{className:"text-sm text-green-700 mt-1",children:"Your data has been exported and is ready for download."})]})]}),e.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"File:"}),e.jsx("span",{className:"text-sm text-slate-900",children:l})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Link expires in:"}),e.jsxs("span",{className:"text-sm text-slate-900",children:[Math.floor(c/60)," minutes"]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(J,{onClick:m,className:"flex-1 bg-green-600 hover:bg-green-700 h-12 text-base",children:[e.jsx(Zn,{className:"w-5 h-5 mr-2"}),"Download ZIP File"]}),e.jsx(J,{onClick:d,variant:"outline",className:"h-12",children:"Export Again"})]})]})]})]}),e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsxs(ce,{className:"p-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Best Practices:"}),e.jsxs("ul",{className:"text-sm text-slate-600 space-y-2",children:[e.jsx("li",{children:" Schedule regular backups (weekly or monthly)"}),e.jsx("li",{children:" Store backup files in a secure, encrypted location"}),e.jsx("li",{children:" Test restoring from backups periodically"}),e.jsx("li",{children:" Keep multiple backup versions for different time periods"}),e.jsx("li",{children:" Document your backup and restoration procedures"})]})]})})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"border-red-200",children:e.jsx(ce,{className:"p-8 text-center",children:e.jsx("p",{className:"text-red-600",children:"Administrator access required"})})})})}function gz({isAdmin:t,isFeatureExcluded:s}){const[n,r]=b.useState(""),[a,i]=b.useState("all"),[l,o]=b.useState([]),[c,u]=b.useState("newest"),{data:d=[],isLoading:m}=me({queryKey:["all-articles-admin"],queryFn:async()=>await X.entities.BlogPost.list("-created_date"),staleTime:300*1e3,refetchOnWindowFocus:!1}),{data:h=[],isLoading:p}=me({queryKey:["resourceCategories-articles"],queryFn:async()=>(await X.entities.ResourceCategory.list()).filter(M=>M.is_active&&M.applies_to_content_types&&M.applies_to_content_types.includes("Articles")).sort((M,k)=>(M.display_order||0)-(k.display_order||0)),staleTime:300*1e3,refetchOnWindowFocus:!1}),{data:g=[]}=me({queryKey:["article-button-styles"],queryFn:async()=>(await X.entities.ButtonStyle.list()).filter(O=>O.is_active&&O.card_type==="article"),staleTime:300*1e3,refetchOnWindowFocus:!1}),{data:v=[]}=me({queryKey:["all-article-views"],queryFn:async()=>await X.entities.ArticleView.list(),staleTime:300*1e3,refetchOnWindowFocus:!1}),{data:y=[]}=me({queryKey:["all-article-reactions"],queryFn:async()=>await X.entities.ArticleReaction.list(),staleTime:300*1e3,refetchOnWindowFocus:!1}),{data:j="Articles"}=me({queryKey:["article-display-name"],queryFn:async()=>{const O=(await X.entities.SystemSettings.list()).find(M=>M.setting_key==="article_display_name");return(O==null?void 0:O.setting_value)||"Articles"},staleTime:300*1e3,refetchOnWindowFocus:!1}),w=b.useMemo(()=>{const C={};return d.forEach(O=>{C[O.id]={viewCount:v.filter(M=>M.article_id===O.id).length,likeCount:y.filter(M=>M.article_id===O.id&&M.reaction_type==="up").length}}),C},[d,v,y]),N=b.useMemo(()=>d.filter(C=>{var E,R,F,z;const O=((E=C.title)==null?void 0:E.toLowerCase().includes(n.toLowerCase()))||((R=C.summary)==null?void 0:R.toLowerCase().includes(n.toLowerCase()))||((F=C.tags)==null?void 0:F.some(V=>V.toLowerCase().includes(n.toLowerCase())))||((z=C.author_name)==null?void 0:z.toLowerCase().includes(n.toLowerCase())),M=a==="all"||C.status===a,k=l.length===0||C.subcategories&&C.subcategories.some(V=>l.includes(V));return O&&M&&k}),[d,n,a,l]),_=b.useMemo(()=>{const C=[...N];switch(c){case"newest":C.sort((O,M)=>new Date(M.created_date)-new Date(O.created_date));break;case"oldest":C.sort((O,M)=>new Date(O.created_date)-new Date(M.created_date));break;case"title-asc":C.sort((O,M)=>O.title.localeCompare(M.title));break;case"title-desc":C.sort((O,M)=>M.title.localeCompare(O.title));break;case"most-viewed":C.sort((O,M)=>{var k,E;return(((k=w[M.id])==null?void 0:k.viewCount)||0)-(((E=w[O.id])==null?void 0:E.viewCount)||0)});break;case"most-liked":C.sort((O,M)=>{var k,E;return(((k=w[M.id])==null?void 0:k.likeCount)||0)-(((E=w[O.id])==null?void 0:E.likeCount)||0)});break}return C},[N,c,w]),T=C=>{o(O=>O.includes(C)?O.filter(M=>M!==C):[...O,C])},A=C=>{switch(C){case"published":return"bg-green-100 text-green-700 border-green-200";case"draft":return"bg-amber-100 text-amber-700 border-amber-200";case"archived":return"bg-slate-100 text-slate-700 border-slate-200";default:return"bg-slate-100 text-slate-700 border-slate-200"}},P=m||p;return t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:["All ",j]}),e.jsxs("p",{className:"text-slate-600",children:["Manage all ",j.toLowerCase()," across the platform"]})]}),e.jsx(Ht,{to:Pe("ArticleEditor"),children:e.jsxs(J,{className:"bg-blue-600 hover:bg-blue-700 gap-2",children:[e.jsx(Pt,{className:"w-4 h-4"}),"New ",j.endsWith("s")?j.slice(0,-1):j]})})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("div",{className:"lg:w-64 flex-shrink-0",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 sticky top-8",children:[e.jsx(gd,{categories:h,selectedSubcategories:l,onSubcategoryToggle:T,searchQuery:n,onSearchChange:r,onClearSearch:()=>r(""),isLoading:!1,displayName:j}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Status"}),e.jsx("div",{className:"flex flex-col gap-2",children:["all","draft","published","archived"].map(C=>e.jsx(J,{variant:a===C?"default":"outline",size:"sm",onClick:()=>i(C),className:"capitalize justify-start",children:C},C))})]})]})}),e.jsx("div",{className:"flex-1",children:P?e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Array(6).fill(0).map((C,O)=>e.jsxs(le,{className:"animate-pulse border-slate-200",children:[e.jsx("div",{className:"h-48 bg-slate-200"}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"h-6 bg-slate-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded w-full"})]})]},O))}):_.length===0?e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(Yl,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsxs("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:["No ",j.toLowerCase()," found"]}),e.jsx("p",{className:"text-slate-600",children:"Try adjusting your search or filters"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 gap-3",children:[e.jsxs("div",{className:"text-sm text-slate-600",children:["Showing ",_.length," ",_.length===1&&j.endsWith("s")?j.slice(0,-1).toLowerCase():j.toLowerCase()]}),e.jsxs(Ke,{value:c,onValueChange:u,children:[e.jsxs(Ve,{className:"w-48",children:[e.jsx(Ql,{className:"w-4 h-4 mr-2"}),e.jsx(Qe,{placeholder:"Sort By"})]}),e.jsxs(We,{children:[e.jsx(re,{value:"newest",children:"Newest First"}),e.jsx(re,{value:"oldest",children:"Oldest First"}),e.jsx(re,{value:"most-viewed",children:"Most Viewed"}),e.jsx(re,{value:"most-liked",children:"Most Liked"}),e.jsx(re,{value:"title-asc",children:"Title A-Z"}),e.jsx(re,{value:"title-desc",children:"Title Z-A"})]})]})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:_.map(C=>{const O=C.published_date&&new Date(C.published_date)>new Date;return e.jsxs("div",{children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute top-2 right-2 z-10 flex gap-1",children:[e.jsx(ye,{className:A(C.status),children:C.status}),O&&e.jsx(ye,{className:"bg-purple-100 text-purple-700",children:"Scheduled"})]}),e.jsx(vd,{article:C,buttonStyles:g,showActions:!1,displayName:j})]}),C.author_name&&e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-slate-600",children:[e.jsx(Xs,{className:"w-3 h-3"}),e.jsxs("span",{children:["By ",C.author_name]})]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(Ht,{to:`${Pe("ArticleEditor")}?id=${C.id}`,className:"flex-1",children:e.jsxs(J,{variant:"outline",size:"sm",className:"w-full gap-2",children:[e.jsx(gi,{className:"w-3 h-3"}),"Edit"]})}),C.status==="published"&&e.jsx(Ht,{to:`${Pe("ArticleView")}?slug=${C.slug}`,className:"flex-1",children:e.jsxs(J,{variant:"outline",size:"sm",className:"w-full gap-2",children:[e.jsx(gr,{className:"w-3 h-3"}),"View"]})})]})]},C.id)})})]})})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"border-red-200",children:e.jsx(ce,{className:"p-8 text-center",children:e.jsx("p",{className:"text-red-600",children:"Administrator access required"})})})})}function vz({isAdmin:t}){const s=window.location.origin,{data:n=[]}=me({queryKey:["published-articles"],queryFn:async()=>(await X.entities.BlogPost.list()).filter(p=>p.status==="published"&&new Date(p.published_date)<=new Date),staleTime:300*1e3}),{data:r=[]}=me({queryKey:["published-news"],queryFn:async()=>(await X.entities.NewsPost.list()).filter(p=>p.status==="published"&&new Date(p.published_date)<=new Date),staleTime:300*1e3}),{data:a=[]}=me({queryKey:["active-job-postings"],queryFn:async()=>(await X.entities.JobPosting.list()).filter(p=>p.status==="active"),staleTime:300*1e3}),{data:i=[]}=me({queryKey:["public-custom-pages"],queryFn:async()=>(await X.entities.IEditPage.list()).filter(p=>p.is_public),staleTime:300*1e3}),l=[{name:"Home",url:Pe("Home"),icon:Js},{name:"Public Events",url:Pe("PublicEvents"),icon:Js},{name:"Public Articles",url:Pe("PublicArticles"),icon:ns},{name:"Public News",url:Pe("PublicNews"),icon:DE},{name:"Public Resources",url:Pe("PublicResources"),icon:aa},{name:"Job Board",url:Pe("JobBoard"),icon:En},{name:"Post Job",url:Pe("PostJob"),icon:En},{name:"Organisation Directory",url:Pe("OrganisationDirectory"),icon:Js}],o=b.useMemo(()=>n.map(h=>({title:h.title,url:`${Pe("ArticleView")}?slug=${h.slug}`,fullUrl:`${s}${Pe("ArticleView")}?slug=${h.slug}`,author:h.author_name,date:h.published_date})),[n,s]),c=b.useMemo(()=>r.map(h=>({title:h.title,url:`${Pe("NewsView")}?slug=${h.slug}`,fullUrl:`${s}${Pe("NewsView")}?slug=${h.slug}`,author:h.author_name,date:h.published_date})),[r,s]),u=b.useMemo(()=>a.map(h=>({title:h.title,url:`${Pe("JobDetails")}?id=${h.id}`,fullUrl:`${s}${Pe("JobDetails")}?id=${h.id}`,company:h.company_name,date:h.created_date})),[a,s]),d=b.useMemo(()=>i.map(h=>({title:h.title,url:`${Pe("ViewPage")}?slug=${h.slug}`,fullUrl:`${s}${Pe("ViewPage")}?slug=${h.slug}`,description:h.description})),[i,s]),m=h=>{navigator.clipboard.writeText(h),te.success("URL copied to clipboard")};return t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Public Site Map"}),e.jsx("p",{className:"text-slate-600",children:"All public-facing URLs on your platform"})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsxs(Ue,{className:"flex items-center gap-2",children:[e.jsx(Js,{className:"w-5 h-5 text-blue-600"}),"Static Public Pages"]})}),e.jsx(ce,{className:"p-6",children:e.jsx("div",{className:"space-y-2",children:l.map((h,p)=>{const g=h.icon;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(g,{className:"w-4 h-4 text-slate-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:h.name}),e.jsxs("p",{className:"text-xs text-slate-500 font-mono",children:[s,h.url]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(J,{variant:"outline",size:"sm",onClick:()=>m(`${s}${h.url}`),children:e.jsx(Va,{className:"w-3 h-3"})}),e.jsx("a",{href:h.url,target:"_blank",rel:"noopener noreferrer",children:e.jsx(J,{variant:"outline",size:"sm",children:e.jsx(Js,{className:"w-3 h-3"})})})]})]},p)})})})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Ue,{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"w-5 h-5 text-blue-600"}),"Published Articles"]}),e.jsxs(ye,{children:[o.length," articles"]})]})}),e.jsx(ce,{className:"p-6",children:o.length===0?e.jsx("p",{className:"text-sm text-slate-500 text-center py-8",children:"No published articles"}):e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:o.map((h,p)=>e.jsxs("div",{className:"flex items-start justify-between p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-slate-900 truncate",children:h.title}),h.author&&e.jsxs("p",{className:"text-xs text-slate-500 mt-0.5",children:["By ",h.author]}),e.jsx("p",{className:"text-xs text-slate-500 font-mono mt-1 break-all",children:h.fullUrl})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx(J,{variant:"outline",size:"sm",onClick:()=>m(h.fullUrl),children:e.jsx(Va,{className:"w-3 h-3"})}),e.jsx("a",{href:h.url,target:"_blank",rel:"noopener noreferrer",children:e.jsx(J,{variant:"outline",size:"sm",children:e.jsx(Js,{className:"w-3 h-3"})})})]})]},p))})})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Ue,{className:"flex items-center gap-2",children:[e.jsx(DE,{className:"w-5 h-5 text-blue-600"}),"Published News"]}),e.jsxs(ye,{children:[c.length," posts"]})]})}),e.jsx(ce,{className:"p-6",children:c.length===0?e.jsx("p",{className:"text-sm text-slate-500 text-center py-8",children:"No published news posts"}):e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:c.map((h,p)=>e.jsxs("div",{className:"flex items-start justify-between p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-slate-900 truncate",children:h.title}),h.author&&e.jsxs("p",{className:"text-xs text-slate-500 mt-0.5",children:["By ",h.author]}),e.jsx("p",{className:"text-xs text-slate-500 font-mono mt-1 break-all",children:h.fullUrl})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx(J,{variant:"outline",size:"sm",onClick:()=>m(h.fullUrl),children:e.jsx(Va,{className:"w-3 h-3"})}),e.jsx("a",{href:h.url,target:"_blank",rel:"noopener noreferrer",children:e.jsx(J,{variant:"outline",size:"sm",children:e.jsx(Js,{className:"w-3 h-3"})})})]})]},p))})})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Ue,{className:"flex items-center gap-2",children:[e.jsx(En,{className:"w-5 h-5 text-blue-600"}),"Active Job Postings"]}),e.jsxs(ye,{children:[u.length," jobs"]})]})}),e.jsx(ce,{className:"p-6",children:u.length===0?e.jsx("p",{className:"text-sm text-slate-500 text-center py-8",children:"No active job postings"}):e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:u.map((h,p)=>e.jsxs("div",{className:"flex items-start justify-between p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-slate-900 truncate",children:h.title}),h.company&&e.jsxs("p",{className:"text-xs text-slate-500 mt-0.5",children:["At ",h.company]}),e.jsx("p",{className:"text-xs text-slate-500 font-mono mt-1 break-all",children:h.fullUrl})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx(J,{variant:"outline",size:"sm",onClick:()=>m(h.fullUrl),children:e.jsx(Va,{className:"w-3 h-3"})}),e.jsx("a",{href:h.url,target:"_blank",rel:"noopener noreferrer",children:e.jsx(J,{variant:"outline",size:"sm",children:e.jsx(Js,{className:"w-3 h-3"})})})]})]},p))})})]}),d.length>0&&e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Ue,{className:"flex items-center gap-2",children:[e.jsx(Js,{className:"w-5 h-5 text-blue-600"}),"Custom Public Pages"]}),e.jsxs(ye,{children:[d.length," pages"]})]})}),e.jsx(ce,{className:"p-6",children:e.jsx("div",{className:"space-y-2",children:d.map((h,p)=>e.jsxs("div",{className:"flex items-start justify-between p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-slate-900 truncate",children:h.title}),h.description&&e.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:h.description}),e.jsx("p",{className:"text-xs text-slate-500 font-mono mt-1 break-all",children:h.fullUrl})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx(J,{variant:"outline",size:"sm",onClick:()=>m(h.fullUrl),children:e.jsx(Va,{className:"w-3 h-3"})}),e.jsx("a",{href:h.url,target:"_blank",rel:"noopener noreferrer",children:e.jsx(J,{variant:"outline",size:"sm",children:e.jsx(Js,{className:"w-3 h-3"})})})]})]},p))})})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"border-red-200",children:e.jsx(ce,{className:"p-8 text-center",children:e.jsx("p",{className:"text-red-600",children:"Administrator access required"})})})})}const _6={bug:F5,feature_request:q5,how_to:md,general:Ms},S6={bug:"Bug Report",feature_request:"Feature Request",how_to:"How-To Question",general:"General Message"},C6={open:"bg-blue-100 text-blue-800",in_progress:"bg-yellow-100 text-yellow-800",resolved:"bg-green-100 text-green-800",closed:"bg-slate-100 text-slate-800"},k6={minor:"bg-green-100 text-green-700",moderate:"bg-yellow-100 text-yellow-700",major:"bg-orange-100 text-orange-700",critical:"bg-red-100 text-red-700"};function yz({memberInfo:t}){const[s,n]=b.useState(!1),[r,a]=b.useState(null),[i,l]=b.useState({type:"general",subject:"",description:"",severity:"moderate",attachments:[]}),[o,c]=b.useState(""),[u,d]=b.useState(!1),m=Yt(),{data:h=[],isLoading:p}=me({queryKey:["support-tickets",t==null?void 0:t.email],queryFn:async()=>(await X.entities.SupportTicket.list("-created_date")).filter(A=>A.submitter_email===(t==null?void 0:t.email)),enabled:!!t}),{data:g=[]}=me({queryKey:["support-responses",r==null?void 0:r.id],queryFn:async()=>(await X.entities.SupportTicketResponse.list("created_date")).filter(A=>A.ticket_id===(r==null?void 0:r.id)),enabled:!!r}),v=Le({mutationFn:T=>X.entities.SupportTicket.create(T),onSuccess:()=>{m.invalidateQueries({queryKey:["support-tickets"]}),te.success("Support ticket submitted successfully"),n(!1),l({type:"general",subject:"",description:"",severity:"moderate",attachments:[]})},onError:()=>te.error("Failed to submit ticket")}),y=Le({mutationFn:T=>X.entities.SupportTicketResponse.create(T),onSuccess:()=>{m.invalidateQueries({queryKey:["support-responses"]}),te.success("Reply added"),c("")},onError:()=>te.error("Failed to add reply")}),j=async T=>{var P;const A=(P=T.target.files)==null?void 0:P[0];if(A){d(!0);try{const{file_url:C}=await X.integrations.Core.UploadFile({file:A});l({...i,attachments:[...i.attachments,C]}),te.success("File uploaded")}catch{te.error("Failed to upload file")}finally{d(!1)}}},w=T=>{l({...i,attachments:i.attachments.filter((A,P)=>P!==T)})},N=()=>{if(!i.subject.trim()||!i.description.trim()){te.error("Please fill in all fields");return}v.mutate({...i,submitter_email:t.email,submitter_name:`${t.first_name} ${t.last_name}`})},_=()=>{o.trim()&&y.mutate({ticket_id:r.id,message:o,is_admin_response:!1,responder_email:t.email,responder_name:`${t.first_name} ${t.last_name}`})};return t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Support"}),e.jsx("p",{className:"text-slate-600",children:"Submit bug reports, feature requests, or ask questions"})]}),e.jsxs(J,{onClick:()=>n(!0),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"New Ticket"]})]}),p?e.jsx("div",{className:"text-center py-12",children:"Loading tickets..."}):h.length===0?e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(NG,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No Support Tickets Yet"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"Submit your first ticket to get help from our team"}),e.jsxs(J,{onClick:()=>n(!0),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Create First Ticket"]})]})}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(T=>{const A=_6[T.type];return e.jsxs(le,{className:"border-slate-200 shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>a(T),children:[e.jsxs(Fe,{className:"border-b border-slate-200",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5 text-blue-600"}),e.jsx(ye,{variant:"outline",className:"text-xs",children:S6[T.type]})]}),e.jsx(ye,{className:C6[T.status],children:T.status.replace("_"," ")})]}),e.jsx(Ue,{className:"text-lg",children:T.subject})]}),e.jsxs(ce,{className:"pt-4",children:[e.jsx("p",{className:"text-sm text-slate-600 mb-4 line-clamp-2",children:T.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(tn,{className:"w-3 h-3"}),Mt(new Date(T.created_date),"MMM d, yyyy")]}),e.jsx("div",{className:"flex items-center gap-2",children:T.severity&&e.jsx(ye,{className:k6[T.severity],variant:"outline",children:T.severity})})]})]})]},T.id)})}),e.jsx(Ct,{open:s,onOpenChange:n,children:e.jsxs(Nt,{className:"max-w-2xl",children:[e.jsx(kt,{children:e.jsx(Et,{children:"Create Support Ticket"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Type"}),e.jsxs(Ke,{value:i.type,onValueChange:T=>l({...i,type:T}),children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"bug",children:"Bug Report"}),e.jsx(re,{value:"feature_request",children:"Feature Request"}),e.jsx(re,{value:"how_to",children:"How-To Question"}),e.jsx(re,{value:"general",children:"General Message"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Severity"}),e.jsxs(Ke,{value:i.severity,onValueChange:T=>l({...i,severity:T}),children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"minor",children:"Minor"}),e.jsx(re,{value:"moderate",children:"Moderate"}),e.jsx(re,{value:"major",children:"Major"}),e.jsx(re,{value:"critical",children:"Critical"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Subject"}),e.jsx(he,{placeholder:"Brief description of your issue or request...",value:i.subject,onChange:T=>l({...i,subject:T.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Description"}),e.jsx(Gt,{placeholder:"Provide detailed information...",rows:6,value:i.description,onChange:T=>l({...i,description:T.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Attachments"}),i.attachments.length>0&&e.jsx("div",{className:"space-y-2 mb-3",children:i.attachments.map((T,A)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 rounded border",children:[e.jsx("a",{href:T,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline flex-1 truncate",children:T.split("/").pop()}),e.jsx(J,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>w(A),children:e.jsx(_s,{className:"w-3 h-3"})})]},A))}),e.jsxs("label",{className:"block",children:[e.jsx("input",{type:"file",onChange:j,className:"hidden",disabled:u}),e.jsx("div",{className:"border-2 border-dashed border-slate-300 rounded-lg p-6 text-center cursor-pointer hover:border-slate-400 transition-colors",children:u?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"w-6 h-6 text-slate-400 mx-auto mb-2 animate-spin"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Uploading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Gs,{className:"w-6 h-6 text-slate-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Click to upload file or image"})]})})]})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx(J,{onClick:N,disabled:v.isPending,className:"bg-blue-600 hover:bg-blue-700",children:"Submit Ticket"})]})]})}),e.jsx(Ct,{open:!!r,onOpenChange:()=>a(null),children:e.jsx(Nt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:r&&e.jsxs(e.Fragment,{children:[e.jsx(kt,{children:e.jsx("div",{className:"flex items-start justify-between gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[Be.createElement(_6[r.type],{className:"w-5 h-5 text-blue-600"}),e.jsx(ye,{variant:"outline",children:S6[r.type]}),e.jsx(ye,{className:C6[r.status],children:r.status.replace("_"," ")}),r.severity&&e.jsx(ye,{className:k6[r.severity],children:r.severity})]}),e.jsx(Et,{className:"text-2xl",children:r.subject}),e.jsxs("p",{className:"text-sm text-slate-500 mt-2",children:["Submitted ",Mt(new Date(r.created_date),"MMM d, yyyy h:mm a")]})]})})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:e.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:r.description})}),r.attachments&&r.attachments.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"Attachments"}),e.jsx("div",{className:"grid md:grid-cols-2 gap-2",children:r.attachments.map((T,A)=>e.jsxs("a",{href:T,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-3 bg-slate-50 rounded border border-slate-200 hover:bg-slate-100 transition-colors",children:[e.jsx(Gs,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{className:"text-sm text-blue-600 hover:underline truncate",children:T.split("/").pop()})]},A))})]}),r.resolution_notes&&e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Vf,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"font-semibold text-green-900",children:"Resolution"})]}),e.jsx("p",{className:"text-sm text-green-700",children:r.resolution_notes})]}),g.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:"Conversation"}),g.map(T=>e.jsxs("div",{className:`rounded-lg p-4 ${T.is_admin_response?"bg-blue-50 border border-blue-200":"bg-slate-50 border border-slate-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-semibold text-sm text-slate-900",children:[T.responder_name,T.is_admin_response&&e.jsx(ye,{className:"ml-2 bg-blue-600 text-white",children:"Developer"})]}),e.jsx("span",{className:"text-xs text-slate-500",children:Mt(new Date(T.created_date),"MMM d, h:mm a")})]}),e.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:T.message})]},T.id))]}),r.status!=="closed"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Add Reply"}),e.jsx(Gt,{placeholder:"Type your reply...",rows:4,value:o,onChange:T=>c(T.target.value)}),e.jsx("div",{className:"flex justify-end",children:e.jsx(J,{onClick:_,disabled:y.isPending||!o.trim(),className:"bg-blue-600 hover:bg-blue-700",children:"Send Reply"})})]}),r.status==="closed"&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 bg-slate-100 p-3 rounded-lg",children:[e.jsx(vs,{className:"w-4 h-4"}),"This ticket is closed. Contact support if you need to reopen it."]})]})]})})})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-slate-600",children:"Loading..."})})}const E6={bug:F5,feature_request:q5,how_to:md,general:Ms},P6={bug:"Bug Report",feature_request:"Feature Request",how_to:"How-To Question",general:"General Message"},QSe={open:"bg-blue-100 text-blue-800",in_progress:"bg-yellow-100 text-yellow-800",resolved:"bg-green-100 text-green-800",closed:"bg-slate-100 text-slate-800"},JSe={minor:"bg-green-100 text-green-700",moderate:"bg-yellow-100 text-yellow-700",major:"bg-orange-100 text-orange-700",critical:"bg-red-100 text-red-700"};function bz({isAdmin:t,memberInfo:s}){var z;const[n,r]=b.useState(""),[a,i]=b.useState("all"),[l,o]=b.useState("all"),[c,u]=b.useState(null),[d,m]=b.useState(""),[h,p]=b.useState({}),[g,v]=b.useState(!1),[y,j]=b.useState([]),w=Yt(),N=((z=s==null?void 0:s.email)==null?void 0:z.includes("isaasi.co.uk"))||(s==null?void 0:s.email)==="sharon@onlinem.co.uk",{data:_=[],isLoading:T}=me({queryKey:["all-support-tickets"],queryFn:()=>X.entities.SupportTicket.list("-created_date"),enabled:N}),{data:A=[]}=me({queryKey:["support-responses",c==null?void 0:c.id],queryFn:async()=>(await X.entities.SupportTicketResponse.list("created_date")).filter(U=>U.ticket_id===(c==null?void 0:c.id)),enabled:!!c}),P=Le({mutationFn:({id:V,data:U})=>X.entities.SupportTicket.update(V,U),onSuccess:()=>{w.invalidateQueries({queryKey:["all-support-tickets"]}),te.success("Ticket updated")},onError:()=>te.error("Failed to update ticket")}),C=Le({mutationFn:V=>X.entities.SupportTicketResponse.create(V),onSuccess:()=>{w.invalidateQueries({queryKey:["support-responses"]}),te.success("Response added"),m(""),j([])},onError:()=>te.error("Failed to add response")}),O=V=>{P.mutate({id:c.id,data:V}),u({...c,...V})},M=()=>{d.trim()&&C.mutate({ticket_id:c.id,message:d,is_admin_response:!0,responder_email:s.email,responder_name:`${s.first_name} ${s.last_name}`,attachments:y})},k=async V=>{if(!(!V||V.length===0)){v(!0);try{const U=Array.from(V).map(async $=>(await X.integrations.Core.UploadFile({file:$})).file_url),B=await Promise.all(U);j($=>[...$,...B]),te.success(`Uploaded ${B.length} image(s)`)}catch(U){te.error("Failed to upload images: "+U.message)}finally{v(!1)}}},E=V=>{j(U=>U.filter(B=>B!==V))};if(!N)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"border-red-200",children:e.jsx(ce,{className:"p-8 text-center",children:e.jsx("p",{className:"text-red-600",children:"Access restricted to isaasi.co.uk team members"})})})});const R=_.filter(V=>{const U=V.subject.toLowerCase().includes(n.toLowerCase())||V.description.toLowerCase().includes(n.toLowerCase())||V.submitter_name.toLowerCase().includes(n.toLowerCase()),B=a==="all"||V.status===a,$=l==="all"||V.type===l;return U&&B&&$}),F=V=>_.filter(U=>U.status===V).length;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Support Management"}),e.jsx("p",{className:"text-slate-600",children:"Manage and respond to support tickets"})]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-6",children:[e.jsx(le,{className:"border-blue-200",children:e.jsxs(ce,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:F("open")}),e.jsx("div",{className:"text-sm text-slate-600",children:"Open"})]})}),e.jsx(le,{className:"border-yellow-200",children:e.jsxs(ce,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:F("in_progress")}),e.jsx("div",{className:"text-sm text-slate-600",children:"In Progress"})]})}),e.jsx(le,{className:"border-green-200",children:e.jsxs(ce,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:F("resolved")}),e.jsx("div",{className:"text-sm text-slate-600",children:"Resolved"})]})}),e.jsx(le,{className:"border-slate-200",children:e.jsxs(ce,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-slate-600",children:F("closed")}),e.jsx("div",{className:"text-sm text-slate-600",children:"Closed"})]})})]}),e.jsx(le,{className:"border-slate-200 shadow-sm mb-6",children:e.jsx(ce,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx(he,{placeholder:"Search tickets...",value:n,onChange:V=>r(V.target.value),className:"pl-10"})]}),e.jsxs(Ke,{value:a,onValueChange:i,children:[e.jsx(Ve,{className:"w-full md:w-48",children:e.jsx(Qe,{placeholder:"All Statuses"})}),e.jsxs(We,{children:[e.jsx(re,{value:"all",children:"All Statuses"}),e.jsx(re,{value:"open",children:"Open"}),e.jsx(re,{value:"in_progress",children:"In Progress"}),e.jsx(re,{value:"resolved",children:"Resolved"}),e.jsx(re,{value:"closed",children:"Closed"})]})]}),e.jsxs(Ke,{value:l,onValueChange:o,children:[e.jsx(Ve,{className:"w-full md:w-48",children:e.jsx(Qe,{placeholder:"All Types"})}),e.jsxs(We,{children:[e.jsx(re,{value:"all",children:"All Types"}),e.jsx(re,{value:"bug",children:"Bug Report"}),e.jsx(re,{value:"feature_request",children:"Feature Request"}),e.jsx(re,{value:"how_to",children:"How-To Question"}),e.jsx(re,{value:"general",children:"General Message"})]})]})]})})}),T?e.jsx("div",{className:"text-center py-12",children:"Loading tickets..."}):R.length===0?e.jsx(le,{className:"border-slate-200",children:e.jsx(ce,{className:"p-12 text-center",children:e.jsx("p",{className:"text-slate-600",children:"No tickets found"})})}):e.jsx("div",{className:"space-y-4",children:R.map(V=>{const U=E6[V.type];return e.jsx(le,{className:"border-slate-200 shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>u(V),children:e.jsx(ce,{className:"p-4",children:e.jsx("div",{className:"flex items-start justify-between gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[e.jsx(U,{className:"w-5 h-5 text-blue-600"}),e.jsx(ye,{variant:"outline",className:"text-xs",children:P6[V.type]}),e.jsx(ye,{className:QSe[V.status],children:V.status.replace("_"," ")}),V.severity&&e.jsx(ye,{className:JSe[V.severity],children:V.severity})]}),e.jsx("h3",{className:"font-semibold text-lg text-slate-900 mb-1",children:V.subject}),e.jsx("p",{className:"text-sm text-slate-600 mb-2 line-clamp-2",children:V.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[e.jsxs("span",{children:["From: ",V.submitter_name]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(tn,{className:"w-3 h-3"}),Mt(new Date(V.created_date),"MMM d, yyyy h:mm a")]})]})]})})})},V.id)})}),e.jsx(Ct,{open:!!c,onOpenChange:()=>u(null),children:e.jsx(Nt,{className:"max-w-5xl max-h-[90vh] overflow-y-auto",children:c&&e.jsxs(e.Fragment,{children:[e.jsx(kt,{children:e.jsx("div",{className:"flex items-start justify-between gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[Be.createElement(E6[c.type],{className:"w-5 h-5 text-blue-600"}),e.jsx(ye,{variant:"outline",children:P6[c.type]}),e.jsxs(Ke,{value:c.status,onValueChange:V=>O({status:V}),children:[e.jsx(Ve,{className:"w-40 h-7 text-xs",children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"open",children:"Open"}),e.jsx(re,{value:"in_progress",children:"In Progress"}),e.jsx(re,{value:"resolved",children:"Resolved"}),e.jsx(re,{value:"closed",children:"Closed"})]})]}),e.jsxs(Ke,{value:c.severity||"moderate",onValueChange:V=>O({severity:V}),children:[e.jsx(Ve,{className:"w-32 h-7 text-xs",children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"minor",children:"Minor"}),e.jsx(re,{value:"moderate",children:"Moderate"}),e.jsx(re,{value:"major",children:"Major"}),e.jsx(re,{value:"critical",children:"Critical"})]})]})]}),e.jsx(Et,{className:"text-2xl",children:c.subject}),e.jsxs("p",{className:"text-sm text-slate-500 mt-2",children:["From: ",c.submitter_name," (",c.submitter_email,")"]}),e.jsxs("p",{className:"text-sm text-slate-500",children:["Submitted ",Mt(new Date(c.created_date),"MMM d, yyyy h:mm a")]})]})})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:e.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:c.description})}),c.attachments&&c.attachments.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"Attachments"}),e.jsx("div",{className:"grid md:grid-cols-2 gap-2",children:c.attachments.map((V,U)=>e.jsxs("a",{href:V,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-3 bg-slate-50 rounded border border-slate-200 hover:bg-slate-100 transition-colors",children:[e.jsx(Gs,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{className:"text-sm text-blue-600 hover:underline truncate",children:V.split("/").pop()})]},U))})]}),(c.status==="resolved"||c.status==="closed")&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Resolution Notes"}),e.jsx(Gt,{placeholder:"Add resolution notes...",rows:3,value:h.resolution_notes??c.resolution_notes??"",onChange:V=>p({...h,resolution_notes:V.target.value}),onBlur:()=>{h.resolution_notes!==void 0&&(O({resolution_notes:h.resolution_notes}),p({}))}})]}),A.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:"Conversation"}),A.map(V=>e.jsxs("div",{className:`rounded-lg p-4 ${V.is_admin_response?"bg-blue-50 border border-blue-200":"bg-slate-50 border border-slate-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-semibold text-sm text-slate-900",children:[V.responder_name,V.is_admin_response&&e.jsx(ye,{className:"ml-2 bg-blue-600 text-white",children:"Developer"})]}),e.jsx("span",{className:"text-xs text-slate-500",children:Mt(new Date(V.created_date),"MMM d, h:mm a")})]}),e.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:V.message}),V.attachments&&V.attachments.length>0&&e.jsx("div",{className:"mt-3 grid grid-cols-2 gap-2",children:V.attachments.map((U,B)=>e.jsx("a",{href:U,target:"_blank",rel:"noopener noreferrer",className:"block",children:e.jsx("img",{src:U,alt:`Attachment ${B+1}`,className:"w-full h-32 object-cover rounded border border-slate-200 hover:opacity-90 transition-opacity"})},B))})]},V.id))]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ee,{children:"Add Response"}),e.jsx(Gt,{placeholder:"Type your response to the user...",rows:4,value:d,onChange:V=>m(V.target.value)}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{htmlFor:"response-images",className:"cursor-pointer",children:e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 border border-slate-300 rounded-md hover:bg-slate-50 transition-colors",children:[e.jsx(Gs,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:g?"Uploading...":"Attach Images"})]})}),e.jsx("input",{id:"response-images",type:"file",accept:"image/*",multiple:!0,onChange:V=>k(V.target.files),className:"hidden",disabled:g})]}),y.length>0&&e.jsx("div",{className:"grid grid-cols-3 gap-2",children:y.map((V,U)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:V,alt:`Upload ${U+1}`,className:"w-full h-24 object-cover rounded border border-slate-200"}),e.jsx("button",{onClick:()=>E(V),className:"absolute top-1 right-1 bg-red-600 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},U))})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(J,{onClick:M,disabled:C.isPending||!d.trim()||g,className:"bg-blue-600 hover:bg-blue-700",children:"Send Response"})})]})]})]})})})]})})}const EN={Menu:zl,Calendar:Ns,CreditCard:fd,Ticket:Rs,Wallet:Ho,ShoppingCart:xd,History:C0,Sparkles:aa,FileText:ns,Briefcase:En,Settings:Qa,BookOpen:_0,Building:Zo,HelpCircle:md,Users:ws,Shield:In,BarChart3:ah,FileEdit:Wf,AtSign:$f,FolderTree:Xc,Trophy:Ln,MousePointer2:Hf,Mail:Ms,Download:Zn};function jz({isAdmin:t}){const[s,n]=b.useState(null),[r,a]=b.useState(!1),[i,l]=b.useState(!1),[o,c]=b.useState("hierarchy"),[u,d]=b.useState(""),[m,h]=b.useState("all"),[p,g]=b.useState("all"),[v,y]=b.useState("display_order"),j=Yt(),{data:w,isLoading:N}=me({queryKey:["portal-navigation-items"],queryFn:()=>X.entities.PortalNavigationItem.list("display_order"),initialData:[],staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0}),_=Le({mutationFn:z=>X.entities.PortalNavigationItem.create(z),onSuccess:()=>{j.invalidateQueries({queryKey:["portal-navigation-items"]}),a(!1),n(null),te.success("Navigation item created")}}),T=Le({mutationFn:({id:z,data:V})=>X.entities.PortalNavigationItem.update(z,V),onSuccess:()=>{j.invalidateQueries({queryKey:["portal-navigation-items"]}),a(!1),n(null),te.success("Navigation item updated")}}),A=Le({mutationFn:z=>X.entities.PortalNavigationItem.delete(z),onSuccess:()=>{j.invalidateQueries({queryKey:["portal-navigation-items"]}),te.success("Navigation item deleted")}}),P=b.useMemo(()=>{const z=w.filter(U=>U.is_active&&U.section==="user").sort((U,B)=>U.display_order-B.display_order);return z.filter(U=>!U.parent_title).map(U=>({...U,subItems:z.filter(B=>B.parent_title===U.title).sort((B,$)=>B.display_order-$.display_order)}))},[w]),C=b.useMemo(()=>{const z=w.filter(U=>U.is_active&&U.section==="admin").sort((U,B)=>U.display_order-B.display_order);return z.filter(U=>!U.parent_title).map(U=>({...U,subItems:z.filter(B=>B.parent_title===U.title).sort((B,$)=>B.display_order-$.display_order)}))},[w]),O=b.useMemo(()=>{let z=w.filter(B=>{var W,q;const $=u===""||B.title.toLowerCase().includes(u.toLowerCase())||((W=B.url)==null?void 0:W.toLowerCase().includes(u.toLowerCase()))||((q=B.feature_id)==null?void 0:q.toLowerCase().includes(u.toLowerCase())),L=m==="all"||B.section===m,I=p==="all"||p==="none"&&!B.parent_title||p!=="none"&&B.parent_title===p;return $&&L&&I});const V=z.filter(B=>!B.parent_title),U=[];return V.sort((B,$)=>{switch(v){case"title":return B.title.localeCompare($.title);case"section":return B.section.localeCompare($.section);case"display_order":default:return B.display_order-$.display_order}}),V.forEach(B=>{U.push({...B,isParent:!0}),z.filter(L=>L.parent_title===B.title).sort((L,I)=>L.display_order-I.display_order).forEach(L=>{U.push({...L,isChild:!0})})}),U},[w,u,m,p,v]),M=b.useMemo(()=>["all","none",...w.filter(V=>!V.parent_title).map(V=>V.title).sort()],[w]),k=z=>{n({...z}),a(!0)},E=()=>{if(!s.title){te.error("Title is required");return}s.id?T.mutate({id:s.id,data:{title:s.title,icon:s.icon}}):_.mutate(s)},R=async z=>{var V,U;if(z.destination&&!(z.source.droppableId===z.destination.droppableId&&z.source.index===z.destination.index)){l(!0);try{const{source:B,destination:$,draggableId:L}=z,I=B.droppableId.split("-")[0],W=B.droppableId.split("-"),q=W.length>1?W[1]:null,Z=$.droppableId.split("-"),Q=Z.length>1?Z[1]:null,Y=w.filter(pe=>pe.section===I),K=Y.find(pe=>pe.id===L);if(!K)return;const ae=q&&((V=Y.find(pe=>pe.id===q))==null?void 0:V.title)||null,se=Q&&((U=Y.find(pe=>pe.id===Q))==null?void 0:U.title)||null,de=K.parent_title||null;if(Y.some(pe=>pe.parent_title===K.title)&&se){const pe=Y.filter(je=>je.parent_title===K.title);for(const je of pe)await X.entities.PortalNavigationItem.update(je.id,{parent_title:""})}const oe=Y.filter(pe=>pe.id!==L&&(se?pe.parent_title===se:!pe.parent_title)).sort((pe,je)=>pe.display_order-je.display_order);oe.splice($.index,0,K);for(let pe=0;pe<oe.length;pe++){const je=oe[pe],we={display_order:pe};je.id===L&&(we.parent_title=se||""),await X.entities.PortalNavigationItem.update(je.id,we)}if(de!==se){const pe=Y.filter(je=>je.id!==L&&(de?je.parent_title===de:!je.parent_title)).sort((je,we)=>je.display_order-we.display_order);for(let je=0;je<pe.length;je++)await X.entities.PortalNavigationItem.update(pe[je].id,{display_order:je})}await j.invalidateQueries({queryKey:["portal-navigation-items"]}),te.success("Navigation updated")}catch(B){te.error("Failed to reorder"),console.error(B)}finally{l(!1)}}},F=(z,V,U,B,$=!1)=>{const L=EN[z.icon]||zl,I=z.subItems&&z.subItems.length>0;return e.jsxs("div",{ref:U.innerRef,...U.draggableProps,children:[e.jsxs("div",{className:`flex items-center gap-3 p-4 bg-white rounded-lg border border-slate-200 hover:border-blue-400 transition-colors ${$?"ml-8":""}`,children:[e.jsx("div",{...U.dragHandleProps,children:e.jsx(pd,{className:"w-5 h-5 text-slate-400 cursor-grab"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(L,{className:"w-4 h-4 text-slate-600"}),e.jsx("span",{className:"font-medium text-slate-900",children:z.title}),I&&e.jsxs(ye,{variant:"outline",className:"text-xs bg-blue-50",children:[z.subItems.length," sub-item",z.subItems.length>1?"s":""]})]}),e.jsx("div",{className:"text-sm text-slate-500 truncate",children:z.url||"(Parent menu)"}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Feature ID: ",z.feature_id]})]}),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>k(z),children:e.jsx(As,{className:"w-3 h-3"})})]}),!$&&e.jsx(Yc,{droppableId:`${B}-${z.id}`,children:(W,q)=>e.jsxs("div",{ref:W.innerRef,...W.droppableProps,className:`ml-8 mt-2 space-y-2 min-h-[60px] border-l-2 pl-4 transition-colors ${q.isDraggingOver?"border-blue-500 bg-blue-50":"border-slate-200"} ${I?"":"opacity-40"}`,children:[I?z.subItems.map((Z,Q)=>e.jsx(Gc,{draggableId:Z.id,index:Q,children:Y=>F(Z,Q,Y,B,!0)},Z.id)):e.jsx("div",{className:"text-center py-4 text-xs text-slate-400",children:"Drop items here to create sub-menu"}),W.placeholder]})})]})};return t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Portal Navigation Management"}),e.jsx("p",{className:"text-slate-600",children:"Manage and reorder portal sidebar menu items"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(J,{variant:o==="hierarchy"?"default":"outline",onClick:()=>c("hierarchy"),className:"gap-2",children:[e.jsx(oG,{className:"w-4 h-4"}),"Hierarchy"]}),e.jsxs(J,{variant:o==="table"?"default":"outline",onClick:()=>c("table"),className:"gap-2",children:[e.jsx(eY,{className:"w-4 h-4"}),"Table"]})]})]}),o==="hierarchy"?e.jsx(le,{className:"border-blue-200 bg-blue-50 mb-6",children:e.jsx(ce,{className:"p-4",children:e.jsx("p",{className:"text-sm text-blue-700",children:"Drag items to reorder or nest them. Drop items onto parent menus to create sub-items, or drag them to the top level to make them standalone."})})}):e.jsx(le,{className:"mb-6",children:e.jsx(ce,{className:"p-4",children:e.jsxs("div",{className:"grid md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ys,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx(he,{placeholder:"Search...",value:u,onChange:z=>d(z.target.value),className:"pl-9"})]}),e.jsxs(Ke,{value:m,onValueChange:h,children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:"Section"})}),e.jsxs(We,{children:[e.jsx(re,{value:"all",children:"All Sections"}),e.jsx(re,{value:"user",children:"User"}),e.jsx(re,{value:"admin",children:"Admin"})]})]}),e.jsxs(Ke,{value:p,onValueChange:g,children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:"Parent"})}),e.jsxs(We,{children:[e.jsx(re,{value:"all",children:"All Parents"}),e.jsx(re,{value:"none",children:"Top Level Only"}),M.filter(z=>z!=="all"&&z!=="none").map(z=>e.jsx(re,{value:z,children:z},z))]})]}),e.jsxs(Ke,{value:v,onValueChange:y,children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:"Sort by"})}),e.jsxs(We,{children:[e.jsx(re,{value:"display_order",children:"Display Order"}),e.jsx(re,{value:"title",children:"Title"}),e.jsx(re,{value:"section",children:"Section"}),e.jsx(re,{value:"parent",children:"Parent"})]})]})]})})}),o==="table"?e.jsx(le,{children:e.jsx(ce,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3 text-sm font-semibold text-slate-700",children:"Title"}),e.jsx("th",{className:"text-left p-3 text-sm font-semibold text-slate-700",children:"Icon"}),e.jsx("th",{className:"text-left p-3 text-sm font-semibold text-slate-700",children:"URL"}),e.jsx("th",{className:"text-left p-3 text-sm font-semibold text-slate-700",children:"Section"}),e.jsx("th",{className:"text-left p-3 text-sm font-semibold text-slate-700",children:"Parent"}),e.jsx("th",{className:"text-left p-3 text-sm font-semibold text-slate-700",children:"Order"}),e.jsx("th",{className:"text-left p-3 text-sm font-semibold text-slate-700",children:"Feature ID"}),e.jsx("th",{className:"text-left p-3 text-sm font-semibold text-slate-700",children:"Active"}),e.jsx("th",{className:"text-right p-3 text-sm font-semibold text-slate-700",children:"Actions"})]})}),e.jsx("tbody",{children:O.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"text-center py-12 text-slate-500",children:"No items found"})}):O.map(z=>{const V=EN[z.icon]||zl;return e.jsxs("tr",{className:`border-b border-slate-100 hover:bg-slate-50 ${z.isChild?"bg-slate-25":""}`,children:[e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:`flex items-center gap-2 ${z.isChild?"pl-6":""}`,children:[z.isChild&&e.jsx("span",{className:"text-slate-400",children:""}),e.jsx("span",{className:`${z.isParent?"font-semibold":"font-medium"} text-slate-900`,children:z.title})]})}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4 text-slate-600"}),e.jsx("span",{className:"text-xs text-slate-500",children:z.icon})]})}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:"text-sm text-slate-600 truncate max-w-xs block",children:z.url||"-"})}),e.jsx("td",{className:"p-3",children:e.jsx(ye,{variant:z.section==="admin"?"default":"outline",className:"text-xs",children:z.section})}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:"text-sm text-slate-600",children:z.parent_title||"-"})}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:"text-sm text-slate-600",children:z.display_order})}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:"text-xs text-slate-500 font-mono",children:z.feature_id})}),e.jsx("td",{className:"p-3",children:z.is_active?e.jsx(ye,{className:"bg-green-100 text-green-700 text-xs",children:"Active"}):e.jsx(ye,{className:"bg-slate-100 text-slate-700 text-xs",children:"Inactive"})}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx(J,{variant:"ghost",size:"sm",onClick:()=>k(z),children:e.jsx(As,{className:"w-3 h-3"})}),e.jsx(J,{variant:"ghost",size:"sm",onClick:()=>{confirm(`Delete "${z.title}"?`)&&A.mutate(z.id)},className:"text-red-600 hover:text-red-700",children:e.jsx(os,{className:"w-3 h-3"})})]})})]},z.id)})})]})})})}):e.jsxs(pp,{onDragEnd:R,children:[i&&e.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-50 flex items-center justify-center",children:e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-xl",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsx("p",{className:"text-slate-900 font-medium",children:"Updating order..."})]})})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(le,{children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsxs(Ue,{className:"flex items-center gap-2",children:[e.jsx(ws,{className:"w-5 h-5 text-blue-600"}),"User Navigation"]})}),e.jsx(ce,{className:"p-4",children:e.jsx(Yc,{droppableId:"user",children:z=>e.jsxs("div",{ref:z.innerRef,...z.droppableProps,className:"space-y-3 min-h-[400px]",children:[P.length===0?e.jsx("div",{className:"text-center py-12 text-slate-500",children:"No user navigation items"}):P.map((V,U)=>e.jsx(Gc,{draggableId:V.id,index:U,children:B=>F(V,U,B,"user")},V.id)),z.placeholder]})})})]}),e.jsxs(le,{children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsxs(Ue,{className:"flex items-center gap-2",children:[e.jsx(In,{className:"w-5 h-5 text-amber-600"}),"Admin Navigation"]})}),e.jsx(ce,{className:"p-4",children:e.jsx(Yc,{droppableId:"admin",children:z=>e.jsxs("div",{ref:z.innerRef,...z.droppableProps,className:"space-y-3 min-h-[400px]",children:[C.length===0?e.jsx("div",{className:"text-center py-12 text-slate-500",children:"No admin navigation items"}):C.map((V,U)=>e.jsx(Gc,{draggableId:V.id,index:U,children:B=>F(V,U,B,"admin")},V.id)),z.placeholder]})})})]})]})]}),e.jsx(Ct,{open:r,onOpenChange:a,children:e.jsxs(Nt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(kt,{children:e.jsx(Et,{children:s!=null&&s.id?"Edit Navigation Item":"Create Navigation Item"})}),s&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Title *"}),e.jsx(he,{value:s.title,onChange:z=>n({...s,title:z.target.value}),placeholder:"e.g., Browse Events"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Icon *"}),e.jsxs(Ke,{value:s.icon,onValueChange:z=>n({...s,icon:z}),children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsx(We,{children:Object.keys(EN).map(z=>e.jsx(re,{value:z,children:z},z))})]})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e.jsx(J,{onClick:E,disabled:_.isPending||T.isPending,className:"bg-blue-600 hover:bg-blue-700",children:s!=null&&s.id?"Update":"Create"})]})]})})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"border-red-200",children:e.jsx(ce,{className:"p-8 text-center",children:e.jsx("p",{className:"text-red-600",children:"Administrator access required"})})})})}const XSe=[{value:"Articles",label:"Articles"},{value:"Resources",label:"Resources"},{value:"News",label:"News"}];function wz({isAdmin:t}){const[s,n]=b.useState(null),[r,a]=b.useState(!1),[i,l]=b.useState(!1),[o,c]=b.useState(null),[u,d]=b.useState(""),[m,h]=b.useState(null),[p,g]=b.useState(!1),[v,y]=b.useState(""),[j,w]=b.useState(!1),N=Yt(),{data:_,isLoading:T}=me({queryKey:["resource-categories"],queryFn:()=>X.entities.ResourceCategory.list("display_order"),initialData:[]}),A=Le({mutationFn:L=>X.entities.ResourceCategory.create(L),onSuccess:()=>{N.invalidateQueries({queryKey:["resource-categories"]}),a(!1),n(null),te.success("Category created successfully")},onError:L=>{te.error("Failed to create category: "+L.message)}}),P=Le({mutationFn:({id:L,categoryData:I})=>X.entities.ResourceCategory.update(L,I),onSuccess:()=>{N.invalidateQueries({queryKey:["resource-categories"]}),a(!1),n(null),te.success("Category updated successfully")},onError:L=>{te.error("Failed to update category: "+L.message)}}),C=Le({mutationFn:L=>X.entities.ResourceCategory.delete(L),onSuccess:()=>{N.invalidateQueries({queryKey:["resource-categories"]}),l(!1),c(null),te.success("Category deleted successfully")},onError:L=>{te.error("Failed to delete category: "+L.message)}}),O=Le({mutationFn:async({categoryId:L,oldName:I,newName:W})=>(await VNe({categoryId:L,oldSubcategoryName:I,newSubcategoryName:W})).data,onSuccess:L=>{N.invalidateQueries({queryKey:["resource-categories"]}),g(!1),h(null),y(""),te.success(L.message||"Subcategory renamed successfully")},onError:L=>{te.error("Failed to rename subcategory: "+L.message)}}),M=()=>{n({name:"",description:"",subcategories:[],display_order:_.length,is_active:!0,applies_to_content_types:["Articles","Resources"]}),a(!0)},k=L=>{n({...L}),a(!0)},E=L=>{c(L),l(!0)},R=()=>{if(!s.name.trim()){te.error("Category name is required");return}const L={name:s.name,description:s.description||"",subcategories:s.subcategories||[],display_order:s.display_order,is_active:s.is_active,applies_to_content_types:s.applies_to_content_types||["Articles","Resources"]};s.id?P.mutate({id:s.id,categoryData:L}):A.mutate(L)},F=()=>{const L=u.trim();if(!L){te.error("Subcategory name cannot be empty");return}const I=s.subcategories||[];if(I.includes(L)){te.error("Subcategory already exists");return}const W=[...I,L].sort((q,Z)=>q.localeCompare(Z,void 0,{sensitivity:"base"}));n({...s,subcategories:W}),d("")},z=L=>{const I=(s.subcategories||[]).filter(W=>W!==L);n({...s,subcategories:I})},V=(L,I)=>{h({category:L,subcategory:I}),y(I),g(!0)},U=()=>{if(!v.trim()||v.trim()===m.subcategory){te.error("Please enter a different name");return}O.mutate({categoryId:m.category.id,oldName:m.subcategory,newName:v.trim()})},B=L=>{const I=s.applies_to_content_types||[],W=I.includes(L)?I.filter(q=>q!==L):[...I,L];n({...s,applies_to_content_types:W})},$=async L=>{if(L.destination&&L.source.index!==L.destination.index){w(!0);try{const I=Array.from(_),[W]=I.splice(L.source.index,1);I.splice(L.destination.index,0,W);const q=I.map((Z,Q)=>X.entities.ResourceCategory.update(Z.id,{display_order:Q}));await Promise.all(q),await N.invalidateQueries({queryKey:["resource-categories"]}),te.success("Category order updated")}catch(I){te.error("Failed to reorder: "+I.message)}finally{w(!1)}}};return t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Category Management"}),e.jsx("p",{className:"text-slate-600",children:"Manage categories and subcategories for Theme, Collection, Level, and News Type"})]}),e.jsxs(J,{onClick:M,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Create Category"]})]}),T?e.jsx("div",{className:"text-center py-12",children:"Loading categories..."}):_.length===0?e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(Xc,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No Categories Yet"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"Create your first category to organize your content"}),e.jsxs(J,{onClick:M,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Create First Category"]})]})}):e.jsxs(e.Fragment,{children:[j&&e.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-50 flex items-center justify-center",children:e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-xl",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsx("p",{className:"text-slate-900 font-medium",children:"Updating order..."})]})})}),e.jsx(pp,{onDragEnd:$,children:e.jsx(Yc,{droppableId:"categories",children:L=>e.jsxs("div",{ref:L.innerRef,...L.droppableProps,className:"space-y-4",children:[_.map((I,W)=>e.jsx(Gc,{draggableId:I.id,index:W,children:(q,Z)=>e.jsx("div",{ref:q.innerRef,...q.draggableProps,children:e.jsxs(le,{className:`border-slate-200 shadow-sm hover:shadow-md transition-shadow ${Z.isDragging?"shadow-lg ring-2 ring-blue-400":""}`,children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{...q.dragHandleProps,className:"pt-1",children:e.jsx(pd,{className:"w-5 h-5 text-slate-400 cursor-grab active:cursor-grabbing"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Xc,{className:"w-5 h-5 text-blue-600"}),e.jsx(Ue,{className:"text-lg",children:I.name})]}),I.description&&e.jsx("p",{className:"text-sm text-slate-600 mb-2",children:I.description}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(I.applies_to_content_types||[]).map(Q=>e.jsx(ye,{className:"bg-purple-100 text-purple-700 text-xs",children:Q},Q))})]})]})}),e.jsxs(ce,{className:"pt-4",children:[e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("span",{className:"text-xs font-medium text-slate-500 uppercase",children:["Subcategories (",(I.subcategories||[]).length,")"]})}),(I.subcategories||[]).length===0?e.jsx("p",{className:"text-sm text-slate-500 italic",children:"No subcategories yet"}):e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:I.subcategories.map(Q=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-50 rounded-lg text-sm group",children:[e.jsx("span",{className:"text-slate-700",children:Q}),e.jsxs(J,{variant:"ghost",size:"sm",onClick:()=>V(I,Q),className:"opacity-0 group-hover:opacity-100 transition-opacity h-7 text-xs",children:[e.jsx(As,{className:"w-3 h-3 mr-1"}),"Rename"]})]},Q))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(J,{variant:"outline",size:"sm",onClick:()=>k(I),className:"flex-1",children:[e.jsx(As,{className:"w-3 h-3 mr-1"}),"Edit"]}),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>E(I),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(os,{className:"w-3 h-3"})})]})]})]})})},I.id)),L.placeholder]})})})]}),e.jsx(Ct,{open:r,onOpenChange:a,children:e.jsxs(Nt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(kt,{children:e.jsx(Et,{children:s!=null&&s.id?"Edit Category":"Create New Category"})}),s&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"category-name",children:"Category Name *"}),e.jsx(he,{id:"category-name",value:s.name,onChange:L=>n({...s,name:L.target.value}),placeholder:"e.g., Theme, Collection, Level"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"category-description",children:"Description"}),e.jsx(Gt,{id:"category-description",value:s.description||"",onChange:L=>n({...s,description:L.target.value}),placeholder:"Optional description...",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Applies To Content Types"}),e.jsx("div",{className:"flex flex-wrap gap-3 p-3 bg-slate-50 rounded-lg",children:XSe.map(L=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:(s.applies_to_content_types||[]).includes(L.value),onChange:()=>B(L.value),className:"rounded border-slate-300"}),e.jsx("span",{className:"text-sm text-slate-700",children:L.label})]},L.value))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ee,{children:"Subcategories"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(he,{placeholder:"Add subcategory...",value:u,onChange:L=>d(L.target.value),onKeyPress:L=>{L.key==="Enter"&&(L.preventDefault(),F())}}),e.jsx(J,{type:"button",onClick:F,className:"bg-blue-600 hover:bg-blue-700",children:e.jsx(Pt,{className:"w-4 h-4"})})]}),(s.subcategories||[]).length>0&&e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto border border-slate-200 rounded-lg p-3",children:s.subcategories.map(L=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-50 rounded",children:[e.jsx("span",{className:"text-sm text-slate-700",children:L}),e.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>z(L),className:"text-red-600 hover:text-red-700 h-7",children:e.jsx(os,{className:"w-3 h-3"})})]},L))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"display-order",children:"Display Order"}),e.jsx(he,{id:"display-order",type:"number",value:s.display_order,onChange:L=>n({...s,display_order:parseInt(L.target.value)||0})})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>{a(!1),n(null),d("")},children:"Cancel"}),e.jsx(J,{onClick:R,disabled:A.isPending||P.isPending,className:"bg-blue-600 hover:bg-blue-700",children:s!=null&&s.id?"Update":"Create"})]})]})}),e.jsx(Ct,{open:i,onOpenChange:l,children:e.jsxs(Nt,{children:[e.jsx(kt,{children:e.jsx(Et,{children:"Delete Category"})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-50 rounded-lg",children:[e.jsx(vs,{className:"w-5 h-5 text-red-600 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-red-900 font-medium",children:['Are you sure you want to delete "',o==null?void 0:o.name,'"?']}),e.jsx("p",{className:"text-xs text-red-700 mt-1",children:"This will remove the category and may affect content that uses it."})]})]})}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>{l(!1),c(null)},children:"Cancel"}),e.jsx(J,{onClick:()=>o&&C.mutate(o.id),disabled:C.isPending,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),e.jsx(Ct,{open:p,onOpenChange:g,children:e.jsxs(Nt,{children:[e.jsx(kt,{children:e.jsx(Et,{children:"Rename Subcategory"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-900",children:"This will update the subcategory name across all resources and articles that use it."})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"rename-value",children:"New Name"}),e.jsx(he,{id:"rename-value",value:v,onChange:L=>y(L.target.value),placeholder:"Enter new subcategory name...",onKeyPress:L=>{L.key==="Enter"&&(L.preventDefault(),U())}})]}),m&&e.jsxs("div",{className:"text-sm text-slate-600",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Category:"})," ",m.category.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Current name:"})," ",m.subcategory]})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>{g(!1),h(null),y("")},children:"Cancel"}),e.jsx(J,{onClick:U,disabled:O.isPending,className:"bg-blue-600 hover:bg-blue-700",children:O.isPending?"Renaming...":"Rename"})]})]})})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"border-red-200",children:e.jsx(ce,{className:"p-8 text-center",children:e.jsx("p",{className:"text-red-600",children:"Administrator access required"})})})})}function Nz({isAdmin:t}){var hs;const[s,n]=b.useState(!1),[r,a]=b.useState(!1),[i,l]=b.useState(!1),[o,c]=b.useState(!1),[u,d]=b.useState(null),[m,h]=b.useState(null),[p,g]=b.useState(null),[v,y]=b.useState(""),[j,w]=b.useState(""),[N,_]=b.useState(!1),[T,A]=b.useState(""),[P,C]=b.useState([]),[O,M]=b.useState(!1),[k,E]=b.useState("add"),[R,F]=b.useState(""),[z,V]=b.useState(""),[U,B]=b.useState(1),[$]=b.useState(12),[L,I]=b.useState("name-asc"),[W,q]=b.useState({name:"",description:"",roles:[],is_active:!0}),[Z,Q]=b.useState({member_id:"",guest_id:"",group_role:"",expires_at:null}),[Y,K]=b.useState(""),ae=Yt(),{data:se,isLoading:de}=me({queryKey:["member-groups"],queryFn:()=>X.entities.MemberGroup.list("-updated_date"),initialData:[]}),{data:ue,isLoading:oe}=me({queryKey:["members-list"],queryFn:()=>X.entities.Member.list("first_name"),initialData:[]}),{data:pe,isLoading:je}=me({queryKey:["member-group-assignments"],queryFn:()=>X.entities.MemberGroupAssignment.list(),initialData:[]}),{data:we,isLoading:qe}=me({queryKey:["member-group-guests"],queryFn:()=>X.entities.MemberGroupGuest.list(),initialData:[]}),ze=Le({mutationFn:Ne=>X.entities.MemberGroup.create(Ne),onSuccess:()=>{ae.invalidateQueries({queryKey:["member-groups"]}),n(!1),De(),te.success("Group created successfully")},onError:Ne=>{te.error("Failed to create group: "+Ne.message)}}),Ee=Le({mutationFn:({id:Ne,data:ut})=>X.entities.MemberGroup.update(Ne,ut),onSuccess:()=>{ae.invalidateQueries({queryKey:["member-groups"]}),n(!1),De(),te.success("Group updated successfully")},onError:Ne=>{te.error("Failed to update group: "+Ne.message)}}),Ce=Le({mutationFn:async Ne=>{const ut=pe.filter(Te=>Te.group_id===Ne);for(const Te of ut)await X.entities.MemberGroupAssignment.delete(Te.id);await X.entities.MemberGroup.delete(Ne)},onSuccess:()=>{ae.invalidateQueries({queryKey:["member-groups"]}),ae.invalidateQueries({queryKey:["member-group-assignments"]}),l(!1),g(null),te.success("Group deleted successfully")},onError:Ne=>{te.error("Failed to delete group: "+Ne.message)}}),Ge=Le({mutationFn:Ne=>X.entities.MemberGroupAssignment.create(Ne),onSuccess:()=>{ae.invalidateQueries({queryKey:["member-group-assignments"]}),a(!1),Q({member_id:"",guest_id:"",group_role:"",expires_at:null}),te.success("Member assigned successfully")},onError:Ne=>{te.error("Failed to assign member: "+Ne.message)}}),Ye=Le({mutationFn:Ne=>X.entities.MemberGroupAssignment.delete(Ne),onSuccess:()=>{ae.invalidateQueries({queryKey:["member-group-assignments"]}),te.success("Member removed from group")},onError:Ne=>{te.error("Failed to remove member: "+Ne.message)}}),De=()=>{q({name:"",description:"",roles:[],is_active:!0}),d(null)},it=Ne=>{d(Ne),q({name:Ne.name,description:Ne.description||"",roles:Ne.roles||[],is_active:Ne.is_active}),n(!0)},Se=Ne=>{d(null),q({name:`${Ne.name} (Copy)`,description:Ne.description||"",roles:[...Ne.roles||[]],is_active:Ne.is_active}),n(!0)},at=()=>{if(!j.trim()){te.error("Please enter group names");return}const ut=j.split(`
`).filter(Te=>Te.trim()).map(Te=>({name:Te.trim(),description:"",roles:[],is_active:!0}));Promise.all(ut.map(Te=>X.entities.MemberGroup.create(Te))).then(()=>{ae.invalidateQueries({queryKey:["member-groups"]}),c(!1),w(""),te.success(`Created ${ut.length} groups successfully`)}).catch(Te=>{te.error("Failed to create groups: "+Te.message)})},_e=()=>{if(!W.name.trim()){te.error("Group name is required");return}u?Ee.mutate({id:u.id,data:W}):ze.mutate(W)},$e=()=>{if(v.trim()){if(W.roles.includes(v.trim())){te.error("Role already exists");return}q({...W,roles:[...W.roles,v.trim()]}),y("")}},nt=()=>{if(!T.trim()){te.error("Please enter role names");return}const ut=T.split(`
`).filter(yt=>yt.trim()).map(yt=>yt.trim()),Te=W.roles||[],Ze=ut.filter(yt=>!Te.includes(yt));if(Ze.length===0){te.error("All roles already exist");return}q({...W,roles:[...Te,...Ze]}),A(""),_(!1),te.success(`Added ${Ze.length} role(s)`)},dt=Ne=>{q({...W,roles:W.roles.filter(ut=>ut!==Ne)})},lt=()=>{if(!Z.member_id&&!Z.guest_id||!Z.group_role){te.error("Please select a member/guest and role");return}if(pe.find(Te=>Te.group_id!==m.id?!1:!!(Z.member_id&&Te.member_id===Z.member_id||Z.guest_id&&Te.guest_id===Z.guest_id))){te.error("This person is already assigned to this group");return}const ut={group_role:Z.group_role,group_id:m.id};Z.member_id?ut.member_id=Z.member_id:Z.guest_id&&(ut.guest_id=Z.guest_id),Z.expires_at&&(ut.expires_at=Mt(Z.expires_at,"yyyy-MM-dd")),Ge.mutate(ut)},Rt=Ne=>pe.filter(ut=>ut.group_id===Ne),es=Ne=>{const ut=ue.find(Te=>Te.id===Ne);return ut?`${ut.first_name} ${ut.last_name}`:"Unknown"},Bs=Ne=>{const ut=we.find(Te=>Te.id===Ne);return ut?`${ut.first_name} ${ut.last_name}`:"Unknown Guest"},Ss=Ne=>Ne.member_id?es(Ne.member_id):Ne.guest_id?Bs(Ne.guest_id):"Unknown",on=Ne=>!!Ne.guest_id,Jt=Be.useMemo(()=>{let Ne=se.filter(ut=>z===""||ut.name.toLowerCase().includes(z.toLowerCase())||ut.description&&ut.description.toLowerCase().includes(z.toLowerCase()));return Ne.sort((ut,Te)=>{switch(L){case"name-asc":return ut.name.localeCompare(Te.name);case"name-desc":return Te.name.localeCompare(ut.name);case"members-asc":{const Ze=Rt(ut.id).length,yt=Rt(Te.id).length;return Ze-yt}case"members-desc":{const Ze=Rt(ut.id).length;return Rt(Te.id).length-Ze}default:return 0}}),Ne},[se,z,L,pe]),fn=Math.ceil(Jt.length/$),Ds=Jt.slice((U-1)*$,U*$);Be.useEffect(()=>{B(1)},[z,L]);const jr=Ne=>{C(ut=>ut.includes(Ne)?ut.filter(Te=>Te!==Ne):[...ut,Ne])},Hn=()=>{P.length===se.length?C([]):C(se.map(Ne=>Ne.id))},Je=Le({mutationFn:async({groupIds:Ne,action:ut,role:Te})=>{const Ze=[];for(const yt of Ne){const as=se.find(Qs=>Qs.id===yt);if(!as)continue;let ds=[...as.roles||[]];ut==="add"?ds.includes(Te)||ds.push(Te):ut==="remove"&&(ds=ds.filter(Qs=>Qs!==Te)),Ze.push(X.entities.MemberGroup.update(yt,{roles:ds}))}await Promise.all(Ze)},onSuccess:()=>{ae.invalidateQueries({queryKey:["member-groups"]}),M(!1),F(""),C([]),te.success("Groups updated successfully")},onError:Ne=>{te.error("Failed to update groups: "+Ne.message)}}),bt=()=>{if(!R.trim()){te.error("Please enter a role name");return}if(P.length===0){te.error("Please select at least one group");return}Je.mutate({groupIds:P,action:k,role:R.trim()})};return t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Member Groups"}),e.jsx("p",{className:"text-slate-600",children:"Create and manage member groups with roles"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(J,{onClick:()=>c(!0),variant:"outline",children:[e.jsx(AE,{className:"w-4 h-4 mr-2"}),"Bulk Create"]}),e.jsxs(J,{onClick:()=>n(!0),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"New Group"]})]})]}),se.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"bg-blue-50 border-blue-200 mb-4",children:e.jsx(ce,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(J,{variant:"outline",size:"sm",onClick:Hn,className:"bg-white",children:[e.jsx(YG,{className:"w-4 h-4 mr-2"}),P.length===se.length?"Deselect All":"Select All"]}),P.length>0&&e.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[P.length," group",P.length!==1?"s":""," selected"]})]}),P.length>0&&e.jsxs(J,{onClick:()=>M(!0),className:"bg-blue-600 hover:bg-blue-700",size:"sm",children:[e.jsx(ws,{className:"w-4 h-4 mr-2"}),"Bulk Edit Roles"]})]})})}),e.jsx(le,{className:"mb-6",children:e.jsxs(ce,{className:"p-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx(he,{placeholder:"Search groups...",value:z,onChange:Ne=>V(Ne.target.value),className:"w-full"})}),e.jsx("div",{className:"w-full md:w-64",children:e.jsxs(Ke,{value:L,onValueChange:I,children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"name-asc",children:"Name (A-Z)"}),e.jsx(re,{value:"name-desc",children:"Name (Z-A)"}),e.jsx(re,{value:"members-desc",children:"Most Members"}),e.jsx(re,{value:"members-asc",children:"Least Members"})]})]})})]}),Jt.length>0&&e.jsxs("p",{className:"text-sm text-slate-600 mt-3",children:["Showing ",Jt.length," of ",se.length," group",se.length!==1?"s":""]})]})})]})]}),de||oe||je||qe?e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array(6).fill(0).map((Ne,ut)=>e.jsx(le,{className:"animate-pulse",children:e.jsxs(Fe,{children:[e.jsx("div",{className:"h-6 bg-slate-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded w-full"})]})},ut))}):se.length===0?e.jsx(le,{children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(ws,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No Groups Yet"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"Create your first member group to get started"}),e.jsxs(J,{onClick:()=>n(!0),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Create First Group"]})]})}):Jt.length===0?e.jsx(le,{children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(ws,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No Groups Found"}),e.jsx("p",{className:"text-slate-600 mb-4",children:"No groups match your search criteria"}),e.jsx(J,{variant:"outline",onClick:()=>V(""),children:"Clear Search"})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:Ds.map(Ne=>{var Ze;const ut=Rt(Ne.id),Te=P.includes(Ne.id);return e.jsxs(le,{className:`hover:shadow-lg transition-shadow ${Te?"ring-2 ring-blue-500":""}`,children:[e.jsxs(Fe,{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("input",{type:"checkbox",checked:Te,onChange:()=>jr(Ne.id),className:"w-4 h-4 cursor-pointer"}),e.jsxs("div",{className:"flex items-start justify-between flex-1",children:[e.jsx(Ue,{className:"text-lg",children:Ne.name}),!Ne.is_active&&e.jsx(ye,{className:"bg-slate-200 text-slate-700",children:"Inactive"})]})]}),Ne.description&&e.jsx("p",{className:"text-sm text-slate-600",children:Ne.description})]}),e.jsxs(ce,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Roles:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:((Ze=Ne.roles)==null?void 0:Ze.length)>0?Ne.roles.map((yt,as)=>e.jsx(ye,{className:"bg-blue-100 text-blue-700 text-xs",children:yt},as)):e.jsx("span",{className:"text-xs text-slate-500",children:"No roles defined"})})]}),e.jsx("div",{children:e.jsxs("span",{className:"text-sm font-medium text-slate-700",children:["Members: ",ut.length]})}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t border-slate-200",children:[e.jsxs(J,{variant:"outline",size:"sm",onClick:()=>{h(Ne),a(!0)},className:"flex-1",children:[e.jsx(Zc,{className:"w-3 h-3 mr-1"}),"Assign"]}),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>Se(Ne),title:"Duplicate",children:e.jsx(Va,{className:"w-3 h-3"})}),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>it(Ne),children:e.jsx(As,{className:"w-3 h-3"})}),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>{g(Ne),l(!0)},className:"text-red-600 hover:text-red-700",children:e.jsx(os,{className:"w-3 h-3"})})]}),ut.length>0&&e.jsx("div",{className:"pt-2 border-t border-slate-200",children:e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:ut.map(yt=>e.jsxs("div",{className:"flex items-center justify-between text-xs bg-slate-50 p-2 rounded",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-slate-900 flex items-center gap-1",children:[Ss(yt),on(yt)&&e.jsx(ye,{className:"bg-purple-100 text-purple-700 text-[10px] px-1",children:"Guest"})]}),e.jsx("div",{className:"text-slate-500",children:yt.group_role}),yt.expires_at&&e.jsxs("div",{className:"text-slate-400 flex items-center gap-1",children:[e.jsx(Ns,{className:"w-3 h-3"}),"Expires: ",Mt(new Date(yt.expires_at),"dd MMM yyyy")]})]}),e.jsx(J,{variant:"ghost",size:"sm",onClick:()=>Ye.mutate(yt.id),className:"h-6 w-6 p-0 text-red-600 hover:text-red-700",children:e.jsx(_s,{className:"w-3 h-3"})})]},yt.id))})})]})]},Ne.id)})}),fn>1&&e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{variant:"outline",size:"sm",onClick:()=>B(Ne=>Math.max(1,Ne-1)),disabled:U===1,children:"Previous"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:fn},(Ne,ut)=>ut+1).map(Ne=>e.jsx(J,{variant:U===Ne?"default":"outline",size:"sm",onClick:()=>B(Ne),className:U===Ne?"bg-blue-600 hover:bg-blue-700":"",children:Ne},Ne))}),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>B(Ne=>Math.min(fn,Ne+1)),disabled:U===fn,children:"Next"})]})})]}),e.jsx(Ct,{open:s,onOpenChange:n,children:e.jsxs(Nt,{className:"max-w-lg",children:[e.jsx(kt,{children:e.jsx(Et,{children:u?"Edit Group":"Create New Group"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"name",children:"Group Name *"}),e.jsx(he,{id:"name",value:W.name,onChange:Ne=>q({...W,name:Ne.target.value}),placeholder:"e.g., Board of Directors"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"description",children:"Description"}),e.jsx(Gt,{id:"description",value:W.description,onChange:Ne=>q({...W,description:Ne.target.value}),placeholder:"Description of this group...",rows:3})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(ee,{children:"Roles within Group"}),e.jsxs(J,{variant:"outline",size:"sm",onClick:()=>_(!N),type:"button",children:[e.jsx(AE,{className:"w-3 h-3 mr-1"}),"Bulk Add"]})]}),N?e.jsxs("div",{className:"space-y-2 mb-2 p-3 bg-slate-50 rounded-lg",children:[e.jsx(Gt,{value:T,onChange:Ne=>A(Ne.target.value),placeholder:`Chair
Vice Chair
Secretary
Treasurer
Member`,rows:5}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(J,{onClick:nt,type:"button",size:"sm",className:"flex-1",children:"Add Roles"}),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>{_(!1),A("")},type:"button",children:"Cancel"})]})]}):e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(he,{value:v,onChange:Ne=>y(Ne.target.value),onKeyPress:Ne=>Ne.key==="Enter"&&$e(),placeholder:"e.g., Chair, Vice Chair, Member"}),e.jsx(J,{onClick:$e,type:"button",children:e.jsx(Pt,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:W.roles.map((Ne,ut)=>e.jsxs(ye,{className:"bg-blue-100 text-blue-700",children:[Ne,e.jsx("button",{onClick:()=>dt(Ne),className:"ml-2 hover:text-red-600",children:e.jsx(_s,{className:"w-3 h-3"})})]},ut))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:W.is_active,onChange:Ne=>q({...W,is_active:Ne.target.checked}),className:"w-4 h-4"}),e.jsx(ee,{htmlFor:"is_active",className:"cursor-pointer",children:"Active"})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>{n(!1),De()},children:"Cancel"}),e.jsxs(J,{onClick:_e,disabled:ze.isPending||Ee.isPending,className:"bg-blue-600 hover:bg-blue-700",children:[u?"Update":"Create"," Group"]})]})]})}),e.jsx(Ct,{open:r,onOpenChange:Ne=>{a(Ne),Ne||K("")},children:e.jsxs(Nt,{className:"max-w-md",children:[e.jsx(kt,{children:e.jsxs(Et,{children:["Assign Member to ",m==null?void 0:m.name]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"member-search",children:"Search & Select Member or Guest *"}),e.jsx(he,{id:"member-search",value:Y,onChange:Ne=>K(Ne.target.value),placeholder:"Search by name or email...",className:"mb-2"}),e.jsxs("div",{className:"border border-slate-200 rounded-md max-h-48 overflow-y-auto",children:[ue.filter(Ne=>{var Te,Ze,yt;const ut=Y.toLowerCase();return((Te=Ne.first_name)==null?void 0:Te.toLowerCase().includes(ut))||((Ze=Ne.last_name)==null?void 0:Ze.toLowerCase().includes(ut))||((yt=Ne.email)==null?void 0:yt.toLowerCase().includes(ut))}).map(Ne=>e.jsxs("button",{type:"button",onClick:()=>Q({...Z,member_id:Ne.id,guest_id:""}),className:`w-full text-left px-3 py-2 hover:bg-slate-50 transition-colors border-b border-slate-100 last:border-b-0 ${Z.member_id===Ne.id?"bg-blue-50 border-l-4 border-l-blue-600":""}`,children:[e.jsxs("div",{className:"font-medium text-slate-900",children:[Ne.first_name," ",Ne.last_name]}),e.jsx("div",{className:"text-xs text-slate-500",children:Ne.email})]},`member-${Ne.id}`)),we.filter(Ne=>{var Te,Ze,yt,as;if(Ne.is_active===!1)return!1;const ut=Y.toLowerCase();return((Te=Ne.first_name)==null?void 0:Te.toLowerCase().includes(ut))||((Ze=Ne.last_name)==null?void 0:Ze.toLowerCase().includes(ut))||((yt=Ne.email)==null?void 0:yt.toLowerCase().includes(ut))||((as=Ne.organisation)==null?void 0:as.toLowerCase().includes(ut))}).map(Ne=>e.jsxs("button",{type:"button",onClick:()=>Q({...Z,guest_id:Ne.id,member_id:""}),className:`w-full text-left px-3 py-2 hover:bg-slate-50 transition-colors border-b border-slate-100 last:border-b-0 ${Z.guest_id===Ne.id?"bg-purple-50 border-l-4 border-l-purple-600":""}`,children:[e.jsxs("div",{className:"font-medium text-slate-900 flex items-center gap-2",children:[Ne.first_name," ",Ne.last_name,e.jsx(ye,{className:"bg-purple-100 text-purple-700 text-[10px]",children:"Guest"})]}),e.jsx("div",{className:"text-xs text-slate-500",children:Ne.email}),Ne.organisation&&e.jsx("div",{className:"text-xs text-slate-400",children:Ne.organisation})]},`guest-${Ne.id}`)),ue.filter(Ne=>{var Te,Ze,yt;const ut=Y.toLowerCase();return((Te=Ne.first_name)==null?void 0:Te.toLowerCase().includes(ut))||((Ze=Ne.last_name)==null?void 0:Ze.toLowerCase().includes(ut))||((yt=Ne.email)==null?void 0:yt.toLowerCase().includes(ut))}).length===0&&we.filter(Ne=>{var Te,Ze,yt,as;if(Ne.is_active===!1)return!1;const ut=Y.toLowerCase();return((Te=Ne.first_name)==null?void 0:Te.toLowerCase().includes(ut))||((Ze=Ne.last_name)==null?void 0:Ze.toLowerCase().includes(ut))||((yt=Ne.email)==null?void 0:yt.toLowerCase().includes(ut))||((as=Ne.organisation)==null?void 0:as.toLowerCase().includes(ut))}).length===0&&e.jsx("div",{className:"px-3 py-4 text-center text-sm text-slate-500",children:"No members or guests found"})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"role",children:"Select Role *"}),e.jsxs(Ke,{value:Z.group_role,onValueChange:Ne=>Q({...Z,group_role:Ne}),children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:"Choose a role..."})}),e.jsx(We,{children:(hs=m==null?void 0:m.roles)==null?void 0:hs.map((Ne,ut)=>e.jsx(re,{value:Ne,children:Ne},ut))})]})]}),e.jsxs("div",{children:[e.jsx(ee,{children:"Expiry Date (Optional)"}),e.jsxs(lB,{children:[e.jsx(oB,{asChild:!0,children:e.jsxs(J,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[e.jsx(Ns,{className:"mr-2 h-4 w-4"}),Z.expires_at?Mt(Z.expires_at,"PPP"):"No expiry date"]})}),e.jsxs(hS,{className:"w-auto p-0",align:"start",children:[e.jsx(bS,{mode:"single",selected:Z.expires_at,onSelect:Ne=>Q({...Z,expires_at:Ne}),initialFocus:!0}),Z.expires_at&&e.jsx("div",{className:"p-2 border-t",children:e.jsx(J,{variant:"ghost",size:"sm",className:"w-full",onClick:()=>Q({...Z,expires_at:null}),children:"Clear date"})})]})]})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e.jsx(J,{onClick:lt,disabled:Ge.isPending,className:"bg-blue-600 hover:bg-blue-700",children:"Assign Member"})]})]})}),e.jsx(Ct,{open:o,onOpenChange:c,children:e.jsxs(Nt,{className:"max-w-md",children:[e.jsx(kt,{children:e.jsx(Et,{children:"Bulk Create Groups"})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"bulk-text",children:"Group Names (one per line)"}),e.jsx(Gt,{id:"bulk-text",value:j,onChange:Ne=>w(Ne.target.value),placeholder:`Board of Directors
Finance Committee
Audit Committee
Nominations Committee`,rows:10}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Enter one group name per line. Roles can be added later."})]})}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsx(J,{onClick:at,className:"bg-blue-600 hover:bg-blue-700",children:"Create Groups"})]})]})}),e.jsx(Ct,{open:O,onOpenChange:M,children:e.jsxs(Nt,{className:"max-w-md",children:[e.jsx(kt,{children:e.jsxs(Et,{children:["Bulk Edit Roles for ",P.length," Group",P.length!==1?"s":""]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ee,{children:"Action"}),e.jsxs(Ke,{value:k,onValueChange:E,children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"add",children:"Add Role"}),e.jsx(re,{value:"remove",children:"Remove Role"})]})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"bulk-role",children:"Role Name *"}),e.jsx(he,{id:"bulk-role",value:R,onChange:Ne=>F(Ne.target.value),placeholder:"e.g., Chair, Member, etc."}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:k==="add"?"This role will be added to all selected groups (if not already present)":"This role will be removed from all selected groups (if present)"})]}),e.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-slate-700 mb-2",children:"Selected Groups:"}),e.jsx("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:P.map(Ne=>{const ut=se.find(Te=>Te.id===Ne);return e.jsxs("div",{className:"text-xs text-slate-600 flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsx("span",{children:ut==null?void 0:ut.name})]},Ne)})})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>M(!1),children:"Cancel"}),e.jsxs(J,{onClick:bt,disabled:Je.isPending,className:"bg-blue-600 hover:bg-blue-700",children:[k==="add"?"Add":"Remove"," Role"]})]})]})}),e.jsx(Ct,{open:i,onOpenChange:l,children:e.jsxs(Nt,{className:"max-w-md",children:[e.jsx(kt,{children:e.jsx(Et,{children:"Delete Group"})}),e.jsxs("p",{className:"text-slate-600",children:["Are you sure you want to delete ",e.jsx("strong",{children:p==null?void 0:p.name}),"? This will also remove all member assignments to this group. This action cannot be undone."]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(J,{onClick:()=>Ce.mutate(p.id),disabled:Ce.isPending,className:"bg-red-600 hover:bg-red-700",children:"Delete Group"})]})]})})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-8 flex items-center justify-center",children:e.jsx(le,{className:"max-w-md",children:e.jsx(ce,{className:"p-12 text-center",children:e.jsx("p",{className:"text-slate-600",children:"You don't have permission to access this page."})})})})}function _z({isAdmin:t,isFeatureExcluded:s}){const[n,r]=b.useState(""),a=Yt(),{data:i,isLoading:l}=me({queryKey:["article-display-name-setting"],queryFn:async()=>(await X.entities.SystemSettings.list()).find(m=>m.setting_key==="article_display_name"),staleTime:0});Be.useEffect(()=>{r(i&&i.setting_value||"Articles")},[i]);const o=Le({mutationFn:async u=>{i?await X.entities.SystemSettings.update(i.id,{setting_value:u}):await X.entities.SystemSettings.create({setting_key:"article_display_name",setting_value:u,setting_type:"text",description:"Custom display name for articles section"})},onSuccess:()=>{a.invalidateQueries({queryKey:["article-display-name-setting"]}),te.success("Display name updated successfully")},onError:u=>{te.error("Failed to update setting: "+u.message)}}),c=()=>{if(!n.trim()){te.error("Display name cannot be empty");return}o.mutate(n.trim())};return t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Articles Settings"}),e.jsx("p",{className:"text-slate-600",children:"Configure how articles appear throughout the portal"})]}),l?e.jsx(le,{children:e.jsx(ce,{className:"p-8",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 border-2 border-slate-300 border-t-blue-600 rounded-full animate-spin"})})})}):e.jsxs(le,{children:[e.jsx(Fe,{children:e.jsxs(Ue,{className:"flex items-center gap-2",children:[e.jsx(Qa,{className:"w-5 h-5"}),"Display Name"]})}),e.jsxs(ce,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"display-name",children:"Section Display Name"}),e.jsx(he,{id:"display-name",value:n,onChange:u=>r(u.target.value),placeholder:"e.g., Articles, Blog, Letters, Insights",className:"max-w-md"}),e.jsx("p",{className:"text-sm text-slate-500",children:'Customize how this section is labeled throughout the portal. For example, change "Articles" to "Blog", "Letters", or anything else.'})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Preview"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("li",{children:[' Page title: "',n||"Articles",' & Insights"']}),e.jsxs("li",{children:[' Management page: "All ',n||"Articles",'"']}),e.jsxs("li",{children:[' Buttons: "New ',(n==null?void 0:n.slice(0,-1))||"Article",'"']})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(J,{onClick:c,disabled:o.isPending||!n.trim(),className:"bg-blue-600 hover:bg-blue-700",children:o.isPending?"Saving...":"Save Changes"}),e.jsx(J,{variant:"outline",onClick:()=>r((i==null?void 0:i.setting_value)||"Articles"),disabled:o.isPending,children:"Reset"})]})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-8 flex items-center justify-center",children:e.jsx(le,{className:"max-w-md",children:e.jsx(ce,{className:"p-12 text-center",children:e.jsx("p",{className:"text-slate-600",children:"You don't have permission to access this page."})})})})}function Sz({isAdmin:t}){const[s,n]=b.useState(!1),[r,a]=b.useState(null),[i,l]=b.useState(!1),[o,c]=b.useState(null),[u,d]=b.useState(!1),[m,h]=b.useState({full_name:"",email:"",organization:"",job_title:"",biography:"",profile_photo_url:"",is_active:!0}),p=Yt(),{data:g=[],isLoading:v}=me({queryKey:["guest-writers"],queryFn:async()=>await X.entities.GuestWriter.list("-created_date")}),y=Le({mutationFn:async C=>r?await X.entities.GuestWriter.update(r.id,C):await X.entities.GuestWriter.create(C),onSuccess:()=>{p.invalidateQueries({queryKey:["guest-writers"]}),te.success(r?"Guest writer updated":"Guest writer created"),N()},onError:C=>{te.error("Failed to save guest writer: "+C.message)}}),j=Le({mutationFn:async C=>{await X.entities.GuestWriter.delete(C)},onSuccess:()=>{p.invalidateQueries({queryKey:["guest-writers"]}),te.success("Guest writer deleted"),l(!1),c(null)},onError:C=>{te.error("Failed to delete guest writer: "+C.message)}}),w=(C=null)=>{C?(a(C),h({full_name:C.full_name||"",email:C.email||"",organization:C.organization||"",job_title:C.job_title||"",biography:C.biography||"",profile_photo_url:C.profile_photo_url||"",is_active:C.is_active!==!1})):(a(null),h({full_name:"",email:"",organization:"",job_title:"",biography:"",profile_photo_url:"",is_active:!0})),n(!0)},N=()=>{n(!1),a(null),h({full_name:"",email:"",organization:"",job_title:"",biography:"",profile_photo_url:"",is_active:!0})},_=()=>{if(!m.full_name.trim()||!m.email.trim()){te.error("Name and email are required");return}y.mutate(m)},T=C=>{c(C),l(!0)},A=()=>{o&&j.mutate(o.id)},P=async C=>{var k;const O=(k=C.target.files)==null?void 0:k[0];if(!O)return;if(!O.type.startsWith("image/")){te.error("Please upload an image file");return}if(O.size>5*1024*1024){te.error("Image must be less than 5MB");return}d(!0);const M=await X.integrations.Core.UploadFile({file:O});h({...m,profile_photo_url:M.file_url}),d(!1),te.success("Photo uploaded")};return t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Guest Writers"}),e.jsx("p",{className:"text-slate-600",children:"Manage guest writer profiles for article attribution"})]}),e.jsxs(J,{onClick:()=>w(),className:"bg-blue-600 hover:bg-blue-700 gap-2",children:[e.jsx(Pt,{className:"w-4 h-4"}),"Add Guest Writer"]})]}),v?e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array(6).fill(0).map((C,O)=>e.jsx(le,{className:"animate-pulse border-slate-200",children:e.jsxs(ce,{className:"p-6",children:[e.jsx("div",{className:"h-20 bg-slate-200 rounded mb-4"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-slate-200 rounded w-full"})]})},O))}):g.length===0?e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(Xs,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No guest writers yet"}),e.jsx("p",{className:"text-slate-600 mb-4",children:"Create guest writer profiles to attribute articles to external contributors"}),e.jsxs(J,{onClick:()=>w(),className:"bg-blue-600 hover:bg-blue-700 gap-2",children:[e.jsx(Pt,{className:"w-4 h-4"}),"Add First Guest Writer"]})]})}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(C=>e.jsx(le,{className:"border-slate-200 shadow-sm hover:shadow-md transition-shadow",children:e.jsxs(ce,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[C.profile_photo_url?e.jsx("img",{src:C.profile_photo_url,alt:C.full_name,className:"w-16 h-16 rounded-full object-cover border-2 border-slate-200"}):e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:e.jsx(Xs,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-slate-900 mb-1",children:C.full_name}),!C.is_active&&e.jsx("span",{className:"text-xs bg-slate-200 text-slate-600 px-2 py-0.5 rounded-full",children:"Inactive"})]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[C.job_title&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(En,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:C.job_title})]}),C.organization&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(Zo,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:C.organization})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(Ms,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:C.email})]})]}),C.biography&&e.jsx("p",{className:"text-sm text-slate-600 line-clamp-3 mb-4",children:C.biography}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t border-slate-200",children:[e.jsxs(J,{variant:"outline",size:"sm",onClick:()=>w(C),className:"flex-1 gap-2",children:[e.jsx(gi,{className:"w-4 h-4"}),"Edit"]}),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>T(C),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(os,{className:"w-4 h-4"})})]})]})},C.id))}),e.jsx(Ct,{open:s,onOpenChange:n,children:e.jsxs(Nt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(kt,{children:e.jsx(Et,{children:r?"Edit Guest Writer":"Add Guest Writer"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Profile Photo"}),e.jsxs("div",{className:"flex items-center gap-4",children:[m.profile_photo_url?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:m.profile_photo_url,alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-2 border-slate-200"}),e.jsx("button",{type:"button",onClick:()=>h({...m,profile_photo_url:""}),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600",children:e.jsx(_s,{className:"w-4 h-4"})})]}):e.jsx("div",{className:"w-24 h-24 rounded-full bg-slate-200 flex items-center justify-center",children:e.jsx(Xs,{className:"w-12 h-12 text-slate-400"})}),e.jsxs("div",{children:[e.jsx("input",{type:"file",id:"photo-upload",accept:"image/*",onChange:P,className:"hidden",disabled:u}),e.jsx(ee,{htmlFor:"photo-upload",children:e.jsx(J,{type:"button",variant:"outline",size:"sm",disabled:u,className:"gap-2 cursor-pointer",onClick:()=>document.getElementById("photo-upload").click(),children:u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-slate-400 border-t-transparent rounded-full animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Gs,{className:"w-4 h-4"}),"Upload Photo"]})})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"full_name",children:"Full Name *"}),e.jsx(he,{id:"full_name",value:m.full_name,onChange:C=>h({...m,full_name:C.target.value}),placeholder:"John Smith"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"email",children:"Email *"}),e.jsx(he,{id:"email",type:"email",value:m.email,onChange:C=>h({...m,email:C.target.value}),placeholder:"john.smith@example.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"job_title",children:"Job Title"}),e.jsx(he,{id:"job_title",value:m.job_title,onChange:C=>h({...m,job_title:C.target.value}),placeholder:"Senior Consultant"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"organization",children:"Organization"}),e.jsx(he,{id:"organization",value:m.organization,onChange:C=>h({...m,organization:C.target.value}),placeholder:"Example University"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"biography",children:"Biography"}),e.jsx(Gt,{id:"biography",value:m.biography,onChange:C=>h({...m,biography:C.target.value}),placeholder:"Professional background and expertise...",rows:4})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:m.is_active,onChange:C=>h({...m,is_active:C.target.checked}),className:"w-4 h-4"}),e.jsx(ee,{htmlFor:"is_active",className:"cursor-pointer",children:"Active (available for article attribution)"})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:N,children:"Cancel"}),e.jsx(J,{onClick:_,disabled:y.isPending,className:"bg-blue-600 hover:bg-blue-700",children:y.isPending?"Saving...":"Save"})]})]})}),e.jsx(Ml,{open:i,onOpenChange:l,children:e.jsxs(Vi,{children:[e.jsxs(Wi,{children:[e.jsx(Ki,{children:"Delete Guest Writer"}),e.jsxs(Gi,{children:["Are you sure you want to delete ",o==null?void 0:o.full_name,"? This action cannot be undone. Articles attributed to this guest writer will need to be reassigned."]})]}),e.jsxs(Hi,{children:[e.jsx(Qi,{children:"Cancel"}),e.jsx(Yi,{onClick:A,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx(le,{className:"border-amber-200 bg-amber-50",children:e.jsx(ce,{className:"p-8 text-center",children:e.jsx("p",{className:"text-amber-800",children:"You do not have permission to access this page."})})})})})}function Cz({isAdmin:t}){const s=Yt(),[n,r]=b.useState(!0),[a,i]=b.useState(!0),[l,o]=b.useState(!0),[c,u]=b.useState([]),[d,m]=b.useState(""),{data:h=[]}=me({queryKey:["all-organizations"],queryFn:()=>X.entities.Organization.list("name")}),{data:p}=me({queryKey:["organisation-directory-settings"],queryFn:async()=>{const j=await X.entities.SystemSettings.list(),w=j.find(A=>A.setting_key==="org_directory_show_logo"),N=j.find(A=>A.setting_key==="org_directory_show_domains"),_=j.find(A=>A.setting_key==="org_directory_show_member_count"),T=j.find(A=>A.setting_key==="org_directory_excluded_orgs");return{logo:w,domains:N,memberCount:_,excludedOrgs:T}},refetchOnMount:!0});b.useEffect(()=>{if(p!=null&&p.logo&&r(p.logo.setting_value==="true"),p!=null&&p.domains&&i(p.domains.setting_value==="true"),p!=null&&p.memberCount&&o(p.memberCount.setting_value==="true"),p!=null&&p.excludedOrgs)try{const j=JSON.parse(p.excludedOrgs.setting_value);u(Array.isArray(j)?j:[])}catch{u([])}},[p]);const g=Le({mutationFn:async()=>{p!=null&&p.logo?await X.entities.SystemSettings.update(p.logo.id,{setting_value:n.toString()}):await X.entities.SystemSettings.create({setting_key:"org_directory_show_logo",setting_value:n.toString(),description:"Show organization logo on directory cards"}),p!=null&&p.domains?await X.entities.SystemSettings.update(p.domains.id,{setting_value:a.toString()}):await X.entities.SystemSettings.create({setting_key:"org_directory_show_domains",setting_value:a.toString(),description:"Show organization domains on directory cards"}),p!=null&&p.memberCount?await X.entities.SystemSettings.update(p.memberCount.id,{setting_value:l.toString()}):await X.entities.SystemSettings.create({setting_key:"org_directory_show_member_count",setting_value:l.toString(),description:"Show member count on directory cards"}),p!=null&&p.excludedOrgs?await X.entities.SystemSettings.update(p.excludedOrgs.id,{setting_value:JSON.stringify(c)}):await X.entities.SystemSettings.create({setting_key:"org_directory_excluded_orgs",setting_value:JSON.stringify(c),description:"List of organization IDs excluded from the directory"})},onSuccess:()=>{s.invalidateQueries({queryKey:["organisation-directory-settings"]}),te.success("Settings saved successfully")},onError:j=>{te.error("Failed to save settings: "+j.message)}}),v=j=>{u(w=>w.includes(j)?w.filter(N=>N!==j):[...w,j])},y=h.filter(j=>j.name.toLowerCase().includes(d.toLowerCase()));return t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-slate-900 mb-2 flex items-center gap-3",children:[e.jsx(Qa,{className:"w-8 h-8"}),"Organisation Directory Settings"]}),e.jsx("p",{className:"text-slate-600",children:"Configure what information is displayed on organisation directory cards"})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm",children:[e.jsx(Fe,{children:e.jsx(Ue,{children:"Display Settings"})}),e.jsxs(ce,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"showLogo",className:"text-base font-medium cursor-pointer",children:"Show Organization Logo"}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Display organization logos on directory cards"})]}),e.jsx("input",{type:"checkbox",id:"showLogo",checked:n,onChange:j=>r(j.target.checked),className:"w-5 h-5 cursor-pointer"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"showDomains",className:"text-base font-medium cursor-pointer",children:"Show Domains"}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Display organization domains on directory cards"})]}),e.jsx("input",{type:"checkbox",id:"showDomains",checked:a,onChange:j=>i(j.target.checked),className:"w-5 h-5 cursor-pointer"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"showMemberCount",className:"text-base font-medium cursor-pointer",children:"Show Member Count"}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Display the number of members from each organization"})]}),e.jsx("input",{type:"checkbox",id:"showMemberCount",checked:l,onChange:j=>o(j.target.checked),className:"w-5 h-5 cursor-pointer"})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsxs(J,{onClick:()=>g.mutate(),disabled:g.isPending,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(un,{className:"w-4 h-4 mr-2"}),g.isPending?"Saving...":"Save Settings"]})})]})]}),e.jsxs(le,{className:"border-slate-200 shadow-sm mt-6",children:[e.jsxs(Fe,{children:[e.jsx(Ue,{className:"text-2xl font-semibold leading-none tracking-tight",children:"Exclude Organisations"}),e.jsx("p",{className:"text-sm text-slate-600 mt-2",children:"Hide specific organisations from appearing in the directory"})]}),e.jsxs(ce,{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx(he,{placeholder:"Search organisations...",value:d,onChange:j=>m(j.target.value),className:"pl-10"})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2 border border-slate-200 rounded-lg p-4",children:y.length===0?e.jsx("p",{className:"text-center text-slate-500 py-4",children:"No organizations found"}):y.map(j=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Zo,{className:"w-5 h-5 text-slate-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900",children:j.name}),j.domain&&e.jsx("p",{className:"text-xs text-slate-500",children:j.domain})]})]}),e.jsx("input",{type:"checkbox",checked:!c.includes(j.id),onChange:()=>v(j.id),className:"w-5 h-5 cursor-pointer",title:c.includes(j.id)?"Click to include":"Click to exclude"})]},j.id))}),c.length>0&&e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[c.length," organization",c.length!==1?"s":""," excluded from directory"]})}),e.jsx("div",{className:"pt-4 border-t",children:e.jsxs(J,{onClick:()=>g.mutate(),disabled:g.isPending,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(un,{className:"w-4 h-4 mr-2"}),g.isPending?"Saving...":"Save Settings"]})})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx(le,{className:"border-amber-200 bg-amber-50",children:e.jsx(ce,{className:"p-8 text-center",children:e.jsx("p",{className:"text-amber-800",children:"You do not have permission to access this page."})})})})})}function kz({isAdmin:t,isFeatureExcluded:s}){const[n,r]=b.useState({}),[a,i]=b.useState({});if(b.useEffect(()=>{"fonts"in document&&(document.fonts.load('500 16px "Degular Medium"').then(()=>{const o=document.fonts.check('500 16px "Degular Medium"');r({degular:o})}).catch(o=>{r({degular:!1,error:o.message})}),document.fonts.addEventListener("loadingdone",o=>{const c=Array.from(document.fonts.values()),u=c.find(d=>d.family==="Degular Medium");i({totalFonts:c.length,degularFound:!!u,degularStatus:u==null?void 0:u.status,allFontFamilies:c.map(d=>d.family)})})),fetch("https://teeone.pythonanywhere.com/font-assets/Degular-Medium.woff",{mode:"cors"}).then(o=>{i(c=>({...c,fetchStatus:o.ok?"success":"failed",fetchStatusCode:o.status,corsHeaders:o.headers.get("Access-Control-Allow-Origin")}))}).catch(o=>{i(c=>({...c,fetchStatus:"error",fetchError:o.message}))})},[]),!t||s!=null&&s("page_InstalledFonts"))return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"border-slate-200",children:e.jsxs(ce,{className:"p-8 text-center",children:[e.jsx(Og,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-slate-600",children:"You don't have permission to access this page."})]})})});const l=[{name:"Poppins",family:"Poppins, sans-serif",source:"Google Fonts",weights:["400 (Regular)","600 (Semibold)"],usage:"Body text, general UI elements"},{name:"Degular Medium",family:"'Degular Medium', 'Poppins', sans-serif",source:"https://teeone.pythonanywhere.com/font-assets",weights:["500 (Medium)"],usage:"H1 headers"}];return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Og,{className:"w-8 h-8 text-blue-600"}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900",children:"Installed Fonts"})]}),e.jsx("p",{className:"text-slate-600",children:"View all fonts currently installed and available in the application"})]}),e.jsxs(le,{className:"border-amber-200 bg-amber-50 mb-6",children:[e.jsx(Fe,{children:e.jsxs(Ue,{className:"flex items-center gap-2 text-lg",children:[e.jsx(vs,{className:"w-5 h-5 text-amber-600"}),"Font Loading Debug Information"]})}),e.jsxs(ce,{className:"space-y-3",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Font API Check"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[n.degular?e.jsx(Vf,{className:"w-4 h-4 text-green-600"}):e.jsx(vs,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{children:"Degular Medium: "}),e.jsx(ye,{variant:n.degular?"default":"destructive",children:n.degular?"Loaded":"Not Loaded"})]}),n.error&&e.jsxs("div",{className:"text-xs text-red-600 mt-1",children:["Error: ",n.error]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Network Fetch Test"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:["Status: ",e.jsx(ye,{variant:a.fetchStatus==="success"?"default":"destructive",children:a.fetchStatus||"Testing..."})]}),a.fetchStatusCode&&e.jsxs("div",{children:["HTTP Code: ",a.fetchStatusCode]}),a.corsHeaders&&e.jsxs("div",{children:["CORS Header: ",a.corsHeaders]}),a.fetchError&&e.jsxs("div",{className:"text-xs text-red-600",children:["Error: ",a.fetchError]})]})]})]}),a.allFontFamilies&&e.jsxs("div",{className:"pt-3 border-t border-amber-200",children:[e.jsxs("h4",{className:"font-semibold text-sm mb-2",children:["All Loaded Font Families (",a.totalFonts,"):"]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:a.allFontFamilies.map((o,c)=>e.jsx(ye,{variant:"outline",className:"text-xs",children:o},c))})]}),e.jsxs("div",{className:"pt-3 border-t border-amber-200",children:[e.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Browser Console Check:"}),e.jsx("p",{className:"text-xs text-slate-600",children:`Open your browser's DevTools (F12)  Network tab  Filter by "font" to see if the font file is loading and check for CORS errors.`})]})]})]}),e.jsx("div",{className:"space-y-6",children:l.map((o,c)=>e.jsxs(le,{className:"border-slate-200",children:[e.jsx(Fe,{children:e.jsxs(Ue,{className:"flex items-center justify-between",children:[e.jsx("span",{style:{fontFamily:o.family},children:o.name}),e.jsx("span",{className:"text-sm font-normal text-slate-500",children:o.source})]})}),e.jsxs(ce,{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-700 mb-2",children:"Font Details"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Family: "}),e.jsx("code",{className:"text-xs bg-slate-100 px-2 py-1 rounded",children:o.family})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Weights: "}),e.jsx("span",{className:"text-slate-700",children:o.weights.join(", ")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Usage: "}),e.jsx("span",{className:"text-slate-700",children:o.usage})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-700 mb-2",children:"Preview"}),e.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4 space-y-2",children:[e.jsx("p",{style:{fontFamily:o.family,fontSize:"24px"},children:"The quick brown fox jumps over the lazy dog"}),e.jsx("p",{style:{fontFamily:o.family,fontSize:"16px"},children:"ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),e.jsx("p",{style:{fontFamily:o.family,fontSize:"16px"},children:"abcdefghijklmnopqrstuvwxyz"}),e.jsx("p",{style:{fontFamily:o.family,fontSize:"16px"},children:"0123456789"})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-slate-200",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-700 mb-2",children:"Size Examples"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{style:{fontFamily:o.family,fontSize:"32px"},children:"32px - Large Heading"}),e.jsx("p",{style:{fontFamily:o.family,fontSize:"24px"},children:"24px - Medium Heading"}),e.jsx("p",{style:{fontFamily:o.family,fontSize:"16px"},children:"16px - Body Text"}),e.jsx("p",{style:{fontFamily:o.family,fontSize:"14px"},children:"14px - Small Text"})]})]})]})]},c))})]})})}var T6=1,ZSe=.9,eCe=.8,tCe=.17,PN=.1,TN=.999,sCe=.9999,nCe=.99,rCe=/[\\\/_+.#"@\[\(\{&]/,aCe=/[\\\/_+.#"@\[\(\{&]/g,iCe=/[\s-]/,Ez=/[\s-]/g;function S1(t,s,n,r,a,i,l){if(i===s.length)return a===t.length?T6:nCe;var o=`${a},${i}`;if(l[o]!==void 0)return l[o];for(var c=r.charAt(i),u=n.indexOf(c,a),d=0,m,h,p,g;u>=0;)m=S1(t,s,n,r,u+1,i+1,l),m>d&&(u===a?m*=T6:rCe.test(t.charAt(u-1))?(m*=eCe,p=t.slice(a,u-1).match(aCe),p&&a>0&&(m*=Math.pow(TN,p.length))):iCe.test(t.charAt(u-1))?(m*=ZSe,g=t.slice(a,u-1).match(Ez),g&&a>0&&(m*=Math.pow(TN,g.length))):(m*=tCe,a>0&&(m*=Math.pow(TN,u-a))),t.charAt(u)!==s.charAt(i)&&(m*=sCe)),(m<PN&&n.charAt(u-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&n.charAt(u-1)!==r.charAt(i))&&(h=S1(t,s,n,r,u+1,i+2,l),h*PN>m&&(m=h*PN)),m>d&&(d=m),u=n.indexOf(c,u+1);return l[o]=d,d}function A6(t){return t.toLowerCase().replace(Ez," ")}function lCe(t,s,n){return t=n&&n.length>0?`${t+" "+n.join(" ")}`:t,S1(t,s,A6(t),A6(s),0,0,{})}var Tm='[cmdk-group=""]',AN='[cmdk-group-items=""]',oCe='[cmdk-group-heading=""]',Pz='[cmdk-item=""]',M6=`${Pz}:not([aria-disabled="true"])`,C1="cmdk-item-select",du="data-value",cCe=(t,s,n)=>lCe(t,s,n),Tz=b.createContext(void 0),wp=()=>b.useContext(Tz),Az=b.createContext(void 0),DC=()=>b.useContext(Az),Mz=b.createContext(void 0),Dz=b.forwardRef((t,s)=>{let n=uu(()=>{var W,q;return{search:"",value:(q=(W=t.value)!=null?W:t.defaultValue)!=null?q:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=uu(()=>new Set),a=uu(()=>new Map),i=uu(()=>new Map),l=uu(()=>new Set),o=Oz(t),{label:c,children:u,value:d,onValueChange:m,filter:h,shouldFilter:p,loop:g,disablePointerSelection:v=!1,vimBindings:y=!0,...j}=t,w=Vn(),N=Vn(),_=Vn(),T=b.useRef(null),A=bCe();dd(()=>{if(d!==void 0){let W=d.trim();n.current.value=W,P.emit()}},[d]),dd(()=>{A(6,R)},[]);let P=b.useMemo(()=>({subscribe:W=>(l.current.add(W),()=>l.current.delete(W)),snapshot:()=>n.current,setState:(W,q,Z)=>{var Q,Y,K,ae;if(!Object.is(n.current[W],q)){if(n.current[W]=q,W==="search")E(),M(),A(1,k);else if(W==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let se=document.getElementById(_);se?se.focus():(Q=document.getElementById(w))==null||Q.focus()}if(A(7,()=>{var se;n.current.selectedItemId=(se=F())==null?void 0:se.id,P.emit()}),Z||A(5,R),((Y=o.current)==null?void 0:Y.value)!==void 0){let se=q??"";(ae=(K=o.current).onValueChange)==null||ae.call(K,se);return}}P.emit()}},emit:()=>{l.current.forEach(W=>W())}}),[]),C=b.useMemo(()=>({value:(W,q,Z)=>{var Q;q!==((Q=i.current.get(W))==null?void 0:Q.value)&&(i.current.set(W,{value:q,keywords:Z}),n.current.filtered.items.set(W,O(q,Z)),A(2,()=>{M(),P.emit()}))},item:(W,q)=>(r.current.add(W),q&&(a.current.has(q)?a.current.get(q).add(W):a.current.set(q,new Set([W]))),A(3,()=>{E(),M(),n.current.value||k(),P.emit()}),()=>{i.current.delete(W),r.current.delete(W),n.current.filtered.items.delete(W);let Z=F();A(4,()=>{E(),(Z==null?void 0:Z.getAttribute("id"))===W&&k(),P.emit()})}),group:W=>(a.current.has(W)||a.current.set(W,new Set),()=>{i.current.delete(W),a.current.delete(W)}),filter:()=>o.current.shouldFilter,label:c||t["aria-label"],getDisablePointerSelection:()=>o.current.disablePointerSelection,listId:w,inputId:_,labelId:N,listInnerRef:T}),[]);function O(W,q){var Z,Q;let Y=(Q=(Z=o.current)==null?void 0:Z.filter)!=null?Q:cCe;return W?Y(W,n.current.search,q):0}function M(){if(!n.current.search||o.current.shouldFilter===!1)return;let W=n.current.filtered.items,q=[];n.current.filtered.groups.forEach(Q=>{let Y=a.current.get(Q),K=0;Y.forEach(ae=>{let se=W.get(ae);K=Math.max(se,K)}),q.push([Q,K])});let Z=T.current;z().sort((Q,Y)=>{var K,ae;let se=Q.getAttribute("id"),de=Y.getAttribute("id");return((K=W.get(de))!=null?K:0)-((ae=W.get(se))!=null?ae:0)}).forEach(Q=>{let Y=Q.closest(AN);Y?Y.appendChild(Q.parentElement===Y?Q:Q.closest(`${AN} > *`)):Z.appendChild(Q.parentElement===Z?Q:Q.closest(`${AN} > *`))}),q.sort((Q,Y)=>Y[1]-Q[1]).forEach(Q=>{var Y;let K=(Y=T.current)==null?void 0:Y.querySelector(`${Tm}[${du}="${encodeURIComponent(Q[0])}"]`);K==null||K.parentElement.appendChild(K)})}function k(){let W=z().find(Z=>Z.getAttribute("aria-disabled")!=="true"),q=W==null?void 0:W.getAttribute(du);P.setState("value",q||void 0)}function E(){var W,q,Z,Q;if(!n.current.search||o.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let Y=0;for(let K of r.current){let ae=(q=(W=i.current.get(K))==null?void 0:W.value)!=null?q:"",se=(Q=(Z=i.current.get(K))==null?void 0:Z.keywords)!=null?Q:[],de=O(ae,se);n.current.filtered.items.set(K,de),de>0&&Y++}for(let[K,ae]of a.current)for(let se of ae)if(n.current.filtered.items.get(se)>0){n.current.filtered.groups.add(K);break}n.current.filtered.count=Y}function R(){var W,q,Z;let Q=F();Q&&(((W=Q.parentElement)==null?void 0:W.firstChild)===Q&&((Z=(q=Q.closest(Tm))==null?void 0:q.querySelector(oCe))==null||Z.scrollIntoView({block:"nearest"})),Q.scrollIntoView({block:"nearest"}))}function F(){var W;return(W=T.current)==null?void 0:W.querySelector(`${Pz}[aria-selected="true"]`)}function z(){var W;return Array.from(((W=T.current)==null?void 0:W.querySelectorAll(M6))||[])}function V(W){let q=z()[W];q&&P.setState("value",q.getAttribute(du))}function U(W){var q;let Z=F(),Q=z(),Y=Q.findIndex(ae=>ae===Z),K=Q[Y+W];(q=o.current)!=null&&q.loop&&(K=Y+W<0?Q[Q.length-1]:Y+W===Q.length?Q[0]:Q[Y+W]),K&&P.setState("value",K.getAttribute(du))}function B(W){let q=F(),Z=q==null?void 0:q.closest(Tm),Q;for(;Z&&!Q;)Z=W>0?vCe(Z,Tm):yCe(Z,Tm),Q=Z==null?void 0:Z.querySelector(M6);Q?P.setState("value",Q.getAttribute(du)):U(W)}let $=()=>V(z().length-1),L=W=>{W.preventDefault(),W.metaKey?$():W.altKey?B(1):U(1)},I=W=>{W.preventDefault(),W.metaKey?V(0):W.altKey?B(-1):U(-1)};return b.createElement(Ut.div,{ref:s,tabIndex:-1,...j,"cmdk-root":"",onKeyDown:W=>{var q;(q=j.onKeyDown)==null||q.call(j,W);let Z=W.nativeEvent.isComposing||W.keyCode===229;if(!(W.defaultPrevented||Z))switch(W.key){case"n":case"j":{y&&W.ctrlKey&&L(W);break}case"ArrowDown":{L(W);break}case"p":case"k":{y&&W.ctrlKey&&I(W);break}case"ArrowUp":{I(W);break}case"Home":{W.preventDefault(),V(0);break}case"End":{W.preventDefault(),$();break}case"Enter":{W.preventDefault();let Q=F();if(Q){let Y=new Event(C1);Q.dispatchEvent(Y)}}}}},b.createElement("label",{"cmdk-label":"",htmlFor:C.inputId,id:C.labelId,style:wCe},c),zv(t,W=>b.createElement(Az.Provider,{value:P},b.createElement(Tz.Provider,{value:C},W))))}),dCe=b.forwardRef((t,s)=>{var n,r;let a=Vn(),i=b.useRef(null),l=b.useContext(Mz),o=wp(),c=Oz(t),u=(r=(n=c.current)==null?void 0:n.forceMount)!=null?r:l==null?void 0:l.forceMount;dd(()=>{if(!u)return o.item(a,l==null?void 0:l.id)},[u]);let d=Rz(a,i,[t.value,t.children,i],t.keywords),m=DC(),h=Xo(A=>A.value&&A.value===d.current),p=Xo(A=>u||o.filter()===!1?!0:A.search?A.filtered.items.get(a)>0:!0);b.useEffect(()=>{let A=i.current;if(!(!A||t.disabled))return A.addEventListener(C1,g),()=>A.removeEventListener(C1,g)},[p,t.onSelect,t.disabled]);function g(){var A,P;v(),(P=(A=c.current).onSelect)==null||P.call(A,d.current)}function v(){m.setState("value",d.current,!0)}if(!p)return null;let{disabled:y,value:j,onSelect:w,forceMount:N,keywords:_,...T}=t;return b.createElement(Ut.div,{ref:Fr(i,s),...T,id:a,"cmdk-item":"",role:"option","aria-disabled":!!y,"aria-selected":!!h,"data-disabled":!!y,"data-selected":!!h,onPointerMove:y||o.getDisablePointerSelection()?void 0:v,onClick:y?void 0:g},t.children)}),uCe=b.forwardRef((t,s)=>{let{heading:n,children:r,forceMount:a,...i}=t,l=Vn(),o=b.useRef(null),c=b.useRef(null),u=Vn(),d=wp(),m=Xo(p=>a||d.filter()===!1?!0:p.search?p.filtered.groups.has(l):!0);dd(()=>d.group(l),[]),Rz(l,o,[t.value,t.heading,c]);let h=b.useMemo(()=>({id:l,forceMount:a}),[a]);return b.createElement(Ut.div,{ref:Fr(o,s),...i,"cmdk-group":"",role:"presentation",hidden:m?void 0:!0},n&&b.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:u},n),zv(t,p=>b.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?u:void 0},b.createElement(Mz.Provider,{value:h},p))))}),hCe=b.forwardRef((t,s)=>{let{alwaysRender:n,...r}=t,a=b.useRef(null),i=Xo(l=>!l.search);return!n&&!i?null:b.createElement(Ut.div,{ref:Fr(a,s),...r,"cmdk-separator":"",role:"separator"})}),mCe=b.forwardRef((t,s)=>{let{onValueChange:n,...r}=t,a=t.value!=null,i=DC(),l=Xo(u=>u.search),o=Xo(u=>u.selectedItemId),c=wp();return b.useEffect(()=>{t.value!=null&&i.setState("search",t.value)},[t.value]),b.createElement(Ut.input,{ref:s,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":o,id:c.inputId,type:"text",value:a?t.value:l,onChange:u=>{a||i.setState("search",u.target.value),n==null||n(u.target.value)}})}),fCe=b.forwardRef((t,s)=>{let{children:n,label:r="Suggestions",...a}=t,i=b.useRef(null),l=b.useRef(null),o=Xo(u=>u.selectedItemId),c=wp();return b.useEffect(()=>{if(l.current&&i.current){let u=l.current,d=i.current,m,h=new ResizeObserver(()=>{m=requestAnimationFrame(()=>{let p=u.offsetHeight;d.style.setProperty("--cmdk-list-height",p.toFixed(1)+"px")})});return h.observe(u),()=>{cancelAnimationFrame(m),h.unobserve(u)}}},[]),b.createElement(Ut.div,{ref:Fr(i,s),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":o,"aria-label":r,id:c.listId},zv(t,u=>b.createElement("div",{ref:Fr(l,c.listInnerRef),"cmdk-list-sizer":""},u)))}),pCe=b.forwardRef((t,s)=>{let{open:n,onOpenChange:r,overlayClassName:a,contentClassName:i,container:l,...o}=t;return b.createElement(M0,{open:n,onOpenChange:r},b.createElement(D0,{container:l},b.createElement(mh,{"cmdk-overlay":"",className:a}),b.createElement(fh,{"aria-label":t.label,"cmdk-dialog":"",className:i},b.createElement(Dz,{ref:s,...o}))))}),xCe=b.forwardRef((t,s)=>Xo(n=>n.filtered.count===0)?b.createElement(Ut.div,{ref:s,...t,"cmdk-empty":"",role:"presentation"}):null),gCe=b.forwardRef((t,s)=>{let{progress:n,children:r,label:a="Loading...",...i}=t;return b.createElement(Ut.div,{ref:s,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},zv(t,l=>b.createElement("div",{"aria-hidden":!0},l)))}),da=Object.assign(Dz,{List:fCe,Item:dCe,Input:mCe,Group:uCe,Separator:hCe,Dialog:pCe,Empty:xCe,Loading:gCe});function vCe(t,s){let n=t.nextElementSibling;for(;n;){if(n.matches(s))return n;n=n.nextElementSibling}}function yCe(t,s){let n=t.previousElementSibling;for(;n;){if(n.matches(s))return n;n=n.previousElementSibling}}function Oz(t){let s=b.useRef(t);return dd(()=>{s.current=t}),s}var dd=typeof window>"u"?b.useEffect:b.useLayoutEffect;function uu(t){let s=b.useRef();return s.current===void 0&&(s.current=t()),s}function Xo(t){let s=DC(),n=()=>t(s.snapshot());return b.useSyncExternalStore(s.subscribe,n,n)}function Rz(t,s,n,r=[]){let a=b.useRef(),i=wp();return dd(()=>{var l;let o=(()=>{var u;for(let d of n){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(u=d.current.textContent)==null?void 0:u.trim():a.current}})(),c=r.map(u=>u.trim());i.value(t,o,c),(l=s.current)==null||l.setAttribute(du,o),a.current=o}),a}var bCe=()=>{let[t,s]=b.useState(),n=uu(()=>new Map);return dd(()=>{n.current.forEach(r=>r()),n.current=new Map},[t]),(r,a)=>{n.current.set(r,a),s({})}};function jCe(t){let s=t.type;return typeof s=="function"?s(t.props):"render"in s?s.render(t.props):t}function zv({asChild:t,children:s},n){return t&&b.isValidElement(s)?b.cloneElement(jCe(s),{ref:s.ref},n(s.props.children)):n(s)}var wCe={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const NCe=b.forwardRef(({className:t,...s},n)=>e.jsx(da,{ref:n,className:tt("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...s}));NCe.displayName=da.displayName;const _Ce=b.forwardRef(({className:t,...s},n)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(Ys,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(da.Input,{ref:n,className:tt("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...s})]}));_Ce.displayName=da.Input.displayName;const SCe=b.forwardRef(({className:t,...s},n)=>e.jsx(da.List,{ref:n,className:tt("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...s}));SCe.displayName=da.List.displayName;const CCe=b.forwardRef((t,s)=>e.jsx(da.Empty,{ref:s,className:"py-6 text-center text-sm",...t}));CCe.displayName=da.Empty.displayName;const kCe=b.forwardRef(({className:t,...s},n)=>e.jsx(da.Group,{ref:n,className:tt("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...s}));kCe.displayName=da.Group.displayName;const ECe=b.forwardRef(({className:t,...s},n)=>e.jsx(da.Separator,{ref:n,className:tt("-mx-1 h-px bg-border",t),...s}));ECe.displayName=da.Separator.displayName;const PCe=b.forwardRef(({className:t,...s},n)=>e.jsx(da.Item,{ref:n,className:tt("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t),...s}));PCe.displayName=da.Item.displayName;const MN={Menu:zl,Calendar:Ns,CreditCard:fd,Ticket:Rs,Wallet:Ho,ShoppingCart:xd,History:C0,Sparkles:aa,FileText:ns,Briefcase:En,Settings:Qa,BookOpen:_0,Building:Zo,HelpCircle:md,Users:ws,Shield:In,BarChart3:ah,FileEdit:Wf,AtSign:$f,FolderTree:Xc,Trophy:Ln,MousePointer2:Hf,Mail:Ms,Download:Zn},TCe=[{value:"_none",label:"No Page (Parent Menu)"},...[{value:"Articles",label:"Articles"},{value:"ArticleManagement",label:"Article Management"},{value:"ArticlesSettings",label:"Articles Settings"},{value:"ArticleEditor",label:"Article Editor"},{value:"ArticleView",label:"Article View"},{value:"AwardManagement",label:"Award Management"},{value:"Balances",label:"Balances"},{value:"Bookings",label:"Bookings"},{value:"ButtonElements",label:"Button Elements"},{value:"ButtonStyleManagement",label:"Button Styles"},{value:"BuyProgramTickets",label:"Buy Program Tickets"},{value:"CategoryManagement",label:"Category Management"},{value:"DataExport",label:"Data Export"},{value:"DiscountCodeManagement",label:"Discount Code Management"},{value:"EventDetails",label:"Event Details"},{value:"Events",label:"Events"},{value:"EventSettings",label:"Event Settings"},{value:"FileManagement",label:"File Management"},{value:"FloaterManagement",label:"Floater Management"},{value:"FormManagement",label:"Form Management"},{value:"FormSubmissions",label:"Form Submissions"},{value:"GuestWriterManagement",label:"Guest Writer Management"},{value:"History",label:"History"},{value:"IEditPageEditor",label:"Page Editor"},{value:"IEditPageManagement",label:"Page Builder - Pages"},{value:"IEditTemplateManagement",label:"Page Builder - Templates"},{value:"InstalledFonts",label:"Installed Fonts"},{value:"JobBoardSettings",label:"Job Board Settings"},{value:"JobPostingManagement",label:"Job Posting Management"},{value:"MemberDirectory",label:"Member Directory"},{value:"MemberDirectorySettings",label:"Member Directory Settings"},{value:"MemberGroupAssignmentReport",label:"Member Group Assignment Report"},{value:"MemberGroupGuestManagement",label:"Member Group Guest Management"},{value:"MemberGroupManagement",label:"Member Group Management"},{value:"MemberHandleManagement",label:"Member Handle Management"},{value:"MemberRoleAssignment",label:"Member Role Assignment"},{value:"MyArticles",label:"My Articles"},{value:"MyJobPostings",label:"My Job Postings"},{value:"MyNews",label:"My News"},{value:"MyTickets",label:"My Tickets"},{value:"NavigationManagement",label:"Navigation Items"},{value:"News",label:"News"},{value:"NewsEditor",label:"News Editor"},{value:"NewsSettings",label:"News Settings"},{value:"NewsView",label:"News View"},{value:"OrganisationDirectory",label:"Organisation Directory"},{value:"OrganisationDirectorySettings",label:"Organisation Directory Settings"},{value:"PageBannerManagement",label:"Page Banners"},{value:"PortalMenuManagement",label:"Portal Menu Management"},{value:"PortalNavigationManagement",label:"Portal Navigation Management"},{value:"Preferences",label:"Preferences"},{value:"PublicAbout",label:"Public - About"},{value:"PublicArticles",label:"Public - Articles"},{value:"PublicContact",label:"Public - Contact"},{value:"PublicEvents",label:"Public - Events"},{value:"PublicNews",label:"Public - News"},{value:"PublicResources",label:"Public - Resources"},{value:"Resources",label:"Resources"},{value:"ResourceManagement",label:"Resource Management"},{value:"ResourceSettings",label:"Resource Settings"},{value:"RoleManagement",label:"Role Management"},{value:"SiteMap",label:"Site Map"},{value:"Support",label:"Support"},{value:"SupportManagement",label:"Support Management"},{value:"TagManagement",label:"Tag Management"},{value:"Team",label:"Team"},{value:"TeamInviteSettings",label:"Team Invite Settings"},{value:"TeamEngagementReport",label:"Team Engagement Report"},{value:"TeamMemberManagement",label:"Team Member Management"},{value:"TicketSalesAnalytics",label:"Ticket Sales Analytics"},{value:"TourManagement",label:"Tour Management"},{value:"WallOfFameManagement",label:"Wall of Fame"}].sort((t,s)=>t.label.localeCompare(s.label))];function Fz({isAdmin:t}){const[s,n]=b.useState(null),[r,a]=b.useState(!1),[i,l]=b.useState({}),[o,c]=b.useState(!1),u=Yt(),{data:d=[],isLoading:m}=me({queryKey:["portal-menu"],queryFn:()=>X.entities.PortalMenu.list("display_order"),staleTime:1/0,refetchOnWindowFocus:!1,refetchOnMount:!1}),h=Le({mutationFn:O=>X.entities.PortalMenu.create(O),onSuccess:()=>{u.invalidateQueries({queryKey:["portal-menu"]}),a(!1),n(null),te.success("Menu item created")}}),p=Le({mutationFn:({id:O,data:M})=>X.entities.PortalMenu.update(O,M),onSuccess:()=>{u.invalidateQueries({queryKey:["portal-menu"]}),a(!1),n(null),te.success("Menu item updated")}}),g=Le({mutationFn:O=>X.entities.PortalMenu.delete(O),onSuccess:()=>{u.invalidateQueries({queryKey:["portal-menu"]}),te.success("Menu item deleted")}}),v=O=>{const M=d.filter(E=>E.section===O&&E.is_active);return M.filter(E=>!E.parent_id).sort((E,R)=>E.display_order-R.display_order).map(E=>({...E,children:M.filter(R=>R.parent_id===E.id).sort((R,F)=>R.display_order-F.display_order)}))},y=b.useMemo(()=>v("user"),[d]),j=b.useMemo(()=>v("admin"),[d]),w=(O,M=null)=>{const k=d.filter(R=>R.section===O&&R.parent_id===(M||"")),E=k.length>0?Math.max(...k.map(R=>R.display_order||0)):-1;n({title:"",url:"",icon:"Menu",feature_id:"",section:O,parent_id:M||"",display_order:E+1,is_active:!0}),a(!0)},N=O=>{n({...O}),a(!0)},_=()=>{if(!s.title){te.error("Title is required");return}let O;const M=s.section;s.url?O=`page_${M}_${s.url}`:O=`page_${M}_${s.title.replace(/\s+/g,"")}`;const k={title:s.title,url:s.url||"",icon:s.icon,feature_id:O,section:s.section,parent_id:s.parent_id||"",display_order:s.display_order,is_active:s.is_active};s.id?p.mutate({id:s.id,data:k}):h.mutate(k)},T=O=>{if(d.some(k=>k.parent_id===O.id)){te.error("Cannot delete menu item with sub-items");return}confirm(`Delete "${O.title}"?`)&&g.mutate(O.id)},A=async(O,M)=>{console.log("=== MOVE ITEM START ==="),console.log("Item ID:",O,"Direction:",M);const k=d.find(U=>U.id===O);if(!k){console.log("Item not found");return}console.log("Item found:",k.title,"Current display_order:",k.display_order);const E=d.filter(U=>U.section===k.section&&U.parent_id===k.parent_id).sort((U,B)=>U.display_order===B.display_order?new Date(U.created_date)-new Date(B.created_date):U.display_order-B.display_order);console.log("Siblings:",E.map(U=>({title:U.title,display_order:U.display_order})));const R=E.findIndex(U=>U.id===O),F=M==="up"?R-1:R+1;if(console.log("Current index:",R,"New index:",F),F<0||F>=E.length){console.log("Cannot move - out of bounds");return}const z=[...E],[V]=z.splice(R,1);z.splice(F,0,V),console.log("Reordered siblings:",z.map(U=>U.title));for(let U=0;U<z.length;U++)console.log("Updating",z[U].title,"to display_order:",U),await X.entities.PortalMenu.update(z[U].id,{display_order:U});console.log("Invalidating queries..."),await u.invalidateQueries({queryKey:["portal-menu"]}),console.log("=== MOVE ITEM END ==="),te.success("Menu order updated")},P=O=>{l(M=>({...M,[O]:!M[O]}))},C=(O,M,k=!1)=>{const E=MN[O.icon]||zl,R=O.children&&O.children.length>0,F=i[O.id];return e.jsxs("div",{className:k?"ml-8":"",children:[e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-white border border-slate-200 rounded-lg hover:border-blue-400 transition-colors mb-2",children:[R&&e.jsx("button",{onClick:()=>P(O.id),className:"p-1 hover:bg-slate-100 rounded",children:F?e.jsx(Or,{className:"w-4 h-4"}):e.jsx(js,{className:"w-4 h-4"})}),!R&&e.jsx("div",{className:"w-6"}),e.jsx(E,{className:"w-4 h-4 text-slate-600"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-slate-900",children:O.title}),e.jsx("div",{className:"text-xs text-slate-500",children:O.url||"(parent menu)"})]}),R&&e.jsx(ye,{variant:"outline",className:"text-xs",children:O.children.length}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(J,{variant:"ghost",size:"sm",onClick:()=>A(O.id,"up"),className:"h-8 w-8 p-0",children:""}),e.jsx(J,{variant:"ghost",size:"sm",onClick:()=>A(O.id,"down"),className:"h-8 w-8 p-0",children:""}),!k&&e.jsx(J,{variant:"ghost",size:"sm",onClick:()=>w(M,O.id),className:"h-8 w-8 p-0",children:e.jsx(Pt,{className:"w-4 h-4"})}),e.jsx(J,{variant:"ghost",size:"sm",onClick:()=>N(O),className:"h-8 w-8 p-0",children:e.jsx(As,{className:"w-4 h-4"})}),e.jsx(J,{variant:"ghost",size:"sm",onClick:()=>T(O),className:"h-8 w-8 p-0 text-red-600",children:e.jsx(os,{className:"w-4 h-4"})})]})]}),R&&F&&e.jsx("div",{className:"ml-8 space-y-2 mb-2",children:O.children.map(z=>C(z,M,!0))})]},O.id)};return t?m?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:"Loading..."})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Portal Menu Management"}),e.jsx("p",{className:"text-slate-600",children:"Configure the portal navigation menu structure"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(le,{children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Ue,{className:"flex items-center gap-2",children:[e.jsx(ws,{className:"w-5 h-5 text-blue-600"}),"User Navigation"]}),e.jsxs(J,{onClick:()=>w("user"),size:"sm",className:"gap-2",children:[e.jsx(Pt,{className:"w-4 h-4"}),"Add Item"]})]})}),e.jsx(ce,{className:"p-4",children:y.length===0?e.jsx("div",{className:"text-center py-12 text-slate-500",children:"No menu items yet"}):e.jsx("div",{className:"space-y-2",children:y.map(O=>C(O,"user"))})})]}),e.jsxs(le,{children:[e.jsx(Fe,{className:"border-b border-slate-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Ue,{className:"flex items-center gap-2",children:[e.jsx(In,{className:"w-5 h-5 text-amber-600"}),"Admin Navigation"]}),e.jsxs(J,{onClick:()=>w("admin"),size:"sm",className:"gap-2",children:[e.jsx(Pt,{className:"w-4 h-4"}),"Add Item"]})]})}),e.jsx(ce,{className:"p-4",children:j.length===0?e.jsx("div",{className:"text-center py-12 text-slate-500",children:"No menu items yet"}):e.jsx("div",{className:"space-y-2",children:j.map(O=>C(O,"admin"))})})]})]}),e.jsx(Ct,{open:r,onOpenChange:a,children:e.jsxs(Nt,{className:"max-w-lg",children:[e.jsx(kt,{children:e.jsx(Et,{children:s!=null&&s.id?"Edit Menu Item":"Create Menu Item"})}),s&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Title *"}),e.jsx(he,{value:s.title,onChange:O=>n({...s,title:O.target.value}),placeholder:"e.g., Browse Events"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Page"}),e.jsxs(Ke,{value:s.url||"_none",onValueChange:O=>n({...s,url:O==="_none"?"":O}),children:[e.jsx(Ve,{children:e.jsx(Qe,{placeholder:"No Page (Parent Menu)"})}),e.jsx(We,{className:"max-h-[400px]",children:TCe.map(O=>e.jsx(re,{value:O.value,children:O.label},O.value))})]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Leave empty if this is a parent menu with sub-items"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Icon *"}),e.jsxs(Ke,{value:s.icon,onValueChange:O=>n({...s,icon:O}),children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsx(We,{children:Object.keys(MN).map(O=>{const M=MN[O];return e.jsx(re,{value:O,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-4 h-4"}),O]})},O)})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{children:"Feature ID (Auto-generated)"}),e.jsx("div",{className:"px-3 py-2 bg-slate-100 border border-slate-200 rounded-md text-sm text-slate-600",children:s.url?`page_${s.section}_${s.url}`:`page_${s.section}_${s.title.replace(/\s+/g,"")}`}),e.jsx("p",{className:"text-xs text-slate-500",children:"Auto-generated from section, URL or title (used for permissions)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(cs,{checked:s.is_active,onCheckedChange:O=>n({...s,is_active:O})}),e.jsx(ee,{children:"Active"})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e.jsx(J,{onClick:_,disabled:h.isPending||p.isPending,className:"bg-blue-600 hover:bg-blue-700",children:s!=null&&s.id?"Update":"Create"})]})]})})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"border-red-200",children:e.jsx(ce,{className:"p-8 text-center",children:e.jsx("p",{className:"text-red-600",children:"Administrator access required"})})})})}function Lz({isAdmin:t}){const[s,n]=b.useState(""),[r,a]=b.useState("all"),[i,l]=b.useState("all"),[o,c]=b.useState(1),u=20,{data:d=[],isLoading:m}=me({queryKey:["member-groups"],queryFn:()=>X.entities.MemberGroup.list("name")}),{data:h=[],isLoading:p}=me({queryKey:["members-list"],queryFn:()=>X.entities.Member.list("first_name")}),{data:g=[],isLoading:v}=me({queryKey:["member-group-assignments"],queryFn:()=>X.entities.MemberGroupAssignment.list()}),y=new Date,j=hr(y,30),w=M=>{if(!M)return"no-expiry";const k=new Date(M);return Wg(k,y)?"expired":Wg(k,j)?"expiring-soon":"active"},N=b.useMemo(()=>g.map(M=>{const k=h.find(F=>F.id===M.member_id),E=d.find(F=>F.id===M.group_id),R=w(M.expires_at);return{...M,member:k,group:E,expiryStatus:R,memberName:k?`${k.first_name} ${k.last_name}`:"Unknown",memberEmail:(k==null?void 0:k.email)||"",groupName:(E==null?void 0:E.name)||"Unknown Group"}}),[g,h,d]),_=b.useMemo(()=>{let M=N;if(s){const k=s.toLowerCase();M=M.filter(E=>{var R;return E.memberName.toLowerCase().includes(k)||E.memberEmail.toLowerCase().includes(k)||E.groupName.toLowerCase().includes(k)||((R=E.group_role)==null?void 0:R.toLowerCase().includes(k))})}return r!=="all"&&(M=M.filter(k=>k.expiryStatus===r)),i!=="all"&&(M=M.filter(k=>k.group_id===i)),M.sort((k,E)=>{const R={expired:0,"expiring-soon":1,active:2,"no-expiry":3};return R[k.expiryStatus]!==R[E.expiryStatus]?R[k.expiryStatus]-R[E.expiryStatus]:k.expires_at&&E.expires_at?new Date(k.expires_at)-new Date(E.expires_at):k.memberName.localeCompare(E.memberName)}),M},[N,s,r,i]),T=b.useMemo(()=>{const M=N.filter(R=>R.expiryStatus==="expired").length,k=N.filter(R=>R.expiryStatus==="expiring-soon").length,E=N.filter(R=>R.expires_at).length;return{expired:M,expiringSoon:k,withExpiry:E,total:N.length}},[N]),A=Math.ceil(_.length/u),P=_.slice((o-1)*u,o*u);Be.useEffect(()=>{c(1)},[s,r,i]);const C=M=>{switch(M){case"expired":return e.jsx(ye,{className:"bg-red-100 text-red-700",children:"Expired"});case"expiring-soon":return e.jsx(ye,{className:"bg-amber-100 text-amber-700",children:"Expiring Soon"});case"active":return e.jsx(ye,{className:"bg-green-100 text-green-700",children:"Active"});default:return e.jsx(ye,{className:"bg-slate-100 text-slate-600",children:"No Expiry"})}},O=m||p||v;return t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Group Assignments Report"}),e.jsx("p",{className:"text-slate-600",children:"View and filter all member group assignments"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(le,{className:"border-slate-200",children:e.jsx(ce,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(ws,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:T.total}),e.jsx("p",{className:"text-xs text-slate-600",children:"Total Assignments"})]})]})})}),e.jsx(le,{className:"border-slate-200",children:e.jsx(ce,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(uY,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:T.expired}),e.jsx("p",{className:"text-xs text-slate-600",children:"Expired"})]})]})})}),e.jsx(le,{className:"border-slate-200",children:e.jsx(ce,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:e.jsx(tn,{className:"w-5 h-5 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-amber-600",children:T.expiringSoon}),e.jsx("p",{className:"text-xs text-slate-600",children:"Expiring in 30 days"})]})]})})}),e.jsx(le,{className:"border-slate-200",children:e.jsx(ce,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-slate-100 rounded-lg",children:e.jsx(Ns,{className:"w-5 h-5 text-slate-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:T.withExpiry}),e.jsx("p",{className:"text-xs text-slate-600",children:"With Expiry Date"})]})]})})})]}),e.jsx(le,{className:"mb-6",children:e.jsxs(ce,{className:"p-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx(he,{placeholder:"Search by member, group, or role...",value:s,onChange:M=>n(M.target.value),className:"pl-10"})]}),e.jsx("div",{className:"w-full md:w-48",children:e.jsxs(Ke,{value:r,onValueChange:a,children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"all",children:"All Statuses"}),e.jsx(re,{value:"expired",children:"Expired"}),e.jsx(re,{value:"expiring-soon",children:"Expiring Soon (30 days)"}),e.jsx(re,{value:"active",children:"Active (with expiry)"}),e.jsx(re,{value:"no-expiry",children:"No Expiry Date"})]})]})}),e.jsx("div",{className:"w-full md:w-48",children:e.jsxs(Ke,{value:i,onValueChange:l,children:[e.jsx(Ve,{children:e.jsx(Qe,{})}),e.jsxs(We,{children:[e.jsx(re,{value:"all",children:"All Groups"}),d.map(M=>e.jsx(re,{value:M.id,children:M.name},M.id))]})]})})]}),_.length>0&&e.jsxs("p",{className:"text-sm text-slate-600 mt-3",children:["Showing ",_.length," assignment",_.length!==1?"s":""]})]})}),O?e.jsx(le,{children:e.jsx(ce,{className:"p-8",children:e.jsx("div",{className:"animate-pulse space-y-4",children:Array(5).fill(0).map((M,k)=>e.jsx("div",{className:"h-12 bg-slate-200 rounded"},k))})})}):_.length===0?e.jsx(le,{children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(ns,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No Assignments Found"}),e.jsx("p",{className:"text-slate-600",children:s||r!=="all"||i!=="all"?"Try adjusting your filters":"No member group assignments exist yet"})]})}):e.jsx(le,{children:e.jsx(ce,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Member"}),e.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Group"}),e.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Role"}),e.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Expiry Date"}),e.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200",children:P.map(M=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsxs("td",{className:"p-4",children:[e.jsx("div",{className:"font-medium text-slate-900",children:M.memberName}),e.jsx("div",{className:"text-xs text-slate-500",children:M.memberEmail})]}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"text-slate-900",children:M.groupName})}),e.jsx("td",{className:"p-4",children:e.jsx(ye,{className:"bg-blue-100 text-blue-700",children:M.group_role})}),e.jsx("td",{className:"p-4",children:M.expires_at?e.jsx("span",{className:"text-slate-900",children:Mt(new Date(M.expires_at),"dd MMM yyyy")}):e.jsx("span",{className:"text-slate-400",children:"-"})}),e.jsx("td",{className:"p-4",children:C(M.expiryStatus)})]},M.id))})]})})})}),A>1&&e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{variant:"outline",size:"sm",onClick:()=>c(M=>Math.max(1,M-1)),disabled:o===1,children:"Previous"}),e.jsxs("span",{className:"text-sm text-slate-600 px-3",children:["Page ",o," of ",A]}),e.jsx(J,{variant:"outline",size:"sm",onClick:()=>c(M=>Math.min(A,M+1)),disabled:o===A,children:"Next"})]})})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-8 flex items-center justify-center",children:e.jsx(le,{className:"max-w-md",children:e.jsx(ce,{className:"p-12 text-center",children:e.jsx("p",{className:"text-slate-600",children:"You don't have permission to access this page."})})})})}function Iz({memberInfo:t,organizationInfo:s}){const[n,r]=b.useState(""),[a,i]=b.useState("totalScore"),[l,o]=b.useState("desc"),{data:c=[],isLoading:u}=me({queryKey:["team-members-report",t==null?void 0:t.organization_id],queryFn:async()=>t!=null&&t.organization_id?(await X.entities.Member.list()).filter(T=>T.organization_id===t.organization_id&&T.login_enabled!==!1):[],enabled:!!(t!=null&&t.organization_id),staleTime:60*1e3}),{data:d=[]}=me({queryKey:["all-articles-report"],queryFn:()=>X.entities.BlogPost.list(),staleTime:60*1e3}),{data:m=[]}=me({queryKey:["all-bookings-report"],queryFn:()=>X.entities.Booking.list(),staleTime:60*1e3}),{data:h=[]}=me({queryKey:["all-job-postings-report"],queryFn:()=>X.entities.JobPosting.list(),staleTime:60*1e3}),{data:p=[]}=me({queryKey:["awards-report"],queryFn:async()=>(await X.entities.Award.list()).filter(T=>T.is_active),staleTime:300*1e3}),{data:g=[]}=me({queryKey:["offline-assignments-report"],queryFn:()=>X.entities.OfflineAwardAssignment.list(),staleTime:60*1e3}),v=b.useMemo(()=>c.map(_=>{const T=m.filter(E=>E.member_id===_.id&&E.status==="confirmed").length,A=d.filter(E=>E.author_id===_.id&&E.status==="published").length,P=h.filter(E=>E.posted_by_member_id===_.id).length,C=p.filter(E=>(E.award_type==="events_attended"?T:E.award_type==="articles_published"?A:E.award_type==="jobs_posted"?P:0)>=E.threshold).length,O=g.filter(E=>E.member_id===_.id).length,M=C+O,k=T+A+P+M;return{id:_.id,name:`${_.first_name||""} ${_.last_name||""}`.trim()||"Unknown",email:_.email,profilePhoto:_.profile_photo_url,eventsAttended:T,articlesPublished:A,jobsPosted:P,totalAwards:M,totalScore:k,lastActivity:_.last_activity?new Date(_.last_activity).getTime():0}}),[c,d,m,h,p,g]),y=b.useMemo(()=>{let _=v;if(n){const T=n.toLowerCase();_=_.filter(A=>A.name.toLowerCase().includes(T)||A.email.toLowerCase().includes(T))}return _.sort((T,A)=>{const P=T[a],C=A[a];return a==="name"?l==="asc"?P.localeCompare(C):C.localeCompare(P):l==="asc"?P-C:C-P}),_},[v,n,a,l]),j=_=>{a===_?o(T=>T==="asc"?"desc":"asc"):(i(_),o("desc"))},w=({field:_})=>a!==_?e.jsx(z1,{className:"w-4 h-4 text-slate-400"}):l==="asc"?e.jsx(R5,{className:"w-4 h-4 text-blue-600"}):e.jsx(O5,{className:"w-4 h-4 text-blue-600"});return u?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(vt,{className:"w-8 h-8 animate-spin text-blue-600"})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(ws,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900",children:"Team Engagement Report"}),e.jsxs("p",{className:"text-slate-600",children:[(s==null?void 0:s.name)&&`${s.name} - `,y.length," ",y.length===1?"member":"members"]})]})]})}),e.jsx(le,{className:"mb-6 border-slate-200",children:e.jsx(ce,{className:"p-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx(he,{placeholder:"Search by name or email...",value:n,onChange:_=>r(_.target.value),className:"pl-10"})]})})}),y.length===0?e.jsx(le,{className:"border-slate-200",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(ws,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No members found"}),e.jsx("p",{className:"text-slate-600",children:"Try adjusting your search criteria"})]})}):e.jsx(le,{className:"border-slate-200",children:e.jsx(ce,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-700 cursor-pointer hover:bg-slate-100",onClick:()=>j("name"),children:e.jsxs("div",{className:"flex items-center gap-2",children:["Member",e.jsx(w,{field:"name"})]})}),e.jsx("th",{className:"text-center p-4 text-sm font-semibold text-slate-700 cursor-pointer hover:bg-slate-100",onClick:()=>j("eventsAttended"),children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Ns,{className:"w-4 h-4 text-green-600"}),"Events",e.jsx(w,{field:"eventsAttended"})]})}),e.jsx("th",{className:"text-center p-4 text-sm font-semibold text-slate-700 cursor-pointer hover:bg-slate-100",onClick:()=>j("articlesPublished"),children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(ns,{className:"w-4 h-4 text-purple-600"}),"Articles",e.jsx(w,{field:"articlesPublished"})]})}),e.jsx("th",{className:"text-center p-4 text-sm font-semibold text-slate-700 cursor-pointer hover:bg-slate-100",onClick:()=>j("jobsPosted"),children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(En,{className:"w-4 h-4 text-blue-600"}),"Jobs",e.jsx(w,{field:"jobsPosted"})]})}),e.jsx("th",{className:"text-center p-4 text-sm font-semibold text-slate-700 cursor-pointer hover:bg-slate-100",onClick:()=>j("totalAwards"),children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Ln,{className:"w-4 h-4 text-amber-600"}),"Awards",e.jsx(w,{field:"totalAwards"})]})}),e.jsx("th",{className:"text-center p-4 text-sm font-semibold text-slate-700 cursor-pointer hover:bg-slate-100",onClick:()=>j("totalScore"),children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:["Total Score",e.jsx(w,{field:"totalScore"})]})}),e.jsx("th",{className:"text-center p-4 text-sm font-semibold text-slate-700 cursor-pointer hover:bg-slate-100",onClick:()=>j("lastActivity"),children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(tn,{className:"w-4 h-4 text-slate-600"}),"Last Active",e.jsx(w,{field:"lastActivity"})]})})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200",children:y.map(_=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[_.profilePhoto?e.jsx("img",{src:_.profilePhoto,alt:_.name,className:"w-10 h-10 rounded-full object-cover border border-slate-200"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-200 flex items-center justify-center",children:e.jsx(Xs,{className:"w-5 h-5 text-slate-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900",children:_.name}),e.jsx("div",{className:"text-xs text-slate-500",children:_.email})]})]})}),e.jsx("td",{className:"p-4 text-center",children:e.jsx(ye,{variant:"secondary",className:"bg-green-100 text-green-700",children:_.eventsAttended})}),e.jsx("td",{className:"p-4 text-center",children:e.jsx(ye,{variant:"secondary",className:"bg-purple-100 text-purple-700",children:_.articlesPublished})}),e.jsx("td",{className:"p-4 text-center",children:e.jsx(ye,{variant:"secondary",className:"bg-blue-100 text-blue-700",children:_.jobsPosted})}),e.jsx("td",{className:"p-4 text-center",children:e.jsx(ye,{variant:"secondary",className:"bg-amber-100 text-amber-700",children:_.totalAwards})}),e.jsx("td",{className:"p-4 text-center",children:e.jsx(ye,{className:"bg-slate-900 text-white",children:_.totalScore})}),e.jsx("td",{className:"p-4 text-center",children:_.lastActivity?e.jsx("span",{className:"text-sm text-slate-600",children:jF(new Date(_.lastActivity),{addSuffix:!0})}):e.jsx("span",{className:"text-sm text-slate-400",children:"Never"})})]},_.id))})]})})})})]})})}const Bz=b.forwardRef(({className:t,...s},n)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:n,className:tt("w-full caption-bottom text-sm",t),...s})}));Bz.displayName="Table";const qz=b.forwardRef(({className:t,...s},n)=>e.jsx("thead",{ref:n,className:tt("[&_tr]:border-b",t),...s}));qz.displayName="TableHeader";const zz=b.forwardRef(({className:t,...s},n)=>e.jsx("tbody",{ref:n,className:tt("[&_tr:last-child]:border-0",t),...s}));zz.displayName="TableBody";const ACe=b.forwardRef(({className:t,...s},n)=>e.jsx("tfoot",{ref:n,className:tt("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s}));ACe.displayName="TableFooter";const k1=b.forwardRef(({className:t,...s},n)=>e.jsx("tr",{ref:n,className:tt("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s}));k1.displayName="TableRow";const kc=b.forwardRef(({className:t,...s},n)=>e.jsx("th",{ref:n,className:tt("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s}));kc.displayName="TableHead";const Ec=b.forwardRef(({className:t,...s},n)=>e.jsx("td",{ref:n,className:tt("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s}));Ec.displayName="TableCell";const MCe=b.forwardRef(({className:t,...s},n)=>e.jsx("caption",{ref:n,className:tt("mt-4 text-sm text-muted-foreground",t),...s}));MCe.displayName="TableCaption";function $z({isAdmin:t,isFeatureExcluded:s}){const[n,r]=b.useState(""),[a,i]=b.useState(!1),[l,o]=b.useState(null),[c,u]=b.useState(!1),[d,m]=b.useState(null),h=Yt(),{data:p=[],isLoading:g}=me({queryKey:["member-group-guests"],queryFn:()=>X.entities.MemberGroupGuest.list(),staleTime:60*1e3}),v=Le({mutationFn:A=>X.entities.MemberGroupGuest.create(A),onSuccess:()=>{h.invalidateQueries({queryKey:["member-group-guests"]}),i(!1),o(null),te.success("Guest created successfully")},onError:A=>{te.error("Failed to create guest: "+A.message)}}),y=Le({mutationFn:({id:A,data:P})=>X.entities.MemberGroupGuest.update(A,P),onSuccess:()=>{h.invalidateQueries({queryKey:["member-group-guests"]}),i(!1),o(null),te.success("Guest updated successfully")},onError:A=>{te.error("Failed to update guest: "+A.message)}}),j=Le({mutationFn:A=>X.entities.MemberGroupGuest.delete(A),onSuccess:()=>{h.invalidateQueries({queryKey:["member-group-guests"]}),u(!1),m(null),te.success("Guest deleted successfully")},onError:A=>{te.error("Failed to delete guest: "+A.message)}}),w=()=>{o({first_name:"",last_name:"",email:"",organisation:"",job_title:"",is_active:!0}),i(!0)},N=A=>{o({...A}),i(!0)},_=()=>{if(!l.first_name||!l.last_name||!l.email){te.error("First name, last name, and email are required");return}if(p.some(C=>C.id!==l.id&&C.email.toLowerCase()===l.email.toLowerCase())){te.error("A guest with this email address already exists");return}const P={first_name:l.first_name,last_name:l.last_name,email:l.email.toLowerCase(),organisation:l.organisation||"",job_title:l.job_title||"",is_active:l.is_active};l.id?y.mutate({id:l.id,data:P}):v.mutate(P)},T=p.filter(A=>{var C,O,M,k;const P=n.toLowerCase();return((C=A.first_name)==null?void 0:C.toLowerCase().includes(P))||((O=A.last_name)==null?void 0:O.toLowerCase().includes(P))||((M=A.email)==null?void 0:M.toLowerCase().includes(P))||((k=A.organisation)==null?void 0:k.toLowerCase().includes(P))});return t?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8",children:[e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2",children:"Member Group Guests"}),e.jsx("p",{className:"text-slate-600",children:"Manage external guests who can be assigned to member groups"})]}),e.jsxs(J,{onClick:w,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Add Guest"]})]}),e.jsx(le,{className:"border-slate-200 shadow-sm mb-6",children:e.jsx(ce,{className:"p-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx(he,{placeholder:"Search guests...",value:n,onChange:A=>r(A.target.value),className:"pl-10"})]})})}),g?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(vt,{className:"w-8 h-8 animate-spin text-blue-600"})}):T.length===0?e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(Zc,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"No Guests Found"}),e.jsx("p",{className:"text-slate-600 mb-6",children:n?"Try adjusting your search":"Add your first guest to get started"}),!n&&e.jsxs(J,{onClick:w,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Add First Guest"]})]})}):e.jsx(le,{className:"border-slate-200 shadow-sm",children:e.jsx(ce,{className:"p-0",children:e.jsxs(Bz,{children:[e.jsx(qz,{children:e.jsxs(k1,{children:[e.jsx(kc,{children:"Name"}),e.jsx(kc,{children:"Email"}),e.jsx(kc,{children:"Organisation"}),e.jsx(kc,{children:"Job Title"}),e.jsx(kc,{children:"Status"}),e.jsx(kc,{className:"text-right",children:"Actions"})]})}),e.jsx(zz,{children:T.map(A=>e.jsxs(k1,{children:[e.jsxs(Ec,{className:"font-medium",children:[A.first_name," ",A.last_name]}),e.jsx(Ec,{children:A.email}),e.jsx(Ec,{children:A.organisation||"-"}),e.jsx(Ec,{children:A.job_title||"-"}),e.jsx(Ec,{children:e.jsx(ye,{className:A.is_active!==!1?"bg-green-100 text-green-700":"bg-slate-100 text-slate-700",children:A.is_active!==!1?"Active":"Inactive"})}),e.jsx(Ec,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(J,{variant:"ghost",size:"sm",onClick:()=>N(A),children:e.jsx(As,{className:"w-4 h-4"})}),e.jsx(J,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>{m(A),u(!0)},children:e.jsx(os,{className:"w-4 h-4"})})]})})]},A.id))})]})})})]}),e.jsx(Ct,{open:a,onOpenChange:i,children:e.jsxs(Nt,{children:[e.jsx(kt,{children:e.jsx(Et,{children:l!=null&&l.id?"Edit Guest":"Add Guest"})}),l&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"first_name",children:"First Name *"}),e.jsx(he,{id:"first_name",value:l.first_name,onChange:A=>o({...l,first_name:A.target.value}),placeholder:"First name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"last_name",children:"Last Name *"}),e.jsx(he,{id:"last_name",value:l.last_name,onChange:A=>o({...l,last_name:A.target.value}),placeholder:"Last name"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"email",children:"Email *"}),e.jsx(he,{id:"email",type:"email",value:l.email,onChange:A=>o({...l,email:A.target.value}),placeholder:"email@example.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"organisation",children:"Organisation"}),e.jsx(he,{id:"organisation",value:l.organisation||"",onChange:A=>o({...l,organisation:A.target.value}),placeholder:"Organisation name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ee,{htmlFor:"job_title",children:"Job Title"}),e.jsx(he,{id:"job_title",value:l.job_title||"",onChange:A=>o({...l,job_title:A.target.value}),placeholder:"Job title"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-slate-50 rounded-lg",children:[e.jsx(cs,{id:"is_active",checked:l.is_active!==!1,onCheckedChange:A=>o({...l,is_active:A})}),e.jsx(ee,{htmlFor:"is_active",className:"cursor-pointer",children:"Active"})]})]}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(J,{onClick:_,disabled:v.isPending||y.isPending,className:"bg-blue-600 hover:bg-blue-700",children:l!=null&&l.id?"Update":"Create"})]})]})}),e.jsx(Ct,{open:c,onOpenChange:u,children:e.jsxs(Nt,{children:[e.jsx(kt,{children:e.jsx(Et,{children:"Delete Guest"})}),e.jsxs("p",{className:"text-slate-600",children:['Are you sure you want to delete "',d==null?void 0:d.first_name," ",d==null?void 0:d.last_name,'"? This will also remove them from any group assignments.']}),e.jsxs(zt,{children:[e.jsx(J,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),e.jsx(J,{onClick:()=>d&&j.mutate(d.id),disabled:j.isPending,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 md:p-8 flex items-center justify-center",children:e.jsx(le,{className:"border-red-200",children:e.jsx(ce,{className:"p-8 text-center",children:e.jsx("p",{className:"text-red-600",children:"Administrator access required"})})})})}const D6={Events:Y_,Home:eI,AdminSetup:tI,EventDetails:oI,BuyProgramTickets:NI,VerifyMagicLink:_I,TestLogin:SI,Balances:CI,Dashboard:kI,UnpackedInternationalEmployability:EI,Articles:PI,ArticleEditor:VI,ArticleView:WI,PublicAbout:HI,PublicContact:KI,PublicEvents:GI,RoleManagement:YI,MemberRoleAssignment:yB,TeamMemberManagement:bB,DiscountCodeManagement:jB,MyTickets:zB,EventSettings:$B,Bookings:UB,TourManagement:VB,History:WB,TicketSalesAnalytics:HB,Resources:z8,PublicResources:$8,ResourceSettings:U8,ResourceManagement:V8,FileManagement:W8,TagManagement:H8,JobBoard:K8,JobDetails:G8,PostJob:Y8,JobPostSuccess:Q8,JobBoardSettings:J8,JobPostingManagement:X8,MyJobPostings:Z8,PageBannerManagement:e7,IEditPageManagement:t7,IEditTemplateManagement:s7,IEditPageEditor:Gq,testpage:BNe,NavigationManagement:Yq,Preferences:Qq,MyArticles:Jq,PublicArticles:Xq,MemberHandleManagement:Zq,ButtonElements:e9,ButtonStyleManagement:t9,BorderRadiusSettings:s9,AwardManagement:n9,Team:a9,MemberDirectory:i9,WallOfFameManagement:l9,DynamicPage:o9,sharon:HNe,content:KNe,icontent:GNe,ViewPage:c9,ParamTest:d9,TeamInviteSettings:u9,OrganisationDirectory:h9,FloaterManagement:m9,FormManagement:f9,FormBuilder:p9,FormView:x9,MemberDirectorySettings:g9,FormSubmissions:cz,NewsEditor:dz,MyNews:uz,NewsView:hz,News:mz,PublicNews:fz,NewsSettings:pz,DataExport:xz,ArticleManagement:gz,SiteMap:vz,Support:yz,SupportManagement:bz,PortalNavigationManagement:jz,CategoryManagement:wz,MemberGroupManagement:Nz,ArticlesSettings:_z,GuestWriterManagement:Sz,OrganisationDirectorySettings:Cz,InstalledFonts:kz,PortalMenuManagement:Fz,MemberGroupAssignmentReport:Lz,TeamEngagementReport:Iz,MemberGroupGuestManagement:$z};function DCe(t){t.endsWith("/")&&(t=t.slice(0,-1));let s=t.split("/").pop();return s.includes("?")&&(s=s.split("?")[0]),Object.keys(D6).find(r=>r.toLowerCase()===s.toLowerCase())||Object.keys(D6)[0]}function OCe(){const t=il(),s=DCe(t.pathname);return e.jsx(Rse,{currentPageName:s,children:e.jsxs(EV,{children:[e.jsx(ct,{path:"/",element:e.jsx(Y_,{})}),e.jsx(ct,{path:"/Events",element:e.jsx(Y_,{})}),e.jsx(ct,{path:"/Home",element:e.jsx(eI,{})}),e.jsx(ct,{path:"/AdminSetup",element:e.jsx(tI,{})}),e.jsx(ct,{path:"/EventDetails",element:e.jsx(oI,{})}),e.jsx(ct,{path:"/BuyProgramTickets",element:e.jsx(NI,{})}),e.jsx(ct,{path:"/VerifyMagicLink",element:e.jsx(_I,{})}),e.jsx(ct,{path:"/TestLogin",element:e.jsx(SI,{})}),e.jsx(ct,{path:"/Balances",element:e.jsx(CI,{})}),e.jsx(ct,{path:"/Dashboard",element:e.jsx(kI,{})}),e.jsx(ct,{path:"/UnpackedInternationalEmployability",element:e.jsx(EI,{})}),e.jsx(ct,{path:"/Articles",element:e.jsx(PI,{})}),e.jsx(ct,{path:"/ArticleEditor",element:e.jsx(VI,{})}),e.jsx(ct,{path:"/ArticleView",element:e.jsx(WI,{})}),e.jsx(ct,{path:"/PublicAbout",element:e.jsx(HI,{})}),e.jsx(ct,{path:"/PublicContact",element:e.jsx(KI,{})}),e.jsx(ct,{path:"/PublicEvents",element:e.jsx(GI,{})}),e.jsx(ct,{path:"/RoleManagement",element:e.jsx(YI,{})}),e.jsx(ct,{path:"/MemberRoleAssignment",element:e.jsx(yB,{})}),e.jsx(ct,{path:"/TeamMemberManagement",element:e.jsx(bB,{})}),e.jsx(ct,{path:"/DiscountCodeManagement",element:e.jsx(jB,{})}),e.jsx(ct,{path:"/MyTickets",element:e.jsx(zB,{})}),e.jsx(ct,{path:"/EventSettings",element:e.jsx($B,{})}),e.jsx(ct,{path:"/Bookings",element:e.jsx(UB,{})}),e.jsx(ct,{path:"/TourManagement",element:e.jsx(VB,{})}),e.jsx(ct,{path:"/History",element:e.jsx(WB,{})}),e.jsx(ct,{path:"/TicketSalesAnalytics",element:e.jsx(HB,{})}),e.jsx(ct,{path:"/Resources",element:e.jsx(z8,{})}),e.jsx(ct,{path:"/PublicResources",element:e.jsx($8,{})}),e.jsx(ct,{path:"/ResourceSettings",element:e.jsx(U8,{})}),e.jsx(ct,{path:"/ResourceManagement",element:e.jsx(V8,{})}),e.jsx(ct,{path:"/FileManagement",element:e.jsx(W8,{})}),e.jsx(ct,{path:"/TagManagement",element:e.jsx(H8,{})}),e.jsx(ct,{path:"/JobBoard",element:e.jsx(K8,{})}),e.jsx(ct,{path:"/JobDetails",element:e.jsx(G8,{})}),e.jsx(ct,{path:"/PostJob",element:e.jsx(Y8,{})}),e.jsx(ct,{path:"/JobPostSuccess",element:e.jsx(Q8,{})}),e.jsx(ct,{path:"/JobBoardSettings",element:e.jsx(J8,{})}),e.jsx(ct,{path:"/JobPostingManagement",element:e.jsx(X8,{})}),e.jsx(ct,{path:"/MyJobPostings",element:e.jsx(Z8,{})}),e.jsx(ct,{path:"/PageBannerManagement",element:e.jsx(e7,{})}),e.jsx(ct,{path:"/IEditPageManagement",element:e.jsx(t7,{})}),e.jsx(ct,{path:"/IEditTemplateManagement",element:e.jsx(s7,{})}),e.jsx(ct,{path:"/IEditPageEditor",element:e.jsx(Gq,{})}),e.jsx(ct,{path:"/testpage",element:e.jsx("testpage",{})}),e.jsx(ct,{path:"/NavigationManagement",element:e.jsx(Yq,{})}),e.jsx(ct,{path:"/Preferences",element:e.jsx(Qq,{})}),e.jsx(ct,{path:"/MyArticles",element:e.jsx(Jq,{})}),e.jsx(ct,{path:"/PublicArticles",element:e.jsx(Xq,{})}),e.jsx(ct,{path:"/MemberHandleManagement",element:e.jsx(Zq,{})}),e.jsx(ct,{path:"/ButtonElements",element:e.jsx(e9,{})}),e.jsx(ct,{path:"/ButtonStyleManagement",element:e.jsx(t9,{})}),e.jsx(ct,{path:"/BorderRadiusSettings",element:e.jsx(s9,{})}),e.jsx(ct,{path:"/AwardManagement",element:e.jsx(n9,{})}),e.jsx(ct,{path:"/Team",element:e.jsx(a9,{})}),e.jsx(ct,{path:"/MemberDirectory",element:e.jsx(i9,{})}),e.jsx(ct,{path:"/WallOfFameManagement",element:e.jsx(l9,{})}),e.jsx(ct,{path:"/DynamicPage",element:e.jsx(o9,{})}),e.jsx(ct,{path:"/sharon",element:e.jsx("sharon",{})}),e.jsx(ct,{path:"/content",element:e.jsx("content",{})}),e.jsx(ct,{path:"/icontent",element:e.jsx("icontent",{})}),e.jsx(ct,{path:"/ViewPage",element:e.jsx(c9,{})}),e.jsx(ct,{path:"/ParamTest",element:e.jsx(d9,{})}),e.jsx(ct,{path:"/TeamInviteSettings",element:e.jsx(u9,{})}),e.jsx(ct,{path:"/OrganisationDirectory",element:e.jsx(h9,{})}),e.jsx(ct,{path:"/FloaterManagement",element:e.jsx(m9,{})}),e.jsx(ct,{path:"/FormManagement",element:e.jsx(f9,{})}),e.jsx(ct,{path:"/FormBuilder",element:e.jsx(p9,{})}),e.jsx(ct,{path:"/FormView",element:e.jsx(x9,{})}),e.jsx(ct,{path:"/MemberDirectorySettings",element:e.jsx(g9,{})}),e.jsx(ct,{path:"/FormSubmissions",element:e.jsx(cz,{})}),e.jsx(ct,{path:"/NewsEditor",element:e.jsx(dz,{})}),e.jsx(ct,{path:"/MyNews",element:e.jsx(uz,{})}),e.jsx(ct,{path:"/NewsView",element:e.jsx(hz,{})}),e.jsx(ct,{path:"/News",element:e.jsx(mz,{})}),e.jsx(ct,{path:"/PublicNews",element:e.jsx(fz,{})}),e.jsx(ct,{path:"/NewsSettings",element:e.jsx(pz,{})}),e.jsx(ct,{path:"/DataExport",element:e.jsx(xz,{})}),e.jsx(ct,{path:"/ArticleManagement",element:e.jsx(gz,{})}),e.jsx(ct,{path:"/SiteMap",element:e.jsx(vz,{})}),e.jsx(ct,{path:"/Support",element:e.jsx(yz,{})}),e.jsx(ct,{path:"/SupportManagement",element:e.jsx(bz,{})}),e.jsx(ct,{path:"/PortalNavigationManagement",element:e.jsx(jz,{})}),e.jsx(ct,{path:"/CategoryManagement",element:e.jsx(wz,{})}),e.jsx(ct,{path:"/MemberGroupManagement",element:e.jsx(Nz,{})}),e.jsx(ct,{path:"/ArticlesSettings",element:e.jsx(_z,{})}),e.jsx(ct,{path:"/GuestWriterManagement",element:e.jsx(Sz,{})}),e.jsx(ct,{path:"/OrganisationDirectorySettings",element:e.jsx(Cz,{})}),e.jsx(ct,{path:"/InstalledFonts",element:e.jsx(kz,{})}),e.jsx(ct,{path:"/PortalMenuManagement",element:e.jsx(Fz,{})}),e.jsx(ct,{path:"/MemberGroupAssignmentReport",element:e.jsx(Lz,{})}),e.jsx(ct,{path:"/TeamEngagementReport",element:e.jsx(Iz,{})}),e.jsx(ct,{path:"/MemberGroupGuestManagement",element:e.jsx($z,{})})]})})}function RCe(){return e.jsx(JV,{children:e.jsx(OCe,{})})}const FCe=20,LCe=1e6,Rl={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};let DN=0;function ICe(){return DN=(DN+1)%Number.MAX_VALUE,DN.toString()}const ON=new Map,O6=t=>{if(ON.has(t))return;const s=setTimeout(()=>{ON.delete(t),Jm({type:Rl.REMOVE_TOAST,toastId:t})},LCe);ON.set(t,s)},BCe=(t,s)=>{switch(s.type){case Rl.ADD_TOAST:return{...t,toasts:[s.toast,...t.toasts].slice(0,FCe)};case Rl.UPDATE_TOAST:return{...t,toasts:t.toasts.map(n=>n.id===s.toast.id?{...n,...s.toast}:n)};case Rl.DISMISS_TOAST:{const{toastId:n}=s;return n?O6(n):t.toasts.forEach(r=>{O6(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case Rl.REMOVE_TOAST:return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==s.toastId)}}},Pg=[];let Tg={toasts:[]};function Jm(t){Tg=BCe(Tg,t),Pg.forEach(s=>{s(Tg)})}function qCe({...t}){const s=ICe(),n=a=>Jm({type:Rl.UPDATE_TOAST,toast:{...a,id:s}}),r=()=>Jm({type:Rl.DISMISS_TOAST,toastId:s});return Jm({type:Rl.ADD_TOAST,toast:{...t,id:s,open:!0,onOpenChange:a=>{a||r()}}}),{id:s,dismiss:r,update:n}}function zCe(){const[t,s]=b.useState(Tg);return b.useEffect(()=>(Pg.push(s),()=>{const n=Pg.indexOf(s);n>-1&&Pg.splice(n,1)}),[t]),{...t,toast:qCe,dismiss:n=>Jm({type:Rl.DISMISS_TOAST,toastId:n})}}const Uz=b.forwardRef(({...t},s)=>e.jsx("div",{ref:s,className:"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",...t}));Uz.displayName="ToastProvider";const Vz=b.forwardRef(({...t},s)=>e.jsx("div",{ref:s,className:"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",...t}));Vz.displayName="ToastViewport";const $Ce=oh("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Wz=b.forwardRef(({className:t,variant:s,...n},r)=>e.jsx("div",{ref:r,className:tt($Ce({variant:s}),t),...n}));Wz.displayName="Toast";const UCe=b.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:tt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...s}));UCe.displayName="ToastAction";const Hz=b.forwardRef(({className:t,...s},n)=>e.jsx("button",{ref:n,className:tt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...s,children:e.jsx(_s,{className:"h-4 w-4"})}));Hz.displayName="ToastClose";const Kz=b.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:tt("text-sm font-semibold",t),...s}));Kz.displayName="ToastTitle";const Gz=b.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:tt("text-sm opacity-90",t),...s}));Gz.displayName="ToastDescription";function VCe(){const{toasts:t}=zCe();return e.jsxs(Uz,{children:[t.map(function({id:s,title:n,description:r,action:a,...i}){return e.jsxs(Wz,{...i,children:[e.jsxs("div",{className:"grid gap-1",children:[n&&e.jsx(Kz,{children:n}),r&&e.jsx(Gz,{children:r})]}),a,e.jsx(Hz,{})]},s)}),e.jsx(Vz,{})]})}function WCe(){return e.jsxs(e.Fragment,{children:[e.jsx(RCe,{}),e.jsx(VCe,{})]})}const HCe=new Yee;LU.createRoot(document.getElementById("root")).render(e.jsx(Be.StrictMode,{children:e.jsx(Qee,{client:HCe,children:e.jsx(WCe,{})})}))});export default KCe();
